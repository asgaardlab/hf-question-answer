!!python/object:huggingface_hub.community.DiscussionWithDetails
author: slavik004
conflicting_files: null
created_at: 2023-09-03 01:25:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4949c620b8b2e23b74d5c484a87bacd9.svg
      fullname: Slavik Shen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: slavik004
      type: user
    createdAt: '2023-09-03T02:25:20.000Z'
    data:
      edited: false
      editors:
      - slavik004
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.928235650062561
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4949c620b8b2e23b74d5c484a87bacd9.svg
          fullname: Slavik Shen
          isHf: false
          isPro: false
          name: slavik004
          type: user
        html: '<p>The voice returned for each string in the pipeline call is not consistent.<br>Sometime
          it''s male.  Sometime it''s female.<br>Is there any example about how to
          assign voice_preset in the pipeline? </p>

          '
        raw: "The voice returned for each string in the pipeline call is not consistent.\r\
          \nSometime it's male.  Sometime it's female. \r\nIs there any example about\
          \ how to assign voice_preset in the pipeline? "
        updatedAt: '2023-09-03T02:25:20.126Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F92F"
        users:
        - slavik004
    id: 64f3ee9072bab01948d6f88e
    type: comment
  author: slavik004
  content: "The voice returned for each string in the pipeline call is not consistent.\r\
    \nSometime it's male.  Sometime it's female. \r\nIs there any example about how\
    \ to assign voice_preset in the pipeline? "
  created_at: 2023-09-03 01:25:20+00:00
  edited: false
  hidden: false
  id: 64f3ee9072bab01948d6f88e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
      fullname: Yoach Lacombe
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ylacombe
      type: user
    createdAt: '2023-09-04T12:04:17.000Z'
    data:
      edited: false
      editors:
      - ylacombe
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6082273125648499
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
          fullname: Yoach Lacombe
          isHf: true
          isPro: false
          name: ylacombe
          type: user
        html: "<p>Hey, you can use the following snippet:</p>\n<pre><code class=\"\
          language-python\"><span class=\"hljs-keyword\">from</span> transformers\
          \ <span class=\"hljs-keyword\">import</span> (\n    AutoProcessor,\n   \
          \ pipeline,\n)\n<span class=\"hljs-comment\"># define pipeline and processor</span>\n\
          processor = AutoProcessor.from_pretrained(<span class=\"hljs-string\">\"\
          suno/bark\"</span>)\n<span class=\"hljs-comment\"># https://huggingface.co/docs/transformers/v4.32.1/en/main_classes/pipelines#transformers.TextToAudioPipeline</span>\n\
          pipe = pipeline(task=<span class=\"hljs-string\">\"text-to-audio\"</span>,\
          \ model=<span class=\"hljs-string\">\"suno/bark-small\"</span>, framework=<span\
          \ class=\"hljs-string\">\"pt\"</span>, device=<span class=\"hljs-number\"\
          >0</span>)\n\n<span class=\"hljs-comment\"># get voice preset from processor</span>\n\
          blank_inp = processor(<span class=\"hljs-string\">\"blank\"</span>, voice_preset\
          \ = <span class=\"hljs-string\">\"v2/en_speaker_1\"</span>)\n<span class=\"\
          hljs-comment\"># get voice_preset</span>\nhistory_prompt = blank_inp[<span\
          \ class=\"hljs-string\">\"history_prompt\"</span>]\nforward_params = {\n\
          \    <span class=\"hljs-string\">\"history_prompt\"</span>: history_prompt,\n\
          \    <span class=\"hljs-comment\">### you can add other generate parameters</span>\n\
          \    <span class=\"hljs-string\">\"num_beams\"</span>:<span class=\"hljs-number\"\
          >6</span>,\n    <span class=\"hljs-string\">\"do_sample\"</span>:<span class=\"\
          hljs-literal\">True</span>,\n\n}\noutput = pipe(<span class=\"hljs-string\"\
          >\"I'd like to see what diversity I can get using beam search\"</span>,\
          \ forward_params = forward_params)\n</code></pre>\n"
        raw: "Hey, you can use the following snippet:\n```python\nfrom transformers\
          \ import (\n    AutoProcessor,\n    pipeline,\n)\n# define pipeline and\
          \ processor\nprocessor = AutoProcessor.from_pretrained(\"suno/bark\")\n\
          # https://huggingface.co/docs/transformers/v4.32.1/en/main_classes/pipelines#transformers.TextToAudioPipeline\n\
          pipe = pipeline(task=\"text-to-audio\", model=\"suno/bark-small\", framework=\"\
          pt\", device=0)\n\n# get voice preset from processor\nblank_inp = processor(\"\
          blank\", voice_preset = \"v2/en_speaker_1\")\n# get voice_preset\nhistory_prompt\
          \ = blank_inp[\"history_prompt\"]\nforward_params = {\n    \"history_prompt\"\
          : history_prompt,\n    ### you can add other generate parameters\n    \"\
          num_beams\":6,\n    \"do_sample\":True,\n\n}\noutput = pipe(\"I'd like to\
          \ see what diversity I can get using beam search\", forward_params = forward_params)\n\
          ```"
        updatedAt: '2023-09-04T12:04:17.076Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - slavik004
        - tonynoce
    id: 64f5c7c11c2c6f58c91c8ad1
    type: comment
  author: ylacombe
  content: "Hey, you can use the following snippet:\n```python\nfrom transformers\
    \ import (\n    AutoProcessor,\n    pipeline,\n)\n# define pipeline and processor\n\
    processor = AutoProcessor.from_pretrained(\"suno/bark\")\n# https://huggingface.co/docs/transformers/v4.32.1/en/main_classes/pipelines#transformers.TextToAudioPipeline\n\
    pipe = pipeline(task=\"text-to-audio\", model=\"suno/bark-small\", framework=\"\
    pt\", device=0)\n\n# get voice preset from processor\nblank_inp = processor(\"\
    blank\", voice_preset = \"v2/en_speaker_1\")\n# get voice_preset\nhistory_prompt\
    \ = blank_inp[\"history_prompt\"]\nforward_params = {\n    \"history_prompt\"\
    : history_prompt,\n    ### you can add other generate parameters\n    \"num_beams\"\
    :6,\n    \"do_sample\":True,\n\n}\noutput = pipe(\"I'd like to see what diversity\
    \ I can get using beam search\", forward_params = forward_params)\n```"
  created_at: 2023-09-04 11:04:17+00:00
  edited: false
  hidden: false
  id: 64f5c7c11c2c6f58c91c8ad1
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: suno/bark-small
repo_type: model
status: open
target_branch: null
title: The voice for pipeline batch call is not consistent
