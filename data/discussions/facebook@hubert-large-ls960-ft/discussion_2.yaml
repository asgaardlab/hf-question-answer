!!python/object:huggingface_hub.community.DiscussionWithDetails
author: pulkitmehtawork
conflicting_files: null
created_at: 2023-12-19 10:04:48+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/613a226b0fd0cb3c9b9ede5a/Dhi8bmqnAiG6s1rqNxJjM.jpeg?w=200&h=200&f=face
      fullname: Pulkit Mehta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: pulkitmehtawork
      type: user
    createdAt: '2023-12-19T10:04:48.000Z'
    data:
      edited: false
      editors:
      - pulkitmehtawork
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.574721097946167
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/613a226b0fd0cb3c9b9ede5a/Dhi8bmqnAiG6s1rqNxJjM.jpeg?w=200&h=200&f=face
          fullname: Pulkit Mehta
          isHf: false
          isPro: false
          name: pulkitmehtawork
          type: user
        html: '<p>Example code:<br> import torch from transformers<br>import Wav2Vec2Processor,
          HubertForCTC<br> from datasets import load_dataset</p>

          <p>processor = Wav2Vec2Processor.from_pretrained("facebook/hubert-large-ls960-ft")<br>model
          = HubertForCTC.from_pretrained("facebook/hubert-large-ls960-ft")<br>input_values
          = processor(''array from audio file., return_tensors="pt").input_values
          </p>

          <p>How to get embeddings after this ? There is no last hidden state in the
          model .</p>

          '
        raw: "Example code:\r\n import torch from transformers \r\nimport Wav2Vec2Processor,\
          \ HubertForCTC\r\n from datasets import load_dataset\r\n\r\nprocessor =\
          \ Wav2Vec2Processor.from_pretrained(\"facebook/hubert-large-ls960-ft\")\
          \ \r\nmodel = HubertForCTC.from_pretrained(\"facebook/hubert-large-ls960-ft\"\
          ) \r\ninput_values = processor('array from audio file., return_tensors=\"\
          pt\").input_values \r\n\r\nHow to get embeddings after this ? There is no\
          \ last hidden state in the model ."
        updatedAt: '2023-12-19T10:04:48.494Z'
      numEdits: 0
      reactions: []
    id: 65816ac0365f7676d286415b
    type: comment
  author: pulkitmehtawork
  content: "Example code:\r\n import torch from transformers \r\nimport Wav2Vec2Processor,\
    \ HubertForCTC\r\n from datasets import load_dataset\r\n\r\nprocessor = Wav2Vec2Processor.from_pretrained(\"\
    facebook/hubert-large-ls960-ft\") \r\nmodel = HubertForCTC.from_pretrained(\"\
    facebook/hubert-large-ls960-ft\") \r\ninput_values = processor('array from audio\
    \ file., return_tensors=\"pt\").input_values \r\n\r\nHow to get embeddings after\
    \ this ? There is no last hidden state in the model ."
  created_at: 2023-12-19 10:04:48+00:00
  edited: false
  hidden: false
  id: 65816ac0365f7676d286415b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
      fullname: Yih-Dar SHIEH
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ydshieh
      type: user
    createdAt: '2023-12-19T15:09:38.000Z'
    data:
      edited: false
      editors:
      - ydshieh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7330664992332458
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
          fullname: Yih-Dar SHIEH
          isHf: true
          isPro: false
          name: ydshieh
          type: user
        html: "<p>Hi, the above code snippet only passes the raw inputs to the processor\
          \ (<code>processor</code>) to get the model input <code>input_values </code>.</p>\n\
          <p>You will have to load the model, and pass the inputs <code>input_values\
          \ </code> (along others maybe) to the loaded model.\n </p>\n"
        raw: "Hi, the above code snippet only passes the raw inputs to the processor\
          \ (`processor`) to get the model input `input_values `.\n\nYou will have\
          \ to load the model, and pass the inputs `input_values ` (along others maybe)\
          \ to the loaded model.\n "
        updatedAt: '2023-12-19T15:09:38.089Z'
      numEdits: 0
      reactions: []
    id: 6581b23205a2269c464b357f
    type: comment
  author: ydshieh
  content: "Hi, the above code snippet only passes the raw inputs to the processor\
    \ (`processor`) to get the model input `input_values `.\n\nYou will have to load\
    \ the model, and pass the inputs `input_values ` (along others maybe) to the loaded\
    \ model.\n "
  created_at: 2023-12-19 15:09:38+00:00
  edited: false
  hidden: false
  id: 6581b23205a2269c464b357f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/613a226b0fd0cb3c9b9ede5a/Dhi8bmqnAiG6s1rqNxJjM.jpeg?w=200&h=200&f=face
      fullname: Pulkit Mehta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: pulkitmehtawork
      type: user
    createdAt: '2023-12-20T08:45:20.000Z'
    data:
      edited: false
      editors:
      - pulkitmehtawork
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9649465084075928
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/613a226b0fd0cb3c9b9ede5a/Dhi8bmqnAiG6s1rqNxJjM.jpeg?w=200&h=200&f=face
          fullname: Pulkit Mehta
          isHf: false
          isPro: false
          name: pulkitmehtawork
          type: user
        html: '<p>yes , i mean after that , we can only get logits as that is the
          only key but how to get embeddings . </p>

          '
        raw: 'yes , i mean after that , we can only get logits as that is the only
          key but how to get embeddings . '
        updatedAt: '2023-12-20T08:45:20.578Z'
      numEdits: 0
      reactions: []
    id: 6582a9a000d5f548f22c3fa9
    type: comment
  author: pulkitmehtawork
  content: 'yes , i mean after that , we can only get logits as that is the only key
    but how to get embeddings . '
  created_at: 2023-12-20 08:45:20+00:00
  edited: false
  hidden: false
  id: 6582a9a000d5f548f22c3fa9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
      fullname: Yih-Dar SHIEH
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ydshieh
      type: user
    createdAt: '2023-12-20T14:17:53.000Z'
    data:
      edited: false
      editors:
      - ydshieh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8597877025604248
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
          fullname: Yih-Dar SHIEH
          isHf: true
          isPro: false
          name: ydshieh
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;pulkitmehtawork&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/pulkitmehtawork\"\
          >@<span class=\"underline\">pulkitmehtawork</span></a></span>\n\n\t</span></span>\
          \  Could you try adding <code>output_hidden_states=True</code> either in\
          \ the loaded model config , or during the call to the model?</p>\n<p>Let\
          \ me know if you need more info about how to do this.</p>\n"
        raw: 'Hi @pulkitmehtawork  Could you try adding `output_hidden_states=True`
          either in the loaded model config , or during the call to the model?


          Let me know if you need more info about how to do this.'
        updatedAt: '2023-12-20T14:17:53.114Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - pulkitmehtawork
    id: 6582f791326a9c04c9031172
    type: comment
  author: ydshieh
  content: 'Hi @pulkitmehtawork  Could you try adding `output_hidden_states=True`
    either in the loaded model config , or during the call to the model?


    Let me know if you need more info about how to do this.'
  created_at: 2023-12-20 14:17:53+00:00
  edited: false
  hidden: false
  id: 6582f791326a9c04c9031172
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: facebook/hubert-large-ls960-ft
repo_type: model
status: open
target_branch: null
title: How to get embeddings using hubert model
