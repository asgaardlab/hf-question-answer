!!python/object:huggingface_hub.community.DiscussionWithDetails
author: liwii
conflicting_files: []
created_at: 2023-12-01 09:23:06+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b4d0b40aedb06af5c625e61b70c6cb7a.svg
      fullname: Koki Ryu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: liwii
      type: user
    createdAt: '2023-12-01T09:23:06.000Z'
    data:
      edited: false
      editors:
      - liwii
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7558779716491699
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b4d0b40aedb06af5c625e61b70c6cb7a.svg
          fullname: Koki Ryu
          isHf: false
          isPro: false
          name: liwii
          type: user
        html: '<p>As <a href="https://huggingface.co/line-corporation/line-distilbert-base-japanese/discussions/3">discussed
          in the community</a>, current tokenizer code does not work with <code>transformers&gt;=4.34</code>,
          this is because the <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/23909">tokenizer
          refactoring</a> introduced in that version.</p>

          <p>With this change, <code>PreTrainedTokenizer.__init__()</code> starts
          to access <code>get_vocab()</code>, so <code>self.subword_tokenizer_type</code>
          needs to be initialized before <code>super().__init__()</code> of <code>DistilBertJapaneseTokenizer</code>.</p>

          <p>This issue is already fixed in <code>transformers</code> with <a rel="nofollow"
          href="https://github.com/huggingface/transformers/commit/2da8853775b61cde0894dee17c6c713aba711688">2da8853</a>.
          This PR basically follows that change.</p>

          <p>Confirmed it works with <a href="https://huggingface.co/liwii/line-distilbert-base-japanese-fork">my
          repository</a> forked from line-corporation/line-distilbert-base-japanese.</p>

          '
        raw: 'As [discussed in the community](https://huggingface.co/line-corporation/line-distilbert-base-japanese/discussions/3),
          current tokenizer code does not work with `transformers>=4.34`, this is
          because the [tokenizer refactoring](https://github.com/huggingface/transformers/pull/23909)
          introduced in that version.


          With this change, `PreTrainedTokenizer.__init__()` starts to access `get_vocab()`,
          so `self.subword_tokenizer_type` needs to be initialized before `super().__init__()`
          of `DistilBertJapaneseTokenizer`.


          This issue is already fixed in `transformers` with [2da8853](https://github.com/huggingface/transformers/commit/2da8853775b61cde0894dee17c6c713aba711688).
          This PR basically follows that change.


          Confirmed it works with [my repository](https://huggingface.co/liwii/line-distilbert-base-japanese-fork)
          forked from line-corporation/line-distilbert-base-japanese.'
        updatedAt: '2023-12-01T09:23:06.264Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - kajyuuen
    id: 6569a5fa8369400a582a1366
    type: comment
  author: liwii
  content: 'As [discussed in the community](https://huggingface.co/line-corporation/line-distilbert-base-japanese/discussions/3),
    current tokenizer code does not work with `transformers>=4.34`, this is because
    the [tokenizer refactoring](https://github.com/huggingface/transformers/pull/23909)
    introduced in that version.


    With this change, `PreTrainedTokenizer.__init__()` starts to access `get_vocab()`,
    so `self.subword_tokenizer_type` needs to be initialized before `super().__init__()`
    of `DistilBertJapaneseTokenizer`.


    This issue is already fixed in `transformers` with [2da8853](https://github.com/huggingface/transformers/commit/2da8853775b61cde0894dee17c6c713aba711688).
    This PR basically follows that change.


    Confirmed it works with [my repository](https://huggingface.co/liwii/line-distilbert-base-japanese-fork)
    forked from line-corporation/line-distilbert-base-japanese.'
  created_at: 2023-12-01 09:23:06+00:00
  edited: false
  hidden: false
  id: 6569a5fa8369400a582a1366
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/b4d0b40aedb06af5c625e61b70c6cb7a.svg
      fullname: Koki Ryu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: liwii
      type: user
    createdAt: '2023-12-01T09:23:06.000Z'
    data:
      oid: 02b287ea6ff14eb8065a58c9463f91bf3f4ae0d1
      parents:
      - bcbdf6df31d2ef58bb6288f7aa4906fc688969a5
      subject: Update distilbert_japanese_tokenizer.py
    id: 6569a5fa0000000000000000
    type: commit
  author: liwii
  created_at: 2023-12-01 09:23:06+00:00
  id: 6569a5fa0000000000000000
  oid: 02b287ea6ff14eb8065a58c9463f91bf3f4ae0d1
  summary: Update distilbert_japanese_tokenizer.py
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620de2dd9d96a640491a15d0/zmeeHVahQLjkJnnwC3-BG.jpeg?w=200&h=200&f=face
      fullname: Koga Kobayashi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: kajyuuen
      type: user
    createdAt: '2023-12-01T09:50:34.000Z'
    data:
      edited: false
      editors:
      - kajyuuen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.926930844783783
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620de2dd9d96a640491a15d0/zmeeHVahQLjkJnnwC3-BG.jpeg?w=200&h=200&f=face
          fullname: Koga Kobayashi
          isHf: false
          isPro: false
          name: kajyuuen
          type: user
        html: '<p>Looks good to me! Thank you!</p>

          '
        raw: Looks good to me! Thank you!
        updatedAt: '2023-12-01T09:50:34.686Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6569ac6a85f981c4b8ca1038
    id: 6569ac6a85f981c4b8ca102b
    type: comment
  author: kajyuuen
  content: Looks good to me! Thank you!
  created_at: 2023-12-01 09:50:34+00:00
  edited: false
  hidden: false
  id: 6569ac6a85f981c4b8ca102b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620de2dd9d96a640491a15d0/zmeeHVahQLjkJnnwC3-BG.jpeg?w=200&h=200&f=face
      fullname: Koga Kobayashi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: kajyuuen
      type: user
    createdAt: '2023-12-01T09:50:34.000Z'
    data:
      status: merged
    id: 6569ac6a85f981c4b8ca1038
    type: status-change
  author: kajyuuen
  created_at: 2023-12-01 09:50:34+00:00
  id: 6569ac6a85f981c4b8ca1038
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: 93bd4811608eecb95ffaaba957646efd9a909cc8
num: 4
repo_id: line-corporation/line-distilbert-base-japanese
repo_type: model
status: merged
target_branch: refs/heads/main
title: Update distilbert_japanese_tokenizer.py
