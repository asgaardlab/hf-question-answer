!!python/object:huggingface_hub.community.DiscussionWithDetails
author: a8nova
conflicting_files: null
created_at: 2023-09-27 21:17:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
      fullname: Alazar Shenkute
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: a8nova
      type: user
    createdAt: '2023-09-27T22:17:57.000Z'
    data:
      edited: false
      editors:
      - a8nova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9727450013160706
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
          fullname: Alazar Shenkute
          isHf: false
          isPro: false
          name: a8nova
          type: user
        html: '<p>Are there any instructions how this model was created? I want to
          create one like this to try for on-device ML.</p>

          '
        raw: Are there any instructions how this model was created? I want to create
          one like this to try for on-device ML.
        updatedAt: '2023-09-27T22:17:57.409Z'
      numEdits: 0
      reactions: []
    id: 6514aa15c75a3d4c44ed56eb
    type: comment
  author: a8nova
  content: Are there any instructions how this model was created? I want to create
    one like this to try for on-device ML.
  created_at: 2023-09-27 21:17:57+00:00
  edited: false
  hidden: false
  id: 6514aa15c75a3d4c44ed56eb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2023-09-28T08:37:06.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8943490386009216
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: '<p>These are just the random weights obtained at initialization! Nothing
          fancy!</p>

          '
        raw: These are just the random weights obtained at initialization! Nothing
          fancy!
        updatedAt: '2023-09-28T08:37:06.052Z'
      numEdits: 0
      reactions: []
    id: 65153b32329656c01eab6e17
    type: comment
  author: VictorSanh
  content: These are just the random weights obtained at initialization! Nothing fancy!
  created_at: 2023-09-28 07:37:06+00:00
  edited: false
  hidden: false
  id: 65153b32329656c01eab6e17
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
      fullname: Alazar Shenkute
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: a8nova
      type: user
    createdAt: '2023-09-28T11:23:09.000Z'
    data:
      edited: false
      editors:
      - a8nova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.48813122510910034
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
          fullname: Alazar Shenkute
          isHf: false
          isPro: false
          name: a8nova
          type: user
        html: "<p>Thank you <span data-props=\"{&quot;user&quot;:&quot;VictorSanh&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/VictorSanh\"\
          >@<span class=\"underline\">VictorSanh</span></a></span>\n\n\t</span></span>.\
          \ I can't seem to launch this model here on hugging face's inference endpoint\
          \ or on my SageMaker. Below is the log. handler.py seems to be missing?</p>\n\
          <p>2023/09/28 14:20:38 ~ Your token has been saved to /root/.cache/huggingface/token<br>2023/09/28\
          \ 14:20:40 ~ INFO | Using device CPU<br>2023/09/28 14:20:40 ~ INFO | No\
          \ custom pipeline found at /repository/handler.py<br>2023/09/28 14:20:40\
          \ ~ INFO | Initializing model from directory:/repository<br>2023/09/28 14:20:40\
          \ ~ raise KeyError(key)<br>2023/09/28 14:20:40 ~ config_class = CONFIG_MAPPING[config_dict[\"\
          model_type\"]]<br>2023/09/28 14:20:40 ~ config = AutoConfig.from_pretrained(model,\
          \ _from_pipeline=task, **hub_kwargs, **model_kwargs)<br>2023/09/28 14:20:40\
          \ ~ File \"/app/huggingface_inference_toolkit/utils.py\", line 261, in get_pipeline<br>2023/09/28\
          \ 14:20:40 ~ File \"/app/huggingface_inference_toolkit/handler.py\", line\
          \ 45, in get_inference_handler_either_custom_or_default_handler<br>2023/09/28\
          \ 14:20:40 ~ await handler()<br>lnd87 2023-09-28T11:20:40.086Z<br>2023/09/28\
          \ 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py\"\
          , line 710, in <strong>getitem</strong><br>2023/09/28 14:20:40 ~ hf_pipeline\
          \ = pipeline(task=task, model=model_dir, device=device, **kwargs)<br>2023/09/28\
          \ 14:20:40 ~ File \"/app/webservice_starlette.py\", line 57, in some_startup_task<br>2023/09/28\
          \ 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 584, in <strong>aenter</strong><br>2023/09/28 14:20:40 ~ Traceback\
          \ (most recent call last):<br>2023/09/28 14:20:40 ~ Application startup\
          \ failed. Exiting.<br>2023/09/28 14:20:40 ~ KeyError: 'idefics'<br>2023/09/28\
          \ 14:20:40 ~ self.pipeline = get_pipeline(model_dir=model_dir, task=task)<br>2023/09/28\
          \ 14:20:40 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,\
          \ task=HF_TASK)<br>2023/09/28 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 682, in startup<br>2023/09/28 14:20:40 ~ async with self.lifespan_context(app)\
          \ as maybe_state:<br>2023/09/28 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 705, in lifespan<br>2023/09/28 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py\"\
          , line 998, in from_pretrained<br>2023/09/28 14:20:40 ~ File \"/opt/conda/lib/python3.9/site-packages/transformers/pipelines/<strong>init</strong>.py\"\
          , line 705, in pipeline<br>2023/09/28 14:20:40 ~ File \"/app/huggingface_inference_toolkit/handler.py\"\
          , line 17, in <strong>init</strong><br>2023/09/28 14:20:40 ~ return HuggingFaceHandler(model_dir=model_dir,\
          \ task=task)<br>2023/09/28 14:20:40 ~ await self._router.startup()<br>2023/09/28\
          \ 14:20:42 ~ return HuggingFaceHandler(model_dir=model_dir, task=task)<br>2023/09/28\
          \ 14:20:42 ~ Traceback (most recent call last):<br>2023/09/28 14:20:42 ~\
          \ config_class = CONFIG_MAPPING[config_dict[\"model_type\"]]<br>2023/09/28\
          \ 14:20:42 ~ self.pipeline = get_pipeline(model_dir=model_dir, task=task)<br>2023/09/28\
          \ 14:20:42 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,\
          \ task=HF_TASK)<br>2023/09/28 14:20:42 ~ await self._router.startup()<br>2023/09/28\
          \ 14:20:42 ~ async with self.lifespan_context(app) as maybe_state:<br>2023/09/28\
          \ 14:20:42 ~ INFO | No custom pipeline found at /repository/handler.py</p>\n"
        raw: 'Thank you @VictorSanh. I can''t seem to launch this model here on hugging
          face''s inference endpoint or on my SageMaker. Below is the log. handler.py
          seems to be missing?


          2023/09/28 14:20:38 ~ Your token has been saved to /root/.cache/huggingface/token

          2023/09/28 14:20:40 ~ INFO | Using device CPU

          2023/09/28 14:20:40 ~ INFO | No custom pipeline found at /repository/handler.py

          2023/09/28 14:20:40 ~ INFO | Initializing model from directory:/repository

          2023/09/28 14:20:40 ~ raise KeyError(key)

          2023/09/28 14:20:40 ~ config_class = CONFIG_MAPPING[config_dict["model_type"]]

          2023/09/28 14:20:40 ~ config = AutoConfig.from_pretrained(model, _from_pipeline=task,
          **hub_kwargs, **model_kwargs)

          2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/utils.py",
          line 261, in get_pipeline

          2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/handler.py",
          line 45, in get_inference_handler_either_custom_or_default_handler

          2023/09/28 14:20:40 ~ await handler()

          lnd87 2023-09-28T11:20:40.086Z

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py",
          line 710, in __getitem__

          2023/09/28 14:20:40 ~ hf_pipeline = pipeline(task=task, model=model_dir,
          device=device, **kwargs)

          2023/09/28 14:20:40 ~ File "/app/webservice_starlette.py", line 57, in some_startup_task

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
          line 584, in __aenter__

          2023/09/28 14:20:40 ~ Traceback (most recent call last):

          2023/09/28 14:20:40 ~ Application startup failed. Exiting.

          2023/09/28 14:20:40 ~ KeyError: ''idefics''

          2023/09/28 14:20:40 ~ self.pipeline = get_pipeline(model_dir=model_dir,
          task=task)

          2023/09/28 14:20:40 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,
          task=HF_TASK)

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
          line 682, in startup

          2023/09/28 14:20:40 ~ async with self.lifespan_context(app) as maybe_state:

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
          line 705, in lifespan

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py",
          line 998, in from_pretrained

          2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/pipelines/__init__.py",
          line 705, in pipeline

          2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/handler.py",
          line 17, in __init__

          2023/09/28 14:20:40 ~ return HuggingFaceHandler(model_dir=model_dir, task=task)

          2023/09/28 14:20:40 ~ await self._router.startup()

          2023/09/28 14:20:42 ~ return HuggingFaceHandler(model_dir=model_dir, task=task)

          2023/09/28 14:20:42 ~ Traceback (most recent call last):

          2023/09/28 14:20:42 ~ config_class = CONFIG_MAPPING[config_dict["model_type"]]

          2023/09/28 14:20:42 ~ self.pipeline = get_pipeline(model_dir=model_dir,
          task=task)

          2023/09/28 14:20:42 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,
          task=HF_TASK)

          2023/09/28 14:20:42 ~ await self._router.startup()

          2023/09/28 14:20:42 ~ async with self.lifespan_context(app) as maybe_state:

          2023/09/28 14:20:42 ~ INFO | No custom pipeline found at /repository/handler.py'
        updatedAt: '2023-09-28T11:23:09.733Z'
      numEdits: 0
      reactions: []
    id: 6515621d38f6c91515069917
    type: comment
  author: a8nova
  content: 'Thank you @VictorSanh. I can''t seem to launch this model here on hugging
    face''s inference endpoint or on my SageMaker. Below is the log. handler.py seems
    to be missing?


    2023/09/28 14:20:38 ~ Your token has been saved to /root/.cache/huggingface/token

    2023/09/28 14:20:40 ~ INFO | Using device CPU

    2023/09/28 14:20:40 ~ INFO | No custom pipeline found at /repository/handler.py

    2023/09/28 14:20:40 ~ INFO | Initializing model from directory:/repository

    2023/09/28 14:20:40 ~ raise KeyError(key)

    2023/09/28 14:20:40 ~ config_class = CONFIG_MAPPING[config_dict["model_type"]]

    2023/09/28 14:20:40 ~ config = AutoConfig.from_pretrained(model, _from_pipeline=task,
    **hub_kwargs, **model_kwargs)

    2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/utils.py", line
    261, in get_pipeline

    2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/handler.py", line
    45, in get_inference_handler_either_custom_or_default_handler

    2023/09/28 14:20:40 ~ await handler()

    lnd87 2023-09-28T11:20:40.086Z

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py",
    line 710, in __getitem__

    2023/09/28 14:20:40 ~ hf_pipeline = pipeline(task=task, model=model_dir, device=device,
    **kwargs)

    2023/09/28 14:20:40 ~ File "/app/webservice_starlette.py", line 57, in some_startup_task

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
    line 584, in __aenter__

    2023/09/28 14:20:40 ~ Traceback (most recent call last):

    2023/09/28 14:20:40 ~ Application startup failed. Exiting.

    2023/09/28 14:20:40 ~ KeyError: ''idefics''

    2023/09/28 14:20:40 ~ self.pipeline = get_pipeline(model_dir=model_dir, task=task)

    2023/09/28 14:20:40 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,
    task=HF_TASK)

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
    line 682, in startup

    2023/09/28 14:20:40 ~ async with self.lifespan_context(app) as maybe_state:

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/starlette/routing.py",
    line 705, in lifespan

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/models/auto/configuration_auto.py",
    line 998, in from_pretrained

    2023/09/28 14:20:40 ~ File "/opt/conda/lib/python3.9/site-packages/transformers/pipelines/__init__.py",
    line 705, in pipeline

    2023/09/28 14:20:40 ~ File "/app/huggingface_inference_toolkit/handler.py", line
    17, in __init__

    2023/09/28 14:20:40 ~ return HuggingFaceHandler(model_dir=model_dir, task=task)

    2023/09/28 14:20:40 ~ await self._router.startup()

    2023/09/28 14:20:42 ~ return HuggingFaceHandler(model_dir=model_dir, task=task)

    2023/09/28 14:20:42 ~ Traceback (most recent call last):

    2023/09/28 14:20:42 ~ config_class = CONFIG_MAPPING[config_dict["model_type"]]

    2023/09/28 14:20:42 ~ self.pipeline = get_pipeline(model_dir=model_dir, task=task)

    2023/09/28 14:20:42 ~ inference_handler = get_inference_handler_either_custom_or_default_handler(HF_MODEL_DIR,
    task=HF_TASK)

    2023/09/28 14:20:42 ~ await self._router.startup()

    2023/09/28 14:20:42 ~ async with self.lifespan_context(app) as maybe_state:

    2023/09/28 14:20:42 ~ INFO | No custom pipeline found at /repository/handler.py'
  created_at: 2023-09-28 10:23:09+00:00
  edited: false
  hidden: false
  id: 6515621d38f6c91515069917
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
      fullname: Alazar Shenkute
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: a8nova
      type: user
    createdAt: '2023-09-28T13:00:44.000Z'
    data:
      edited: false
      editors:
      - a8nova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9537933468818665
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
          fullname: Alazar Shenkute
          isHf: false
          isPro: false
          name: a8nova
          type: user
        html: '<p>Hmm I think I misunderstood the purpose of this model, this model
          isn''t meant for inference right? Just for testing my inference code</p>

          '
        raw: Hmm I think I misunderstood the purpose of this model, this model isn't
          meant for inference right? Just for testing my inference code
        updatedAt: '2023-09-28T13:00:44.113Z'
      numEdits: 0
      reactions: []
    id: 651578fc9a03ccd899196d39
    type: comment
  author: a8nova
  content: Hmm I think I misunderstood the purpose of this model, this model isn't
    meant for inference right? Just for testing my inference code
  created_at: 2023-09-28 12:00:44+00:00
  edited: false
  hidden: false
  id: 651578fc9a03ccd899196d39
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2023-09-28T13:35:43.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9107723832130432
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: "<p>That\u2019s correct <span data-props=\"{&quot;user&quot;:&quot;a8nova&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/a8nova\"\
          >@<span class=\"underline\">a8nova</span></a></span>\n\n\t</span></span>\
          \ . We use this model mostly for testing purposes (for instance that the\
          \ whole forward pass is not buggy), it is not meant for solving real tasks\
          \ or so </p>\n"
        raw: "That\u2019s correct @a8nova . We use this model mostly for testing purposes\
          \ (for instance that the whole forward pass is not buggy), it is not meant\
          \ for solving real tasks or so "
        updatedAt: '2023-09-28T13:35:43.977Z'
      numEdits: 0
      reactions: []
    id: 6515812f67c1c6de7e221b83
    type: comment
  author: VictorSanh
  content: "That\u2019s correct @a8nova . We use this model mostly for testing purposes\
    \ (for instance that the whole forward pass is not buggy), it is not meant for\
    \ solving real tasks or so "
  created_at: 2023-09-28 12:35:43+00:00
  edited: false
  hidden: false
  id: 6515812f67c1c6de7e221b83
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
      fullname: Alazar Shenkute
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: a8nova
      type: user
    createdAt: '2023-09-28T13:37:08.000Z'
    data:
      edited: false
      editors:
      - a8nova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6227573752403259
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
          fullname: Alazar Shenkute
          isHf: false
          isPro: false
          name: a8nova
          type: user
        html: "<p>Thank you <span data-props=\"{&quot;user&quot;:&quot;VictorSanh&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/VictorSanh\"\
          >@<span class=\"underline\">VictorSanh</span></a></span>\n\n\t</span></span>!\
          \ I will close this</p>\n"
        raw: Thank you @VictorSanh! I will close this
        updatedAt: '2023-09-28T13:37:08.518Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6515818460757b8c8f6572e7
    id: 6515818460757b8c8f6572e6
    type: comment
  author: a8nova
  content: Thank you @VictorSanh! I will close this
  created_at: 2023-09-28 12:37:08+00:00
  edited: false
  hidden: false
  id: 6515818460757b8c8f6572e6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/76a76d53d8c623824b178c5da11a9ca0.svg
      fullname: Alazar Shenkute
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: a8nova
      type: user
    createdAt: '2023-09-28T13:37:08.000Z'
    data:
      status: closed
    id: 6515818460757b8c8f6572e7
    type: status-change
  author: a8nova
  created_at: 2023-09-28 12:37:08+00:00
  id: 6515818460757b8c8f6572e7
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: HuggingFaceM4/tiny-random-idefics
repo_type: model
status: closed
target_branch: null
title: How to create a "tiny-random-idefics"
