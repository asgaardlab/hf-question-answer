!!python/object:huggingface_hub.community.DiscussionWithDetails
author: iraklip
conflicting_files: null
created_at: 2023-12-03 21:13:09+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
      fullname: Irakli Popkhadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: iraklip
      type: user
    createdAt: '2023-12-03T21:13:09.000Z'
    data:
      edited: false
      editors:
      - iraklip
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8581328988075256
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
          fullname: Irakli Popkhadze
          isHf: false
          isPro: false
          name: iraklip
          type: user
        html: '<p>I''ve deployed model on HuggingFace inference endpoint and when
          testing the endpoint, I''m getting very short responses, looks like it''s
          trying to generate more but stops abruptly. </p>

          <p>E.g.<br><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/LF01VMKBbfBZpHhLXapuB.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/LF01VMKBbfBZpHhLXapuB.png"></a></p>

          <p>If I give same prompt on <a rel="nofollow" href="https://chat.lmsys.org/">https://chat.lmsys.org/</a>
          I get much longer response, any idea what''s happening and how to fix it?</p>

          <p>Also when calling endpoint from Python (and not the web UI) same happens,
          any idea how I can fix it?</p>

          '
        raw: "I've deployed model on HuggingFace inference endpoint and when testing\
          \ the endpoint, I'm getting very short responses, looks like it's trying\
          \ to generate more but stops abruptly. \r\n\r\nE.g. \r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/LF01VMKBbfBZpHhLXapuB.png)\r\
          \n\r\nIf I give same prompt on https://chat.lmsys.org/ I get much longer\
          \ response, any idea what's happening and how to fix it?\r\n\r\nAlso when\
          \ calling endpoint from Python (and not the web UI) same happens, any idea\
          \ how I can fix it?"
        updatedAt: '2023-12-03T21:13:09.936Z'
      numEdits: 0
      reactions: []
    id: 656cef65ae32721645acde2f
    type: comment
  author: iraklip
  content: "I've deployed model on HuggingFace inference endpoint and when testing\
    \ the endpoint, I'm getting very short responses, looks like it's trying to generate\
    \ more but stops abruptly. \r\n\r\nE.g. \r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/LF01VMKBbfBZpHhLXapuB.png)\r\
    \n\r\nIf I give same prompt on https://chat.lmsys.org/ I get much longer response,\
    \ any idea what's happening and how to fix it?\r\n\r\nAlso when calling endpoint\
    \ from Python (and not the web UI) same happens, any idea how I can fix it?"
  created_at: 2023-12-03 21:13:09+00:00
  edited: false
  hidden: false
  id: 656cef65ae32721645acde2f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/128ceae78490110ae41202851e84d58e.svg
      fullname: Banghua Zhu
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: banghua
      type: user
    createdAt: '2023-12-04T02:07:33.000Z'
    data:
      edited: false
      editors:
      - banghua
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7772702574729919
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/128ceae78490110ae41202851e84d58e.svg
          fullname: Banghua Zhu
          isHf: false
          isPro: false
          name: banghua
          type: user
        html: '<p>I think that''s a feature of default max_length in huggingface TGI.
          When you use python endpoint, please set additional parameters, in particular
          max_length according to here: <a href="https://huggingface.co/docs/inference-endpoints/supported_tasks#additional-parameters">https://huggingface.co/docs/inference-endpoints/supported_tasks#additional-parameters</a></p>

          '
        raw: 'I think that''s a feature of default max_length in huggingface TGI.
          When you use python endpoint, please set additional parameters, in particular
          max_length according to here: https://huggingface.co/docs/inference-endpoints/supported_tasks#additional-parameters'
        updatedAt: '2023-12-04T02:07:33.345Z'
      numEdits: 0
      reactions: []
    id: 656d346579a834846b059aad
    type: comment
  author: banghua
  content: 'I think that''s a feature of default max_length in huggingface TGI. When
    you use python endpoint, please set additional parameters, in particular max_length
    according to here: https://huggingface.co/docs/inference-endpoints/supported_tasks#additional-parameters'
  created_at: 2023-12-04 02:07:33+00:00
  edited: false
  hidden: false
  id: 656d346579a834846b059aad
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
      fullname: Irakli Popkhadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: iraklip
      type: user
    createdAt: '2023-12-05T21:56:44.000Z'
    data:
      edited: false
      editors:
      - iraklip
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9247236847877502
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
          fullname: Irakli Popkhadze
          isHf: false
          isPro: false
          name: iraklip
          type: user
        html: '<p>Thanks for prompt reply! Unfortunately that doesn''t seem to have
          any effect (unless I''m doing something wrong)</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/UWz_wljL7LNK8p1ZXNopa.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/UWz_wljL7LNK8p1ZXNopa.png"></a></p>

          <p>I''ve also tried to provide input in format of OpenChat, but still no
          luck. </p>

          '
        raw: 'Thanks for prompt reply! Unfortunately that doesn''t seem to have any
          effect (unless I''m doing something wrong)



          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/UWz_wljL7LNK8p1ZXNopa.png)


          I''ve also tried to provide input in format of OpenChat, but still no luck. '
        updatedAt: '2023-12-05T21:56:44.452Z'
      numEdits: 0
      reactions: []
    id: 656f9c9cee12f4a122957856
    type: comment
  author: iraklip
  content: 'Thanks for prompt reply! Unfortunately that doesn''t seem to have any
    effect (unless I''m doing something wrong)



    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/651973fb335b4c728b75f931/UWz_wljL7LNK8p1ZXNopa.png)


    I''ve also tried to provide input in format of OpenChat, but still no luck. '
  created_at: 2023-12-05 21:56:44+00:00
  edited: false
  hidden: false
  id: 656f9c9cee12f4a122957856
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/128ceae78490110ae41202851e84d58e.svg
      fullname: Banghua Zhu
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: banghua
      type: user
    createdAt: '2023-12-05T23:17:17.000Z'
    data:
      edited: false
      editors:
      - banghua
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8361526131629944
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/128ceae78490110ae41202851e84d58e.svg
          fullname: Banghua Zhu
          isHf: false
          isPro: false
          name: banghua
          type: user
        html: '<p>Oh my apologies, I think you need to set "max_new_tokens" in the
          parameters rather than max_length. It''s basically accepting the same parameters
          at the HF pipeline.</p>

          '
        raw: Oh my apologies, I think you need to set "max_new_tokens" in the parameters
          rather than max_length. It's basically accepting the same parameters at
          the HF pipeline.
        updatedAt: '2023-12-05T23:17:17.562Z'
      numEdits: 0
      reactions: []
    id: 656faf7d1cfe3575840a7b37
    type: comment
  author: banghua
  content: Oh my apologies, I think you need to set "max_new_tokens" in the parameters
    rather than max_length. It's basically accepting the same parameters at the HF
    pipeline.
  created_at: 2023-12-05 23:17:17+00:00
  edited: false
  hidden: false
  id: 656faf7d1cfe3575840a7b37
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f783df6b7b354eac44b1a9f154bd655c.svg
      fullname: Omar Hedeya
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: OmarHedeya
      type: user
    createdAt: '2023-12-08T16:56:35.000Z'
    data:
      edited: false
      editors:
      - OmarHedeya
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9453909993171692
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f783df6b7b354eac44b1a9f154bd655c.svg
          fullname: Omar Hedeya
          isHf: false
          isPro: false
          name: OmarHedeya
          type: user
        html: "<p>Same problem, \"max_new_tokens\" did solve it. Thanks a lot <span\
          \ data-props=\"{&quot;user&quot;:&quot;banghua&quot;}\" data-target=\"UserMention\"\
          \ class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"\
          ><span class=\"contents\"><a href=\"/banghua\">@<span class=\"underline\"\
          >banghua</span></a></span>\n\n\t</span></span> </p>\n"
        raw: 'Same problem, "max_new_tokens" did solve it. Thanks a lot @banghua '
        updatedAt: '2023-12-08T16:56:35.867Z'
      numEdits: 0
      reactions: []
    id: 65734ac3177b3b4663fef06f
    type: comment
  author: OmarHedeya
  content: 'Same problem, "max_new_tokens" did solve it. Thanks a lot @banghua '
  created_at: 2023-12-08 16:56:35+00:00
  edited: false
  hidden: false
  id: 65734ac3177b3b4663fef06f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
      fullname: Irakli Popkhadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: iraklip
      type: user
    createdAt: '2023-12-08T17:09:39.000Z'
    data:
      edited: false
      editors:
      - iraklip
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9677498936653137
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
          fullname: Irakli Popkhadze
          isHf: false
          isPro: false
          name: iraklip
          type: user
        html: "<p>Thanks for your reply <span data-props=\"{&quot;user&quot;:&quot;banghua&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/banghua\"\
          >@<span class=\"underline\">banghua</span></a></span>\n\n\t</span></span>!\
          \ I can confirm it did solve for me</p>\n"
        raw: Thanks for your reply @banghua! I can confirm it did solve for me
        updatedAt: '2023-12-08T17:09:39.594Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65734dd3b4379e65a843ebc0
    id: 65734dd3b4379e65a843ebbe
    type: comment
  author: iraklip
  content: Thanks for your reply @banghua! I can confirm it did solve for me
  created_at: 2023-12-08 17:09:39+00:00
  edited: false
  hidden: false
  id: 65734dd3b4379e65a843ebbe
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/dbcd1cf5d8a5e0521a5c03ecb0889ff5.svg
      fullname: Irakli Popkhadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: iraklip
      type: user
    createdAt: '2023-12-08T17:09:39.000Z'
    data:
      status: closed
    id: 65734dd3b4379e65a843ebc0
    type: status-change
  author: iraklip
  created_at: 2023-12-08 17:09:39+00:00
  id: 65734dd3b4379e65a843ebc0
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 20
repo_id: berkeley-nest/Starling-LM-7B-alpha
repo_type: model
status: closed
target_branch: null
title: Short responses when deployed as Inference Endpoint
