!!python/object:huggingface_hub.community.DiscussionWithDetails
author: rayyd
conflicting_files: null
created_at: 2023-06-04 12:44:11+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/84c6e02bb51094e3df43ba5b2b857d50.svg
      fullname: Ray Vive
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rayyd
      type: user
    createdAt: '2023-06-04T13:44:11.000Z'
    data:
      edited: false
      editors:
      - rayyd
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9569676518440247
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/84c6e02bb51094e3df43ba5b2b857d50.svg
          fullname: Ray Vive
          isHf: false
          isPro: false
          name: rayyd
          type: user
        html: '<p>The maximum context length is shown as 4096 in the original model
          card. Not sure how they did it. What is the maximum context length for this
          ggml version?</p>

          '
        raw: The maximum context length is shown as 4096 in the original model card.
          Not sure how they did it. What is the maximum context length for this ggml
          version?
        updatedAt: '2023-06-04T13:44:11.248Z'
      numEdits: 0
      reactions: []
    id: 647c952b92182942d7c4b858
    type: comment
  author: rayyd
  content: The maximum context length is shown as 4096 in the original model card.
    Not sure how they did it. What is the maximum context length for this ggml version?
  created_at: 2023-06-04 12:44:11+00:00
  edited: false
  hidden: false
  id: 647c952b92182942d7c4b858
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-06-04T14:04:41.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4824173152446747
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: "<p>I believe it's also 4096, although I do get a warning when I try\
          \ that:</p>\n<pre><code>[pytorch2] ubuntu@h100:/workspace/process $ /workspace/git/llama.cpp/main\
          \ -c 4096 -m airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin -n 4096\
          \ -p \"USER: write a story about llamas\\nASSISTANT:\"\nmain: warning: model\
          \ does not support context sizes greater than 2048 tokens (4096 specified);expect\
          \ poor results\nmain: build = 611 (dcb2ed4)\nmain: seed  = 1685887419\n\
          llama.cpp: loading model from airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin\n\
          llama_model_load_internal: format     = ggjt v3 (latest)\nllama_model_load_internal:\
          \ n_vocab    = 32000\nllama_model_load_internal: n_ctx      = 4096\nllama_model_load_internal:\
          \ n_embd     = 5120\nllama_model_load_internal: n_mult     = 256\nllama_model_load_internal:\
          \ n_head     = 40\nllama_model_load_internal: n_layer    = 40\nllama_model_load_internal:\
          \ n_rot      = 128\nllama_model_load_internal: ftype      = 2 (mostly Q4_0)\n\
          llama_model_load_internal: n_ff       = 13824\nllama_model_load_internal:\
          \ n_parts    = 1\nllama_model_load_internal: model size = 13B\nllama_model_load_internal:\
          \ ggml ctx size =    0.09 MB\nllama_model_load_internal: using CUDA for\
          \ GPU acceleration\nllama_model_load_internal: mem required  = 9031.70 MB\
          \ (+ 1608.00 MB per state)\nllama_model_load_internal: offloading 0 layers\
          \ to GPU\nllama_model_load_internal: total VRAM used: 0 MB\n.\nllama_init_from_file:\
          \ kv self size  = 3200.00 MB\n\nsystem_info: n_threads = 13 / 26 | AVX =\
          \ 1 | AVX2 = 1 | AVX512 = 1 | AVX512_VBMI = 1 | AVX512_VNNI = 1 | FMA =\
          \ 1 | NEON = 0 | ARM_FMA = 0 | F16C = 1 | FP16_VA = 0 | WASM_SIMD = 0 |\
          \ BLAS = 1 | SSE3 = 1 | VSX = 0 |\nsampling: repeat_last_n = 64, repeat_penalty\
          \ = 1.100000, presence_penalty = 0.000000, frequency_penalty = 0.000000,\
          \ top_k = 40, tfs_z = 1.000000, top_p = 0.950000, typical_p = 1.000000,\
          \ temp = 0.800000, mirostat = 0, mirostat_lr = 0.100000, mirostat_ent =\
          \ 5.000000\ngenerate: n_ctx = 4096, n_batch = 512, n_predict = 4096, n_keep\
          \ = 0\n\n\n USER: write a story about llamas\\nASSISTANT: Once upon a time,\
          \ i .......\n</code></pre>\n<p>But that may just be because the metadata\
          \ is not being set to tell llama.cpp that it's a 4096 context model.  </p>\n\
          <p>I will do some testing to try and work out if it really does have 4096\
          \ context</p>\n"
        raw: "I believe it's also 4096, although I do get a warning when I try that:\n\
          \n```\n[pytorch2] ubuntu@h100:/workspace/process $ /workspace/git/llama.cpp/main\
          \ -c 4096 -m airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin -n 4096\
          \ -p \"USER: write a story about llamas\\nASSISTANT:\"\nmain: warning: model\
          \ does not support context sizes greater than 2048 tokens (4096 specified);expect\
          \ poor results\nmain: build = 611 (dcb2ed4)\nmain: seed  = 1685887419\n\
          llama.cpp: loading model from airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin\n\
          llama_model_load_internal: format     = ggjt v3 (latest)\nllama_model_load_internal:\
          \ n_vocab    = 32000\nllama_model_load_internal: n_ctx      = 4096\nllama_model_load_internal:\
          \ n_embd     = 5120\nllama_model_load_internal: n_mult     = 256\nllama_model_load_internal:\
          \ n_head     = 40\nllama_model_load_internal: n_layer    = 40\nllama_model_load_internal:\
          \ n_rot      = 128\nllama_model_load_internal: ftype      = 2 (mostly Q4_0)\n\
          llama_model_load_internal: n_ff       = 13824\nllama_model_load_internal:\
          \ n_parts    = 1\nllama_model_load_internal: model size = 13B\nllama_model_load_internal:\
          \ ggml ctx size =    0.09 MB\nllama_model_load_internal: using CUDA for\
          \ GPU acceleration\nllama_model_load_internal: mem required  = 9031.70 MB\
          \ (+ 1608.00 MB per state)\nllama_model_load_internal: offloading 0 layers\
          \ to GPU\nllama_model_load_internal: total VRAM used: 0 MB\n.\nllama_init_from_file:\
          \ kv self size  = 3200.00 MB\n\nsystem_info: n_threads = 13 / 26 | AVX =\
          \ 1 | AVX2 = 1 | AVX512 = 1 | AVX512_VBMI = 1 | AVX512_VNNI = 1 | FMA =\
          \ 1 | NEON = 0 | ARM_FMA = 0 | F16C = 1 | FP16_VA = 0 | WASM_SIMD = 0 |\
          \ BLAS = 1 | SSE3 = 1 | VSX = 0 |\nsampling: repeat_last_n = 64, repeat_penalty\
          \ = 1.100000, presence_penalty = 0.000000, frequency_penalty = 0.000000,\
          \ top_k = 40, tfs_z = 1.000000, top_p = 0.950000, typical_p = 1.000000,\
          \ temp = 0.800000, mirostat = 0, mirostat_lr = 0.100000, mirostat_ent =\
          \ 5.000000\ngenerate: n_ctx = 4096, n_batch = 512, n_predict = 4096, n_keep\
          \ = 0\n\n\n USER: write a story about llamas\\nASSISTANT: Once upon a time,\
          \ i .......\n```\n\nBut that may just be because the metadata is not being\
          \ set to tell llama.cpp that it's a 4096 context model.  \n\nI will do some\
          \ testing to try and work out if it really does have 4096 context"
        updatedAt: '2023-06-04T14:04:41.168Z'
      numEdits: 0
      reactions: []
    id: 647c99f9c788767ab5cedafd
    type: comment
  author: TheBloke
  content: "I believe it's also 4096, although I do get a warning when I try that:\n\
    \n```\n[pytorch2] ubuntu@h100:/workspace/process $ /workspace/git/llama.cpp/main\
    \ -c 4096 -m airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin -n 4096 -p\
    \ \"USER: write a story about llamas\\nASSISTANT:\"\nmain: warning: model does\
    \ not support context sizes greater than 2048 tokens (4096 specified);expect poor\
    \ results\nmain: build = 611 (dcb2ed4)\nmain: seed  = 1685887419\nllama.cpp: loading\
    \ model from airoboros-13b/ggml/airoboros-13b-gpt4.ggmlv3.q4_0.bin\nllama_model_load_internal:\
    \ format     = ggjt v3 (latest)\nllama_model_load_internal: n_vocab    = 32000\n\
    llama_model_load_internal: n_ctx      = 4096\nllama_model_load_internal: n_embd\
    \     = 5120\nllama_model_load_internal: n_mult     = 256\nllama_model_load_internal:\
    \ n_head     = 40\nllama_model_load_internal: n_layer    = 40\nllama_model_load_internal:\
    \ n_rot      = 128\nllama_model_load_internal: ftype      = 2 (mostly Q4_0)\n\
    llama_model_load_internal: n_ff       = 13824\nllama_model_load_internal: n_parts\
    \    = 1\nllama_model_load_internal: model size = 13B\nllama_model_load_internal:\
    \ ggml ctx size =    0.09 MB\nllama_model_load_internal: using CUDA for GPU acceleration\n\
    llama_model_load_internal: mem required  = 9031.70 MB (+ 1608.00 MB per state)\n\
    llama_model_load_internal: offloading 0 layers to GPU\nllama_model_load_internal:\
    \ total VRAM used: 0 MB\n.\nllama_init_from_file: kv self size  = 3200.00 MB\n\
    \nsystem_info: n_threads = 13 / 26 | AVX = 1 | AVX2 = 1 | AVX512 = 1 | AVX512_VBMI\
    \ = 1 | AVX512_VNNI = 1 | FMA = 1 | NEON = 0 | ARM_FMA = 0 | F16C = 1 | FP16_VA\
    \ = 0 | WASM_SIMD = 0 | BLAS = 1 | SSE3 = 1 | VSX = 0 |\nsampling: repeat_last_n\
    \ = 64, repeat_penalty = 1.100000, presence_penalty = 0.000000, frequency_penalty\
    \ = 0.000000, top_k = 40, tfs_z = 1.000000, top_p = 0.950000, typical_p = 1.000000,\
    \ temp = 0.800000, mirostat = 0, mirostat_lr = 0.100000, mirostat_ent = 5.000000\n\
    generate: n_ctx = 4096, n_batch = 512, n_predict = 4096, n_keep = 0\n\n\n USER:\
    \ write a story about llamas\\nASSISTANT: Once upon a time, i .......\n```\n\n\
    But that may just be because the metadata is not being set to tell llama.cpp that\
    \ it's a 4096 context model.  \n\nI will do some testing to try and work out if\
    \ it really does have 4096 context"
  created_at: 2023-06-04 13:04:41+00:00
  edited: false
  hidden: false
  id: 647c99f9c788767ab5cedafd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-06-04T14:17:56.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9865049719810486
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>Actually maybe not. I keep getting complete gibberish with -n 4096.</p>

          <p>I think maybe GGML doesn''t support this right now.  I will ask the llama.cpp
          about it.</p>

          '
        raw: 'Actually maybe not. I keep getting complete gibberish with -n 4096.


          I think maybe GGML doesn''t support this right now.  I will ask the llama.cpp
          about it.'
        updatedAt: '2023-06-04T14:17:56.726Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - rayyd
    id: 647c9d1483c62f32491b4416
    type: comment
  author: TheBloke
  content: 'Actually maybe not. I keep getting complete gibberish with -n 4096.


    I think maybe GGML doesn''t support this right now.  I will ask the llama.cpp
    about it.'
  created_at: 2023-06-04 13:17:56+00:00
  edited: false
  hidden: false
  id: 647c9d1483c62f32491b4416
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-06-04T14:24:16.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.982914924621582
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>I''ve put a note in the README to that effect</p>

          '
        raw: I've put a note in the README to that effect
        updatedAt: '2023-06-04T14:24:16.023Z'
      numEdits: 0
      reactions: []
    id: 647c9e9083c62f32491b6ef6
    type: comment
  author: TheBloke
  content: I've put a note in the README to that effect
  created_at: 2023-06-04 13:24:16+00:00
  edited: false
  hidden: false
  id: 647c9e9083c62f32491b6ef6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/84c6e02bb51094e3df43ba5b2b857d50.svg
      fullname: Ray Vive
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rayyd
      type: user
    createdAt: '2023-06-04T16:18:09.000Z'
    data:
      edited: false
      editors:
      - rayyd
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9319937825202942
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/84c6e02bb51094e3df43ba5b2b857d50.svg
          fullname: Ray Vive
          isHf: false
          isPro: false
          name: rayyd
          type: user
        html: '<p>Thank you for your work!</p>

          '
        raw: Thank you for your work!
        updatedAt: '2023-06-04T16:18:09.733Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - TheBloke
        - jrell
      relatedEventId: 647cb94160dfe0f35d568ffd
    id: 647cb94160dfe0f35d568ffa
    type: comment
  author: rayyd
  content: Thank you for your work!
  created_at: 2023-06-04 15:18:09+00:00
  edited: false
  hidden: false
  id: 647cb94160dfe0f35d568ffa
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/84c6e02bb51094e3df43ba5b2b857d50.svg
      fullname: Ray Vive
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rayyd
      type: user
    createdAt: '2023-06-04T16:18:09.000Z'
    data:
      status: closed
    id: 647cb94160dfe0f35d568ffd
    type: status-change
  author: rayyd
  created_at: 2023-06-04 15:18:09+00:00
  id: 647cb94160dfe0f35d568ffd
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: TheBloke/airoboros-13b-gpt4-GGML
repo_type: model
status: closed
target_branch: null
title: Maximum context length mismatch
