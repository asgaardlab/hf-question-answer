!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ayan4m1
conflicting_files: null
created_at: 2022-09-11 22:27:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-11T23:27:18.000Z'
    data:
      edited: true
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: '<p>Hello, I am trying to get this model to run using the diffusers
          StableDiffusionPipeline/StableDiffusionImg2ImgPipeline. As best I can tell,
          there are two formats for models - CKPT and then "directory with model_info.json"
          - and diffusers only supports loading the latter using <code>from_pretrained</code>
          - is there anything I''m missing or straightforward script that could be
          added to the documentation that shows how to use this model with the diffusers
          package?</p>

          <p>EDIT: Thank you so much for this work!</p>

          '
        raw: 'Hello, I am trying to get this model to run using the diffusers StableDiffusionPipeline/StableDiffusionImg2ImgPipeline.
          As best I can tell, there are two formats for models - CKPT and then "directory
          with model_info.json" - and diffusers only supports loading the latter using
          `from_pretrained` - is there anything I''m missing or straightforward script
          that could be added to the documentation that shows how to use this model
          with the diffusers package?


          EDIT: Thank you so much for this work!'
        updatedAt: '2022-09-11T23:27:34.304Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - ai-girls-selfie
    id: 631e6ed66d6a5870f3d89da6
    type: comment
  author: ayan4m1
  content: 'Hello, I am trying to get this model to run using the diffusers StableDiffusionPipeline/StableDiffusionImg2ImgPipeline.
    As best I can tell, there are two formats for models - CKPT and then "directory
    with model_info.json" - and diffusers only supports loading the latter using `from_pretrained`
    - is there anything I''m missing or straightforward script that could be added
    to the documentation that shows how to use this model with the diffusers package?


    EDIT: Thank you so much for this work!'
  created_at: 2022-09-11 22:27:18+00:00
  edited: true
  hidden: false
  id: 631e6ed66d6a5870f3d89da6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-13T07:29:07.000Z'
    data:
      edited: false
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: '<p>I haven''t tried it myself, but it looks like there is a PR for
          checkpoint conversion:<br><a rel="nofollow" href="https://github.com/huggingface/diffusers/pull/154">https://github.com/huggingface/diffusers/pull/154</a></p>

          '
        raw: 'I haven''t tried it myself, but it looks like there is a PR for checkpoint
          conversion:

          https://github.com/huggingface/diffusers/pull/154'
        updatedAt: '2022-09-13T07:29:07.125Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - ayan4m1
    id: 63203143260e691cfc199610
    type: comment
  author: naclbit
  content: 'I haven''t tried it myself, but it looks like there is a PR for checkpoint
    conversion:

    https://github.com/huggingface/diffusers/pull/154'
  created_at: 2022-09-13 06:29:07+00:00
  edited: false
  hidden: false
  id: 63203143260e691cfc199610
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-13T13:35:03.000Z'
    data:
      edited: false
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: '<p>That''s great, is there any chance you could provide the "YAML config
          file corresponding to the original architecture"? It''s a required argument
          for that script.</p>

          '
        raw: That's great, is there any chance you could provide the "YAML config
          file corresponding to the original architecture"? It's a required argument
          for that script.
        updatedAt: '2022-09-13T13:35:03.281Z'
      numEdits: 0
      reactions: []
    id: 6320870732d07b8b1b4dd39e
    type: comment
  author: ayan4m1
  content: That's great, is there any chance you could provide the "YAML config file
    corresponding to the original architecture"? It's a required argument for that
    script.
  created_at: 2022-09-13 12:35:03+00:00
  edited: false
  hidden: false
  id: 6320870732d07b8b1b4dd39e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-13T13:59:29.000Z'
    data:
      edited: false
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: '<p><a rel="nofollow" href="https://github.com/CompVis/stable-diffusion/blob/main/configs/stable-diffusion/v1-inference.yaml">https://github.com/CompVis/stable-diffusion/blob/main/configs/stable-diffusion/v1-inference.yaml</a></p>

          <p>v1-inference.yaml from the original SD repo should work.</p>

          '
        raw: 'https://github.com/CompVis/stable-diffusion/blob/main/configs/stable-diffusion/v1-inference.yaml


          v1-inference.yaml from the original SD repo should work.'
        updatedAt: '2022-09-13T13:59:29.340Z'
      numEdits: 0
      reactions: []
    id: 63208cc19534661abd02758f
    type: comment
  author: naclbit
  content: 'https://github.com/CompVis/stable-diffusion/blob/main/configs/stable-diffusion/v1-inference.yaml


    v1-inference.yaml from the original SD repo should work.'
  created_at: 2022-09-13 12:59:29+00:00
  edited: false
  hidden: false
  id: 63208cc19534661abd02758f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-13T14:10:47.000Z'
    data:
      edited: false
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: '<p>Thanks! Unfortunately, it seems like that YAML is missing configs
          for <code>{''safety_checker'', ''text_encoder'', ''vae'', ''feature_extractor''}</code>
          - I get the following when trying to initialize a pipeline with the model
          that the script generates:</p>

          <blockquote>

          <p>TypeError: <strong>init</strong>() missing 4 required positional arguments:
          ''vae'', ''text_encoder'', ''safety_checker'', and ''feature_extractor''</p>

          </blockquote>

          <p>Any thoughts? Thanks so much for your help!</p>

          '
        raw: 'Thanks! Unfortunately, it seems like that YAML is missing configs for
          `{''safety_checker'', ''text_encoder'', ''vae'', ''feature_extractor''}`
          - I get the following when trying to initialize a pipeline with the model
          that the script generates:


          > TypeError: __init__() missing 4 required positional arguments: ''vae'',
          ''text_encoder'', ''safety_checker'', and ''feature_extractor''


          Any thoughts? Thanks so much for your help!'
        updatedAt: '2022-09-13T14:10:47.292Z'
      numEdits: 0
      reactions: []
    id: 63208f679f7a9f2208c719a5
    type: comment
  author: ayan4m1
  content: 'Thanks! Unfortunately, it seems like that YAML is missing configs for
    `{''safety_checker'', ''text_encoder'', ''vae'', ''feature_extractor''}` - I get
    the following when trying to initialize a pipeline with the model that the script
    generates:


    > TypeError: __init__() missing 4 required positional arguments: ''vae'', ''text_encoder'',
    ''safety_checker'', and ''feature_extractor''


    Any thoughts? Thanks so much for your help!'
  created_at: 2022-09-13 13:10:47+00:00
  edited: false
  hidden: false
  id: 63208f679f7a9f2208c719a5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-13T15:06:14.000Z'
    data:
      edited: false
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: '<p>Can you try downloading the original (diffusers) SD1.4 repo and
          merge the missing/required files?</p>

          <p>This repo is intended to be used with latent-diffusion/stable-diffusion
          repos rather than diffusers, and if anyone is willing to upload a converted
          checkpoint I''d welcome.</p>

          '
        raw: 'Can you try downloading the original (diffusers) SD1.4 repo and merge
          the missing/required files?


          This repo is intended to be used with latent-diffusion/stable-diffusion
          repos rather than diffusers, and if anyone is willing to upload a converted
          checkpoint I''d welcome.'
        updatedAt: '2022-09-13T15:06:14.722Z'
      numEdits: 0
      reactions: []
    id: 63209c6632d07b8b1b4e9493
    type: comment
  author: naclbit
  content: 'Can you try downloading the original (diffusers) SD1.4 repo and merge
    the missing/required files?


    This repo is intended to be used with latent-diffusion/stable-diffusion repos
    rather than diffusers, and if anyone is willing to upload a converted checkpoint
    I''d welcome.'
  created_at: 2022-09-13 14:06:14+00:00
  edited: false
  hidden: false
  id: 63209c6632d07b8b1b4e9493
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
      fullname: hysts
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hysts
      type: user
    createdAt: '2022-09-13T15:20:00.000Z'
    data:
      edited: false
      editors:
      - hysts
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
          fullname: hysts
          isHf: true
          isPro: false
          name: hysts
          type: user
        html: "<p>Hi, <span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\"\
          >@<span class=\"underline\">ayan4m1</span></a></span>\n\n\t</span></span>\
          \ <span data-props=\"{&quot;user&quot;:&quot;naclbit&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/naclbit\">@<span class=\"\
          underline\">naclbit</span></a></span>\n\n\t</span></span><br>I converted\
          \ the model a while ago, and if I remember correctly, I think the following\
          \ is what I did after running the script mentioned above:</p>\n<ul>\n<li>Rename\
          \ <code>vqvae</code> to <code>vae</code> and <code>bert</code> to <code>text_encoder</code>\
          \ in the config file.</li>\n<li>Rename the directories <code>vqvae</code>\
          \ to <code>vae</code> and <code>bert</code> to <code>text_encoder</code>.</li>\n\
          <li>Copy the directories <code>feature_extractor</code> and <code>safety_checker</code>\
          \ from the directory of diffusers' version of Stable Diffusion model.</li>\n\
          </ul>\n<p>The converted model seems to be working fine, but I haven't checked\
          \ if the generated results are the same with the original and converted\
          \ models.</p>\n<p>Hope this helps.</p>\n"
        raw: "Hi, @ayan4m1 @naclbit \nI converted the model a while ago, and if I\
          \ remember correctly, I think the following is what I did after running\
          \ the script mentioned above:\n\n- Rename `vqvae` to `vae` and `bert` to\
          \ `text_encoder` in the config file.\n- Rename the directories `vqvae` to\
          \ `vae` and `bert` to `text_encoder`.\n- Copy the directories `feature_extractor`\
          \ and `safety_checker` from the directory of diffusers' version of Stable\
          \ Diffusion model.\n\nThe converted model seems to be working fine, but\
          \ I haven't checked if the generated results are the same with the original\
          \ and converted models.\n\nHope this helps."
        updatedAt: '2022-09-13T15:20:00.879Z'
      numEdits: 0
      reactions: []
    id: 63209fa044a1fe6c92c91360
    type: comment
  author: hysts
  content: "Hi, @ayan4m1 @naclbit \nI converted the model a while ago, and if I remember\
    \ correctly, I think the following is what I did after running the script mentioned\
    \ above:\n\n- Rename `vqvae` to `vae` and `bert` to `text_encoder` in the config\
    \ file.\n- Rename the directories `vqvae` to `vae` and `bert` to `text_encoder`.\n\
    - Copy the directories `feature_extractor` and `safety_checker` from the directory\
    \ of diffusers' version of Stable Diffusion model.\n\nThe converted model seems\
    \ to be working fine, but I haven't checked if the generated results are the same\
    \ with the original and converted models.\n\nHope this helps."
  created_at: 2022-09-13 14:20:00+00:00
  edited: false
  hidden: false
  id: 63209fa044a1fe6c92c91360
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
      fullname: hysts
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hysts
      type: user
    createdAt: '2022-09-13T15:20:44.000Z'
    data:
      edited: false
      editors:
      - hysts
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
          fullname: hysts
          isHf: true
          isPro: false
          name: hysts
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;naclbit&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/naclbit\">@<span class=\"\
          underline\">naclbit</span></a></span>\n\n\t</span></span> Awesome work,\
          \ btw.</p>\n"
        raw: '@naclbit Awesome work, btw.'
        updatedAt: '2022-09-13T15:20:44.324Z'
      numEdits: 0
      reactions: []
    id: 63209fcc9f7a9f2208c7b113
    type: comment
  author: hysts
  content: '@naclbit Awesome work, btw.'
  created_at: 2022-09-13 14:20:44+00:00
  edited: false
  hidden: false
  id: 63209fcc9f7a9f2208c7b113
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-13T15:28:31.000Z'
    data:
      edited: false
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;hysts&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/hysts\">@<span class=\"\
          underline\">hysts</span></a></span>\n\n\t</span></span> Thank you so much,\
          \ that worked perfectly!</p>\n<p><span data-props=\"{&quot;user&quot;:&quot;naclbit&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/naclbit\"\
          >@<span class=\"underline\">naclbit</span></a></span>\n\n\t</span></span>\
          \ I have the converted checkpoint ready, would you prefer me to make a pull\
          \ request against this repository or make a new one?</p>\n"
        raw: '@hysts Thank you so much, that worked perfectly!


          @naclbit I have the converted checkpoint ready, would you prefer me to make
          a pull request against this repository or make a new one?'
        updatedAt: '2022-09-13T15:28:31.681Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - patrickvonplaten
        - naclbit
      - count: 1
        reaction: "\U0001F44D"
        users:
        - hysts
    id: 6320a19f19a19a5bd486db0a
    type: comment
  author: ayan4m1
  content: '@hysts Thank you so much, that worked perfectly!


    @naclbit I have the converted checkpoint ready, would you prefer me to make a
    pull request against this repository or make a new one?'
  created_at: 2022-09-13 14:28:31+00:00
  edited: false
  hidden: false
  id: 6320a19f19a19a5bd486db0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
      fullname: hysts
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hysts
      type: user
    createdAt: '2022-09-14T11:12:55.000Z'
    data:
      edited: false
      editors:
      - hysts
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
          fullname: hysts
          isHf: true
          isPro: false
          name: hysts
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\">@<span class=\"\
          underline\">ayan4m1</span></a></span>\n\n\t</span></span><br>FYI, I realized\
          \ that you don't have to manually rename or copy files by applying the following\
          \ patch to the <code>ldm-txt2im-conv-script</code> branch of <code>diffusers</code>.</p>\n\
          <pre><code class=\"language-diff\"><span class=\"hljs-comment\">--- a/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py</span>\n\
          <span class=\"hljs-comment\">+++ b/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py</span>\n\
          <span class=\"hljs-meta\">@@ -22,9 +22,10 @@</span> try:\n except ImportError:\n\
          \     raise ImportError(\"OmegaConf is required to convert the LDM checkpoints.\
          \ Please install it with `pip install OmegaConf`.\")\n\n<span class=\"hljs-deletion\"\
          >-from transformers import  BertTokenizerFast, CLIPTokenizer, CLIPTextModel</span>\n\
          <span class=\"hljs-deletion\">-from diffusers import LDMTextToImagePipeline,\
          \ AutoencoderKL, UNet2DConditionModel, DDIMScheduler</span>\n<span class=\"\
          hljs-addition\">+from transformers import  BertTokenizerFast, CLIPFeatureExtractor,\
          \ CLIPTokenizer, CLIPTextModel</span>\n<span class=\"hljs-addition\">+from\
          \ diffusers import StableDiffusionPipeline, AutoencoderKL, UNet2DConditionModel,\
          \ DDIMScheduler</span>\n from diffusers.pipelines.latent_diffusion.pipeline_latent_diffusion\
          \ import LDMBertModel, LDMBertConfig\n<span class=\"hljs-addition\">+from\
          \ diffusers.pipelines.stable_diffusion import StableDiffusionSafetyChecker</span>\n\
          \n\n def shave_segments(path, n_shave_prefix_segments=1):\n<span class=\"\
          hljs-meta\">@@ -595,6 +596,8 @@</span> if __name__ == \"__main__\":\n  \
          \       tokenizer = BertTokenizerFast.from_pretrained(\"bert-base-uncased\"\
          )\n\n     scheduler = create_diffusers_schedular(original_config)\n<span\
          \ class=\"hljs-deletion\">-    pipe = LDMTextToImagePipeline(vqvae=vae,\
          \ bert=text_model, tokenizer=tokenizer, unet=unet, scheduler=scheduler)</span>\n\
          <span class=\"hljs-addition\">+    safety_checker = StableDiffusionSafetyChecker.from_pretrained('CompVis/stable-diffusion-safety-checker')</span>\n\
          <span class=\"hljs-addition\">+    feature_extractor = CLIPFeatureExtractor()</span>\n\
          <span class=\"hljs-addition\">+    pipe = StableDiffusionPipeline(vae=vae,\
          \ text_encoder=text_model, tokenizer=tokenizer, unet=unet, scheduler=scheduler,\
          \ safety_checker=safety_checker, feature_extractor=feature_extractor)</span>\n\
          \     pipe.save_pretrained(args.dump_path)\n</code></pre>\n<p>Related issue:\
          \ <a rel=\"nofollow\" href=\"https://github.com/huggingface/diffusers/issues/491\"\
          >https://github.com/huggingface/diffusers/issues/491</a></p>\n"
        raw: "@ayan4m1 \nFYI, I realized that you don't have to manually rename or\
          \ copy files by applying the following patch to the `ldm-txt2im-conv-script`\
          \ branch of `diffusers`.\n\n```diff\n--- a/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py\n\
          +++ b/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py\n\
          @@ -22,9 +22,10 @@ try:\n except ImportError:\n     raise ImportError(\"\
          OmegaConf is required to convert the LDM checkpoints. Please install it\
          \ with `pip install OmegaConf`.\")\n\n-from transformers import  BertTokenizerFast,\
          \ CLIPTokenizer, CLIPTextModel\n-from diffusers import LDMTextToImagePipeline,\
          \ AutoencoderKL, UNet2DConditionModel, DDIMScheduler\n+from transformers\
          \ import  BertTokenizerFast, CLIPFeatureExtractor, CLIPTokenizer, CLIPTextModel\n\
          +from diffusers import StableDiffusionPipeline, AutoencoderKL, UNet2DConditionModel,\
          \ DDIMScheduler\n from diffusers.pipelines.latent_diffusion.pipeline_latent_diffusion\
          \ import LDMBertModel, LDMBertConfig\n+from diffusers.pipelines.stable_diffusion\
          \ import StableDiffusionSafetyChecker\n\n\n def shave_segments(path, n_shave_prefix_segments=1):\n\
          @@ -595,6 +596,8 @@ if __name__ == \"__main__\":\n         tokenizer = BertTokenizerFast.from_pretrained(\"\
          bert-base-uncased\")\n\n     scheduler = create_diffusers_schedular(original_config)\n\
          -    pipe = LDMTextToImagePipeline(vqvae=vae, bert=text_model, tokenizer=tokenizer,\
          \ unet=unet, scheduler=scheduler)\n+    safety_checker = StableDiffusionSafetyChecker.from_pretrained('CompVis/stable-diffusion-safety-checker')\n\
          +    feature_extractor = CLIPFeatureExtractor()\n+    pipe = StableDiffusionPipeline(vae=vae,\
          \ text_encoder=text_model, tokenizer=tokenizer, unet=unet, scheduler=scheduler,\
          \ safety_checker=safety_checker, feature_extractor=feature_extractor)\n\
          \     pipe.save_pretrained(args.dump_path)\n```\n\nRelated issue: https://github.com/huggingface/diffusers/issues/491"
        updatedAt: '2022-09-14T11:12:55.822Z'
      numEdits: 0
      reactions: []
    id: 6321b7376b1992383fa0aea3
    type: comment
  author: hysts
  content: "@ayan4m1 \nFYI, I realized that you don't have to manually rename or copy\
    \ files by applying the following patch to the `ldm-txt2im-conv-script` branch\
    \ of `diffusers`.\n\n```diff\n--- a/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py\n\
    +++ b/scripts/convert_ldm_txt2img_original_checkpoint_to_diffusers.py\n@@ -22,9\
    \ +22,10 @@ try:\n except ImportError:\n     raise ImportError(\"OmegaConf is\
    \ required to convert the LDM checkpoints. Please install it with `pip install\
    \ OmegaConf`.\")\n\n-from transformers import  BertTokenizerFast, CLIPTokenizer,\
    \ CLIPTextModel\n-from diffusers import LDMTextToImagePipeline, AutoencoderKL,\
    \ UNet2DConditionModel, DDIMScheduler\n+from transformers import  BertTokenizerFast,\
    \ CLIPFeatureExtractor, CLIPTokenizer, CLIPTextModel\n+from diffusers import StableDiffusionPipeline,\
    \ AutoencoderKL, UNet2DConditionModel, DDIMScheduler\n from diffusers.pipelines.latent_diffusion.pipeline_latent_diffusion\
    \ import LDMBertModel, LDMBertConfig\n+from diffusers.pipelines.stable_diffusion\
    \ import StableDiffusionSafetyChecker\n\n\n def shave_segments(path, n_shave_prefix_segments=1):\n\
    @@ -595,6 +596,8 @@ if __name__ == \"__main__\":\n         tokenizer = BertTokenizerFast.from_pretrained(\"\
    bert-base-uncased\")\n\n     scheduler = create_diffusers_schedular(original_config)\n\
    -    pipe = LDMTextToImagePipeline(vqvae=vae, bert=text_model, tokenizer=tokenizer,\
    \ unet=unet, scheduler=scheduler)\n+    safety_checker = StableDiffusionSafetyChecker.from_pretrained('CompVis/stable-diffusion-safety-checker')\n\
    +    feature_extractor = CLIPFeatureExtractor()\n+    pipe = StableDiffusionPipeline(vae=vae,\
    \ text_encoder=text_model, tokenizer=tokenizer, unet=unet, scheduler=scheduler,\
    \ safety_checker=safety_checker, feature_extractor=feature_extractor)\n     pipe.save_pretrained(args.dump_path)\n\
    ```\n\nRelated issue: https://github.com/huggingface/diffusers/issues/491"
  created_at: 2022-09-14 10:12:55+00:00
  edited: false
  hidden: false
  id: 6321b7376b1992383fa0aea3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-14T14:56:37.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>Hey, </p>

          <p>Happy to help with the conversion to <code>diffusers</code> if you want!</p>

          '
        raw: "Hey, \n\nHappy to help with the conversion to `diffusers` if you want!"
        updatedAt: '2022-09-14T14:56:37.657Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - naclbit
    id: 6321eba57bb41a713dac21bc
    type: comment
  author: patrickvonplaten
  content: "Hey, \n\nHappy to help with the conversion to `diffusers` if you want!"
  created_at: 2022-09-14 13:56:37+00:00
  edited: false
  hidden: false
  id: 6321eba57bb41a713dac21bc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-14T14:57:35.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;hysts&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/hysts\">@<span class=\"\
          underline\">hysts</span></a></span>\n\n\t</span></span>  - should we maybe\
          \ do a clean stable diffusion script that makes conversion a bit easier?\
          \ Happy to help with a PR that adds a clean script</p>\n"
        raw: '@hysts  - should we maybe do a clean stable diffusion script that makes
          conversion a bit easier? Happy to help with a PR that adds a clean script'
        updatedAt: '2022-09-14T14:57:35.097Z'
      numEdits: 0
      reactions: []
    id: 6321ebdfb97c618f9a5ee55f
    type: comment
  author: patrickvonplaten
  content: '@hysts  - should we maybe do a clean stable diffusion script that makes
    conversion a bit easier? Happy to help with a PR that adds a clean script'
  created_at: 2022-09-14 13:57:35+00:00
  edited: false
  hidden: false
  id: 6321ebdfb97c618f9a5ee55f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-14T15:01:03.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>I think it would make sense to put everything in the same repo or
          else we could also have two branches <code>"compvis"</code> and <code>"diffusers"</code>
          - up to you!</p>

          '
        raw: I think it would make sense to put everything in the same repo or else
          we could also have two branches `"compvis"` and `"diffusers"` - up to you!
        updatedAt: '2022-09-14T15:01:03.860Z'
      numEdits: 0
      reactions: []
    id: 6321ecafe4399dd613984962
    type: comment
  author: patrickvonplaten
  content: I think it would make sense to put everything in the same repo or else
    we could also have two branches `"compvis"` and `"diffusers"` - up to you!
  created_at: 2022-09-14 14:01:03+00:00
  edited: false
  hidden: false
  id: 6321ecafe4399dd613984962
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-14T15:07:49.000Z'
    data:
      edited: false
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\">@<span class=\"\
          underline\">ayan4m1</span></a></span>\n\n\t</span></span><br>Please do upload\
          \ as the different repo! I think it's handy to have two versions.</p>\n"
        raw: '@ayan4m1

          Please do upload as the different repo! I think it''s handy to have two
          versions.'
        updatedAt: '2022-09-14T15:07:49.105Z'
      numEdits: 0
      reactions: []
    id: 6321ee45b97c618f9a5efe66
    type: comment
  author: naclbit
  content: '@ayan4m1

    Please do upload as the different repo! I think it''s handy to have two versions.'
  created_at: 2022-09-14 14:07:49+00:00
  edited: false
  hidden: false
  id: 6321ee45b97c618f9a5efe66
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-14T15:10:34.000Z'
    data:
      edited: false
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;patrickvonplaten&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/patrickvonplaten\"\
          >@<span class=\"underline\">patrickvonplaten</span></a></span>\n\n\t</span></span><br>Yes\
          \ I agree that two branches would be more convenient given that diffusers\
          \ port is technically a conversion, and some people may want to continue\
          \ training from the checkpoints.</p>\n"
        raw: '@patrickvonplaten

          Yes I agree that two branches would be more convenient given that diffusers
          port is technically a conversion, and some people may want to continue training
          from the checkpoints.'
        updatedAt: '2022-09-14T15:10:34.257Z'
      numEdits: 0
      reactions: []
    id: 6321eeea3007fcbf292d8687
    type: comment
  author: naclbit
  content: '@patrickvonplaten

    Yes I agree that two branches would be more convenient given that diffusers port
    is technically a conversion, and some people may want to continue training from
    the checkpoints.'
  created_at: 2022-09-14 14:10:34+00:00
  edited: false
  hidden: false
  id: 6321eeea3007fcbf292d8687
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-14T15:17:38.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: "<p>Cool - should we go for two branches then?<br><span data-props=\"\
          {&quot;user&quot;:&quot;naclbit&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/naclbit\">@<span class=\"underline\">naclbit</span></a></span>\n\
          \n\t</span></span> you have 3 options I guess :sweat:</p>\n<ol>\n<li>The\
          \ \"main\" branch stays this model and we add a \"diffusers\" branch (and\
          \ potentially add a copy of \"main\" to a \"diffusers\" branch)</li>\n<li>The\
          \ \"main\" branch becomes \"diffusers\" and we add a \"compvis\" branch\
          \ (and potentially add a copy of \"main\" to a \"diffusers\" branch)</li>\n\
          </ol>\n<p>Maybe easiest to go for 1) which would essentially mean to just\
          \ add a <code>diffusers</code> branch</p>\n"
        raw: "Cool - should we go for two branches then? \n@naclbit you have 3 options\
          \ I guess :sweat:\n\n1) The \"main\" branch stays this model and we add\
          \ a \"diffusers\" branch (and potentially add a copy of \"main\" to a \"\
          diffusers\" branch)\n2) The \"main\" branch becomes \"diffusers\" and we\
          \ add a \"compvis\" branch (and potentially add a copy of \"main\" to a\
          \ \"diffusers\" branch)\n\nMaybe easiest to go for 1) which would essentially\
          \ mean to just add a `diffusers` branch"
        updatedAt: '2022-09-14T15:17:38.167Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - julien-c
    id: 6321f092a97afe3c4c675ecb
    type: comment
  author: patrickvonplaten
  content: "Cool - should we go for two branches then? \n@naclbit you have 3 options\
    \ I guess :sweat:\n\n1) The \"main\" branch stays this model and we add a \"diffusers\"\
    \ branch (and potentially add a copy of \"main\" to a \"diffusers\" branch)\n\
    2) The \"main\" branch becomes \"diffusers\" and we add a \"compvis\" branch (and\
    \ potentially add a copy of \"main\" to a \"diffusers\" branch)\n\nMaybe easiest\
    \ to go for 1) which would essentially mean to just add a `diffusers` branch"
  created_at: 2022-09-14 14:17:38+00:00
  edited: false
  hidden: false
  id: 6321f092a97afe3c4c675ecb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
      fullname: Yasu Seno
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: naclbit
      type: user
    createdAt: '2022-09-14T15:28:10.000Z'
    data:
      edited: true
      editors:
      - naclbit
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1631396043366-60e5fc3269bd0df25c9375d2.jpeg?w=200&h=200&f=face
          fullname: Yasu Seno
          isHf: false
          isPro: false
          name: naclbit
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;patrickvonplaten&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/patrickvonplaten\"\
          >@<span class=\"underline\">patrickvonplaten</span></a></span>\n\n\t</span></span><br>The\
          \ option 1 sounds like a stress-free way to handle this.</p>\n"
        raw: '@patrickvonplaten

          The option 1 sounds like a stress-free way to handle this.'
        updatedAt: '2022-09-14T15:28:20.518Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - patrickvonplaten
    id: 6321f30a7bb41a713dac70d7
    type: comment
  author: naclbit
  content: '@patrickvonplaten

    The option 1 sounds like a stress-free way to handle this.'
  created_at: 2022-09-14 14:28:10+00:00
  edited: true
  hidden: false
  id: 6321f30a7bb41a713dac70d7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-14T15:51:31.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: "<p>Super - <span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\"\
          >@<span class=\"underline\">ayan4m1</span></a></span>\n\n\t</span></span>\
          \ would you like to open a PR with the converted weights? Then I could somewhat\
          \ manually move the weigths into a branch (sadly we cannot do this in an\
          \ easy way yet)</p>\n"
        raw: Super - @ayan4m1 would you like to open a PR with the converted weights?
          Then I could somewhat manually move the weigths into a branch (sadly we
          cannot do this in an easy way yet)
        updatedAt: '2022-09-14T15:51:31.917Z'
      numEdits: 0
      reactions: []
    id: 6321f88315b7beab57c4ed1a
    type: comment
  author: patrickvonplaten
  content: Super - @ayan4m1 would you like to open a PR with the converted weights?
    Then I could somewhat manually move the weigths into a branch (sadly we cannot
    do this in an easy way yet)
  created_at: 2022-09-14 14:51:31+00:00
  edited: false
  hidden: false
  id: 6321f88315b7beab57c4ed1a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-14T16:10:15.000Z'
    data:
      edited: false
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: '<p>Pushed the diffusers model to <a href="https://huggingface.co/ayan4m1/trinart_diffusers_v2">https://huggingface.co/ayan4m1/trinart_diffusers_v2</a>
          - feel free to pull into your diffusers branch, I couldn''t figure out how
          to open a PR against any branch other than main.</p>

          <p>Working on trimming it down to be a bit smaller, but at least it works
          for now.</p>

          '
        raw: 'Pushed the diffusers model to https://huggingface.co/ayan4m1/trinart_diffusers_v2
          - feel free to pull into your diffusers branch, I couldn''t figure out how
          to open a PR against any branch other than main.


          Working on trimming it down to be a bit smaller, but at least it works for
          now.'
        updatedAt: '2022-09-14T16:10:15.875Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - patrickvonplaten
        - naclbit
    id: 6321fce76b1992383fa3db49
    type: comment
  author: ayan4m1
  content: 'Pushed the diffusers model to https://huggingface.co/ayan4m1/trinart_diffusers_v2
    - feel free to pull into your diffusers branch, I couldn''t figure out how to
    open a PR against any branch other than main.


    Working on trimming it down to be a bit smaller, but at least it works for now.'
  created_at: 2022-09-14 15:10:15+00:00
  edited: false
  hidden: false
  id: 6321fce76b1992383fa3db49
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-15T22:38:39.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: "<p>Thanks a lot <span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\"\
          >@<span class=\"underline\">ayan4m1</span></a></span>\n\n\t</span></span>\
          \  - I've used your checkpoitns and added it and two newly converted checkpoints\
          \ to this repo as discussed. It should now be trivially easy to use them\
          \ with <code>diffusers</code>:</p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-keyword\">from</span> torch <span class=\"hljs-keyword\"\
          >import</span> autocast\n<span class=\"hljs-keyword\">from</span> diffusers\
          \ <span class=\"hljs-keyword\">import</span> StableDiffusionPipeline\n\n\
          model_id = <span class=\"hljs-string\">\"naclbit/trinart_stable_diffusion_v2\"\
          </span>\ndevice = <span class=\"hljs-string\">\"cuda\"</span>\n\n\npipe\
          \ = StableDiffusionPipeline.from_pretrained(model_id)\npipe = pipe.to(device)\n\
          \nprompt = <span class=\"hljs-string\">\"A magical dragon flying in front\
          \ of the Himalaya in manga style\"</span>\n<span class=\"hljs-keyword\"\
          >with</span> autocast(<span class=\"hljs-string\">\"cuda\"</span>):\n  \
          \  image = pipe(prompt).images[<span class=\"hljs-number\">0</span>]\n</code></pre>\n\
          <p>By default, I've added the K-LMS sampler as proposed in the README. </p>\n\
          <p>Also opened a PR to add some examples to the README: <a href=\"https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4\"\
          >https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4</a></p>\n\
          <p>Very cool work <span data-props=\"{&quot;user&quot;:&quot;naclbit&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/naclbit\"\
          >@<span class=\"underline\">naclbit</span></a></span>\n\n\t</span></span>\
          \ and <span data-props=\"{&quot;user&quot;:&quot;ayan4m1&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ayan4m1\">@<span class=\"\
          underline\">ayan4m1</span></a></span>\n\n\t</span></span></p>\n"
        raw: "Thanks a lot @ayan4m1  - I've used your checkpoitns and added it and\
          \ two newly converted checkpoints to this repo as discussed. It should now\
          \ be trivially easy to use them with `diffusers`:\n\n```python\nfrom torch\
          \ import autocast\nfrom diffusers import StableDiffusionPipeline\n\nmodel_id\
          \ = \"naclbit/trinart_stable_diffusion_v2\"\ndevice = \"cuda\"\n\n\npipe\
          \ = StableDiffusionPipeline.from_pretrained(model_id)\npipe = pipe.to(device)\n\
          \nprompt = \"A magical dragon flying in front of the Himalaya in manga style\"\
          \nwith autocast(\"cuda\"):\n    image = pipe(prompt).images[0]\n```\n\n\
          By default, I've added the K-LMS sampler as proposed in the README. \n\n\
          Also opened a PR to add some examples to the README: https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4\n\
          \nVery cool work @naclbit and @ayan4m1"
        updatedAt: '2022-09-15T22:38:39.080Z'
      numEdits: 0
      reactions: []
    id: 6323a96fe007685e355e1337
    type: comment
  author: patrickvonplaten
  content: "Thanks a lot @ayan4m1  - I've used your checkpoitns and added it and two\
    \ newly converted checkpoints to this repo as discussed. It should now be trivially\
    \ easy to use them with `diffusers`:\n\n```python\nfrom torch import autocast\n\
    from diffusers import StableDiffusionPipeline\n\nmodel_id = \"naclbit/trinart_stable_diffusion_v2\"\
    \ndevice = \"cuda\"\n\n\npipe = StableDiffusionPipeline.from_pretrained(model_id)\n\
    pipe = pipe.to(device)\n\nprompt = \"A magical dragon flying in front of the Himalaya\
    \ in manga style\"\nwith autocast(\"cuda\"):\n    image = pipe(prompt).images[0]\n\
    ```\n\nBy default, I've added the K-LMS sampler as proposed in the README. \n\n\
    Also opened a PR to add some examples to the README: https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4\n\
    \nVery cool work @naclbit and @ayan4m1"
  created_at: 2022-09-15 21:38:39+00:00
  edited: false
  hidden: false
  id: 6323a96fe007685e355e1337
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-15T22:39:55.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>BTW, it''s really easy to covert the model now with: <a rel="nofollow"
          href="https://github.com/huggingface/diffusers/blob/main/scripts/convert_original_stable_diffusion_to_diffusers.py">https://github.com/huggingface/diffusers/blob/main/scripts/convert_original_stable_diffusion_to_diffusers.py</a>
          :-)</p>

          '
        raw: 'BTW, it''s really easy to covert the model now with: https://github.com/huggingface/diffusers/blob/main/scripts/convert_original_stable_diffusion_to_diffusers.py
          :-)'
        updatedAt: '2022-09-15T22:39:55.301Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - hysts
        - naclbit
    id: 6323a9bbd444e1d9088a0b27
    type: comment
  author: patrickvonplaten
  content: 'BTW, it''s really easy to covert the model now with: https://github.com/huggingface/diffusers/blob/main/scripts/convert_original_stable_diffusion_to_diffusers.py
    :-)'
  created_at: 2022-09-15 21:39:55+00:00
  edited: false
  hidden: false
  id: 6323a9bbd444e1d9088a0b27
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
      fullname: hysts
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hysts
      type: user
    createdAt: '2022-09-16T11:29:38.000Z'
    data:
      edited: false
      editors:
      - hysts
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
          fullname: hysts
          isHf: true
          isPro: false
          name: hysts
          type: user
        html: '<p>This is a minor thing, but I think the branch needs to be specified
          as follows in the example code above:</p>

          <pre><code class="language-python">pipe = StableDiffusionPipeline.from_pretrained(model_id,
          revision=<span class="hljs-string">''diffusers-115k''</span>)

          </code></pre>

          '
        raw: 'This is a minor thing, but I think the branch needs to be specified
          as follows in the example code above:

          ```python

          pipe = StableDiffusionPipeline.from_pretrained(model_id, revision=''diffusers-115k'')

          ```'
        updatedAt: '2022-09-16T11:29:38.459Z'
      numEdits: 0
      reactions: []
    id: 63245e228e7ed735af3b7690
    type: comment
  author: hysts
  content: 'This is a minor thing, but I think the branch needs to be specified as
    follows in the example code above:

    ```python

    pipe = StableDiffusionPipeline.from_pretrained(model_id, revision=''diffusers-115k'')

    ```'
  created_at: 2022-09-16 10:29:38+00:00
  edited: false
  hidden: false
  id: 63245e228e7ed735af3b7690
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
      fullname: hysts
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hysts
      type: user
    createdAt: '2022-09-16T11:31:58.000Z'
    data:
      edited: false
      editors:
      - hysts
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1643012094339-61914f536d34e827404ceb99.jpeg?w=200&h=200&f=face
          fullname: hysts
          isHf: true
          isPro: false
          name: hysts
          type: user
        html: '<p>Ah,  but the example code in <a href="https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4">https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4</a>
          is correct, so it doesn''t matter.</p>

          '
        raw: Ah,  but the example code in https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4
          is correct, so it doesn't matter.
        updatedAt: '2022-09-16T11:31:58.886Z'
      numEdits: 0
      reactions: []
    id: 63245eae1ed511c0c52367da
    type: comment
  author: hysts
  content: Ah,  but the example code in https://huggingface.co/naclbit/trinart_stable_diffusion_v2/discussions/4
    is correct, so it doesn't matter.
  created_at: 2022-09-16 10:31:58+00:00
  edited: false
  hidden: false
  id: 63245eae1ed511c0c52367da
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-30T17:01:25.000Z'
    data:
      edited: false
      editors:
      - ayan4m1
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
          fullname: Andrew DeLisa
          isHf: false
          isPro: false
          name: ayan4m1
          type: user
        html: '<p>Thanks all for the help here, closing this as we''ve solved the
          problem I came in with.</p>

          '
        raw: Thanks all for the help here, closing this as we've solved the problem
          I came in with.
        updatedAt: '2022-09-30T17:01:25.997Z'
      numEdits: 0
      reactions: []
      relatedEventId: 633720e594debe2d86a9bc9c
    id: 633720e594debe2d86a9bc9b
    type: comment
  author: ayan4m1
  content: Thanks all for the help here, closing this as we've solved the problem
    I came in with.
  created_at: 2022-09-30 16:01:25+00:00
  edited: false
  hidden: false
  id: 633720e594debe2d86a9bc9b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630e9778a97116192fad2088/SCZi8xV5h04k_fN0O5E1e.jpeg?w=200&h=200&f=face
      fullname: Andrew DeLisa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ayan4m1
      type: user
    createdAt: '2022-09-30T17:01:25.000Z'
    data:
      status: closed
    id: 633720e594debe2d86a9bc9c
    type: status-change
  author: ayan4m1
  created_at: 2022-09-30 16:01:25+00:00
  id: 633720e594debe2d86a9bc9c
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: naclbit/trinart_stable_diffusion_v2
repo_type: model
status: closed
target_branch: null
title: Usage with diffusers
