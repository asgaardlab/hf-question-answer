!!python/object:huggingface_hub.community.DiscussionWithDetails
author: serhii-nechyporchuk
conflicting_files: null
created_at: 2023-06-13 00:48:28+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/eb01330909e244ddd14d198e13668acd.svg
      fullname: Serhii Nechyporchuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: serhii-nechyporchuk
      type: user
    createdAt: '2023-06-13T01:48:28.000Z'
    data:
      edited: false
      editors:
      - serhii-nechyporchuk
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5932021141052246
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/eb01330909e244ddd14d198e13668acd.svg
          fullname: Serhii Nechyporchuk
          isHf: false
          isPro: false
          name: serhii-nechyporchuk
          type: user
        html: "<p>Hey there! Thanks for sharing this model!<br>I have a problem when\
          \ I load it though. I have installed it in automatic111 models/controlnet\
          \ folder, but when I use it within UI I see this error in the console</p>\n\
          <pre><code>2023-06-13 01:39:34,742 - ControlNet - INFO - Loading model:\
          \ control_v1p_sd15_brightness [5f6aa6ed]\nError running process: /content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\n\
          Traceback (most recent call last):\n  File \"/content/stable-diffusion-webui/modules/scripts.py\"\
          , line 409, in process\n    script.process(p, *script_args)\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 686, in process\n    model_net = Script.load_control_model(p, unet,\
          \ unit.model, unit.low_vram)\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 268, in load_control_model\n    model_net = Script.build_control_model(p,\
          \ unet, model, lowvram)\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 296, in build_control_model\n    state_dict = load_state_dict(model_path)\n\
          \  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/utils.py\"\
          , line 17, in load_state_dict\n    state_dict = safetensors.torch.load_file(ckpt_path,\
          \ device=location)\n  File \"/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\"\
          , line 100, in load_file\n    result[k] = f.get_tensor(k)\nRuntimeError:\
          \ self.size(-1) must be divisible by 4 to view Byte as Float (different\
          \ element sizes), but got 37049666\n</code></pre>\n<p>and controlnet is\
          \ not applied to image.</p>\n<p>Any guidance how to resolve this problem?\
          \ Thanks!</p>\n"
        raw: "Hey there! Thanks for sharing this model!\r\nI have a problem when I\
          \ load it though. I have installed it in automatic111 models/controlnet\
          \ folder, but when I use it within UI I see this error in the console\r\n\
          \r\n```\r\n2023-06-13 01:39:34,742 - ControlNet - INFO - Loading model:\
          \ control_v1p_sd15_brightness [5f6aa6ed]\r\nError running process: /content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\r\
          \nTraceback (most recent call last):\r\n  File \"/content/stable-diffusion-webui/modules/scripts.py\"\
          , line 409, in process\r\n    script.process(p, *script_args)\r\n  File\
          \ \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 686, in process\r\n    model_net = Script.load_control_model(p, unet,\
          \ unit.model, unit.low_vram)\r\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 268, in load_control_model\r\n    model_net = Script.build_control_model(p,\
          \ unet, model, lowvram)\r\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
          , line 296, in build_control_model\r\n    state_dict = load_state_dict(model_path)\r\
          \n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/utils.py\"\
          , line 17, in load_state_dict\r\n    state_dict = safetensors.torch.load_file(ckpt_path,\
          \ device=location)\r\n  File \"/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\"\
          , line 100, in load_file\r\n    result[k] = f.get_tensor(k)\r\nRuntimeError:\
          \ self.size(-1) must be divisible by 4 to view Byte as Float (different\
          \ element sizes), but got 37049666\r\n```\r\n\r\nand controlnet is not applied\
          \ to image.\r\n\r\nAny guidance how to resolve this problem? Thanks!"
        updatedAt: '2023-06-13T01:48:28.415Z'
      numEdits: 0
      reactions: []
    id: 6487caec6d93bc7eb47f011d
    type: comment
  author: serhii-nechyporchuk
  content: "Hey there! Thanks for sharing this model!\r\nI have a problem when I load\
    \ it though. I have installed it in automatic111 models/controlnet folder, but\
    \ when I use it within UI I see this error in the console\r\n\r\n```\r\n2023-06-13\
    \ 01:39:34,742 - ControlNet - INFO - Loading model: control_v1p_sd15_brightness\
    \ [5f6aa6ed]\r\nError running process: /content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\r\
    \nTraceback (most recent call last):\r\n  File \"/content/stable-diffusion-webui/modules/scripts.py\"\
    , line 409, in process\r\n    script.process(p, *script_args)\r\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
    , line 686, in process\r\n    model_net = Script.load_control_model(p, unet, unit.model,\
    \ unit.low_vram)\r\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
    , line 268, in load_control_model\r\n    model_net = Script.build_control_model(p,\
    \ unet, model, lowvram)\r\n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/controlnet.py\"\
    , line 296, in build_control_model\r\n    state_dict = load_state_dict(model_path)\r\
    \n  File \"/content/stable-diffusion-webui/extensions/sd-webui-controlnet/scripts/utils.py\"\
    , line 17, in load_state_dict\r\n    state_dict = safetensors.torch.load_file(ckpt_path,\
    \ device=location)\r\n  File \"/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\"\
    , line 100, in load_file\r\n    result[k] = f.get_tensor(k)\r\nRuntimeError: self.size(-1)\
    \ must be divisible by 4 to view Byte as Float (different element sizes), but\
    \ got 37049666\r\n```\r\n\r\nand controlnet is not applied to image.\r\n\r\nAny\
    \ guidance how to resolve this problem? Thanks!"
  created_at: 2023-06-13 00:48:28+00:00
  edited: false
  hidden: false
  id: 6487caec6d93bc7eb47f011d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/eb01330909e244ddd14d198e13668acd.svg
      fullname: Serhii Nechyporchuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: serhii-nechyporchuk
      type: user
    createdAt: '2023-06-13T17:42:55.000Z'
    data:
      edited: false
      editors:
      - serhii-nechyporchuk
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9785214066505432
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/eb01330909e244ddd14d198e13668acd.svg
          fullname: Serhii Nechyporchuk
          isHf: false
          isPro: false
          name: serhii-nechyporchuk
          type: user
        html: '<p>Found the solution. I was using automatic1111 through Google Colab
          and when I was uploading this model manually through UI it ended up corrupted
          for some reasons. What I did is I provided brightness model as additional
          model in the automatic1111 setup form and then just moved model into the
          <code>extensions/controlnet/models</code></p>

          '
        raw: Found the solution. I was using automatic1111 through Google Colab and
          when I was uploading this model manually through UI it ended up corrupted
          for some reasons. What I did is I provided brightness model as additional
          model in the automatic1111 setup form and then just moved model into the
          `extensions/controlnet/models`
        updatedAt: '2023-06-13T17:42:55.502Z'
      numEdits: 0
      reactions: []
    id: 6488aa9f3a0dbb29df5c9fda
    type: comment
  author: serhii-nechyporchuk
  content: Found the solution. I was using automatic1111 through Google Colab and
    when I was uploading this model manually through UI it ended up corrupted for
    some reasons. What I did is I provided brightness model as additional model in
    the automatic1111 setup form and then just moved model into the `extensions/controlnet/models`
  created_at: 2023-06-13 16:42:55+00:00
  edited: false
  hidden: false
  id: 6488aa9f3a0dbb29df5c9fda
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/eb01330909e244ddd14d198e13668acd.svg
      fullname: Serhii Nechyporchuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: serhii-nechyporchuk
      type: user
    createdAt: '2023-06-13T17:42:59.000Z'
    data:
      status: closed
    id: 6488aaa3a4bd45793cd32e7e
    type: status-change
  author: serhii-nechyporchuk
  created_at: 2023-06-13 16:42:59+00:00
  id: 6488aaa3a4bd45793cd32e7e
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: ioclab/ioc-controlnet
repo_type: model
status: closed
target_branch: null
title: Getting error while loading brighntess model
