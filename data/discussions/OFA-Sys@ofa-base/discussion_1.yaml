!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mattmdjaga
conflicting_files: null
created_at: 2022-08-11 08:56:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62710bd57b9f120adb36e451/xv02RE8VgayDPDE6jkwV2.png?w=200&h=200&f=face
      fullname: Mateusz Dziemian
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mattmdjaga
      type: user
    createdAt: '2022-08-11T09:56:38.000Z'
    data:
      edited: true
      editors:
      - mattmdjaga
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62710bd57b9f120adb36e451/xv02RE8VgayDPDE6jkwV2.png?w=200&h=200&f=face
          fullname: Mateusz Dziemian
          isHf: false
          isPro: false
          name: mattmdjaga
          type: user
        html: '<p>Is there a way to do few shot inference or batch inference? (with
          the hugging face generator) I tried doing batch by adding another string
          to the inputs making it size [2,x] and batched images to make the size [2,3,480,480]
          but i was getting this error "1191 if patch_images_2 is not None:<br>   1192     image_embed_2,
          image_num_patches_2, image_padding_mask_2, image_position_ids_2, image_pos_embed_2
          = <br>   1193         self.get_patch_images_info(patch_images_2, sample_patch_num,
          input_ids.device)</p>

          <p>IndexError: The shape of the mask [1] at index 0 does not match the shape
          of the indexed tensor [2, 900] at index 0"</p>

          <p>Thanks.</p>

          '
        raw: "Is there a way to do few shot inference or batch inference? (with the\
          \ hugging face generator) I tried doing batch by adding another string to\
          \ the inputs making it size [2,x] and batched images to make the size [2,3,480,480]\
          \ but i was getting this error \"1191 if patch_images_2 is not None:\n \
          \  1192     image_embed_2, image_num_patches_2, image_padding_mask_2, image_position_ids_2,\
          \ image_pos_embed_2 = \\\n   1193         self.get_patch_images_info(patch_images_2,\
          \ sample_patch_num, input_ids.device)\n\nIndexError: The shape of the mask\
          \ [1] at index 0 does not match the shape of the indexed tensor [2, 900]\
          \ at index 0\"\n\nThanks."
        updatedAt: '2022-08-11T09:57:11.459Z'
      numEdits: 1
      reactions: []
    id: 62f4d256d6d189cbd26073a4
    type: comment
  author: mattmdjaga
  content: "Is there a way to do few shot inference or batch inference? (with the\
    \ hugging face generator) I tried doing batch by adding another string to the\
    \ inputs making it size [2,x] and batched images to make the size [2,3,480,480]\
    \ but i was getting this error \"1191 if patch_images_2 is not None:\n   1192\
    \     image_embed_2, image_num_patches_2, image_padding_mask_2, image_position_ids_2,\
    \ image_pos_embed_2 = \\\n   1193         self.get_patch_images_info(patch_images_2,\
    \ sample_patch_num, input_ids.device)\n\nIndexError: The shape of the mask [1]\
    \ at index 0 does not match the shape of the indexed tensor [2, 900] at index\
    \ 0\"\n\nThanks."
  created_at: 2022-08-11 08:56:38+00:00
  edited: true
  hidden: false
  id: 62f4d256d6d189cbd26073a4
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: OFA-Sys/ofa-base
repo_type: model
status: open
target_branch: null
title: Few shot or batch input
