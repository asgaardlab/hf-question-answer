!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mox
conflicting_files: null
created_at: 2023-01-10 18:45:31+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0f999a027bb02fc72351aa4eec9180aa.svg
      fullname: Max Weissenbacher
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mox
      type: user
    createdAt: '2023-01-10T18:45:31.000Z'
    data:
      edited: false
      editors:
      - mox
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0f999a027bb02fc72351aa4eec9180aa.svg
          fullname: Max Weissenbacher
          isHf: false
          isPro: false
          name: mox
          type: user
        html: "<p>Hi,<br>I tested the model with following (german) string:</p>\n\
          <p> \"Da\u011Fdelen erz\xE4hlt immer noch ihr M\xE4rchen davon, dass man\
          \ den Krieg in der Ukraine nicht mit Sanktionen stoppen k\xF6nne, im Gegenteil\
          \ - wir m\xFCssen das Krokodil weiter dem\xFCtig f\xFCttern in der Hoffnung,\
          \ dass es uns erst zuletzt frisst. Geh' zum Teufel, du dumme Kuh!\"</p>\n\
          <p>When using the code from the model card, I get the result that this string\
          \ is neutral with 99.9%:</p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/1673376162290-61b8e6c582f7bb69a4d40946.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/1673376162290-61b8e6c582f7bb69a4d40946.png\"\
          ></a></p>\n<p>When I try out the same string in the hosted inference API\
          \ on the website, it predicts the class \"negative\" with 59.3% which seems\
          \ more correct for me.</p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/1673376281377-61b8e6c582f7bb69a4d40946.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/1673376281377-61b8e6c582f7bb69a4d40946.png\"\
          ></a></p>\n<p>What could be the reason for this?</p>\n<p>Thanks in advance!</p>\n"
        raw: "Hi, \r\nI tested the model with following (german) string:\r\n\r\n \"\
          Da\u011Fdelen erz\xE4hlt immer noch ihr M\xE4rchen davon, dass man den Krieg\
          \ in der Ukraine nicht mit Sanktionen stoppen k\xF6nne, im Gegenteil - wir\
          \ m\xFCssen das Krokodil weiter dem\xFCtig f\xFCttern in der Hoffnung, dass\
          \ es uns erst zuletzt frisst. Geh' zum Teufel, du dumme Kuh!\"\r\n\r\nWhen\
          \ using the code from the model card, I get the result that this string\
          \ is neutral with 99.9%:\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1673376162290-61b8e6c582f7bb69a4d40946.png)\r\
          \n\r\nWhen I try out the same string in the hosted inference API on the\
          \ website, it predicts the class \"negative\" with 59.3% which seems more\
          \ correct for me.\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1673376281377-61b8e6c582f7bb69a4d40946.png)\r\
          \n\r\nWhat could be the reason for this?\r\n\r\nThanks in advance!\r\n\r\
          \n\r\n"
        updatedAt: '2023-01-10T18:45:31.314Z'
      numEdits: 0
      reactions: []
    id: 63bdb24b3b0665ad51cc0fa9
    type: comment
  author: mox
  content: "Hi, \r\nI tested the model with following (german) string:\r\n\r\n \"\
    Da\u011Fdelen erz\xE4hlt immer noch ihr M\xE4rchen davon, dass man den Krieg in\
    \ der Ukraine nicht mit Sanktionen stoppen k\xF6nne, im Gegenteil - wir m\xFC\
    ssen das Krokodil weiter dem\xFCtig f\xFCttern in der Hoffnung, dass es uns erst\
    \ zuletzt frisst. Geh' zum Teufel, du dumme Kuh!\"\r\n\r\nWhen using the code\
    \ from the model card, I get the result that this string is neutral with 99.9%:\r\
    \n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1673376162290-61b8e6c582f7bb69a4d40946.png)\r\
    \n\r\nWhen I try out the same string in the hosted inference API on the website,\
    \ it predicts the class \"negative\" with 59.3% which seems more correct for me.\r\
    \n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1673376281377-61b8e6c582f7bb69a4d40946.png)\r\
    \n\r\nWhat could be the reason for this?\r\n\r\nThanks in advance!\r\n\r\n\r\n"
  created_at: 2023-01-10 18:45:31+00:00
  edited: false
  hidden: false
  id: 63bdb24b3b0665ad51cc0fa9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5ea841a70d1df220780f0433/rpEmnBmuIImkp2yo_pzfO.jpeg?w=200&h=200&f=face
      fullname: Oliver Guhr
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: oliverguhr
      type: user
    createdAt: '2023-01-16T08:32:01.000Z'
    data:
      edited: false
      editors:
      - oliverguhr
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5ea841a70d1df220780f0433/rpEmnBmuIImkp2yo_pzfO.jpeg?w=200&h=200&f=face
          fullname: Oliver Guhr
          isHf: false
          isPro: false
          name: oliverguhr
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;mox&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/mox\">@<span class=\"\
          underline\">mox</span></a></span>\n\n\t</span></span>,<br>the germansentiment\
          \ lib uses the same preprocessing as I used for the training of the model,\
          \ but in some cases this preprocessing might not always improve the results.<br>If\
          \ you want to use the same inference code as the API, without any preprocessing,\
          \ you can simply use the pipeline (code below). However, you might want\
          \ to collect a meaningful number of samples and decide which version (with\
          \ or without preprocessing) works better for you.</p>\n<pre><code>from transformers\
          \ import pipeline\ntest = pipeline(\"text-classification\", \"oliverguhr/german-sentiment-bert\"\
          )\ntest(\"Da\u011Fdelen erz\xE4hlt immer noch ihr M\xE4rchen davon, dass\
          \ man den Krieg in der Ukraine nicht mit Sanktionen stoppen k\xF6nne, im\
          \ Gegenteil - wir m\xFCssen das Krokodil weiter dem\xFCtig f\xFCttern in\
          \ der Hoffnung, dass es uns erst zuletzt frisst. Geh' zum Teufel, du dumme\
          \ Kuh!\")\n\n&gt; [{'label': 'negative', 'score': 0.5927214622497559}]\n\
          </code></pre>\n"
        raw: "Hi @mox,\nthe germansentiment lib uses the same preprocessing as I used\
          \ for the training of the model, but in some cases this preprocessing might\
          \ not always improve the results. \nIf you want to use the same inference\
          \ code as the API, without any preprocessing, you can simply use the pipeline\
          \ (code below). However, you might want to collect a meaningful number of\
          \ samples and decide which version (with or without preprocessing) works\
          \ better for you.\n\n```\nfrom transformers import pipeline\ntest = pipeline(\"\
          text-classification\", \"oliverguhr/german-sentiment-bert\")\ntest(\"Da\u011F\
          delen erz\xE4hlt immer noch ihr M\xE4rchen davon, dass man den Krieg in\
          \ der Ukraine nicht mit Sanktionen stoppen k\xF6nne, im Gegenteil - wir\
          \ m\xFCssen das Krokodil weiter dem\xFCtig f\xFCttern in der Hoffnung, dass\
          \ es uns erst zuletzt frisst. Geh' zum Teufel, du dumme Kuh!\")\n\n> [{'label':\
          \ 'negative', 'score': 0.5927214622497559}]\n```"
        updatedAt: '2023-01-16T08:32:01.750Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - mox
    id: 63c50b819fa5d07c2c2ba770
    type: comment
  author: oliverguhr
  content: "Hi @mox,\nthe germansentiment lib uses the same preprocessing as I used\
    \ for the training of the model, but in some cases this preprocessing might not\
    \ always improve the results. \nIf you want to use the same inference code as\
    \ the API, without any preprocessing, you can simply use the pipeline (code below).\
    \ However, you might want to collect a meaningful number of samples and decide\
    \ which version (with or without preprocessing) works better for you.\n\n```\n\
    from transformers import pipeline\ntest = pipeline(\"text-classification\", \"\
    oliverguhr/german-sentiment-bert\")\ntest(\"Da\u011Fdelen erz\xE4hlt immer noch\
    \ ihr M\xE4rchen davon, dass man den Krieg in der Ukraine nicht mit Sanktionen\
    \ stoppen k\xF6nne, im Gegenteil - wir m\xFCssen das Krokodil weiter dem\xFCtig\
    \ f\xFCttern in der Hoffnung, dass es uns erst zuletzt frisst. Geh' zum Teufel,\
    \ du dumme Kuh!\")\n\n> [{'label': 'negative', 'score': 0.5927214622497559}]\n\
    ```"
  created_at: 2023-01-16 08:32:01+00:00
  edited: false
  hidden: false
  id: 63c50b819fa5d07c2c2ba770
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/0f999a027bb02fc72351aa4eec9180aa.svg
      fullname: Max Weissenbacher
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mox
      type: user
    createdAt: '2023-01-16T08:35:07.000Z'
    data:
      status: closed
    id: 63c50c3b9fa5d07c2c2bb4ac
    type: status-change
  author: mox
  created_at: 2023-01-16 08:35:07+00:00
  id: 63c50c3b9fa5d07c2c2bb4ac
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: oliverguhr/german-sentiment-bert
repo_type: model
status: closed
target_branch: null
title: Completely different predictions with same input
