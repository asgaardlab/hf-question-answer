!!python/object:huggingface_hub.community.DiscussionWithDetails
author: AL58763
conflicting_files: null
created_at: 2024-01-18 13:26:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-18T13:26:56.000Z'
    data:
      edited: false
      editors:
      - AL58763
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7625267505645752
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
          fullname: Manish Aradwad
          isHf: false
          isPro: false
          name: AL58763
          type: user
        html: '<p>I''m coming accross an error while trying to load the idefics-9b-instruct
          model. Even after downloading the model weights and loading them using <code>model
          = IdeficsForVisionText2Text.from_pretrained(model_path, torch_dtype=torch.bfloat16).to("cuda:1")</code>
          I''m getting this error:</p>

          <p><code>OSError: Error no file named pytorch_model.bin, tf_model.h5, model.ckpt.index
          or flax_model.msgpack found in directory model_dir/idefics_9b/.</code></p>

          <p>I haven''t changed the name of the weigths after downloading. So not
          sure what''s causing this error.</p>

          '
        raw: "I'm coming accross an error while trying to load the idefics-9b-instruct\
          \ model. Even after downloading the model weights and loading them using\
          \ `model = IdeficsForVisionText2Text.from_pretrained(model_path, torch_dtype=torch.bfloat16).to(\"\
          cuda:1\")` I'm getting this error:\r\n\r\n`OSError: Error no file named\
          \ pytorch_model.bin, tf_model.h5, model.ckpt.index or flax_model.msgpack\
          \ found in directory model_dir/idefics_9b/.`\r\n\r\nI haven't changed the\
          \ name of the weigths after downloading. So not sure what's causing this\
          \ error."
        updatedAt: '2024-01-18T13:26:56.115Z'
      numEdits: 0
      reactions: []
    id: 65a9272073a327a31dfd6468
    type: comment
  author: AL58763
  content: "I'm coming accross an error while trying to load the idefics-9b-instruct\
    \ model. Even after downloading the model weights and loading them using `model\
    \ = IdeficsForVisionText2Text.from_pretrained(model_path, torch_dtype=torch.bfloat16).to(\"\
    cuda:1\")` I'm getting this error:\r\n\r\n`OSError: Error no file named pytorch_model.bin,\
    \ tf_model.h5, model.ckpt.index or flax_model.msgpack found in directory model_dir/idefics_9b/.`\r\
    \n\r\nI haven't changed the name of the weigths after downloading. So not sure\
    \ what's causing this error."
  created_at: 2024-01-18 13:26:56+00:00
  edited: false
  hidden: false
  id: 65a9272073a327a31dfd6468
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-18T13:28:15.000Z'
    data:
      from: Is this model still maintained? I'm seeing no replies on the questions
      to: Error while loading the model
    id: 65a9276ff45ee5e5b5a1a511
    type: title-change
  author: AL58763
  created_at: 2024-01-18 13:28:15+00:00
  id: 65a9276ff45ee5e5b5a1a511
  new_title: Error while loading the model
  old_title: Is this model still maintained? I'm seeing no replies on the questions
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-18T14:13:00.000Z'
    data:
      edited: false
      editors:
      - AL58763
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9175585508346558
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
          fullname: Manish Aradwad
          isHf: false
          isPro: false
          name: AL58763
          type: user
        html: '<p>I got it working by combining the weights into a single pytorch_model.bin
          file. I''m trying to run the model on v100 gpu but getting Cuda out of memory
          error. I have two v100 gpus available and i''m loading the model on a single
          gpu. Is it possible to split the weights among two gpus? </p>

          '
        raw: 'I got it working by combining the weights into a single pytorch_model.bin
          file. I''m trying to run the model on v100 gpu but getting Cuda out of memory
          error. I have two v100 gpus available and i''m loading the model on a single
          gpu. Is it possible to split the weights among two gpus? '
        updatedAt: '2024-01-18T14:13:00.006Z'
      numEdits: 0
      reactions: []
    id: 65a931ec043d53781a4894dd
    type: comment
  author: AL58763
  content: 'I got it working by combining the weights into a single pytorch_model.bin
    file. I''m trying to run the model on v100 gpu but getting Cuda out of memory
    error. I have two v100 gpus available and i''m loading the model on a single gpu.
    Is it possible to split the weights among two gpus? '
  created_at: 2024-01-18 14:13:00+00:00
  edited: false
  hidden: false
  id: 65a931ec043d53781a4894dd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2024-01-18T17:13:32.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8024184107780457
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;AL58763&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/AL58763\">@<span class=\"\
          underline\">AL58763</span></a></span>\n\n\t</span></span><br>can you <code>ls</code>\
          \ the content of your <code>model_dir/idefics_9b/</code> folder? i am assuming\
          \ that <code>model_path = model_dir/idefics_9b/</code></p>\n"
        raw: "Hi @AL58763 \ncan you `ls` the content of your `model_dir/idefics_9b/`\
          \ folder? i am assuming that `model_path = model_dir/idefics_9b/`"
        updatedAt: '2024-01-18T17:13:32.942Z'
      numEdits: 0
      reactions: []
    id: 65a95c3c57f263e3d0d64439
    type: comment
  author: VictorSanh
  content: "Hi @AL58763 \ncan you `ls` the content of your `model_dir/idefics_9b/`\
    \ folder? i am assuming that `model_path = model_dir/idefics_9b/`"
  created_at: 2024-01-18 17:13:32+00:00
  edited: false
  hidden: false
  id: 65a95c3c57f263e3d0d64439
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-19T07:26:53.000Z'
    data:
      edited: true
      editors:
      - AL58763
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.60447096824646
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
          fullname: Manish Aradwad
          isHf: false
          isPro: false
          name: AL58763
          type: user
        html: "<blockquote>\n<p>Hi <span data-props=\"{&quot;user&quot;:&quot;AL58763&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/AL58763\"\
          >@<span class=\"underline\">AL58763</span></a></span>\n\n\t</span></span><br>can\
          \ you <code>ls</code> the content of your <code>model_dir/idefics_9b/</code>\
          \ folder? i am assuming that <code>model_path = model_dir/idefics_9b/</code></p>\n\
          </blockquote>\n<p>Thanks for the reply. Yes, <code>model_path = model_dir/idefics_9b/</code>.\
          \ Here are the contents of the folder:</p>\n<p>config.json<br>model-00002-of-00002.safetensors<br>pytorch_model-00002-of-00002.bin<br>tokenizer.json<br>generation_config.json<br>preprocessor_config.json<br>pytorch_model.bin<br>tokenizer.model<br>model-00001-of-00002.safetensors<br>pytorch_model-00001-of-00002.bin<br>tokenizer_config.json<br>urls.txt</p>\n\
          <p>As I said above, I combined both the pytorch bin files into one pytorch_model.bin</p>\n"
        raw: "> Hi @AL58763 \n> can you `ls` the content of your `model_dir/idefics_9b/`\
          \ folder? i am assuming that `model_path = model_dir/idefics_9b/`\n\nThanks\
          \ for the reply. Yes, `model_path = model_dir/idefics_9b/`. Here are the\
          \ contents of the folder:\n\nconfig.json                      \nmodel-00002-of-00002.safetensors\
          \  \npytorch_model-00002-of-00002.bin  \ntokenizer.json\ngeneration_config.json\
          \            \npreprocessor_config.json          \npytorch_model.bin   \
          \              \ntokenizer.model\nmodel-00001-of-00002.safetensors  \npytorch_model-00001-of-00002.bin\
          \  \ntokenizer_config.json             \nurls.txt\n\nAs I said above, I\
          \ combined both the pytorch bin files into one pytorch_model.bin"
        updatedAt: '2024-01-19T07:28:16.820Z'
      numEdits: 1
      reactions: []
    id: 65aa243d14d782df06b27706
    type: comment
  author: AL58763
  content: "> Hi @AL58763 \n> can you `ls` the content of your `model_dir/idefics_9b/`\
    \ folder? i am assuming that `model_path = model_dir/idefics_9b/`\n\nThanks for\
    \ the reply. Yes, `model_path = model_dir/idefics_9b/`. Here are the contents\
    \ of the folder:\n\nconfig.json                      \nmodel-00002-of-00002.safetensors\
    \  \npytorch_model-00002-of-00002.bin  \ntokenizer.json\ngeneration_config.json\
    \            \npreprocessor_config.json          \npytorch_model.bin         \
    \        \ntokenizer.model\nmodel-00001-of-00002.safetensors  \npytorch_model-00001-of-00002.bin\
    \  \ntokenizer_config.json             \nurls.txt\n\nAs I said above, I combined\
    \ both the pytorch bin files into one pytorch_model.bin"
  created_at: 2024-01-19 07:26:53+00:00
  edited: true
  hidden: false
  id: 65aa243d14d782df06b27706
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-19T07:48:46.000Z'
    data:
      status: closed
    id: 65aa295e6ffaed5307b2652c
    type: status-change
  author: AL58763
  created_at: 2024-01-19 07:48:46+00:00
  id: 65aa295e6ffaed5307b2652c
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-19T07:48:51.000Z'
    data:
      status: open
    id: 65aa296314d782df06b412dd
    type: status-change
  author: AL58763
  created_at: 2024-01-19 07:48:51+00:00
  id: 65aa296314d782df06b412dd
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-19T07:57:49.000Z'
    data:
      edited: false
      editors:
      - AL58763
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8708003163337708
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
          fullname: Manish Aradwad
          isHf: false
          isPro: false
          name: AL58763
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;VictorSanh&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/VictorSanh\">@<span class=\"\
          underline\">VictorSanh</span></a></span>\n\n\t</span></span> i can provide\
          \ local paths of images in the prompts as well right? I provided a local\
          \ image and then checked <code>inputs['pixel_values']</code>, its just black\
          \ pixels. </p>\n"
        raw: '@VictorSanh i can provide local paths of images in the prompts as well
          right? I provided a local image and then checked `inputs[''pixel_values'']`,
          its just black pixels. '
        updatedAt: '2024-01-19T07:57:49.323Z'
      numEdits: 0
      reactions: []
    id: 65aa2b7da8f716b32eafd0f6
    type: comment
  author: AL58763
  content: '@VictorSanh i can provide local paths of images in the prompts as well
    right? I provided a local image and then checked `inputs[''pixel_values'']`, its
    just black pixels. '
  created_at: 2024-01-19 07:57:49+00:00
  edited: false
  hidden: false
  id: 65aa2b7da8f716b32eafd0f6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2024-01-19T14:23:38.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9482866525650024
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: '<p>I think you are missing some files in your folder. for instance
          <code>model.safetensors.index.json</code> is the file that maps each weight
          to a specific location. Not having this file means that the loading logic
          does not know where to get the weights (i.e. <code>model-00002-of-00002.safetensors</code>
          or <code>model-00001-of-00002.safetensors</code>) and as such you had to
          create a merged <code>pytorch_model.bin</code>. There might be other files
          missing but that''s the first one that came to my mind.</p>

          '
        raw: I think you are missing some files in your folder. for instance `model.safetensors.index.json`
          is the file that maps each weight to a specific location. Not having this
          file means that the loading logic does not know where to get the weights
          (i.e. `model-00002-of-00002.safetensors` or `model-00001-of-00002.safetensors`)
          and as such you had to create a merged `pytorch_model.bin`. There might
          be other files missing but that's the first one that came to my mind.
        updatedAt: '2024-01-19T14:23:38.970Z'
      numEdits: 0
      reactions: []
    id: 65aa85eac8903e28aea77e20
    type: comment
  author: VictorSanh
  content: I think you are missing some files in your folder. for instance `model.safetensors.index.json`
    is the file that maps each weight to a specific location. Not having this file
    means that the loading logic does not know where to get the weights (i.e. `model-00002-of-00002.safetensors`
    or `model-00001-of-00002.safetensors`) and as such you had to create a merged
    `pytorch_model.bin`. There might be other files missing but that's the first one
    that came to my mind.
  created_at: 2024-01-19 14:23:38+00:00
  edited: false
  hidden: false
  id: 65aa85eac8903e28aea77e20
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2024-01-19T14:24:48.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9549933075904846
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: "<blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;VictorSanh&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/VictorSanh\"\
          >@<span class=\"underline\">VictorSanh</span></a></span>\n\n\t</span></span>\
          \ i can provide local paths of images in the prompts as well right?</p>\n\
          </blockquote>\n<p>On top of my mind, I think you need to load the image\
          \ (and put it into a pil object) yourself if it's local.</p>\n"
        raw: '> @VictorSanh i can provide local paths of images in the prompts as
          well right?


          On top of my mind, I think you need to load the image (and put it into a
          pil object) yourself if it''s local.'
        updatedAt: '2024-01-19T14:24:48.445Z'
      numEdits: 0
      reactions: []
    id: 65aa86305c84d7d5e7bfce8d
    type: comment
  author: VictorSanh
  content: '> @VictorSanh i can provide local paths of images in the prompts as well
    right?


    On top of my mind, I think you need to load the image (and put it into a pil object)
    yourself if it''s local.'
  created_at: 2024-01-19 14:24:48+00:00
  edited: false
  hidden: false
  id: 65aa86305c84d7d5e7bfce8d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
      fullname: Manish Aradwad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AL58763
      type: user
    createdAt: '2024-01-22T07:23:25.000Z'
    data:
      edited: false
      editors:
      - AL58763
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8174671530723572
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/250405a7fe594eb1f1da3d0b6ab44502.svg
          fullname: Manish Aradwad
          isHf: false
          isPro: false
          name: AL58763
          type: user
        html: "<p>Thanks <span data-props=\"{&quot;user&quot;:&quot;VictorSanh&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/VictorSanh\"\
          >@<span class=\"underline\">VictorSanh</span></a></span>\n\n\t</span></span>\
          \ it worked!</p>\n"
        raw: Thanks @VictorSanh it worked!
        updatedAt: '2024-01-22T07:23:25.969Z'
      numEdits: 0
      reactions: []
    id: 65ae17ed0b2bfdf81fdfbe84
    type: comment
  author: AL58763
  content: Thanks @VictorSanh it worked!
  created_at: 2024-01-22 07:23:25+00:00
  edited: false
  hidden: false
  id: 65ae17ed0b2bfdf81fdfbe84
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2024-01-22T16:11:58.000Z'
    data:
      edited: false
      editors:
      - VictorSanh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9315268993377686
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
          fullname: Victor Sanh
          isHf: true
          isPro: true
          name: VictorSanh
          type: user
        html: '<p>great! i''ll close that discussion. feel free to re-open (or create
          another one) if you have other questions!</p>

          '
        raw: great! i'll close that discussion. feel free to re-open (or create another
          one) if you have other questions!
        updatedAt: '2024-01-22T16:11:58.334Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65ae93ce637e10fba9de9a6e
    id: 65ae93ce637e10fba9de9a6c
    type: comment
  author: VictorSanh
  content: great! i'll close that discussion. feel free to re-open (or create another
    one) if you have other questions!
  created_at: 2024-01-22 16:11:58+00:00
  edited: false
  hidden: false
  id: 65ae93ce637e10fba9de9a6c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1619623771844-5ecea265968f6028e0559fa5.jpeg?w=200&h=200&f=face
      fullname: Victor Sanh
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: VictorSanh
      type: user
    createdAt: '2024-01-22T16:11:58.000Z'
    data:
      status: closed
    id: 65ae93ce637e10fba9de9a6e
    type: status-change
  author: VictorSanh
  created_at: 2024-01-22 16:11:58+00:00
  id: 65ae93ce637e10fba9de9a6e
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 12
repo_id: HuggingFaceM4/idefics-9b-instruct
repo_type: model
status: closed
target_branch: null
title: Error while loading the model
