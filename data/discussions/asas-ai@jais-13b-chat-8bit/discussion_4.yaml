!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Yesimm
conflicting_files: null
created_at: 2023-11-17 01:10:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2c060e347e15f704f3886ba4e5c8d2c0.svg
      fullname: Selcuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yesimm
      type: user
    createdAt: '2023-11-17T01:10:24.000Z'
    data:
      edited: true
      editors:
      - Yesimm
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6649336814880371
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2c060e347e15f704f3886ba4e5c8d2c0.svg
          fullname: Selcuk
          isHf: false
          isPro: false
          name: Yesimm
          type: user
        html: '<p>When i run my code by using this repo, it gives RuntimeError: a
          leaf Variable that requires grad is being used in an in-place operation
          error. I changed the 869 line in modeling_jais.py as :</p>

          <p>hidden_states *= torch.tensor(float(self.embeddings_scale), dtype=hidden_states.dtype,
          device=hidden_states.device)<br>to:<br>scale_factor_hidden = torch.tensor(float(self.embeddings_scale),
          dtype=hidden_states.dtype, device=hidden_states.device)<br>hidden_states
          = hidden_states * scale_factor_hidden</p>

          <p>and i load model from local folder, it gives still same error. How can
          I solve this?</p>

          '
        raw: "When i run my code by using this repo, it gives RuntimeError: a leaf\
          \ Variable that requires grad is being used in an in-place operation error.\
          \ I changed the 869 line in modeling_jais.py as :\r\n\r\nhidden_states *=\
          \ torch.tensor(float(self.embeddings_scale), dtype=hidden_states.dtype,\
          \ device=hidden_states.device)\r\nto:\r\nscale_factor_hidden = torch.tensor(float(self.embeddings_scale),\
          \ dtype=hidden_states.dtype, device=hidden_states.device)\r\nhidden_states\
          \ = hidden_states * scale_factor_hidden\r\n\r\n\r\nand i load model from\
          \ local folder, it gives still same error. How can I solve this?"
        updatedAt: '2023-11-17T01:21:49.398Z'
      numEdits: 1
      reactions: []
    id: 6556bd8034fcde24c633ba9b
    type: comment
  author: Yesimm
  content: "When i run my code by using this repo, it gives RuntimeError: a leaf Variable\
    \ that requires grad is being used in an in-place operation error. I changed the\
    \ 869 line in modeling_jais.py as :\r\n\r\nhidden_states *= torch.tensor(float(self.embeddings_scale),\
    \ dtype=hidden_states.dtype, device=hidden_states.device)\r\nto:\r\nscale_factor_hidden\
    \ = torch.tensor(float(self.embeddings_scale), dtype=hidden_states.dtype, device=hidden_states.device)\r\
    \nhidden_states = hidden_states * scale_factor_hidden\r\n\r\n\r\nand i load model\
    \ from local folder, it gives still same error. How can I solve this?"
  created_at: 2023-11-17 01:10:24+00:00
  edited: true
  hidden: false
  id: 6556bd8034fcde24c633ba9b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/2c060e347e15f704f3886ba4e5c8d2c0.svg
      fullname: Selcuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yesimm
      type: user
    createdAt: '2023-11-17T01:18:44.000Z'
    data:
      status: closed
    id: 6556bf7485d43542fa1cb334
    type: status-change
  author: Yesimm
  created_at: 2023-11-17 01:18:44+00:00
  id: 6556bf7485d43542fa1cb334
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/2c060e347e15f704f3886ba4e5c8d2c0.svg
      fullname: Selcuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yesimm
      type: user
    createdAt: '2023-11-17T01:22:09.000Z'
    data:
      status: open
    id: 6556c0410f449352977db0c0
    type: status-change
  author: Yesimm
  created_at: 2023-11-17 01:22:09+00:00
  id: 6556c0410f449352977db0c0
  new_status: open
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: asas-ai/jais-13b-chat-8bit
repo_type: model
status: open
target_branch: null
title: 'RuntimeError: a leaf Variable that requires grad is being used in an in-place
  operation.'
