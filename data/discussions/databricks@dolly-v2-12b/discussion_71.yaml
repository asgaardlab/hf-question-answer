!!python/object:huggingface_hub.community.DiscussionWithDetails
author: AeroG
conflicting_files: null
created_at: 2023-05-20 15:08:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
      fullname: Gavita Regunath
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AeroG
      type: user
    createdAt: '2023-05-20T16:08:45.000Z'
    data:
      edited: false
      editors:
      - AeroG
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
          fullname: Gavita Regunath
          isHf: false
          isPro: false
          name: AeroG
          type: user
        html: '<p>I am trying to access dolly-v2-3b using Langchain and HuggingFaceHub
          using the tutorial provided on the <a rel="nofollow" href="https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html">website</a>.</p>

          <p>However when using the example code to access dolly-v2-3b from Hugging
          Face Hub, the following code only provides a single word as output.</p>

          <p>The example code is shown below:<br>from langchain import HuggingFaceHub<br>repo_id
          = "databricks/dolly-v2-3b"<br>llm = HuggingFaceHub(repo_id=repo_id, model_kwargs={"temperature":0,
          "max_length":64})</p>

          <p>I have also tried changing the max_length and temperature, but this makes
          no difference.</p>

          <p>Has anyone else had success calling Dolly using HuggingFace_Hub</p>

          '
        raw: "I am trying to access dolly-v2-3b using Langchain and HuggingFaceHub\
          \ using the tutorial provided on the [website](https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html).\r\
          \n\r\nHowever when using the example code to access dolly-v2-3b from Hugging\
          \ Face Hub, the following code only provides a single word as output.\r\n\
          \r\nThe example code is shown below:\r\nfrom langchain import HuggingFaceHub\r\
          \nrepo_id = \"databricks/dolly-v2-3b\"\r\nllm = HuggingFaceHub(repo_id=repo_id,\
          \ model_kwargs={\"temperature\":0, \"max_length\":64})\r\n\r\nI have also\
          \ tried changing the max_length and temperature, but this makes no difference.\r\
          \n\r\nHas anyone else had success calling Dolly using HuggingFace_Hub"
        updatedAt: '2023-05-20T16:08:45.578Z'
      numEdits: 0
      reactions: []
    id: 6468f08d188ca2e6bc59646a
    type: comment
  author: AeroG
  content: "I am trying to access dolly-v2-3b using Langchain and HuggingFaceHub using\
    \ the tutorial provided on the [website](https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html).\r\
    \n\r\nHowever when using the example code to access dolly-v2-3b from Hugging Face\
    \ Hub, the following code only provides a single word as output.\r\n\r\nThe example\
    \ code is shown below:\r\nfrom langchain import HuggingFaceHub\r\nrepo_id = \"\
    databricks/dolly-v2-3b\"\r\nllm = HuggingFaceHub(repo_id=repo_id, model_kwargs={\"\
    temperature\":0, \"max_length\":64})\r\n\r\nI have also tried changing the max_length\
    \ and temperature, but this makes no difference.\r\n\r\nHas anyone else had success\
    \ calling Dolly using HuggingFace_Hub"
  created_at: 2023-05-20 15:08:45+00:00
  edited: false
  hidden: false
  id: 6468f08d188ca2e6bc59646a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-05-20T18:48:15.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>I wouldn''t use it that way. Load the pipeline as per instructions
          in this model card, and use HuggingFacePipeline. That ensures you have the
          right instruction pipeline for this model. You''re also setting some funny
          values like temperature=0, which is probably not helpful. I don''t know
          how you''re prompting this or what you input to it, so hard to say more.
          Use the chain''s verbose=True to debug it.</p>

          '
        raw: I wouldn't use it that way. Load the pipeline as per instructions in
          this model card, and use HuggingFacePipeline. That ensures you have the
          right instruction pipeline for this model. You're also setting some funny
          values like temperature=0, which is probably not helpful. I don't know how
          you're prompting this or what you input to it, so hard to say more. Use
          the chain's verbose=True to debug it.
        updatedAt: '2023-05-20T18:48:15.312Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - leocnj
    id: 646915ef99182de1784d44b5
    type: comment
  author: srowen
  content: I wouldn't use it that way. Load the pipeline as per instructions in this
    model card, and use HuggingFacePipeline. That ensures you have the right instruction
    pipeline for this model. You're also setting some funny values like temperature=0,
    which is probably not helpful. I don't know how you're prompting this or what
    you input to it, so hard to say more. Use the chain's verbose=True to debug it.
  created_at: 2023-05-20 17:48:15+00:00
  edited: false
  hidden: false
  id: 646915ef99182de1784d44b5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
      fullname: Gavita Regunath
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AeroG
      type: user
    createdAt: '2023-05-20T21:05:36.000Z'
    data:
      edited: false
      editors:
      - AeroG
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
          fullname: Gavita Regunath
          isHf: false
          isPro: false
          name: AeroG
          type: user
        html: "<p>Hi, thanks for the speedy reply. </p>\n<p>I came across this code\
          \ example from langchain\u2019s website:<br><a rel=\"nofollow\" href=\"\
          https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html\"\
          >https://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html</a></p>\n\
          <p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6267121dbc4ff81dad8cf025/qTE9pV9oiSb3RD6uGU8Qx.jpeg\"\
          ><img alt=\"995D8748-858C-4C49-A7FF-326C9D7DC394.jpeg\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6267121dbc4ff81dad8cf025/qTE9pV9oiSb3RD6uGU8Qx.jpeg\"\
          ></a></p>\n<p>I was curious to get this working as it would have provided\
          \ an avenue to use the dolly-v2-12b model without having to load it locally\
          \ (requiring a GPU).</p>\n<p>Thanks again <span data-props=\"{&quot;user&quot;:&quot;srowen&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/srowen\"\
          >@<span class=\"underline\">srowen</span></a></span>\n\n\t</span></span>\
          \ !</p>\n"
        raw: "Hi, thanks for the speedy reply. \n\nI came across this code example\
          \ from langchain\u2019s website:\nhttps://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html\n\
          \n![995D8748-858C-4C49-A7FF-326C9D7DC394.jpeg](https://cdn-uploads.huggingface.co/production/uploads/6267121dbc4ff81dad8cf025/qTE9pV9oiSb3RD6uGU8Qx.jpeg)\n\
          \nI was curious to get this working as it would have provided an avenue\
          \ to use the dolly-v2-12b model without having to load it locally (requiring\
          \ a GPU).\n\nThanks again @srowen !"
        updatedAt: '2023-05-20T21:05:36.450Z'
      numEdits: 0
      reactions: []
    id: 64693620511e5cdeb0ee57da
    type: comment
  author: AeroG
  content: "Hi, thanks for the speedy reply. \n\nI came across this code example from\
    \ langchain\u2019s website:\nhttps://python.langchain.com/en/latest/modules/models/llms/integrations/huggingface_hub.html\n\
    \n![995D8748-858C-4C49-A7FF-326C9D7DC394.jpeg](https://cdn-uploads.huggingface.co/production/uploads/6267121dbc4ff81dad8cf025/qTE9pV9oiSb3RD6uGU8Qx.jpeg)\n\
    \nI was curious to get this working as it would have provided an avenue to use\
    \ the dolly-v2-12b model without having to load it locally (requiring a GPU).\n\
    \nThanks again @srowen !"
  created_at: 2023-05-20 20:05:36+00:00
  edited: false
  hidden: false
  id: 64693620511e5cdeb0ee57da
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-05-20T21:06:35.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>This works. I''m saying you at least may need to modify the generation
          settings. It doesn''t require a GPU, strictly speaking, but you will get
          much better performance if you do.</p>

          '
        raw: This works. I'm saying you at least may need to modify the generation
          settings. It doesn't require a GPU, strictly speaking, but you will get
          much better performance if you do.
        updatedAt: '2023-05-20T21:06:35.968Z'
      numEdits: 0
      reactions: []
    id: 6469365b511e5cdeb0ee5aba
    type: comment
  author: srowen
  content: This works. I'm saying you at least may need to modify the generation settings.
    It doesn't require a GPU, strictly speaking, but you will get much better performance
    if you do.
  created_at: 2023-05-20 20:06:35+00:00
  edited: false
  hidden: false
  id: 6469365b511e5cdeb0ee5aba
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
      fullname: Gavita Regunath
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AeroG
      type: user
    createdAt: '2023-05-21T21:03:20.000Z'
    data:
      edited: false
      editors:
      - AeroG
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/643702c3715232c98000e2c3f2cefda2.svg
          fullname: Gavita Regunath
          isHf: false
          isPro: false
          name: AeroG
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;srowen&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/srowen\">@<span class=\"\
          underline\">srowen</span></a></span>\n\n\t</span></span> thanks for the\
          \ clarification. Based on your advice, HuggingFace Pipeline and setting\
          \ verbose=True worked like a charm. It now generates text when using the\
          \ databricks/dolly-v2-3b (I am running this on Databricks, 12.2 LTS ML,\
          \ Standard_DS4_v2) - which is cool for being able to use v2-3b, but will\
          \ definitely be insufficient for a 7b or 12b model for sure.</p>\n<p>Thanks\
          \ for your help again!</p>\n"
        raw: '@srowen thanks for the clarification. Based on your advice, HuggingFace
          Pipeline and setting verbose=True worked like a charm. It now generates
          text when using the databricks/dolly-v2-3b (I am running this on Databricks,
          12.2 LTS ML, Standard_DS4_v2) - which is cool for being able to use v2-3b,
          but will definitely be insufficient for a 7b or 12b model for sure.


          Thanks for your help again!'
        updatedAt: '2023-05-21T21:03:20.192Z'
      numEdits: 0
      reactions: []
    id: 646a8718f51b56a285c3a6b5
    type: comment
  author: AeroG
  content: '@srowen thanks for the clarification. Based on your advice, HuggingFace
    Pipeline and setting verbose=True worked like a charm. It now generates text when
    using the databricks/dolly-v2-3b (I am running this on Databricks, 12.2 LTS ML,
    Standard_DS4_v2) - which is cool for being able to use v2-3b, but will definitely
    be insufficient for a 7b or 12b model for sure.


    Thanks for your help again!'
  created_at: 2023-05-21 20:03:20+00:00
  edited: false
  hidden: false
  id: 646a8718f51b56a285c3a6b5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-05-22T22:53:19.000Z'
    data:
      status: closed
    id: 646bf25ff85ebf65c5414cb5
    type: status-change
  author: srowen
  created_at: 2023-05-22 21:53:19+00:00
  id: 646bf25ff85ebf65c5414cb5
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 71
repo_id: databricks/dolly-v2-12b
repo_type: model
status: closed
target_branch: null
title: Accessing Dolly-v2-3b via HuggingFaceHub and langchain
