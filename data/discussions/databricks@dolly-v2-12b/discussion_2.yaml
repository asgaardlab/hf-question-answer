!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Vivi95
conflicting_files: null
created_at: 2023-04-12 17:52:53+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
      fullname: Vaghela
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vivi95
      type: user
    createdAt: '2023-04-12T18:52:53.000Z'
    data:
      edited: false
      editors:
      - Vivi95
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
          fullname: Vaghela
          isHf: false
          isPro: false
          name: Vivi95
          type: user
        html: '<p>While running the following steps in usage instructions:<br>import
          torch<br>from transformers import pipeline<br>instruct_pipeline = pipeline(model="databricks/dolly-v2-12b",
          torch_dtype=torch.bfloat16, trust_remote_code=True, device_map="auto")</p>

          <p>I am getting NameError: name ''init_empty_weights'' is not defined</p>

          '
        raw: "While running the following steps in usage instructions:\r\nimport torch\r\
          \nfrom transformers import pipeline\r\ninstruct_pipeline = pipeline(model=\"\
          databricks/dolly-v2-12b\", torch_dtype=torch.bfloat16, trust_remote_code=True,\
          \ device_map=\"auto\")\r\n\r\nI am getting NameError: name 'init_empty_weights'\
          \ is not defined"
        updatedAt: '2023-04-12T18:52:53.399Z'
      numEdits: 0
      reactions: []
    id: 6436fe051046b34b543a12e1
    type: comment
  author: Vivi95
  content: "While running the following steps in usage instructions:\r\nimport torch\r\
    \nfrom transformers import pipeline\r\ninstruct_pipeline = pipeline(model=\"databricks/dolly-v2-12b\"\
    , torch_dtype=torch.bfloat16, trust_remote_code=True, device_map=\"auto\")\r\n\
    \r\nI am getting NameError: name 'init_empty_weights' is not defined"
  created_at: 2023-04-12 17:52:53+00:00
  edited: false
  hidden: false
  id: 6436fe051046b34b543a12e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-12T19:03:21.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>This means you didn''t install <code>accelerate</code>.  See <a
          rel="nofollow" href="https://github.com/databrickslabs/dolly">https://github.com/databrickslabs/dolly</a>
          for more notes on generation</p>

          '
        raw: This means you didn't install `accelerate`.  See https://github.com/databrickslabs/dolly
          for more notes on generation
        updatedAt: '2023-04-12T19:03:21.860Z'
      numEdits: 0
      reactions: []
    id: 64370079b49082de740885e1
    type: comment
  author: srowen
  content: This means you didn't install `accelerate`.  See https://github.com/databrickslabs/dolly
    for more notes on generation
  created_at: 2023-04-12 18:03:21+00:00
  edited: false
  hidden: false
  id: 64370079b49082de740885e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
      fullname: Vaghela
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vivi95
      type: user
    createdAt: '2023-04-12T19:22:53.000Z'
    data:
      edited: false
      editors:
      - Vivi95
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
          fullname: Vaghela
          isHf: false
          isPro: false
          name: Vivi95
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;srowen&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/srowen\">@<span class=\"\
          underline\">srowen</span></a></span>\n\n\t</span></span> that's right. I\
          \ had to restart the kernel. But now it's this error</p>\n<p>ValueError:\
          \ Could not load model databricks/dolly-v2-12b with any of the following\
          \ classes: (&lt;class<br>'transformers.models.auto.modeling_auto.AutoModelForCausalLM'&gt;,\
          \ &lt;class<br>'transformers.models.gpt_neox.modeling_gpt_neox.GPTNeoXForCausalLM'&gt;).</p>\n"
        raw: "@srowen that's right. I had to restart the kernel. But now it's this\
          \ error\n\nValueError: Could not load model databricks/dolly-v2-12b with\
          \ any of the following classes: (<class \n'transformers.models.auto.modeling_auto.AutoModelForCausalLM'>,\
          \ <class \n'transformers.models.gpt_neox.modeling_gpt_neox.GPTNeoXForCausalLM'>)."
        updatedAt: '2023-04-12T19:22:53.051Z'
      numEdits: 0
      reactions: []
    id: 6437050d42fc843bde90b810
    type: comment
  author: Vivi95
  content: "@srowen that's right. I had to restart the kernel. But now it's this error\n\
    \nValueError: Could not load model databricks/dolly-v2-12b with any of the following\
    \ classes: (<class \n'transformers.models.auto.modeling_auto.AutoModelForCausalLM'>,\
    \ <class \n'transformers.models.gpt_neox.modeling_gpt_neox.GPTNeoXForCausalLM'>)."
  created_at: 2023-04-12 18:22:53+00:00
  edited: false
  hidden: false
  id: 6437050d42fc843bde90b810
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-12T19:31:09.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>What version of transformers are you using? You may need to update.</p>

          '
        raw: What version of transformers are you using? You may need to update.
        updatedAt: '2023-04-12T19:31:09.722Z'
      numEdits: 0
      reactions: []
    id: 643706fd42fc843bde90c4b5
    type: comment
  author: srowen
  content: What version of transformers are you using? You may need to update.
  created_at: 2023-04-12 18:31:09+00:00
  edited: false
  hidden: false
  id: 643706fd42fc843bde90c4b5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
      fullname: Vaghela
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vivi95
      type: user
    createdAt: '2023-04-12T19:52:35.000Z'
    data:
      edited: false
      editors:
      - Vivi95
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d99fe68937baa8cd23bc46d2ebfd92bb.svg
          fullname: Vaghela
          isHf: false
          isPro: false
          name: Vivi95
          type: user
        html: "<p>I just updated it and still the same error. Note, I am running it\
          \ in mac m1 <span data-props=\"{&quot;user&quot;:&quot;srowen&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/srowen\">@<span class=\"\
          underline\">srowen</span></a></span>\n\n\t</span></span><br>Name: transformers<br>Version:\
          \ 4.27.4</p>\n"
        raw: "I just updated it and still the same error. Note, I am running it in\
          \ mac m1 @srowen \nName: transformers\nVersion: 4.27.4"
        updatedAt: '2023-04-12T19:52:35.957Z'
      numEdits: 0
      reactions: []
    id: 64370c038392e239c5467b49
    type: comment
  author: Vivi95
  content: "I just updated it and still the same error. Note, I am running it in mac\
    \ m1 @srowen \nName: transformers\nVersion: 4.27.4"
  created_at: 2023-04-12 18:52:35+00:00
  edited: false
  hidden: false
  id: 64370c038392e239c5467b49
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-12T19:56:13.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>I doubt this will work on a Mac, like most any model that relies
          on CUDA. This error is probably telling you that at some level, but often
          comes up if you don''t have pytorch installed, too. The repo here shows
          how to use the model, but you will generally need a powerful NVIDIA GPU
          for good results.</p>

          '
        raw: I doubt this will work on a Mac, like most any model that relies on CUDA.
          This error is probably telling you that at some level, but often comes up
          if you don't have pytorch installed, too. The repo here shows how to use
          the model, but you will generally need a powerful NVIDIA GPU for good results.
        updatedAt: '2023-04-12T19:56:13.913Z'
      numEdits: 0
      reactions: []
    id: 64370cdd5f36a7ed0f4872e2
    type: comment
  author: srowen
  content: I doubt this will work on a Mac, like most any model that relies on CUDA.
    This error is probably telling you that at some level, but often comes up if you
    don't have pytorch installed, too. The repo here shows how to use the model, but
    you will generally need a powerful NVIDIA GPU for good results.
  created_at: 2023-04-12 18:56:13+00:00
  edited: false
  hidden: false
  id: 64370cdd5f36a7ed0f4872e2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-19T19:05:44.000Z'
    data:
      status: closed
    id: 64403b884164a65ca12cb2e4
    type: status-change
  author: srowen
  created_at: 2023-04-19 18:05:44+00:00
  id: 64403b884164a65ca12cb2e4
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: databricks/dolly-v2-12b
repo_type: model
status: closed
target_branch: null
title: 'NameError: name ''init_empty_weights'' is not defined'
