!!python/object:huggingface_hub.community.DiscussionWithDetails
author: aguzinho
conflicting_files: null
created_at: 2023-04-17 09:06:59+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-17T10:06:59.000Z'
    data:
      edited: true
      editors:
      - aguzinho
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
          fullname: Aku
          isHf: false
          isPro: false
          name: aguzinho
          type: user
        html: '<p>Hello there,</p>

          <p>I''m using corporate Azure Databricks, and I get the following error
          when using Notebook:</p>

          <p>ValueError: Could not load model databricks/dolly-v2-12b with any of
          the following classes: (, , ).</p>

          <p>when running the following code from this website (<a href="https://huggingface.co/databricks/dolly-v2-12b">https://huggingface.co/databricks/dolly-v2-12b</a>?):</p>

          <p>%pip install accelerate&gt;=0.12.0 transformers[torch]==4.25.1</p>

          <p>import torch<br>from transformers import pipeline</p>

          <p>generate_text = pipeline(model="databricks/dolly-v2-12b", torch_dtype=torch.bfloat16,
          trust_remote_code=True, device_map="auto")</p>

          <p>Any thoughts/updates/help?</p>

          '
        raw: 'Hello there,


          I''m using corporate Azure Databricks, and I get the following error when
          using Notebook:


          ValueError: Could not load model databricks/dolly-v2-12b with any of the
          following classes: (, , ).


          when running the following code from this website (https://huggingface.co/databricks/dolly-v2-12b?):


          %pip install accelerate>=0.12.0 transformers[torch]==4.25.1


          import torch

          from transformers import pipeline


          generate_text = pipeline(model="databricks/dolly-v2-12b", torch_dtype=torch.bfloat16,
          trust_remote_code=True, device_map="auto")


          Any thoughts/updates/help?'
        updatedAt: '2023-04-17T10:07:25.853Z'
      numEdits: 1
      reactions: []
    id: 643d1a43043254ce1091c39e
    type: comment
  author: aguzinho
  content: 'Hello there,


    I''m using corporate Azure Databricks, and I get the following error when using
    Notebook:


    ValueError: Could not load model databricks/dolly-v2-12b with any of the following
    classes: (, , ).


    when running the following code from this website (https://huggingface.co/databricks/dolly-v2-12b?):


    %pip install accelerate>=0.12.0 transformers[torch]==4.25.1


    import torch

    from transformers import pipeline


    generate_text = pipeline(model="databricks/dolly-v2-12b", torch_dtype=torch.bfloat16,
    trust_remote_code=True, device_map="auto")


    Any thoughts/updates/help?'
  created_at: 2023-04-17 09:06:59+00:00
  edited: true
  hidden: false
  id: 643d1a43043254ce1091c39e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-17T12:43:25.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>Have you followed the guidance at <a rel="nofollow" href="https://github.com/databrickslabs/dolly">https://github.com/databrickslabs/dolly</a>
          ?<br>Your hardware is probably insufficient</p>

          '
        raw: 'Have you followed the guidance at https://github.com/databrickslabs/dolly
          ?

          Your hardware is probably insufficient'
        updatedAt: '2023-04-17T12:43:25.061Z'
      numEdits: 0
      reactions: []
    id: 643d3eedaf3fe078a3998d80
    type: comment
  author: srowen
  content: 'Have you followed the guidance at https://github.com/databrickslabs/dolly
    ?

    Your hardware is probably insufficient'
  created_at: 2023-04-17 11:43:25+00:00
  edited: false
  hidden: false
  id: 643d3eedaf3fe078a3998d80
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-18T06:29:18.000Z'
    data:
      edited: false
      editors:
      - aguzinho
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
          fullname: Aku
          isHf: false
          isPro: false
          name: aguzinho
          type: user
        html: '<blockquote>

          <p>Have you followed the guidance at <a rel="nofollow" href="https://github.com/databrickslabs/dolly">https://github.com/databrickslabs/dolly</a>
          ?<br>Your hardware is probably insufficient</p>

          </blockquote>

          <p>Actually, no. I''ll try that guidance. Thanks already for your help :)</p>

          '
        raw: '> Have you followed the guidance at https://github.com/databrickslabs/dolly
          ?

          > Your hardware is probably insufficient


          Actually, no. I''ll try that guidance. Thanks already for your help :)'
        updatedAt: '2023-04-18T06:29:18.940Z'
      numEdits: 0
      reactions: []
    id: 643e38be39aa9d1bd4194e38
    type: comment
  author: aguzinho
  content: '> Have you followed the guidance at https://github.com/databrickslabs/dolly
    ?

    > Your hardware is probably insufficient


    Actually, no. I''ll try that guidance. Thanks already for your help :)'
  created_at: 2023-04-18 05:29:18+00:00
  edited: false
  hidden: false
  id: 643e38be39aa9d1bd4194e38
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-18T07:31:29.000Z'
    data:
      edited: false
      editors:
      - aguzinho
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
          fullname: Aku
          isHf: false
          isPro: false
          name: aguzinho
          type: user
        html: '<p>Update: Now the Databricks notebook gives me "Fatal error: The Python
          kernel is unresponsive."</p>

          <p>I use:</p>

          <ul>

          <li>Databricks Runtime Version: 13.0 ML (includes Apache Spark 3.4.0, Scala
          2.12)</li>

          <li>Worker type: Standard_NC4as_T4_v3, 28 GB Memory, 1 GPU, Min workers
          2, Max workers 8</li>

          </ul>

          <p>Is that compute too small?</p>

          '
        raw: 'Update: Now the Databricks notebook gives me "Fatal error: The Python
          kernel is unresponsive."


          I use:

          - Databricks Runtime Version: 13.0 ML (includes Apache Spark 3.4.0, Scala
          2.12)

          - Worker type: Standard_NC4as_T4_v3, 28 GB Memory, 1 GPU, Min workers 2,
          Max workers 8


          Is that compute too small?'
        updatedAt: '2023-04-18T07:31:29.020Z'
      numEdits: 0
      reactions: []
    id: 643e47515daab569ee6169e5
    type: comment
  author: aguzinho
  content: 'Update: Now the Databricks notebook gives me "Fatal error: The Python
    kernel is unresponsive."


    I use:

    - Databricks Runtime Version: 13.0 ML (includes Apache Spark 3.4.0, Scala 2.12)

    - Worker type: Standard_NC4as_T4_v3, 28 GB Memory, 1 GPU, Min workers 2, Max workers
    8


    Is that compute too small?'
  created_at: 2023-04-18 06:31:29+00:00
  edited: false
  hidden: false
  id: 643e47515daab569ee6169e5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-18T13:08:50.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>It is not sufficient on several counts.<br>You are trying to tune
          the 12B model which needs A100 GPUs.<br>You can tune 7B/3B with A10 or V100,
          but you have T4s.<br>28GB of OS RAM is too little unless maybe using the
          3B model.<br>You have a cluster, but do not need a cluster - single node.</p>

          <p>There are several notes on hardware in the README</p>

          '
        raw: 'It is not sufficient on several counts.

          You are trying to tune the 12B model which needs A100 GPUs.

          You can tune 7B/3B with A10 or V100, but you have T4s.

          28GB of OS RAM is too little unless maybe using the 3B model.

          You have a cluster, but do not need a cluster - single node.


          There are several notes on hardware in the README'
        updatedAt: '2023-04-18T13:08:50.452Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - dev-payal
    id: 643e9662e53cd262bd25fe06
    type: comment
  author: srowen
  content: 'It is not sufficient on several counts.

    You are trying to tune the 12B model which needs A100 GPUs.

    You can tune 7B/3B with A10 or V100, but you have T4s.

    28GB of OS RAM is too little unless maybe using the 3B model.

    You have a cluster, but do not need a cluster - single node.


    There are several notes on hardware in the README'
  created_at: 2023-04-18 12:08:50+00:00
  edited: false
  hidden: false
  id: 643e9662e53cd262bd25fe06
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-19T11:30:24.000Z'
    data:
      edited: false
      editors:
      - aguzinho
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
          fullname: Aku
          isHf: false
          isPro: false
          name: aguzinho
          type: user
        html: '<p>Okay, thank you. Databricks name their workers differently, so what
          worker is equivalent to A10 or V100?</p>

          '
        raw: Okay, thank you. Databricks name their workers differently, so what worker
          is equivalent to A10 or V100?
        updatedAt: '2023-04-19T11:30:24.464Z'
      numEdits: 0
      reactions: []
    id: 643fd0d04164a65ca1223581
    type: comment
  author: aguzinho
  content: Okay, thank you. Databricks name their workers differently, so what worker
    is equivalent to A10 or V100?
  created_at: 2023-04-19 10:30:24+00:00
  edited: false
  hidden: false
  id: 643fd0d04164a65ca1223581
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-19T11:33:29.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>No, that''s not the case. You see options from the cloud provider
          like g5.4xlarge, NC6s_v3. a2-highgpu-8<br>THe answer depends on your cloud.
          This is doc''ed at <a rel="nofollow" href="https://github.com/databrickslabs/dolly#training-on-other-instances">https://github.com/databrickslabs/dolly#training-on-other-instances</a>,
          please read that.<br>On GCP you want a2-highgpu instances (A100)</p>

          '
        raw: 'No, that''s not the case. You see options from the cloud provider like
          g5.4xlarge, NC6s_v3. a2-highgpu-8

          THe answer depends on your cloud. This is doc''ed at https://github.com/databrickslabs/dolly#training-on-other-instances,
          please read that.

          On GCP you want a2-highgpu instances (A100)'
        updatedAt: '2023-04-19T11:33:29.552Z'
      numEdits: 0
      reactions: []
    id: 643fd1894164a65ca12247ca
    type: comment
  author: srowen
  content: 'No, that''s not the case. You see options from the cloud provider like
    g5.4xlarge, NC6s_v3. a2-highgpu-8

    THe answer depends on your cloud. This is doc''ed at https://github.com/databrickslabs/dolly#training-on-other-instances,
    please read that.

    On GCP you want a2-highgpu instances (A100)'
  created_at: 2023-04-19 10:33:29+00:00
  edited: false
  hidden: false
  id: 643fd1894164a65ca12247ca
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb6cefeff6dbf26048105c3a12e013a3.svg
      fullname: Konstantin Goncharuk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kgoncharuk
      type: user
    createdAt: '2023-04-19T13:00:09.000Z'
    data:
      edited: false
      editors:
      - kgoncharuk
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb6cefeff6dbf26048105c3a12e013a3.svg
          fullname: Konstantin Goncharuk
          isHf: false
          isPro: false
          name: kgoncharuk
          type: user
        html: '<p>Getting the same error when trying to run the model on Macbook M2.
          Is that due to hardware limitations as well or are those requirements only
          applicable to training?</p>

          '
        raw: Getting the same error when trying to run the model on Macbook M2. Is
          that due to hardware limitations as well or are those requirements only
          applicable to training?
        updatedAt: '2023-04-19T13:00:09.328Z'
      numEdits: 0
      reactions: []
    id: 643fe5d92113f7dfcb4c3f0a
    type: comment
  author: kgoncharuk
  content: Getting the same error when trying to run the model on Macbook M2. Is that
    due to hardware limitations as well or are those requirements only applicable
    to training?
  created_at: 2023-04-19 12:00:09+00:00
  edited: false
  hidden: false
  id: 643fe5d92113f7dfcb4c3f0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-19T19:17:16.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>Macbooks won''t work. Pytorch will need NVIDIA GPUs. There are other
          threads here about people trying to get it to run on a Mac, but I think
          it will be too slow on any consumer machine.</p>

          '
        raw: 'Macbooks won''t work. Pytorch will need NVIDIA GPUs. There are other
          threads here about people trying to get it to run on a Mac, but I think
          it will be too slow on any consumer machine.

          '
        updatedAt: '2023-04-19T19:17:16.624Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64403e3cd4229e14ae9cd9d8
    id: 64403e3cd4229e14ae9cd9d7
    type: comment
  author: srowen
  content: 'Macbooks won''t work. Pytorch will need NVIDIA GPUs. There are other threads
    here about people trying to get it to run on a Mac, but I think it will be too
    slow on any consumer machine.

    '
  created_at: 2023-04-19 18:17:16+00:00
  edited: false
  hidden: false
  id: 64403e3cd4229e14ae9cd9d7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-19T19:17:16.000Z'
    data:
      status: closed
    id: 64403e3cd4229e14ae9cd9d8
    type: status-change
  author: srowen
  created_at: 2023-04-19 18:17:16+00:00
  id: 64403e3cd4229e14ae9cd9d8
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-21T06:00:59.000Z'
    data:
      status: open
    id: 6442269b0771bec9d271fe23
    type: status-change
  author: aguzinho
  created_at: 2023-04-21 05:00:59+00:00
  id: 6442269b0771bec9d271fe23
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
      fullname: Aku
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aguzinho
      type: user
    createdAt: '2023-04-21T06:18:47.000Z'
    data:
      edited: false
      editors:
      - aguzinho
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf8db6ff5529dd9961dc485666c9b35.svg
          fullname: Aku
          isHf: false
          isPro: false
          name: aguzinho
          type: user
        html: '<p>Okay. But it is still a bit unclear what compute to use because
          the cloud providers use their own naming conventions on workers/compute,
          so when talked about A100 or similar, it does not tell, for example, what
          worker I need to use when using Databricks.</p>

          '
        raw: Okay. But it is still a bit unclear what compute to use because the cloud
          providers use their own naming conventions on workers/compute, so when talked
          about A100 or similar, it does not tell, for example, what worker I need
          to use when using Databricks.
        updatedAt: '2023-04-21T06:18:47.737Z'
      numEdits: 0
      reactions: []
    id: 64422ac7b11e37f26da0d50d
    type: comment
  author: aguzinho
  content: Okay. But it is still a bit unclear what compute to use because the cloud
    providers use their own naming conventions on workers/compute, so when talked
    about A100 or similar, it does not tell, for example, what worker I need to use
    when using Databricks.
  created_at: 2023-04-21 05:18:47+00:00
  edited: false
  hidden: false
  id: 64422ac7b11e37f26da0d50d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-21T13:06:21.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>Databricks doesn''t have different names for cloud instances. Yes,
          the cloud providers have their own kind of confusing names conventions.
          But you can just look up what the A100 is in your cloud. It''s a2-highpu-*
          in GCP for example.</p>

          '
        raw: Databricks doesn't have different names for cloud instances. Yes, the
          cloud providers have their own kind of confusing names conventions. But
          you can just look up what the A100 is in your cloud. It's a2-highpu-* in
          GCP for example.
        updatedAt: '2023-04-21T13:06:21.549Z'
      numEdits: 0
      reactions: []
    id: 64428a4d72b4ca7eeeeb9284
    type: comment
  author: srowen
  content: Databricks doesn't have different names for cloud instances. Yes, the cloud
    providers have their own kind of confusing names conventions. But you can just
    look up what the A100 is in your cloud. It's a2-highpu-* in GCP for example.
  created_at: 2023-04-21 12:06:21+00:00
  edited: false
  hidden: false
  id: 64428a4d72b4ca7eeeeb9284
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-04-21T15:22:12.000Z'
    data:
      status: closed
    id: 6442aa24dad68e008d06ed9a
    type: status-change
  author: srowen
  created_at: 2023-04-21 14:22:12+00:00
  id: 6442aa24dad68e008d06ed9a
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 34
repo_id: databricks/dolly-v2-12b
repo_type: model
status: closed
target_branch: null
title: 'ValueError: Could not load model databricks/dolly-v2-12b with any of the following
  classes: (, , ).'
