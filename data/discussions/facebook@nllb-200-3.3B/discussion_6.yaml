!!python/object:huggingface_hub.community.DiscussionWithDetails
author: charliekocsis
conflicting_files: null
created_at: 2023-09-15 00:09:02+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d12d39b522c81bc6d868367160084d3c.svg
      fullname: Charlie Kocsis
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: charliekocsis
      type: user
    createdAt: '2023-09-15T01:09:02.000Z'
    data:
      edited: false
      editors:
      - charliekocsis
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.958894670009613
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d12d39b522c81bc6d868367160084d3c.svg
          fullname: Charlie Kocsis
          isHf: false
          isPro: false
          name: charliekocsis
          type: user
        html: '<p>I tried to host it as Inference Endpoint but I keep receiving this
          error:</p>

          <p>{"error":"Translation requires a <code>src_lang</code> and a <code>tgt_lang</code>
          for this model"}</p>

          <p>I pass that in as part of the JSON body so not sure why that happens.</p>

          <p>Any help would be appreciated.</p>

          <p>Thank you.</p>

          '
        raw: "I tried to host it as Inference Endpoint but I keep receiving this error:\r\
          \n\r\n{\"error\":\"Translation requires a `src_lang` and a `tgt_lang` for\
          \ this model\"}\r\n\r\nI pass that in as part of the JSON body so not sure\
          \ why that happens.\r\n\r\nAny help would be appreciated.\r\n\r\nThank you."
        updatedAt: '2023-09-15T01:09:02.221Z'
      numEdits: 0
      reactions: []
    id: 6503aeaeeda77aafd4b6c295
    type: comment
  author: charliekocsis
  content: "I tried to host it as Inference Endpoint but I keep receiving this error:\r\
    \n\r\n{\"error\":\"Translation requires a `src_lang` and a `tgt_lang` for this\
    \ model\"}\r\n\r\nI pass that in as part of the JSON body so not sure why that\
    \ happens.\r\n\r\nAny help would be appreciated.\r\n\r\nThank you."
  created_at: 2023-09-15 00:09:02+00:00
  edited: false
  hidden: false
  id: 6503aeaeeda77aafd4b6c295
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-09-15T13:12:02.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5800594687461853
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>Maybe <span data-props=\"{&quot;user&quot;:&quot;ArthurZ&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ArthurZ\"\
          >@<span class=\"underline\">ArthurZ</span></a></span>\n\n\t</span></span>\
          \ or <span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> can help!</p>\n"
        raw: Maybe @ArthurZ or @philschmid can help!
        updatedAt: '2023-09-15T13:12:02.652Z'
      numEdits: 0
      reactions: []
    id: 65045822e44079a26d9bf856
    type: comment
  author: lysandre
  content: Maybe @ArthurZ or @philschmid can help!
  created_at: 2023-09-15 12:12:02+00:00
  edited: false
  hidden: false
  id: 65045822e44079a26d9bf856
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b53bdc38f7db8752fbf6a067dd1f9390.svg
      fullname: Yippi J
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yippi
      type: user
    createdAt: '2023-09-27T23:48:04.000Z'
    data:
      edited: false
      editors:
      - Yippi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6584416031837463
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b53bdc38f7db8752fbf6a067dd1f9390.svg
          fullname: Yippi J
          isHf: false
          isPro: false
          name: Yippi
          type: user
        html: '<p>I have the same issue here when running it on SageMaker:</p>

          <p>ModelError: An error occurred (ModelError) when calling the InvokeEndpoint
          operation: Received client error (400) from primary with message "{<br>  "code":
          400,<br>  "type": "InternalServerException",<br>  "message": "Translation
          requires a <code>src_lang</code> and a <code>tgt_lang</code> for this model"<br>}</p>

          '
        raw: "I have the same issue here when running it on SageMaker:\n\nModelError:\
          \ An error occurred (ModelError) when calling the InvokeEndpoint operation:\
          \ Received client error (400) from primary with message \"{\n  \"code\"\
          : 400,\n  \"type\": \"InternalServerException\",\n  \"message\": \"Translation\
          \ requires a `src_lang` and a `tgt_lang` for this model\"\n}"
        updatedAt: '2023-09-27T23:48:04.820Z'
      numEdits: 0
      reactions: []
    id: 6514bf3468414f3480d5b9fc
    type: comment
  author: Yippi
  content: "I have the same issue here when running it on SageMaker:\n\nModelError:\
    \ An error occurred (ModelError) when calling the InvokeEndpoint operation: Received\
    \ client error (400) from primary with message \"{\n  \"code\": 400,\n  \"type\"\
    : \"InternalServerException\",\n  \"message\": \"Translation requires a `src_lang`\
    \ and a `tgt_lang` for this model\"\n}"
  created_at: 2023-09-27 22:48:04+00:00
  edited: false
  hidden: false
  id: 6514bf3468414f3480d5b9fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-09-28T09:45:03.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.539939284324646
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;charliekocsis&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/charliekocsis\"\
          >@<span class=\"underline\">charliekocsis</span></a></span>\n\n\t</span></span>,\
          \ <span data-props=\"{&quot;user&quot;:&quot;Yippi&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Yippi\">@<span class=\"\
          underline\">Yippi</span></a></span>\n\n\t</span></span>, I'm not sure you\
          \ can do so through the UI offering to test your model directly, however,\
          \ here's how you can do so from your Python runtime:</p>\n<pre><code class=\"\
          language-py\"><span class=\"hljs-keyword\">import</span> requests\n\nAPI_URL\
          \ = <span class=\"hljs-string\">\"https://endpoint-url.us-east-1.aws.endpoints.huggingface.cloud\"\
          </span>  <span class=\"hljs-comment\"># Replace this</span>\nheaders = {\n\
          \    <span class=\"hljs-string\">\"Authorization\"</span>: <span class=\"\
          hljs-string\">\"Bearer &lt;XXX&gt;\"</span>,  <span class=\"hljs-comment\"\
          ># Replace this</span>\n    <span class=\"hljs-string\">\"Content-Type\"\
          </span>: <span class=\"hljs-string\">\"application/json\"</span>\n}\n\n\n\
          <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\"\
          >query</span>(<span class=\"hljs-params\">payload</span>):\n    response\
          \ = requests.post(API_URL, headers=headers, json=payload)\n    <span class=\"\
          hljs-keyword\">return</span> response.json()\n\n\noutput = query({<span\
          \ class=\"hljs-string\">\"inputs\"</span>: <span class=\"hljs-string\">\"\
          My name is Sarah Jessica Parker but you can call me Jessica\"</span>, <span\
          \ class=\"hljs-string\">\"parameters\"</span>: {<span class=\"hljs-string\"\
          >\"src_lang\"</span>: <span class=\"hljs-string\">\"eng_Latn\"</span>, <span\
          \ class=\"hljs-string\">\"tgt_lang\"</span>: <span class=\"hljs-string\"\
          >\"fra_Latn\"</span>}})\n\n<span class=\"hljs-built_in\">print</span>(output)\n\
          </code></pre>\n<p>which returns</p>\n<pre><code>[{'translation_text': \"\
          Je m' appelle Sarah Jessica Parker mais tu peux m'appeler Jessica\"}]\n\
          </code></pre>\n"
        raw: "Hey @charliekocsis, @Yippi, I'm not sure you can do so through the UI\
          \ offering to test your model directly, however, here's how you can do so\
          \ from your Python runtime:\n\n```py\nimport requests\n\nAPI_URL = \"https://endpoint-url.us-east-1.aws.endpoints.huggingface.cloud\"\
          \  # Replace this\nheaders = {\n    \"Authorization\": \"Bearer <XXX>\"\
          ,  # Replace this\n    \"Content-Type\": \"application/json\"\n}\n\n\ndef\
          \ query(payload):\n    response = requests.post(API_URL, headers=headers,\
          \ json=payload)\n    return response.json()\n\n\noutput = query({\"inputs\"\
          : \"My name is Sarah Jessica Parker but you can call me Jessica\", \"parameters\"\
          : {\"src_lang\": \"eng_Latn\", \"tgt_lang\": \"fra_Latn\"}})\n\nprint(output)\n\
          ``` \n\nwhich returns\n\n```\n[{'translation_text': \"Je m' appelle Sarah\
          \ Jessica Parker mais tu peux m'appeler Jessica\"}]\n```"
        updatedAt: '2023-09-28T09:45:03.366Z'
      numEdits: 0
      reactions: []
    id: 65154b1f394185aa966b55ec
    type: comment
  author: lysandre
  content: "Hey @charliekocsis, @Yippi, I'm not sure you can do so through the UI\
    \ offering to test your model directly, however, here's how you can do so from\
    \ your Python runtime:\n\n```py\nimport requests\n\nAPI_URL = \"https://endpoint-url.us-east-1.aws.endpoints.huggingface.cloud\"\
    \  # Replace this\nheaders = {\n    \"Authorization\": \"Bearer <XXX>\",  # Replace\
    \ this\n    \"Content-Type\": \"application/json\"\n}\n\n\ndef query(payload):\n\
    \    response = requests.post(API_URL, headers=headers, json=payload)\n    return\
    \ response.json()\n\n\noutput = query({\"inputs\": \"My name is Sarah Jessica\
    \ Parker but you can call me Jessica\", \"parameters\": {\"src_lang\": \"eng_Latn\"\
    , \"tgt_lang\": \"fra_Latn\"}})\n\nprint(output)\n``` \n\nwhich returns\n\n```\n\
    [{'translation_text': \"Je m' appelle Sarah Jessica Parker mais tu peux m'appeler\
    \ Jessica\"}]\n```"
  created_at: 2023-09-28 08:45:03+00:00
  edited: false
  hidden: false
  id: 65154b1f394185aa966b55ec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-09-28T09:46:27.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7484356164932251
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>The language tags are those from the FLORES-200 dataset, which you
          can find here: <a rel="nofollow" href="https://github.com/facebookresearch/flores/tree/main/flores200#languages-in-flores-200">https://github.com/facebookresearch/flores/tree/main/flores200#languages-in-flores-200</a></p>

          '
        raw: 'The language tags are those from the FLORES-200 dataset, which you can
          find here: https://github.com/facebookresearch/flores/tree/main/flores200#languages-in-flores-200'
        updatedAt: '2023-09-28T09:46:27.658Z'
      numEdits: 0
      reactions: []
    id: 65154b73ff74b6f31c70e411
    type: comment
  author: lysandre
  content: 'The language tags are those from the FLORES-200 dataset, which you can
    find here: https://github.com/facebookresearch/flores/tree/main/flores200#languages-in-flores-200'
  created_at: 2023-09-28 08:46:27+00:00
  edited: false
  hidden: false
  id: 65154b73ff74b6f31c70e411
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: facebook/nllb-200-3.3B
repo_type: model
status: open
target_branch: null
title: Hosting as Inference Endpoint doesn't work
