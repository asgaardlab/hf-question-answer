!!python/object:huggingface_hub.community.DiscussionWithDetails
author: GourabHazra
conflicting_files: null
created_at: 2022-08-04 10:08:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dd931c6a0e3beb39d553716cd79435b9.svg
      fullname: Gourab Hazra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: GourabHazra
      type: user
    createdAt: '2022-08-04T11:08:24.000Z'
    data:
      edited: false
      editors:
      - GourabHazra
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dd931c6a0e3beb39d553716cd79435b9.svg
          fullname: Gourab Hazra
          isHf: false
          isPro: false
          name: GourabHazra
          type: user
        html: '<p>   Traceback (most recent call last):<br>   File "c:/Users/Admin/Desktop/Projects/NLP_Cron/cron_audio_test.py",
          line 27, in <br>   generator = task.build_generator(model, cfg)<br>   File
          "C:\Users\Admin\Desktop\Projects\NLP_Cron\cronenv\lib\site-packages\fairseq\tasks\text_to_speech.py",
          line 151, in build_generator<br>   model = models[0]<br>   TypeError: ''FastSpeech2Model''
          object is not subscriptable</p>

          <p>I get this error when running on windows 10 in a virtual environment.</p>

          '
        raw: "   Traceback (most recent call last):\r\n   File \"c:/Users/Admin/Desktop/Projects/NLP_Cron/cron_audio_test.py\"\
          , line 27, in <module>\r\n   generator = task.build_generator(model, cfg)\r\
          \n   File \"C:\\Users\\Admin\\Desktop\\Projects\\NLP_Cron\\cronenv\\lib\\\
          site-packages\\fairseq\\tasks\\text_to_speech.py\", line 151, in build_generator\r\
          \n   model = models[0]\r\n   TypeError: 'FastSpeech2Model' object is not\
          \ subscriptable\r\n\r\nI get this error when running on windows 10 in a\
          \ virtual environment."
        updatedAt: '2022-08-04T11:08:24.763Z'
      numEdits: 0
      reactions: []
    id: 62eba8a8665533d42abf89fc
    type: comment
  author: GourabHazra
  content: "   Traceback (most recent call last):\r\n   File \"c:/Users/Admin/Desktop/Projects/NLP_Cron/cron_audio_test.py\"\
    , line 27, in <module>\r\n   generator = task.build_generator(model, cfg)\r\n\
    \   File \"C:\\Users\\Admin\\Desktop\\Projects\\NLP_Cron\\cronenv\\lib\\site-packages\\\
    fairseq\\tasks\\text_to_speech.py\", line 151, in build_generator\r\n   model\
    \ = models[0]\r\n   TypeError: 'FastSpeech2Model' object is not subscriptable\r\
    \n\r\nI get this error when running on windows 10 in a virtual environment."
  created_at: 2022-08-04 10:08:24+00:00
  edited: false
  hidden: false
  id: 62eba8a8665533d42abf89fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1655094832094-noauth.png?w=200&h=200&f=face
      fullname: Archan Ghosh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Archan
      type: user
    createdAt: '2022-08-11T14:51:55.000Z'
    data:
      edited: false
      editors:
      - Archan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1655094832094-noauth.png?w=200&h=200&f=face
          fullname: Archan Ghosh
          isHf: false
          isPro: false
          name: Archan
          type: user
        html: '<p>Use the model=models it worked for me</p>

          '
        raw: Use the model=models it worked for me
        updatedAt: '2022-08-11T14:51:55.833Z'
      numEdits: 0
      reactions: []
    id: 62f5178bdd84fb72d4815acd
    type: comment
  author: Archan
  content: Use the model=models it worked for me
  created_at: 2022-08-11 13:51:55+00:00
  edited: false
  hidden: false
  id: 62f5178bdd84fb72d4815acd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/25b78f8337b8a38c71c994f7133198dc.svg
      fullname: Jim Rogers
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jrogers
      type: user
    createdAt: '2023-03-19T18:18:16.000Z'
    data:
      edited: false
      editors:
      - jrogers
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/25b78f8337b8a38c71c994f7133198dc.svg
          fullname: Jim Rogers
          isHf: false
          isPro: false
          name: jrogers
          type: user
        html: "<p>I had multiple issues on OSX. This code worked:</p>\n<pre><code>from\
          \ fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub\n\
          from fairseq.models.text_to_speech.hub_interface import TTSHubInterface\n\
          import soundfile as sf\n\nmodels, cfg, task = load_model_ensemble_and_task_from_hf_hub(\n\
          \    \"facebook/fastspeech2-en-ljspeech\",\n    arg_overrides={\"vocoder\"\
          : \"hifigan\", \"fp16\": False}\n)\n\nTTSHubInterface.update_cfg_with_data_cfg(cfg,\
          \ task.data_cfg)\ngenerator = task.build_generator(models, cfg)\n\ntext\
          \ = \"Hello, this is a test run.\"\n\nsample = TTSHubInterface.get_model_input(task,\
          \ text)\nwav, rate = TTSHubInterface.get_prediction(task, models[0], generator,\
          \ sample)\n\nsf.write(\"speech.wav\", wav, samplerate=rate)\n</code></pre>\n"
        raw: "I had multiple issues on OSX. This code worked:\n\n```\nfrom fairseq.checkpoint_utils\
          \ import load_model_ensemble_and_task_from_hf_hub\nfrom fairseq.models.text_to_speech.hub_interface\
          \ import TTSHubInterface\nimport soundfile as sf\n\nmodels, cfg, task =\
          \ load_model_ensemble_and_task_from_hf_hub(\n    \"facebook/fastspeech2-en-ljspeech\"\
          ,\n    arg_overrides={\"vocoder\": \"hifigan\", \"fp16\": False}\n)\n\n\
          TTSHubInterface.update_cfg_with_data_cfg(cfg, task.data_cfg)\ngenerator\
          \ = task.build_generator(models, cfg)\n\ntext = \"Hello, this is a test\
          \ run.\"\n\nsample = TTSHubInterface.get_model_input(task, text)\nwav, rate\
          \ = TTSHubInterface.get_prediction(task, models[0], generator, sample)\n\
          \nsf.write(\"speech.wav\", wav, samplerate=rate)\n```"
        updatedAt: '2023-03-19T18:18:16.842Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - GourabHazra
    id: 641751e8699419b1d372b520
    type: comment
  author: jrogers
  content: "I had multiple issues on OSX. This code worked:\n\n```\nfrom fairseq.checkpoint_utils\
    \ import load_model_ensemble_and_task_from_hf_hub\nfrom fairseq.models.text_to_speech.hub_interface\
    \ import TTSHubInterface\nimport soundfile as sf\n\nmodels, cfg, task = load_model_ensemble_and_task_from_hf_hub(\n\
    \    \"facebook/fastspeech2-en-ljspeech\",\n    arg_overrides={\"vocoder\": \"\
    hifigan\", \"fp16\": False}\n)\n\nTTSHubInterface.update_cfg_with_data_cfg(cfg,\
    \ task.data_cfg)\ngenerator = task.build_generator(models, cfg)\n\ntext = \"Hello,\
    \ this is a test run.\"\n\nsample = TTSHubInterface.get_model_input(task, text)\n\
    wav, rate = TTSHubInterface.get_prediction(task, models[0], generator, sample)\n\
    \nsf.write(\"speech.wav\", wav, samplerate=rate)\n```"
  created_at: 2023-03-19 17:18:16+00:00
  edited: false
  hidden: false
  id: 641751e8699419b1d372b520
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dd931c6a0e3beb39d553716cd79435b9.svg
      fullname: Gourab Hazra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: GourabHazra
      type: user
    createdAt: '2023-05-12T07:40:25.000Z'
    data:
      edited: false
      editors:
      - GourabHazra
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dd931c6a0e3beb39d553716cd79435b9.svg
          fullname: Gourab Hazra
          isHf: false
          isPro: false
          name: GourabHazra
          type: user
        html: "<p>This finally worked for me in colab<br>Started a fresh runtime then,</p>\n\
          <pre><code>!pip install fairseq\n!pip install huggingface_hub\n!pip install\
          \ g2p_en\n\nfrom fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub\n\
          from fairseq.models.text_to_speech.hub_interface import TTSHubInterface\n\
          import soundfile as sf\n\nmodels, cfg, task = load_model_ensemble_and_task_from_hf_hub(\n\
          \   \"facebook/fastspeech2-en-ljspeech\",\n   arg_overrides={\"vocoder\"\
          : \"hifigan\", \"fp16\": False}\n)\n\nTTSHubInterface.update_cfg_with_data_cfg(cfg,\
          \ task.data_cfg)\ngenerator = task.build_generator(models, cfg)\n\ntext\
          \ = \"Hello, this is a test run.\"\n\nsample = TTSHubInterface.get_model_input(task,\
          \ text)\nwav, rate = TTSHubInterface.get_prediction(task, models[0], generator,\
          \ sample)\n\nsf.write(\"speech.wav\", wav, samplerate=rate)\n</code></pre>\n"
        raw: "This finally worked for me in colab\nStarted a fresh runtime then,\n\
          \n ```\n !pip install fairseq\n!pip install huggingface_hub\n!pip install\
          \ g2p_en\n\nfrom fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub\n\
          from fairseq.models.text_to_speech.hub_interface import TTSHubInterface\n\
          import soundfile as sf\n\nmodels, cfg, task = load_model_ensemble_and_task_from_hf_hub(\n\
          \    \"facebook/fastspeech2-en-ljspeech\",\n    arg_overrides={\"vocoder\"\
          : \"hifigan\", \"fp16\": False}\n)\n\nTTSHubInterface.update_cfg_with_data_cfg(cfg,\
          \ task.data_cfg)\ngenerator = task.build_generator(models, cfg)\n\ntext\
          \ = \"Hello, this is a test run.\"\n\nsample = TTSHubInterface.get_model_input(task,\
          \ text)\nwav, rate = TTSHubInterface.get_prediction(task, models[0], generator,\
          \ sample)\n\nsf.write(\"speech.wav\", wav, samplerate=rate)\n ```\n"
        updatedAt: '2023-05-12T07:40:25.258Z'
      numEdits: 0
      reactions: []
      relatedEventId: 645ded69faa533beced017a3
    id: 645ded69faa533beced017a2
    type: comment
  author: GourabHazra
  content: "This finally worked for me in colab\nStarted a fresh runtime then,\n\n\
    \ ```\n !pip install fairseq\n!pip install huggingface_hub\n!pip install g2p_en\n\
    \nfrom fairseq.checkpoint_utils import load_model_ensemble_and_task_from_hf_hub\n\
    from fairseq.models.text_to_speech.hub_interface import TTSHubInterface\nimport\
    \ soundfile as sf\n\nmodels, cfg, task = load_model_ensemble_and_task_from_hf_hub(\n\
    \    \"facebook/fastspeech2-en-ljspeech\",\n    arg_overrides={\"vocoder\": \"\
    hifigan\", \"fp16\": False}\n)\n\nTTSHubInterface.update_cfg_with_data_cfg(cfg,\
    \ task.data_cfg)\ngenerator = task.build_generator(models, cfg)\n\ntext = \"Hello,\
    \ this is a test run.\"\n\nsample = TTSHubInterface.get_model_input(task, text)\n\
    wav, rate = TTSHubInterface.get_prediction(task, models[0], generator, sample)\n\
    \nsf.write(\"speech.wav\", wav, samplerate=rate)\n ```\n"
  created_at: 2023-05-12 06:40:25+00:00
  edited: false
  hidden: false
  id: 645ded69faa533beced017a2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/dd931c6a0e3beb39d553716cd79435b9.svg
      fullname: Gourab Hazra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: GourabHazra
      type: user
    createdAt: '2023-05-12T07:40:25.000Z'
    data:
      status: closed
    id: 645ded69faa533beced017a3
    type: status-change
  author: GourabHazra
  created_at: 2023-05-12 06:40:25+00:00
  id: 645ded69faa533beced017a3
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1655094832094-noauth.png?w=200&h=200&f=face
      fullname: Archan Ghosh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Archan
      type: user
    createdAt: '2023-05-16T14:21:31.000Z'
    data:
      edited: false
      editors:
      - Archan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1655094832094-noauth.png?w=200&h=200&f=face
          fullname: Archan Ghosh
          isHf: false
          isPro: false
          name: Archan
          type: user
        html: '<p>Finally right.</p>

          '
        raw: Finally right.
        updatedAt: '2023-05-16T14:21:31.398Z'
      numEdits: 0
      reactions: []
    id: 6463916b95e64061c97d1a86
    type: comment
  author: Archan
  content: Finally right.
  created_at: 2023-05-16 13:21:31+00:00
  edited: false
  hidden: false
  id: 6463916b95e64061c97d1a86
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: facebook/fastspeech2-en-ljspeech
repo_type: model
status: closed
target_branch: null
title: 'Error when running example ''Usage'' code '
