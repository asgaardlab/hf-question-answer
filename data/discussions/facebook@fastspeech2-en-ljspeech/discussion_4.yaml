!!python/object:huggingface_hub.community.DiscussionWithDetails
author: thelou1s
conflicting_files: null
created_at: 2022-07-21 00:49:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a5f8f20a6be127f964615dff2f3aac42.svg
      fullname: thelou1s
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: thelou1s
      type: user
    createdAt: '2022-07-21T01:49:45.000Z'
    data:
      edited: false
      editors:
      - thelou1s
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a5f8f20a6be127f964615dff2f3aac42.svg
          fullname: thelou1s
          isHf: false
          isPro: false
          name: thelou1s
          type: user
        html: '<p>Traceback (most recent call last):<br>  File "tts.py", line 21,
          in <br>    wav, rate = TTSHubInterface.get_prediction(task, model, generator,
          sample)<br>  File "/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/models/text_to_speech/hub_interface.py",
          line 132, in get_prediction<br>    prediction = generator.generate(model,
          sample)<br>  File "/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/torch/autograd/grad_mode.py",
          line 28, in decorate_context<br>    return func(*args, **kwargs)<br>  File
          "/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/speech_generator.py",
          line 132, in generate<br>    model.eval()<br>AttributeError: ''list'' object
          has no attribute ''eval''</p>

          '
        raw: "Traceback (most recent call last):\r\n  File \"tts.py\", line 21, in\
          \ <module>\r\n    wav, rate = TTSHubInterface.get_prediction(task, model,\
          \ generator, sample)\r\n  File \"/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/models/text_to_speech/hub_interface.py\"\
          , line 132, in get_prediction\r\n    prediction = generator.generate(model,\
          \ sample)\r\n  File \"/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/torch/autograd/grad_mode.py\"\
          , line 28, in decorate_context\r\n    return func(*args, **kwargs)\r\n \
          \ File \"/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/speech_generator.py\"\
          , line 132, in generate\r\n    model.eval()\r\nAttributeError: 'list' object\
          \ has no attribute 'eval'\r\n"
        updatedAt: '2022-07-21T01:49:45.316Z'
      numEdits: 0
      reactions: []
    id: 62d8b0b94de25ae5d530334d
    type: comment
  author: thelou1s
  content: "Traceback (most recent call last):\r\n  File \"tts.py\", line 21, in <module>\r\
    \n    wav, rate = TTSHubInterface.get_prediction(task, model, generator, sample)\r\
    \n  File \"/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/models/text_to_speech/hub_interface.py\"\
    , line 132, in get_prediction\r\n    prediction = generator.generate(model, sample)\r\
    \n  File \"/Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/torch/autograd/grad_mode.py\"\
    , line 28, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File \"\
    /Users/luis/miniconda3/envs/python36/lib/python3.6/site-packages/fairseq/speech_generator.py\"\
    , line 132, in generate\r\n    model.eval()\r\nAttributeError: 'list' object has\
    \ no attribute 'eval'\r\n"
  created_at: 2022-07-21 00:49:45+00:00
  edited: false
  hidden: false
  id: 62d8b0b94de25ae5d530334d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d2ccb0a9db7c02bd84a3a3ab36ed31d2.svg
      fullname: Timothy Mak
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tshmak
      type: user
    createdAt: '2022-07-21T07:47:36.000Z'
    data:
      edited: false
      editors:
      - tshmak
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d2ccb0a9db7c02bd84a3a3ab36ed31d2.svg
          fullname: Timothy Mak
          isHf: false
          isPro: false
          name: tshmak
          type: user
        html: '<p><code>type(model)</code> should return a FastSpeech2 model. It seems
          <code>model</code> is a list in your case.</p>

          '
        raw: '`type(model)` should return a FastSpeech2 model. It seems `model` is
          a list in your case.'
        updatedAt: '2022-07-21T07:47:36.335Z'
      numEdits: 0
      reactions: []
    id: 62d9049835f5460de4a665b2
    type: comment
  author: tshmak
  content: '`type(model)` should return a FastSpeech2 model. It seems `model` is a
    list in your case.'
  created_at: 2022-07-21 06:47:36+00:00
  edited: false
  hidden: false
  id: 62d9049835f5460de4a665b2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a5f8f20a6be127f964615dff2f3aac42.svg
      fullname: thelou1s
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: thelou1s
      type: user
    createdAt: '2022-07-21T10:31:40.000Z'
    data:
      edited: false
      editors:
      - thelou1s
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a5f8f20a6be127f964615dff2f3aac42.svg
          fullname: thelou1s
          isHf: false
          isPro: false
          name: thelou1s
          type: user
        html: '<p>Thank for quick reply, It''s because I changed some code. otherwise
          logs showed this error, maybe I should fix it first:</p>

          <hr>

          <p>TypeError                                 Traceback (most recent call
          last)<br> in ()<br>     11 model = models[0]<br>     12 TTSHubInterface.update_cfg_with_data_cfg(cfg,
          task.data_cfg)<br>---&gt; 13 generator = task.build_generator(model, cfg)<br>     14<br>     15
          text = "Hello, this is a test run."</p>

          <p>/usr/local/lib/python3.7/dist-packages/fairseq/tasks/text_to_speech.py
          in build_generator(self, models, cfg, vocoder, **unused)<br>    149         if
          vocoder is None:<br>    150             vocoder = self.build_default_vocoder()<br>--&gt;
          151         model = models[0]<br>    152         if getattr(model, "NON_AUTOREGRESSIVE",
          False):<br>    153             return NonAutoregressiveSpeechGenerator(model,
          vocoder, self.data_cfg)</p>

          <p>TypeError: ''FastSpeech2Model'' object is not subscriptable</p>

          '
        raw: "Thank for quick reply, It's because I changed some code. otherwise logs\
          \ showed this error, maybe I should fix it first:\n\n---------------------------------------------------------------------------\n\
          TypeError                                 Traceback (most recent call last)\n\
          <ipython-input-11-434eaafb7b64> in <module>()\n     11 model = models[0]\n\
          \     12 TTSHubInterface.update_cfg_with_data_cfg(cfg, task.data_cfg)\n\
          ---> 13 generator = task.build_generator(model, cfg)\n     14 \n     15\
          \ text = \"Hello, this is a test run.\"\n\n/usr/local/lib/python3.7/dist-packages/fairseq/tasks/text_to_speech.py\
          \ in build_generator(self, models, cfg, vocoder, **unused)\n    149    \
          \     if vocoder is None:\n    150             vocoder = self.build_default_vocoder()\n\
          --> 151         model = models[0]\n    152         if getattr(model, \"\
          NON_AUTOREGRESSIVE\", False):\n    153             return NonAutoregressiveSpeechGenerator(model,\
          \ vocoder, self.data_cfg)\n\nTypeError: 'FastSpeech2Model' object is not\
          \ subscriptable"
        updatedAt: '2022-07-21T10:31:40.933Z'
      numEdits: 0
      reactions: []
    id: 62d92b0c28f9c86a4030d348
    type: comment
  author: thelou1s
  content: "Thank for quick reply, It's because I changed some code. otherwise logs\
    \ showed this error, maybe I should fix it first:\n\n---------------------------------------------------------------------------\n\
    TypeError                                 Traceback (most recent call last)\n\
    <ipython-input-11-434eaafb7b64> in <module>()\n     11 model = models[0]\n   \
    \  12 TTSHubInterface.update_cfg_with_data_cfg(cfg, task.data_cfg)\n---> 13 generator\
    \ = task.build_generator(model, cfg)\n     14 \n     15 text = \"Hello, this is\
    \ a test run.\"\n\n/usr/local/lib/python3.7/dist-packages/fairseq/tasks/text_to_speech.py\
    \ in build_generator(self, models, cfg, vocoder, **unused)\n    149         if\
    \ vocoder is None:\n    150             vocoder = self.build_default_vocoder()\n\
    --> 151         model = models[0]\n    152         if getattr(model, \"NON_AUTOREGRESSIVE\"\
    , False):\n    153             return NonAutoregressiveSpeechGenerator(model,\
    \ vocoder, self.data_cfg)\n\nTypeError: 'FastSpeech2Model' object is not subscriptable"
  created_at: 2022-07-21 09:31:40+00:00
  edited: false
  hidden: false
  id: 62d92b0c28f9c86a4030d348
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d2ccb0a9db7c02bd84a3a3ab36ed31d2.svg
      fullname: Timothy Mak
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tshmak
      type: user
    createdAt: '2022-07-22T06:17:16.000Z'
    data:
      edited: false
      editors:
      - tshmak
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d2ccb0a9db7c02bd84a3a3ab36ed31d2.svg
          fullname: Timothy Mak
          isHf: false
          isPro: false
          name: tshmak
          type: user
        html: '<p>It''s not clear where the error comes from. Please paste all the
          commands you entered as well as the error message and use <a rel="nofollow"
          href="https://www.markdownguide.org/cheat-sheet/">markdown syntax</a> especially
          that for <a rel="nofollow" href="https://www.markdownguide.org/extended-syntax/#fenced-code-blocks">code
          blocks</a>. </p>

          <p>In my experience, I had to change this line:</p>

          <pre><code>generator = task.build_generator(model, cfg)

          </code></pre>

          <p>to</p>

          <pre><code>generator = task.build_generator(models, cfg)

          </code></pre>

          <p>as well as add the line: </p>

          <pre><code>sample[''net_input''][''src_tokens''] = sample[''net_input''][''src_tokens''].to(torch.int64)

          </code></pre>

          <p>after</p>

          <pre><code>sample = TTSHubInterface.get_model_input(task, text)

          </code></pre>

          <p>to get the example to work.</p>

          '
        raw: "It's not clear where the error comes from. Please paste all the commands\
          \ you entered as well as the error message and use [markdown syntax](https://www.markdownguide.org/cheat-sheet/)\
          \ especially that for [code blocks](https://www.markdownguide.org/extended-syntax/#fenced-code-blocks).\
          \ \n\nIn my experience, I had to change this line:\n``` \ngenerator = task.build_generator(model,\
          \ cfg)\n``` \nto\n```\ngenerator = task.build_generator(models, cfg)\n```\
          \ \nas well as add the line: \n```\nsample['net_input']['src_tokens'] =\
          \ sample['net_input']['src_tokens'].to(torch.int64)\n```\nafter\n```\nsample\
          \ = TTSHubInterface.get_model_input(task, text)\n```\nto get the example\
          \ to work."
        updatedAt: '2022-07-22T06:17:16.953Z'
      numEdits: 0
      reactions: []
    id: 62da40ec5575019463c98c0a
    type: comment
  author: tshmak
  content: "It's not clear where the error comes from. Please paste all the commands\
    \ you entered as well as the error message and use [markdown syntax](https://www.markdownguide.org/cheat-sheet/)\
    \ especially that for [code blocks](https://www.markdownguide.org/extended-syntax/#fenced-code-blocks).\
    \ \n\nIn my experience, I had to change this line:\n``` \ngenerator = task.build_generator(model,\
    \ cfg)\n``` \nto\n```\ngenerator = task.build_generator(models, cfg)\n``` \nas\
    \ well as add the line: \n```\nsample['net_input']['src_tokens'] = sample['net_input']['src_tokens'].to(torch.int64)\n\
    ```\nafter\n```\nsample = TTSHubInterface.get_model_input(task, text)\n```\nto\
    \ get the example to work."
  created_at: 2022-07-22 05:17:16+00:00
  edited: false
  hidden: false
  id: 62da40ec5575019463c98c0a
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: facebook/fastspeech2-en-ljspeech
repo_type: model
status: open
target_branch: null
title: 'AttributeError: ''list'' object has no attribute ''eval'''
