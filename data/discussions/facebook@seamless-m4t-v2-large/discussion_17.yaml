!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ZoneTwelve
conflicting_files: null
created_at: 2023-12-08 02:59:40+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/604ff818b0eba2af4509f8f162007129.svg
      fullname: ZoneTwelve
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ZoneTwelve
      type: user
    createdAt: '2023-12-08T02:59:40.000Z'
    data:
      edited: true
      editors:
      - ZoneTwelve
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4700203537940979
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/604ff818b0eba2af4509f8f162007129.svg
          fullname: ZoneTwelve
          isHf: false
          isPro: false
          name: ZoneTwelve
          type: user
        html: "<p>I'm not sure what caused this issue, but the error message just\
          \ says that it doesn't support 'cmn_Hant'.<br>To my understanding, the model\
          \ card indicates that it supports Traditional Chinese.</p>\n<details>\n\
          <img src=\"https://cdn-uploads.huggingface.co/production/uploads/63ea0de943d976de6e4e54fb/8NRgGvOZy1jIYSqjK7f09.png\"\
          >\n</details>\n\n<p>The source code:</p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-comment\">#!/usr/bin/env python</span>\n<span class=\"\
          hljs-keyword\">from</span> transformers <span class=\"hljs-keyword\">import</span>\
          \ AutoProcessor, SeamlessM4Tv2Model\n<span class=\"hljs-keyword\">import</span>\
          \ torchaudio\n\nprocessor = AutoProcessor.from_pretrained(<span class=\"\
          hljs-string\">\"facebook/seamless-m4t-v2-large\"</span>)\nmodel = SeamlessM4Tv2Model.from_pretrained(<span\
          \ class=\"hljs-string\">\"facebook/seamless-m4t-v2-large\"</span>)\n\n<span\
          \ class=\"hljs-comment\"># from text</span>\ntext_inputs = processor(text\
          \ = <span class=\"hljs-string\">\"Hello, my dog is cute\"</span>, src_lang=<span\
          \ class=\"hljs-string\">\"eng\"</span>, return_tensors=<span class=\"hljs-string\"\
          >\"pt\"</span>)\naudio_array_from_text = model.generate(**text_inputs, tgt_lang=<span\
          \ class=\"hljs-string\">\"cmn_Hant\"</span>)[<span class=\"hljs-number\"\
          >0</span>].cpu().numpy().squeeze()\n\n<span class=\"hljs-comment\"># from\
          \ audio</span>\naudio, orig_freq =  torchaudio.load(<span class=\"hljs-string\"\
          >\"https://www2.cs.uic.edu/~i101/SoundFiles/preamble10.wav\"</span>)\naudio\
          \ =  torchaudio.functional.resample(audio, orig_freq=orig_freq, new_freq=<span\
          \ class=\"hljs-number\">16_000</span>) <span class=\"hljs-comment\"># must\
          \ be a 16 kHz waveform array</span>\naudio_inputs = processor(audios=audio,\
          \ return_tensors=<span class=\"hljs-string\">\"pt\"</span>)\naudio_array_from_audio\
          \ = model.generate(**audio_inputs, tgt_lang=<span class=\"hljs-string\"\
          >\"rus\"</span>)[<span class=\"hljs-number\">0</span>].cpu().numpy().squeeze()\n\
          </code></pre>\n<pre><code class=\"language-bash\">/home/$(<span class=\"\
          hljs-built_in\">whoami</span>)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/deepspeed.py:23:\
          \ FutureWarning: transformers.deepspeed module is deprecated and will be\
          \ removed <span class=\"hljs-keyword\">in</span> a future version. Please\
          \ import deepspeed modules directly from transformers.integrations\n  warnings.warn(\n\
          Special tokens have been added <span class=\"hljs-keyword\">in</span> the\
          \ vocabulary, make sure the associated word embeddings are fine-tuned or\
          \ trained.\nSpecial tokens have been added <span class=\"hljs-keyword\"\
          >in</span> the vocabulary, make sure the associated word embeddings are\
          \ fine-tuned or trained.\nLoading checkpoint shards: 100%|\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588| 2/2 [00:28&lt;00:00, 14.25s/it]\nTraceback (most\
          \ recent call last):\n  File <span class=\"hljs-string\">\"/work/<span class=\"\
          hljs-subst\">$(whoami)</span>/code/seamless-m4t-v2-large/main.py\"</span>,\
          \ line 10, <span class=\"hljs-keyword\">in</span> &lt;module&gt;\n    audio_array_from_text\
          \ = model.generate(**text_inputs, tgt_lang=<span class=\"hljs-string\">\"\
          cmn_Hant\"</span>)[0].cpu().numpy().squeeze()\n  File <span class=\"hljs-string\"\
          >\"/home/<span class=\"hljs-subst\">$(whoami)</span>/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/torch/utils/_contextlib.py\"\
          </span>, line 115, <span class=\"hljs-keyword\">in</span> decorate_context\n\
          \    <span class=\"hljs-built_in\">return</span> func(*args, **kwargs)\n\
          \  File <span class=\"hljs-string\">\"/home/<span class=\"hljs-subst\">$(whoami)</span>/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/models/seamless_m4t_v2/modeling_seamless_m4t_v2.py\"\
          </span>, line 4607, <span class=\"hljs-keyword\">in</span> generate\n  \
          \  raise ValueError(\nValueError: `tgt_lang=cmn_Hant` is not supported by\
          \ this model.\n                    Please specify a `tgt_lang` <span class=\"\
          hljs-keyword\">in</span> arb,ben,<span class=\"hljs-built_in\">cat</span>,ces,cmn,cym,dan,deu,eng,est,fin,fra,hin,ind,ita,jpn,kan,kor,mlt,nld,pes,pol,por,ron,rus,slk,spa,swe,swh,tam,tel,tgl,tha,tur,ukr,urd,uzn,vie.\
          \ Note that SeamlessM4Tv2 supports\n                    more languages <span\
          \ class=\"hljs-keyword\">for</span> text translation than <span class=\"\
          hljs-keyword\">for</span> speech synthesis.\n</code></pre>\n<p>There my\
          \ installed library:</p>\n<pre><code class=\"language-bash\">certifi==2023.11.17\n\
          charset-normalizer==3.3.2\nfilelock==3.13.1\nfsspec==2023.12.1\nhuggingface-hub==0.19.4\n\
          idna==3.6\nJinja2==3.1.2\nMarkupSafe==2.1.3\nmpmath==1.3.0\nnetworkx==3.2.1\n\
          numpy==1.26.2\nnvidia-cublas-cu12==12.1.3.1\nnvidia-cuda-cupti-cu12==12.1.105\n\
          nvidia-cuda-nvrtc-cu12==12.1.105\nnvidia-cuda-runtime-cu12==12.1.105\nnvidia-cudnn-cu12==8.9.2.26\n\
          nvidia-cufft-cu12==11.0.2.54\nnvidia-curand-cu12==10.3.2.106\nnvidia-cusolver-cu12==11.4.5.107\n\
          nvidia-cusparse-cu12==12.1.0.106\nnvidia-nccl-cu12==2.18.1\nnvidia-nvjitlink-cu12==12.3.101\n\
          nvidia-nvtx-cu12==12.1.105\npackaging==23.2\nPillow==10.1.0\nprotobuf==4.25.1\n\
          PyYAML==6.0.1\nregex==2023.10.3\nrequests==2.31.0\nsafetensors==0.4.1\n\
          sentencepiece==0.1.99\nsympy==1.12\ntokenizers==0.15.0\ntorch==2.1.1\ntorchaudio==2.1.1\n\
          torchvision==0.16.1\ntqdm==4.66.1\ntransformers @ git+https://github.com/huggingface/transformers.git@0ea42ef0f9f71deba7775ead33afa0e493823d60\n\
          triton==2.1.0\ntyping_extensions==4.8.0\nurllib3==2.1.0\n</code></pre>\n"
        raw: "\nI'm not sure what caused this issue, but the error message just says\
          \ that it doesn't support 'cmn_Hant'.\nTo my understanding, the model card\
          \ indicates that it supports Traditional Chinese.\n<details>\n<img src=\"\
          https://cdn-uploads.huggingface.co/production/uploads/63ea0de943d976de6e4e54fb/8NRgGvOZy1jIYSqjK7f09.png\"\
          >\n</details>\n\nThe source code:\n```python\n#!/usr/bin/env python\nfrom\
          \ transformers import AutoProcessor, SeamlessM4Tv2Model\nimport torchaudio\n\
          \nprocessor = AutoProcessor.from_pretrained(\"facebook/seamless-m4t-v2-large\"\
          )\nmodel = SeamlessM4Tv2Model.from_pretrained(\"facebook/seamless-m4t-v2-large\"\
          )\n\n# from text\ntext_inputs = processor(text = \"Hello, my dog is cute\"\
          , src_lang=\"eng\", return_tensors=\"pt\")\naudio_array_from_text = model.generate(**text_inputs,\
          \ tgt_lang=\"cmn_Hant\")[0].cpu().numpy().squeeze()\n\n# from audio\naudio,\
          \ orig_freq =  torchaudio.load(\"https://www2.cs.uic.edu/~i101/SoundFiles/preamble10.wav\"\
          )\naudio =  torchaudio.functional.resample(audio, orig_freq=orig_freq, new_freq=16_000)\
          \ # must be a 16 kHz waveform array\naudio_inputs = processor(audios=audio,\
          \ return_tensors=\"pt\")\naudio_array_from_audio = model.generate(**audio_inputs,\
          \ tgt_lang=\"rus\")[0].cpu().numpy().squeeze()\n```\n\n```bash\n/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/deepspeed.py:23:\
          \ FutureWarning: transformers.deepspeed module is deprecated and will be\
          \ removed in a future version. Please import deepspeed modules directly\
          \ from transformers.integrations\n  warnings.warn(\nSpecial tokens have\
          \ been added in the vocabulary, make sure the associated word embeddings\
          \ are fine-tuned or trained.\nSpecial tokens have been added in the vocabulary,\
          \ make sure the associated word embeddings are fine-tuned or trained.\n\
          Loading checkpoint shards: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          | 2/2 [00:28<00:00, 14.25s/it]\nTraceback (most recent call last):\n  File\
          \ \"/work/$(whoami)/code/seamless-m4t-v2-large/main.py\", line 10, in <module>\n\
          \    audio_array_from_text = model.generate(**text_inputs, tgt_lang=\"cmn_Hant\"\
          )[0].cpu().numpy().squeeze()\n  File \"/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\n    return func(*args, **kwargs)\n  File\
          \ \"/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/models/seamless_m4t_v2/modeling_seamless_m4t_v2.py\"\
          , line 4607, in generate\n    raise ValueError(\nValueError: `tgt_lang=cmn_Hant`\
          \ is not supported by this model.\n                    Please specify a\
          \ `tgt_lang` in arb,ben,cat,ces,cmn,cym,dan,deu,eng,est,fin,fra,hin,ind,ita,jpn,kan,kor,mlt,nld,pes,pol,por,ron,rus,slk,spa,swe,swh,tam,tel,tgl,tha,tur,ukr,urd,uzn,vie.\
          \ Note that SeamlessM4Tv2 supports\n                    more languages for\
          \ text translation than for speech synthesis.\n```\n\nThere my installed\
          \ library:\n```bash\ncertifi==2023.11.17\ncharset-normalizer==3.3.2\nfilelock==3.13.1\n\
          fsspec==2023.12.1\nhuggingface-hub==0.19.4\nidna==3.6\nJinja2==3.1.2\nMarkupSafe==2.1.3\n\
          mpmath==1.3.0\nnetworkx==3.2.1\nnumpy==1.26.2\nnvidia-cublas-cu12==12.1.3.1\n\
          nvidia-cuda-cupti-cu12==12.1.105\nnvidia-cuda-nvrtc-cu12==12.1.105\nnvidia-cuda-runtime-cu12==12.1.105\n\
          nvidia-cudnn-cu12==8.9.2.26\nnvidia-cufft-cu12==11.0.2.54\nnvidia-curand-cu12==10.3.2.106\n\
          nvidia-cusolver-cu12==11.4.5.107\nnvidia-cusparse-cu12==12.1.0.106\nnvidia-nccl-cu12==2.18.1\n\
          nvidia-nvjitlink-cu12==12.3.101\nnvidia-nvtx-cu12==12.1.105\npackaging==23.2\n\
          Pillow==10.1.0\nprotobuf==4.25.1\nPyYAML==6.0.1\nregex==2023.10.3\nrequests==2.31.0\n\
          safetensors==0.4.1\nsentencepiece==0.1.99\nsympy==1.12\ntokenizers==0.15.0\n\
          torch==2.1.1\ntorchaudio==2.1.1\ntorchvision==0.16.1\ntqdm==4.66.1\ntransformers\
          \ @ git+https://github.com/huggingface/transformers.git@0ea42ef0f9f71deba7775ead33afa0e493823d60\n\
          triton==2.1.0\ntyping_extensions==4.8.0\nurllib3==2.1.0\n```"
        updatedAt: '2023-12-08T06:50:14.204Z'
      numEdits: 6
      reactions: []
    id: 6572869c569d7ce0bca079c7
    type: comment
  author: ZoneTwelve
  content: "\nI'm not sure what caused this issue, but the error message just says\
    \ that it doesn't support 'cmn_Hant'.\nTo my understanding, the model card indicates\
    \ that it supports Traditional Chinese.\n<details>\n<img src=\"https://cdn-uploads.huggingface.co/production/uploads/63ea0de943d976de6e4e54fb/8NRgGvOZy1jIYSqjK7f09.png\"\
    >\n</details>\n\nThe source code:\n```python\n#!/usr/bin/env python\nfrom transformers\
    \ import AutoProcessor, SeamlessM4Tv2Model\nimport torchaudio\n\nprocessor = AutoProcessor.from_pretrained(\"\
    facebook/seamless-m4t-v2-large\")\nmodel = SeamlessM4Tv2Model.from_pretrained(\"\
    facebook/seamless-m4t-v2-large\")\n\n# from text\ntext_inputs = processor(text\
    \ = \"Hello, my dog is cute\", src_lang=\"eng\", return_tensors=\"pt\")\naudio_array_from_text\
    \ = model.generate(**text_inputs, tgt_lang=\"cmn_Hant\")[0].cpu().numpy().squeeze()\n\
    \n# from audio\naudio, orig_freq =  torchaudio.load(\"https://www2.cs.uic.edu/~i101/SoundFiles/preamble10.wav\"\
    )\naudio =  torchaudio.functional.resample(audio, orig_freq=orig_freq, new_freq=16_000)\
    \ # must be a 16 kHz waveform array\naudio_inputs = processor(audios=audio, return_tensors=\"\
    pt\")\naudio_array_from_audio = model.generate(**audio_inputs, tgt_lang=\"rus\"\
    )[0].cpu().numpy().squeeze()\n```\n\n```bash\n/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/deepspeed.py:23:\
    \ FutureWarning: transformers.deepspeed module is deprecated and will be removed\
    \ in a future version. Please import deepspeed modules directly from transformers.integrations\n\
    \  warnings.warn(\nSpecial tokens have been added in the vocabulary, make sure\
    \ the associated word embeddings are fine-tuned or trained.\nSpecial tokens have\
    \ been added in the vocabulary, make sure the associated word embeddings are fine-tuned\
    \ or trained.\nLoading checkpoint shards: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588| 2/2 [00:28<00:00, 14.25s/it]\nTraceback (most recent\
    \ call last):\n  File \"/work/$(whoami)/code/seamless-m4t-v2-large/main.py\",\
    \ line 10, in <module>\n    audio_array_from_text = model.generate(**text_inputs,\
    \ tgt_lang=\"cmn_Hant\")[0].cpu().numpy().squeeze()\n  File \"/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\n    return func(*args, **kwargs)\n  File \"/home/$(whoami)/miniforge3/envs/seamless-m4t-v2/lib/python3.10/site-packages/transformers/models/seamless_m4t_v2/modeling_seamless_m4t_v2.py\"\
    , line 4607, in generate\n    raise ValueError(\nValueError: `tgt_lang=cmn_Hant`\
    \ is not supported by this model.\n                    Please specify a `tgt_lang`\
    \ in arb,ben,cat,ces,cmn,cym,dan,deu,eng,est,fin,fra,hin,ind,ita,jpn,kan,kor,mlt,nld,pes,pol,por,ron,rus,slk,spa,swe,swh,tam,tel,tgl,tha,tur,ukr,urd,uzn,vie.\
    \ Note that SeamlessM4Tv2 supports\n                    more languages for text\
    \ translation than for speech synthesis.\n```\n\nThere my installed library:\n\
    ```bash\ncertifi==2023.11.17\ncharset-normalizer==3.3.2\nfilelock==3.13.1\nfsspec==2023.12.1\n\
    huggingface-hub==0.19.4\nidna==3.6\nJinja2==3.1.2\nMarkupSafe==2.1.3\nmpmath==1.3.0\n\
    networkx==3.2.1\nnumpy==1.26.2\nnvidia-cublas-cu12==12.1.3.1\nnvidia-cuda-cupti-cu12==12.1.105\n\
    nvidia-cuda-nvrtc-cu12==12.1.105\nnvidia-cuda-runtime-cu12==12.1.105\nnvidia-cudnn-cu12==8.9.2.26\n\
    nvidia-cufft-cu12==11.0.2.54\nnvidia-curand-cu12==10.3.2.106\nnvidia-cusolver-cu12==11.4.5.107\n\
    nvidia-cusparse-cu12==12.1.0.106\nnvidia-nccl-cu12==2.18.1\nnvidia-nvjitlink-cu12==12.3.101\n\
    nvidia-nvtx-cu12==12.1.105\npackaging==23.2\nPillow==10.1.0\nprotobuf==4.25.1\n\
    PyYAML==6.0.1\nregex==2023.10.3\nrequests==2.31.0\nsafetensors==0.4.1\nsentencepiece==0.1.99\n\
    sympy==1.12\ntokenizers==0.15.0\ntorch==2.1.1\ntorchaudio==2.1.1\ntorchvision==0.16.1\n\
    tqdm==4.66.1\ntransformers @ git+https://github.com/huggingface/transformers.git@0ea42ef0f9f71deba7775ead33afa0e493823d60\n\
    triton==2.1.0\ntyping_extensions==4.8.0\nurllib3==2.1.0\n```"
  created_at: 2023-12-08 02:59:40+00:00
  edited: true
  hidden: false
  id: 6572869c569d7ce0bca079c7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/604ff818b0eba2af4509f8f162007129.svg
      fullname: ZoneTwelve
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ZoneTwelve
      type: user
    createdAt: '2023-12-08T03:00:37.000Z'
    data:
      edited: true
      editors:
      - ZoneTwelve
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9568437933921814
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/604ff818b0eba2af4509f8f162007129.svg
          fullname: ZoneTwelve
          isHf: false
          isPro: false
          name: ZoneTwelve
          type: user
        html: '<p>If any important information has been missed, I apologize for it.<br>Please
          feel free to send me a direct message (DM) or comment on this discussion
          thread.</p>

          '
        raw: 'If any important information has been missed, I apologize for it.

          Please feel free to send me a direct message (DM) or comment on this discussion
          thread.'
        updatedAt: '2023-12-08T03:01:37.922Z'
      numEdits: 1
      reactions: []
    id: 657286d50eba7beaec0b5603
    type: comment
  author: ZoneTwelve
  content: 'If any important information has been missed, I apologize for it.

    Please feel free to send me a direct message (DM) or comment on this discussion
    thread.'
  created_at: 2023-12-08 03:00:37+00:00
  edited: true
  hidden: false
  id: 657286d50eba7beaec0b5603
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
      fullname: Yih-Dar SHIEH
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ydshieh
      type: user
    createdAt: '2023-12-08T16:04:42.000Z'
    data:
      edited: false
      editors:
      - ydshieh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3839241862297058
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
          fullname: Yih-Dar SHIEH
          isHf: true
          isPro: false
          name: ydshieh
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;reach-vb&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/reach-vb\">@<span class=\"\
          underline\">reach-vb</span></a></span>\n\n\t</span></span>  <span data-props=\"\
          {&quot;user&quot;:&quot;ylacombe&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/ylacombe\">@<span class=\"underline\">ylacombe</span></a></span>\n\
          \n\t</span></span> The code below seems to require a lange code to be in\
          \ all <code>[\"text_decoder_lang_to_code_id\", \"t2u_lang_code_to_id\",\
          \ \"vocoder_lang_code_to_id\"]</code>. Is this expected?<br>Or we just require\
          \ a  lange code to be in <em>one of the</em> <code>[\"text_decoder_lang_to_code_id\"\
          , \"t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"]</code></p>\n<pre><code>\
          \            # also accept __xxx__\n            tgt_lang = tgt_lang.replace(\"\
          __\", \"\")\n            for key in [\"text_decoder_lang_to_code_id\", \"\
          t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"]:\n                lang_code_to_id\
          \ = getattr(self.generation_config, key, None)\n                if lang_code_to_id\
          \ is None:\n                    raise ValueError(\n                    \
          \    f\"\"\"This model generation config doesn't have a `{key}` key which\
          \ maps the target language\n                        to the right token id.\
          \ Make sure to load the right generation config.\"\"\"\n               \
          \     )\n                elif tgt_lang not in lang_code_to_id:\n       \
          \             raise ValueError(\n                        f\"\"\"`tgt_lang={tgt_lang}`\
          \ is not supported by this model.\n                    Please specify a\
          \ `tgt_lang` in {','.join(lang_code_to_id.keys())}. Note that SeamlessM4Tv2\
          \ supports\n                    more languages for text translation than\
          \ for speech synthesis.\"\"\"\n                    )\n</code></pre>\n"
        raw: "@reach-vb  @ylacombe The code below seems to require a lange code to\
          \ be in all `[\"text_decoder_lang_to_code_id\", \"t2u_lang_code_to_id\"\
          , \"vocoder_lang_code_to_id\"]`. Is this expected? \nOr we just require\
          \ a  lange code to be in *one of the* `[\"text_decoder_lang_to_code_id\"\
          , \"t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"]`\n\n```\n      \
          \      # also accept __xxx__\n            tgt_lang = tgt_lang.replace(\"\
          __\", \"\")\n            for key in [\"text_decoder_lang_to_code_id\", \"\
          t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"]:\n                lang_code_to_id\
          \ = getattr(self.generation_config, key, None)\n                if lang_code_to_id\
          \ is None:\n                    raise ValueError(\n                    \
          \    f\"\"\"This model generation config doesn't have a `{key}` key which\
          \ maps the target language\n                        to the right token id.\
          \ Make sure to load the right generation config.\"\"\"\n               \
          \     )\n                elif tgt_lang not in lang_code_to_id:\n       \
          \             raise ValueError(\n                        f\"\"\"`tgt_lang={tgt_lang}`\
          \ is not supported by this model.\n                    Please specify a\
          \ `tgt_lang` in {','.join(lang_code_to_id.keys())}. Note that SeamlessM4Tv2\
          \ supports\n                    more languages for text translation than\
          \ for speech synthesis.\"\"\"\n                    )\n````\n"
        updatedAt: '2023-12-08T16:04:42.203Z'
      numEdits: 0
      reactions: []
    id: 65733e9ac13a2c7478ef13eb
    type: comment
  author: ydshieh
  content: "@reach-vb  @ylacombe The code below seems to require a lange code to be\
    \ in all `[\"text_decoder_lang_to_code_id\", \"t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"\
    ]`. Is this expected? \nOr we just require a  lange code to be in *one of the*\
    \ `[\"text_decoder_lang_to_code_id\", \"t2u_lang_code_to_id\", \"vocoder_lang_code_to_id\"\
    ]`\n\n```\n            # also accept __xxx__\n            tgt_lang = tgt_lang.replace(\"\
    __\", \"\")\n            for key in [\"text_decoder_lang_to_code_id\", \"t2u_lang_code_to_id\"\
    , \"vocoder_lang_code_to_id\"]:\n                lang_code_to_id = getattr(self.generation_config,\
    \ key, None)\n                if lang_code_to_id is None:\n                  \
    \  raise ValueError(\n                        f\"\"\"This model generation config\
    \ doesn't have a `{key}` key which maps the target language\n                \
    \        to the right token id. Make sure to load the right generation config.\"\
    \"\"\n                    )\n                elif tgt_lang not in lang_code_to_id:\n\
    \                    raise ValueError(\n                        f\"\"\"`tgt_lang={tgt_lang}`\
    \ is not supported by this model.\n                    Please specify a `tgt_lang`\
    \ in {','.join(lang_code_to_id.keys())}. Note that SeamlessM4Tv2 supports\n  \
    \                  more languages for text translation than for speech synthesis.\"\
    \"\"\n                    )\n````\n"
  created_at: 2023-12-08 16:04:42+00:00
  edited: false
  hidden: false
  id: 65733e9ac13a2c7478ef13eb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
      fullname: Yoach Lacombe
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ylacombe
      type: user
    createdAt: '2023-12-08T16:18:28.000Z'
    data:
      edited: false
      editors:
      - ylacombe
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8138790726661682
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
          fullname: Yoach Lacombe
          isHf: true
          isPro: false
          name: ylacombe
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;ZoneTwelve&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ZoneTwelve\"\
          >@<span class=\"underline\">ZoneTwelve</span></a></span>\n\n\t</span></span>,\
          \ thanks for your message here!<br>I believe that contrarily to what the\
          \ model cards indicate,  traditional Chinese language (cmn_Hant) is not\
          \ supported for speech generation as you can observe <a rel=\"nofollow\"\
          \ href=\"https://github.com/facebookresearch/seamless_communication/blob/a21fa965eab62e63fd5732257cea65ab83ee06f0/src/seamless_communication/cards/vocoder_v2.yaml#L18\"\
          >here</a> in the original code!</p>\n<p>If you want to do text translation\
          \ (i.e without generating speech) it should work though! </p>\n"
        raw: "Hey @ZoneTwelve, thanks for your message here!\nI believe that contrarily\
          \ to what the model cards indicate,  traditional Chinese language (cmn_Hant)\
          \ is not supported for speech generation as you can observe [here](https://github.com/facebookresearch/seamless_communication/blob/a21fa965eab62e63fd5732257cea65ab83ee06f0/src/seamless_communication/cards/vocoder_v2.yaml#L18)\
          \ in the original code!\n\nIf you want to do text translation (i.e without\
          \ generating speech) it should work though! \n\n"
        updatedAt: '2023-12-08T16:18:28.346Z'
      numEdits: 0
      reactions: []
    id: 657341d43e0cb21bc7b13bc2
    type: comment
  author: ylacombe
  content: "Hey @ZoneTwelve, thanks for your message here!\nI believe that contrarily\
    \ to what the model cards indicate,  traditional Chinese language (cmn_Hant) is\
    \ not supported for speech generation as you can observe [here](https://github.com/facebookresearch/seamless_communication/blob/a21fa965eab62e63fd5732257cea65ab83ee06f0/src/seamless_communication/cards/vocoder_v2.yaml#L18)\
    \ in the original code!\n\nIf you want to do text translation (i.e without generating\
    \ speech) it should work though! \n\n"
  created_at: 2023-12-08 16:18:28+00:00
  edited: false
  hidden: false
  id: 657341d43e0cb21bc7b13bc2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
      fullname: Yoach Lacombe
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ylacombe
      type: user
    createdAt: '2023-12-08T16:21:05.000Z'
    data:
      edited: false
      editors:
      - ylacombe
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.974730908870697
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
          fullname: Yoach Lacombe
          isHf: true
          isPro: false
          name: ylacombe
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ydshieh&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ydshieh\">@<span class=\"\
          underline\">ydshieh</span></a></span>\n\n\t</span></span>, indeed it has\
          \ to be in the 3 dictionary!</p>\n<p>However, it shouldn't be the case if\
          \ we want to only predict texts, thanks for pointing that out, I'll open\
          \ a PR to fix this!</p>\n"
        raw: '@ydshieh, indeed it has to be in the 3 dictionary!


          However, it shouldn''t be the case if we want to only predict texts, thanks
          for pointing that out, I''ll open a PR to fix this!'
        updatedAt: '2023-12-08T16:21:05.140Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - ydshieh
    id: 65734271839aa08899bf2079
    type: comment
  author: ylacombe
  content: '@ydshieh, indeed it has to be in the 3 dictionary!


    However, it shouldn''t be the case if we want to only predict texts, thanks for
    pointing that out, I''ll open a PR to fix this!'
  created_at: 2023-12-08 16:21:05+00:00
  edited: false
  hidden: false
  id: 65734271839aa08899bf2079
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
      fullname: Yoach Lacombe
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ylacombe
      type: user
    createdAt: '2023-12-17T12:35:37.000Z'
    data:
      edited: false
      editors:
      - ylacombe
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8691356778144836
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62611fcabbcbd1c34f1615f6/ehvQLkjaEaz0pYJwbB51L.jpeg?w=200&h=200&f=face
          fullname: Yoach Lacombe
          isHf: true
          isPro: false
          name: ylacombe
          type: user
        html: '<p>Fixed by <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/28019">https://github.com/huggingface/transformers/pull/28019</a></p>

          '
        raw: Fixed by https://github.com/huggingface/transformers/pull/28019
        updatedAt: '2023-12-17T12:35:37.583Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sanchit-gandhi
    id: 657eeb19efc0f84bcb920601
    type: comment
  author: ylacombe
  content: Fixed by https://github.com/huggingface/transformers/pull/28019
  created_at: 2023-12-17 12:35:37+00:00
  edited: false
  hidden: false
  id: 657eeb19efc0f84bcb920601
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d6e951cb8bb089a789f8ac34d13015a6.svg
      fullname: "\u8D75\u94EE"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Zhaoz1997
      type: user
    createdAt: '2024-01-15T09:12:55.000Z'
    data:
      edited: false
      editors:
      - Zhaoz1997
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9306824207305908
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d6e951cb8bb089a789f8ac34d13015a6.svg
          fullname: "\u8D75\u94EE"
          isHf: false
          isPro: false
          name: Zhaoz1997
          type: user
        html: "<p>Loading checkpoint shards:  50%|\u2588\u2588\u2588\u2588\u2588 \
          \    | 1/2 [07:14&lt;07:14, 434.07s/it]   Why is it running so slowly? All\
          \ the models required for this code have been downloaded locally. Have you\
          \ ever encountered such a problem</p>\n"
        raw: "Loading checkpoint shards:  50%|\u2588\u2588\u2588\u2588\u2588     |\
          \ 1/2 [07:14<07:14, 434.07s/it]   Why is it running so slowly? All the models\
          \ required for this code have been downloaded locally. Have you ever encountered\
          \ such a problem"
        updatedAt: '2024-01-15T09:12:55.273Z'
      numEdits: 0
      reactions: []
    id: 65a4f717f95d78ab76648a6a
    type: comment
  author: Zhaoz1997
  content: "Loading checkpoint shards:  50%|\u2588\u2588\u2588\u2588\u2588     | 1/2\
    \ [07:14<07:14, 434.07s/it]   Why is it running so slowly? All the models required\
    \ for this code have been downloaded locally. Have you ever encountered such a\
    \ problem"
  created_at: 2024-01-15 09:12:55+00:00
  edited: false
  hidden: false
  id: 65a4f717f95d78ab76648a6a
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 17
repo_id: facebook/seamless-m4t-v2-large
repo_type: model
status: open
target_branch: null
title: '[Help Wanted] facebook/seamless-m4t-v2-large does not support the traditional
  Chinese language (cmn_Hant).'
