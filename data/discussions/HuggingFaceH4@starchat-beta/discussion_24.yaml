!!python/object:huggingface_hub.community.DiscussionWithDetails
author: lmw41
conflicting_files: null
created_at: 2023-08-23 14:25:53+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7827169931a9641631b4d10c939106f1.svg
      fullname: David Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lmw41
      type: user
    createdAt: '2023-08-23T15:25:53.000Z'
    data:
      edited: true
      editors:
      - lmw41
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6723657846450806
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7827169931a9641631b4d10c939106f1.svg
          fullname: David Lee
          isHf: false
          isPro: false
          name: lmw41
          type: user
        html: '<p>I uploaded the code yesterday and it had not problem, but I had
          the error messages show up today without modifying the code.</p>

          <p>The error messages listed below:<br>TypeError: str expected, not NoneType<br>Traceback:<br>File
          "/home/user/.local/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py",
          line 552, in _run_script<br>    exec(code, module.<strong>dict</strong>)<br>File
          "/home/user/app/app.py", line 80, in <br>    res  =  starchat(<br>File "/home/user/app/app.py",
          line 40, in starchat<br>    os.environ["HUGGINGFACEHUB_API_TOKEN"] = HUGGINGFACEHUB_API_TOKEN<br>File
          "/usr/local/lib/python3.10/os.py", line 685, in <strong>setitem</strong><br>    value
          = self.encodevalue(value)<br>File "/usr/local/lib/python3.10/os.py", line
          757, in encode<br>    raise TypeError("str expected, not %s" % type(value).<strong>name</strong>)</p>

          <p>Originally, the old is like this below<br>from dotenv import load_dotenv<br>load_dotenv()<br>HUGGINGFACEHUB_API_TOKEN
          = os.getenv(''HUGGINGFACEHUB_API_TOKEN'')<br>os.environ["HUGGINGFACEHUB_API_TOKEN"]
          = HUGGINGFACEHUB_API_TOKEN<br>It will show the error message above.</p>

          <p>I found I can solve the problem by replacing the key directly.<br>os.environ["HUGGINGFACEHUB_API_TOKEN"]
          = "xxxxx"</p>

          <p>But, it is not save to reveal the key.</p>

          <p>Any help would be much appreciated.</p>

          '
        raw: "I uploaded the code yesterday and it had not problem, but I had the\
          \ error messages show up today without modifying the code.\n\nThe error\
          \ messages listed below:\nTypeError: str expected, not NoneType\nTraceback:\n\
          File \"/home/user/.local/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py\"\
          , line 552, in _run_script\n    exec(code, module.__dict__)\nFile \"/home/user/app/app.py\"\
          , line 80, in <module>\n    res  =  starchat(\nFile \"/home/user/app/app.py\"\
          , line 40, in starchat\n    os.environ[\"HUGGINGFACEHUB_API_TOKEN\"] = HUGGINGFACEHUB_API_TOKEN\n\
          File \"/usr/local/lib/python3.10/os.py\", line 685, in __setitem__\n   \
          \ value = self.encodevalue(value)\nFile \"/usr/local/lib/python3.10/os.py\"\
          , line 757, in encode\n    raise TypeError(\"str expected, not %s\" % type(value).__name__)\n\
          \nOriginally, the old is like this below\nfrom dotenv import load_dotenv\n\
          load_dotenv()\nHUGGINGFACEHUB_API_TOKEN = os.getenv('HUGGINGFACEHUB_API_TOKEN')\n\
          os.environ[\"HUGGINGFACEHUB_API_TOKEN\"] = HUGGINGFACEHUB_API_TOKEN\nIt\
          \ will show the error message above.\n\nI found I can solve the problem\
          \ by replacing the key directly.\nos.environ[\"HUGGINGFACEHUB_API_TOKEN\"\
          ] = \"xxxxx\"\n\nBut, it is not save to reveal the key.\n\nAny help would\
          \ be much appreciated."
        updatedAt: '2023-08-24T03:21:47.532Z'
      numEdits: 1
      reactions: []
    id: 64e625010df4c63f21be50b3
    type: comment
  author: lmw41
  content: "I uploaded the code yesterday and it had not problem, but I had the error\
    \ messages show up today without modifying the code.\n\nThe error messages listed\
    \ below:\nTypeError: str expected, not NoneType\nTraceback:\nFile \"/home/user/.local/lib/python3.10/site-packages/streamlit/runtime/scriptrunner/script_runner.py\"\
    , line 552, in _run_script\n    exec(code, module.__dict__)\nFile \"/home/user/app/app.py\"\
    , line 80, in <module>\n    res  =  starchat(\nFile \"/home/user/app/app.py\"\
    , line 40, in starchat\n    os.environ[\"HUGGINGFACEHUB_API_TOKEN\"] = HUGGINGFACEHUB_API_TOKEN\n\
    File \"/usr/local/lib/python3.10/os.py\", line 685, in __setitem__\n    value\
    \ = self.encodevalue(value)\nFile \"/usr/local/lib/python3.10/os.py\", line 757,\
    \ in encode\n    raise TypeError(\"str expected, not %s\" % type(value).__name__)\n\
    \nOriginally, the old is like this below\nfrom dotenv import load_dotenv\nload_dotenv()\n\
    HUGGINGFACEHUB_API_TOKEN = os.getenv('HUGGINGFACEHUB_API_TOKEN')\nos.environ[\"\
    HUGGINGFACEHUB_API_TOKEN\"] = HUGGINGFACEHUB_API_TOKEN\nIt will show the error\
    \ message above.\n\nI found I can solve the problem by replacing the key directly.\n\
    os.environ[\"HUGGINGFACEHUB_API_TOKEN\"] = \"xxxxx\"\n\nBut, it is not save to\
    \ reveal the key.\n\nAny help would be much appreciated."
  created_at: 2023-08-23 14:25:53+00:00
  edited: true
  hidden: false
  id: 64e625010df4c63f21be50b3
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 24
repo_id: HuggingFaceH4/starchat-beta
repo_type: model
status: open
target_branch: null
title: 'TypeError: str expected, not NoneType'
