!!python/object:huggingface_hub.community.DiscussionWithDetails
author: tirtohadi
conflicting_files: null
created_at: 2023-11-23 08:36:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
      fullname: Albert Tirtohadi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirtohadi
      type: user
    createdAt: '2023-11-23T08:36:18.000Z'
    data:
      edited: false
      editors:
      - tirtohadi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9238682985305786
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
          fullname: Albert Tirtohadi
          isHf: false
          isPro: false
          name: tirtohadi
          type: user
        html: '<p>May I ask, how do I fine tune Whisper with translation from english
          to another language? Mainly want to know what the dataset should look like.
          There is a tutorial for whisper fine tuning with the example data set is
          a pair of audio with its original language text. To train for translation,
          do I pair the audio with the translated text? Many thanks for the help.
          </p>

          <p>Also do you recommend using whisper for audio translation or using other
          models? Appreciate it.</p>

          '
        raw: "May I ask, how do I fine tune Whisper with translation from english\
          \ to another language? Mainly want to know what the dataset should look\
          \ like. There is a tutorial for whisper fine tuning with the example data\
          \ set is a pair of audio with its original language text. To train for translation,\
          \ do I pair the audio with the translated text? Many thanks for the help.\
          \ \r\n\r\nAlso do you recommend using whisper for audio translation or using\
          \ other models? Appreciate it."
        updatedAt: '2023-11-23T08:36:18.724Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - leoliao7
    id: 655f0f026e89f16ecc06e1ff
    type: comment
  author: tirtohadi
  content: "May I ask, how do I fine tune Whisper with translation from english to\
    \ another language? Mainly want to know what the dataset should look like. There\
    \ is a tutorial for whisper fine tuning with the example data set is a pair of\
    \ audio with its original language text. To train for translation, do I pair the\
    \ audio with the translated text? Many thanks for the help. \r\n\r\nAlso do you\
    \ recommend using whisper for audio translation or using other models? Appreciate\
    \ it."
  created_at: 2023-11-23 08:36:18+00:00
  edited: false
  hidden: false
  id: 655f0f026e89f16ecc06e1ff
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-11-23T16:52:56.000Z'
    data:
      edited: true
      editors:
      - sanchit-gandhi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8222560286521912
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;tirtohadi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/tirtohadi\"\
          >@<span class=\"underline\">tirtohadi</span></a></span>\n\n\t</span></span>\
          \ - you can use the same fine-tuning tutorial as provided. Simply train\
          \ on pairs of <code>(English audio, translated text)</code>. In the tokenizer\
          \ and processor, you should the task to <code>translate</code>, and the\
          \ <code>language</code> to your <strong>target</strong> language. Whisper\
          \ should work quite well for this task, especially this new <code>large-v3</code>\
          \ version.</p>\n"
        raw: Hey @tirtohadi - you can use the same fine-tuning tutorial as provided.
          Simply train on pairs of `(English audio, translated text)`. In the tokenizer
          and processor, you should the task to `translate`, and the `language` to
          your **target** language. Whisper should work quite well for this task,
          especially this new `large-v3` version.
        updatedAt: '2023-11-23T16:53:24.505Z'
      numEdits: 1
      reactions: []
    id: 655f8368f74fa124d12820da
    type: comment
  author: sanchit-gandhi
  content: Hey @tirtohadi - you can use the same fine-tuning tutorial as provided.
    Simply train on pairs of `(English audio, translated text)`. In the tokenizer
    and processor, you should the task to `translate`, and the `language` to your
    **target** language. Whisper should work quite well for this task, especially
    this new `large-v3` version.
  created_at: 2023-11-23 16:52:56+00:00
  edited: true
  hidden: false
  id: 655f8368f74fa124d12820da
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7683cf00194de19cfaa5afe33c074bc4.svg
      fullname: Chandan Kumar Singh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: CKSINGH
      type: user
    createdAt: '2023-11-23T19:16:35.000Z'
    data:
      edited: true
      editors:
      - CKSINGH
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.821270227432251
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7683cf00194de19cfaa5afe33c074bc4.svg
          fullname: Chandan Kumar Singh
          isHf: false
          isPro: false
          name: CKSINGH
          type: user
        html: "<p>While training , how do i save the model as pickel file \u201Cpytorch_model.bin\u201D\
          .<br>When i push the model to the repo using \u201Ctrainer.push_to_hub(**kwargs)\u201D\
          \ [ex:CKSINGH/whisper-small-hi-firefox] , i dont see the pickel file pushed\
          \ along side .<br>How i can save the pickle file . as I would need it to\
          \ integrate it to a LM .?</p>\n"
        raw: "While training , how do i save the model as pickel file \u201Cpytorch_model.bin\u201D\
          .\nWhen i push the model to the repo using \u201Ctrainer.push_to_hub(**kwargs)\u201D\
          \ [ex:CKSINGH/whisper-small-hi-firefox] , i dont see the pickel file pushed\
          \ along side .\nHow i can save the pickle file . as I would need it to integrate\
          \ it to a LM .?"
        updatedAt: '2023-11-23T19:17:05.903Z'
      numEdits: 1
      reactions: []
    id: 655fa51318e09c839bc1e7b7
    type: comment
  author: CKSINGH
  content: "While training , how do i save the model as pickel file \u201Cpytorch_model.bin\u201D\
    .\nWhen i push the model to the repo using \u201Ctrainer.push_to_hub(**kwargs)\u201D\
    \ [ex:CKSINGH/whisper-small-hi-firefox] , i dont see the pickel file pushed along\
    \ side .\nHow i can save the pickle file . as I would need it to integrate it\
    \ to a LM .?"
  created_at: 2023-11-23 19:16:35+00:00
  edited: true
  hidden: false
  id: 655fa51318e09c839bc1e7b7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
      fullname: Albert Tirtohadi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirtohadi
      type: user
    createdAt: '2023-11-24T00:02:03.000Z'
    data:
      edited: false
      editors:
      - tirtohadi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8381397724151611
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
          fullname: Albert Tirtohadi
          isHf: false
          isPro: false
          name: tirtohadi
          type: user
        html: "<p>thank you <span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ let me try it out</p>\n"
        raw: thank you @sanchit-gandhi let me try it out
        updatedAt: '2023-11-24T00:02:03.287Z'
      numEdits: 0
      reactions: []
    id: 655fe7fb539f2d269a2566cf
    type: comment
  author: tirtohadi
  content: thank you @sanchit-gandhi let me try it out
  created_at: 2023-11-24 00:02:03+00:00
  edited: false
  hidden: false
  id: 655fe7fb539f2d269a2566cf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
      fullname: Albert Tirtohadi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirtohadi
      type: user
    createdAt: '2023-11-25T03:31:39.000Z'
    data:
      edited: false
      editors:
      - tirtohadi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6937403678894043
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
          fullname: Albert Tirtohadi
          isHf: false
          isPro: false
          name: tirtohadi
          type: user
        html: "<p>hi <span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ I tried to follow the tutorial without modification in google colab but\
          \ gotten this issue: ImportError: Using the <code>Trainer</code> with <code>PyTorch</code>\
          \ requires <code>accelerate&gt;=0.20.1</code>: Please run <code>pip install\
          \ transformers[torch]</code> or <code>pip install accelerate -U</code></p>\n\
          <p>This is when trying to run the following code: </p>\n<p>from transformers\
          \ import Seq2SeqTrainingArguments</p>\n<p>training_args = Seq2SeqTrainingArguments(<br>\
          \    output_dir=\"./whisper-small-hi\",  # change to a repo name of your\
          \ choice<br>    per_device_train_batch_size=16,<br>    gradient_accumulation_steps=1,\
          \  # increase by 2x for every 2x decrease in batch size<br>    learning_rate=1e-5,<br>\
          \    warmup_steps=500,<br>    max_steps=4000,<br>    gradient_checkpointing=True,<br>\
          \    fp16=True,<br>    evaluation_strategy=\"steps\",<br>    per_device_eval_batch_size=8,<br>\
          \    predict_with_generate=True,<br>    generation_max_length=225,<br> \
          \   save_steps=1000,<br>    eval_steps=1000,<br>    logging_steps=25,<br>\
          \    report_to=[\"tensorboard\"],<br>    load_best_model_at_end=True,<br>\
          \    metric_for_best_model=\"wer\",<br>    greater_is_better=False,<br>\
          \    push_to_hub=True,<br>)</p>\n<p>Perhaps can give a little guidance?\
          \ Thanks once again for the effort in coming up with the tutorial</p>\n"
        raw: "hi @sanchit-gandhi I tried to follow the tutorial without modification\
          \ in google colab but gotten this issue: ImportError: Using the `Trainer`\
          \ with `PyTorch` requires `accelerate>=0.20.1`: Please run `pip install\
          \ transformers[torch]` or `pip install accelerate -U`\n\nThis is when trying\
          \ to run the following code: \n\nfrom transformers import Seq2SeqTrainingArguments\n\
          \ntraining_args = Seq2SeqTrainingArguments(\n    output_dir=\"./whisper-small-hi\"\
          ,  # change to a repo name of your choice\n    per_device_train_batch_size=16,\n\
          \    gradient_accumulation_steps=1,  # increase by 2x for every 2x decrease\
          \ in batch size\n    learning_rate=1e-5,\n    warmup_steps=500,\n    max_steps=4000,\n\
          \    gradient_checkpointing=True,\n    fp16=True,\n    evaluation_strategy=\"\
          steps\",\n    per_device_eval_batch_size=8,\n    predict_with_generate=True,\n\
          \    generation_max_length=225,\n    save_steps=1000,\n    eval_steps=1000,\n\
          \    logging_steps=25,\n    report_to=[\"tensorboard\"],\n    load_best_model_at_end=True,\n\
          \    metric_for_best_model=\"wer\",\n    greater_is_better=False,\n    push_to_hub=True,\n\
          )\n\nPerhaps can give a little guidance? Thanks once again for the effort\
          \ in coming up with the tutorial"
        updatedAt: '2023-11-25T03:31:39.403Z'
      numEdits: 0
      reactions: []
    id: 65616a9b78f6dd8d8376c978
    type: comment
  author: tirtohadi
  content: "hi @sanchit-gandhi I tried to follow the tutorial without modification\
    \ in google colab but gotten this issue: ImportError: Using the `Trainer` with\
    \ `PyTorch` requires `accelerate>=0.20.1`: Please run `pip install transformers[torch]`\
    \ or `pip install accelerate -U`\n\nThis is when trying to run the following code:\
    \ \n\nfrom transformers import Seq2SeqTrainingArguments\n\ntraining_args = Seq2SeqTrainingArguments(\n\
    \    output_dir=\"./whisper-small-hi\",  # change to a repo name of your choice\n\
    \    per_device_train_batch_size=16,\n    gradient_accumulation_steps=1,  # increase\
    \ by 2x for every 2x decrease in batch size\n    learning_rate=1e-5,\n    warmup_steps=500,\n\
    \    max_steps=4000,\n    gradient_checkpointing=True,\n    fp16=True,\n    evaluation_strategy=\"\
    steps\",\n    per_device_eval_batch_size=8,\n    predict_with_generate=True,\n\
    \    generation_max_length=225,\n    save_steps=1000,\n    eval_steps=1000,\n\
    \    logging_steps=25,\n    report_to=[\"tensorboard\"],\n    load_best_model_at_end=True,\n\
    \    metric_for_best_model=\"wer\",\n    greater_is_better=False,\n    push_to_hub=True,\n\
    )\n\nPerhaps can give a little guidance? Thanks once again for the effort in coming\
    \ up with the tutorial"
  created_at: 2023-11-25 03:31:39+00:00
  edited: false
  hidden: false
  id: 65616a9b78f6dd8d8376c978
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
      fullname: Albert Tirtohadi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirtohadi
      type: user
    createdAt: '2023-11-25T03:33:02.000Z'
    data:
      edited: false
      editors:
      - tirtohadi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8519697189331055
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
          fullname: Albert Tirtohadi
          isHf: false
          isPro: false
          name: tirtohadi
          type: user
        html: '<p>Btw i have run !pip install transformers[torch] and !pip install
          accelerate -U in the Colab but no difference</p>

          '
        raw: Btw i have run !pip install transformers[torch] and !pip install accelerate
          -U in the Colab but no difference
        updatedAt: '2023-11-25T03:33:02.821Z'
      numEdits: 0
      reactions: []
    id: 65616aeead639c6ab99566df
    type: comment
  author: tirtohadi
  content: Btw i have run !pip install transformers[torch] and !pip install accelerate
    -U in the Colab but no difference
  created_at: 2023-11-25 03:33:02+00:00
  edited: false
  hidden: false
  id: 65616aeead639c6ab99566df
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5f3fe13d79c1ba4c353d0c19/LKAyCTg1th9kuZKka313U.jpeg?w=200&h=200&f=face
      fullname: aaditya ura
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aaditya
      type: user
    createdAt: '2023-11-25T21:14:45.000Z'
    data:
      edited: true
      editors:
      - aaditya
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8697878122329712
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5f3fe13d79c1ba4c353d0c19/LKAyCTg1th9kuZKka313U.jpeg?w=200&h=200&f=face
          fullname: aaditya ura
          isHf: false
          isPro: false
          name: aaditya
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;tirtohadi&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/tirtohadi\">@<span class=\"\
          underline\">tirtohadi</span></a></span>\n\n\t</span></span> after !pip install\
          \ accelerate -U restart the colab session, it will work.</p>\n"
        raw: '@tirtohadi after !pip install accelerate -U restart the colab session,
          it will work.'
        updatedAt: '2023-11-25T21:29:20.122Z'
      numEdits: 1
      reactions: []
    id: 656263c5a72f05d2eaa2432a
    type: comment
  author: aaditya
  content: '@tirtohadi after !pip install accelerate -U restart the colab session,
    it will work.'
  created_at: 2023-11-25 21:14:45+00:00
  edited: true
  hidden: false
  id: 656263c5a72f05d2eaa2432a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/34fb1418b18e7804cb062e2100382738.svg
      fullname: Manchi Sarapu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: SharatChandra
      type: user
    createdAt: '2023-12-01T07:52:13.000Z'
    data:
      edited: false
      editors:
      - SharatChandra
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9767127633094788
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/34fb1418b18e7804cb062e2100382738.svg
          fullname: Manchi Sarapu
          isHf: false
          isPro: false
          name: SharatChandra
          type: user
        html: '<p>Same issue faced by me, but need a fix for the root cause</p>

          '
        raw: Same issue faced by me, but need a fix for the root cause
        updatedAt: '2023-12-01T07:52:13.585Z'
      numEdits: 0
      reactions: []
    id: 656990ad95ab5c3a597b9767
    type: comment
  author: SharatChandra
  content: Same issue faced by me, but need a fix for the root cause
  created_at: 2023-12-01 07:52:13+00:00
  edited: false
  hidden: false
  id: 656990ad95ab5c3a597b9767
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
      fullname: Albert Tirtohadi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirtohadi
      type: user
    createdAt: '2023-12-01T09:37:45.000Z'
    data:
      edited: false
      editors:
      - tirtohadi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9175962209701538
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b763fec812bc4d3adc18c016cf5ff953.svg
          fullname: Albert Tirtohadi
          isHf: false
          isPro: false
          name: tirtohadi
          type: user
        html: "<p>Thanks for the update. <span data-props=\"{&quot;user&quot;:&quot;aaditya&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/aaditya\"\
          >@<span class=\"underline\">aaditya</span></a></span>\n\n\t</span></span>\
          \ i am going to run it in my own local machine for now, so didnt try with\
          \ Colab</p>\n"
        raw: 'Thanks for the update. @aaditya i am going to run it in my own local
          machine for now, so didnt try with Colab

          '
        updatedAt: '2023-12-01T09:37:45.753Z'
      numEdits: 0
      reactions: []
    id: 6569a9698e96268a52a9d0df
    type: comment
  author: tirtohadi
  content: 'Thanks for the update. @aaditya i am going to run it in my own local machine
    for now, so didnt try with Colab

    '
  created_at: 2023-12-01 09:37:45+00:00
  edited: false
  hidden: false
  id: 6569a9698e96268a52a9d0df
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 43
repo_id: openai/whisper-large-v3
repo_type: model
status: open
target_branch: null
title: Training for translation
