!!python/object:huggingface_hub.community.DiscussionWithDetails
author: 97Buckeye
conflicting_files: null
created_at: 2023-08-01 18:28:05+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cbeea621aedf52e0f95f71c4a1aa3f15.svg
      fullname: Christopher Moody
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: 97Buckeye
      type: user
    createdAt: '2023-08-01T19:28:05.000Z'
    data:
      edited: false
      editors:
      - 97Buckeye
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.40639814734458923
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cbeea621aedf52e0f95f71c4a1aa3f15.svg
          fullname: Christopher Moody
          isHf: false
          isPro: false
          name: 97Buckeye
          type: user
        html: '<p>I have downloaded your sdxl_vae.safetensors file and placed it into
          the correct folder for my installation. However, when I select the vae from
          my VAE droplist, I get the following error message in my CMD window:</p>

          <p>Applying attention optimization: xformers... done.<br>VAE weights loaded.<br>Loading
          VAE weights specified in settings: H:\Stable Diffusion - Automatic1111\sd.webui\webui\models\VAE\sdXL_vae.safetensors<br>changing
          setting sd_vae to sdXL_vae.safetensors: SafetensorError<br>Traceback (most
          recent call last):<br>  File "H:\Stable Diffusion - Automatic1111\sd.webui\webui\modules\shared.py",
          line 633, in set<br>    self.data_labels[key].onchange()<br>  File "H:\Stable
          Diffusion - Automatic1111\sd.webui\webui\modules\call_queue.py", line 14,
          in f<br>    res = func(*args, **kwargs)<br>  File "H:\Stable Diffusion -
          Automatic1111\sd.webui\webui\webui.py", line 239, in <br>    shared.opts.onchange("sd_vae",
          wrap_queued_call(lambda: modules.sd_vae.reload_vae_weights()), call=False)<br>  File
          "H:\Stable Diffusion - Automatic1111\sd.webui\webui\modules\sd_vae.py",
          line 204, in reload_vae_weights<br>    load_vae(sd_model, vae_file, vae_source)<br>  File
          "H:\Stable Diffusion - Automatic1111\sd.webui\webui\modules\sd_vae.py",
          line 142, in load_vae<br>    vae_dict_1 = load_vae_dict(vae_file, map_location=shared.weight_load_location)<br>  File
          "H:\Stable Diffusion - Automatic1111\sd.webui\webui\modules\sd_vae.py",
          line 120, in load_vae_dict<br>    vae_ckpt = sd_models.read_state_dict(filename,
          map_location=map_location)<br>  File "H:\Stable Diffusion - Automatic1111\sd.webui\webui\modules\sd_models.py",
          line 253, in read_state_dict<br>    pl_sd = safetensors.torch.load_file(checkpoint_file,
          device=device)<br>  File "H:\Stable Diffusion - Automatic1111\sd.webui\system\python\lib\site-packages\safetensors\torch.py",
          line 259, in load_file<br>    with safe_open(filename, framework="pt", device=device)
          as f:<br>safetensors_rust.SafetensorError: Error while deserializing header:
          HeaderTooLarge</p>

          <hr>

          <p>Have I done something wrong? Do I need to update something else before
          I can use this VAE?|</p>

          '
        raw: "I have downloaded your sdxl_vae.safetensors file and placed it into\
          \ the correct folder for my installation. However, when I select the vae\
          \ from my VAE droplist, I get the following error message in my CMD window:\r\
          \n\r\nApplying attention optimization: xformers... done.\r\nVAE weights\
          \ loaded.\r\nLoading VAE weights specified in settings: H:\\Stable Diffusion\
          \ - Automatic1111\\sd.webui\\webui\\models\\VAE\\sdXL_vae.safetensors\r\n\
          changing setting sd_vae to sdXL_vae.safetensors: SafetensorError\r\nTraceback\
          \ (most recent call last):\r\n  File \"H:\\Stable Diffusion - Automatic1111\\\
          sd.webui\\webui\\modules\\shared.py\", line 633, in set\r\n    self.data_labels[key].onchange()\r\
          \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\\
          call_queue.py\", line 14, in f\r\n    res = func(*args, **kwargs)\r\n  File\
          \ \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\webui.py\", line\
          \ 239, in <lambda>\r\n    shared.opts.onchange(\"sd_vae\", wrap_queued_call(lambda:\
          \ modules.sd_vae.reload_vae_weights()), call=False)\r\n  File \"H:\\Stable\
          \ Diffusion - Automatic1111\\sd.webui\\webui\\modules\\sd_vae.py\", line\
          \ 204, in reload_vae_weights\r\n    load_vae(sd_model, vae_file, vae_source)\r\
          \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\\
          sd_vae.py\", line 142, in load_vae\r\n    vae_dict_1 = load_vae_dict(vae_file,\
          \ map_location=shared.weight_load_location)\r\n  File \"H:\\Stable Diffusion\
          \ - Automatic1111\\sd.webui\\webui\\modules\\sd_vae.py\", line 120, in load_vae_dict\r\
          \n    vae_ckpt = sd_models.read_state_dict(filename, map_location=map_location)\r\
          \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\\
          sd_models.py\", line 253, in read_state_dict\r\n    pl_sd = safetensors.torch.load_file(checkpoint_file,\
          \ device=device)\r\n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\\
          system\\python\\lib\\site-packages\\safetensors\\torch.py\", line 259, in\
          \ load_file\r\n    with safe_open(filename, framework=\"pt\", device=device)\
          \ as f:\r\nsafetensors_rust.SafetensorError: Error while deserializing header:\
          \ HeaderTooLarge\r\n\r\n---------------------------------------------------------------\r\
          \nHave I done something wrong? Do I need to update something else before\
          \ I can use this VAE?|"
        updatedAt: '2023-08-01T19:28:05.860Z'
      numEdits: 0
      reactions: []
    id: 64c95cc57205a6656c29ed5c
    type: comment
  author: 97Buckeye
  content: "I have downloaded your sdxl_vae.safetensors file and placed it into the\
    \ correct folder for my installation. However, when I select the vae from my VAE\
    \ droplist, I get the following error message in my CMD window:\r\n\r\nApplying\
    \ attention optimization: xformers... done.\r\nVAE weights loaded.\r\nLoading\
    \ VAE weights specified in settings: H:\\Stable Diffusion - Automatic1111\\sd.webui\\\
    webui\\models\\VAE\\sdXL_vae.safetensors\r\nchanging setting sd_vae to sdXL_vae.safetensors:\
    \ SafetensorError\r\nTraceback (most recent call last):\r\n  File \"H:\\Stable\
    \ Diffusion - Automatic1111\\sd.webui\\webui\\modules\\shared.py\", line 633,\
    \ in set\r\n    self.data_labels[key].onchange()\r\n  File \"H:\\Stable Diffusion\
    \ - Automatic1111\\sd.webui\\webui\\modules\\call_queue.py\", line 14, in f\r\n\
    \    res = func(*args, **kwargs)\r\n  File \"H:\\Stable Diffusion - Automatic1111\\\
    sd.webui\\webui\\webui.py\", line 239, in <lambda>\r\n    shared.opts.onchange(\"\
    sd_vae\", wrap_queued_call(lambda: modules.sd_vae.reload_vae_weights()), call=False)\r\
    \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\sd_vae.py\"\
    , line 204, in reload_vae_weights\r\n    load_vae(sd_model, vae_file, vae_source)\r\
    \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\sd_vae.py\"\
    , line 142, in load_vae\r\n    vae_dict_1 = load_vae_dict(vae_file, map_location=shared.weight_load_location)\r\
    \n  File \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\webui\\modules\\sd_vae.py\"\
    , line 120, in load_vae_dict\r\n    vae_ckpt = sd_models.read_state_dict(filename,\
    \ map_location=map_location)\r\n  File \"H:\\Stable Diffusion - Automatic1111\\\
    sd.webui\\webui\\modules\\sd_models.py\", line 253, in read_state_dict\r\n   \
    \ pl_sd = safetensors.torch.load_file(checkpoint_file, device=device)\r\n  File\
    \ \"H:\\Stable Diffusion - Automatic1111\\sd.webui\\system\\python\\lib\\site-packages\\\
    safetensors\\torch.py\", line 259, in load_file\r\n    with safe_open(filename,\
    \ framework=\"pt\", device=device) as f:\r\nsafetensors_rust.SafetensorError:\
    \ Error while deserializing header: HeaderTooLarge\r\n\r\n---------------------------------------------------------------\r\
    \nHave I done something wrong? Do I need to update something else before I can\
    \ use this VAE?|"
  created_at: 2023-08-01 18:28:05+00:00
  edited: false
  hidden: false
  id: 64c95cc57205a6656c29ed5c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cbeea621aedf52e0f95f71c4a1aa3f15.svg
      fullname: Christopher Moody
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: 97Buckeye
      type: user
    createdAt: '2023-08-01T19:49:57.000Z'
    data:
      edited: false
      editors:
      - 97Buckeye
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9976276159286499
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cbeea621aedf52e0f95f71c4a1aa3f15.svg
          fullname: Christopher Moody
          isHf: false
          isPro: false
          name: 97Buckeye
          type: user
        html: '<p>I''m an idiot. Ignore what I wrote. I don''t even want to tell you
          what I did wrong. I have it working fine, now. Thank you.</p>

          '
        raw: I'm an idiot. Ignore what I wrote. I don't even want to tell you what
          I did wrong. I have it working fine, now. Thank you.
        updatedAt: '2023-08-01T19:49:57.794Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - madebyollin
      relatedEventId: 64c961e50b2ba05b2f6ea89b
    id: 64c961e50b2ba05b2f6ea89a
    type: comment
  author: 97Buckeye
  content: I'm an idiot. Ignore what I wrote. I don't even want to tell you what I
    did wrong. I have it working fine, now. Thank you.
  created_at: 2023-08-01 18:49:57+00:00
  edited: false
  hidden: false
  id: 64c961e50b2ba05b2f6ea89a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/cbeea621aedf52e0f95f71c4a1aa3f15.svg
      fullname: Christopher Moody
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: 97Buckeye
      type: user
    createdAt: '2023-08-01T19:49:57.000Z'
    data:
      status: closed
    id: 64c961e50b2ba05b2f6ea89b
    type: status-change
  author: 97Buckeye
  created_at: 2023-08-01 18:49:57+00:00
  id: 64c961e50b2ba05b2f6ea89b
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 8
repo_id: madebyollin/sdxl-vae-fp16-fix
repo_type: model
status: closed
target_branch: null
title: Large Error Message When Switching to New VAE Verions
