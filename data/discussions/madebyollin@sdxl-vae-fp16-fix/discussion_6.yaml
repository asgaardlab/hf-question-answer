!!python/object:huggingface_hub.community.DiscussionWithDetails
author: alexds9
conflicting_files: null
created_at: 2023-07-19 23:41:47+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8b69a927aa9646cfa256cc5942b257b5.svg
      fullname: AI
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: alexds9
      type: user
    createdAt: '2023-07-20T00:41:47.000Z'
    data:
      edited: false
      editors:
      - alexds9
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9146336317062378
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8b69a927aa9646cfa256cc5942b257b5.svg
          fullname: AI
          isHf: false
          isPro: false
          name: alexds9
          type: user
        html: '<p>Any way to make it work with SD v1 properly?</p>

          '
        raw: Any way to make it work with SD v1 properly?
        updatedAt: '2023-07-20T00:41:47.019Z'
      numEdits: 0
      reactions: []
    id: 64b882cbacfb31c3f79f7b7b
    type: comment
  author: alexds9
  content: Any way to make it work with SD v1 properly?
  created_at: 2023-07-19 23:41:47+00:00
  edited: false
  hidden: false
  id: 64b882cbacfb31c3f79f7b7b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
      fullname: madebyollin
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: madebyollin
      type: user
    createdAt: '2023-07-20T03:28:01.000Z'
    data:
      edited: false
      editors:
      - madebyollin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7591809630393982
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
          fullname: madebyollin
          isHf: false
          isPro: false
          name: madebyollin
          type: user
        html: "<p>No. SDXL-VAE was retrained from scratch, and it's not compatible\
          \ with SD-VAE:</p>\n<p><strong>SDXL-VAE Encoder \t\u2192 SDXL-VAE Decoder</strong>:\
          \ Happy dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png\"\
          ></a></p>\n<p><strong>SD-VAE Encoder \u2192 SD-VAE Decoder</strong>: Happy\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png\"\
          ></a></p>\n<p><strong>SDXL-VAE Encoder \u2192 SD-VAE Decoder</strong>: Sad\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png\"\
          ></a></p>\n<p><strong>SD-VAE Encoder \u2192 SDXL-VAE Decoder</strong>: Angry\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png\"\
          ></a></p>\n<p>The SD-VAE internal activations explode slower than the SDXL-VAE,\
          \ so you can often run SD-VAE in fp16 without NaNs as-is:</p>\n<p><a rel=\"\
          nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png\"\
          ></a></p>\n<p>Still, to make SD-VAE work 100%-reliably in fp16, you'd need\
          \ a <code>sd-vae-fp16-fix</code> - which I don't think anyone has made.</p>\n"
        raw: "No. SDXL-VAE was retrained from scratch, and it's not compatible with\
          \ SD-VAE:\n\n**SDXL-VAE Encoder \t\u2192 SDXL-VAE Decoder**: Happy dog\n\
          ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png)\n\
          \n**SD-VAE Encoder \u2192 SD-VAE Decoder**: Happy dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png)\n\
          \n**SDXL-VAE Encoder \u2192 SD-VAE Decoder**: Sad dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png)\n\
          \n**SD-VAE Encoder \u2192 SDXL-VAE Decoder**: Angry dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png)\n\
          \nThe SD-VAE internal activations explode slower than the SDXL-VAE, so you\
          \ can often run SD-VAE in fp16 without NaNs as-is:\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png)\n\
          \nStill, to make SD-VAE work 100%-reliably in fp16, you'd need a `sd-vae-fp16-fix`\
          \ - which I don't think anyone has made."
        updatedAt: '2023-07-20T03:28:01.268Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - sayakpaul
    id: 64b8a9c13707b7d603c6ac16
    type: comment
  author: madebyollin
  content: "No. SDXL-VAE was retrained from scratch, and it's not compatible with\
    \ SD-VAE:\n\n**SDXL-VAE Encoder \t\u2192 SDXL-VAE Decoder**: Happy dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png)\n\
    \n**SD-VAE Encoder \u2192 SD-VAE Decoder**: Happy dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png)\n\
    \n**SDXL-VAE Encoder \u2192 SD-VAE Decoder**: Sad dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png)\n\
    \n**SD-VAE Encoder \u2192 SDXL-VAE Decoder**: Angry dog\n![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png)\n\
    \nThe SD-VAE internal activations explode slower than the SDXL-VAE, so you can\
    \ often run SD-VAE in fp16 without NaNs as-is:\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png)\n\
    \nStill, to make SD-VAE work 100%-reliably in fp16, you'd need a `sd-vae-fp16-fix`\
    \ - which I don't think anyone has made."
  created_at: 2023-07-20 02:28:01+00:00
  edited: false
  hidden: false
  id: 64b8a9c13707b7d603c6ac16
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676622044889-63ef38c81e695b35aa489104.jpeg?w=200&h=200&f=face
      fullname: qinglongshengzhe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bdsqlsz
      type: user
    createdAt: '2023-07-30T15:26:16.000Z'
    data:
      edited: false
      editors:
      - bdsqlsz
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7773482799530029
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676622044889-63ef38c81e695b35aa489104.jpeg?w=200&h=200&f=face
          fullname: qinglongshengzhe
          isHf: false
          isPro: false
          name: bdsqlsz
          type: user
        html: "<blockquote>\n<p>No. SDXL-VAE was retrained from scratch, and it's\
          \ not compatible with SD-VAE:</p>\n<p><strong>SDXL-VAE Encoder \t\u2192\
          \ SDXL-VAE Decoder</strong>: Happy dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png\"\
          ></a></p>\n<p><strong>SD-VAE Encoder \u2192 SD-VAE Decoder</strong>: Happy\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png\"\
          ></a></p>\n<p><strong>SDXL-VAE Encoder \u2192 SD-VAE Decoder</strong>: Sad\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png\"\
          ></a></p>\n<p><strong>SD-VAE Encoder \u2192 SDXL-VAE Decoder</strong>: Angry\
          \ dog<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png\"\
          ><img alt=\"\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png\"\
          ></a></p>\n<p>The SD-VAE internal activations explode slower than the SDXL-VAE,\
          \ so you can often run SD-VAE in fp16 without NaNs as-is:</p>\n<p><a rel=\"\
          nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png\"\
          ></a></p>\n<p>Still, to make SD-VAE work 100%-reliably in fp16, you'd need\
          \ a <code>sd-vae-fp16-fix</code> - which I don't think anyone has made.</p>\n\
          </blockquote>\n<p>thank u for great work~<br>what tool did u use for showing\
          \ internal activations?<br>it is very cool~</p>\n"
        raw: "> No. SDXL-VAE was retrained from scratch, and it's not compatible with\
          \ SD-VAE:\n> \n> **SDXL-VAE Encoder \t\u2192 SDXL-VAE Decoder**: Happy dog\n\
          > ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png)\n\
          > \n> **SD-VAE Encoder \u2192 SD-VAE Decoder**: Happy dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png)\n\
          > \n> **SDXL-VAE Encoder \u2192 SD-VAE Decoder**: Sad dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png)\n\
          > \n> **SD-VAE Encoder \u2192 SDXL-VAE Decoder**: Angry dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png)\n\
          > \n> The SD-VAE internal activations explode slower than the SDXL-VAE,\
          \ so you can often run SD-VAE in fp16 without NaNs as-is:\n> \n> ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png)\n\
          > \n> Still, to make SD-VAE work 100%-reliably in fp16, you'd need a `sd-vae-fp16-fix`\
          \ - which I don't think anyone has made.\n\nthank u for great work~\nwhat\
          \ tool did u use for showing internal activations?\nit is very cool~"
        updatedAt: '2023-07-30T15:26:16.321Z'
      numEdits: 0
      reactions: []
    id: 64c681185cd9506edf5ccf58
    type: comment
  author: bdsqlsz
  content: "> No. SDXL-VAE was retrained from scratch, and it's not compatible with\
    \ SD-VAE:\n> \n> **SDXL-VAE Encoder \t\u2192 SDXL-VAE Decoder**: Happy dog\n>\
    \ ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/mBhgnxn3-zMNo7W2z1S-y.png)\n\
    > \n> **SD-VAE Encoder \u2192 SD-VAE Decoder**: Happy dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/d_N9_5lDXpoIdEuM3RFcp.png)\n\
    > \n> **SDXL-VAE Encoder \u2192 SD-VAE Decoder**: Sad dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ZuZxFXBa0nX-1vm9neTWT.png)\n\
    > \n> **SD-VAE Encoder \u2192 SDXL-VAE Decoder**: Angry dog\n> ![](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/jDO9mybQrJSBnJrNi68r7.png)\n\
    > \n> The SD-VAE internal activations explode slower than the SDXL-VAE, so you\
    \ can often run SD-VAE in fp16 without NaNs as-is:\n> \n> ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/x3iA8OQNLPiv0CCmaO9UM.png)\n\
    > \n> Still, to make SD-VAE work 100%-reliably in fp16, you'd need a `sd-vae-fp16-fix`\
    \ - which I don't think anyone has made.\n\nthank u for great work~\nwhat tool\
    \ did u use for showing internal activations?\nit is very cool~"
  created_at: 2023-07-30 14:26:16+00:00
  edited: false
  hidden: false
  id: 64c681185cd9506edf5ccf58
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
      fullname: madebyollin
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: madebyollin
      type: user
    createdAt: '2023-07-30T17:48:11.000Z'
    data:
      edited: false
      editors:
      - madebyollin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6641032695770264
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
          fullname: madebyollin
          isHf: false
          isPro: false
          name: madebyollin
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;bdsqlsz&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/bdsqlsz\">@<span class=\"\
          underline\">bdsqlsz</span></a></span>\n\n\t</span></span> <a rel=\"nofollow\"\
          \ href=\"https://gist.github.com/madebyollin/e6e217a77db94e2a960ab6ccbd627db9\"\
          >https://gist.github.com/madebyollin/e6e217a77db94e2a960ab6ccbd627db9</a>\
          \ I'm just printing them by hand</p>\n"
        raw: '@bdsqlsz https://gist.github.com/madebyollin/e6e217a77db94e2a960ab6ccbd627db9
          I''m just printing them by hand'
        updatedAt: '2023-07-30T17:48:11.786Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - bdsqlsz
        - ShoufaChen
    id: 64c6a25bc097c6c2b3ccf43c
    type: comment
  author: madebyollin
  content: '@bdsqlsz https://gist.github.com/madebyollin/e6e217a77db94e2a960ab6ccbd627db9
    I''m just printing them by hand'
  created_at: 2023-07-30 16:48:11+00:00
  edited: false
  hidden: false
  id: 64c6a25bc097c6c2b3ccf43c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: madebyollin/sdxl-vae-fp16-fix
repo_type: model
status: open
target_branch: null
title: Any way to make it work with SD v1 properly?
