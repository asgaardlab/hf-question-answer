!!python/object:huggingface_hub.community.DiscussionWithDetails
author: bayang
conflicting_files: null
created_at: 2023-11-10 11:30:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-11-10T11:30:24.000Z'
    data:
      edited: true
      editors:
      - bayang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.904085636138916
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
          fullname: BaYang
          isHf: false
          isPro: false
          name: bayang
          type: user
        html: '<p>This repo doesn''t contain model.safetensors like the xll or the
          base version.</p>

          <p>Can I do a PR?</p>

          '
        raw: 'This repo doesn''t contain model.safetensors like the xll or the base
          version.


          Can I do a PR?'
        updatedAt: '2023-11-27T11:06:22.794Z'
      numEdits: 2
      reactions: []
    id: 654e14501ad9edefdbf494d1
    type: comment
  author: bayang
  content: 'This repo doesn''t contain model.safetensors like the xll or the base
    version.


    Can I do a PR?'
  created_at: 2023-11-10 11:30:24+00:00
  edited: true
  hidden: false
  id: 654e14501ad9edefdbf494d1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:11:14.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7585577368736267
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;bayang&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/bayang\">@<span class=\"\
          underline\">bayang</span></a></span>\n\n\t</span></span>, you can use the\
          \ following Space to add a safetensors variant: <a href=\"https://huggingface.co/spaces/safetensors/convert\"\
          >https://huggingface.co/spaces/safetensors/convert</a></p>\n"
        raw: 'Hey @bayang, you can use the following Space to add a safetensors variant:
          https://huggingface.co/spaces/safetensors/convert'
        updatedAt: '2023-11-28T09:11:14.590Z'
      numEdits: 0
      reactions: []
    id: 6565aeb2f483a5f0c6cebb3c
    type: comment
  author: lysandre
  content: 'Hey @bayang, you can use the following Space to add a safetensors variant:
    https://huggingface.co/spaces/safetensors/convert'
  created_at: 2023-11-28 09:11:14+00:00
  edited: false
  hidden: false
  id: 6565aeb2f483a5f0c6cebb3c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:14:07.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.784011721611023
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>I submitted the current model to it and it opened the following
          PR: <a href="https://huggingface.co/google/flan-t5-xl/discussions/24#6565af340ff3292512bcf87d">https://huggingface.co/google/flan-t5-xl/discussions/24#6565af340ff3292512bcf87d</a></p>

          '
        raw: 'I submitted the current model to it and it opened the following PR:
          https://huggingface.co/google/flan-t5-xl/discussions/24#6565af340ff3292512bcf87d'
        updatedAt: '2023-11-28T09:14:07.522Z'
      numEdits: 0
      reactions: []
    id: 6565af5f18d648e7ccc59bde
    type: comment
  author: lysandre
  content: 'I submitted the current model to it and it opened the following PR: https://huggingface.co/google/flan-t5-xl/discussions/24#6565af340ff3292512bcf87d'
  created_at: 2023-11-28 09:14:07+00:00
  edited: false
  hidden: false
  id: 6565af5f18d648e7ccc59bde
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:14:25.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9501020312309265
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>I''m merging it, feel free to use the Space above to have conversions
          of the models you want.</p>

          '
        raw: I'm merging it, feel free to use the Space above to have conversions
          of the models you want.
        updatedAt: '2023-11-28T09:14:25.150Z'
      numEdits: 0
      reactions: []
    id: 6565af71f483a5f0c6cee08c
    type: comment
  author: lysandre
  content: I'm merging it, feel free to use the Space above to have conversions of
    the models you want.
  created_at: 2023-11-28 09:14:25+00:00
  edited: false
  hidden: false
  id: 6565af71f483a5f0c6cee08c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-11-28T09:26:27.000Z'
    data:
      edited: false
      editors:
      - bayang
      hidden: false
      identifiedLanguage:
        language: es
        probability: 0.2705693542957306
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
          fullname: BaYang
          isHf: false
          isPro: false
          name: bayang
          type: user
        html: "<p>Thanks <span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lysandre\"\
          >@<span class=\"underline\">lysandre</span></a></span>\n\n\t</span></span>.</p>\n"
        raw: Thanks @lysandre.
        updatedAt: '2023-11-28T09:26:27.150Z'
      numEdits: 0
      reactions: []
    id: 6565b24302ad0b04a96cb3df
    type: comment
  author: bayang
  content: Thanks @lysandre.
  created_at: 2023-11-28 09:26:27+00:00
  edited: false
  hidden: false
  id: 6565b24302ad0b04a96cb3df
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:29:28.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7566468119621277
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>Great! Closing this issue :)</p>

          '
        raw: Great! Closing this issue :)
        updatedAt: '2023-11-28T09:29:28.565Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6565b2f89615a04c63a62c27
    id: 6565b2f89615a04c63a62c26
    type: comment
  author: lysandre
  content: Great! Closing this issue :)
  created_at: 2023-11-28 09:29:28+00:00
  edited: false
  hidden: false
  id: 6565b2f89615a04c63a62c26
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:29:28.000Z'
    data:
      status: closed
    id: 6565b2f89615a04c63a62c27
    type: status-change
  author: lysandre
  created_at: 2023-11-28 09:29:28+00:00
  id: 6565b2f89615a04c63a62c27
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-11-28T09:33:47.000Z'
    data:
      edited: false
      editors:
      - bayang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7946258187294006
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
          fullname: BaYang
          isHf: false
          isPro: false
          name: bayang
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lysandre\"\
          >@<span class=\"underline\">lysandre</span></a></span>\n\n\t</span></span>,\
          \ i was wondering if the code I was preparing to convert is the same as\
          \ you do in that space internally?<br>import torch</p>\n<pre><code class=\"\
          language-python\">all_weights = {}\n<span class=\"hljs-keyword\">for</span>\
          \ filename <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\"\
          >\"pytorch_model-00001-of-00002.bin\"</span>, <span class=\"hljs-string\"\
          >\"pytorch_model-00002-of-00002.bin\"</span>]:\n    _model = torch.load(filename,\
          \ map_location=torch.device(<span class=\"hljs-string\">'cpu'</span>))\n\
          \    all_weights = { **all_weights, **_model }\n\n<span class=\"hljs-keyword\"\
          >from</span> safetensors <span class=\"hljs-keyword\">import</span> safe_open\n\
          <span class=\"hljs-keyword\">from</span> safetensors.torch <span class=\"\
          hljs-keyword\">import</span> save_file\n\nsave_file(all_weights, <span class=\"\
          hljs-string\">\"/tmp/model.safetensors\"</span>)\n</code></pre>\n<p>If so,\
          \ how would I create the <code>model.safetensors.index.json</code> file?</p>\n"
        raw: "Hey @lysandre, i was wondering if the code I was preparing to convert\
          \ is the same as you do in that space internally?\nimport torch\n\n```python\n\
          all_weights = {}\nfor filename in [\"pytorch_model-00001-of-00002.bin\"\
          , \"pytorch_model-00002-of-00002.bin\"]:\n    _model = torch.load(filename,\
          \ map_location=torch.device('cpu'))\n    all_weights = { **all_weights,\
          \ **_model }\n\nfrom safetensors import safe_open\nfrom safetensors.torch\
          \ import save_file\n\nsave_file(all_weights, \"/tmp/model.safetensors\"\
          )\n```\n\nIf so, how would I create the `model.safetensors.index.json` file?"
        updatedAt: '2023-11-28T09:33:47.805Z'
      numEdits: 0
      reactions: []
    id: 6565b3fb459394ff719b50d9
    type: comment
  author: bayang
  content: "Hey @lysandre, i was wondering if the code I was preparing to convert\
    \ is the same as you do in that space internally?\nimport torch\n\n```python\n\
    all_weights = {}\nfor filename in [\"pytorch_model-00001-of-00002.bin\", \"pytorch_model-00002-of-00002.bin\"\
    ]:\n    _model = torch.load(filename, map_location=torch.device('cpu'))\n    all_weights\
    \ = { **all_weights, **_model }\n\nfrom safetensors import safe_open\nfrom safetensors.torch\
    \ import save_file\n\nsave_file(all_weights, \"/tmp/model.safetensors\")\n```\n\
    \nIf so, how would I create the `model.safetensors.index.json` file?"
  created_at: 2023-11-28 09:33:47+00:00
  edited: false
  hidden: false
  id: 6565b3fb459394ff719b50d9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:36:31.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8985133767127991
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;bayang&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/bayang\">@<span class=\"\
          underline\">bayang</span></a></span>\n\n\t</span></span> it's a bit different,\
          \ it's using <code>transformers</code>' <code>from_pretrained</code> and\
          \ <code>save_pretrained</code> methods to take care of the sharding</p>\n"
        raw: '@bayang it''s a bit different, it''s using `transformers`'' `from_pretrained`
          and `save_pretrained` methods to take care of the sharding'
        updatedAt: '2023-11-28T09:36:31.755Z'
      numEdits: 0
      reactions: []
    id: 6565b49fe09d6576687ba1cf
    type: comment
  author: lysandre
  content: '@bayang it''s a bit different, it''s using `transformers`'' `from_pretrained`
    and `save_pretrained` methods to take care of the sharding'
  created_at: 2023-11-28 09:36:31+00:00
  edited: false
  hidden: false
  id: 6565b49fe09d6576687ba1cf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-11-28T09:37:02.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6985329389572144
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>The code is accessible, it''s here: <a href="https://huggingface.co/spaces/safetensors/convert/blob/main/convert.py">https://huggingface.co/spaces/safetensors/convert/blob/main/convert.py</a></p>

          '
        raw: 'The code is accessible, it''s here: https://huggingface.co/spaces/safetensors/convert/blob/main/convert.py'
        updatedAt: '2023-11-28T09:37:02.081Z'
      numEdits: 0
      reactions: []
    id: 6565b4beac2c4c576b0afdb5
    type: comment
  author: lysandre
  content: 'The code is accessible, it''s here: https://huggingface.co/spaces/safetensors/convert/blob/main/convert.py'
  created_at: 2023-11-28 09:37:02+00:00
  edited: false
  hidden: false
  id: 6565b4beac2c4c576b0afdb5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-11-28T09:40:12.000Z'
    data:
      edited: false
      editors:
      - bayang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9558134078979492
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
          fullname: BaYang
          isHf: false
          isPro: false
          name: bayang
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lysandre\">@<span class=\"\
          underline\">lysandre</span></a></span>\n\n\t</span></span> Oh I see, the\
          \ space has also the code.<br>thanks.</p>\n"
        raw: '@lysandre Oh I see, the space has also the code.

          thanks.'
        updatedAt: '2023-11-28T09:40:12.532Z'
      numEdits: 0
      reactions: []
    id: 6565b57c09cb86d8f40a4b62
    type: comment
  author: bayang
  content: '@lysandre Oh I see, the space has also the code.

    thanks.'
  created_at: 2023-11-28 09:40:12+00:00
  edited: false
  hidden: false
  id: 6565b57c09cb86d8f40a4b62
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-12-09T04:07:01.000Z'
    data:
      edited: false
      editors:
      - bayang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6601904630661011
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
          fullname: BaYang
          isHf: false
          isPro: false
          name: bayang
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lysandre\">@<span class=\"\
          underline\">lysandre</span></a></span>\n\n\t</span></span> How can I merge\
          \ both safetensors files, because I'm using this quantization <a rel=\"\
          nofollow\" href=\"https://github.com/huggingface/candle/tree/main/candle-examples/examples/quantized-t5\"\
          >technique</a> from Huggingface Candle? and it loads from one file.</p>\n\
          <p><code>$ cargo run --example tensor-tools --release -- quantize --quantization\
          \ q6k PATH/TO/T5/model.safetensors /tmp/model.gguf</code></p>\n"
        raw: '@lysandre How can I merge both safetensors files, because I''m using
          this quantization [technique](https://github.com/huggingface/candle/tree/main/candle-examples/examples/quantized-t5)
          from Huggingface Candle? and it loads from one file.


          `$ cargo run --example tensor-tools --release -- quantize --quantization
          q6k PATH/TO/T5/model.safetensors /tmp/model.gguf`'
        updatedAt: '2023-12-09T04:07:01.487Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6573e7e533e5a4bf5b1def0f
    id: 6573e7e533e5a4bf5b1def0b
    type: comment
  author: bayang
  content: '@lysandre How can I merge both safetensors files, because I''m using this
    quantization [technique](https://github.com/huggingface/candle/tree/main/candle-examples/examples/quantized-t5)
    from Huggingface Candle? and it loads from one file.


    `$ cargo run --example tensor-tools --release -- quantize --quantization q6k PATH/TO/T5/model.safetensors
    /tmp/model.gguf`'
  created_at: 2023-12-09 04:07:01+00:00
  edited: false
  hidden: false
  id: 6573e7e533e5a4bf5b1def0b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/9c864114f616cf6ee9d76aee633b01c4.svg
      fullname: BaYang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bayang
      type: user
    createdAt: '2023-12-09T04:07:01.000Z'
    data:
      status: open
    id: 6573e7e533e5a4bf5b1def0f
    type: status-change
  author: bayang
  created_at: 2023-12-09 04:07:01+00:00
  id: 6573e7e533e5a4bf5b1def0f
  new_status: open
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 22
repo_id: google/flan-t5-xl
repo_type: model
status: open
target_branch: null
title: Add variant of flan-t5-xl, especially model.safetensors
