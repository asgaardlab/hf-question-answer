!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mahyar10
conflicting_files: null
created_at: 2023-01-14 19:22:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a6a8369adf1f4d791c9a6571d469a27a.svg
      fullname: Muhammad Mahyar Ali
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mahyar10
      type: user
    createdAt: '2023-01-14T19:22:57.000Z'
    data:
      edited: false
      editors:
      - mahyar10
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a6a8369adf1f4d791c9a6571d469a27a.svg
          fullname: Muhammad Mahyar Ali
          isHf: false
          isPro: false
          name: mahyar10
          type: user
        html: '<pre><code># pip install accelerate

          import torch

          from transformers import T5Tokenizer, T5ForConditionalGeneration


          tokenizer = T5Tokenizer.from_pretrained("google/flan-t5-xl")

          model = T5ForConditionalGeneration.from_pretrained("google/flan-t5-xl",
          device_map="auto", torch_dtype=torch.float16)


          input_text = "translate English to German: How old are you?"

          input_ids = tokenizer(input_text, return_tensors="pt").input_ids.to("cuda")


          outputs = model.generate(input_ids)

          print(tokenizer.decode(outputs[0]))

          </code></pre>

          <p>raises this error:</p>

          <p><code> OSError: google/flan-t5-xl does not appear to have a file named
          pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.</code></p>

          <p>Works fine for the small model.</p>

          '
        raw: "```\r\n# pip install accelerate\r\nimport torch\r\nfrom transformers\
          \ import T5Tokenizer, T5ForConditionalGeneration\r\n\r\ntokenizer = T5Tokenizer.from_pretrained(\"\
          google/flan-t5-xl\")\r\nmodel = T5ForConditionalGeneration.from_pretrained(\"\
          google/flan-t5-xl\", device_map=\"auto\", torch_dtype=torch.float16)\r\n\
          \r\ninput_text = \"translate English to German: How old are you?\"\r\ninput_ids\
          \ = tokenizer(input_text, return_tensors=\"pt\").input_ids.to(\"cuda\")\r\
          \n\r\noutputs = model.generate(input_ids)\r\nprint(tokenizer.decode(outputs[0]))\r\
          \n```\r\n\r\nraises this error:\r\n\r\n```\r\nOSError: google/flan-t5-xl\
          \ does not appear to have a file named pytorch_model.bin, tf_model.h5, model.ckpt\
          \ or flax_model.msgpack.```\r\n\r\nWorks fine for the small model."
        updatedAt: '2023-01-14T19:22:57.248Z'
      numEdits: 0
      reactions: []
    id: 63c301116e6561b339dd2097
    type: comment
  author: mahyar10
  content: "```\r\n# pip install accelerate\r\nimport torch\r\nfrom transformers import\
    \ T5Tokenizer, T5ForConditionalGeneration\r\n\r\ntokenizer = T5Tokenizer.from_pretrained(\"\
    google/flan-t5-xl\")\r\nmodel = T5ForConditionalGeneration.from_pretrained(\"\
    google/flan-t5-xl\", device_map=\"auto\", torch_dtype=torch.float16)\r\n\r\ninput_text\
    \ = \"translate English to German: How old are you?\"\r\ninput_ids = tokenizer(input_text,\
    \ return_tensors=\"pt\").input_ids.to(\"cuda\")\r\n\r\noutputs = model.generate(input_ids)\r\
    \nprint(tokenizer.decode(outputs[0]))\r\n```\r\n\r\nraises this error:\r\n\r\n\
    ```\r\nOSError: google/flan-t5-xl does not appear to have a file named pytorch_model.bin,\
    \ tf_model.h5, model.ckpt or flax_model.msgpack.```\r\n\r\nWorks fine for the\
    \ small model."
  created_at: 2023-01-14 19:22:57+00:00
  edited: false
  hidden: false
  id: 63c301116e6561b339dd2097
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2023-01-15T09:25:17.000Z'
    data:
      edited: false
      editors:
      - ybelkada
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
          fullname: Younes Belkada
          isHf: true
          isPro: false
          name: ybelkada
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;mahyar10&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/mahyar10\"\
          >@<span class=\"underline\">mahyar10</span></a></span>\n\n\t</span></span><br>What\
          \ is your <code>transformers</code> version? I suspect you are using a previous\
          \ version that does not support model sharding</p>\n"
        raw: "Hi @mahyar10 \nWhat is your `transformers` version? I suspect you are\
          \ using a previous version that does not support model sharding"
        updatedAt: '2023-01-15T09:25:17.173Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - mahyar10
    id: 63c3c67d8648527299225a65
    type: comment
  author: ybelkada
  content: "Hi @mahyar10 \nWhat is your `transformers` version? I suspect you are\
    \ using a previous version that does not support model sharding"
  created_at: 2023-01-15 09:25:17+00:00
  edited: false
  hidden: false
  id: 63c3c67d8648527299225a65
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a6a8369adf1f4d791c9a6571d469a27a.svg
      fullname: Muhammad Mahyar Ali
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mahyar10
      type: user
    createdAt: '2023-01-15T13:32:06.000Z'
    data:
      edited: false
      editors:
      - mahyar10
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a6a8369adf1f4d791c9a6571d469a27a.svg
          fullname: Muhammad Mahyar Ali
          isHf: false
          isPro: false
          name: mahyar10
          type: user
        html: '<p>My version was <code>4.16.2</code> but after upgrading to <code>4.25.1</code>,
          it works fine. Thanks!</p>

          '
        raw: My version was `4.16.2` but after upgrading to `4.25.1`, it works fine.
          Thanks!
        updatedAt: '2023-01-15T13:32:06.140Z'
      numEdits: 0
      reactions: []
      relatedEventId: 63c400566e793fba08788f19
    id: 63c400566e793fba08788f18
    type: comment
  author: mahyar10
  content: My version was `4.16.2` but after upgrading to `4.25.1`, it works fine.
    Thanks!
  created_at: 2023-01-15 13:32:06+00:00
  edited: false
  hidden: false
  id: 63c400566e793fba08788f18
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/a6a8369adf1f4d791c9a6571d469a27a.svg
      fullname: Muhammad Mahyar Ali
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mahyar10
      type: user
    createdAt: '2023-01-15T13:32:06.000Z'
    data:
      status: closed
    id: 63c400566e793fba08788f19
    type: status-change
  author: mahyar10
  created_at: 2023-01-15 13:32:06+00:00
  id: 63c400566e793fba08788f19
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 8
repo_id: google/flan-t5-xl
repo_type: model
status: closed
target_branch: null
title: Error while loading the xl model.
