!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mistamichal
conflicting_files: null
created_at: 2023-12-16 11:37:41+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/-4LCh5QJxcRzNw5JfLSzh.jpeg?w=200&h=200&f=face
      fullname: Michael Tokarski
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mistamichal
      type: user
    createdAt: '2023-12-16T11:37:41.000Z'
    data:
      edited: false
      editors:
      - mistamichal
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5732100009918213
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/-4LCh5QJxcRzNw5JfLSzh.jpeg?w=200&h=200&f=face
          fullname: Michael Tokarski
          isHf: false
          isPro: false
          name: mistamichal
          type: user
        html: '<p>I''m having a problem here.</p>

          <p>I can download the model just fine but I can''t optimise it. If I use
          the Stable diffusion option, it just gives me an assertion error straight
          away. If I use the Stable diffusion XL (which is the one I think I''m supposed
          to use), it starts optimising then, after a few minutes, quits with an assertion
          error.</p>

          <p>Am I doing something wrong?</p>

          <p>RuntimeError: mat1 and mat2 shapes cannot be multiplied (2x2304 and 2816x1280)<br>[2023-12-16
          22:24:13,938] [WARNING] [engine.py:912:_run_passes] Skipping evaluation
          as model was pruned<br>[2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]
          Output all 0 models<br>[2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]
          Run history for gpu-dml:<br>[2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]
          Please install tabulate for better run history output<br>[2023-12-16 22:24:13,941]
          [INFO] [engine.py:372:run] No packaging config provided, skip packaging
          artifacts<br>*** Error completing request<br>*** Arguments: ('''', '''',
          ''vae'', ''stable-diffusion-v1-5'', ''stable-diffusion-v1-5'', ''stabilityai/sdxl-turbo'',
          '''', ''vae'', ''sdxl-turbo'', ''sdxl-turbo'', True, True, True, True, True,
          True, True, True, True, True, ''euler'', True, 512, False, '''', '''', '''')
          {}<br>    Traceback (most recent call last):<br>      File "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\call_queue.py",
          line 57, in f<br>        res = list(func(*args, **kwargs))<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\call_queue.py",
          line 36, in f<br>        res = func(*args, **kwargs)<br>      File "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\ui.py",
          line 2117, in optimize<br>        return optimize_sdxl_from_onnx(<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\sd_olive_ui.py",
          line 285, in optimize_sdxl_from_onnx<br>        optimize(<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\sd_olive_ui.py",
          line 363, in optimize<br>        assert conversion_footprint and optimizer_footprint<br>    AssertionError</p>

          '
        raw: "I'm having a problem here.\r\n\r\nI can download the model just fine\
          \ but I can't optimise it. If I use the Stable diffusion option, it just\
          \ gives me an assertion error straight away. If I use the Stable diffusion\
          \ XL (which is the one I think I'm supposed to use), it starts optimising\
          \ then, after a few minutes, quits with an assertion error.\r\n\r\nAm I\
          \ doing something wrong?\r\n\r\nRuntimeError: mat1 and mat2 shapes cannot\
          \ be multiplied (2x2304 and 2816x1280)\r\n[2023-12-16 22:24:13,938] [WARNING]\
          \ [engine.py:912:_run_passes] Skipping evaluation as model was pruned\r\n\
          [2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]\
          \ Output all 0 models\r\n[2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]\
          \ Run history for gpu-dml:\r\n[2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]\
          \ Please install tabulate for better run history output\r\n[2023-12-16 22:24:13,941]\
          \ [INFO] [engine.py:372:run] No packaging config provided, skip packaging\
          \ artifacts\r\n*** Error completing request\r\n*** Arguments: ('', '', 'vae',\
          \ 'stable-diffusion-v1-5', 'stable-diffusion-v1-5', 'stabilityai/sdxl-turbo',\
          \ '', 'vae', 'sdxl-turbo', 'sdxl-turbo', True, True, True, True, True, True,\
          \ True, True, True, True, 'euler', True, 512, False, '', '', '') {}\r\n\
          \    Traceback (most recent call last):\r\n      File \"C:\\Users\\******\\\
          sd-local\\stable-diffusion-webui-directml\\modules\\call_queue.py\", line\
          \ 57, in f\r\n        res = list(func(*args, **kwargs))\r\n      File \"\
          C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\modules\\\
          call_queue.py\", line 36, in f\r\n        res = func(*args, **kwargs)\r\n\
          \      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\ui.py\", line 2117, in optimize\r\n        return optimize_sdxl_from_onnx(\r\
          \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\sd_olive_ui.py\", line 285, in optimize_sdxl_from_onnx\r\n    \
          \    optimize(\r\n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\sd_olive_ui.py\", line 363, in optimize\r\n        assert conversion_footprint\
          \ and optimizer_footprint\r\n    AssertionError\r\n"
        updatedAt: '2023-12-16T11:37:41.044Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - codetrasher
    id: 657d8c05365456e36201d758
    type: comment
  author: mistamichal
  content: "I'm having a problem here.\r\n\r\nI can download the model just fine but\
    \ I can't optimise it. If I use the Stable diffusion option, it just gives me\
    \ an assertion error straight away. If I use the Stable diffusion XL (which is\
    \ the one I think I'm supposed to use), it starts optimising then, after a few\
    \ minutes, quits with an assertion error.\r\n\r\nAm I doing something wrong?\r\
    \n\r\nRuntimeError: mat1 and mat2 shapes cannot be multiplied (2x2304 and 2816x1280)\r\
    \n[2023-12-16 22:24:13,938] [WARNING] [engine.py:912:_run_passes] Skipping evaluation\
    \ as model was pruned\r\n[2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]\
    \ Output all 0 models\r\n[2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]\
    \ Run history for gpu-dml:\r\n[2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]\
    \ Please install tabulate for better run history output\r\n[2023-12-16 22:24:13,941]\
    \ [INFO] [engine.py:372:run] No packaging config provided, skip packaging artifacts\r\
    \n*** Error completing request\r\n*** Arguments: ('', '', 'vae', 'stable-diffusion-v1-5',\
    \ 'stable-diffusion-v1-5', 'stabilityai/sdxl-turbo', '', 'vae', 'sdxl-turbo',\
    \ 'sdxl-turbo', True, True, True, True, True, True, True, True, True, True, 'euler',\
    \ True, 512, False, '', '', '') {}\r\n    Traceback (most recent call last):\r\
    \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\call_queue.py\", line 57, in f\r\n        res = list(func(*args, **kwargs))\r\
    \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\call_queue.py\", line 36, in f\r\n        res = func(*args, **kwargs)\r\
    \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\ui.py\", line 2117, in optimize\r\n        return optimize_sdxl_from_onnx(\r\
    \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\sd_olive_ui.py\", line 285, in optimize_sdxl_from_onnx\r\n        optimize(\r\
    \n      File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\sd_olive_ui.py\", line 363, in optimize\r\n        assert conversion_footprint\
    \ and optimizer_footprint\r\n    AssertionError\r\n"
  created_at: 2023-12-16 11:37:41+00:00
  edited: false
  hidden: false
  id: 657d8c05365456e36201d758
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e5adbf3a41a4e6822644d1afb449b073.svg
      fullname: Jose Kortelahti
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: codetrasher
      type: user
    createdAt: '2023-12-19T19:43:13.000Z'
    data:
      edited: false
      editors:
      - codetrasher
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5949925184249878
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e5adbf3a41a4e6822644d1afb449b073.svg
          fullname: Jose Kortelahti
          isHf: false
          isPro: false
          name: codetrasher
          type: user
        html: '<blockquote>

          <p>I''m having a problem here.</p>

          <p>I can download the model just fine but I can''t optimise it. If I use
          the Stable diffusion option, it just gives me an assertion error straight
          away. If I use the Stable diffusion XL (which is the one I think I''m supposed
          to use), it starts optimising then, after a few minutes, quits with an assertion
          error.</p>

          <p>Am I doing something wrong?</p>

          <p>RuntimeError: mat1 and mat2 shapes cannot be multiplied (2x2304 and 2816x1280)<br>[2023-12-16
          22:24:13,938] [WARNING] [engine.py:912:_run_passes] Skipping evaluation
          as model was pruned<br>[2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]
          Output all 0 models<br>[2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]
          Run history for gpu-dml:<br>[2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]
          Please install tabulate for better run history output<br>[2023-12-16 22:24:13,941]
          [INFO] [engine.py:372:run] No packaging config provided, skip packaging
          artifacts<br>*** Error completing request<br>*** Arguments: ('''', '''',
          ''vae'', ''stable-diffusion-v1-5'', ''stable-diffusion-v1-5'', ''stabilityai/sdxl-turbo'',
          '''', ''vae'', ''sdxl-turbo'', ''sdxl-turbo'', True, True, True, True, True,
          True, True, True, True, True, ''euler'', True, 512, False, '''', '''', '''')
          {}<br>    Traceback (most recent call last):<br>      File "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\call_queue.py",
          line 57, in f<br>        res = list(func(*args, **kwargs))<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\call_queue.py",
          line 36, in f<br>        res = func(*args, **kwargs)<br>      File "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\ui.py",
          line 2117, in optimize<br>        return optimize_sdxl_from_onnx(<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\sd_olive_ui.py",
          line 285, in optimize_sdxl_from_onnx<br>        optimize(<br>      File
          "C:\Users******\sd-local\stable-diffusion-webui-directml\modules\sd_olive_ui.py",
          line 363, in optimize<br>        assert conversion_footprint and optimizer_footprint<br>    AssertionError</p>

          </blockquote>

          <p>Having this exact same issue and I haven''t managed to solve it yet.</p>

          '
        raw: "> I'm having a problem here.\n> \n> I can download the model just fine\
          \ but I can't optimise it. If I use the Stable diffusion option, it just\
          \ gives me an assertion error straight away. If I use the Stable diffusion\
          \ XL (which is the one I think I'm supposed to use), it starts optimising\
          \ then, after a few minutes, quits with an assertion error.\n> \n> Am I\
          \ doing something wrong?\n> \n> RuntimeError: mat1 and mat2 shapes cannot\
          \ be multiplied (2x2304 and 2816x1280)\n> [2023-12-16 22:24:13,938] [WARNING]\
          \ [engine.py:912:_run_passes] Skipping evaluation as model was pruned\n\
          > [2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]\
          \ Output all 0 models\n> [2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]\
          \ Run history for gpu-dml:\n> [2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]\
          \ Please install tabulate for better run history output\n> [2023-12-16 22:24:13,941]\
          \ [INFO] [engine.py:372:run] No packaging config provided, skip packaging\
          \ artifacts\n> *** Error completing request\n> *** Arguments: ('', '', 'vae',\
          \ 'stable-diffusion-v1-5', 'stable-diffusion-v1-5', 'stabilityai/sdxl-turbo',\
          \ '', 'vae', 'sdxl-turbo', 'sdxl-turbo', True, True, True, True, True, True,\
          \ True, True, True, True, 'euler', True, 512, False, '', '', '') {}\n> \
          \    Traceback (most recent call last):\n>       File \"C:\\Users\\******\\\
          sd-local\\stable-diffusion-webui-directml\\modules\\call_queue.py\", line\
          \ 57, in f\n>         res = list(func(*args, **kwargs))\n>       File \"\
          C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\modules\\\
          call_queue.py\", line 36, in f\n>         res = func(*args, **kwargs)\n\
          >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\ui.py\", line 2117, in optimize\n>         return optimize_sdxl_from_onnx(\n\
          >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\sd_olive_ui.py\", line 285, in optimize_sdxl_from_onnx\n>     \
          \    optimize(\n>       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
          modules\\sd_olive_ui.py\", line 363, in optimize\n>         assert conversion_footprint\
          \ and optimizer_footprint\n>     AssertionError\n\nHaving this exact same\
          \ issue and I haven't managed to solve it yet."
        updatedAt: '2023-12-19T19:43:13.728Z'
      numEdits: 0
      reactions: []
    id: 6581f2517cec0a2080ba433c
    type: comment
  author: codetrasher
  content: "> I'm having a problem here.\n> \n> I can download the model just fine\
    \ but I can't optimise it. If I use the Stable diffusion option, it just gives\
    \ me an assertion error straight away. If I use the Stable diffusion XL (which\
    \ is the one I think I'm supposed to use), it starts optimising then, after a\
    \ few minutes, quits with an assertion error.\n> \n> Am I doing something wrong?\n\
    > \n> RuntimeError: mat1 and mat2 shapes cannot be multiplied (2x2304 and 2816x1280)\n\
    > [2023-12-16 22:24:13,938] [WARNING] [engine.py:912:_run_passes] Skipping evaluation\
    \ as model was pruned\n> [2023-12-16 22:24:13,939] [INFO] [engine.py:610:create_pareto_frontier_footprints]\
    \ Output all 0 models\n> [2023-12-16 22:24:13,940] [INFO] [engine.py:357:run]\
    \ Run history for gpu-dml:\n> [2023-12-16 22:24:13,940] [INFO] [engine.py:636:dump_run_history]\
    \ Please install tabulate for better run history output\n> [2023-12-16 22:24:13,941]\
    \ [INFO] [engine.py:372:run] No packaging config provided, skip packaging artifacts\n\
    > *** Error completing request\n> *** Arguments: ('', '', 'vae', 'stable-diffusion-v1-5',\
    \ 'stable-diffusion-v1-5', 'stabilityai/sdxl-turbo', '', 'vae', 'sdxl-turbo',\
    \ 'sdxl-turbo', True, True, True, True, True, True, True, True, True, True, 'euler',\
    \ True, 512, False, '', '', '') {}\n>     Traceback (most recent call last):\n\
    >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\call_queue.py\", line 57, in f\n>         res = list(func(*args, **kwargs))\n\
    >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\call_queue.py\", line 36, in f\n>         res = func(*args, **kwargs)\n\
    >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\ui.py\", line 2117, in optimize\n>         return optimize_sdxl_from_onnx(\n\
    >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\sd_olive_ui.py\", line 285, in optimize_sdxl_from_onnx\n>         optimize(\n\
    >       File \"C:\\Users\\******\\sd-local\\stable-diffusion-webui-directml\\\
    modules\\sd_olive_ui.py\", line 363, in optimize\n>         assert conversion_footprint\
    \ and optimizer_footprint\n>     AssertionError\n\nHaving this exact same issue\
    \ and I haven't managed to solve it yet."
  created_at: 2023-12-19 19:43:13+00:00
  edited: false
  hidden: false
  id: 6581f2517cec0a2080ba433c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a7a2fc4d9138f0460e23b8a632cb117a.svg
      fullname: "Markus R\xF6hst\xF6"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Dankoman
      type: user
    createdAt: '2024-01-11T12:32:01.000Z'
    data:
      edited: false
      editors:
      - Dankoman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8419780731201172
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a7a2fc4d9138f0460e23b8a632cb117a.svg
          fullname: "Markus R\xF6hst\xF6"
          isHf: false
          isPro: false
          name: Dankoman
          type: user
        html: '<p>I had this error, but there where actually another error before
          that when I scrolled back hinting at missing .json files in "stable-diffusion-webui-directml\models\OliveCache\stable-diffusion-v1-5"<br>after
          deleting the cache and restarting models are optimizing just fine.</p>

          '
        raw: 'I had this error, but there where actually another error before that
          when I scrolled back hinting at missing .json files in "stable-diffusion-webui-directml\models\OliveCache\stable-diffusion-v1-5"

          after deleting the cache and restarting models are optimizing just fine.'
        updatedAt: '2024-01-11T12:32:01.384Z'
      numEdits: 0
      reactions: []
    id: 659fdfc1b2ac16613548e9b2
    type: comment
  author: Dankoman
  content: 'I had this error, but there where actually another error before that when
    I scrolled back hinting at missing .json files in "stable-diffusion-webui-directml\models\OliveCache\stable-diffusion-v1-5"

    after deleting the cache and restarting models are optimizing just fine.'
  created_at: 2024-01-11 12:32:01+00:00
  edited: false
  hidden: false
  id: 659fdfc1b2ac16613548e9b2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0554e073e8b3a5f8beb4966d52c475b2.svg
      fullname: Shawn Camp
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: scampart
      type: user
    createdAt: '2024-01-11T15:41:47.000Z'
    data:
      edited: true
      editors:
      - scampart
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8782351613044739
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0554e073e8b3a5f8beb4966d52c475b2.svg
          fullname: Shawn Camp
          isHf: false
          isPro: false
          name: scampart
          type: user
        html: '<p>I updated to ONNYX/Olive and it works great, the only problem is
          that none of the face swapping extensions work, any ideas? When I run it,
          it doesnt even acknowlege that it is trying to faceswap.</p>

          '
        raw: 'I updated to ONNYX/Olive and it works great, the only problem is that
          none of the face swapping extensions work, any ideas? When I run it, it
          doesnt even acknowlege that it is trying to faceswap.

          '
        updatedAt: '2024-01-11T15:49:22.446Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F614"
        users:
        - scampart
    id: 65a00c3b628cd4ce2ff67c4c
    type: comment
  author: scampart
  content: 'I updated to ONNYX/Olive and it works great, the only problem is that
    none of the face swapping extensions work, any ideas? When I run it, it doesnt
    even acknowlege that it is trying to faceswap.

    '
  created_at: 2024-01-11 15:41:47+00:00
  edited: true
  hidden: false
  id: 65a00c3b628cd4ce2ff67c4c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 30
repo_id: stabilityai/sdxl-turbo
repo_type: model
status: open
target_branch: null
title: Problem optimising in Olive/ONNX/Automatic1111
