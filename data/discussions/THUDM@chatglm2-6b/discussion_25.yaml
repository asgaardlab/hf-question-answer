!!python/object:huggingface_hub.community.DiscussionWithDetails
author: charles2030
conflicting_files: null
created_at: 2023-06-28 07:13:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ae87d6d41ef3a6e4ae198eba3cfcca1a.svg
      fullname: wu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: charles2030
      type: user
    createdAt: '2023-06-28T08:13:29.000Z'
    data:
      edited: false
      editors:
      - charles2030
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.21965183317661285
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ae87d6d41ef3a6e4ae198eba3cfcca1a.svg
          fullname: wu
          isHf: false
          isPro: false
          name: charles2030
          type: user
        html: '<p>Traceback (most recent call last):<br>  File "/home/work/wuxuesong/ChatGLM2-6B/web_demo.py",
          line 6, in <br>    tokenizer = AutoTokenizer.from_pretrained("/home/work/wuxuesong/ChatGLM2-6B/chatglm2-6b",
          trust_remote_code=True)<br>                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/models/auto/tokenization_auto.py",
          line 678, in from_pretrained<br>    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,
          *inputs, **kwargs)<br>           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py",
          line 1825, in from_pretrained<br>    return cls._from_pretrained(<br>           ^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py",
          line 1988, in _from_pretrained<br>    tokenizer = cls(*init_inputs, **init_kwargs)<br>                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py",
          line 73, in <strong>init</strong><br>    self.tokenizer = SPTokenizer(vocab_file)<br>                     ^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py",
          line 14, in <strong>init</strong><br>    self.sp_model = SentencePieceProcessor(model_file=model_path)<br>                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/<strong>init</strong>.py",
          line 447, in Init<br>    self.Load(model_file=model_file, model_proto=model_proto)<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/<strong>init</strong>.py",
          line 905, in Load<br>    return self.LoadFromFile(model_file)<br>           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>  File
          "/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/<strong>init</strong>.py",
          line 310, in LoadFromFile<br>    return _sentencepiece.SentencePieceProcessor_LoadFromFile(self,
          arg)<br>           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^<br>RuntimeError:
          Internal: src/sentencepiece_processor.cc(1101) [model_proto-&gt;ParseFromArray(serialized.data(),
          serialized.size())] </p>

          '
        raw: "Traceback (most recent call last):\r\n  File \"/home/work/wuxuesong/ChatGLM2-6B/web_demo.py\"\
          , line 6, in <module>\r\n    tokenizer = AutoTokenizer.from_pretrained(\"\
          /home/work/wuxuesong/ChatGLM2-6B/chatglm2-6b\", trust_remote_code=True)\r\
          \n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
          \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/models/auto/tokenization_auto.py\"\
          , line 678, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,\
          \ *inputs, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
          \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py\"\
          , line 1825, in from_pretrained\r\n    return cls._from_pretrained(\r\n\
          \           ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py\"\
          , line 1988, in _from_pretrained\r\n    tokenizer = cls(*init_inputs, **init_kwargs)\r\
          \n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py\"\
          , line 73, in __init__\r\n    self.tokenizer = SPTokenizer(vocab_file)\r\
          \n                     ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py\"\
          , line 14, in __init__\r\n    self.sp_model = SentencePieceProcessor(model_file=model_path)\r\
          \n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n\
          \  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
          , line 447, in Init\r\n    self.Load(model_file=model_file, model_proto=model_proto)\r\
          \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
          , line 905, in Load\r\n    return self.LoadFromFile(model_file)\r\n    \
          \       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
          , line 310, in LoadFromFile\r\n    return _sentencepiece.SentencePieceProcessor_LoadFromFile(self,\
          \ arg)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
          \nRuntimeError: Internal: src/sentencepiece_processor.cc(1101) [model_proto->ParseFromArray(serialized.data(),\
          \ serialized.size())] "
        updatedAt: '2023-06-28T08:13:29.228Z'
      numEdits: 0
      reactions: []
    id: 649beba90431942ba8da75ba
    type: comment
  author: charles2030
  content: "Traceback (most recent call last):\r\n  File \"/home/work/wuxuesong/ChatGLM2-6B/web_demo.py\"\
    , line 6, in <module>\r\n    tokenizer = AutoTokenizer.from_pretrained(\"/home/work/wuxuesong/ChatGLM2-6B/chatglm2-6b\"\
    , trust_remote_code=True)\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
    \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/models/auto/tokenization_auto.py\"\
    , line 678, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,\
    \ *inputs, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
    \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py\"\
    , line 1825, in from_pretrained\r\n    return cls._from_pretrained(\r\n      \
    \     ^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/transformers/tokenization_utils_base.py\"\
    , line 1988, in _from_pretrained\r\n    tokenizer = cls(*init_inputs, **init_kwargs)\r\
    \n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py\"\
    , line 73, in __init__\r\n    self.tokenizer = SPTokenizer(vocab_file)\r\n   \
    \                  ^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/.cache/huggingface/modules/transformers_modules/chatglm2-6b/tokenization_chatglm.py\"\
    , line 14, in __init__\r\n    self.sp_model = SentencePieceProcessor(model_file=model_path)\r\
    \n                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File\
    \ \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
    , line 447, in Init\r\n    self.Load(model_file=model_file, model_proto=model_proto)\r\
    \n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
    , line 905, in Load\r\n    return self.LoadFromFile(model_file)\r\n          \
    \ ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/home/work/miniconda3/envs/speed/lib/python3.11/site-packages/sentencepiece/__init__.py\"\
    , line 310, in LoadFromFile\r\n    return _sentencepiece.SentencePieceProcessor_LoadFromFile(self,\
    \ arg)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\
    \nRuntimeError: Internal: src/sentencepiece_processor.cc(1101) [model_proto->ParseFromArray(serialized.data(),\
    \ serialized.size())] "
  created_at: 2023-06-28 07:13:29+00:00
  edited: false
  hidden: false
  id: 649beba90431942ba8da75ba
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661157784937-63033dc4e1e7f0e03a5e1a31.jpeg?w=200&h=200&f=face
      fullname: Zhengxiao Du
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: zxdu20
      type: user
    createdAt: '2023-06-29T02:00:37.000Z'
    data:
      edited: false
      editors:
      - zxdu20
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6662947535514832
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661157784937-63033dc4e1e7f0e03a5e1a31.jpeg?w=200&h=200&f=face
          fullname: Zhengxiao Du
          isHf: false
          isPro: false
          name: zxdu20
          type: user
        html: '<p>Please check the <code>tokenizer.model</code> file you downloaded
          is the same as <a href="https://huggingface.co/THUDM/chatglm2-6b/blob/main/tokenizer.model">https://huggingface.co/THUDM/chatglm2-6b/blob/main/tokenizer.model</a></p>

          '
        raw: Please check the `tokenizer.model` file you downloaded is the same as
          https://huggingface.co/THUDM/chatglm2-6b/blob/main/tokenizer.model
        updatedAt: '2023-06-29T02:00:37.901Z'
      numEdits: 0
      reactions: []
    id: 649ce5c5ff9e9056bee3dd0a
    type: comment
  author: zxdu20
  content: Please check the `tokenizer.model` file you downloaded is the same as https://huggingface.co/THUDM/chatglm2-6b/blob/main/tokenizer.model
  created_at: 2023-06-29 01:00:37+00:00
  edited: false
  hidden: false
  id: 649ce5c5ff9e9056bee3dd0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661157784937-63033dc4e1e7f0e03a5e1a31.jpeg?w=200&h=200&f=face
      fullname: Zhengxiao Du
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: zxdu20
      type: user
    createdAt: '2023-06-29T02:00:42.000Z'
    data:
      status: closed
    id: 649ce5ca5fc44f1b663a9b50
    type: status-change
  author: zxdu20
  created_at: 2023-06-29 01:00:42+00:00
  id: 649ce5ca5fc44f1b663a9b50
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 25
repo_id: THUDM/chatglm2-6b
repo_type: model
status: closed
target_branch: null
title: 'RuntimeError: Internal: src/sentencepiece_processor.cc(1101) [model_proto->ParseFromArray(serialized.data(),
  serialized.size())] '
