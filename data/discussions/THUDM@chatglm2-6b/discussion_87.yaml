!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mobbsen-aiq
conflicting_files: null
created_at: 2023-10-06 03:28:53+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
      fullname: Mobai Xuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mobbsen-aiq
      type: user
    createdAt: '2023-10-06T04:28:53.000Z'
    data:
      edited: false
      editors:
      - mobbsen-aiq
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5986356139183044
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
          fullname: Mobai Xuan
          isHf: false
          isPro: false
          name: mobbsen-aiq
          type: user
        html: "<pre><code>base_model = \"THUDM/chatglm2-6b\"\n---&gt; tokenizer =\
          \ AutoTokenizer.from_pretrained(base_model, trust_remote_code=True)\n</code></pre>\n\
          <pre><code>~/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\
          \ in vocab_size(self)\n    106     @property\n    107     def vocab_size(self):\n\
          --&gt; 108         return self.tokenizer.n_words\n    109 \n    110    \
          \ def get_vocab(self):\n\nAttributeError: 'ChatGLMTokenizer' object has\
          \ no attribute 'tokenizer'\n</code></pre>\n<p>This problem seem to only\
          \ appear today and was totally fine.<br>Much appreciation if someone could\
          \ verify the issue.<br>I'm on transformers-4.34.0</p>\n"
        raw: "```\r\nbase_model = \"THUDM/chatglm2-6b\"\r\n---> tokenizer = AutoTokenizer.from_pretrained(base_model,\
          \ trust_remote_code=True)\r\n```\r\n\r\n```\r\n~/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\
          \ in vocab_size(self)\r\n    106     @property\r\n    107     def vocab_size(self):\r\
          \n--> 108         return self.tokenizer.n_words\r\n    109 \r\n    110 \
          \    def get_vocab(self):\r\n\r\nAttributeError: 'ChatGLMTokenizer' object\
          \ has no attribute 'tokenizer'\r\n```\r\n\r\nThis problem seem to only appear\
          \ today and was totally fine.\r\nMuch appreciation if someone could verify\
          \ the issue.\r\nI'm on transformers-4.34.0"
        updatedAt: '2023-10-06T04:28:53.269Z'
      numEdits: 0
      reactions: []
    id: 651f8d050bb88efaed7c3689
    type: comment
  author: mobbsen-aiq
  content: "```\r\nbase_model = \"THUDM/chatglm2-6b\"\r\n---> tokenizer = AutoTokenizer.from_pretrained(base_model,\
    \ trust_remote_code=True)\r\n```\r\n\r\n```\r\n~/.cache/huggingface/modules/transformers_modules/THUDM/chatglm2-6b/8fd7fba285f7171d3ae7ea3b35c53b6340501ed1/tokenization_chatglm.py\
    \ in vocab_size(self)\r\n    106     @property\r\n    107     def vocab_size(self):\r\
    \n--> 108         return self.tokenizer.n_words\r\n    109 \r\n    110     def\
    \ get_vocab(self):\r\n\r\nAttributeError: 'ChatGLMTokenizer' object has no attribute\
    \ 'tokenizer'\r\n```\r\n\r\nThis problem seem to only appear today and was totally\
    \ fine.\r\nMuch appreciation if someone could verify the issue.\r\nI'm on transformers-4.34.0"
  created_at: 2023-10-06 03:28:53+00:00
  edited: false
  hidden: false
  id: 651f8d050bb88efaed7c3689
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
      fullname: Mobai Xuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mobbsen-aiq
      type: user
    createdAt: '2023-10-06T07:10:25.000Z'
    data:
      edited: false
      editors:
      - mobbsen-aiq
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9001697301864624
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
          fullname: Mobai Xuan
          isHf: false
          isPro: false
          name: mobbsen-aiq
          type: user
        html: '<p>Reverting to <code>transformers==4.33.0</code> resolved the problem.</p>

          '
        raw: Reverting to `transformers==4.33.0` resolved the problem.
        updatedAt: '2023-10-06T07:10:25.301Z'
      numEdits: 0
      reactions:
      - count: 11
        reaction: "\U0001F44D"
        users:
        - DangXueYun
        - Ray-6
        - yang2732
        - lizongran
        - quincy08
        - blanka
        - calebxhr
        - lrgao666
        - NickHai
        - 2niuhe
        - PeterLeeee
    id: 651fb2e1aa888068acce999b
    type: comment
  author: mobbsen-aiq
  content: Reverting to `transformers==4.33.0` resolved the problem.
  created_at: 2023-10-06 06:10:25+00:00
  edited: false
  hidden: false
  id: 651fb2e1aa888068acce999b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7297827bacb6bf2d3ad2994b46a7aa43.svg
      fullname: YanXingyu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: YanXingyu123
      type: user
    createdAt: '2023-10-07T03:01:50.000Z'
    data:
      edited: false
      editors:
      - YanXingyu123
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9674615859985352
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7297827bacb6bf2d3ad2994b46a7aa43.svg
          fullname: YanXingyu
          isHf: false
          isPro: false
          name: YanXingyu123
          type: user
        html: '<p>Loading checkpoint shards becomes very slow, do you encounter this
          issue?</p>

          '
        raw: Loading checkpoint shards becomes very slow, do you encounter this issue?
        updatedAt: '2023-10-07T03:01:50.142Z'
      numEdits: 0
      reactions: []
    id: 6520ca1eb0e0d57453dae8ca
    type: comment
  author: YanXingyu123
  content: Loading checkpoint shards becomes very slow, do you encounter this issue?
  created_at: 2023-10-07 02:01:50+00:00
  edited: false
  hidden: false
  id: 6520ca1eb0e0d57453dae8ca
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
      fullname: Mobai Xuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mobbsen-aiq
      type: user
    createdAt: '2023-10-09T21:47:34.000Z'
    data:
      edited: false
      editors:
      - mobbsen-aiq
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9729136228561401
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/134b9ee85359264e0a9b61a6ec68bba8.svg
          fullname: Mobai Xuan
          isHf: false
          isPro: false
          name: mobbsen-aiq
          type: user
        html: '<blockquote>

          <p>Loading checkpoint shards becomes very slow, do you encounter this issue?</p>

          </blockquote>

          <p>I''ve just started using this model for a week or so, not sure if it''s
          getting slower than before, but I do found it''s relatively slow when being
          loaded from Google Drive into a Colab Notebook.</p>

          '
        raw: '> Loading checkpoint shards becomes very slow, do you encounter this
          issue?


          I''ve just started using this model for a week or so, not sure if it''s
          getting slower than before, but I do found it''s relatively slow when being
          loaded from Google Drive into a Colab Notebook.'
        updatedAt: '2023-10-09T21:47:34.265Z'
      numEdits: 0
      reactions: []
    id: 652474f666ebe0519867abbd
    type: comment
  author: mobbsen-aiq
  content: '> Loading checkpoint shards becomes very slow, do you encounter this issue?


    I''ve just started using this model for a week or so, not sure if it''s getting
    slower than before, but I do found it''s relatively slow when being loaded from
    Google Drive into a Colab Notebook.'
  created_at: 2023-10-09 20:47:34+00:00
  edited: false
  hidden: false
  id: 652474f666ebe0519867abbd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1609892226127-noauth.jpeg?w=200&h=200&f=face
      fullname: Visual Joyce
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: visualjoyce
      type: user
    createdAt: '2023-10-11T10:01:30.000Z'
    data:
      edited: false
      editors:
      - visualjoyce
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9441897869110107
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1609892226127-noauth.jpeg?w=200&h=200&f=face
          fullname: Visual Joyce
          isHf: false
          isPro: false
          name: visualjoyce
          type: user
        html: '<p>This might because the code is not compatible with huggingface class
          and method defs.</p>

          '
        raw: This might because the code is not compatible with huggingface class
          and method defs.
        updatedAt: '2023-10-11T10:01:30.510Z'
      numEdits: 0
      reactions: []
    id: 6526727a6b123740f157e1c9
    type: comment
  author: visualjoyce
  content: This might because the code is not compatible with huggingface class and
    method defs.
  created_at: 2023-10-11 09:01:30+00:00
  edited: false
  hidden: false
  id: 6526727a6b123740f157e1c9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b2f2569f06bab4a0f0114f6fb6727571.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: DingQiang
      type: user
    createdAt: '2023-10-29T02:39:42.000Z'
    data:
      edited: false
      editors:
      - DingQiang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7697727084159851
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b2f2569f06bab4a0f0114f6fb6727571.svg
          fullname: Liu
          isHf: false
          isPro: false
          name: DingQiang
          type: user
        html: '<p>moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
          " before "super().init(" at "init" of class ChatGLMTokenizer can solve this
          issue.</p>

          '
        raw: moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
          " before "super().init(" at "init" of class ChatGLMTokenizer can solve this
          issue.
        updatedAt: '2023-10-29T02:39:42.205Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - PeterLeeee
      - count: 1
        reaction: "\U0001F44D"
        users:
        - PeterLeeee
    id: 653dc5eeaa1f487614d4f29f
    type: comment
  author: DingQiang
  content: moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
    " before "super().init(" at "init" of class ChatGLMTokenizer can solve this issue.
  created_at: 2023-10-29 01:39:42+00:00
  edited: false
  hidden: false
  id: 653dc5eeaa1f487614d4f29f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/48043944fad4fdc0f85eb8a3dc3cdb3e.svg
      fullname: Xiyang Chen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Pakase
      type: user
    createdAt: '2023-10-30T11:22:50.000Z'
    data:
      edited: false
      editors:
      - Pakase
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7807484269142151
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/48043944fad4fdc0f85eb8a3dc3cdb3e.svg
          fullname: Xiyang Chen
          isHf: false
          isPro: false
          name: Pakase
          type: user
        html: '<blockquote>

          <p>moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
          " before "super().init(" at "init" of class ChatGLMTokenizer can solve this
          issue.</p>

          </blockquote>

          <p>Emm, I can''t find this code in tokenization_chatglm.py</p>

          '
        raw: '> moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
          " before "super().init(" at "init" of class ChatGLMTokenizer can solve this
          issue.


          Emm, I can''t find this code in tokenization_chatglm.py'
        updatedAt: '2023-10-30T11:22:50.545Z'
      numEdits: 0
      reactions: []
    id: 653f920a8061bf4525f77968
    type: comment
  author: Pakase
  content: '> moving line "self.sp_tokenizer = SPTokenizer(vocab_file, num_image_tokens=num_image_tokens)
    " before "super().init(" at "init" of class ChatGLMTokenizer can solve this issue.


    Emm, I can''t find this code in tokenization_chatglm.py'
  created_at: 2023-10-30 10:22:50+00:00
  edited: false
  hidden: false
  id: 653f920a8061bf4525f77968
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 87
repo_id: THUDM/chatglm2-6b
repo_type: model
status: open
target_branch: null
title: 'AttributeError: ''ChatGLMTokenizer'' object has no attribute ''tokenizer'''
