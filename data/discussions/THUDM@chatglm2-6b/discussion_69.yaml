!!python/object:huggingface_hub.community.DiscussionWithDetails
author: lyy0905
conflicting_files: null
created_at: 2023-07-27 01:31:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ea84e1ce1e353fd9e9243eccdf6eb65d.svg
      fullname: Yiyuan Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lyy0905
      type: user
    createdAt: '2023-07-27T02:31:18.000Z'
    data:
      edited: false
      editors:
      - lyy0905
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9777396321296692
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ea84e1ce1e353fd9e9243eccdf6eb65d.svg
          fullname: Yiyuan Liu
          isHf: false
          isPro: false
          name: lyy0905
          type: user
        html: "<p>\u539F\u59CB\u6A21\u578B\u4ECEhf\u4E0B\u8F7D\u7684\uFF0C\u53EF\u4EE5\
          \u6B63\u5E38\u63A8\u7406\uFF0C\u4F46\u662F\u5FAE\u8C03\u540E\u7684\u6A21\
          \u578B\u63A8\u7406\u4F1A\u62A5\u9519\uFF0C\u4F3C\u4E4E\u662Ftokenizer\u7684\
          \u95EE\u9898\u3002\u4F46\u662F\u6211\u4F7F\u7528\u7684tokenizer.model, tokenizer_config.json,\u8FD8\
          \u6709py\u6587\u4EF6\u90FD\u662F\u8DDF\u539F\u59CB\u6A21\u578B\u76F8\u540C\
          \u7684\u3002\u8FD9\u4E2A\u53EF\u80FD\u662F\u4EC0\u4E48\u95EE\u9898\uFF1F\
          </p>\n"
        raw: "\u539F\u59CB\u6A21\u578B\u4ECEhf\u4E0B\u8F7D\u7684\uFF0C\u53EF\u4EE5\
          \u6B63\u5E38\u63A8\u7406\uFF0C\u4F46\u662F\u5FAE\u8C03\u540E\u7684\u6A21\
          \u578B\u63A8\u7406\u4F1A\u62A5\u9519\uFF0C\u4F3C\u4E4E\u662Ftokenizer\u7684\
          \u95EE\u9898\u3002\u4F46\u662F\u6211\u4F7F\u7528\u7684tokenizer.model, tokenizer_config.json,\u8FD8\
          \u6709py\u6587\u4EF6\u90FD\u662F\u8DDF\u539F\u59CB\u6A21\u578B\u76F8\u540C\
          \u7684\u3002\u8FD9\u4E2A\u53EF\u80FD\u662F\u4EC0\u4E48\u95EE\u9898\uFF1F"
        updatedAt: '2023-07-27T02:31:18.469Z'
      numEdits: 0
      reactions: []
    id: 64c1d6f6a3d4c23e0e925b11
    type: comment
  author: lyy0905
  content: "\u539F\u59CB\u6A21\u578B\u4ECEhf\u4E0B\u8F7D\u7684\uFF0C\u53EF\u4EE5\u6B63\
    \u5E38\u63A8\u7406\uFF0C\u4F46\u662F\u5FAE\u8C03\u540E\u7684\u6A21\u578B\u63A8\
    \u7406\u4F1A\u62A5\u9519\uFF0C\u4F3C\u4E4E\u662Ftokenizer\u7684\u95EE\u9898\u3002\
    \u4F46\u662F\u6211\u4F7F\u7528\u7684tokenizer.model, tokenizer_config.json,\u8FD8\
    \u6709py\u6587\u4EF6\u90FD\u662F\u8DDF\u539F\u59CB\u6A21\u578B\u76F8\u540C\u7684\
    \u3002\u8FD9\u4E2A\u53EF\u80FD\u662F\u4EC0\u4E48\u95EE\u9898\uFF1F"
  created_at: 2023-07-27 01:31:18+00:00
  edited: false
  hidden: false
  id: 64c1d6f6a3d4c23e0e925b11
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/83fd7d885f0fcc500a0067af5eafadf6.svg
      fullname: BuxianChen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Buxian
      type: user
    createdAt: '2023-07-28T12:24:33.000Z'
    data:
      edited: true
      editors:
      - Buxian
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.2501939535140991
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/83fd7d885f0fcc500a0067af5eafadf6.svg
          fullname: BuxianChen
          isHf: false
          isPro: false
          name: Buxian
          type: user
        html: "<p>\u611F\u89C9\u662F\u8FD9\u6BB5\u4EE3\u7801\u6709\u95EE\u9898\uFF0C\
          \u53EF\u80FD\u9700\u8981\u5B98\u65B9\u89E3\u51B3\u4E00\u4E0B\uFF0C\u6700\
          \u540E\u7684\u5168\u8FDE\u63A5\u5C42\u7684\u8F93\u51FA\u7EF4\u6570\u5927\
          \u4E8E\u8BCD\u8868\u957F\u5EA6\uFF0C\u5982\u679C\u751F\u6210\u4E86\u8D85\
          \u51FA\u8FD9\u4E2A\u8303\u56F4\u7684token\u5E94\u8BE5\u5904\u7406\u6210\
          \  \u6216\u8005\u7A7A\u5B57\u7B26\u4E4B\u7C7B\u7684</p>\n<pre><code class=\"\
          language-python\"><span class=\"hljs-comment\"># tokenization_chatglm.py:\
          \ SPTokenizer</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"\
          hljs-title function_\">convert_id_to_token</span>(<span class=\"hljs-params\"\
          >self, index</span>):\n        <span class=\"hljs-string\">\"\"\"Converts\
          \ an index (integer) in a token (str) using the vocab.\"\"\"</span>\n  \
          \      <span class=\"hljs-keyword\">if</span> index <span class=\"hljs-keyword\"\
          >in</span> self.index_special_tokens <span class=\"hljs-keyword\">or</span>\
          \ index <span class=\"hljs-keyword\">in</span> [self.eos_id, self.bos_id,\
          \ self.pad_id] <span class=\"hljs-keyword\">or</span> index &lt; <span class=\"\
          hljs-number\">0</span>:\n            <span class=\"hljs-keyword\">return</span>\
          \ <span class=\"hljs-string\">\"\"</span>\n        <span class=\"hljs-keyword\"\
          >return</span> self.sp_model.IdToPiece(index)\n</code></pre>\n"
        raw: "\u611F\u89C9\u662F\u8FD9\u6BB5\u4EE3\u7801\u6709\u95EE\u9898\uFF0C\u53EF\
          \u80FD\u9700\u8981\u5B98\u65B9\u89E3\u51B3\u4E00\u4E0B\uFF0C\u6700\u540E\
          \u7684\u5168\u8FDE\u63A5\u5C42\u7684\u8F93\u51FA\u7EF4\u6570\u5927\u4E8E\
          \u8BCD\u8868\u957F\u5EA6\uFF0C\u5982\u679C\u751F\u6210\u4E86\u8D85\u51FA\
          \u8FD9\u4E2A\u8303\u56F4\u7684token\u5E94\u8BE5\u5904\u7406\u6210 <unk>\
          \ \u6216\u8005\u7A7A\u5B57\u7B26\u4E4B\u7C7B\u7684\n```python\n# tokenization_chatglm.py:\
          \ SPTokenizer\ndef convert_id_to_token(self, index):\n        \"\"\"Converts\
          \ an index (integer) in a token (str) using the vocab.\"\"\"\n        if\
          \ index in self.index_special_tokens or index in [self.eos_id, self.bos_id,\
          \ self.pad_id] or index < 0:\n            return \"\"\n        return self.sp_model.IdToPiece(index)\n\
          ```"
        updatedAt: '2023-07-28T12:26:38.111Z'
      numEdits: 1
      reactions: []
    id: 64c3b3811d44fc06afb02a49
    type: comment
  author: Buxian
  content: "\u611F\u89C9\u662F\u8FD9\u6BB5\u4EE3\u7801\u6709\u95EE\u9898\uFF0C\u53EF\
    \u80FD\u9700\u8981\u5B98\u65B9\u89E3\u51B3\u4E00\u4E0B\uFF0C\u6700\u540E\u7684\
    \u5168\u8FDE\u63A5\u5C42\u7684\u8F93\u51FA\u7EF4\u6570\u5927\u4E8E\u8BCD\u8868\
    \u957F\u5EA6\uFF0C\u5982\u679C\u751F\u6210\u4E86\u8D85\u51FA\u8FD9\u4E2A\u8303\
    \u56F4\u7684token\u5E94\u8BE5\u5904\u7406\u6210 <unk> \u6216\u8005\u7A7A\u5B57\
    \u7B26\u4E4B\u7C7B\u7684\n```python\n# tokenization_chatglm.py: SPTokenizer\n\
    def convert_id_to_token(self, index):\n        \"\"\"Converts an index (integer)\
    \ in a token (str) using the vocab.\"\"\"\n        if index in self.index_special_tokens\
    \ or index in [self.eos_id, self.bos_id, self.pad_id] or index < 0:\n        \
    \    return \"\"\n        return self.sp_model.IdToPiece(index)\n```"
  created_at: 2023-07-28 11:24:33+00:00
  edited: true
  hidden: false
  id: 64c3b3811d44fc06afb02a49
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ea84e1ce1e353fd9e9243eccdf6eb65d.svg
      fullname: Yiyuan Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lyy0905
      type: user
    createdAt: '2023-07-31T06:58:10.000Z'
    data:
      edited: false
      editors:
      - lyy0905
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9434007406234741
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ea84e1ce1e353fd9e9243eccdf6eb65d.svg
          fullname: Yiyuan Liu
          isHf: false
          isPro: false
          name: lyy0905
          type: user
        html: "<p>\u6709\u53EF\u80FD\u662F\u5168\u53C2\u6570\u5FAE\u8C03\u7684\u5BFC\
          \u51FA\u6709\u95EE\u9898\uFF0C\u6211\u8BD5\u4E86lora\u5FAE\u8C03\uFF0C\u7528\
          \u539F\u59CB\u6A21\u578B+adapter\u505A\u63A8\u7406\u662F\u6CA1\u95EE\u9898\
          \u7684\uFF0C\u4F46\u662F\u5168\u53C2\u6570\u5FAE\u8C03\u5B8C\u5C31\u4F1A\
          \u62A5\u8FD9\u4E2A\u9519</p>\n"
        raw: "\u6709\u53EF\u80FD\u662F\u5168\u53C2\u6570\u5FAE\u8C03\u7684\u5BFC\u51FA\
          \u6709\u95EE\u9898\uFF0C\u6211\u8BD5\u4E86lora\u5FAE\u8C03\uFF0C\u7528\u539F\
          \u59CB\u6A21\u578B+adapter\u505A\u63A8\u7406\u662F\u6CA1\u95EE\u9898\u7684\
          \uFF0C\u4F46\u662F\u5168\u53C2\u6570\u5FAE\u8C03\u5B8C\u5C31\u4F1A\u62A5\
          \u8FD9\u4E2A\u9519"
        updatedAt: '2023-07-31T06:58:10.567Z'
      numEdits: 0
      reactions: []
    id: 64c75b82aedc4337783e1b6c
    type: comment
  author: lyy0905
  content: "\u6709\u53EF\u80FD\u662F\u5168\u53C2\u6570\u5FAE\u8C03\u7684\u5BFC\u51FA\
    \u6709\u95EE\u9898\uFF0C\u6211\u8BD5\u4E86lora\u5FAE\u8C03\uFF0C\u7528\u539F\u59CB\
    \u6A21\u578B+adapter\u505A\u63A8\u7406\u662F\u6CA1\u95EE\u9898\u7684\uFF0C\u4F46\
    \u662F\u5168\u53C2\u6570\u5FAE\u8C03\u5B8C\u5C31\u4F1A\u62A5\u8FD9\u4E2A\u9519"
  created_at: 2023-07-31 05:58:10+00:00
  edited: false
  hidden: false
  id: 64c75b82aedc4337783e1b6c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0caae8dcdd2148469ddbcf76a213cfd1.svg
      fullname: Yang Guang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: NTUYG
      type: user
    createdAt: '2023-08-29T05:42:01.000Z'
    data:
      edited: false
      editors:
      - NTUYG
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9975402355194092
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0caae8dcdd2148469ddbcf76a213cfd1.svg
          fullname: Yang Guang
          isHf: false
          isPro: false
          name: NTUYG
          type: user
        html: "<p>\u6211\u4E5F\u9047\u5230\u4E86\u3002\u3002</p>\n"
        raw: "\u6211\u4E5F\u9047\u5230\u4E86\u3002\u3002"
        updatedAt: '2023-08-29T05:42:01.113Z'
      numEdits: 0
      reactions: []
    id: 64ed85295755726cccaf0581
    type: comment
  author: NTUYG
  content: "\u6211\u4E5F\u9047\u5230\u4E86\u3002\u3002"
  created_at: 2023-08-29 04:42:01+00:00
  edited: false
  hidden: false
  id: 64ed85295755726cccaf0581
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c116fef9348573ff37f8ab662504ee7d.svg
      fullname: "\u83DC\u76C6"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: yecphaha
      type: user
    createdAt: '2023-11-21T09:45:17.000Z'
    data:
      edited: false
      editors:
      - yecphaha
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.15955500304698944
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c116fef9348573ff37f8ab662504ee7d.svg
          fullname: "\u83DC\u76C6"
          isHf: false
          isPro: false
          name: yecphaha
          type: user
        html: "<p>\u53C2\u8003 <a href=\"https://huggingface.co/THUDM/chatglm3-6b/commit/ea563876364622a0a5c24e6b71db0b93a9861ba0#d2h-069285\"\
          >https://huggingface.co/THUDM/chatglm3-6b/commit/ea563876364622a0a5c24e6b71db0b93a9861ba0#d2h-069285</a><br>\u5728\
          \ tokenization_chatglm.py \u91CC\u65B0\u589E\u4E24\u884C\u4EE3\u7801</p>\n\
          <p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/60583a54634ef353276aebce/jbPgiZ9bTdi2MtpxlUaCn.png\"\
          ><img alt=\"Snipaste_2023-11-21_17-42-58.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/60583a54634ef353276aebce/jbPgiZ9bTdi2MtpxlUaCn.png\"\
          ></a></p>\n"
        raw: "\u53C2\u8003 https://huggingface.co/THUDM/chatglm3-6b/commit/ea563876364622a0a5c24e6b71db0b93a9861ba0#d2h-069285\n\
          \u5728 tokenization_chatglm.py \u91CC\u65B0\u589E\u4E24\u884C\u4EE3\u7801\
          \n\n![Snipaste_2023-11-21_17-42-58.png](https://cdn-uploads.huggingface.co/production/uploads/60583a54634ef353276aebce/jbPgiZ9bTdi2MtpxlUaCn.png)\n"
        updatedAt: '2023-11-21T09:45:17.528Z'
      numEdits: 0
      reactions: []
    id: 655c7c2d553b5a1265c58ca6
    type: comment
  author: yecphaha
  content: "\u53C2\u8003 https://huggingface.co/THUDM/chatglm3-6b/commit/ea563876364622a0a5c24e6b71db0b93a9861ba0#d2h-069285\n\
    \u5728 tokenization_chatglm.py \u91CC\u65B0\u589E\u4E24\u884C\u4EE3\u7801\n\n\
    ![Snipaste_2023-11-21_17-42-58.png](https://cdn-uploads.huggingface.co/production/uploads/60583a54634ef353276aebce/jbPgiZ9bTdi2MtpxlUaCn.png)\n"
  created_at: 2023-11-21 09:45:17+00:00
  edited: false
  hidden: false
  id: 655c7c2d553b5a1265c58ca6
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 69
repo_id: THUDM/chatglm2-6b
repo_type: model
status: open
target_branch: null
title: "\u5FAE\u8C03\u540E\u63A8\u7406\u62A5\u9519 IndexError: piece id is out of\
  \ range."
