!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ShiJueXiaofei
conflicting_files: []
created_at: 2023-09-24 17:32:09+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/79b45044118d19c1c2e64222f333400c.svg
      fullname: YuanXiaofei
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ShiJueXiaofei
      type: user
    createdAt: '2023-09-24T18:32:09.000Z'
    data:
      edited: false
      editors:
      - ShiJueXiaofei
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.8313801288604736
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/79b45044118d19c1c2e64222f333400c.svg
          fullname: YuanXiaofei
          isHf: false
          isPro: false
          name: ShiJueXiaofei
          type: user
        html: "<p>\u5F53\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\uFF0C\u8BBE\u7F6E use_cache\
          \ = False \u65F6\uFF0C\u5BF9next_token\u7684\u9884\u6D4B\uFF0Cinput_ids\u7684\
          \u622A\u53D6\u53EA\u5224\u65AD\u4E86 is_first_forward \uFF0C\u4ECD\u7136\
          \u622A\u53D6\u5904\u7406\uFF0C\u53EA\u4F7F\u7528\u6700\u65B0\u7684token\u5199\
          \u5165input_ids\u3002\u6B64\u65F6\u6CA1\u6709past_key_value\u53C2\u6570\uFF0C\
          \u4F1A\u5BFC\u81F4\u6A21\u578B\u63A8\u7406\u4E71\u7801\u3002<br>\u5E94\u8BE5\
          \ \u5224\u65AD is_first_forward == False and self.config.use_cache == True\
          \ \u7684\u65F6\u5019\uFF0C\u624D\u80FD\u622A\u53D6\u6700\u65B0\u9884\u6D4B\
          \u7684token\uFF0C\u4F20\u5165model\uFF0C\u5426\u5219\u8981\u4F20\u5165\u524D\
          \u9762\u539F\u59CB\u6587\u672C\u5E8F\u5217\u53CA\u5DF2\u7ECF\u9884\u6D4B\
          \u7684token\u3002</p>\n"
        raw: "\u5F53\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\uFF0C\u8BBE\u7F6E use_cache\
          \ = False \u65F6\uFF0C\u5BF9next_token\u7684\u9884\u6D4B\uFF0Cinput_ids\u7684\
          \u622A\u53D6\u53EA\u5224\u65AD\u4E86 is_first_forward \uFF0C\u4ECD\u7136\
          \u622A\u53D6\u5904\u7406\uFF0C\u53EA\u4F7F\u7528\u6700\u65B0\u7684token\u5199\
          \u5165input_ids\u3002\u6B64\u65F6\u6CA1\u6709past_key_value\u53C2\u6570\uFF0C\
          \u4F1A\u5BFC\u81F4\u6A21\u578B\u63A8\u7406\u4E71\u7801\u3002\n\u5E94\u8BE5\
          \ \u5224\u65AD is_first_forward == False and self.config.use_cache == True\
          \ \u7684\u65F6\u5019\uFF0C\u624D\u80FD\u622A\u53D6\u6700\u65B0\u9884\u6D4B\
          \u7684token\uFF0C\u4F20\u5165model\uFF0C\u5426\u5219\u8981\u4F20\u5165\u524D\
          \u9762\u539F\u59CB\u6587\u672C\u5E8F\u5217\u53CA\u5DF2\u7ECF\u9884\u6D4B\
          \u7684token\u3002"
        updatedAt: '2023-09-24T18:32:09.434Z'
      numEdits: 0
      reactions: []
    id: 651080a9f874d950df5f7ec0
    type: comment
  author: ShiJueXiaofei
  content: "\u5F53\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\uFF0C\u8BBE\u7F6E use_cache\
    \ = False \u65F6\uFF0C\u5BF9next_token\u7684\u9884\u6D4B\uFF0Cinput_ids\u7684\u622A\
    \u53D6\u53EA\u5224\u65AD\u4E86 is_first_forward \uFF0C\u4ECD\u7136\u622A\u53D6\
    \u5904\u7406\uFF0C\u53EA\u4F7F\u7528\u6700\u65B0\u7684token\u5199\u5165input_ids\u3002\
    \u6B64\u65F6\u6CA1\u6709past_key_value\u53C2\u6570\uFF0C\u4F1A\u5BFC\u81F4\u6A21\
    \u578B\u63A8\u7406\u4E71\u7801\u3002\n\u5E94\u8BE5 \u5224\u65AD is_first_forward\
    \ == False and self.config.use_cache == True \u7684\u65F6\u5019\uFF0C\u624D\u80FD\
    \u622A\u53D6\u6700\u65B0\u9884\u6D4B\u7684token\uFF0C\u4F20\u5165model\uFF0C\u5426\
    \u5219\u8981\u4F20\u5165\u524D\u9762\u539F\u59CB\u6587\u672C\u5E8F\u5217\u53CA\
    \u5DF2\u7ECF\u9884\u6D4B\u7684token\u3002"
  created_at: 2023-09-24 17:32:09+00:00
  edited: false
  hidden: false
  id: 651080a9f874d950df5f7ec0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/79b45044118d19c1c2e64222f333400c.svg
      fullname: YuanXiaofei
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ShiJueXiaofei
      type: user
    createdAt: '2023-09-24T18:32:10.000Z'
    data:
      oid: 2cdf703899afca945a221ece195758e33d9c433d
      parents:
      - 8fd7fba285f7171d3ae7ea3b35c53b6340501ed1
      subject: "fix  when use_cache = False\uFF0Cinference \u4E71\u7801"
    id: 651080aa0000000000000000
    type: commit
  author: ShiJueXiaofei
  created_at: 2023-09-24 17:32:10+00:00
  id: 651080aa0000000000000000
  oid: 2cdf703899afca945a221ece195758e33d9c433d
  summary: "fix  when use_cache = False\uFF0Cinference \u4E71\u7801"
  type: commit
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661157784937-63033dc4e1e7f0e03a5e1a31.jpeg?w=200&h=200&f=face
      fullname: Zhengxiao Du
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: zxdu20
      type: user
    createdAt: '2023-10-09T07:32:33.000Z'
    data:
      status: merged
    id: 6523ac91aab6fd5585951bc1
    type: status-change
  author: zxdu20
  created_at: 2023-10-09 06:32:33+00:00
  id: 6523ac91aab6fd5585951bc1
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: efb7a1e2e780cea5bc05829d511ddd67b0df3629
num: 85
repo_id: THUDM/chatglm2-6b
repo_type: model
status: merged
target_branch: refs/heads/main
title: "fix  when use_cache = False\uFF0Cinference \u4E71\u7801"
