!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Guzik
conflicting_files: null
created_at: 2023-10-22 08:32:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1ab7e3f282618fb80267d4c996687443.svg
      fullname: Karol
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Guzik
      type: user
    createdAt: '2023-10-22T09:32:45.000Z'
    data:
      edited: false
      editors:
      - Guzik
      hidden: false
      identifiedLanguage:
        language: pl
        probability: 0.5634917616844177
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1ab7e3f282618fb80267d4c996687443.svg
          fullname: Karol
          isHf: false
          isPro: false
          name: Guzik
          type: user
        html: "<p>I\u2019m trying to translate simple text from Polish to English:</p>\n\
          <p>\u201C\u017Bycie nigdy si\u0119 nie ko\u0144czy \u2013 przygotuj si\u0119\
          \ zatem na ci\u0105g dalszy. Zasilany twoj\u0105 energi\u0105 zegarek z\
          \ widocznym mechanizmem Mads Dante dopasuje si\u0119 do ciebie, tempo do\
          \ tempa. Zr\xF3b dzi\u015B to, czego inni nie zrobi\u0105. Dzi\u0119ki temu\
          \ jutro b\u0119dziesz m\xF3g\u0142 zrobi\u0107 to, czego inni nie mog\u0105\
          .\u201D</p>\n<p>The model behaves strangely, when it encounters the <code>-</code>\
          \ it stops translating only returning the translation of what precedes the\
          \ <code>-</code> char.<br>When I move this char the translation always ends\
          \ before it.</p>\n<p>After further investigation, the model returns the\
          \ generated ids: <code>tensor([[63429, 7157, 522, 10126, 15, 0]])</code></p>\n\
          <p>when decoded: ' Life never ends '.</p>\n<p>Surprisingly, when I use <code>num_beams</code>\
          \ set to 2 instead of 1 I get a good result. The problem is that because\
          \ of time constraints I can't use <code>num_beams=2</code></p>\n<p>Does\
          \ anyone know what is happening?</p>\n"
        raw: "I\u2019m trying to translate simple text from Polish to English:\r\n\
          \r\n\u201C\u017Bycie nigdy si\u0119 nie ko\u0144czy \u2013 przygotuj si\u0119\
          \ zatem na ci\u0105g dalszy. Zasilany twoj\u0105 energi\u0105 zegarek z\
          \ widocznym mechanizmem Mads Dante dopasuje si\u0119 do ciebie, tempo do\
          \ tempa. Zr\xF3b dzi\u015B to, czego inni nie zrobi\u0105. Dzi\u0119ki temu\
          \ jutro b\u0119dziesz m\xF3g\u0142 zrobi\u0107 to, czego inni nie mog\u0105\
          .\u201D\r\n\r\nThe model behaves strangely, when it encounters the `-` it\
          \ stops translating only returning the translation of what precedes the\
          \ `-` char.\r\nWhen I move this char the translation always ends before\
          \ it.\r\n\r\nAfter further investigation, the model returns the generated\
          \ ids: `tensor([[63429, 7157, 522, 10126, 15, 0]])`\r\n\r\nwhen decoded:\
          \ '<pad> Life never ends </s>'.\r\n\r\nSurprisingly, when I use `num_beams`\
          \ set to 2 instead of 1 I get a good result. The problem is that because\
          \ of time constraints I can't use `num_beams=2`\r\n\r\nDoes anyone know\
          \ what is happening?"
        updatedAt: '2023-10-22T09:32:45.677Z'
      numEdits: 0
      reactions: []
    id: 6534ec3d33c5982a2956a6be
    type: comment
  author: Guzik
  content: "I\u2019m trying to translate simple text from Polish to English:\r\n\r\
    \n\u201C\u017Bycie nigdy si\u0119 nie ko\u0144czy \u2013 przygotuj si\u0119 zatem\
    \ na ci\u0105g dalszy. Zasilany twoj\u0105 energi\u0105 zegarek z widocznym mechanizmem\
    \ Mads Dante dopasuje si\u0119 do ciebie, tempo do tempa. Zr\xF3b dzi\u015B to,\
    \ czego inni nie zrobi\u0105. Dzi\u0119ki temu jutro b\u0119dziesz m\xF3g\u0142\
    \ zrobi\u0107 to, czego inni nie mog\u0105.\u201D\r\n\r\nThe model behaves strangely,\
    \ when it encounters the `-` it stops translating only returning the translation\
    \ of what precedes the `-` char.\r\nWhen I move this char the translation always\
    \ ends before it.\r\n\r\nAfter further investigation, the model returns the generated\
    \ ids: `tensor([[63429, 7157, 522, 10126, 15, 0]])`\r\n\r\nwhen decoded: '<pad>\
    \ Life never ends </s>'.\r\n\r\nSurprisingly, when I use `num_beams` set to 2\
    \ instead of 1 I get a good result. The problem is that because of time constraints\
    \ I can't use `num_beams=2`\r\n\r\nDoes anyone know what is happening?"
  created_at: 2023-10-22 08:32:45+00:00
  edited: false
  hidden: false
  id: 6534ec3d33c5982a2956a6be
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: Helsinki-NLP/opus-mt-pl-en
repo_type: model
status: open
target_branch: null
title: "Model stops translating on encountering \u201C-\u201D character"
