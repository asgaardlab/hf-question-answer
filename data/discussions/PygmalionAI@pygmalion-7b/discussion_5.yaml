!!python/object:huggingface_hub.community.DiscussionWithDetails
author: qvrty
conflicting_files: null
created_at: 2023-05-04 02:21:26+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/527e45818b0c135eef4a973466b6313b.svg
      fullname: Christopher Krueger
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qvrty
      type: user
    createdAt: '2023-05-04T03:21:26.000Z'
    data:
      edited: false
      editors:
      - qvrty
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/527e45818b0c135eef4a973466b6313b.svg
          fullname: Christopher Krueger
          isHf: false
          isPro: false
          name: qvrty
          type: user
        html: '<p>I was running on WSL to try and avoid the encoding issues mentioned
          by the author, but couldn''t seem to get the three config.json files to
          xor correctly. All the other files correctly converted and had the correct
          hashes, but tokenizer_config.json, config.json and generation_config.json
          all ended up with corrupted gibberish. After a decent bit of trial and error,
          I decided to try a wild shot in the dark and just used the original un-xored
          copies of the relevant files, and threw it into oobabooga. With manually
          specifying the model type as llama, it loaded up and began producing output.
          I''m not sure what changes were originally intended for those files, but
          this hopefully can help someone else get the model running.</p>

          '
        raw: I was running on WSL to try and avoid the encoding issues mentioned by
          the author, but couldn't seem to get the three config.json files to xor
          correctly. All the other files correctly converted and had the correct hashes,
          but tokenizer_config.json, config.json and generation_config.json all ended
          up with corrupted gibberish. After a decent bit of trial and error, I decided
          to try a wild shot in the dark and just used the original un-xored copies
          of the relevant files, and threw it into oobabooga. With manually specifying
          the model type as llama, it loaded up and began producing output. I'm not
          sure what changes were originally intended for those files, but this hopefully
          can help someone else get the model running.
        updatedAt: '2023-05-04T03:21:26.517Z'
      numEdits: 0
      reactions: []
    id: 645324b6c895e6437dc8a8d6
    type: comment
  author: qvrty
  content: I was running on WSL to try and avoid the encoding issues mentioned by
    the author, but couldn't seem to get the three config.json files to xor correctly.
    All the other files correctly converted and had the correct hashes, but tokenizer_config.json,
    config.json and generation_config.json all ended up with corrupted gibberish.
    After a decent bit of trial and error, I decided to try a wild shot in the dark
    and just used the original un-xored copies of the relevant files, and threw it
    into oobabooga. With manually specifying the model type as llama, it loaded up
    and began producing output. I'm not sure what changes were originally intended
    for those files, but this hopefully can help someone else get the model running.
  created_at: 2023-05-04 02:21:26+00:00
  edited: false
  hidden: false
  id: 645324b6c895e6437dc8a8d6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8ecbbe42f9ab59a0f30f045432a10413.svg
      fullname: Sean Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sslx
      type: user
    createdAt: '2023-05-05T15:27:05.000Z'
    data:
      edited: false
      editors:
      - sslx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8ecbbe42f9ab59a0f30f045432a10413.svg
          fullname: Sean Lee
          isHf: false
          isPro: false
          name: sslx
          type: user
        html: '<p>I tried downloading on Ubuntu, MacOS, Windows after installing git
          lfs, and they all come out corrupt.<br>I don''t think it''s an OS issue.
          Please fix this.</p>

          '
        raw: 'I tried downloading on Ubuntu, MacOS, Windows after installing git lfs,
          and they all come out corrupt.

          I don''t think it''s an OS issue. Please fix this.'
        updatedAt: '2023-05-05T15:27:05.245Z'
      numEdits: 0
      reactions: []
    id: 64552049d55525a4fee7fbdd
    type: comment
  author: sslx
  content: 'I tried downloading on Ubuntu, MacOS, Windows after installing git lfs,
    and they all come out corrupt.

    I don''t think it''s an OS issue. Please fix this.'
  created_at: 2023-05-05 14:27:05+00:00
  edited: false
  hidden: false
  id: 64552049d55525a4fee7fbdd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9214712eea954e552c204296941d9da7.svg
      fullname: '0x000011b'
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: 11b
      type: user
    createdAt: '2023-05-05T16:24:54.000Z'
    data:
      edited: false
      editors:
      - 11b
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9214712eea954e552c204296941d9da7.svg
          fullname: '0x000011b'
          isHf: false
          isPro: false
          name: 11b
          type: user
        html: '<p>Indeed - my bad everyone. A couple of the JSONs seem to have contained
          local paths to my machine so they become corrupted when XORring anywhere
          else, which was kind of a stupid oversight. I''ll try to re-do them over
          the weekend.</p>

          <p>As a temporary workaround, you can just copy-paste the JSONs from the
          base LLaMA HF conversion and the model will work correctly. If using Kobold
          and you want proper EOS behavior, just edit the <code>config.json</code>
          to add <code>"badwordsids": [[0]]</code> inside the root object.</p>

          '
        raw: 'Indeed - my bad everyone. A couple of the JSONs seem to have contained
          local paths to my machine so they become corrupted when XORring anywhere
          else, which was kind of a stupid oversight. I''ll try to re-do them over
          the weekend.


          As a temporary workaround, you can just copy-paste the JSONs from the base
          LLaMA HF conversion and the model will work correctly. If using Kobold and
          you want proper EOS behavior, just edit the `config.json` to add `"badwordsids":
          [[0]]` inside the root object.'
        updatedAt: '2023-05-05T16:24:54.016Z'
      numEdits: 0
      reactions: []
    id: 64552dd6a473375be573654c
    type: comment
  author: 11b
  content: 'Indeed - my bad everyone. A couple of the JSONs seem to have contained
    local paths to my machine so they become corrupted when XORring anywhere else,
    which was kind of a stupid oversight. I''ll try to re-do them over the weekend.


    As a temporary workaround, you can just copy-paste the JSONs from the base LLaMA
    HF conversion and the model will work correctly. If using Kobold and you want
    proper EOS behavior, just edit the `config.json` to add `"badwordsids": [[0]]`
    inside the root object.'
  created_at: 2023-05-05 15:24:54+00:00
  edited: false
  hidden: false
  id: 64552dd6a473375be573654c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8ecbbe42f9ab59a0f30f045432a10413.svg
      fullname: Sean Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sslx
      type: user
    createdAt: '2023-05-07T02:06:00.000Z'
    data:
      edited: false
      editors:
      - sslx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8ecbbe42f9ab59a0f30f045432a10413.svg
          fullname: Sean Lee
          isHf: false
          isPro: false
          name: sslx
          type: user
        html: '<p>If I copy-paste the JSONs from the base LLaMA HF conversion, would
          that impact quantizing in any way? In other words, do I need to requantize
          when you release the fix?<br>Thanks!</p>

          '
        raw: 'If I copy-paste the JSONs from the base LLaMA HF conversion, would that
          impact quantizing in any way? In other words, do I need to requantize when
          you release the fix?

          Thanks!'
        updatedAt: '2023-05-07T02:06:00.212Z'
      numEdits: 0
      reactions: []
    id: 6457078803625871eb7e73f6
    type: comment
  author: sslx
  content: 'If I copy-paste the JSONs from the base LLaMA HF conversion, would that
    impact quantizing in any way? In other words, do I need to requantize when you
    release the fix?

    Thanks!'
  created_at: 2023-05-07 01:06:00+00:00
  edited: false
  hidden: false
  id: 6457078803625871eb7e73f6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/294a9c53df7655124cc93a7ffd023b13.svg
      fullname: Nikolai Shangin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: shanginn
      type: user
    createdAt: '2023-05-07T04:56:21.000Z'
    data:
      edited: false
      editors:
      - shanginn
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/294a9c53df7655124cc93a7ffd023b13.svg
          fullname: Nikolai Shangin
          isHf: false
          isPro: false
          name: shanginn
          type: user
        html: '<p>got the same issue on the macos.<br>can you just release JSON''s
          as is? they should not be copyrighted I assume.</p>

          <p>and thank you for you time!</p>

          '
        raw: 'got the same issue on the macos.

          can you just release JSON''s as is? they should not be copyrighted I assume.


          and thank you for you time!'
        updatedAt: '2023-05-07T04:56:21.558Z'
      numEdits: 0
      reactions: []
    id: 64572f75cd6567f52fc0bd12
    type: comment
  author: shanginn
  content: 'got the same issue on the macos.

    can you just release JSON''s as is? they should not be copyrighted I assume.


    and thank you for you time!'
  created_at: 2023-05-07 03:56:21+00:00
  edited: false
  hidden: false
  id: 64572f75cd6567f52fc0bd12
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ac98f9cc1709ef422eb0594765f0b401.svg
      fullname: Kartik Khare
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: KKcorps
      type: user
    createdAt: '2023-05-07T09:50:56.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/ac98f9cc1709ef422eb0594765f0b401.svg
          fullname: Kartik Khare
          isHf: false
          isPro: false
          name: KKcorps
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-05-07T17:53:57.919Z'
      numEdits: 0
      reactions: []
    id: 64577480455367592762fac2
    type: comment
  author: KKcorps
  content: This comment has been hidden
  created_at: 2023-05-07 08:50:56+00:00
  edited: true
  hidden: true
  id: 64577480455367592762fac2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9214712eea954e552c204296941d9da7.svg
      fullname: '0x000011b'
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: 11b
      type: user
    createdAt: '2023-05-08T23:16:09.000Z'
    data:
      edited: false
      editors:
      - 11b
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9214712eea954e552c204296941d9da7.svg
          fullname: '0x000011b'
          isHf: false
          isPro: false
          name: 11b
          type: user
        html: '<p>Just pushed a commit that keeps the JSON files raw. They were originally
          XORred because that''s how the OASST script does it - but I doubt Meta will
          give us any legal trouble for the JSONs.</p>

          <p>I''ll close this discussion for now, but please don''t hesitate to open
          a new one if something''s still broken.</p>

          '
        raw: 'Just pushed a commit that keeps the JSON files raw. They were originally
          XORred because that''s how the OASST script does it - but I doubt Meta will
          give us any legal trouble for the JSONs.


          I''ll close this discussion for now, but please don''t hesitate to open
          a new one if something''s still broken.'
        updatedAt: '2023-05-08T23:16:09.963Z'
      numEdits: 0
      reactions: []
      relatedEventId: 645982b9232e5f0712bc9f5b
    id: 645982b9232e5f0712bc9f5a
    type: comment
  author: 11b
  content: 'Just pushed a commit that keeps the JSON files raw. They were originally
    XORred because that''s how the OASST script does it - but I doubt Meta will give
    us any legal trouble for the JSONs.


    I''ll close this discussion for now, but please don''t hesitate to open a new
    one if something''s still broken.'
  created_at: 2023-05-08 22:16:09+00:00
  edited: false
  hidden: false
  id: 645982b9232e5f0712bc9f5a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/9214712eea954e552c204296941d9da7.svg
      fullname: '0x000011b'
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: 11b
      type: user
    createdAt: '2023-05-08T23:16:09.000Z'
    data:
      status: closed
    id: 645982b9232e5f0712bc9f5b
    type: status-change
  author: 11b
  created_at: 2023-05-08 22:16:09+00:00
  id: 645982b9232e5f0712bc9f5b
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: PygmalionAI/pygmalion-7b
repo_type: model
status: closed
target_branch: null
title: Workaround for the corrupted jsons.
