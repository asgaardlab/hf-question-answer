!!python/object:huggingface_hub.community.DiscussionWithDetails
author: TheOneHong
conflicting_files: null
created_at: 2023-08-23 09:32:35+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667047993848-noauth.jpeg?w=200&h=200&f=face
      fullname: Yuen Sze Hong
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: TheOneHong
      type: user
    createdAt: '2023-08-23T10:32:35.000Z'
    data:
      edited: true
      editors:
      - TheOneHong
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5053890347480774
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667047993848-noauth.jpeg?w=200&h=200&f=face
          fullname: Yuen Sze Hong
          isHf: false
          isPro: false
          name: TheOneHong
          type: user
        html: "<pre><code>[2023-08-23 10:38:31,959] torch._dynamo.convert_frame: [ERROR]\
          \ WON'T CONVERT forward /usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\
          \ line 709 \n 755           0 LOAD_CONST               1 (2)\n         \
          \      2 LOAD_FAST                0 (self)\n               4 LOAD_ATTR \
          \               0 (num_upsamplers)\n               6 BINARY_POWER\n    \
          \           8 STORE_DEREF              0 (default_overall_up_factor)\n\n\
          \ 758          10 LOAD_CONST               2 (False)\n              12 STORE_FAST\
          \              13 (forward_upsample_size)\n\n 759          14 LOAD_CONST\
          \               3 (None)\n              16 STORE_FAST              14 (upsample_size)\n\
          \n 761          18 LOAD_GLOBAL              1 (any)\n              20 LOAD_CLOSURE\
          \             0 (default_overall_up_factor)\n              22 BUILD_TUPLE\
          \              1\n              24 LOAD_CONST               4 (&lt;code\
          \ object &lt;genexpr&gt; at 0x79d249172c30, file \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 761&gt;)\n              26 LOAD_CONST               5 ('UNet2DConditionModel.forward.&lt;locals&gt;.&lt;genexpr&gt;')\n\
          \              28 MAKE_FUNCTION            8 (closure)\n              30\
          \ LOAD_FAST                1 (sample)\n              32 LOAD_ATTR      \
          \          2 (shape)\n              34 LOAD_CONST               6 (-2)\n\
          \              36 LOAD_CONST               3 (None)\n              38 BUILD_SLICE\
          \              2\n              40 BINARY_SUBSCR\n              42 GET_ITER\n\
          \              44 CALL_FUNCTION            1\n              46 CALL_FUNCTION\
          \            1\n              48 POP_JUMP_IF_FALSE       32 (to 64)\n\n\
          \ 762          50 LOAD_GLOBAL              3 (logger)\n              52\
          \ LOAD_METHOD              4 (info)\n              54 LOAD_CONST       \
          \        7 ('Forward upsample size to force interpolation output size.')\n\
          \              56 CALL_METHOD              1\n              58 POP_TOP\n\
          \n 763          60 LOAD_CONST               8 (True)\n              62 STORE_FAST\
          \              13 (forward_upsample_size)\n\n 773     &gt;&gt;   64 LOAD_FAST\
          \                6 (attention_mask)\n              66 LOAD_CONST       \
          \        3 (None)\n              68 IS_OP                    1\n       \
          \       70 POP_JUMP_IF_FALSE       51 (to 102)\n\n 778          72 LOAD_CONST\
          \               9 (1)\n              74 LOAD_FAST                6 (attention_mask)\n\
          \              76 LOAD_METHOD              5 (to)\n              78 LOAD_FAST\
          \                1 (sample)\n              80 LOAD_ATTR                6\
          \ (dtype)\n              82 CALL_METHOD              1\n              84\
          \ BINARY_SUBTRACT\n              86 LOAD_CONST              10 (-10000.0)\n\
          \              88 BINARY_MULTIPLY\n              90 STORE_FAST         \
          \      6 (attention_mask)\n\n 779          92 LOAD_FAST                6\
          \ (attention_mask)\n              94 LOAD_METHOD              7 (unsqueeze)\n\
          \              96 LOAD_CONST               9 (1)\n              98 CALL_METHOD\
          \              1\n             100 STORE_FAST               6 (attention_mask)\n\
          \n 782     &gt;&gt;  102 LOAD_FAST               11 (encoder_attention_mask)\n\
          \             104 LOAD_CONST               3 (None)\n             106 IS_OP\
          \                    1\n             108 POP_JUMP_IF_FALSE       70 (to\
          \ 140)\n\n 783         110 LOAD_CONST               9 (1)\n            \
          \ 112 LOAD_FAST               11 (encoder_attention_mask)\n            \
          \ 114 LOAD_METHOD              5 (to)\n             116 LOAD_FAST      \
          \          1 (sample)\n             118 LOAD_ATTR                6 (dtype)\n\
          \             120 CALL_METHOD              1\n             122 BINARY_SUBTRACT\n\
          \             124 LOAD_CONST              10 (-10000.0)\n             126\
          \ BINARY_MULTIPLY\n             128 STORE_FAST              11 (encoder_attention_mask)\n\
          \n 784         130 LOAD_FAST               11 (encoder_attention_mask)\n\
          \             132 LOAD_METHOD              7 (unsqueeze)\n             134\
          \ LOAD_CONST               9 (1)\n             136 CALL_METHOD         \
          \     1\n             138 STORE_FAST              11 (encoder_attention_mask)\n\
          \n 787     &gt;&gt;  140 LOAD_FAST                0 (self)\n           \
          \  142 LOAD_ATTR                8 (config)\n             144 LOAD_ATTR \
          \               9 (center_input_sample)\n             146 POP_JUMP_IF_FALSE\
          \       80 (to 160)\n\n 788         148 LOAD_CONST               1 (2)\n\
          \             150 LOAD_FAST                1 (sample)\n             152\
          \ BINARY_MULTIPLY\n             154 LOAD_CONST              11 (1.0)\n \
          \            156 BINARY_SUBTRACT\n             158 STORE_FAST          \
          \     1 (sample)\n\n 791     &gt;&gt;  160 LOAD_FAST                2 (timestep)\n\
          \             162 STORE_FAST              15 (timesteps)\n\n 792       \
          \  164 LOAD_GLOBAL             10 (torch)\n             166 LOAD_METHOD\
          \             11 (is_tensor)\n             168 LOAD_FAST               15\
          \ (timesteps)\n             170 CALL_METHOD              1\n           \
          \  172 POP_JUMP_IF_TRUE       126 (to 252)\n\n 795         174 LOAD_FAST\
          \                1 (sample)\n             176 LOAD_ATTR               12\
          \ (device)\n             178 LOAD_ATTR               13 (type)\n       \
          \      180 LOAD_CONST              12 ('mps')\n             182 COMPARE_OP\
          \               2 (==)\n             184 STORE_FAST              16 (is_mps)\n\
          \n 796         186 LOAD_GLOBAL             14 (isinstance)\n           \
          \  188 LOAD_FAST                2 (timestep)\n             190 LOAD_GLOBAL\
          \             15 (float)\n             192 CALL_FUNCTION            2\n\
          \             194 POP_JUMP_IF_FALSE      107 (to 214)\n\n 797         196\
          \ LOAD_FAST               16 (is_mps)\n             198 POP_JUMP_IF_FALSE\
          \      103 (to 206)\n             200 LOAD_GLOBAL             10 (torch)\n\
          \             202 LOAD_ATTR               16 (float32)\n             204\
          \ JUMP_FORWARD             2 (to 210)\n         &gt;&gt;  206 LOAD_GLOBAL\
          \             10 (torch)\n             208 LOAD_ATTR               17 (float64)\n\
          \         &gt;&gt;  210 STORE_FAST              17 (dtype)\n           \
          \  212 JUMP_FORWARD             8 (to 230)\n\n 799     &gt;&gt;  214 LOAD_FAST\
          \               16 (is_mps)\n             216 POP_JUMP_IF_FALSE      112\
          \ (to 224)\n             218 LOAD_GLOBAL             10 (torch)\n      \
          \       220 LOAD_ATTR               18 (int32)\n             222 JUMP_FORWARD\
          \             2 (to 228)\n         &gt;&gt;  224 LOAD_GLOBAL           \
          \  10 (torch)\n             226 LOAD_ATTR               19 (int64)\n   \
          \      &gt;&gt;  228 STORE_FAST              17 (dtype)\n\n 800     &gt;&gt;\
          \  230 LOAD_GLOBAL             10 (torch)\n             232 LOAD_ATTR  \
          \             20 (tensor)\n             234 LOAD_FAST               15 (timesteps)\n\
          \             236 BUILD_LIST               1\n             238 LOAD_FAST\
          \               17 (dtype)\n             240 LOAD_FAST                1\
          \ (sample)\n             242 LOAD_ATTR               12 (device)\n     \
          \        244 LOAD_CONST              13 (('dtype', 'device'))\n        \
          \     246 CALL_FUNCTION_KW         3\n             248 STORE_FAST      \
          \        15 (timesteps)\n             250 JUMP_FORWARD            15 (to\
          \ 282)\n\n 801     &gt;&gt;  252 LOAD_GLOBAL             21 (len)\n    \
          \         254 LOAD_FAST               15 (timesteps)\n             256 LOAD_ATTR\
          \                2 (shape)\n             258 CALL_FUNCTION            1\n\
          \             260 LOAD_CONST              14 (0)\n             262 COMPARE_OP\
          \               2 (==)\n             264 POP_JUMP_IF_FALSE      141 (to\
          \ 282)\n\n 802         266 LOAD_FAST               15 (timesteps)\n    \
          \         268 LOAD_CONST               3 (None)\n             270 BINARY_SUBSCR\n\
          \             272 LOAD_METHOD              5 (to)\n             274 LOAD_FAST\
          \                1 (sample)\n             276 LOAD_ATTR               12\
          \ (device)\n             278 CALL_METHOD              1\n             280\
          \ STORE_FAST              15 (timesteps)\n\n 805     &gt;&gt;  282 LOAD_FAST\
          \               15 (timesteps)\n             284 LOAD_METHOD           \
          \  22 (expand)\n             286 LOAD_FAST                1 (sample)\n \
          \            288 LOAD_ATTR                2 (shape)\n             290 LOAD_CONST\
          \              14 (0)\n             292 BINARY_SUBSCR\n             294\
          \ CALL_METHOD              1\n             296 STORE_FAST              15\
          \ (timesteps)\n\n 807         298 LOAD_FAST                0 (self)\n  \
          \           300 LOAD_METHOD             23 (time_proj)\n             302\
          \ LOAD_FAST               15 (timesteps)\n             304 CALL_METHOD \
          \             1\n             306 STORE_FAST              18 (t_emb)\n\n\
          \ 812         308 LOAD_FAST               18 (t_emb)\n             310 LOAD_ATTR\
          \                5 (to)\n             312 LOAD_FAST                1 (sample)\n\
          \             314 LOAD_ATTR                6 (dtype)\n             316 LOAD_CONST\
          \              15 (('dtype',))\n             318 CALL_FUNCTION_KW      \
          \   1\n             320 STORE_FAST              18 (t_emb)\n\n 814     \
          \    322 LOAD_FAST                0 (self)\n             324 LOAD_METHOD\
          \             24 (time_embedding)\n             326 LOAD_FAST          \
          \     18 (t_emb)\n             328 LOAD_FAST                5 (timestep_cond)\n\
          \             330 CALL_METHOD              2\n             332 STORE_FAST\
          \              19 (emb)\n\n 815         334 LOAD_CONST               3 (None)\n\
          \             336 STORE_FAST              20 (aug_emb)\n\n 817         338\
          \ LOAD_FAST                0 (self)\n             340 LOAD_ATTR        \
          \       25 (class_embedding)\n             342 LOAD_CONST              \
          \ 3 (None)\n             344 IS_OP                    1\n             346\
          \ POP_JUMP_IF_FALSE      228 (to 456)\n\n 818         348 LOAD_FAST    \
          \            4 (class_labels)\n             350 LOAD_CONST             \
          \  3 (None)\n             352 IS_OP                    0\n             354\
          \ POP_JUMP_IF_FALSE      182 (to 364)\n\n 819         356 LOAD_GLOBAL  \
          \           26 (ValueError)\n             358 LOAD_CONST              16\
          \ ('class_labels should be provided when num_class_embeds &gt; 0')\n   \
          \          360 CALL_FUNCTION            1\n             362 RAISE_VARARGS\
          \            1\n\n 821     &gt;&gt;  364 LOAD_FAST                0 (self)\n\
          \             366 LOAD_ATTR                8 (config)\n             368\
          \ LOAD_ATTR               27 (class_embed_type)\n             370 LOAD_CONST\
          \              17 ('timestep')\n             372 COMPARE_OP            \
          \   2 (==)\n             374 POP_JUMP_IF_FALSE      200 (to 400)\n\n 822\
          \         376 LOAD_FAST                0 (self)\n             378 LOAD_METHOD\
          \             23 (time_proj)\n             380 LOAD_FAST               \
          \ 4 (class_labels)\n             382 CALL_METHOD              1\n      \
          \       384 STORE_FAST               4 (class_labels)\n\n 826         386\
          \ LOAD_FAST                4 (class_labels)\n             388 LOAD_ATTR\
          \                5 (to)\n             390 LOAD_FAST                1 (sample)\n\
          \             392 LOAD_ATTR                6 (dtype)\n             394 LOAD_CONST\
          \              15 (('dtype',))\n             396 CALL_FUNCTION_KW      \
          \   1\n             398 STORE_FAST               4 (class_labels)\n\n 828\
          \     &gt;&gt;  400 LOAD_FAST                0 (self)\n             402\
          \ LOAD_METHOD             25 (class_embedding)\n             404 LOAD_FAST\
          \                4 (class_labels)\n             406 CALL_METHOD        \
          \      1\n             408 LOAD_ATTR                5 (to)\n           \
          \  410 LOAD_FAST                1 (sample)\n             412 LOAD_ATTR \
          \               6 (dtype)\n             414 LOAD_CONST              15 (('dtype',))\n\
          \             416 CALL_FUNCTION_KW         1\n             418 STORE_FAST\
          \              21 (class_emb)\n\n 830         420 LOAD_FAST            \
          \    0 (self)\n             422 LOAD_ATTR                8 (config)\n  \
          \           424 LOAD_ATTR               28 (class_embeddings_concat)\n \
          \            426 POP_JUMP_IF_FALSE      224 (to 448)\n\n 831         428\
          \ LOAD_GLOBAL             10 (torch)\n             430 LOAD_ATTR       \
          \        29 (cat)\n             432 LOAD_FAST               19 (emb)\n \
          \            434 LOAD_FAST               21 (class_emb)\n             436\
          \ BUILD_LIST               2\n             438 LOAD_CONST              18\
          \ (-1)\n             440 LOAD_CONST              19 (('dim',))\n       \
          \      442 CALL_FUNCTION_KW         2\n             444 STORE_FAST     \
          \         19 (emb)\n             446 JUMP_FORWARD             4 (to 456)\n\
          \n 833     &gt;&gt;  448 LOAD_FAST               19 (emb)\n            \
          \ 450 LOAD_FAST               21 (class_emb)\n             452 BINARY_ADD\n\
          \             454 STORE_FAST              19 (emb)\n\n 835     &gt;&gt;\
          \  456 LOAD_FAST                0 (self)\n             458 LOAD_ATTR   \
          \             8 (config)\n             460 LOAD_ATTR               30 (addition_embed_type)\n\
          \             462 LOAD_CONST              20 ('text')\n             464\
          \ COMPARE_OP               2 (==)\n             466 POP_JUMP_IF_FALSE  \
          \    240 (to 480)\n\n 836         468 LOAD_FAST                0 (self)\n\
          \             470 LOAD_METHOD             31 (add_embedding)\n         \
          \    472 LOAD_FAST                3 (encoder_hidden_states)\n          \
          \   474 CALL_METHOD              1\n             476 STORE_FAST        \
          \      20 (aug_emb)\n             478 JUMP_FORWARD           202 (to 884)\n\
          \n 837     &gt;&gt;  480 LOAD_FAST                0 (self)\n           \
          \  482 LOAD_ATTR                8 (config)\n             484 LOAD_ATTR \
          \              30 (addition_embed_type)\n             486 LOAD_CONST   \
          \           21 ('text_image')\n             488 COMPARE_OP             \
          \  2 (==)\n             490 EXTENDED_ARG             1\n             492\
          \ POP_JUMP_IF_FALSE      278 (to 556)\n\n 839         494 LOAD_CONST   \
          \           22 ('image_embeds')\n             496 LOAD_FAST            \
          \    8 (added_cond_kwargs)\n             498 CONTAINS_OP              1\n\
          \             500 EXTENDED_ARG             1\n             502 POP_JUMP_IF_FALSE\
          \      260 (to 520)\n\n 840         504 LOAD_GLOBAL             26 (ValueError)\n\
          \n 841         506 LOAD_FAST                0 (self)\n             508 LOAD_ATTR\
          \               32 (__class__)\n             510 FORMAT_VALUE          \
          \   0\n             512 LOAD_CONST              23 (\" has the config param\
          \ `addition_embed_type` set to 'text_image' which requires the keyword argument\
          \ `image_embeds` to be passed in `added_cond_kwargs`\")\n             514\
          \ BUILD_STRING             2\n\n 840         516 CALL_FUNCTION         \
          \   1\n             518 RAISE_VARARGS            1\n\n 844     &gt;&gt;\
          \  520 LOAD_FAST                8 (added_cond_kwargs)\n             522\
          \ LOAD_METHOD             33 (get)\n             524 LOAD_CONST        \
          \      22 ('image_embeds')\n             526 CALL_METHOD              1\n\
          \             528 STORE_FAST              22 (image_embs)\n\n 845      \
          \   530 LOAD_FAST                8 (added_cond_kwargs)\n             532\
          \ LOAD_METHOD             33 (get)\n             534 LOAD_CONST        \
          \      24 ('text_embeds')\n             536 LOAD_FAST                3 (encoder_hidden_states)\n\
          \             538 CALL_METHOD              2\n             540 STORE_FAST\
          \              23 (text_embs)\n\n 846         542 LOAD_FAST            \
          \    0 (self)\n             544 LOAD_METHOD             31 (add_embedding)\n\
          \             546 LOAD_FAST               23 (text_embs)\n             548\
          \ LOAD_FAST               22 (image_embs)\n             550 CALL_METHOD\
          \              2\n             552 STORE_FAST              20 (aug_emb)\n\
          \             554 JUMP_FORWARD           164 (to 884)\n\n 847     &gt;&gt;\
          \  556 LOAD_FAST                0 (self)\n             558 LOAD_ATTR   \
          \             8 (config)\n             560 LOAD_ATTR               30 (addition_embed_type)\n\
          \             562 LOAD_CONST              25 ('text_time')\n           \
          \  564 COMPARE_OP               2 (==)\n             566 EXTENDED_ARG  \
          \           1\n             568 POP_JUMP_IF_FALSE      359 (to 718)\n\n\
          \ 849         570 LOAD_CONST              24 ('text_embeds')\n         \
          \    572 LOAD_FAST                8 (added_cond_kwargs)\n             574\
          \ CONTAINS_OP              1\n             576 EXTENDED_ARG            \
          \ 1\n             578 POP_JUMP_IF_FALSE      298 (to 596)\n\n 850      \
          \   580 LOAD_GLOBAL             26 (ValueError)\n\n 851         582 LOAD_FAST\
          \                0 (self)\n             584 LOAD_ATTR               32 (__class__)\n\
          \             586 FORMAT_VALUE             0\n             588 LOAD_CONST\
          \              26 (\" has the config param `addition_embed_type` set to\
          \ 'text_time' which requires the keyword argument `text_embeds` to be passed\
          \ in `added_cond_kwargs`\")\n             590 BUILD_STRING             2\n\
          \n 850         592 CALL_FUNCTION            1\n             594 RAISE_VARARGS\
          \            1\n\n 853     &gt;&gt;  596 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             598 LOAD_METHOD             33 (get)\n             600 LOAD_CONST\
          \              24 ('text_embeds')\n             602 CALL_METHOD        \
          \      1\n             604 STORE_FAST              24 (text_embeds)\n\n\
          \ 854         606 LOAD_CONST              27 ('time_ids')\n            \
          \ 608 LOAD_FAST                8 (added_cond_kwargs)\n             610 CONTAINS_OP\
          \              1\n             612 EXTENDED_ARG             1\n        \
          \     614 POP_JUMP_IF_FALSE      316 (to 632)\n\n 855         616 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 856         618 LOAD_FAST            \
          \    0 (self)\n             620 LOAD_ATTR               32 (__class__)\n\
          \             622 FORMAT_VALUE             0\n             624 LOAD_CONST\
          \              28 (\" has the config param `addition_embed_type` set to\
          \ 'text_time' which requires the keyword argument `time_ids` to be passed\
          \ in `added_cond_kwargs`\")\n             626 BUILD_STRING             2\n\
          \n 855         628 CALL_FUNCTION            1\n             630 RAISE_VARARGS\
          \            1\n\n 858     &gt;&gt;  632 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             634 LOAD_METHOD             33 (get)\n             636 LOAD_CONST\
          \              27 ('time_ids')\n             638 CALL_METHOD           \
          \   1\n             640 STORE_FAST              25 (time_ids)\n\n 859  \
          \       642 LOAD_FAST                0 (self)\n             644 LOAD_METHOD\
          \             34 (add_time_proj)\n             646 LOAD_FAST           \
          \    25 (time_ids)\n             648 LOAD_METHOD             35 (flatten)\n\
          \             650 CALL_METHOD              0\n             652 CALL_METHOD\
          \              1\n             654 STORE_FAST              26 (time_embeds)\n\
          \n 860         656 LOAD_FAST               26 (time_embeds)\n          \
          \   658 LOAD_METHOD             36 (reshape)\n             660 LOAD_FAST\
          \               24 (text_embeds)\n             662 LOAD_ATTR           \
          \     2 (shape)\n             664 LOAD_CONST              14 (0)\n     \
          \        666 BINARY_SUBSCR\n             668 LOAD_CONST              18\
          \ (-1)\n             670 BUILD_TUPLE              2\n             672 CALL_METHOD\
          \              1\n             674 STORE_FAST              26 (time_embeds)\n\
          \n 862         676 LOAD_GLOBAL             10 (torch)\n             678\
          \ LOAD_ATTR               37 (concat)\n             680 LOAD_FAST      \
          \         24 (text_embeds)\n             682 LOAD_FAST               26\
          \ (time_embeds)\n             684 BUILD_LIST               2\n         \
          \    686 LOAD_CONST              18 (-1)\n             688 LOAD_CONST  \
          \            19 (('dim',))\n             690 CALL_FUNCTION_KW         2\n\
          \             692 STORE_FAST              27 (add_embeds)\n\n 863      \
          \   694 LOAD_FAST               27 (add_embeds)\n             696 LOAD_METHOD\
          \              5 (to)\n             698 LOAD_FAST               19 (emb)\n\
          \             700 LOAD_ATTR                6 (dtype)\n             702 CALL_METHOD\
          \              1\n             704 STORE_FAST              27 (add_embeds)\n\
          \n 864         706 LOAD_FAST                0 (self)\n             708 LOAD_METHOD\
          \             31 (add_embedding)\n             710 LOAD_FAST           \
          \    27 (add_embeds)\n             712 CALL_METHOD              1\n    \
          \         714 STORE_FAST              20 (aug_emb)\n             716 JUMP_FORWARD\
          \            83 (to 884)\n\n 865     &gt;&gt;  718 LOAD_FAST           \
          \     0 (self)\n             720 LOAD_ATTR                8 (config)\n \
          \            722 LOAD_ATTR               30 (addition_embed_type)\n    \
          \         724 LOAD_CONST              29 ('image')\n             726 COMPARE_OP\
          \               2 (==)\n             728 EXTENDED_ARG             1\n  \
          \           730 POP_JUMP_IF_FALSE      390 (to 780)\n\n 867         732\
          \ LOAD_CONST              22 ('image_embeds')\n             734 LOAD_FAST\
          \                8 (added_cond_kwargs)\n             736 CONTAINS_OP   \
          \           1\n             738 EXTENDED_ARG             1\n           \
          \  740 POP_JUMP_IF_FALSE      379 (to 758)\n\n 868         742 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 869         744 LOAD_FAST            \
          \    0 (self)\n             746 LOAD_ATTR               32 (__class__)\n\
          \             748 FORMAT_VALUE             0\n             750 LOAD_CONST\
          \              30 (\" has the config param `addition_embed_type` set to\
          \ 'image' which requires the keyword argument `image_embeds` to be passed\
          \ in `added_cond_kwargs`\")\n             752 BUILD_STRING             2\n\
          \n 868         754 CALL_FUNCTION            1\n             756 RAISE_VARARGS\
          \            1\n\n 871     &gt;&gt;  758 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             760 LOAD_METHOD             33 (get)\n             762 LOAD_CONST\
          \              22 ('image_embeds')\n             764 CALL_METHOD       \
          \       1\n             766 STORE_FAST              22 (image_embs)\n\n\
          \ 872         768 LOAD_FAST                0 (self)\n             770 LOAD_METHOD\
          \             31 (add_embedding)\n             772 LOAD_FAST           \
          \    22 (image_embs)\n             774 CALL_METHOD              1\n    \
          \         776 STORE_FAST              20 (aug_emb)\n             778 JUMP_FORWARD\
          \            52 (to 884)\n\n 873     &gt;&gt;  780 LOAD_FAST           \
          \     0 (self)\n             782 LOAD_ATTR                8 (config)\n \
          \            784 LOAD_ATTR               30 (addition_embed_type)\n    \
          \         786 LOAD_CONST              31 ('image_hint')\n             788\
          \ COMPARE_OP               2 (==)\n             790 EXTENDED_ARG       \
          \      1\n             792 POP_JUMP_IF_FALSE      442 (to 884)\n\n 875 \
          \        794 LOAD_CONST              22 ('image_embeds')\n             796\
          \ LOAD_FAST                8 (added_cond_kwargs)\n             798 CONTAINS_OP\
          \              1\n             800 EXTENDED_ARG             1\n        \
          \     802 POP_JUMP_IF_TRUE       407 (to 814)\n             804 LOAD_CONST\
          \              32 ('hint')\n             806 LOAD_FAST                8\
          \ (added_cond_kwargs)\n             808 CONTAINS_OP              1\n   \
          \          810 EXTENDED_ARG             1\n             812 POP_JUMP_IF_FALSE\
          \      415 (to 830)\n\n 876     &gt;&gt;  814 LOAD_GLOBAL             26\
          \ (ValueError)\n\n 877         816 LOAD_FAST                0 (self)\n \
          \            818 LOAD_ATTR               32 (__class__)\n             820\
          \ FORMAT_VALUE             0\n             822 LOAD_CONST              33\
          \ (\" has the config param `addition_embed_type` set to 'image_hint' which\
          \ requires the keyword arguments `image_embeds` and `hint` to be passed\
          \ in `added_cond_kwargs`\")\n             824 BUILD_STRING             2\n\
          \n 876         826 CALL_FUNCTION            1\n             828 RAISE_VARARGS\
          \            1\n\n 879     &gt;&gt;  830 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             832 LOAD_METHOD             33 (get)\n             834 LOAD_CONST\
          \              22 ('image_embeds')\n             836 CALL_METHOD       \
          \       1\n             838 STORE_FAST              22 (image_embs)\n\n\
          \ 880         840 LOAD_FAST                8 (added_cond_kwargs)\n     \
          \        842 LOAD_METHOD             33 (get)\n             844 LOAD_CONST\
          \              32 ('hint')\n             846 CALL_METHOD              1\n\
          \             848 STORE_FAST              28 (hint)\n\n 881         850\
          \ LOAD_FAST                0 (self)\n             852 LOAD_METHOD      \
          \       31 (add_embedding)\n             854 LOAD_FAST               22\
          \ (image_embs)\n             856 LOAD_FAST               28 (hint)\n   \
          \          858 CALL_METHOD              2\n             860 UNPACK_SEQUENCE\
          \          2\n             862 STORE_FAST              20 (aug_emb)\n  \
          \           864 STORE_FAST              28 (hint)\n\n 882         866 LOAD_GLOBAL\
          \             10 (torch)\n             868 LOAD_ATTR               29 (cat)\n\
          \             870 LOAD_FAST                1 (sample)\n             872\
          \ LOAD_FAST               28 (hint)\n             874 BUILD_LIST       \
          \        2\n             876 LOAD_CONST               9 (1)\n          \
          \   878 LOAD_CONST              19 (('dim',))\n             880 CALL_FUNCTION_KW\
          \         2\n             882 STORE_FAST               1 (sample)\n\n 884\
          \     &gt;&gt;  884 LOAD_FAST               20 (aug_emb)\n             886\
          \ LOAD_CONST               3 (None)\n             888 IS_OP            \
          \        1\n             890 EXTENDED_ARG             1\n             892\
          \ POP_JUMP_IF_FALSE      451 (to 902)\n             894 LOAD_FAST      \
          \         19 (emb)\n             896 LOAD_FAST               20 (aug_emb)\n\
          \             898 BINARY_ADD\n             900 JUMP_FORWARD            \
          \ 1 (to 904)\n         &gt;&gt;  902 LOAD_FAST               19 (emb)\n\
          \         &gt;&gt;  904 STORE_FAST              19 (emb)\n\n 886       \
          \  906 LOAD_FAST                0 (self)\n             908 LOAD_ATTR   \
          \            38 (time_embed_act)\n             910 LOAD_CONST          \
          \     3 (None)\n             912 IS_OP                    1\n          \
          \   914 EXTENDED_ARG             1\n             916 POP_JUMP_IF_FALSE \
          \     464 (to 928)\n\n 887         918 LOAD_FAST                0 (self)\n\
          \             920 LOAD_METHOD             38 (time_embed_act)\n        \
          \     922 LOAD_FAST               19 (emb)\n             924 CALL_METHOD\
          \              1\n             926 STORE_FAST              19 (emb)\n\n\
          \ 889     &gt;&gt;  928 LOAD_FAST                0 (self)\n            \
          \ 930 LOAD_ATTR               39 (encoder_hid_proj)\n             932 LOAD_CONST\
          \               3 (None)\n             934 IS_OP                    1\n\
          \             936 EXTENDED_ARG             1\n             938 POP_JUMP_IF_FALSE\
          \      483 (to 966)\n             940 LOAD_FAST                0 (self)\n\
          \             942 LOAD_ATTR                8 (config)\n             944\
          \ LOAD_ATTR               40 (encoder_hid_dim_type)\n             946 LOAD_CONST\
          \              34 ('text_proj')\n             948 COMPARE_OP           \
          \    2 (==)\n             950 EXTENDED_ARG             1\n             952\
          \ POP_JUMP_IF_FALSE      483 (to 966)\n\n 890         954 LOAD_FAST    \
          \            0 (self)\n             956 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \             958 LOAD_FAST                3 (encoder_hidden_states)\n \
          \            960 CALL_METHOD              1\n             962 STORE_FAST\
          \               3 (encoder_hidden_states)\n             964 JUMP_FORWARD\
          \            74 (to 1114)\n\n 891     &gt;&gt;  966 LOAD_FAST          \
          \      0 (self)\n             968 LOAD_ATTR               39 (encoder_hid_proj)\n\
          \             970 LOAD_CONST               3 (None)\n             972 IS_OP\
          \                    1\n             974 EXTENDED_ARG             2\n  \
          \           976 POP_JUMP_IF_FALSE      521 (to 1042)\n             978 LOAD_FAST\
          \                0 (self)\n             980 LOAD_ATTR                8 (config)\n\
          \             982 LOAD_ATTR               40 (encoder_hid_dim_type)\n  \
          \           984 LOAD_CONST              35 ('text_image_proj')\n       \
          \      986 COMPARE_OP               2 (==)\n             988 EXTENDED_ARG\
          \             2\n             990 POP_JUMP_IF_FALSE      521 (to 1042)\n\
          \n 893         992 LOAD_CONST              22 ('image_embeds')\n       \
          \      994 LOAD_FAST                8 (added_cond_kwargs)\n            \
          \ 996 CONTAINS_OP              1\n             998 EXTENDED_ARG        \
          \     1\n            1000 POP_JUMP_IF_FALSE      509 (to 1018)\n\n 894 \
          \       1002 LOAD_GLOBAL             26 (ValueError)\n\n 895        1004\
          \ LOAD_FAST                0 (self)\n            1006 LOAD_ATTR        \
          \       32 (__class__)\n            1008 FORMAT_VALUE             0\n  \
          \          1010 LOAD_CONST              36 (\" has the config param `encoder_hid_dim_type`\
          \ set to 'text_image_proj' which requires the keyword argument `image_embeds`\
          \ to be passed in  `added_conditions`\")\n            1012 BUILD_STRING\
          \             2\n\n 894        1014 CALL_FUNCTION            1\n       \
          \     1016 RAISE_VARARGS            1\n\n 898     &gt;&gt; 1018 LOAD_FAST\
          \                8 (added_cond_kwargs)\n            1020 LOAD_METHOD   \
          \          33 (get)\n            1022 LOAD_CONST              22 ('image_embeds')\n\
          \            1024 CALL_METHOD              1\n            1026 STORE_FAST\
          \              29 (image_embeds)\n\n 899        1028 LOAD_FAST         \
          \       0 (self)\n            1030 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \            1032 LOAD_FAST                3 (encoder_hidden_states)\n \
          \           1034 LOAD_FAST               29 (image_embeds)\n           \
          \ 1036 CALL_METHOD              2\n            1038 STORE_FAST         \
          \      3 (encoder_hidden_states)\n            1040 JUMP_FORWARD        \
          \    36 (to 1114)\n\n 900     &gt;&gt; 1042 LOAD_FAST                0 (self)\n\
          \            1044 LOAD_ATTR               39 (encoder_hid_proj)\n      \
          \      1046 LOAD_CONST               3 (None)\n            1048 IS_OP  \
          \                  1\n            1050 EXTENDED_ARG             2\n    \
          \        1052 POP_JUMP_IF_FALSE      557 (to 1114)\n            1054 LOAD_FAST\
          \                0 (self)\n            1056 LOAD_ATTR                8 (config)\n\
          \            1058 LOAD_ATTR               40 (encoder_hid_dim_type)\n  \
          \          1060 LOAD_CONST              37 ('image_proj')\n            1062\
          \ COMPARE_OP               2 (==)\n            1064 EXTENDED_ARG       \
          \      2\n            1066 POP_JUMP_IF_FALSE      557 (to 1114)\n\n 902\
          \        1068 LOAD_CONST              22 ('image_embeds')\n            1070\
          \ LOAD_FAST                8 (added_cond_kwargs)\n            1072 CONTAINS_OP\
          \              1\n            1074 EXTENDED_ARG             2\n        \
          \    1076 POP_JUMP_IF_FALSE      547 (to 1094)\n\n 903        1078 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 904        1080 LOAD_FAST            \
          \    0 (self)\n            1082 LOAD_ATTR               32 (__class__)\n\
          \            1084 FORMAT_VALUE             0\n            1086 LOAD_CONST\
          \              38 (\" has the config param `encoder_hid_dim_type` set to\
          \ 'image_proj' which requires the keyword argument `image_embeds` to be\
          \ passed in  `added_conditions`\")\n            1088 BUILD_STRING      \
          \       2\n\n 903        1090 CALL_FUNCTION            1\n            1092\
          \ RAISE_VARARGS            1\n\n 906     &gt;&gt; 1094 LOAD_FAST       \
          \         8 (added_cond_kwargs)\n            1096 LOAD_METHOD          \
          \   33 (get)\n            1098 LOAD_CONST              22 ('image_embeds')\n\
          \            1100 CALL_METHOD              1\n            1102 STORE_FAST\
          \              29 (image_embeds)\n\n 907        1104 LOAD_FAST         \
          \       0 (self)\n            1106 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \            1108 LOAD_FAST               29 (image_embeds)\n          \
          \  1110 CALL_METHOD              1\n            1112 STORE_FAST        \
          \       3 (encoder_hidden_states)\n\n 909     &gt;&gt; 1114 LOAD_FAST  \
          \              0 (self)\n            1116 LOAD_METHOD             41 (conv_in)\n\
          \            1118 LOAD_FAST                1 (sample)\n            1120\
          \ CALL_METHOD              1\n            1122 STORE_FAST              \
          \ 1 (sample)\n\n 912        1124 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1126 LOAD_CONST               3 (None)\n            1128 IS_OP\
          \                    1\n            1130 EXTENDED_ARG             2\n  \
          \          1132 POP_JUMP_IF_FALSE      597 (to 1194)\n            1134 LOAD_FAST\
          \                7 (cross_attention_kwargs)\n            1136 LOAD_METHOD\
          \             33 (get)\n            1138 LOAD_CONST              39 ('gligen')\n\
          \            1140 LOAD_CONST               3 (None)\n            1142 CALL_METHOD\
          \              2\n            1144 LOAD_CONST               3 (None)\n \
          \           1146 IS_OP                    1\n            1148 EXTENDED_ARG\
          \             2\n            1150 POP_JUMP_IF_FALSE      597 (to 1194)\n\
          \n 913        1152 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1154 LOAD_METHOD             42 (copy)\n            1156 CALL_METHOD\
          \              0\n            1158 STORE_FAST               7 (cross_attention_kwargs)\n\
          \n 914        1160 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1162 LOAD_METHOD             43 (pop)\n            1164 LOAD_CONST\
          \              39 ('gligen')\n            1166 CALL_METHOD             \
          \ 1\n            1168 STORE_FAST              30 (gligen_args)\n\n 915 \
          \       1170 LOAD_CONST              40 ('objs')\n            1172 LOAD_FAST\
          \                0 (self)\n            1174 LOAD_ATTR               44 (position_net)\n\
          \            1176 LOAD_CONST              45 (())\n            1178 BUILD_MAP\
          \                0\n            1180 LOAD_FAST               30 (gligen_args)\n\
          \            1182 DICT_MERGE               1\n            1184 CALL_FUNCTION_EX\
          \         1\n            1186 BUILD_MAP                1\n            1188\
          \ LOAD_FAST                7 (cross_attention_kwargs)\n            1190\
          \ LOAD_CONST              39 ('gligen')\n            1192 STORE_SUBSCR\n\
          \n 919     &gt;&gt; 1194 LOAD_FAST               10 (mid_block_additional_residual)\n\
          \            1196 LOAD_CONST               3 (None)\n            1198 IS_OP\
          \                    1\n            1200 EXTENDED_ARG             2\n  \
          \          1202 JUMP_IF_FALSE_OR_POP   605 (to 1210)\n            1204 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1206 LOAD_CONST\
          \               3 (None)\n            1208 IS_OP                    1\n\
          \         &gt;&gt; 1210 STORE_FAST              31 (is_controlnet)\n\n 920\
          \        1212 LOAD_FAST               10 (mid_block_additional_residual)\n\
          \            1214 LOAD_CONST               3 (None)\n            1216 IS_OP\
          \                    0\n            1218 EXTENDED_ARG             2\n  \
          \          1220 JUMP_IF_FALSE_OR_POP   614 (to 1228)\n            1222 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1224 LOAD_CONST\
          \               3 (None)\n            1226 IS_OP                    1\n\
          \         &gt;&gt; 1228 STORE_FAST              32 (is_adapter)\n\n 922\
          \        1230 LOAD_FAST                1 (sample)\n            1232 BUILD_TUPLE\
          \              1\n            1234 STORE_FAST              33 (down_block_res_samples)\n\
          \n 923        1236 LOAD_FAST                0 (self)\n            1238 LOAD_ATTR\
          \               45 (down_blocks)\n            1240 GET_ITER\n         &gt;&gt;\
          \ 1242 FOR_ITER                78 (to 1400)\n            1244 STORE_FAST\
          \              34 (downsample_block)\n\n 924        1246 LOAD_GLOBAL   \
          \          46 (hasattr)\n            1248 LOAD_FAST               34 (downsample_block)\n\
          \            1250 LOAD_CONST              41 ('has_cross_attention')\n \
          \           1252 CALL_FUNCTION            2\n            1254 EXTENDED_ARG\
          \             2\n            1256 POP_JUMP_IF_FALSE      669 (to 1338)\n\
          \            1258 LOAD_FAST               34 (downsample_block)\n      \
          \      1260 LOAD_ATTR               47 (has_cross_attention)\n         \
          \   1262 EXTENDED_ARG             2\n            1264 POP_JUMP_IF_FALSE\
          \      669 (to 1338)\n\n 926        1266 BUILD_MAP                0\n  \
          \          1268 STORE_FAST              35 (additional_residuals)\n\n 927\
          \        1270 LOAD_FAST               32 (is_adapter)\n            1272\
          \ EXTENDED_ARG             2\n            1274 POP_JUMP_IF_FALSE      652\
          \ (to 1304)\n            1276 LOAD_GLOBAL             21 (len)\n       \
          \     1278 LOAD_FAST                9 (down_block_additional_residuals)\n\
          \            1280 CALL_FUNCTION            1\n            1282 LOAD_CONST\
          \              14 (0)\n            1284 COMPARE_OP               4 (&gt;)\n\
          \            1286 EXTENDED_ARG             2\n            1288 POP_JUMP_IF_FALSE\
          \      652 (to 1304)\n\n 928        1290 LOAD_FAST                9 (down_block_additional_residuals)\n\
          \            1292 LOAD_METHOD             43 (pop)\n            1294 LOAD_CONST\
          \              14 (0)\n            1296 CALL_METHOD              1\n   \
          \         1298 LOAD_FAST               35 (additional_residuals)\n     \
          \       1300 LOAD_CONST              42 ('additional_residuals')\n     \
          \       1302 STORE_SUBSCR\n\n 930     &gt;&gt; 1304 LOAD_FAST          \
          \     34 (downsample_block)\n            1306 LOAD_CONST              45\
          \ (())\n\n 931        1308 LOAD_FAST                1 (sample)\n\n 932 \
          \       1310 LOAD_FAST               19 (emb)\n\n 933        1312 LOAD_FAST\
          \                3 (encoder_hidden_states)\n\n 934        1314 LOAD_FAST\
          \                6 (attention_mask)\n\n 935        1316 LOAD_FAST      \
          \          7 (cross_attention_kwargs)\n\n 936        1318 LOAD_FAST    \
          \           11 (encoder_attention_mask)\n\n 930        1320 LOAD_CONST \
          \             43 (('hidden_states', 'temb', 'encoder_hidden_states', 'attention_mask',\
          \ 'cross_attention_kwargs', 'encoder_attention_mask'))\n            1322\
          \ BUILD_CONST_KEY_MAP      6\n\n 937        1324 LOAD_FAST             \
          \  35 (additional_residuals)\n\n 930        1326 DICT_MERGE            \
          \   1\n            1328 CALL_FUNCTION_EX         1\n            1330 UNPACK_SEQUENCE\
          \          2\n            1332 STORE_FAST               1 (sample)\n   \
          \         1334 STORE_FAST              36 (res_samples)\n            1336\
          \ JUMP_FORWARD            25 (to 1388)\n\n 940     &gt;&gt; 1338 LOAD_FAST\
          \               34 (downsample_block)\n            1340 LOAD_FAST      \
          \          1 (sample)\n            1342 LOAD_FAST               19 (emb)\n\
          \            1344 LOAD_CONST              44 (('hidden_states', 'temb'))\n\
          \            1346 CALL_FUNCTION_KW         2\n            1348 UNPACK_SEQUENCE\
          \          2\n            1350 STORE_FAST               1 (sample)\n   \
          \         1352 STORE_FAST              36 (res_samples)\n\n 942        1354\
          \ LOAD_FAST               32 (is_adapter)\n            1356 EXTENDED_ARG\
          \             2\n            1358 POP_JUMP_IF_FALSE      694 (to 1388)\n\
          \            1360 LOAD_GLOBAL             21 (len)\n            1362 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1364 CALL_FUNCTION\
          \            1\n            1366 LOAD_CONST              14 (0)\n      \
          \      1368 COMPARE_OP               4 (&gt;)\n            1370 EXTENDED_ARG\
          \             2\n            1372 POP_JUMP_IF_FALSE      694 (to 1388)\n\
          \n 943        1374 LOAD_FAST                1 (sample)\n            1376\
          \ LOAD_FAST                9 (down_block_additional_residuals)\n       \
          \     1378 LOAD_METHOD             43 (pop)\n            1380 LOAD_CONST\
          \              14 (0)\n            1382 CALL_METHOD              1\n   \
          \         1384 INPLACE_ADD\n            1386 STORE_FAST               1\
          \ (sample)\n\n 945     &gt;&gt; 1388 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1390 LOAD_FAST               36 (res_samples)\n           \
          \ 1392 INPLACE_ADD\n            1394 STORE_FAST              33 (down_block_res_samples)\n\
          \            1396 EXTENDED_ARG             2\n            1398 JUMP_ABSOLUTE\
          \          621 (to 1242)\n\n 947     &gt;&gt; 1400 LOAD_FAST           \
          \    31 (is_controlnet)\n            1402 EXTENDED_ARG             2\n \
          \           1404 POP_JUMP_IF_FALSE      727 (to 1454)\n\n 948        1406\
          \ LOAD_CONST              45 (())\n            1408 STORE_FAST         \
          \     37 (new_down_block_res_samples)\n\n 950        1410 LOAD_GLOBAL  \
          \           48 (zip)\n\n 951        1412 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1414 LOAD_FAST                9 (down_block_additional_residuals)\n\
          \n 950        1416 CALL_FUNCTION            2\n            1418 GET_ITER\n\
          \         &gt;&gt; 1420 FOR_ITER                14 (to 1450)\n         \
          \   1422 UNPACK_SEQUENCE          2\n            1424 STORE_FAST       \
          \       38 (down_block_res_sample)\n            1426 STORE_FAST        \
          \      39 (down_block_additional_residual)\n\n 953        1428 LOAD_FAST\
          \               38 (down_block_res_sample)\n            1430 LOAD_FAST \
          \              39 (down_block_additional_residual)\n            1432 BINARY_ADD\n\
          \            1434 STORE_FAST              38 (down_block_res_sample)\n\n\
          \ 954        1436 LOAD_FAST               37 (new_down_block_res_samples)\n\
          \            1438 LOAD_FAST               38 (down_block_res_sample)\n \
          \           1440 BUILD_TUPLE              1\n            1442 BINARY_ADD\n\
          \            1444 STORE_FAST              37 (new_down_block_res_samples)\n\
          \            1446 EXTENDED_ARG             2\n            1448 JUMP_ABSOLUTE\
          \          710 (to 1420)\n\n 956     &gt;&gt; 1450 LOAD_FAST           \
          \    37 (new_down_block_res_samples)\n            1452 STORE_FAST      \
          \        33 (down_block_res_samples)\n\n 959     &gt;&gt; 1454 LOAD_FAST\
          \                0 (self)\n            1456 LOAD_ATTR               49 (mid_block)\n\
          \            1458 LOAD_CONST               3 (None)\n            1460 IS_OP\
          \                    1\n            1462 EXTENDED_ARG             2\n  \
          \          1464 POP_JUMP_IF_FALSE      744 (to 1488)\n\n 960        1466\
          \ LOAD_FAST                0 (self)\n            1468 LOAD_ATTR        \
          \       49 (mid_block)\n\n 961        1470 LOAD_FAST                1 (sample)\n\
          \n 962        1472 LOAD_FAST               19 (emb)\n\n 963        1474\
          \ LOAD_FAST                3 (encoder_hidden_states)\n\n 964        1476\
          \ LOAD_FAST                6 (attention_mask)\n\n 965        1478 LOAD_FAST\
          \                7 (cross_attention_kwargs)\n\n 966        1480 LOAD_FAST\
          \               11 (encoder_attention_mask)\n\n 960        1482 LOAD_CONST\
          \              46 (('encoder_hidden_states', 'attention_mask', 'cross_attention_kwargs',\
          \ 'encoder_attention_mask'))\n            1484 CALL_FUNCTION_KW        \
          \ 6\n            1486 STORE_FAST               1 (sample)\n\n 969     &gt;&gt;\
          \ 1488 LOAD_FAST               31 (is_controlnet)\n            1490 EXTENDED_ARG\
          \             2\n            1492 POP_JUMP_IF_FALSE      751 (to 1502)\n\
          \n 970        1494 LOAD_FAST                1 (sample)\n            1496\
          \ LOAD_FAST               10 (mid_block_additional_residual)\n         \
          \   1498 BINARY_ADD\n            1500 STORE_FAST               1 (sample)\n\
          \n 973     &gt;&gt; 1502 LOAD_GLOBAL             50 (enumerate)\n      \
          \      1504 LOAD_FAST                0 (self)\n            1506 LOAD_ATTR\
          \               51 (up_blocks)\n            1508 CALL_FUNCTION         \
          \   1\n            1510 GET_ITER\n         &gt;&gt; 1512 FOR_ITER      \
          \          81 (to 1676)\n            1514 UNPACK_SEQUENCE          2\n \
          \           1516 STORE_FAST              40 (i)\n            1518 STORE_FAST\
          \              41 (upsample_block)\n\n 974        1520 LOAD_FAST       \
          \        40 (i)\n            1522 LOAD_GLOBAL             21 (len)\n   \
          \         1524 LOAD_FAST                0 (self)\n            1526 LOAD_ATTR\
          \               51 (up_blocks)\n            1528 CALL_FUNCTION         \
          \   1\n            1530 LOAD_CONST               9 (1)\n            1532\
          \ BINARY_SUBTRACT\n            1534 COMPARE_OP               2 (==)\n  \
          \          1536 STORE_FAST              42 (is_final_block)\n\n 976    \
          \    1538 LOAD_FAST               33 (down_block_res_samples)\n        \
          \    1540 LOAD_GLOBAL             21 (len)\n            1542 LOAD_FAST \
          \              41 (upsample_block)\n            1544 LOAD_ATTR         \
          \      52 (resnets)\n            1546 CALL_FUNCTION            1\n     \
          \       1548 UNARY_NEGATIVE\n            1550 LOAD_CONST               3\
          \ (None)\n            1552 BUILD_SLICE              2\n            1554\
          \ BINARY_SUBSCR\n            1556 STORE_FAST              36 (res_samples)\n\
          \n 977        1558 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1560 LOAD_CONST               3 (None)\n            1562 LOAD_GLOBAL\
          \             21 (len)\n            1564 LOAD_FAST               41 (upsample_block)\n\
          \            1566 LOAD_ATTR               52 (resnets)\n            1568\
          \ CALL_FUNCTION            1\n            1570 UNARY_NEGATIVE\n        \
          \    1572 BUILD_SLICE              2\n            1574 BINARY_SUBSCR\n \
          \           1576 STORE_FAST              33 (down_block_res_samples)\n\n\
          \ 981        1578 LOAD_FAST               42 (is_final_block)\n        \
          \    1580 EXTENDED_ARG             3\n            1582 POP_JUMP_IF_TRUE\
          \       804 (to 1608)\n            1584 LOAD_FAST               13 (forward_upsample_size)\n\
          \            1586 EXTENDED_ARG             3\n            1588 POP_JUMP_IF_FALSE\
          \      804 (to 1608)\n\n 982        1590 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1592 LOAD_CONST              18 (-1)\n            1594 BINARY_SUBSCR\n\
          \            1596 LOAD_ATTR                2 (shape)\n            1598 LOAD_CONST\
          \               1 (2)\n            1600 LOAD_CONST               3 (None)\n\
          \            1602 BUILD_SLICE              2\n            1604 BINARY_SUBSCR\n\
          \            1606 STORE_FAST              14 (upsample_size)\n\n 984   \
          \  &gt;&gt; 1608 LOAD_GLOBAL             46 (hasattr)\n            1610\
          \ LOAD_FAST               41 (upsample_block)\n            1612 LOAD_CONST\
          \              41 ('has_cross_attention')\n            1614 CALL_FUNCTION\
          \            2\n            1616 EXTENDED_ARG             3\n          \
          \  1618 POP_JUMP_IF_FALSE      828 (to 1656)\n            1620 LOAD_FAST\
          \               41 (upsample_block)\n            1622 LOAD_ATTR        \
          \       47 (has_cross_attention)\n            1624 EXTENDED_ARG        \
          \     3\n            1626 POP_JUMP_IF_FALSE      828 (to 1656)\n\n 985 \
          \       1628 LOAD_FAST               41 (upsample_block)\n\n 986       \
          \ 1630 LOAD_FAST                1 (sample)\n\n 987        1632 LOAD_FAST\
          \               19 (emb)\n\n 988        1634 LOAD_FAST               36\
          \ (res_samples)\n\n 989        1636 LOAD_FAST                3 (encoder_hidden_states)\n\
          \n 990        1638 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \n 991        1640 LOAD_FAST               14 (upsample_size)\n\n 992  \
          \      1642 LOAD_FAST                6 (attention_mask)\n\n 993        1644\
          \ LOAD_FAST               11 (encoder_attention_mask)\n\n 985        1646\
          \ LOAD_CONST              47 (('hidden_states', 'temb', 'res_hidden_states_tuple',\
          \ 'encoder_hidden_states', 'cross_attention_kwargs', 'upsample_size', 'attention_mask',\
          \ 'encoder_attention_mask'))\n            1648 CALL_FUNCTION_KW        \
          \ 8\n            1650 STORE_FAST               1 (sample)\n            1652\
          \ EXTENDED_ARG             2\n            1654 JUMP_ABSOLUTE          756\
          \ (to 1512)\n\n 996     &gt;&gt; 1656 LOAD_FAST               41 (upsample_block)\n\
          \n 997        1658 LOAD_FAST                1 (sample)\n            1660\
          \ LOAD_FAST               19 (emb)\n            1662 LOAD_FAST         \
          \      36 (res_samples)\n            1664 LOAD_FAST               14 (upsample_size)\n\
          \n 996        1666 LOAD_CONST              48 (('hidden_states', 'temb',\
          \ 'res_hidden_states_tuple', 'upsample_size'))\n            1668 CALL_FUNCTION_KW\
          \         4\n            1670 STORE_FAST               1 (sample)\n    \
          \        1672 EXTENDED_ARG             2\n            1674 JUMP_ABSOLUTE\
          \          756 (to 1512)\n\n1001     &gt;&gt; 1676 LOAD_FAST           \
          \     0 (self)\n            1678 LOAD_ATTR               53 (conv_norm_out)\n\
          \            1680 EXTENDED_ARG             3\n            1682 POP_JUMP_IF_FALSE\
          \      852 (to 1704)\n\n1002        1684 LOAD_FAST                0 (self)\n\
          \            1686 LOAD_METHOD             53 (conv_norm_out)\n         \
          \   1688 LOAD_FAST                1 (sample)\n            1690 CALL_METHOD\
          \              1\n            1692 STORE_FAST               1 (sample)\n\
          \n1003        1694 LOAD_FAST                0 (self)\n            1696 LOAD_METHOD\
          \             54 (conv_act)\n            1698 LOAD_FAST                1\
          \ (sample)\n            1700 CALL_METHOD              1\n            1702\
          \ STORE_FAST               1 (sample)\n\n1004     &gt;&gt; 1704 LOAD_FAST\
          \                0 (self)\n            1706 LOAD_METHOD             55 (conv_out)\n\
          \            1708 LOAD_FAST                1 (sample)\n            1710\
          \ CALL_METHOD              1\n            1712 STORE_FAST              \
          \ 1 (sample)\n\n1006        1714 LOAD_FAST               12 (return_dict)\n\
          \            1716 EXTENDED_ARG             3\n            1718 POP_JUMP_IF_TRUE\
          \       863 (to 1726)\n\n1007        1720 LOAD_FAST                1 (sample)\n\
          \            1722 BUILD_TUPLE              1\n            1724 RETURN_VALUE\n\
          \n1009     &gt;&gt; 1726 LOAD_GLOBAL             56 (UNet2DConditionOutput)\n\
          \            1728 LOAD_FAST                1 (sample)\n            1730\
          \ LOAD_CONST              49 (('sample',))\n            1732 CALL_FUNCTION_KW\
          \         1\n            1734 RETURN_VALUE\n\n ========== TorchDynamo Stack\
          \ Trace ==========\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
          , line 324, in _compile\n    out_code = transform_code_object(code, transform)\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/bytecode_transformation.py\"\
          , line 445, in transform_code_object\n    transformations(instructions,\
          \ code_options)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
          , line 311, in transform\n    tracer.run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1726, in run\n    super().run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 576, in run\n    and self.step()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 540, in step\n    getattr(self, inst.opname)(inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 342, in wrapper\n    return inner_fn(self, inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 965, in CALL_FUNCTION\n    self.call_function(fn, args, {})\n  File\
          \ \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 474, in call_function\n    self.push(fn.call_function(self, args,\
          \ kwargs))\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 291, in call_function\n    return super().call_function(tx, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 259, in call_function\n    return super().call_function(tx, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 92, in call_function\n    return tx.inline_user_function_return(\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 510, in inline_user_function_return\n    result = InliningInstructionTranslator.inline_call(self,\
          \ fn, args, kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1806, in inline_call\n    return cls.inline_call_(parent, func, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1829, in inline_call_\n    unimplemented(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py\"\
          , line 71, in unimplemented\n    raise Unsupported(msg)\ntorch._dynamo.exc.Unsupported:\
          \ inline in skipfiles: Logger.info  | info /usr/lib/python3.10/logging/__init__.py\n\
          \n\n========== The above exception occurred while processing the following\
          \ code ==========\n\n  File \"/usr/lib/python3.10/runpy.py\", line 196,\
          \ in _run_module_as_main\n    return _run_code(code, main_globals, None,\n\
          \  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code,\
          \ run_globals)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel_launcher.py\"\
          , line 16, in &lt;module&gt;\n    app.launch_new_instance()\n  File \"/usr/local/lib/python3.10/dist-packages/traitlets/config/application.py\"\
          , line 992, in launch_instance\n    app.start()\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelapp.py\"\
          , line 619, in start\n    self.io_loop.start()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/platform/asyncio.py\"\
          , line 195, in start\n    self.asyncio_loop.run_forever()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
          , line 603, in run_forever\n    self._run_once()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
          , line 1909, in _run_once\n    handle._run()\n  File \"/usr/lib/python3.10/asyncio/events.py\"\
          , line 80, in _run\n    self._context.run(self._callback, *self._args)\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\", line\
          \ 685, in &lt;lambda&gt;\n    lambda f: self._run_callback(functools.partial(callback,\
          \ future))\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\"\
          , line 738, in _run_callback\n    ret = callback()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 825, in inner\n    self.ctx_run(self.run)\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 786, in run\n    yielded = self.gen.send(value)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 361, in process_one\n    yield gen.maybe_future(dispatch(*args))\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\", line\
          \ 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 261, in dispatch_shell\n    yield gen.maybe_future(handler(stream,\
          \ idents, msg))\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 539, in execute_request\n    self.do_execute(\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/ipkernel.py\"\
          , line 302, in do_execute\n    res = shell.run_cell(code, store_history=store_history,\
          \ silent=silent)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/zmqshell.py\"\
          , line 539, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args,\
          \ **kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 2975, in run_cell\n    result = self._run_cell(\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3030, in _run_cell\n    return runner(coro)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/async_helpers.py\"\
          , line 78, in _pseudo_sync_runner\n    coro.send(None)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3257, in run_cell_async\n    has_raised = await self.run_ast_nodes(code_ast.body,\
          \ cell_name,\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3473, in run_ast_nodes\n    if (await self.run_code(code, result,\
          \  async_=asy)):\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3553, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n\
          \  File \"&lt;ipython-input-6-0932307aec37&gt;\", line 103, in &lt;cell\
          \ line: 101&gt;\n    image = base(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\n    return func(*args, **kwargs)\n  File\
          \ \"/usr/local/lib/python3.10/dist-packages/diffusers/pipelines/stable_diffusion_xl/pipeline_stable_diffusion_xl.py\"\
          , line 812, in __call__\n    noise_pred = self.unet(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\n    return forward_call(*args, **kwargs)\n \
          \ File \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 709, in forward\n    def forward(\n  File \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 762, in forward\n    logger.info(\"Forward upsample size to force\
          \ interpolation output size.\")\n\n==========\n---------------------------------------------------------------------------\n\
          Unsupported                               Traceback (most recent call last)\n\
          &lt;ipython-input-6-0932307aec37&gt; in &lt;cell line: 101&gt;()\n    101\
          \ with torch.no_grad():\n    102     # run both experts\n--&gt; 103    \
          \ image = base(\n    104         prompt=prompt,\n    105         num_inference_steps=n_steps,\n\
          \n24 frames\n/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py\
          \ in unimplemented(msg)\n     69 def unimplemented(msg: str):\n     70 \
          \    assert msg != os.environ.get(\"BREAK\", False)\n---&gt; 71     raise\
          \ Unsupported(msg)\n     72 \n     73 \n\nUnsupported: inline in skipfiles:\
          \ Logger.info  | info /usr/lib/python3.10/logging/__init__.py\n</code></pre>\n\
          <p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/635d22554fabde0df74274dc/EokJ8i0hBX2ecVOMMKVvs.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/635d22554fabde0df74274dc/EokJ8i0hBX2ecVOMMKVvs.png\"\
          ></a><br>confirmed torch v2</p>\n"
        raw: "```\n[2023-08-23 10:38:31,959] torch._dynamo.convert_frame: [ERROR]\
          \ WON'T CONVERT forward /usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\
          \ line 709 \n 755           0 LOAD_CONST               1 (2)\n         \
          \      2 LOAD_FAST                0 (self)\n               4 LOAD_ATTR \
          \               0 (num_upsamplers)\n               6 BINARY_POWER\n    \
          \           8 STORE_DEREF              0 (default_overall_up_factor)\n\n\
          \ 758          10 LOAD_CONST               2 (False)\n              12 STORE_FAST\
          \              13 (forward_upsample_size)\n\n 759          14 LOAD_CONST\
          \               3 (None)\n              16 STORE_FAST              14 (upsample_size)\n\
          \n 761          18 LOAD_GLOBAL              1 (any)\n              20 LOAD_CLOSURE\
          \             0 (default_overall_up_factor)\n              22 BUILD_TUPLE\
          \              1\n              24 LOAD_CONST               4 (<code object\
          \ <genexpr> at 0x79d249172c30, file \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 761>)\n              26 LOAD_CONST               5 ('UNet2DConditionModel.forward.<locals>.<genexpr>')\n\
          \              28 MAKE_FUNCTION            8 (closure)\n              30\
          \ LOAD_FAST                1 (sample)\n              32 LOAD_ATTR      \
          \          2 (shape)\n              34 LOAD_CONST               6 (-2)\n\
          \              36 LOAD_CONST               3 (None)\n              38 BUILD_SLICE\
          \              2\n              40 BINARY_SUBSCR\n              42 GET_ITER\n\
          \              44 CALL_FUNCTION            1\n              46 CALL_FUNCTION\
          \            1\n              48 POP_JUMP_IF_FALSE       32 (to 64)\n\n\
          \ 762          50 LOAD_GLOBAL              3 (logger)\n              52\
          \ LOAD_METHOD              4 (info)\n              54 LOAD_CONST       \
          \        7 ('Forward upsample size to force interpolation output size.')\n\
          \              56 CALL_METHOD              1\n              58 POP_TOP\n\
          \n 763          60 LOAD_CONST               8 (True)\n              62 STORE_FAST\
          \              13 (forward_upsample_size)\n\n 773     >>   64 LOAD_FAST\
          \                6 (attention_mask)\n              66 LOAD_CONST       \
          \        3 (None)\n              68 IS_OP                    1\n       \
          \       70 POP_JUMP_IF_FALSE       51 (to 102)\n\n 778          72 LOAD_CONST\
          \               9 (1)\n              74 LOAD_FAST                6 (attention_mask)\n\
          \              76 LOAD_METHOD              5 (to)\n              78 LOAD_FAST\
          \                1 (sample)\n              80 LOAD_ATTR                6\
          \ (dtype)\n              82 CALL_METHOD              1\n              84\
          \ BINARY_SUBTRACT\n              86 LOAD_CONST              10 (-10000.0)\n\
          \              88 BINARY_MULTIPLY\n              90 STORE_FAST         \
          \      6 (attention_mask)\n\n 779          92 LOAD_FAST                6\
          \ (attention_mask)\n              94 LOAD_METHOD              7 (unsqueeze)\n\
          \              96 LOAD_CONST               9 (1)\n              98 CALL_METHOD\
          \              1\n             100 STORE_FAST               6 (attention_mask)\n\
          \n 782     >>  102 LOAD_FAST               11 (encoder_attention_mask)\n\
          \             104 LOAD_CONST               3 (None)\n             106 IS_OP\
          \                    1\n             108 POP_JUMP_IF_FALSE       70 (to\
          \ 140)\n\n 783         110 LOAD_CONST               9 (1)\n            \
          \ 112 LOAD_FAST               11 (encoder_attention_mask)\n            \
          \ 114 LOAD_METHOD              5 (to)\n             116 LOAD_FAST      \
          \          1 (sample)\n             118 LOAD_ATTR                6 (dtype)\n\
          \             120 CALL_METHOD              1\n             122 BINARY_SUBTRACT\n\
          \             124 LOAD_CONST              10 (-10000.0)\n             126\
          \ BINARY_MULTIPLY\n             128 STORE_FAST              11 (encoder_attention_mask)\n\
          \n 784         130 LOAD_FAST               11 (encoder_attention_mask)\n\
          \             132 LOAD_METHOD              7 (unsqueeze)\n             134\
          \ LOAD_CONST               9 (1)\n             136 CALL_METHOD         \
          \     1\n             138 STORE_FAST              11 (encoder_attention_mask)\n\
          \n 787     >>  140 LOAD_FAST                0 (self)\n             142 LOAD_ATTR\
          \                8 (config)\n             144 LOAD_ATTR                9\
          \ (center_input_sample)\n             146 POP_JUMP_IF_FALSE       80 (to\
          \ 160)\n\n 788         148 LOAD_CONST               1 (2)\n            \
          \ 150 LOAD_FAST                1 (sample)\n             152 BINARY_MULTIPLY\n\
          \             154 LOAD_CONST              11 (1.0)\n             156 BINARY_SUBTRACT\n\
          \             158 STORE_FAST               1 (sample)\n\n 791     >>  160\
          \ LOAD_FAST                2 (timestep)\n             162 STORE_FAST   \
          \           15 (timesteps)\n\n 792         164 LOAD_GLOBAL             10\
          \ (torch)\n             166 LOAD_METHOD             11 (is_tensor)\n   \
          \          168 LOAD_FAST               15 (timesteps)\n             170\
          \ CALL_METHOD              1\n             172 POP_JUMP_IF_TRUE       126\
          \ (to 252)\n\n 795         174 LOAD_FAST                1 (sample)\n   \
          \          176 LOAD_ATTR               12 (device)\n             178 LOAD_ATTR\
          \               13 (type)\n             180 LOAD_CONST              12 ('mps')\n\
          \             182 COMPARE_OP               2 (==)\n             184 STORE_FAST\
          \              16 (is_mps)\n\n 796         186 LOAD_GLOBAL             14\
          \ (isinstance)\n             188 LOAD_FAST                2 (timestep)\n\
          \             190 LOAD_GLOBAL             15 (float)\n             192 CALL_FUNCTION\
          \            2\n             194 POP_JUMP_IF_FALSE      107 (to 214)\n\n\
          \ 797         196 LOAD_FAST               16 (is_mps)\n             198\
          \ POP_JUMP_IF_FALSE      103 (to 206)\n             200 LOAD_GLOBAL    \
          \         10 (torch)\n             202 LOAD_ATTR               16 (float32)\n\
          \             204 JUMP_FORWARD             2 (to 210)\n         >>  206\
          \ LOAD_GLOBAL             10 (torch)\n             208 LOAD_ATTR       \
          \        17 (float64)\n         >>  210 STORE_FAST              17 (dtype)\n\
          \             212 JUMP_FORWARD             8 (to 230)\n\n 799     >>  214\
          \ LOAD_FAST               16 (is_mps)\n             216 POP_JUMP_IF_FALSE\
          \      112 (to 224)\n             218 LOAD_GLOBAL             10 (torch)\n\
          \             220 LOAD_ATTR               18 (int32)\n             222 JUMP_FORWARD\
          \             2 (to 228)\n         >>  224 LOAD_GLOBAL             10 (torch)\n\
          \             226 LOAD_ATTR               19 (int64)\n         >>  228 STORE_FAST\
          \              17 (dtype)\n\n 800     >>  230 LOAD_GLOBAL             10\
          \ (torch)\n             232 LOAD_ATTR               20 (tensor)\n      \
          \       234 LOAD_FAST               15 (timesteps)\n             236 BUILD_LIST\
          \               1\n             238 LOAD_FAST               17 (dtype)\n\
          \             240 LOAD_FAST                1 (sample)\n             242\
          \ LOAD_ATTR               12 (device)\n             244 LOAD_CONST     \
          \         13 (('dtype', 'device'))\n             246 CALL_FUNCTION_KW  \
          \       3\n             248 STORE_FAST              15 (timesteps)\n   \
          \          250 JUMP_FORWARD            15 (to 282)\n\n 801     >>  252 LOAD_GLOBAL\
          \             21 (len)\n             254 LOAD_FAST               15 (timesteps)\n\
          \             256 LOAD_ATTR                2 (shape)\n             258 CALL_FUNCTION\
          \            1\n             260 LOAD_CONST              14 (0)\n      \
          \       262 COMPARE_OP               2 (==)\n             264 POP_JUMP_IF_FALSE\
          \      141 (to 282)\n\n 802         266 LOAD_FAST               15 (timesteps)\n\
          \             268 LOAD_CONST               3 (None)\n             270 BINARY_SUBSCR\n\
          \             272 LOAD_METHOD              5 (to)\n             274 LOAD_FAST\
          \                1 (sample)\n             276 LOAD_ATTR               12\
          \ (device)\n             278 CALL_METHOD              1\n             280\
          \ STORE_FAST              15 (timesteps)\n\n 805     >>  282 LOAD_FAST \
          \              15 (timesteps)\n             284 LOAD_METHOD            \
          \ 22 (expand)\n             286 LOAD_FAST                1 (sample)\n  \
          \           288 LOAD_ATTR                2 (shape)\n             290 LOAD_CONST\
          \              14 (0)\n             292 BINARY_SUBSCR\n             294\
          \ CALL_METHOD              1\n             296 STORE_FAST              15\
          \ (timesteps)\n\n 807         298 LOAD_FAST                0 (self)\n  \
          \           300 LOAD_METHOD             23 (time_proj)\n             302\
          \ LOAD_FAST               15 (timesteps)\n             304 CALL_METHOD \
          \             1\n             306 STORE_FAST              18 (t_emb)\n\n\
          \ 812         308 LOAD_FAST               18 (t_emb)\n             310 LOAD_ATTR\
          \                5 (to)\n             312 LOAD_FAST                1 (sample)\n\
          \             314 LOAD_ATTR                6 (dtype)\n             316 LOAD_CONST\
          \              15 (('dtype',))\n             318 CALL_FUNCTION_KW      \
          \   1\n             320 STORE_FAST              18 (t_emb)\n\n 814     \
          \    322 LOAD_FAST                0 (self)\n             324 LOAD_METHOD\
          \             24 (time_embedding)\n             326 LOAD_FAST          \
          \     18 (t_emb)\n             328 LOAD_FAST                5 (timestep_cond)\n\
          \             330 CALL_METHOD              2\n             332 STORE_FAST\
          \              19 (emb)\n\n 815         334 LOAD_CONST               3 (None)\n\
          \             336 STORE_FAST              20 (aug_emb)\n\n 817         338\
          \ LOAD_FAST                0 (self)\n             340 LOAD_ATTR        \
          \       25 (class_embedding)\n             342 LOAD_CONST              \
          \ 3 (None)\n             344 IS_OP                    1\n             346\
          \ POP_JUMP_IF_FALSE      228 (to 456)\n\n 818         348 LOAD_FAST    \
          \            4 (class_labels)\n             350 LOAD_CONST             \
          \  3 (None)\n             352 IS_OP                    0\n             354\
          \ POP_JUMP_IF_FALSE      182 (to 364)\n\n 819         356 LOAD_GLOBAL  \
          \           26 (ValueError)\n             358 LOAD_CONST              16\
          \ ('class_labels should be provided when num_class_embeds > 0')\n      \
          \       360 CALL_FUNCTION            1\n             362 RAISE_VARARGS \
          \           1\n\n 821     >>  364 LOAD_FAST                0 (self)\n  \
          \           366 LOAD_ATTR                8 (config)\n             368 LOAD_ATTR\
          \               27 (class_embed_type)\n             370 LOAD_CONST     \
          \         17 ('timestep')\n             372 COMPARE_OP               2 (==)\n\
          \             374 POP_JUMP_IF_FALSE      200 (to 400)\n\n 822         376\
          \ LOAD_FAST                0 (self)\n             378 LOAD_METHOD      \
          \       23 (time_proj)\n             380 LOAD_FAST                4 (class_labels)\n\
          \             382 CALL_METHOD              1\n             384 STORE_FAST\
          \               4 (class_labels)\n\n 826         386 LOAD_FAST         \
          \       4 (class_labels)\n             388 LOAD_ATTR                5 (to)\n\
          \             390 LOAD_FAST                1 (sample)\n             392\
          \ LOAD_ATTR                6 (dtype)\n             394 LOAD_CONST      \
          \        15 (('dtype',))\n             396 CALL_FUNCTION_KW         1\n\
          \             398 STORE_FAST               4 (class_labels)\n\n 828    \
          \ >>  400 LOAD_FAST                0 (self)\n             402 LOAD_METHOD\
          \             25 (class_embedding)\n             404 LOAD_FAST         \
          \       4 (class_labels)\n             406 CALL_METHOD              1\n\
          \             408 LOAD_ATTR                5 (to)\n             410 LOAD_FAST\
          \                1 (sample)\n             412 LOAD_ATTR                6\
          \ (dtype)\n             414 LOAD_CONST              15 (('dtype',))\n  \
          \           416 CALL_FUNCTION_KW         1\n             418 STORE_FAST\
          \              21 (class_emb)\n\n 830         420 LOAD_FAST            \
          \    0 (self)\n             422 LOAD_ATTR                8 (config)\n  \
          \           424 LOAD_ATTR               28 (class_embeddings_concat)\n \
          \            426 POP_JUMP_IF_FALSE      224 (to 448)\n\n 831         428\
          \ LOAD_GLOBAL             10 (torch)\n             430 LOAD_ATTR       \
          \        29 (cat)\n             432 LOAD_FAST               19 (emb)\n \
          \            434 LOAD_FAST               21 (class_emb)\n             436\
          \ BUILD_LIST               2\n             438 LOAD_CONST              18\
          \ (-1)\n             440 LOAD_CONST              19 (('dim',))\n       \
          \      442 CALL_FUNCTION_KW         2\n             444 STORE_FAST     \
          \         19 (emb)\n             446 JUMP_FORWARD             4 (to 456)\n\
          \n 833     >>  448 LOAD_FAST               19 (emb)\n             450 LOAD_FAST\
          \               21 (class_emb)\n             452 BINARY_ADD\n          \
          \   454 STORE_FAST              19 (emb)\n\n 835     >>  456 LOAD_FAST \
          \               0 (self)\n             458 LOAD_ATTR                8 (config)\n\
          \             460 LOAD_ATTR               30 (addition_embed_type)\n   \
          \          462 LOAD_CONST              20 ('text')\n             464 COMPARE_OP\
          \               2 (==)\n             466 POP_JUMP_IF_FALSE      240 (to\
          \ 480)\n\n 836         468 LOAD_FAST                0 (self)\n         \
          \    470 LOAD_METHOD             31 (add_embedding)\n             472 LOAD_FAST\
          \                3 (encoder_hidden_states)\n             474 CALL_METHOD\
          \              1\n             476 STORE_FAST              20 (aug_emb)\n\
          \             478 JUMP_FORWARD           202 (to 884)\n\n 837     >>  480\
          \ LOAD_FAST                0 (self)\n             482 LOAD_ATTR        \
          \        8 (config)\n             484 LOAD_ATTR               30 (addition_embed_type)\n\
          \             486 LOAD_CONST              21 ('text_image')\n          \
          \   488 COMPARE_OP               2 (==)\n             490 EXTENDED_ARG \
          \            1\n             492 POP_JUMP_IF_FALSE      278 (to 556)\n\n\
          \ 839         494 LOAD_CONST              22 ('image_embeds')\n        \
          \     496 LOAD_FAST                8 (added_cond_kwargs)\n             498\
          \ CONTAINS_OP              1\n             500 EXTENDED_ARG            \
          \ 1\n             502 POP_JUMP_IF_FALSE      260 (to 520)\n\n 840      \
          \   504 LOAD_GLOBAL             26 (ValueError)\n\n 841         506 LOAD_FAST\
          \                0 (self)\n             508 LOAD_ATTR               32 (__class__)\n\
          \             510 FORMAT_VALUE             0\n             512 LOAD_CONST\
          \              23 (\" has the config param `addition_embed_type` set to\
          \ 'text_image' which requires the keyword argument `image_embeds` to be\
          \ passed in `added_cond_kwargs`\")\n             514 BUILD_STRING      \
          \       2\n\n 840         516 CALL_FUNCTION            1\n             518\
          \ RAISE_VARARGS            1\n\n 844     >>  520 LOAD_FAST             \
          \   8 (added_cond_kwargs)\n             522 LOAD_METHOD             33 (get)\n\
          \             524 LOAD_CONST              22 ('image_embeds')\n        \
          \     526 CALL_METHOD              1\n             528 STORE_FAST      \
          \        22 (image_embs)\n\n 845         530 LOAD_FAST                8\
          \ (added_cond_kwargs)\n             532 LOAD_METHOD             33 (get)\n\
          \             534 LOAD_CONST              24 ('text_embeds')\n         \
          \    536 LOAD_FAST                3 (encoder_hidden_states)\n          \
          \   538 CALL_METHOD              2\n             540 STORE_FAST        \
          \      23 (text_embs)\n\n 846         542 LOAD_FAST                0 (self)\n\
          \             544 LOAD_METHOD             31 (add_embedding)\n         \
          \    546 LOAD_FAST               23 (text_embs)\n             548 LOAD_FAST\
          \               22 (image_embs)\n             550 CALL_METHOD          \
          \    2\n             552 STORE_FAST              20 (aug_emb)\n        \
          \     554 JUMP_FORWARD           164 (to 884)\n\n 847     >>  556 LOAD_FAST\
          \                0 (self)\n             558 LOAD_ATTR                8 (config)\n\
          \             560 LOAD_ATTR               30 (addition_embed_type)\n   \
          \          562 LOAD_CONST              25 ('text_time')\n             564\
          \ COMPARE_OP               2 (==)\n             566 EXTENDED_ARG       \
          \      1\n             568 POP_JUMP_IF_FALSE      359 (to 718)\n\n 849 \
          \        570 LOAD_CONST              24 ('text_embeds')\n             572\
          \ LOAD_FAST                8 (added_cond_kwargs)\n             574 CONTAINS_OP\
          \              1\n             576 EXTENDED_ARG             1\n        \
          \     578 POP_JUMP_IF_FALSE      298 (to 596)\n\n 850         580 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 851         582 LOAD_FAST            \
          \    0 (self)\n             584 LOAD_ATTR               32 (__class__)\n\
          \             586 FORMAT_VALUE             0\n             588 LOAD_CONST\
          \              26 (\" has the config param `addition_embed_type` set to\
          \ 'text_time' which requires the keyword argument `text_embeds` to be passed\
          \ in `added_cond_kwargs`\")\n             590 BUILD_STRING             2\n\
          \n 850         592 CALL_FUNCTION            1\n             594 RAISE_VARARGS\
          \            1\n\n 853     >>  596 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             598 LOAD_METHOD             33 (get)\n             600 LOAD_CONST\
          \              24 ('text_embeds')\n             602 CALL_METHOD        \
          \      1\n             604 STORE_FAST              24 (text_embeds)\n\n\
          \ 854         606 LOAD_CONST              27 ('time_ids')\n            \
          \ 608 LOAD_FAST                8 (added_cond_kwargs)\n             610 CONTAINS_OP\
          \              1\n             612 EXTENDED_ARG             1\n        \
          \     614 POP_JUMP_IF_FALSE      316 (to 632)\n\n 855         616 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 856         618 LOAD_FAST            \
          \    0 (self)\n             620 LOAD_ATTR               32 (__class__)\n\
          \             622 FORMAT_VALUE             0\n             624 LOAD_CONST\
          \              28 (\" has the config param `addition_embed_type` set to\
          \ 'text_time' which requires the keyword argument `time_ids` to be passed\
          \ in `added_cond_kwargs`\")\n             626 BUILD_STRING             2\n\
          \n 855         628 CALL_FUNCTION            1\n             630 RAISE_VARARGS\
          \            1\n\n 858     >>  632 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             634 LOAD_METHOD             33 (get)\n             636 LOAD_CONST\
          \              27 ('time_ids')\n             638 CALL_METHOD           \
          \   1\n             640 STORE_FAST              25 (time_ids)\n\n 859  \
          \       642 LOAD_FAST                0 (self)\n             644 LOAD_METHOD\
          \             34 (add_time_proj)\n             646 LOAD_FAST           \
          \    25 (time_ids)\n             648 LOAD_METHOD             35 (flatten)\n\
          \             650 CALL_METHOD              0\n             652 CALL_METHOD\
          \              1\n             654 STORE_FAST              26 (time_embeds)\n\
          \n 860         656 LOAD_FAST               26 (time_embeds)\n          \
          \   658 LOAD_METHOD             36 (reshape)\n             660 LOAD_FAST\
          \               24 (text_embeds)\n             662 LOAD_ATTR           \
          \     2 (shape)\n             664 LOAD_CONST              14 (0)\n     \
          \        666 BINARY_SUBSCR\n             668 LOAD_CONST              18\
          \ (-1)\n             670 BUILD_TUPLE              2\n             672 CALL_METHOD\
          \              1\n             674 STORE_FAST              26 (time_embeds)\n\
          \n 862         676 LOAD_GLOBAL             10 (torch)\n             678\
          \ LOAD_ATTR               37 (concat)\n             680 LOAD_FAST      \
          \         24 (text_embeds)\n             682 LOAD_FAST               26\
          \ (time_embeds)\n             684 BUILD_LIST               2\n         \
          \    686 LOAD_CONST              18 (-1)\n             688 LOAD_CONST  \
          \            19 (('dim',))\n             690 CALL_FUNCTION_KW         2\n\
          \             692 STORE_FAST              27 (add_embeds)\n\n 863      \
          \   694 LOAD_FAST               27 (add_embeds)\n             696 LOAD_METHOD\
          \              5 (to)\n             698 LOAD_FAST               19 (emb)\n\
          \             700 LOAD_ATTR                6 (dtype)\n             702 CALL_METHOD\
          \              1\n             704 STORE_FAST              27 (add_embeds)\n\
          \n 864         706 LOAD_FAST                0 (self)\n             708 LOAD_METHOD\
          \             31 (add_embedding)\n             710 LOAD_FAST           \
          \    27 (add_embeds)\n             712 CALL_METHOD              1\n    \
          \         714 STORE_FAST              20 (aug_emb)\n             716 JUMP_FORWARD\
          \            83 (to 884)\n\n 865     >>  718 LOAD_FAST                0\
          \ (self)\n             720 LOAD_ATTR                8 (config)\n       \
          \      722 LOAD_ATTR               30 (addition_embed_type)\n          \
          \   724 LOAD_CONST              29 ('image')\n             726 COMPARE_OP\
          \               2 (==)\n             728 EXTENDED_ARG             1\n  \
          \           730 POP_JUMP_IF_FALSE      390 (to 780)\n\n 867         732\
          \ LOAD_CONST              22 ('image_embeds')\n             734 LOAD_FAST\
          \                8 (added_cond_kwargs)\n             736 CONTAINS_OP   \
          \           1\n             738 EXTENDED_ARG             1\n           \
          \  740 POP_JUMP_IF_FALSE      379 (to 758)\n\n 868         742 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 869         744 LOAD_FAST            \
          \    0 (self)\n             746 LOAD_ATTR               32 (__class__)\n\
          \             748 FORMAT_VALUE             0\n             750 LOAD_CONST\
          \              30 (\" has the config param `addition_embed_type` set to\
          \ 'image' which requires the keyword argument `image_embeds` to be passed\
          \ in `added_cond_kwargs`\")\n             752 BUILD_STRING             2\n\
          \n 868         754 CALL_FUNCTION            1\n             756 RAISE_VARARGS\
          \            1\n\n 871     >>  758 LOAD_FAST                8 (added_cond_kwargs)\n\
          \             760 LOAD_METHOD             33 (get)\n             762 LOAD_CONST\
          \              22 ('image_embeds')\n             764 CALL_METHOD       \
          \       1\n             766 STORE_FAST              22 (image_embs)\n\n\
          \ 872         768 LOAD_FAST                0 (self)\n             770 LOAD_METHOD\
          \             31 (add_embedding)\n             772 LOAD_FAST           \
          \    22 (image_embs)\n             774 CALL_METHOD              1\n    \
          \         776 STORE_FAST              20 (aug_emb)\n             778 JUMP_FORWARD\
          \            52 (to 884)\n\n 873     >>  780 LOAD_FAST                0\
          \ (self)\n             782 LOAD_ATTR                8 (config)\n       \
          \      784 LOAD_ATTR               30 (addition_embed_type)\n          \
          \   786 LOAD_CONST              31 ('image_hint')\n             788 COMPARE_OP\
          \               2 (==)\n             790 EXTENDED_ARG             1\n  \
          \           792 POP_JUMP_IF_FALSE      442 (to 884)\n\n 875         794\
          \ LOAD_CONST              22 ('image_embeds')\n             796 LOAD_FAST\
          \                8 (added_cond_kwargs)\n             798 CONTAINS_OP   \
          \           1\n             800 EXTENDED_ARG             1\n           \
          \  802 POP_JUMP_IF_TRUE       407 (to 814)\n             804 LOAD_CONST\
          \              32 ('hint')\n             806 LOAD_FAST                8\
          \ (added_cond_kwargs)\n             808 CONTAINS_OP              1\n   \
          \          810 EXTENDED_ARG             1\n             812 POP_JUMP_IF_FALSE\
          \      415 (to 830)\n\n 876     >>  814 LOAD_GLOBAL             26 (ValueError)\n\
          \n 877         816 LOAD_FAST                0 (self)\n             818 LOAD_ATTR\
          \               32 (__class__)\n             820 FORMAT_VALUE          \
          \   0\n             822 LOAD_CONST              33 (\" has the config param\
          \ `addition_embed_type` set to 'image_hint' which requires the keyword arguments\
          \ `image_embeds` and `hint` to be passed in `added_cond_kwargs`\")\n   \
          \          824 BUILD_STRING             2\n\n 876         826 CALL_FUNCTION\
          \            1\n             828 RAISE_VARARGS            1\n\n 879    \
          \ >>  830 LOAD_FAST                8 (added_cond_kwargs)\n             832\
          \ LOAD_METHOD             33 (get)\n             834 LOAD_CONST        \
          \      22 ('image_embeds')\n             836 CALL_METHOD              1\n\
          \             838 STORE_FAST              22 (image_embs)\n\n 880      \
          \   840 LOAD_FAST                8 (added_cond_kwargs)\n             842\
          \ LOAD_METHOD             33 (get)\n             844 LOAD_CONST        \
          \      32 ('hint')\n             846 CALL_METHOD              1\n      \
          \       848 STORE_FAST              28 (hint)\n\n 881         850 LOAD_FAST\
          \                0 (self)\n             852 LOAD_METHOD             31 (add_embedding)\n\
          \             854 LOAD_FAST               22 (image_embs)\n            \
          \ 856 LOAD_FAST               28 (hint)\n             858 CALL_METHOD  \
          \            2\n             860 UNPACK_SEQUENCE          2\n          \
          \   862 STORE_FAST              20 (aug_emb)\n             864 STORE_FAST\
          \              28 (hint)\n\n 882         866 LOAD_GLOBAL             10\
          \ (torch)\n             868 LOAD_ATTR               29 (cat)\n         \
          \    870 LOAD_FAST                1 (sample)\n             872 LOAD_FAST\
          \               28 (hint)\n             874 BUILD_LIST               2\n\
          \             876 LOAD_CONST               9 (1)\n             878 LOAD_CONST\
          \              19 (('dim',))\n             880 CALL_FUNCTION_KW        \
          \ 2\n             882 STORE_FAST               1 (sample)\n\n 884     >>\
          \  884 LOAD_FAST               20 (aug_emb)\n             886 LOAD_CONST\
          \               3 (None)\n             888 IS_OP                    1\n\
          \             890 EXTENDED_ARG             1\n             892 POP_JUMP_IF_FALSE\
          \      451 (to 902)\n             894 LOAD_FAST               19 (emb)\n\
          \             896 LOAD_FAST               20 (aug_emb)\n             898\
          \ BINARY_ADD\n             900 JUMP_FORWARD             1 (to 904)\n   \
          \      >>  902 LOAD_FAST               19 (emb)\n         >>  904 STORE_FAST\
          \              19 (emb)\n\n 886         906 LOAD_FAST                0 (self)\n\
          \             908 LOAD_ATTR               38 (time_embed_act)\n        \
          \     910 LOAD_CONST               3 (None)\n             912 IS_OP    \
          \                1\n             914 EXTENDED_ARG             1\n      \
          \       916 POP_JUMP_IF_FALSE      464 (to 928)\n\n 887         918 LOAD_FAST\
          \                0 (self)\n             920 LOAD_METHOD             38 (time_embed_act)\n\
          \             922 LOAD_FAST               19 (emb)\n             924 CALL_METHOD\
          \              1\n             926 STORE_FAST              19 (emb)\n\n\
          \ 889     >>  928 LOAD_FAST                0 (self)\n             930 LOAD_ATTR\
          \               39 (encoder_hid_proj)\n             932 LOAD_CONST     \
          \          3 (None)\n             934 IS_OP                    1\n     \
          \        936 EXTENDED_ARG             1\n             938 POP_JUMP_IF_FALSE\
          \      483 (to 966)\n             940 LOAD_FAST                0 (self)\n\
          \             942 LOAD_ATTR                8 (config)\n             944\
          \ LOAD_ATTR               40 (encoder_hid_dim_type)\n             946 LOAD_CONST\
          \              34 ('text_proj')\n             948 COMPARE_OP           \
          \    2 (==)\n             950 EXTENDED_ARG             1\n             952\
          \ POP_JUMP_IF_FALSE      483 (to 966)\n\n 890         954 LOAD_FAST    \
          \            0 (self)\n             956 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \             958 LOAD_FAST                3 (encoder_hidden_states)\n \
          \            960 CALL_METHOD              1\n             962 STORE_FAST\
          \               3 (encoder_hidden_states)\n             964 JUMP_FORWARD\
          \            74 (to 1114)\n\n 891     >>  966 LOAD_FAST                0\
          \ (self)\n             968 LOAD_ATTR               39 (encoder_hid_proj)\n\
          \             970 LOAD_CONST               3 (None)\n             972 IS_OP\
          \                    1\n             974 EXTENDED_ARG             2\n  \
          \           976 POP_JUMP_IF_FALSE      521 (to 1042)\n             978 LOAD_FAST\
          \                0 (self)\n             980 LOAD_ATTR                8 (config)\n\
          \             982 LOAD_ATTR               40 (encoder_hid_dim_type)\n  \
          \           984 LOAD_CONST              35 ('text_image_proj')\n       \
          \      986 COMPARE_OP               2 (==)\n             988 EXTENDED_ARG\
          \             2\n             990 POP_JUMP_IF_FALSE      521 (to 1042)\n\
          \n 893         992 LOAD_CONST              22 ('image_embeds')\n       \
          \      994 LOAD_FAST                8 (added_cond_kwargs)\n            \
          \ 996 CONTAINS_OP              1\n             998 EXTENDED_ARG        \
          \     1\n            1000 POP_JUMP_IF_FALSE      509 (to 1018)\n\n 894 \
          \       1002 LOAD_GLOBAL             26 (ValueError)\n\n 895        1004\
          \ LOAD_FAST                0 (self)\n            1006 LOAD_ATTR        \
          \       32 (__class__)\n            1008 FORMAT_VALUE             0\n  \
          \          1010 LOAD_CONST              36 (\" has the config param `encoder_hid_dim_type`\
          \ set to 'text_image_proj' which requires the keyword argument `image_embeds`\
          \ to be passed in  `added_conditions`\")\n            1012 BUILD_STRING\
          \             2\n\n 894        1014 CALL_FUNCTION            1\n       \
          \     1016 RAISE_VARARGS            1\n\n 898     >> 1018 LOAD_FAST    \
          \            8 (added_cond_kwargs)\n            1020 LOAD_METHOD       \
          \      33 (get)\n            1022 LOAD_CONST              22 ('image_embeds')\n\
          \            1024 CALL_METHOD              1\n            1026 STORE_FAST\
          \              29 (image_embeds)\n\n 899        1028 LOAD_FAST         \
          \       0 (self)\n            1030 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \            1032 LOAD_FAST                3 (encoder_hidden_states)\n \
          \           1034 LOAD_FAST               29 (image_embeds)\n           \
          \ 1036 CALL_METHOD              2\n            1038 STORE_FAST         \
          \      3 (encoder_hidden_states)\n            1040 JUMP_FORWARD        \
          \    36 (to 1114)\n\n 900     >> 1042 LOAD_FAST                0 (self)\n\
          \            1044 LOAD_ATTR               39 (encoder_hid_proj)\n      \
          \      1046 LOAD_CONST               3 (None)\n            1048 IS_OP  \
          \                  1\n            1050 EXTENDED_ARG             2\n    \
          \        1052 POP_JUMP_IF_FALSE      557 (to 1114)\n            1054 LOAD_FAST\
          \                0 (self)\n            1056 LOAD_ATTR                8 (config)\n\
          \            1058 LOAD_ATTR               40 (encoder_hid_dim_type)\n  \
          \          1060 LOAD_CONST              37 ('image_proj')\n            1062\
          \ COMPARE_OP               2 (==)\n            1064 EXTENDED_ARG       \
          \      2\n            1066 POP_JUMP_IF_FALSE      557 (to 1114)\n\n 902\
          \        1068 LOAD_CONST              22 ('image_embeds')\n            1070\
          \ LOAD_FAST                8 (added_cond_kwargs)\n            1072 CONTAINS_OP\
          \              1\n            1074 EXTENDED_ARG             2\n        \
          \    1076 POP_JUMP_IF_FALSE      547 (to 1094)\n\n 903        1078 LOAD_GLOBAL\
          \             26 (ValueError)\n\n 904        1080 LOAD_FAST            \
          \    0 (self)\n            1082 LOAD_ATTR               32 (__class__)\n\
          \            1084 FORMAT_VALUE             0\n            1086 LOAD_CONST\
          \              38 (\" has the config param `encoder_hid_dim_type` set to\
          \ 'image_proj' which requires the keyword argument `image_embeds` to be\
          \ passed in  `added_conditions`\")\n            1088 BUILD_STRING      \
          \       2\n\n 903        1090 CALL_FUNCTION            1\n            1092\
          \ RAISE_VARARGS            1\n\n 906     >> 1094 LOAD_FAST             \
          \   8 (added_cond_kwargs)\n            1096 LOAD_METHOD             33 (get)\n\
          \            1098 LOAD_CONST              22 ('image_embeds')\n        \
          \    1100 CALL_METHOD              1\n            1102 STORE_FAST      \
          \        29 (image_embeds)\n\n 907        1104 LOAD_FAST               \
          \ 0 (self)\n            1106 LOAD_METHOD             39 (encoder_hid_proj)\n\
          \            1108 LOAD_FAST               29 (image_embeds)\n          \
          \  1110 CALL_METHOD              1\n            1112 STORE_FAST        \
          \       3 (encoder_hidden_states)\n\n 909     >> 1114 LOAD_FAST        \
          \        0 (self)\n            1116 LOAD_METHOD             41 (conv_in)\n\
          \            1118 LOAD_FAST                1 (sample)\n            1120\
          \ CALL_METHOD              1\n            1122 STORE_FAST              \
          \ 1 (sample)\n\n 912        1124 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1126 LOAD_CONST               3 (None)\n            1128 IS_OP\
          \                    1\n            1130 EXTENDED_ARG             2\n  \
          \          1132 POP_JUMP_IF_FALSE      597 (to 1194)\n            1134 LOAD_FAST\
          \                7 (cross_attention_kwargs)\n            1136 LOAD_METHOD\
          \             33 (get)\n            1138 LOAD_CONST              39 ('gligen')\n\
          \            1140 LOAD_CONST               3 (None)\n            1142 CALL_METHOD\
          \              2\n            1144 LOAD_CONST               3 (None)\n \
          \           1146 IS_OP                    1\n            1148 EXTENDED_ARG\
          \             2\n            1150 POP_JUMP_IF_FALSE      597 (to 1194)\n\
          \n 913        1152 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1154 LOAD_METHOD             42 (copy)\n            1156 CALL_METHOD\
          \              0\n            1158 STORE_FAST               7 (cross_attention_kwargs)\n\
          \n 914        1160 LOAD_FAST                7 (cross_attention_kwargs)\n\
          \            1162 LOAD_METHOD             43 (pop)\n            1164 LOAD_CONST\
          \              39 ('gligen')\n            1166 CALL_METHOD             \
          \ 1\n            1168 STORE_FAST              30 (gligen_args)\n\n 915 \
          \       1170 LOAD_CONST              40 ('objs')\n            1172 LOAD_FAST\
          \                0 (self)\n            1174 LOAD_ATTR               44 (position_net)\n\
          \            1176 LOAD_CONST              45 (())\n            1178 BUILD_MAP\
          \                0\n            1180 LOAD_FAST               30 (gligen_args)\n\
          \            1182 DICT_MERGE               1\n            1184 CALL_FUNCTION_EX\
          \         1\n            1186 BUILD_MAP                1\n            1188\
          \ LOAD_FAST                7 (cross_attention_kwargs)\n            1190\
          \ LOAD_CONST              39 ('gligen')\n            1192 STORE_SUBSCR\n\
          \n 919     >> 1194 LOAD_FAST               10 (mid_block_additional_residual)\n\
          \            1196 LOAD_CONST               3 (None)\n            1198 IS_OP\
          \                    1\n            1200 EXTENDED_ARG             2\n  \
          \          1202 JUMP_IF_FALSE_OR_POP   605 (to 1210)\n            1204 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1206 LOAD_CONST\
          \               3 (None)\n            1208 IS_OP                    1\n\
          \         >> 1210 STORE_FAST              31 (is_controlnet)\n\n 920   \
          \     1212 LOAD_FAST               10 (mid_block_additional_residual)\n\
          \            1214 LOAD_CONST               3 (None)\n            1216 IS_OP\
          \                    0\n            1218 EXTENDED_ARG             2\n  \
          \          1220 JUMP_IF_FALSE_OR_POP   614 (to 1228)\n            1222 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1224 LOAD_CONST\
          \               3 (None)\n            1226 IS_OP                    1\n\
          \         >> 1228 STORE_FAST              32 (is_adapter)\n\n 922      \
          \  1230 LOAD_FAST                1 (sample)\n            1232 BUILD_TUPLE\
          \              1\n            1234 STORE_FAST              33 (down_block_res_samples)\n\
          \n 923        1236 LOAD_FAST                0 (self)\n            1238 LOAD_ATTR\
          \               45 (down_blocks)\n            1240 GET_ITER\n         >>\
          \ 1242 FOR_ITER                78 (to 1400)\n            1244 STORE_FAST\
          \              34 (downsample_block)\n\n 924        1246 LOAD_GLOBAL   \
          \          46 (hasattr)\n            1248 LOAD_FAST               34 (downsample_block)\n\
          \            1250 LOAD_CONST              41 ('has_cross_attention')\n \
          \           1252 CALL_FUNCTION            2\n            1254 EXTENDED_ARG\
          \             2\n            1256 POP_JUMP_IF_FALSE      669 (to 1338)\n\
          \            1258 LOAD_FAST               34 (downsample_block)\n      \
          \      1260 LOAD_ATTR               47 (has_cross_attention)\n         \
          \   1262 EXTENDED_ARG             2\n            1264 POP_JUMP_IF_FALSE\
          \      669 (to 1338)\n\n 926        1266 BUILD_MAP                0\n  \
          \          1268 STORE_FAST              35 (additional_residuals)\n\n 927\
          \        1270 LOAD_FAST               32 (is_adapter)\n            1272\
          \ EXTENDED_ARG             2\n            1274 POP_JUMP_IF_FALSE      652\
          \ (to 1304)\n            1276 LOAD_GLOBAL             21 (len)\n       \
          \     1278 LOAD_FAST                9 (down_block_additional_residuals)\n\
          \            1280 CALL_FUNCTION            1\n            1282 LOAD_CONST\
          \              14 (0)\n            1284 COMPARE_OP               4 (>)\n\
          \            1286 EXTENDED_ARG             2\n            1288 POP_JUMP_IF_FALSE\
          \      652 (to 1304)\n\n 928        1290 LOAD_FAST                9 (down_block_additional_residuals)\n\
          \            1292 LOAD_METHOD             43 (pop)\n            1294 LOAD_CONST\
          \              14 (0)\n            1296 CALL_METHOD              1\n   \
          \         1298 LOAD_FAST               35 (additional_residuals)\n     \
          \       1300 LOAD_CONST              42 ('additional_residuals')\n     \
          \       1302 STORE_SUBSCR\n\n 930     >> 1304 LOAD_FAST               34\
          \ (downsample_block)\n            1306 LOAD_CONST              45 (())\n\
          \n 931        1308 LOAD_FAST                1 (sample)\n\n 932        1310\
          \ LOAD_FAST               19 (emb)\n\n 933        1312 LOAD_FAST       \
          \         3 (encoder_hidden_states)\n\n 934        1314 LOAD_FAST      \
          \          6 (attention_mask)\n\n 935        1316 LOAD_FAST            \
          \    7 (cross_attention_kwargs)\n\n 936        1318 LOAD_FAST          \
          \     11 (encoder_attention_mask)\n\n 930        1320 LOAD_CONST       \
          \       43 (('hidden_states', 'temb', 'encoder_hidden_states', 'attention_mask',\
          \ 'cross_attention_kwargs', 'encoder_attention_mask'))\n            1322\
          \ BUILD_CONST_KEY_MAP      6\n\n 937        1324 LOAD_FAST             \
          \  35 (additional_residuals)\n\n 930        1326 DICT_MERGE            \
          \   1\n            1328 CALL_FUNCTION_EX         1\n            1330 UNPACK_SEQUENCE\
          \          2\n            1332 STORE_FAST               1 (sample)\n   \
          \         1334 STORE_FAST              36 (res_samples)\n            1336\
          \ JUMP_FORWARD            25 (to 1388)\n\n 940     >> 1338 LOAD_FAST   \
          \            34 (downsample_block)\n            1340 LOAD_FAST         \
          \       1 (sample)\n            1342 LOAD_FAST               19 (emb)\n\
          \            1344 LOAD_CONST              44 (('hidden_states', 'temb'))\n\
          \            1346 CALL_FUNCTION_KW         2\n            1348 UNPACK_SEQUENCE\
          \          2\n            1350 STORE_FAST               1 (sample)\n   \
          \         1352 STORE_FAST              36 (res_samples)\n\n 942        1354\
          \ LOAD_FAST               32 (is_adapter)\n            1356 EXTENDED_ARG\
          \             2\n            1358 POP_JUMP_IF_FALSE      694 (to 1388)\n\
          \            1360 LOAD_GLOBAL             21 (len)\n            1362 LOAD_FAST\
          \                9 (down_block_additional_residuals)\n            1364 CALL_FUNCTION\
          \            1\n            1366 LOAD_CONST              14 (0)\n      \
          \      1368 COMPARE_OP               4 (>)\n            1370 EXTENDED_ARG\
          \             2\n            1372 POP_JUMP_IF_FALSE      694 (to 1388)\n\
          \n 943        1374 LOAD_FAST                1 (sample)\n            1376\
          \ LOAD_FAST                9 (down_block_additional_residuals)\n       \
          \     1378 LOAD_METHOD             43 (pop)\n            1380 LOAD_CONST\
          \              14 (0)\n            1382 CALL_METHOD              1\n   \
          \         1384 INPLACE_ADD\n            1386 STORE_FAST               1\
          \ (sample)\n\n 945     >> 1388 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1390 LOAD_FAST               36 (res_samples)\n           \
          \ 1392 INPLACE_ADD\n            1394 STORE_FAST              33 (down_block_res_samples)\n\
          \            1396 EXTENDED_ARG             2\n            1398 JUMP_ABSOLUTE\
          \          621 (to 1242)\n\n 947     >> 1400 LOAD_FAST               31\
          \ (is_controlnet)\n            1402 EXTENDED_ARG             2\n       \
          \     1404 POP_JUMP_IF_FALSE      727 (to 1454)\n\n 948        1406 LOAD_CONST\
          \              45 (())\n            1408 STORE_FAST              37 (new_down_block_res_samples)\n\
          \n 950        1410 LOAD_GLOBAL             48 (zip)\n\n 951        1412\
          \ LOAD_FAST               33 (down_block_res_samples)\n            1414\
          \ LOAD_FAST                9 (down_block_additional_residuals)\n\n 950 \
          \       1416 CALL_FUNCTION            2\n            1418 GET_ITER\n   \
          \      >> 1420 FOR_ITER                14 (to 1450)\n            1422 UNPACK_SEQUENCE\
          \          2\n            1424 STORE_FAST              38 (down_block_res_sample)\n\
          \            1426 STORE_FAST              39 (down_block_additional_residual)\n\
          \n 953        1428 LOAD_FAST               38 (down_block_res_sample)\n\
          \            1430 LOAD_FAST               39 (down_block_additional_residual)\n\
          \            1432 BINARY_ADD\n            1434 STORE_FAST              38\
          \ (down_block_res_sample)\n\n 954        1436 LOAD_FAST               37\
          \ (new_down_block_res_samples)\n            1438 LOAD_FAST             \
          \  38 (down_block_res_sample)\n            1440 BUILD_TUPLE            \
          \  1\n            1442 BINARY_ADD\n            1444 STORE_FAST         \
          \     37 (new_down_block_res_samples)\n            1446 EXTENDED_ARG   \
          \          2\n            1448 JUMP_ABSOLUTE          710 (to 1420)\n\n\
          \ 956     >> 1450 LOAD_FAST               37 (new_down_block_res_samples)\n\
          \            1452 STORE_FAST              33 (down_block_res_samples)\n\n\
          \ 959     >> 1454 LOAD_FAST                0 (self)\n            1456 LOAD_ATTR\
          \               49 (mid_block)\n            1458 LOAD_CONST            \
          \   3 (None)\n            1460 IS_OP                    1\n            1462\
          \ EXTENDED_ARG             2\n            1464 POP_JUMP_IF_FALSE      744\
          \ (to 1488)\n\n 960        1466 LOAD_FAST                0 (self)\n    \
          \        1468 LOAD_ATTR               49 (mid_block)\n\n 961        1470\
          \ LOAD_FAST                1 (sample)\n\n 962        1472 LOAD_FAST    \
          \           19 (emb)\n\n 963        1474 LOAD_FAST                3 (encoder_hidden_states)\n\
          \n 964        1476 LOAD_FAST                6 (attention_mask)\n\n 965 \
          \       1478 LOAD_FAST                7 (cross_attention_kwargs)\n\n 966\
          \        1480 LOAD_FAST               11 (encoder_attention_mask)\n\n 960\
          \        1482 LOAD_CONST              46 (('encoder_hidden_states', 'attention_mask',\
          \ 'cross_attention_kwargs', 'encoder_attention_mask'))\n            1484\
          \ CALL_FUNCTION_KW         6\n            1486 STORE_FAST              \
          \ 1 (sample)\n\n 969     >> 1488 LOAD_FAST               31 (is_controlnet)\n\
          \            1490 EXTENDED_ARG             2\n            1492 POP_JUMP_IF_FALSE\
          \      751 (to 1502)\n\n 970        1494 LOAD_FAST                1 (sample)\n\
          \            1496 LOAD_FAST               10 (mid_block_additional_residual)\n\
          \            1498 BINARY_ADD\n            1500 STORE_FAST              \
          \ 1 (sample)\n\n 973     >> 1502 LOAD_GLOBAL             50 (enumerate)\n\
          \            1504 LOAD_FAST                0 (self)\n            1506 LOAD_ATTR\
          \               51 (up_blocks)\n            1508 CALL_FUNCTION         \
          \   1\n            1510 GET_ITER\n         >> 1512 FOR_ITER            \
          \    81 (to 1676)\n            1514 UNPACK_SEQUENCE          2\n       \
          \     1516 STORE_FAST              40 (i)\n            1518 STORE_FAST \
          \             41 (upsample_block)\n\n 974        1520 LOAD_FAST        \
          \       40 (i)\n            1522 LOAD_GLOBAL             21 (len)\n    \
          \        1524 LOAD_FAST                0 (self)\n            1526 LOAD_ATTR\
          \               51 (up_blocks)\n            1528 CALL_FUNCTION         \
          \   1\n            1530 LOAD_CONST               9 (1)\n            1532\
          \ BINARY_SUBTRACT\n            1534 COMPARE_OP               2 (==)\n  \
          \          1536 STORE_FAST              42 (is_final_block)\n\n 976    \
          \    1538 LOAD_FAST               33 (down_block_res_samples)\n        \
          \    1540 LOAD_GLOBAL             21 (len)\n            1542 LOAD_FAST \
          \              41 (upsample_block)\n            1544 LOAD_ATTR         \
          \      52 (resnets)\n            1546 CALL_FUNCTION            1\n     \
          \       1548 UNARY_NEGATIVE\n            1550 LOAD_CONST               3\
          \ (None)\n            1552 BUILD_SLICE              2\n            1554\
          \ BINARY_SUBSCR\n            1556 STORE_FAST              36 (res_samples)\n\
          \n 977        1558 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1560 LOAD_CONST               3 (None)\n            1562 LOAD_GLOBAL\
          \             21 (len)\n            1564 LOAD_FAST               41 (upsample_block)\n\
          \            1566 LOAD_ATTR               52 (resnets)\n            1568\
          \ CALL_FUNCTION            1\n            1570 UNARY_NEGATIVE\n        \
          \    1572 BUILD_SLICE              2\n            1574 BINARY_SUBSCR\n \
          \           1576 STORE_FAST              33 (down_block_res_samples)\n\n\
          \ 981        1578 LOAD_FAST               42 (is_final_block)\n        \
          \    1580 EXTENDED_ARG             3\n            1582 POP_JUMP_IF_TRUE\
          \       804 (to 1608)\n            1584 LOAD_FAST               13 (forward_upsample_size)\n\
          \            1586 EXTENDED_ARG             3\n            1588 POP_JUMP_IF_FALSE\
          \      804 (to 1608)\n\n 982        1590 LOAD_FAST               33 (down_block_res_samples)\n\
          \            1592 LOAD_CONST              18 (-1)\n            1594 BINARY_SUBSCR\n\
          \            1596 LOAD_ATTR                2 (shape)\n            1598 LOAD_CONST\
          \               1 (2)\n            1600 LOAD_CONST               3 (None)\n\
          \            1602 BUILD_SLICE              2\n            1604 BINARY_SUBSCR\n\
          \            1606 STORE_FAST              14 (upsample_size)\n\n 984   \
          \  >> 1608 LOAD_GLOBAL             46 (hasattr)\n            1610 LOAD_FAST\
          \               41 (upsample_block)\n            1612 LOAD_CONST       \
          \       41 ('has_cross_attention')\n            1614 CALL_FUNCTION     \
          \       2\n            1616 EXTENDED_ARG             3\n            1618\
          \ POP_JUMP_IF_FALSE      828 (to 1656)\n            1620 LOAD_FAST     \
          \          41 (upsample_block)\n            1622 LOAD_ATTR             \
          \  47 (has_cross_attention)\n            1624 EXTENDED_ARG             3\n\
          \            1626 POP_JUMP_IF_FALSE      828 (to 1656)\n\n 985        1628\
          \ LOAD_FAST               41 (upsample_block)\n\n 986        1630 LOAD_FAST\
          \                1 (sample)\n\n 987        1632 LOAD_FAST              \
          \ 19 (emb)\n\n 988        1634 LOAD_FAST               36 (res_samples)\n\
          \n 989        1636 LOAD_FAST                3 (encoder_hidden_states)\n\n\
          \ 990        1638 LOAD_FAST                7 (cross_attention_kwargs)\n\n\
          \ 991        1640 LOAD_FAST               14 (upsample_size)\n\n 992   \
          \     1642 LOAD_FAST                6 (attention_mask)\n\n 993        1644\
          \ LOAD_FAST               11 (encoder_attention_mask)\n\n 985        1646\
          \ LOAD_CONST              47 (('hidden_states', 'temb', 'res_hidden_states_tuple',\
          \ 'encoder_hidden_states', 'cross_attention_kwargs', 'upsample_size', 'attention_mask',\
          \ 'encoder_attention_mask'))\n            1648 CALL_FUNCTION_KW        \
          \ 8\n            1650 STORE_FAST               1 (sample)\n            1652\
          \ EXTENDED_ARG             2\n            1654 JUMP_ABSOLUTE          756\
          \ (to 1512)\n\n 996     >> 1656 LOAD_FAST               41 (upsample_block)\n\
          \n 997        1658 LOAD_FAST                1 (sample)\n            1660\
          \ LOAD_FAST               19 (emb)\n            1662 LOAD_FAST         \
          \      36 (res_samples)\n            1664 LOAD_FAST               14 (upsample_size)\n\
          \n 996        1666 LOAD_CONST              48 (('hidden_states', 'temb',\
          \ 'res_hidden_states_tuple', 'upsample_size'))\n            1668 CALL_FUNCTION_KW\
          \         4\n            1670 STORE_FAST               1 (sample)\n    \
          \        1672 EXTENDED_ARG             2\n            1674 JUMP_ABSOLUTE\
          \          756 (to 1512)\n\n1001     >> 1676 LOAD_FAST                0\
          \ (self)\n            1678 LOAD_ATTR               53 (conv_norm_out)\n\
          \            1680 EXTENDED_ARG             3\n            1682 POP_JUMP_IF_FALSE\
          \      852 (to 1704)\n\n1002        1684 LOAD_FAST                0 (self)\n\
          \            1686 LOAD_METHOD             53 (conv_norm_out)\n         \
          \   1688 LOAD_FAST                1 (sample)\n            1690 CALL_METHOD\
          \              1\n            1692 STORE_FAST               1 (sample)\n\
          \n1003        1694 LOAD_FAST                0 (self)\n            1696 LOAD_METHOD\
          \             54 (conv_act)\n            1698 LOAD_FAST                1\
          \ (sample)\n            1700 CALL_METHOD              1\n            1702\
          \ STORE_FAST               1 (sample)\n\n1004     >> 1704 LOAD_FAST    \
          \            0 (self)\n            1706 LOAD_METHOD             55 (conv_out)\n\
          \            1708 LOAD_FAST                1 (sample)\n            1710\
          \ CALL_METHOD              1\n            1712 STORE_FAST              \
          \ 1 (sample)\n\n1006        1714 LOAD_FAST               12 (return_dict)\n\
          \            1716 EXTENDED_ARG             3\n            1718 POP_JUMP_IF_TRUE\
          \       863 (to 1726)\n\n1007        1720 LOAD_FAST                1 (sample)\n\
          \            1722 BUILD_TUPLE              1\n            1724 RETURN_VALUE\n\
          \n1009     >> 1726 LOAD_GLOBAL             56 (UNet2DConditionOutput)\n\
          \            1728 LOAD_FAST                1 (sample)\n            1730\
          \ LOAD_CONST              49 (('sample',))\n            1732 CALL_FUNCTION_KW\
          \         1\n            1734 RETURN_VALUE\n\n ========== TorchDynamo Stack\
          \ Trace ==========\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
          , line 324, in _compile\n    out_code = transform_code_object(code, transform)\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/bytecode_transformation.py\"\
          , line 445, in transform_code_object\n    transformations(instructions,\
          \ code_options)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
          , line 311, in transform\n    tracer.run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1726, in run\n    super().run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 576, in run\n    and self.step()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 540, in step\n    getattr(self, inst.opname)(inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 342, in wrapper\n    return inner_fn(self, inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 965, in CALL_FUNCTION\n    self.call_function(fn, args, {})\n  File\
          \ \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 474, in call_function\n    self.push(fn.call_function(self, args,\
          \ kwargs))\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 291, in call_function\n    return super().call_function(tx, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 259, in call_function\n    return super().call_function(tx, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
          , line 92, in call_function\n    return tx.inline_user_function_return(\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 510, in inline_user_function_return\n    result = InliningInstructionTranslator.inline_call(self,\
          \ fn, args, kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1806, in inline_call\n    return cls.inline_call_(parent, func, args,\
          \ kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
          , line 1829, in inline_call_\n    unimplemented(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py\"\
          , line 71, in unimplemented\n    raise Unsupported(msg)\ntorch._dynamo.exc.Unsupported:\
          \ inline in skipfiles: Logger.info  | info /usr/lib/python3.10/logging/__init__.py\n\
          \n\n========== The above exception occurred while processing the following\
          \ code ==========\n\n  File \"/usr/lib/python3.10/runpy.py\", line 196,\
          \ in _run_module_as_main\n    return _run_code(code, main_globals, None,\n\
          \  File \"/usr/lib/python3.10/runpy.py\", line 86, in _run_code\n    exec(code,\
          \ run_globals)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel_launcher.py\"\
          , line 16, in <module>\n    app.launch_new_instance()\n  File \"/usr/local/lib/python3.10/dist-packages/traitlets/config/application.py\"\
          , line 992, in launch_instance\n    app.start()\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelapp.py\"\
          , line 619, in start\n    self.io_loop.start()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/platform/asyncio.py\"\
          , line 195, in start\n    self.asyncio_loop.run_forever()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
          , line 603, in run_forever\n    self._run_once()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
          , line 1909, in _run_once\n    handle._run()\n  File \"/usr/lib/python3.10/asyncio/events.py\"\
          , line 80, in _run\n    self._context.run(self._callback, *self._args)\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\", line\
          \ 685, in <lambda>\n    lambda f: self._run_callback(functools.partial(callback,\
          \ future))\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\"\
          , line 738, in _run_callback\n    ret = callback()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 825, in inner\n    self.ctx_run(self.run)\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 786, in run\n    yielded = self.gen.send(value)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 361, in process_one\n    yield gen.maybe_future(dispatch(*args))\n\
          \  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\", line\
          \ 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 261, in dispatch_shell\n    yield gen.maybe_future(handler(stream,\
          \ idents, msg))\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
          , line 539, in execute_request\n    self.do_execute(\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
          , line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/ipkernel.py\"\
          , line 302, in do_execute\n    res = shell.run_cell(code, store_history=store_history,\
          \ silent=silent)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/zmqshell.py\"\
          , line 539, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args,\
          \ **kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 2975, in run_cell\n    result = self._run_cell(\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3030, in _run_cell\n    return runner(coro)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/async_helpers.py\"\
          , line 78, in _pseudo_sync_runner\n    coro.send(None)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3257, in run_cell_async\n    has_raised = await self.run_ast_nodes(code_ast.body,\
          \ cell_name,\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3473, in run_ast_nodes\n    if (await self.run_code(code, result,\
          \  async_=asy)):\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
          , line 3553, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n\
          \  File \"<ipython-input-6-0932307aec37>\", line 103, in <cell line: 101>\n\
          \    image = base(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\n    return func(*args, **kwargs)\n  File\
          \ \"/usr/local/lib/python3.10/dist-packages/diffusers/pipelines/stable_diffusion_xl/pipeline_stable_diffusion_xl.py\"\
          , line 812, in __call__\n    noise_pred = self.unet(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\n    return forward_call(*args, **kwargs)\n \
          \ File \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 709, in forward\n    def forward(\n  File \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
          , line 762, in forward\n    logger.info(\"Forward upsample size to force\
          \ interpolation output size.\")\n\n==========\n---------------------------------------------------------------------------\n\
          Unsupported                               Traceback (most recent call last)\n\
          <ipython-input-6-0932307aec37> in <cell line: 101>()\n    101 with torch.no_grad():\n\
          \    102     # run both experts\n--> 103     image = base(\n    104    \
          \     prompt=prompt,\n    105         num_inference_steps=n_steps,\n\n24\
          \ frames\n/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py in\
          \ unimplemented(msg)\n     69 def unimplemented(msg: str):\n     70    \
          \ assert msg != os.environ.get(\"BREAK\", False)\n---> 71     raise Unsupported(msg)\n\
          \     72 \n     73 \n\nUnsupported: inline in skipfiles: Logger.info  |\
          \ info /usr/lib/python3.10/logging/__init__.py\n```\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/635d22554fabde0df74274dc/EokJ8i0hBX2ecVOMMKVvs.png)\n\
          confirmed torch v2"
        updatedAt: '2023-08-23T10:40:20.411Z'
      numEdits: 3
      reactions: []
    id: 64e5e043af4997fa889854a2
    type: comment
  author: TheOneHong
  content: "```\n[2023-08-23 10:38:31,959] torch._dynamo.convert_frame: [ERROR] WON'T\
    \ CONVERT forward /usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\
    \ line 709 \n 755           0 LOAD_CONST               1 (2)\n               2\
    \ LOAD_FAST                0 (self)\n               4 LOAD_ATTR              \
    \  0 (num_upsamplers)\n               6 BINARY_POWER\n               8 STORE_DEREF\
    \              0 (default_overall_up_factor)\n\n 758          10 LOAD_CONST  \
    \             2 (False)\n              12 STORE_FAST              13 (forward_upsample_size)\n\
    \n 759          14 LOAD_CONST               3 (None)\n              16 STORE_FAST\
    \              14 (upsample_size)\n\n 761          18 LOAD_GLOBAL            \
    \  1 (any)\n              20 LOAD_CLOSURE             0 (default_overall_up_factor)\n\
    \              22 BUILD_TUPLE              1\n              24 LOAD_CONST    \
    \           4 (<code object <genexpr> at 0x79d249172c30, file \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
    , line 761>)\n              26 LOAD_CONST               5 ('UNet2DConditionModel.forward.<locals>.<genexpr>')\n\
    \              28 MAKE_FUNCTION            8 (closure)\n              30 LOAD_FAST\
    \                1 (sample)\n              32 LOAD_ATTR                2 (shape)\n\
    \              34 LOAD_CONST               6 (-2)\n              36 LOAD_CONST\
    \               3 (None)\n              38 BUILD_SLICE              2\n      \
    \        40 BINARY_SUBSCR\n              42 GET_ITER\n              44 CALL_FUNCTION\
    \            1\n              46 CALL_FUNCTION            1\n              48\
    \ POP_JUMP_IF_FALSE       32 (to 64)\n\n 762          50 LOAD_GLOBAL         \
    \     3 (logger)\n              52 LOAD_METHOD              4 (info)\n       \
    \       54 LOAD_CONST               7 ('Forward upsample size to force interpolation\
    \ output size.')\n              56 CALL_METHOD              1\n              58\
    \ POP_TOP\n\n 763          60 LOAD_CONST               8 (True)\n            \
    \  62 STORE_FAST              13 (forward_upsample_size)\n\n 773     >>   64 LOAD_FAST\
    \                6 (attention_mask)\n              66 LOAD_CONST             \
    \  3 (None)\n              68 IS_OP                    1\n              70 POP_JUMP_IF_FALSE\
    \       51 (to 102)\n\n 778          72 LOAD_CONST               9 (1)\n     \
    \         74 LOAD_FAST                6 (attention_mask)\n              76 LOAD_METHOD\
    \              5 (to)\n              78 LOAD_FAST                1 (sample)\n\
    \              80 LOAD_ATTR                6 (dtype)\n              82 CALL_METHOD\
    \              1\n              84 BINARY_SUBTRACT\n              86 LOAD_CONST\
    \              10 (-10000.0)\n              88 BINARY_MULTIPLY\n             \
    \ 90 STORE_FAST               6 (attention_mask)\n\n 779          92 LOAD_FAST\
    \                6 (attention_mask)\n              94 LOAD_METHOD            \
    \  7 (unsqueeze)\n              96 LOAD_CONST               9 (1)\n          \
    \    98 CALL_METHOD              1\n             100 STORE_FAST              \
    \ 6 (attention_mask)\n\n 782     >>  102 LOAD_FAST               11 (encoder_attention_mask)\n\
    \             104 LOAD_CONST               3 (None)\n             106 IS_OP  \
    \                  1\n             108 POP_JUMP_IF_FALSE       70 (to 140)\n\n\
    \ 783         110 LOAD_CONST               9 (1)\n             112 LOAD_FAST \
    \              11 (encoder_attention_mask)\n             114 LOAD_METHOD     \
    \         5 (to)\n             116 LOAD_FAST                1 (sample)\n     \
    \        118 LOAD_ATTR                6 (dtype)\n             120 CALL_METHOD\
    \              1\n             122 BINARY_SUBTRACT\n             124 LOAD_CONST\
    \              10 (-10000.0)\n             126 BINARY_MULTIPLY\n             128\
    \ STORE_FAST              11 (encoder_attention_mask)\n\n 784         130 LOAD_FAST\
    \               11 (encoder_attention_mask)\n             132 LOAD_METHOD    \
    \          7 (unsqueeze)\n             134 LOAD_CONST               9 (1)\n  \
    \           136 CALL_METHOD              1\n             138 STORE_FAST      \
    \        11 (encoder_attention_mask)\n\n 787     >>  140 LOAD_FAST           \
    \     0 (self)\n             142 LOAD_ATTR                8 (config)\n       \
    \      144 LOAD_ATTR                9 (center_input_sample)\n             146\
    \ POP_JUMP_IF_FALSE       80 (to 160)\n\n 788         148 LOAD_CONST         \
    \      1 (2)\n             150 LOAD_FAST                1 (sample)\n         \
    \    152 BINARY_MULTIPLY\n             154 LOAD_CONST              11 (1.0)\n\
    \             156 BINARY_SUBTRACT\n             158 STORE_FAST               1\
    \ (sample)\n\n 791     >>  160 LOAD_FAST                2 (timestep)\n       \
    \      162 STORE_FAST              15 (timesteps)\n\n 792         164 LOAD_GLOBAL\
    \             10 (torch)\n             166 LOAD_METHOD             11 (is_tensor)\n\
    \             168 LOAD_FAST               15 (timesteps)\n             170 CALL_METHOD\
    \              1\n             172 POP_JUMP_IF_TRUE       126 (to 252)\n\n 795\
    \         174 LOAD_FAST                1 (sample)\n             176 LOAD_ATTR\
    \               12 (device)\n             178 LOAD_ATTR               13 (type)\n\
    \             180 LOAD_CONST              12 ('mps')\n             182 COMPARE_OP\
    \               2 (==)\n             184 STORE_FAST              16 (is_mps)\n\
    \n 796         186 LOAD_GLOBAL             14 (isinstance)\n             188 LOAD_FAST\
    \                2 (timestep)\n             190 LOAD_GLOBAL             15 (float)\n\
    \             192 CALL_FUNCTION            2\n             194 POP_JUMP_IF_FALSE\
    \      107 (to 214)\n\n 797         196 LOAD_FAST               16 (is_mps)\n\
    \             198 POP_JUMP_IF_FALSE      103 (to 206)\n             200 LOAD_GLOBAL\
    \             10 (torch)\n             202 LOAD_ATTR               16 (float32)\n\
    \             204 JUMP_FORWARD             2 (to 210)\n         >>  206 LOAD_GLOBAL\
    \             10 (torch)\n             208 LOAD_ATTR               17 (float64)\n\
    \         >>  210 STORE_FAST              17 (dtype)\n             212 JUMP_FORWARD\
    \             8 (to 230)\n\n 799     >>  214 LOAD_FAST               16 (is_mps)\n\
    \             216 POP_JUMP_IF_FALSE      112 (to 224)\n             218 LOAD_GLOBAL\
    \             10 (torch)\n             220 LOAD_ATTR               18 (int32)\n\
    \             222 JUMP_FORWARD             2 (to 228)\n         >>  224 LOAD_GLOBAL\
    \             10 (torch)\n             226 LOAD_ATTR               19 (int64)\n\
    \         >>  228 STORE_FAST              17 (dtype)\n\n 800     >>  230 LOAD_GLOBAL\
    \             10 (torch)\n             232 LOAD_ATTR               20 (tensor)\n\
    \             234 LOAD_FAST               15 (timesteps)\n             236 BUILD_LIST\
    \               1\n             238 LOAD_FAST               17 (dtype)\n     \
    \        240 LOAD_FAST                1 (sample)\n             242 LOAD_ATTR \
    \              12 (device)\n             244 LOAD_CONST              13 (('dtype',\
    \ 'device'))\n             246 CALL_FUNCTION_KW         3\n             248 STORE_FAST\
    \              15 (timesteps)\n             250 JUMP_FORWARD            15 (to\
    \ 282)\n\n 801     >>  252 LOAD_GLOBAL             21 (len)\n             254\
    \ LOAD_FAST               15 (timesteps)\n             256 LOAD_ATTR         \
    \       2 (shape)\n             258 CALL_FUNCTION            1\n             260\
    \ LOAD_CONST              14 (0)\n             262 COMPARE_OP               2\
    \ (==)\n             264 POP_JUMP_IF_FALSE      141 (to 282)\n\n 802         266\
    \ LOAD_FAST               15 (timesteps)\n             268 LOAD_CONST        \
    \       3 (None)\n             270 BINARY_SUBSCR\n             272 LOAD_METHOD\
    \              5 (to)\n             274 LOAD_FAST                1 (sample)\n\
    \             276 LOAD_ATTR               12 (device)\n             278 CALL_METHOD\
    \              1\n             280 STORE_FAST              15 (timesteps)\n\n\
    \ 805     >>  282 LOAD_FAST               15 (timesteps)\n             284 LOAD_METHOD\
    \             22 (expand)\n             286 LOAD_FAST                1 (sample)\n\
    \             288 LOAD_ATTR                2 (shape)\n             290 LOAD_CONST\
    \              14 (0)\n             292 BINARY_SUBSCR\n             294 CALL_METHOD\
    \              1\n             296 STORE_FAST              15 (timesteps)\n\n\
    \ 807         298 LOAD_FAST                0 (self)\n             300 LOAD_METHOD\
    \             23 (time_proj)\n             302 LOAD_FAST               15 (timesteps)\n\
    \             304 CALL_METHOD              1\n             306 STORE_FAST    \
    \          18 (t_emb)\n\n 812         308 LOAD_FAST               18 (t_emb)\n\
    \             310 LOAD_ATTR                5 (to)\n             312 LOAD_FAST\
    \                1 (sample)\n             314 LOAD_ATTR                6 (dtype)\n\
    \             316 LOAD_CONST              15 (('dtype',))\n             318 CALL_FUNCTION_KW\
    \         1\n             320 STORE_FAST              18 (t_emb)\n\n 814     \
    \    322 LOAD_FAST                0 (self)\n             324 LOAD_METHOD     \
    \        24 (time_embedding)\n             326 LOAD_FAST               18 (t_emb)\n\
    \             328 LOAD_FAST                5 (timestep_cond)\n             330\
    \ CALL_METHOD              2\n             332 STORE_FAST              19 (emb)\n\
    \n 815         334 LOAD_CONST               3 (None)\n             336 STORE_FAST\
    \              20 (aug_emb)\n\n 817         338 LOAD_FAST                0 (self)\n\
    \             340 LOAD_ATTR               25 (class_embedding)\n             342\
    \ LOAD_CONST               3 (None)\n             344 IS_OP                  \
    \  1\n             346 POP_JUMP_IF_FALSE      228 (to 456)\n\n 818         348\
    \ LOAD_FAST                4 (class_labels)\n             350 LOAD_CONST     \
    \          3 (None)\n             352 IS_OP                    0\n           \
    \  354 POP_JUMP_IF_FALSE      182 (to 364)\n\n 819         356 LOAD_GLOBAL   \
    \          26 (ValueError)\n             358 LOAD_CONST              16 ('class_labels\
    \ should be provided when num_class_embeds > 0')\n             360 CALL_FUNCTION\
    \            1\n             362 RAISE_VARARGS            1\n\n 821     >>  364\
    \ LOAD_FAST                0 (self)\n             366 LOAD_ATTR              \
    \  8 (config)\n             368 LOAD_ATTR               27 (class_embed_type)\n\
    \             370 LOAD_CONST              17 ('timestep')\n             372 COMPARE_OP\
    \               2 (==)\n             374 POP_JUMP_IF_FALSE      200 (to 400)\n\
    \n 822         376 LOAD_FAST                0 (self)\n             378 LOAD_METHOD\
    \             23 (time_proj)\n             380 LOAD_FAST                4 (class_labels)\n\
    \             382 CALL_METHOD              1\n             384 STORE_FAST    \
    \           4 (class_labels)\n\n 826         386 LOAD_FAST                4 (class_labels)\n\
    \             388 LOAD_ATTR                5 (to)\n             390 LOAD_FAST\
    \                1 (sample)\n             392 LOAD_ATTR                6 (dtype)\n\
    \             394 LOAD_CONST              15 (('dtype',))\n             396 CALL_FUNCTION_KW\
    \         1\n             398 STORE_FAST               4 (class_labels)\n\n 828\
    \     >>  400 LOAD_FAST                0 (self)\n             402 LOAD_METHOD\
    \             25 (class_embedding)\n             404 LOAD_FAST               \
    \ 4 (class_labels)\n             406 CALL_METHOD              1\n            \
    \ 408 LOAD_ATTR                5 (to)\n             410 LOAD_FAST            \
    \    1 (sample)\n             412 LOAD_ATTR                6 (dtype)\n       \
    \      414 LOAD_CONST              15 (('dtype',))\n             416 CALL_FUNCTION_KW\
    \         1\n             418 STORE_FAST              21 (class_emb)\n\n 830 \
    \        420 LOAD_FAST                0 (self)\n             422 LOAD_ATTR   \
    \             8 (config)\n             424 LOAD_ATTR               28 (class_embeddings_concat)\n\
    \             426 POP_JUMP_IF_FALSE      224 (to 448)\n\n 831         428 LOAD_GLOBAL\
    \             10 (torch)\n             430 LOAD_ATTR               29 (cat)\n\
    \             432 LOAD_FAST               19 (emb)\n             434 LOAD_FAST\
    \               21 (class_emb)\n             436 BUILD_LIST               2\n\
    \             438 LOAD_CONST              18 (-1)\n             440 LOAD_CONST\
    \              19 (('dim',))\n             442 CALL_FUNCTION_KW         2\n  \
    \           444 STORE_FAST              19 (emb)\n             446 JUMP_FORWARD\
    \             4 (to 456)\n\n 833     >>  448 LOAD_FAST               19 (emb)\n\
    \             450 LOAD_FAST               21 (class_emb)\n             452 BINARY_ADD\n\
    \             454 STORE_FAST              19 (emb)\n\n 835     >>  456 LOAD_FAST\
    \                0 (self)\n             458 LOAD_ATTR                8 (config)\n\
    \             460 LOAD_ATTR               30 (addition_embed_type)\n         \
    \    462 LOAD_CONST              20 ('text')\n             464 COMPARE_OP    \
    \           2 (==)\n             466 POP_JUMP_IF_FALSE      240 (to 480)\n\n 836\
    \         468 LOAD_FAST                0 (self)\n             470 LOAD_METHOD\
    \             31 (add_embedding)\n             472 LOAD_FAST                3\
    \ (encoder_hidden_states)\n             474 CALL_METHOD              1\n     \
    \        476 STORE_FAST              20 (aug_emb)\n             478 JUMP_FORWARD\
    \           202 (to 884)\n\n 837     >>  480 LOAD_FAST                0 (self)\n\
    \             482 LOAD_ATTR                8 (config)\n             484 LOAD_ATTR\
    \               30 (addition_embed_type)\n             486 LOAD_CONST        \
    \      21 ('text_image')\n             488 COMPARE_OP               2 (==)\n \
    \            490 EXTENDED_ARG             1\n             492 POP_JUMP_IF_FALSE\
    \      278 (to 556)\n\n 839         494 LOAD_CONST              22 ('image_embeds')\n\
    \             496 LOAD_FAST                8 (added_cond_kwargs)\n           \
    \  498 CONTAINS_OP              1\n             500 EXTENDED_ARG             1\n\
    \             502 POP_JUMP_IF_FALSE      260 (to 520)\n\n 840         504 LOAD_GLOBAL\
    \             26 (ValueError)\n\n 841         506 LOAD_FAST                0 (self)\n\
    \             508 LOAD_ATTR               32 (__class__)\n             510 FORMAT_VALUE\
    \             0\n             512 LOAD_CONST              23 (\" has the config\
    \ param `addition_embed_type` set to 'text_image' which requires the keyword argument\
    \ `image_embeds` to be passed in `added_cond_kwargs`\")\n             514 BUILD_STRING\
    \             2\n\n 840         516 CALL_FUNCTION            1\n             518\
    \ RAISE_VARARGS            1\n\n 844     >>  520 LOAD_FAST                8 (added_cond_kwargs)\n\
    \             522 LOAD_METHOD             33 (get)\n             524 LOAD_CONST\
    \              22 ('image_embeds')\n             526 CALL_METHOD             \
    \ 1\n             528 STORE_FAST              22 (image_embs)\n\n 845        \
    \ 530 LOAD_FAST                8 (added_cond_kwargs)\n             532 LOAD_METHOD\
    \             33 (get)\n             534 LOAD_CONST              24 ('text_embeds')\n\
    \             536 LOAD_FAST                3 (encoder_hidden_states)\n       \
    \      538 CALL_METHOD              2\n             540 STORE_FAST           \
    \   23 (text_embs)\n\n 846         542 LOAD_FAST                0 (self)\n   \
    \          544 LOAD_METHOD             31 (add_embedding)\n             546 LOAD_FAST\
    \               23 (text_embs)\n             548 LOAD_FAST               22 (image_embs)\n\
    \             550 CALL_METHOD              2\n             552 STORE_FAST    \
    \          20 (aug_emb)\n             554 JUMP_FORWARD           164 (to 884)\n\
    \n 847     >>  556 LOAD_FAST                0 (self)\n             558 LOAD_ATTR\
    \                8 (config)\n             560 LOAD_ATTR               30 (addition_embed_type)\n\
    \             562 LOAD_CONST              25 ('text_time')\n             564 COMPARE_OP\
    \               2 (==)\n             566 EXTENDED_ARG             1\n        \
    \     568 POP_JUMP_IF_FALSE      359 (to 718)\n\n 849         570 LOAD_CONST \
    \             24 ('text_embeds')\n             572 LOAD_FAST                8\
    \ (added_cond_kwargs)\n             574 CONTAINS_OP              1\n         \
    \    576 EXTENDED_ARG             1\n             578 POP_JUMP_IF_FALSE      298\
    \ (to 596)\n\n 850         580 LOAD_GLOBAL             26 (ValueError)\n\n 851\
    \         582 LOAD_FAST                0 (self)\n             584 LOAD_ATTR  \
    \             32 (__class__)\n             586 FORMAT_VALUE             0\n  \
    \           588 LOAD_CONST              26 (\" has the config param `addition_embed_type`\
    \ set to 'text_time' which requires the keyword argument `text_embeds` to be passed\
    \ in `added_cond_kwargs`\")\n             590 BUILD_STRING             2\n\n 850\
    \         592 CALL_FUNCTION            1\n             594 RAISE_VARARGS     \
    \       1\n\n 853     >>  596 LOAD_FAST                8 (added_cond_kwargs)\n\
    \             598 LOAD_METHOD             33 (get)\n             600 LOAD_CONST\
    \              24 ('text_embeds')\n             602 CALL_METHOD              1\n\
    \             604 STORE_FAST              24 (text_embeds)\n\n 854         606\
    \ LOAD_CONST              27 ('time_ids')\n             608 LOAD_FAST        \
    \        8 (added_cond_kwargs)\n             610 CONTAINS_OP              1\n\
    \             612 EXTENDED_ARG             1\n             614 POP_JUMP_IF_FALSE\
    \      316 (to 632)\n\n 855         616 LOAD_GLOBAL             26 (ValueError)\n\
    \n 856         618 LOAD_FAST                0 (self)\n             620 LOAD_ATTR\
    \               32 (__class__)\n             622 FORMAT_VALUE             0\n\
    \             624 LOAD_CONST              28 (\" has the config param `addition_embed_type`\
    \ set to 'text_time' which requires the keyword argument `time_ids` to be passed\
    \ in `added_cond_kwargs`\")\n             626 BUILD_STRING             2\n\n 855\
    \         628 CALL_FUNCTION            1\n             630 RAISE_VARARGS     \
    \       1\n\n 858     >>  632 LOAD_FAST                8 (added_cond_kwargs)\n\
    \             634 LOAD_METHOD             33 (get)\n             636 LOAD_CONST\
    \              27 ('time_ids')\n             638 CALL_METHOD              1\n\
    \             640 STORE_FAST              25 (time_ids)\n\n 859         642 LOAD_FAST\
    \                0 (self)\n             644 LOAD_METHOD             34 (add_time_proj)\n\
    \             646 LOAD_FAST               25 (time_ids)\n             648 LOAD_METHOD\
    \             35 (flatten)\n             650 CALL_METHOD              0\n    \
    \         652 CALL_METHOD              1\n             654 STORE_FAST        \
    \      26 (time_embeds)\n\n 860         656 LOAD_FAST               26 (time_embeds)\n\
    \             658 LOAD_METHOD             36 (reshape)\n             660 LOAD_FAST\
    \               24 (text_embeds)\n             662 LOAD_ATTR                2\
    \ (shape)\n             664 LOAD_CONST              14 (0)\n             666 BINARY_SUBSCR\n\
    \             668 LOAD_CONST              18 (-1)\n             670 BUILD_TUPLE\
    \              2\n             672 CALL_METHOD              1\n             674\
    \ STORE_FAST              26 (time_embeds)\n\n 862         676 LOAD_GLOBAL   \
    \          10 (torch)\n             678 LOAD_ATTR               37 (concat)\n\
    \             680 LOAD_FAST               24 (text_embeds)\n             682 LOAD_FAST\
    \               26 (time_embeds)\n             684 BUILD_LIST               2\n\
    \             686 LOAD_CONST              18 (-1)\n             688 LOAD_CONST\
    \              19 (('dim',))\n             690 CALL_FUNCTION_KW         2\n  \
    \           692 STORE_FAST              27 (add_embeds)\n\n 863         694 LOAD_FAST\
    \               27 (add_embeds)\n             696 LOAD_METHOD              5 (to)\n\
    \             698 LOAD_FAST               19 (emb)\n             700 LOAD_ATTR\
    \                6 (dtype)\n             702 CALL_METHOD              1\n    \
    \         704 STORE_FAST              27 (add_embeds)\n\n 864         706 LOAD_FAST\
    \                0 (self)\n             708 LOAD_METHOD             31 (add_embedding)\n\
    \             710 LOAD_FAST               27 (add_embeds)\n             712 CALL_METHOD\
    \              1\n             714 STORE_FAST              20 (aug_emb)\n    \
    \         716 JUMP_FORWARD            83 (to 884)\n\n 865     >>  718 LOAD_FAST\
    \                0 (self)\n             720 LOAD_ATTR                8 (config)\n\
    \             722 LOAD_ATTR               30 (addition_embed_type)\n         \
    \    724 LOAD_CONST              29 ('image')\n             726 COMPARE_OP   \
    \            2 (==)\n             728 EXTENDED_ARG             1\n           \
    \  730 POP_JUMP_IF_FALSE      390 (to 780)\n\n 867         732 LOAD_CONST    \
    \          22 ('image_embeds')\n             734 LOAD_FAST                8 (added_cond_kwargs)\n\
    \             736 CONTAINS_OP              1\n             738 EXTENDED_ARG  \
    \           1\n             740 POP_JUMP_IF_FALSE      379 (to 758)\n\n 868  \
    \       742 LOAD_GLOBAL             26 (ValueError)\n\n 869         744 LOAD_FAST\
    \                0 (self)\n             746 LOAD_ATTR               32 (__class__)\n\
    \             748 FORMAT_VALUE             0\n             750 LOAD_CONST    \
    \          30 (\" has the config param `addition_embed_type` set to 'image' which\
    \ requires the keyword argument `image_embeds` to be passed in `added_cond_kwargs`\"\
    )\n             752 BUILD_STRING             2\n\n 868         754 CALL_FUNCTION\
    \            1\n             756 RAISE_VARARGS            1\n\n 871     >>  758\
    \ LOAD_FAST                8 (added_cond_kwargs)\n             760 LOAD_METHOD\
    \             33 (get)\n             762 LOAD_CONST              22 ('image_embeds')\n\
    \             764 CALL_METHOD              1\n             766 STORE_FAST    \
    \          22 (image_embs)\n\n 872         768 LOAD_FAST                0 (self)\n\
    \             770 LOAD_METHOD             31 (add_embedding)\n             772\
    \ LOAD_FAST               22 (image_embs)\n             774 CALL_METHOD      \
    \        1\n             776 STORE_FAST              20 (aug_emb)\n          \
    \   778 JUMP_FORWARD            52 (to 884)\n\n 873     >>  780 LOAD_FAST    \
    \            0 (self)\n             782 LOAD_ATTR                8 (config)\n\
    \             784 LOAD_ATTR               30 (addition_embed_type)\n         \
    \    786 LOAD_CONST              31 ('image_hint')\n             788 COMPARE_OP\
    \               2 (==)\n             790 EXTENDED_ARG             1\n        \
    \     792 POP_JUMP_IF_FALSE      442 (to 884)\n\n 875         794 LOAD_CONST \
    \             22 ('image_embeds')\n             796 LOAD_FAST                8\
    \ (added_cond_kwargs)\n             798 CONTAINS_OP              1\n         \
    \    800 EXTENDED_ARG             1\n             802 POP_JUMP_IF_TRUE       407\
    \ (to 814)\n             804 LOAD_CONST              32 ('hint')\n           \
    \  806 LOAD_FAST                8 (added_cond_kwargs)\n             808 CONTAINS_OP\
    \              1\n             810 EXTENDED_ARG             1\n             812\
    \ POP_JUMP_IF_FALSE      415 (to 830)\n\n 876     >>  814 LOAD_GLOBAL        \
    \     26 (ValueError)\n\n 877         816 LOAD_FAST                0 (self)\n\
    \             818 LOAD_ATTR               32 (__class__)\n             820 FORMAT_VALUE\
    \             0\n             822 LOAD_CONST              33 (\" has the config\
    \ param `addition_embed_type` set to 'image_hint' which requires the keyword arguments\
    \ `image_embeds` and `hint` to be passed in `added_cond_kwargs`\")\n         \
    \    824 BUILD_STRING             2\n\n 876         826 CALL_FUNCTION        \
    \    1\n             828 RAISE_VARARGS            1\n\n 879     >>  830 LOAD_FAST\
    \                8 (added_cond_kwargs)\n             832 LOAD_METHOD         \
    \    33 (get)\n             834 LOAD_CONST              22 ('image_embeds')\n\
    \             836 CALL_METHOD              1\n             838 STORE_FAST    \
    \          22 (image_embs)\n\n 880         840 LOAD_FAST                8 (added_cond_kwargs)\n\
    \             842 LOAD_METHOD             33 (get)\n             844 LOAD_CONST\
    \              32 ('hint')\n             846 CALL_METHOD              1\n    \
    \         848 STORE_FAST              28 (hint)\n\n 881         850 LOAD_FAST\
    \                0 (self)\n             852 LOAD_METHOD             31 (add_embedding)\n\
    \             854 LOAD_FAST               22 (image_embs)\n             856 LOAD_FAST\
    \               28 (hint)\n             858 CALL_METHOD              2\n     \
    \        860 UNPACK_SEQUENCE          2\n             862 STORE_FAST         \
    \     20 (aug_emb)\n             864 STORE_FAST              28 (hint)\n\n 882\
    \         866 LOAD_GLOBAL             10 (torch)\n             868 LOAD_ATTR \
    \              29 (cat)\n             870 LOAD_FAST                1 (sample)\n\
    \             872 LOAD_FAST               28 (hint)\n             874 BUILD_LIST\
    \               2\n             876 LOAD_CONST               9 (1)\n         \
    \    878 LOAD_CONST              19 (('dim',))\n             880 CALL_FUNCTION_KW\
    \         2\n             882 STORE_FAST               1 (sample)\n\n 884    \
    \ >>  884 LOAD_FAST               20 (aug_emb)\n             886 LOAD_CONST  \
    \             3 (None)\n             888 IS_OP                    1\n        \
    \     890 EXTENDED_ARG             1\n             892 POP_JUMP_IF_FALSE     \
    \ 451 (to 902)\n             894 LOAD_FAST               19 (emb)\n          \
    \   896 LOAD_FAST               20 (aug_emb)\n             898 BINARY_ADD\n  \
    \           900 JUMP_FORWARD             1 (to 904)\n         >>  902 LOAD_FAST\
    \               19 (emb)\n         >>  904 STORE_FAST              19 (emb)\n\n\
    \ 886         906 LOAD_FAST                0 (self)\n             908 LOAD_ATTR\
    \               38 (time_embed_act)\n             910 LOAD_CONST             \
    \  3 (None)\n             912 IS_OP                    1\n             914 EXTENDED_ARG\
    \             1\n             916 POP_JUMP_IF_FALSE      464 (to 928)\n\n 887\
    \         918 LOAD_FAST                0 (self)\n             920 LOAD_METHOD\
    \             38 (time_embed_act)\n             922 LOAD_FAST               19\
    \ (emb)\n             924 CALL_METHOD              1\n             926 STORE_FAST\
    \              19 (emb)\n\n 889     >>  928 LOAD_FAST                0 (self)\n\
    \             930 LOAD_ATTR               39 (encoder_hid_proj)\n            \
    \ 932 LOAD_CONST               3 (None)\n             934 IS_OP              \
    \      1\n             936 EXTENDED_ARG             1\n             938 POP_JUMP_IF_FALSE\
    \      483 (to 966)\n             940 LOAD_FAST                0 (self)\n    \
    \         942 LOAD_ATTR                8 (config)\n             944 LOAD_ATTR\
    \               40 (encoder_hid_dim_type)\n             946 LOAD_CONST       \
    \       34 ('text_proj')\n             948 COMPARE_OP               2 (==)\n \
    \            950 EXTENDED_ARG             1\n             952 POP_JUMP_IF_FALSE\
    \      483 (to 966)\n\n 890         954 LOAD_FAST                0 (self)\n  \
    \           956 LOAD_METHOD             39 (encoder_hid_proj)\n             958\
    \ LOAD_FAST                3 (encoder_hidden_states)\n             960 CALL_METHOD\
    \              1\n             962 STORE_FAST               3 (encoder_hidden_states)\n\
    \             964 JUMP_FORWARD            74 (to 1114)\n\n 891     >>  966 LOAD_FAST\
    \                0 (self)\n             968 LOAD_ATTR               39 (encoder_hid_proj)\n\
    \             970 LOAD_CONST               3 (None)\n             972 IS_OP  \
    \                  1\n             974 EXTENDED_ARG             2\n          \
    \   976 POP_JUMP_IF_FALSE      521 (to 1042)\n             978 LOAD_FAST     \
    \           0 (self)\n             980 LOAD_ATTR                8 (config)\n \
    \            982 LOAD_ATTR               40 (encoder_hid_dim_type)\n         \
    \    984 LOAD_CONST              35 ('text_image_proj')\n             986 COMPARE_OP\
    \               2 (==)\n             988 EXTENDED_ARG             2\n        \
    \     990 POP_JUMP_IF_FALSE      521 (to 1042)\n\n 893         992 LOAD_CONST\
    \              22 ('image_embeds')\n             994 LOAD_FAST               \
    \ 8 (added_cond_kwargs)\n             996 CONTAINS_OP              1\n       \
    \      998 EXTENDED_ARG             1\n            1000 POP_JUMP_IF_FALSE    \
    \  509 (to 1018)\n\n 894        1002 LOAD_GLOBAL             26 (ValueError)\n\
    \n 895        1004 LOAD_FAST                0 (self)\n            1006 LOAD_ATTR\
    \               32 (__class__)\n            1008 FORMAT_VALUE             0\n\
    \            1010 LOAD_CONST              36 (\" has the config param `encoder_hid_dim_type`\
    \ set to 'text_image_proj' which requires the keyword argument `image_embeds`\
    \ to be passed in  `added_conditions`\")\n            1012 BUILD_STRING      \
    \       2\n\n 894        1014 CALL_FUNCTION            1\n            1016 RAISE_VARARGS\
    \            1\n\n 898     >> 1018 LOAD_FAST                8 (added_cond_kwargs)\n\
    \            1020 LOAD_METHOD             33 (get)\n            1022 LOAD_CONST\
    \              22 ('image_embeds')\n            1024 CALL_METHOD             \
    \ 1\n            1026 STORE_FAST              29 (image_embeds)\n\n 899      \
    \  1028 LOAD_FAST                0 (self)\n            1030 LOAD_METHOD      \
    \       39 (encoder_hid_proj)\n            1032 LOAD_FAST                3 (encoder_hidden_states)\n\
    \            1034 LOAD_FAST               29 (image_embeds)\n            1036\
    \ CALL_METHOD              2\n            1038 STORE_FAST               3 (encoder_hidden_states)\n\
    \            1040 JUMP_FORWARD            36 (to 1114)\n\n 900     >> 1042 LOAD_FAST\
    \                0 (self)\n            1044 LOAD_ATTR               39 (encoder_hid_proj)\n\
    \            1046 LOAD_CONST               3 (None)\n            1048 IS_OP  \
    \                  1\n            1050 EXTENDED_ARG             2\n          \
    \  1052 POP_JUMP_IF_FALSE      557 (to 1114)\n            1054 LOAD_FAST     \
    \           0 (self)\n            1056 LOAD_ATTR                8 (config)\n \
    \           1058 LOAD_ATTR               40 (encoder_hid_dim_type)\n         \
    \   1060 LOAD_CONST              37 ('image_proj')\n            1062 COMPARE_OP\
    \               2 (==)\n            1064 EXTENDED_ARG             2\n        \
    \    1066 POP_JUMP_IF_FALSE      557 (to 1114)\n\n 902        1068 LOAD_CONST\
    \              22 ('image_embeds')\n            1070 LOAD_FAST               \
    \ 8 (added_cond_kwargs)\n            1072 CONTAINS_OP              1\n       \
    \     1074 EXTENDED_ARG             2\n            1076 POP_JUMP_IF_FALSE    \
    \  547 (to 1094)\n\n 903        1078 LOAD_GLOBAL             26 (ValueError)\n\
    \n 904        1080 LOAD_FAST                0 (self)\n            1082 LOAD_ATTR\
    \               32 (__class__)\n            1084 FORMAT_VALUE             0\n\
    \            1086 LOAD_CONST              38 (\" has the config param `encoder_hid_dim_type`\
    \ set to 'image_proj' which requires the keyword argument `image_embeds` to be\
    \ passed in  `added_conditions`\")\n            1088 BUILD_STRING            \
    \ 2\n\n 903        1090 CALL_FUNCTION            1\n            1092 RAISE_VARARGS\
    \            1\n\n 906     >> 1094 LOAD_FAST                8 (added_cond_kwargs)\n\
    \            1096 LOAD_METHOD             33 (get)\n            1098 LOAD_CONST\
    \              22 ('image_embeds')\n            1100 CALL_METHOD             \
    \ 1\n            1102 STORE_FAST              29 (image_embeds)\n\n 907      \
    \  1104 LOAD_FAST                0 (self)\n            1106 LOAD_METHOD      \
    \       39 (encoder_hid_proj)\n            1108 LOAD_FAST               29 (image_embeds)\n\
    \            1110 CALL_METHOD              1\n            1112 STORE_FAST    \
    \           3 (encoder_hidden_states)\n\n 909     >> 1114 LOAD_FAST          \
    \      0 (self)\n            1116 LOAD_METHOD             41 (conv_in)\n     \
    \       1118 LOAD_FAST                1 (sample)\n            1120 CALL_METHOD\
    \              1\n            1122 STORE_FAST               1 (sample)\n\n 912\
    \        1124 LOAD_FAST                7 (cross_attention_kwargs)\n          \
    \  1126 LOAD_CONST               3 (None)\n            1128 IS_OP            \
    \        1\n            1130 EXTENDED_ARG             2\n            1132 POP_JUMP_IF_FALSE\
    \      597 (to 1194)\n            1134 LOAD_FAST                7 (cross_attention_kwargs)\n\
    \            1136 LOAD_METHOD             33 (get)\n            1138 LOAD_CONST\
    \              39 ('gligen')\n            1140 LOAD_CONST               3 (None)\n\
    \            1142 CALL_METHOD              2\n            1144 LOAD_CONST    \
    \           3 (None)\n            1146 IS_OP                    1\n          \
    \  1148 EXTENDED_ARG             2\n            1150 POP_JUMP_IF_FALSE      597\
    \ (to 1194)\n\n 913        1152 LOAD_FAST                7 (cross_attention_kwargs)\n\
    \            1154 LOAD_METHOD             42 (copy)\n            1156 CALL_METHOD\
    \              0\n            1158 STORE_FAST               7 (cross_attention_kwargs)\n\
    \n 914        1160 LOAD_FAST                7 (cross_attention_kwargs)\n     \
    \       1162 LOAD_METHOD             43 (pop)\n            1164 LOAD_CONST   \
    \           39 ('gligen')\n            1166 CALL_METHOD              1\n     \
    \       1168 STORE_FAST              30 (gligen_args)\n\n 915        1170 LOAD_CONST\
    \              40 ('objs')\n            1172 LOAD_FAST                0 (self)\n\
    \            1174 LOAD_ATTR               44 (position_net)\n            1176\
    \ LOAD_CONST              45 (())\n            1178 BUILD_MAP                0\n\
    \            1180 LOAD_FAST               30 (gligen_args)\n            1182 DICT_MERGE\
    \               1\n            1184 CALL_FUNCTION_EX         1\n            1186\
    \ BUILD_MAP                1\n            1188 LOAD_FAST                7 (cross_attention_kwargs)\n\
    \            1190 LOAD_CONST              39 ('gligen')\n            1192 STORE_SUBSCR\n\
    \n 919     >> 1194 LOAD_FAST               10 (mid_block_additional_residual)\n\
    \            1196 LOAD_CONST               3 (None)\n            1198 IS_OP  \
    \                  1\n            1200 EXTENDED_ARG             2\n          \
    \  1202 JUMP_IF_FALSE_OR_POP   605 (to 1210)\n            1204 LOAD_FAST     \
    \           9 (down_block_additional_residuals)\n            1206 LOAD_CONST \
    \              3 (None)\n            1208 IS_OP                    1\n       \
    \  >> 1210 STORE_FAST              31 (is_controlnet)\n\n 920        1212 LOAD_FAST\
    \               10 (mid_block_additional_residual)\n            1214 LOAD_CONST\
    \               3 (None)\n            1216 IS_OP                    0\n      \
    \      1218 EXTENDED_ARG             2\n            1220 JUMP_IF_FALSE_OR_POP\
    \   614 (to 1228)\n            1222 LOAD_FAST                9 (down_block_additional_residuals)\n\
    \            1224 LOAD_CONST               3 (None)\n            1226 IS_OP  \
    \                  1\n         >> 1228 STORE_FAST              32 (is_adapter)\n\
    \n 922        1230 LOAD_FAST                1 (sample)\n            1232 BUILD_TUPLE\
    \              1\n            1234 STORE_FAST              33 (down_block_res_samples)\n\
    \n 923        1236 LOAD_FAST                0 (self)\n            1238 LOAD_ATTR\
    \               45 (down_blocks)\n            1240 GET_ITER\n         >> 1242\
    \ FOR_ITER                78 (to 1400)\n            1244 STORE_FAST          \
    \    34 (downsample_block)\n\n 924        1246 LOAD_GLOBAL             46 (hasattr)\n\
    \            1248 LOAD_FAST               34 (downsample_block)\n            1250\
    \ LOAD_CONST              41 ('has_cross_attention')\n            1252 CALL_FUNCTION\
    \            2\n            1254 EXTENDED_ARG             2\n            1256\
    \ POP_JUMP_IF_FALSE      669 (to 1338)\n            1258 LOAD_FAST           \
    \    34 (downsample_block)\n            1260 LOAD_ATTR               47 (has_cross_attention)\n\
    \            1262 EXTENDED_ARG             2\n            1264 POP_JUMP_IF_FALSE\
    \      669 (to 1338)\n\n 926        1266 BUILD_MAP                0\n        \
    \    1268 STORE_FAST              35 (additional_residuals)\n\n 927        1270\
    \ LOAD_FAST               32 (is_adapter)\n            1272 EXTENDED_ARG     \
    \        2\n            1274 POP_JUMP_IF_FALSE      652 (to 1304)\n          \
    \  1276 LOAD_GLOBAL             21 (len)\n            1278 LOAD_FAST         \
    \       9 (down_block_additional_residuals)\n            1280 CALL_FUNCTION  \
    \          1\n            1282 LOAD_CONST              14 (0)\n            1284\
    \ COMPARE_OP               4 (>)\n            1286 EXTENDED_ARG             2\n\
    \            1288 POP_JUMP_IF_FALSE      652 (to 1304)\n\n 928        1290 LOAD_FAST\
    \                9 (down_block_additional_residuals)\n            1292 LOAD_METHOD\
    \             43 (pop)\n            1294 LOAD_CONST              14 (0)\n    \
    \        1296 CALL_METHOD              1\n            1298 LOAD_FAST         \
    \      35 (additional_residuals)\n            1300 LOAD_CONST              42\
    \ ('additional_residuals')\n            1302 STORE_SUBSCR\n\n 930     >> 1304\
    \ LOAD_FAST               34 (downsample_block)\n            1306 LOAD_CONST \
    \             45 (())\n\n 931        1308 LOAD_FAST                1 (sample)\n\
    \n 932        1310 LOAD_FAST               19 (emb)\n\n 933        1312 LOAD_FAST\
    \                3 (encoder_hidden_states)\n\n 934        1314 LOAD_FAST     \
    \           6 (attention_mask)\n\n 935        1316 LOAD_FAST                7\
    \ (cross_attention_kwargs)\n\n 936        1318 LOAD_FAST               11 (encoder_attention_mask)\n\
    \n 930        1320 LOAD_CONST              43 (('hidden_states', 'temb', 'encoder_hidden_states',\
    \ 'attention_mask', 'cross_attention_kwargs', 'encoder_attention_mask'))\n   \
    \         1322 BUILD_CONST_KEY_MAP      6\n\n 937        1324 LOAD_FAST      \
    \         35 (additional_residuals)\n\n 930        1326 DICT_MERGE           \
    \    1\n            1328 CALL_FUNCTION_EX         1\n            1330 UNPACK_SEQUENCE\
    \          2\n            1332 STORE_FAST               1 (sample)\n         \
    \   1334 STORE_FAST              36 (res_samples)\n            1336 JUMP_FORWARD\
    \            25 (to 1388)\n\n 940     >> 1338 LOAD_FAST               34 (downsample_block)\n\
    \            1340 LOAD_FAST                1 (sample)\n            1342 LOAD_FAST\
    \               19 (emb)\n            1344 LOAD_CONST              44 (('hidden_states',\
    \ 'temb'))\n            1346 CALL_FUNCTION_KW         2\n            1348 UNPACK_SEQUENCE\
    \          2\n            1350 STORE_FAST               1 (sample)\n         \
    \   1352 STORE_FAST              36 (res_samples)\n\n 942        1354 LOAD_FAST\
    \               32 (is_adapter)\n            1356 EXTENDED_ARG             2\n\
    \            1358 POP_JUMP_IF_FALSE      694 (to 1388)\n            1360 LOAD_GLOBAL\
    \             21 (len)\n            1362 LOAD_FAST                9 (down_block_additional_residuals)\n\
    \            1364 CALL_FUNCTION            1\n            1366 LOAD_CONST    \
    \          14 (0)\n            1368 COMPARE_OP               4 (>)\n         \
    \   1370 EXTENDED_ARG             2\n            1372 POP_JUMP_IF_FALSE      694\
    \ (to 1388)\n\n 943        1374 LOAD_FAST                1 (sample)\n        \
    \    1376 LOAD_FAST                9 (down_block_additional_residuals)\n     \
    \       1378 LOAD_METHOD             43 (pop)\n            1380 LOAD_CONST   \
    \           14 (0)\n            1382 CALL_METHOD              1\n            1384\
    \ INPLACE_ADD\n            1386 STORE_FAST               1 (sample)\n\n 945  \
    \   >> 1388 LOAD_FAST               33 (down_block_res_samples)\n            1390\
    \ LOAD_FAST               36 (res_samples)\n            1392 INPLACE_ADD\n   \
    \         1394 STORE_FAST              33 (down_block_res_samples)\n         \
    \   1396 EXTENDED_ARG             2\n            1398 JUMP_ABSOLUTE          621\
    \ (to 1242)\n\n 947     >> 1400 LOAD_FAST               31 (is_controlnet)\n \
    \           1402 EXTENDED_ARG             2\n            1404 POP_JUMP_IF_FALSE\
    \      727 (to 1454)\n\n 948        1406 LOAD_CONST              45 (())\n   \
    \         1408 STORE_FAST              37 (new_down_block_res_samples)\n\n 950\
    \        1410 LOAD_GLOBAL             48 (zip)\n\n 951        1412 LOAD_FAST \
    \              33 (down_block_res_samples)\n            1414 LOAD_FAST       \
    \         9 (down_block_additional_residuals)\n\n 950        1416 CALL_FUNCTION\
    \            2\n            1418 GET_ITER\n         >> 1420 FOR_ITER         \
    \       14 (to 1450)\n            1422 UNPACK_SEQUENCE          2\n          \
    \  1424 STORE_FAST              38 (down_block_res_sample)\n            1426 STORE_FAST\
    \              39 (down_block_additional_residual)\n\n 953        1428 LOAD_FAST\
    \               38 (down_block_res_sample)\n            1430 LOAD_FAST       \
    \        39 (down_block_additional_residual)\n            1432 BINARY_ADD\n  \
    \          1434 STORE_FAST              38 (down_block_res_sample)\n\n 954   \
    \     1436 LOAD_FAST               37 (new_down_block_res_samples)\n         \
    \   1438 LOAD_FAST               38 (down_block_res_sample)\n            1440\
    \ BUILD_TUPLE              1\n            1442 BINARY_ADD\n            1444 STORE_FAST\
    \              37 (new_down_block_res_samples)\n            1446 EXTENDED_ARG\
    \             2\n            1448 JUMP_ABSOLUTE          710 (to 1420)\n\n 956\
    \     >> 1450 LOAD_FAST               37 (new_down_block_res_samples)\n      \
    \      1452 STORE_FAST              33 (down_block_res_samples)\n\n 959     >>\
    \ 1454 LOAD_FAST                0 (self)\n            1456 LOAD_ATTR         \
    \      49 (mid_block)\n            1458 LOAD_CONST               3 (None)\n  \
    \          1460 IS_OP                    1\n            1462 EXTENDED_ARG    \
    \         2\n            1464 POP_JUMP_IF_FALSE      744 (to 1488)\n\n 960   \
    \     1466 LOAD_FAST                0 (self)\n            1468 LOAD_ATTR     \
    \          49 (mid_block)\n\n 961        1470 LOAD_FAST                1 (sample)\n\
    \n 962        1472 LOAD_FAST               19 (emb)\n\n 963        1474 LOAD_FAST\
    \                3 (encoder_hidden_states)\n\n 964        1476 LOAD_FAST     \
    \           6 (attention_mask)\n\n 965        1478 LOAD_FAST                7\
    \ (cross_attention_kwargs)\n\n 966        1480 LOAD_FAST               11 (encoder_attention_mask)\n\
    \n 960        1482 LOAD_CONST              46 (('encoder_hidden_states', 'attention_mask',\
    \ 'cross_attention_kwargs', 'encoder_attention_mask'))\n            1484 CALL_FUNCTION_KW\
    \         6\n            1486 STORE_FAST               1 (sample)\n\n 969    \
    \ >> 1488 LOAD_FAST               31 (is_controlnet)\n            1490 EXTENDED_ARG\
    \             2\n            1492 POP_JUMP_IF_FALSE      751 (to 1502)\n\n 970\
    \        1494 LOAD_FAST                1 (sample)\n            1496 LOAD_FAST\
    \               10 (mid_block_additional_residual)\n            1498 BINARY_ADD\n\
    \            1500 STORE_FAST               1 (sample)\n\n 973     >> 1502 LOAD_GLOBAL\
    \             50 (enumerate)\n            1504 LOAD_FAST                0 (self)\n\
    \            1506 LOAD_ATTR               51 (up_blocks)\n            1508 CALL_FUNCTION\
    \            1\n            1510 GET_ITER\n         >> 1512 FOR_ITER         \
    \       81 (to 1676)\n            1514 UNPACK_SEQUENCE          2\n          \
    \  1516 STORE_FAST              40 (i)\n            1518 STORE_FAST          \
    \    41 (upsample_block)\n\n 974        1520 LOAD_FAST               40 (i)\n\
    \            1522 LOAD_GLOBAL             21 (len)\n            1524 LOAD_FAST\
    \                0 (self)\n            1526 LOAD_ATTR               51 (up_blocks)\n\
    \            1528 CALL_FUNCTION            1\n            1530 LOAD_CONST    \
    \           9 (1)\n            1532 BINARY_SUBTRACT\n            1534 COMPARE_OP\
    \               2 (==)\n            1536 STORE_FAST              42 (is_final_block)\n\
    \n 976        1538 LOAD_FAST               33 (down_block_res_samples)\n     \
    \       1540 LOAD_GLOBAL             21 (len)\n            1542 LOAD_FAST    \
    \           41 (upsample_block)\n            1544 LOAD_ATTR               52 (resnets)\n\
    \            1546 CALL_FUNCTION            1\n            1548 UNARY_NEGATIVE\n\
    \            1550 LOAD_CONST               3 (None)\n            1552 BUILD_SLICE\
    \              2\n            1554 BINARY_SUBSCR\n            1556 STORE_FAST\
    \              36 (res_samples)\n\n 977        1558 LOAD_FAST               33\
    \ (down_block_res_samples)\n            1560 LOAD_CONST               3 (None)\n\
    \            1562 LOAD_GLOBAL             21 (len)\n            1564 LOAD_FAST\
    \               41 (upsample_block)\n            1566 LOAD_ATTR              \
    \ 52 (resnets)\n            1568 CALL_FUNCTION            1\n            1570\
    \ UNARY_NEGATIVE\n            1572 BUILD_SLICE              2\n            1574\
    \ BINARY_SUBSCR\n            1576 STORE_FAST              33 (down_block_res_samples)\n\
    \n 981        1578 LOAD_FAST               42 (is_final_block)\n            1580\
    \ EXTENDED_ARG             3\n            1582 POP_JUMP_IF_TRUE       804 (to\
    \ 1608)\n            1584 LOAD_FAST               13 (forward_upsample_size)\n\
    \            1586 EXTENDED_ARG             3\n            1588 POP_JUMP_IF_FALSE\
    \      804 (to 1608)\n\n 982        1590 LOAD_FAST               33 (down_block_res_samples)\n\
    \            1592 LOAD_CONST              18 (-1)\n            1594 BINARY_SUBSCR\n\
    \            1596 LOAD_ATTR                2 (shape)\n            1598 LOAD_CONST\
    \               1 (2)\n            1600 LOAD_CONST               3 (None)\n  \
    \          1602 BUILD_SLICE              2\n            1604 BINARY_SUBSCR\n \
    \           1606 STORE_FAST              14 (upsample_size)\n\n 984     >> 1608\
    \ LOAD_GLOBAL             46 (hasattr)\n            1610 LOAD_FAST           \
    \    41 (upsample_block)\n            1612 LOAD_CONST              41 ('has_cross_attention')\n\
    \            1614 CALL_FUNCTION            2\n            1616 EXTENDED_ARG  \
    \           3\n            1618 POP_JUMP_IF_FALSE      828 (to 1656)\n       \
    \     1620 LOAD_FAST               41 (upsample_block)\n            1622 LOAD_ATTR\
    \               47 (has_cross_attention)\n            1624 EXTENDED_ARG      \
    \       3\n            1626 POP_JUMP_IF_FALSE      828 (to 1656)\n\n 985     \
    \   1628 LOAD_FAST               41 (upsample_block)\n\n 986        1630 LOAD_FAST\
    \                1 (sample)\n\n 987        1632 LOAD_FAST               19 (emb)\n\
    \n 988        1634 LOAD_FAST               36 (res_samples)\n\n 989        1636\
    \ LOAD_FAST                3 (encoder_hidden_states)\n\n 990        1638 LOAD_FAST\
    \                7 (cross_attention_kwargs)\n\n 991        1640 LOAD_FAST    \
    \           14 (upsample_size)\n\n 992        1642 LOAD_FAST                6\
    \ (attention_mask)\n\n 993        1644 LOAD_FAST               11 (encoder_attention_mask)\n\
    \n 985        1646 LOAD_CONST              47 (('hidden_states', 'temb', 'res_hidden_states_tuple',\
    \ 'encoder_hidden_states', 'cross_attention_kwargs', 'upsample_size', 'attention_mask',\
    \ 'encoder_attention_mask'))\n            1648 CALL_FUNCTION_KW         8\n  \
    \          1650 STORE_FAST               1 (sample)\n            1652 EXTENDED_ARG\
    \             2\n            1654 JUMP_ABSOLUTE          756 (to 1512)\n\n 996\
    \     >> 1656 LOAD_FAST               41 (upsample_block)\n\n 997        1658\
    \ LOAD_FAST                1 (sample)\n            1660 LOAD_FAST            \
    \   19 (emb)\n            1662 LOAD_FAST               36 (res_samples)\n    \
    \        1664 LOAD_FAST               14 (upsample_size)\n\n 996        1666 LOAD_CONST\
    \              48 (('hidden_states', 'temb', 'res_hidden_states_tuple', 'upsample_size'))\n\
    \            1668 CALL_FUNCTION_KW         4\n            1670 STORE_FAST    \
    \           1 (sample)\n            1672 EXTENDED_ARG             2\n        \
    \    1674 JUMP_ABSOLUTE          756 (to 1512)\n\n1001     >> 1676 LOAD_FAST \
    \               0 (self)\n            1678 LOAD_ATTR               53 (conv_norm_out)\n\
    \            1680 EXTENDED_ARG             3\n            1682 POP_JUMP_IF_FALSE\
    \      852 (to 1704)\n\n1002        1684 LOAD_FAST                0 (self)\n \
    \           1686 LOAD_METHOD             53 (conv_norm_out)\n            1688\
    \ LOAD_FAST                1 (sample)\n            1690 CALL_METHOD          \
    \    1\n            1692 STORE_FAST               1 (sample)\n\n1003        1694\
    \ LOAD_FAST                0 (self)\n            1696 LOAD_METHOD            \
    \ 54 (conv_act)\n            1698 LOAD_FAST                1 (sample)\n      \
    \      1700 CALL_METHOD              1\n            1702 STORE_FAST          \
    \     1 (sample)\n\n1004     >> 1704 LOAD_FAST                0 (self)\n     \
    \       1706 LOAD_METHOD             55 (conv_out)\n            1708 LOAD_FAST\
    \                1 (sample)\n            1710 CALL_METHOD              1\n   \
    \         1712 STORE_FAST               1 (sample)\n\n1006        1714 LOAD_FAST\
    \               12 (return_dict)\n            1716 EXTENDED_ARG             3\n\
    \            1718 POP_JUMP_IF_TRUE       863 (to 1726)\n\n1007        1720 LOAD_FAST\
    \                1 (sample)\n            1722 BUILD_TUPLE              1\n   \
    \         1724 RETURN_VALUE\n\n1009     >> 1726 LOAD_GLOBAL             56 (UNet2DConditionOutput)\n\
    \            1728 LOAD_FAST                1 (sample)\n            1730 LOAD_CONST\
    \              49 (('sample',))\n            1732 CALL_FUNCTION_KW         1\n\
    \            1734 RETURN_VALUE\n\n ========== TorchDynamo Stack Trace ==========\n\
    Traceback (most recent call last):\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
    , line 324, in _compile\n    out_code = transform_code_object(code, transform)\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/bytecode_transformation.py\"\
    , line 445, in transform_code_object\n    transformations(instructions, code_options)\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/convert_frame.py\"\
    , line 311, in transform\n    tracer.run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 1726, in run\n    super().run()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 576, in run\n    and self.step()\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 540, in step\n    getattr(self, inst.opname)(inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 342, in wrapper\n    return inner_fn(self, inst)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 965, in CALL_FUNCTION\n    self.call_function(fn, args, {})\n  File \"\
    /usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\", line\
    \ 474, in call_function\n    self.push(fn.call_function(self, args, kwargs))\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
    , line 291, in call_function\n    return super().call_function(tx, args, kwargs)\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
    , line 259, in call_function\n    return super().call_function(tx, args, kwargs)\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/variables/functions.py\"\
    , line 92, in call_function\n    return tx.inline_user_function_return(\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 510, in inline_user_function_return\n    result = InliningInstructionTranslator.inline_call(self,\
    \ fn, args, kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 1806, in inline_call\n    return cls.inline_call_(parent, func, args, kwargs)\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/symbolic_convert.py\"\
    , line 1829, in inline_call_\n    unimplemented(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py\"\
    , line 71, in unimplemented\n    raise Unsupported(msg)\ntorch._dynamo.exc.Unsupported:\
    \ inline in skipfiles: Logger.info  | info /usr/lib/python3.10/logging/__init__.py\n\
    \n\n========== The above exception occurred while processing the following code\
    \ ==========\n\n  File \"/usr/lib/python3.10/runpy.py\", line 196, in _run_module_as_main\n\
    \    return _run_code(code, main_globals, None,\n  File \"/usr/lib/python3.10/runpy.py\"\
    , line 86, in _run_code\n    exec(code, run_globals)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel_launcher.py\"\
    , line 16, in <module>\n    app.launch_new_instance()\n  File \"/usr/local/lib/python3.10/dist-packages/traitlets/config/application.py\"\
    , line 992, in launch_instance\n    app.start()\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelapp.py\"\
    , line 619, in start\n    self.io_loop.start()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/platform/asyncio.py\"\
    , line 195, in start\n    self.asyncio_loop.run_forever()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
    , line 603, in run_forever\n    self._run_once()\n  File \"/usr/lib/python3.10/asyncio/base_events.py\"\
    , line 1909, in _run_once\n    handle._run()\n  File \"/usr/lib/python3.10/asyncio/events.py\"\
    , line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\", line 685, in\
    \ <lambda>\n    lambda f: self._run_callback(functools.partial(callback, future))\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/tornado/ioloop.py\", line 738,\
    \ in _run_callback\n    ret = callback()\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
    , line 825, in inner\n    self.ctx_run(self.run)\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
    , line 786, in run\n    yielded = self.gen.send(value)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
    , line 361, in process_one\n    yield gen.maybe_future(dispatch(*args))\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\", line 234, in wrapper\n\
    \    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
    , line 261, in dispatch_shell\n    yield gen.maybe_future(handler(stream, idents,\
    \ msg))\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\", line\
    \ 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/kernelbase.py\"\
    , line 539, in execute_request\n    self.do_execute(\n  File \"/usr/local/lib/python3.10/dist-packages/tornado/gen.py\"\
    , line 234, in wrapper\n    yielded = ctx_run(next, result)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/ipkernel.py\"\
    , line 302, in do_execute\n    res = shell.run_cell(code, store_history=store_history,\
    \ silent=silent)\n  File \"/usr/local/lib/python3.10/dist-packages/ipykernel/zmqshell.py\"\
    , line 539, in run_cell\n    return super(ZMQInteractiveShell, self).run_cell(*args,\
    \ **kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
    , line 2975, in run_cell\n    result = self._run_cell(\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
    , line 3030, in _run_cell\n    return runner(coro)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/async_helpers.py\"\
    , line 78, in _pseudo_sync_runner\n    coro.send(None)\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
    , line 3257, in run_cell_async\n    has_raised = await self.run_ast_nodes(code_ast.body,\
    \ cell_name,\n  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
    , line 3473, in run_ast_nodes\n    if (await self.run_code(code, result,  async_=asy)):\n\
    \  File \"/usr/local/lib/python3.10/dist-packages/IPython/core/interactiveshell.py\"\
    , line 3553, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n\
    \  File \"<ipython-input-6-0932307aec37>\", line 103, in <cell line: 101>\n  \
    \  image = base(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\n    return func(*args, **kwargs)\n  File \"/usr/local/lib/python3.10/dist-packages/diffusers/pipelines/stable_diffusion_xl/pipeline_stable_diffusion_xl.py\"\
    , line 812, in __call__\n    noise_pred = self.unet(\n  File \"/usr/local/lib/python3.10/dist-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\n    return forward_call(*args, **kwargs)\n  File \"\
    /usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
    , line 709, in forward\n    def forward(\n  File \"/usr/local/lib/python3.10/dist-packages/diffusers/models/unet_2d_condition.py\"\
    , line 762, in forward\n    logger.info(\"Forward upsample size to force interpolation\
    \ output size.\")\n\n==========\n---------------------------------------------------------------------------\n\
    Unsupported                               Traceback (most recent call last)\n\
    <ipython-input-6-0932307aec37> in <cell line: 101>()\n    101 with torch.no_grad():\n\
    \    102     # run both experts\n--> 103     image = base(\n    104         prompt=prompt,\n\
    \    105         num_inference_steps=n_steps,\n\n24 frames\n/usr/local/lib/python3.10/dist-packages/torch/_dynamo/exc.py\
    \ in unimplemented(msg)\n     69 def unimplemented(msg: str):\n     70     assert\
    \ msg != os.environ.get(\"BREAK\", False)\n---> 71     raise Unsupported(msg)\n\
    \     72 \n     73 \n\nUnsupported: inline in skipfiles: Logger.info  | info /usr/lib/python3.10/logging/__init__.py\n\
    ```\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/635d22554fabde0df74274dc/EokJ8i0hBX2ecVOMMKVvs.png)\n\
    confirmed torch v2"
  created_at: 2023-08-23 09:32:35+00:00
  edited: true
  hidden: false
  id: 64e5e043af4997fa889854a2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1679053470902-noauth.jpeg?w=200&h=200&f=face
      fullname: Max Makarov
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: maxpain177
      type: user
    createdAt: '2023-09-06T12:59:37.000Z'
    data:
      edited: false
      editors:
      - maxpain177
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.206913024187088
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1679053470902-noauth.jpeg?w=200&h=200&f=face
          fullname: Max Makarov
          isHf: false
          isPro: false
          name: maxpain177
          type: user
        html: '<p>The same error</p>

          '
        raw: The same error
        updatedAt: '2023-09-06T12:59:37.532Z'
      numEdits: 0
      reactions: []
    id: 64f877b90a2884a831921280
    type: comment
  author: maxpain177
  content: The same error
  created_at: 2023-09-06 11:59:37+00:00
  edited: false
  hidden: false
  id: 64f877b90a2884a831921280
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/62f8dcc413d46b4f3218662dee18e25f.svg
      fullname: Andrei Gheorghe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andreigh
      type: user
    createdAt: '2023-09-22T06:27:30.000Z'
    data:
      edited: false
      editors:
      - andreigh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7170907258987427
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/62f8dcc413d46b4f3218662dee18e25f.svg
          fullname: Andrei Gheorghe
          isHf: false
          isPro: false
          name: andreigh
          type: user
        html: '<p><a rel="nofollow" href="https://github.com/huggingface/diffusers/commit/a0198676d7eb73ebb1e409cf90bd963308025423">https://github.com/huggingface/diffusers/commit/a0198676d7eb73ebb1e409cf90bd963308025423</a>
          should have fixed this</p>

          '
        raw: https://github.com/huggingface/diffusers/commit/a0198676d7eb73ebb1e409cf90bd963308025423
          should have fixed this
        updatedAt: '2023-09-22T06:27:30.913Z'
      numEdits: 0
      reactions: []
    id: 650d33d2dcf6501f3af3bd6c
    type: comment
  author: andreigh
  content: https://github.com/huggingface/diffusers/commit/a0198676d7eb73ebb1e409cf90bd963308025423
    should have fixed this
  created_at: 2023-09-22 05:27:30+00:00
  edited: false
  hidden: false
  id: 650d33d2dcf6501f3af3bd6c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 73
repo_id: stabilityai/stable-diffusion-xl-base-1.0
repo_type: model
status: open
target_branch: null
title: '[Google Colab] refiner.unet = torch.compile(refiner.unet, mode="reduce-overhead",
  fullgraph=True) unsupport error'
