!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Mousey
conflicting_files: null
created_at: 2023-07-27 17:46:26+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7f1d7284f3fda2d3d46d08061c0f9e15.svg
      fullname: Residence
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Mousey
      type: user
    createdAt: '2023-07-27T18:46:26.000Z'
    data:
      edited: true
      editors:
      - Mousey
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8306664228439331
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7f1d7284f3fda2d3d46d08061c0f9e15.svg
          fullname: Residence
          isHf: false
          isPro: false
          name: Mousey
          type: user
        html: '<p>Hi, I''m getting the following error when running sdxl 1.0 in a
          container environment (same error on A10g and A100). Basically I get a black
          image, which I suppose is full of NaNs. I''m loading the pipeline like:</p>

          <p>self.pipe = diffusers.DiffusionPipeline.from_pretrained(<br>            cache_path,<br>            torch_dtype=torch.float16,<br>            use_safetensors=True,<br>            variant="fp16"<br>        ).to("cuda")</p>

          <p>I also get the following warning : The config attributes {''force_upcast'':
          True} were passed to AutoencoderKL, but are not expected and will be ignored.
          Please verify your config.json configuration file. Do you have any idea
          what''s happening here ? Thank you.</p>

          <p>PS: I tried version 0.18 and 0.19</p>

          '
        raw: "Hi, I'm getting the following error when running sdxl 1.0 in a container\
          \ environment (same error on A10g and A100). Basically I get a black image,\
          \ which I suppose is full of NaNs. I'm loading the pipeline like:\n\nself.pipe\
          \ = diffusers.DiffusionPipeline.from_pretrained(\n            cache_path,\n\
          \            torch_dtype=torch.float16,\n            use_safetensors=True,\
          \ \n            variant=\"fp16\"\n        ).to(\"cuda\")\n\nI also get the\
          \ following warning : The config attributes {'force_upcast': True} were\
          \ passed to AutoencoderKL, but are not expected and will be ignored. Please\
          \ verify your config.json configuration file. Do you have any idea what's\
          \ happening here ? Thank you.\n\nPS: I tried version 0.18 and 0.19"
        updatedAt: '2023-07-27T18:47:01.124Z'
      numEdits: 1
      reactions: []
    id: 64c2bb82c51240337d027e45
    type: comment
  author: Mousey
  content: "Hi, I'm getting the following error when running sdxl 1.0 in a container\
    \ environment (same error on A10g and A100). Basically I get a black image, which\
    \ I suppose is full of NaNs. I'm loading the pipeline like:\n\nself.pipe = diffusers.DiffusionPipeline.from_pretrained(\n\
    \            cache_path,\n            torch_dtype=torch.float16,\n           \
    \ use_safetensors=True, \n            variant=\"fp16\"\n        ).to(\"cuda\"\
    )\n\nI also get the following warning : The config attributes {'force_upcast':\
    \ True} were passed to AutoencoderKL, but are not expected and will be ignored.\
    \ Please verify your config.json configuration file. Do you have any idea what's\
    \ happening here ? Thank you.\n\nPS: I tried version 0.18 and 0.19"
  created_at: 2023-07-27 17:46:26+00:00
  edited: true
  hidden: false
  id: 64c2bb82c51240337d027e45
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2023-07-29T22:19:19.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9170730710029602
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>Can you make sure to have the newest diffusers version installed:</p>

          <pre><code class="language-py">pip install diffusers --upgrade

          </code></pre>

          '
        raw: 'Can you make sure to have the newest diffusers version installed:


          ```py

          pip install diffusers --upgrade

          ```'
        updatedAt: '2023-07-29T22:19:19.023Z'
      numEdits: 0
      reactions: []
    id: 64c5906719565937fb374eb1
    type: comment
  author: patrickvonplaten
  content: 'Can you make sure to have the newest diffusers version installed:


    ```py

    pip install diffusers --upgrade

    ```'
  created_at: 2023-07-29 21:19:19+00:00
  edited: false
  hidden: false
  id: 64c5906719565937fb374eb1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2023-07-29T22:20:11.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7512471675872803
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>Also to be sure you can fully generate in Fp16 you can use:<br><a
          href="https://huggingface.co/madebyollin/sdxl-vae-fp16-fix">https://huggingface.co/madebyollin/sdxl-vae-fp16-fix</a><br>for
          the vae</p>

          '
        raw: 'Also to be sure you can fully generate in Fp16 you can use:

          https://huggingface.co/madebyollin/sdxl-vae-fp16-fix

          for the vae'
        updatedAt: '2023-07-29T22:20:11.919Z'
      numEdits: 0
      reactions: []
    id: 64c5909b4399efa2fd9e211b
    type: comment
  author: patrickvonplaten
  content: 'Also to be sure you can fully generate in Fp16 you can use:

    https://huggingface.co/madebyollin/sdxl-vae-fp16-fix

    for the vae'
  created_at: 2023-07-29 21:20:11+00:00
  edited: false
  hidden: false
  id: 64c5909b4399efa2fd9e211b
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 25
repo_id: stabilityai/stable-diffusion-xl-base-1.0
repo_type: model
status: open
target_branch: null
title: 'RuntimeWarning: invalid value encountered in cast   images = (images * 255).round().astype("uint8")'
