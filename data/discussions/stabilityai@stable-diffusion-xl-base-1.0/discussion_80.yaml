!!python/object:huggingface_hub.community.DiscussionWithDetails
author: lumos123
conflicting_files: null
created_at: 2023-09-01 02:20:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f122c14690cf7c9760eda97a3dbb22ad.svg
      fullname: meihuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lumos123
      type: user
    createdAt: '2023-09-01T03:20:45.000Z'
    data:
      edited: false
      editors:
      - lumos123
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3536897301673889
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f122c14690cf7c9760eda97a3dbb22ad.svg
          fullname: meihuan
          isHf: false
          isPro: false
          name: lumos123
          type: user
        html: '<p>While following the instructions provided here <a href="https://huggingface.co/docs/diffusers/optimization/onnx">https://huggingface.co/docs/diffusers/optimization/onnx</a>
          to run the Stable diffusion SDXL ONNX model, the following error pops up
          during inference.</p>

          <h3 id="error-info">Error info:</h3>

          <p>ValueError: Required inputs ([''text_embeds'', ''time_ids'']) are missing
          from input feed ([''sample'', ''timestep'', ''encoder_hidden_states'']).</p>

          <h3 id="error-log">Error log:</h3>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/6412c7eeb8b57fe9227febd0/-4cmML8lA7kJXg-mzpdFK.png"><img
          alt="Snipaste_2023-09-01_11-16-27.png" src="https://cdn-uploads.huggingface.co/production/uploads/6412c7eeb8b57fe9227febd0/-4cmML8lA7kJXg-mzpdFK.png"></a></p>

          <h3 id="my-pip-list">My pip list:</h3>

          <p>Package                  Version<br>accelerate               0.22.0<br>aiohttp                  3.8.5<br>aiosignal                1.3.1<br>async-timeout            4.0.3<br>attrs                    23.1.0<br>certifi                  2023.7.22<br>charset-normalizer       3.2.0<br>cmake                    3.27.2<br>coloredlogs              15.0.1<br>datasets                 2.14.4<br>diffusers                0.20.2<br>dill                     0.3.7<br>evaluate                 0.4.0<br>filelock                 3.12.3<br>flatbuffers              23.5.26<br>frozenlist               1.4.0<br>fsspec                   2023.6.0<br>huggingface-hub          0.16.4<br>humanfriendly            10.0<br>idna                     3.4<br>importlib-metadata       6.8.0<br>invisible-watermark      0.2.0<br>Jinja2                   3.1.2<br>lit                      16.0.6<br>MarkupSafe               2.1.3<br>mpmath                   1.3.0<br>multidict                6.0.4<br>multiprocess             0.70.15<br>networkx                 3.1<br>numpy                    1.24.4<br>nvidia-cublas-cu11       11.10.3.66<br>nvidia-cuda-cupti-cu11   11.7.101<br>nvidia-cuda-nvrtc-cu11   11.7.99<br>nvidia-cuda-runtime-cu11
          11.7.99<br>nvidia-cudnn-cu11        8.5.0.96<br>nvidia-cufft-cu11        10.9.0.58<br>nvidia-curand-cu11       10.2.10.91<br>nvidia-cusolver-cu11     11.4.0.1<br>nvidia-cusparse-cu11     11.7.4.91<br>nvidia-nccl-cu11         2.14.3<br>nvidia-nvtx-cu11         11.7.91<br>onnx                     1.14.1<br>onnxruntime              1.15.1<br>opencv-python            4.8.0.76<br>optimum                  1.12.0<br>packaging                23.1<br>pandas                   2.0.3<br>Pillow                   10.0.0<br>pip                      23.2.1<br>protobuf                 4.24.2<br>psutil                   5.9.5<br>pyarrow                  13.0.0<br>python-dateutil          2.8.2<br>pytz                     2023.3<br>PyWavelets               1.4.1<br>PyYAML                   6.0.1<br>regex                    2023.8.8<br>requests                 2.31.0<br>responses                0.18.0<br>safetensors              0.3.3<br>sentencepiece            0.1.99<br>setuptools               68.0.0<br>six                      1.16.0<br>sympy                    1.12<br>tokenizers               0.13.3<br>torch                    2.0.1<br>tqdm                     4.66.1<br>transformers             4.32.1<br>triton                   2.0.0<br>typing_extensions        4.7.1<br>tzdata                   2023.3<br>urllib3                  2.0.4<br>wheel                    0.38.4<br>xxhash                   3.3.0<br>yarl                     1.9.2<br>zipp                     3.16.2</p>

          '
        raw: "While following the instructions provided here https://huggingface.co/docs/diffusers/optimization/onnx\
          \ to run the Stable diffusion SDXL ONNX model, the following error pops\
          \ up during inference.\r\n\r\n### Error info:\r\nValueError: Required inputs\
          \ (['text_embeds', 'time_ids']) are missing from input feed (['sample',\
          \ 'timestep', 'encoder_hidden_states']).\r\n\r\n### Error log:\r\n![Snipaste_2023-09-01_11-16-27.png](https://cdn-uploads.huggingface.co/production/uploads/6412c7eeb8b57fe9227febd0/-4cmML8lA7kJXg-mzpdFK.png)\r\
          \n\r\n\r\n### My pip list:\r\nPackage                  Version\r\naccelerate\
          \               0.22.0\r\naiohttp                  3.8.5\r\naiosignal  \
          \              1.3.1\r\nasync-timeout            4.0.3\r\nattrs        \
          \            23.1.0\r\ncertifi                  2023.7.22\r\ncharset-normalizer\
          \       3.2.0\r\ncmake                    3.27.2\r\ncoloredlogs        \
          \      15.0.1\r\ndatasets                 2.14.4\r\ndiffusers          \
          \      0.20.2\r\ndill                     0.3.7\r\nevaluate            \
          \     0.4.0\r\nfilelock                 3.12.3\r\nflatbuffers          \
          \    23.5.26\r\nfrozenlist               1.4.0\r\nfsspec               \
          \    2023.6.0\r\nhuggingface-hub          0.16.4\r\nhumanfriendly      \
          \      10.0\r\nidna                     3.4\r\nimportlib-metadata      \
          \ 6.8.0\r\ninvisible-watermark      0.2.0\r\nJinja2                   3.1.2\r\
          \nlit                      16.0.6\r\nMarkupSafe               2.1.3\r\n\
          mpmath                   1.3.0\r\nmultidict                6.0.4\r\nmultiprocess\
          \             0.70.15\r\nnetworkx                 3.1\r\nnumpy         \
          \           1.24.4\r\nnvidia-cublas-cu11       11.10.3.66\r\nnvidia-cuda-cupti-cu11\
          \   11.7.101\r\nnvidia-cuda-nvrtc-cu11   11.7.99\r\nnvidia-cuda-runtime-cu11\
          \ 11.7.99\r\nnvidia-cudnn-cu11        8.5.0.96\r\nnvidia-cufft-cu11    \
          \    10.9.0.58\r\nnvidia-curand-cu11       10.2.10.91\r\nnvidia-cusolver-cu11\
          \     11.4.0.1\r\nnvidia-cusparse-cu11     11.7.4.91\r\nnvidia-nccl-cu11\
          \         2.14.3\r\nnvidia-nvtx-cu11         11.7.91\r\nonnx           \
          \          1.14.1\r\nonnxruntime              1.15.1\r\nopencv-python  \
          \          4.8.0.76\r\noptimum                  1.12.0\r\npackaging    \
          \            23.1\r\npandas                   2.0.3\r\nPillow          \
          \         10.0.0\r\npip                      23.2.1\r\nprotobuf        \
          \         4.24.2\r\npsutil                   5.9.5\r\npyarrow          \
          \        13.0.0\r\npython-dateutil          2.8.2\r\npytz              \
          \       2023.3\r\nPyWavelets               1.4.1\r\nPyYAML             \
          \      6.0.1\r\nregex                    2023.8.8\r\nrequests          \
          \       2.31.0\r\nresponses                0.18.0\r\nsafetensors       \
          \       0.3.3\r\nsentencepiece            0.1.99\r\nsetuptools         \
          \      68.0.0\r\nsix                      1.16.0\r\nsympy              \
          \      1.12\r\ntokenizers               0.13.3\r\ntorch                \
          \    2.0.1\r\ntqdm                     4.66.1\r\ntransformers          \
          \   4.32.1\r\ntriton                   2.0.0\r\ntyping_extensions      \
          \  4.7.1\r\ntzdata                   2023.3\r\nurllib3                 \
          \ 2.0.4\r\nwheel                    0.38.4\r\nxxhash                   3.3.0\r\
          \nyarl                     1.9.2\r\nzipp                     3.16.2"
        updatedAt: '2023-09-01T03:20:45.446Z'
      numEdits: 0
      reactions: []
    id: 64f1588d1d4c3969d153bf41
    type: comment
  author: lumos123
  content: "While following the instructions provided here https://huggingface.co/docs/diffusers/optimization/onnx\
    \ to run the Stable diffusion SDXL ONNX model, the following error pops up during\
    \ inference.\r\n\r\n### Error info:\r\nValueError: Required inputs (['text_embeds',\
    \ 'time_ids']) are missing from input feed (['sample', 'timestep', 'encoder_hidden_states']).\r\
    \n\r\n### Error log:\r\n![Snipaste_2023-09-01_11-16-27.png](https://cdn-uploads.huggingface.co/production/uploads/6412c7eeb8b57fe9227febd0/-4cmML8lA7kJXg-mzpdFK.png)\r\
    \n\r\n\r\n### My pip list:\r\nPackage                  Version\r\naccelerate \
    \              0.22.0\r\naiohttp                  3.8.5\r\naiosignal         \
    \       1.3.1\r\nasync-timeout            4.0.3\r\nattrs                    23.1.0\r\
    \ncertifi                  2023.7.22\r\ncharset-normalizer       3.2.0\r\ncmake\
    \                    3.27.2\r\ncoloredlogs              15.0.1\r\ndatasets   \
    \              2.14.4\r\ndiffusers                0.20.2\r\ndill             \
    \        0.3.7\r\nevaluate                 0.4.0\r\nfilelock                 3.12.3\r\
    \nflatbuffers              23.5.26\r\nfrozenlist               1.4.0\r\nfsspec\
    \                   2023.6.0\r\nhuggingface-hub          0.16.4\r\nhumanfriendly\
    \            10.0\r\nidna                     3.4\r\nimportlib-metadata      \
    \ 6.8.0\r\ninvisible-watermark      0.2.0\r\nJinja2                   3.1.2\r\n\
    lit                      16.0.6\r\nMarkupSafe               2.1.3\r\nmpmath  \
    \                 1.3.0\r\nmultidict                6.0.4\r\nmultiprocess    \
    \         0.70.15\r\nnetworkx                 3.1\r\nnumpy                   \
    \ 1.24.4\r\nnvidia-cublas-cu11       11.10.3.66\r\nnvidia-cuda-cupti-cu11   11.7.101\r\
    \nnvidia-cuda-nvrtc-cu11   11.7.99\r\nnvidia-cuda-runtime-cu11 11.7.99\r\nnvidia-cudnn-cu11\
    \        8.5.0.96\r\nnvidia-cufft-cu11        10.9.0.58\r\nnvidia-curand-cu11\
    \       10.2.10.91\r\nnvidia-cusolver-cu11     11.4.0.1\r\nnvidia-cusparse-cu11\
    \     11.7.4.91\r\nnvidia-nccl-cu11         2.14.3\r\nnvidia-nvtx-cu11       \
    \  11.7.91\r\nonnx                     1.14.1\r\nonnxruntime              1.15.1\r\
    \nopencv-python            4.8.0.76\r\noptimum                  1.12.0\r\npackaging\
    \                23.1\r\npandas                   2.0.3\r\nPillow            \
    \       10.0.0\r\npip                      23.2.1\r\nprotobuf                \
    \ 4.24.2\r\npsutil                   5.9.5\r\npyarrow                  13.0.0\r\
    \npython-dateutil          2.8.2\r\npytz                     2023.3\r\nPyWavelets\
    \               1.4.1\r\nPyYAML                   6.0.1\r\nregex             \
    \       2023.8.8\r\nrequests                 2.31.0\r\nresponses             \
    \   0.18.0\r\nsafetensors              0.3.3\r\nsentencepiece            0.1.99\r\
    \nsetuptools               68.0.0\r\nsix                      1.16.0\r\nsympy\
    \                    1.12\r\ntokenizers               0.13.3\r\ntorch        \
    \            2.0.1\r\ntqdm                     4.66.1\r\ntransformers        \
    \     4.32.1\r\ntriton                   2.0.0\r\ntyping_extensions        4.7.1\r\
    \ntzdata                   2023.3\r\nurllib3                  2.0.4\r\nwheel \
    \                   0.38.4\r\nxxhash                   3.3.0\r\nyarl         \
    \            1.9.2\r\nzipp                     3.16.2"
  created_at: 2023-09-01 02:20:45+00:00
  edited: false
  hidden: false
  id: 64f1588d1d4c3969d153bf41
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f122c14690cf7c9760eda97a3dbb22ad.svg
      fullname: meihuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lumos123
      type: user
    createdAt: '2023-09-05T11:08:00.000Z'
    data:
      edited: false
      editors:
      - lumos123
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.23588994145393372
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f122c14690cf7c9760eda97a3dbb22ad.svg
          fullname: meihuan
          isHf: false
          isPro: false
          name: lumos123
          type: user
        html: '<p>Fixed by changing  <code>from optimum.onnxruntime import ORTStableDiffusionPipeline</code><br>to
          <code>from optimum.onnxruntime import ORTStableDiffusionXLPipeline</code></p>

          '
        raw: 'Fixed by changing  `from optimum.onnxruntime import ORTStableDiffusionPipeline`

          to `from optimum.onnxruntime import ORTStableDiffusionXLPipeline`'
        updatedAt: '2023-09-05T11:08:00.167Z'
      numEdits: 0
      reactions: []
    id: 64f70c10e00083f5bd27be43
    type: comment
  author: lumos123
  content: 'Fixed by changing  `from optimum.onnxruntime import ORTStableDiffusionPipeline`

    to `from optimum.onnxruntime import ORTStableDiffusionXLPipeline`'
  created_at: 2023-09-05 10:08:00+00:00
  edited: false
  hidden: false
  id: 64f70c10e00083f5bd27be43
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f122c14690cf7c9760eda97a3dbb22ad.svg
      fullname: meihuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lumos123
      type: user
    createdAt: '2023-09-05T11:08:40.000Z'
    data:
      status: closed
    id: 64f70c380d25c117a17c5fcf
    type: status-change
  author: lumos123
  created_at: 2023-09-05 10:08:40+00:00
  id: 64f70c380d25c117a17c5fcf
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 80
repo_id: stabilityai/stable-diffusion-xl-base-1.0
repo_type: model
status: closed
target_branch: null
title: SDXL ONNX infer ValueError
