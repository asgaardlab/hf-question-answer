!!python/object:huggingface_hub.community.DiscussionWithDetails
author: j3698
conflicting_files: null
created_at: 2023-08-11 06:28:23+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ad8219ac80212dcd92b8e9c48d310a85.svg
      fullname: Antioch Sanders
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: j3698
      type: user
    createdAt: '2023-08-11T07:28:23.000Z'
    data:
      edited: true
      editors:
      - j3698
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7016176581382751
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ad8219ac80212dcd92b8e9c48d310a85.svg
          fullname: Antioch Sanders
          isHf: false
          isPro: false
          name: j3698
          type: user
        html: '<p>There seems to be an inconsistency with the text encoder 2 weights.
          With the sd_xl_base_1.0.safetensors, I view conditioner.embedders.1.model.text_projection
          and it is:<br>tensor([[-0.0348,  0.0218, -0.0025,  ..., -0.0034, -0.0138,
          -0.0075],<br>        [-0.0037,  0.0202, -0.0014,  ..., -0.0082, -0.0011,  0.0170],<br>        [
          0.0261, -0.0221, -0.0099,  ..., -0.0233, -0.0178, -0.0061],<br>        ...,<br>        [
          0.0042, -0.0068,  0.0086,  ...,  0.0008, -0.0030, -0.0042],<br>        [-0.0236,  0.0094,  0.0040,  ...,
          -0.0098,  0.0330,  0.0147],<br>        [ 0.0084, -0.0021, -0.0049,  ...,  0.0026,
          -0.0055, -0.0294]],<br>       dtype=torch.float16)</p>

          <p>However if I go into text_encoder_2/model.fp16.safetensors, I see text_projection.weight
          is:<br>tensor([[-0.0348, -0.0037,  0.0261,  ...,  0.0042, -0.0236,  0.0084],<br>        [
          0.0218,  0.0202, -0.0221,  ..., -0.0068,  0.0094, -0.0021],<br>        [-0.0025,
          -0.0014, -0.0099,  ...,  0.0086,  0.0040, -0.0049],<br>        ...,<br>        [-0.0034,
          -0.0082, -0.0233,  ...,  0.0008, -0.0098,  0.0026],<br>        [-0.0138,
          -0.0011, -0.0178,  ..., -0.0030,  0.0330, -0.0055],<br>        [-0.0075,  0.0170,
          -0.0061,  ..., -0.0042,  0.0147, -0.0294]],<br>       dtype=torch.float16)</p>

          <p>Which one should be correct? Is one the original, was the other tuned?</p>

          '
        raw: "There seems to be an inconsistency with the text encoder 2 weights.\
          \ With the sd_xl_base_1.0.safetensors, I view conditioner.embedders.1.model.text_projection\
          \ and it is:\ntensor([[-0.0348,  0.0218, -0.0025,  ..., -0.0034, -0.0138,\
          \ -0.0075],\n        [-0.0037,  0.0202, -0.0014,  ..., -0.0082, -0.0011,\
          \  0.0170],\n        [ 0.0261, -0.0221, -0.0099,  ..., -0.0233, -0.0178,\
          \ -0.0061],\n        ...,\n        [ 0.0042, -0.0068,  0.0086,  ...,  0.0008,\
          \ -0.0030, -0.0042],\n        [-0.0236,  0.0094,  0.0040,  ..., -0.0098,\
          \  0.0330,  0.0147],\n        [ 0.0084, -0.0021, -0.0049,  ...,  0.0026,\
          \ -0.0055, -0.0294]],\n       dtype=torch.float16)\n\nHowever if I go into\
          \ text_encoder_2/model.fp16.safetensors, I see text_projection.weight is:\n\
          tensor([[-0.0348, -0.0037,  0.0261,  ...,  0.0042, -0.0236,  0.0084],\n\
          \        [ 0.0218,  0.0202, -0.0221,  ..., -0.0068,  0.0094, -0.0021],\n\
          \        [-0.0025, -0.0014, -0.0099,  ...,  0.0086,  0.0040, -0.0049],\n\
          \        ...,\n        [-0.0034, -0.0082, -0.0233,  ...,  0.0008, -0.0098,\
          \  0.0026],\n        [-0.0138, -0.0011, -0.0178,  ..., -0.0030,  0.0330,\
          \ -0.0055],\n        [-0.0075,  0.0170, -0.0061,  ..., -0.0042,  0.0147,\
          \ -0.0294]],\n       dtype=torch.float16)\n\nWhich one should be correct?\
          \ Is one the original, was the other tuned?"
        updatedAt: '2023-08-11T07:29:39.130Z'
      numEdits: 1
      reactions: []
    id: 64d5e317887f55fb6e0defb2
    type: comment
  author: j3698
  content: "There seems to be an inconsistency with the text encoder 2 weights. With\
    \ the sd_xl_base_1.0.safetensors, I view conditioner.embedders.1.model.text_projection\
    \ and it is:\ntensor([[-0.0348,  0.0218, -0.0025,  ..., -0.0034, -0.0138, -0.0075],\n\
    \        [-0.0037,  0.0202, -0.0014,  ..., -0.0082, -0.0011,  0.0170],\n     \
    \   [ 0.0261, -0.0221, -0.0099,  ..., -0.0233, -0.0178, -0.0061],\n        ...,\n\
    \        [ 0.0042, -0.0068,  0.0086,  ...,  0.0008, -0.0030, -0.0042],\n     \
    \   [-0.0236,  0.0094,  0.0040,  ..., -0.0098,  0.0330,  0.0147],\n        [ 0.0084,\
    \ -0.0021, -0.0049,  ...,  0.0026, -0.0055, -0.0294]],\n       dtype=torch.float16)\n\
    \nHowever if I go into text_encoder_2/model.fp16.safetensors, I see text_projection.weight\
    \ is:\ntensor([[-0.0348, -0.0037,  0.0261,  ...,  0.0042, -0.0236,  0.0084],\n\
    \        [ 0.0218,  0.0202, -0.0221,  ..., -0.0068,  0.0094, -0.0021],\n     \
    \   [-0.0025, -0.0014, -0.0099,  ...,  0.0086,  0.0040, -0.0049],\n        ...,\n\
    \        [-0.0034, -0.0082, -0.0233,  ...,  0.0008, -0.0098,  0.0026],\n     \
    \   [-0.0138, -0.0011, -0.0178,  ..., -0.0030,  0.0330, -0.0055],\n        [-0.0075,\
    \  0.0170, -0.0061,  ..., -0.0042,  0.0147, -0.0294]],\n       dtype=torch.float16)\n\
    \nWhich one should be correct? Is one the original, was the other tuned?"
  created_at: 2023-08-11 06:28:23+00:00
  edited: true
  hidden: false
  id: 64d5e317887f55fb6e0defb2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ad8219ac80212dcd92b8e9c48d310a85.svg
      fullname: Antioch Sanders
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: j3698
      type: user
    createdAt: '2023-08-11T19:43:07.000Z'
    data:
      edited: true
      editors:
      - j3698
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9961035847663879
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ad8219ac80212dcd92b8e9c48d310a85.svg
          fullname: Antioch Sanders
          isHf: false
          isPro: false
          name: j3698
          type: user
        html: '<p>I see they are just transposed</p>

          '
        raw: I see they are just transposed
        updatedAt: '2023-08-17T19:41:25.140Z'
      numEdits: 1
      reactions: []
    id: 64d68f4bbadf1110f7a7fff4
    type: comment
  author: j3698
  content: I see they are just transposed
  created_at: 2023-08-11 18:43:07+00:00
  edited: true
  hidden: false
  id: 64d68f4bbadf1110f7a7fff4
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 55
repo_id: stabilityai/stable-diffusion-xl-base-1.0
repo_type: model
status: open
target_branch: null
title: Issue with CLIP2
