!!python/object:huggingface_hub.community.DiscussionWithDetails
author: davidlandeo
conflicting_files: null
created_at: 2023-09-02 23:48:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d949e69c0f9bc844611661d780206dd3.svg
      fullname: David Jair Landeo Vargas
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: davidlandeo
      type: user
    createdAt: '2023-09-03T00:48:56.000Z'
    data:
      edited: false
      editors:
      - davidlandeo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8208417892456055
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d949e69c0f9bc844611661d780206dd3.svg
          fullname: David Jair Landeo Vargas
          isHf: false
          isPro: false
          name: davidlandeo
          type: user
        html: '<p>I downloaded the model multitask_unity_large.pt but I don''t know
          how to use it, how to ask for </p>

          <ul>

          <li>Speech-to-speech translation (S2ST)</li>

          <li>Speech-to-text translation (S2TT)</li>

          <li>Text-to-speech translation (T2ST)</li>

          <li>Text-to-text translation (T2TT)</li>

          <li>Automatic speech recognition (ASR) ?</li>

          </ul>

          '
        raw: "I downloaded the model multitask_unity_large.pt but I don't know how\
          \ to use it, how to ask for \r\n\r\n- Speech-to-speech translation (S2ST)\r\
          \n- Speech-to-text translation (S2TT)\r\n- Text-to-speech translation (T2ST)\r\
          \n- Text-to-text translation (T2TT)\r\n- Automatic speech recognition (ASR)\
          \ ?"
        updatedAt: '2023-09-03T00:48:56.137Z'
      numEdits: 0
      reactions: []
    id: 64f3d7f8346b5763c5e662ee
    type: comment
  author: davidlandeo
  content: "I downloaded the model multitask_unity_large.pt but I don't know how to\
    \ use it, how to ask for \r\n\r\n- Speech-to-speech translation (S2ST)\r\n- Speech-to-text\
    \ translation (S2TT)\r\n- Text-to-speech translation (T2ST)\r\n- Text-to-text\
    \ translation (T2TT)\r\n- Automatic speech recognition (ASR) ?"
  created_at: 2023-09-02 23:48:56+00:00
  edited: false
  hidden: false
  id: 64f3d7f8346b5763c5e662ee
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-09-06T14:10:45.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8055550456047058
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: '<p>You can pass the path to the model checkpoint to the <code>Translator</code>
          class instead of the checkpoint name. See <a href="https://huggingface.co/facebook/seamless-m4t-large#instructions-to-run-inference-with-seamlessm4t-models">instructions-to-run-inference-with-seamlessm4t-models</a>
          for details</p>

          '
        raw: You can pass the path to the model checkpoint to the `Translator` class
          instead of the checkpoint name. See [instructions-to-run-inference-with-seamlessm4t-models](https://huggingface.co/facebook/seamless-m4t-large#instructions-to-run-inference-with-seamlessm4t-models)
          for details
        updatedAt: '2023-09-06T14:10:45.199Z'
      numEdits: 0
      reactions: []
    id: 64f88865ceabf1e6fc594cfd
    type: comment
  author: sanchit-gandhi
  content: You can pass the path to the model checkpoint to the `Translator` class
    instead of the checkpoint name. See [instructions-to-run-inference-with-seamlessm4t-models](https://huggingface.co/facebook/seamless-m4t-large#instructions-to-run-inference-with-seamlessm4t-models)
    for details
  created_at: 2023-09-06 13:10:45+00:00
  edited: false
  hidden: false
  id: 64f88865ceabf1e6fc594cfd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f9e4deeb372b0b8422ec8c6da8626f63.svg
      fullname: Odessa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: OddyKwinn
      type: user
    createdAt: '2023-10-03T15:18:31.000Z'
    data:
      edited: true
      editors:
      - OddyKwinn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7683311700820923
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f9e4deeb372b0b8422ec8c6da8626f63.svg
          fullname: Odessa
          isHf: false
          isPro: false
          name: OddyKwinn
          type: user
        html: "<p>How it should look like?<br>I put all weights to local folder \"\
          seamless_weights\" and  pass<br>them to Translator class:<br>import torch<br>from\
          \ seamless_communication.models.inference import Translator</p>\n<p>translator\
          \ = Translator(\"seamless_weights/multitask_unity_medium.pt\",<br>     \
          \                   vocoder_name_or_card=\"seamless_weights/vocoder_36langs.pt\"\
          ,<br>                        device=torch.device(\"cpu\"))<br>it outputs\
          \ me Value Error exeception:<br>ValueError: <code>name</code> must be a\
          \ valid filename, but is 'seamless_weights/multitask_unity_medium.pt' instead.\
          \ </p>\n<p>What does it mean 'valid filename' in this context?<br>It is\
          \ valid file name<br>os.path.exists('seamless_weights/multitask_unity_medium.pt')<br>True</p>\n\
          <p>Now I try to alter model cards  seamless_communication/assets/cards/seamlessM4T_medium.yaml<br>to\
          \ make them load the weights from the local folder<br>#checkpoint: \"<a\
          \ href=\"https://huggingface.co/facebook/seamless-m4t-medium/resolve/main/multitask_unity_medium.pt&quot;\"\
          >https://huggingface.co/facebook/seamless-m4t-medium/resolve/main/multitask_unity_medium.pt\"\
          </a><br>checkpoint: \"/home/local/seamless_communication/seamless_weights/multitask_unity_medium.pt\"\
          <br>but got exeception that this path should be a valid uri...<br>It is\
          \ quite unclear how to use local weights...</p>\n<p>Update:</p>\n<p>This\
          \ seamless_communication models seems based on farseq2 library and use its\
          \ classes for weights downloading<br>So to achieve the goal above we can\
          \ implement subclasses for two  fairseq2 classes:<br>from fairseq2.models.utils.model_loader\
          \ import ModelLoader<br>from fairseq2.models.nllb.loader import NllbTokenizerLoader\
          \ </p>\n<p>Where get rid of check if path to weights are uri in fashion\
          \ like this</p>\n<pre><code>try:\n        # Load the checkpoint.\n     \
          \   uri = card.field(\"checkpoint\").as_uri()\n        pathname = self.download_manager.download_checkpoint(uri,\
          \ card.name, force=force, progress=progress)\nexcept AssetCardError:\n \
          \       pathname = card.field(\"checkpoint\").data\n</code></pre>\n<p>And\
          \ use these subclasses in dedicated classes of seamless_communication.</p>\n\
          <p>But this doesn't fix a problem then weights are located on remote share...\
          \ </p>\n"
        raw: "How it should look like? \nI put all weights to local folder \"seamless_weights\"\
          \ and  pass \nthem to Translator class:\nimport torch\nfrom seamless_communication.models.inference\
          \ import Translator\n\ntranslator = Translator(\"seamless_weights/multitask_unity_medium.pt\"\
          ,\n                        vocoder_name_or_card=\"seamless_weights/vocoder_36langs.pt\"\
          , \n                        device=torch.device(\"cpu\"))\nit outputs me\
          \ Value Error exeception: \nValueError: `name` must be a valid filename,\
          \ but is 'seamless_weights/multitask_unity_medium.pt' instead. \n\nWhat\
          \ does it mean 'valid filename' in this context? \nIt is valid file name\
          \  \nos.path.exists('seamless_weights/multitask_unity_medium.pt')\nTrue\n\
          \nNow I try to alter model cards  seamless_communication/assets/cards/seamlessM4T_medium.yaml\n\
          to make them load the weights from the local folder\n#checkpoint: \"https://huggingface.co/facebook/seamless-m4t-medium/resolve/main/multitask_unity_medium.pt\"\
          \ncheckpoint: \"/home/local/seamless_communication/seamless_weights/multitask_unity_medium.pt\"\
          \nbut got exeception that this path should be a valid uri...\nIt is quite\
          \ unclear how to use local weights...\n\nUpdate:\n\nThis seamless_communication\
          \ models seems based on farseq2 library and use its classes for weights\
          \ downloading \nSo to achieve the goal above we can implement subclasses\
          \ for two  fairseq2 classes:\nfrom fairseq2.models.utils.model_loader import\
          \ ModelLoader\nfrom fairseq2.models.nllb.loader import NllbTokenizerLoader\
          \ \n\nWhere get rid of check if path to weights are uri in fashion like\
          \ this\n \n    try:\n            # Load the checkpoint.\n            uri\
          \ = card.field(\"checkpoint\").as_uri()\n            pathname = self.download_manager.download_checkpoint(uri,\
          \ card.name, force=force, progress=progress)\n    except AssetCardError:\n\
          \            pathname = card.field(\"checkpoint\").data\n\nAnd use these\
          \ subclasses in dedicated classes of seamless_communication.\n\nBut this\
          \ doesn't fix a problem then weights are located on remote share... "
        updatedAt: '2023-10-18T09:11:54.921Z'
      numEdits: 3
      reactions: []
    id: 651c30c78bbd147cd5f2acf8
    type: comment
  author: OddyKwinn
  content: "How it should look like? \nI put all weights to local folder \"seamless_weights\"\
    \ and  pass \nthem to Translator class:\nimport torch\nfrom seamless_communication.models.inference\
    \ import Translator\n\ntranslator = Translator(\"seamless_weights/multitask_unity_medium.pt\"\
    ,\n                        vocoder_name_or_card=\"seamless_weights/vocoder_36langs.pt\"\
    , \n                        device=torch.device(\"cpu\"))\nit outputs me Value\
    \ Error exeception: \nValueError: `name` must be a valid filename, but is 'seamless_weights/multitask_unity_medium.pt'\
    \ instead. \n\nWhat does it mean 'valid filename' in this context? \nIt is valid\
    \ file name  \nos.path.exists('seamless_weights/multitask_unity_medium.pt')\n\
    True\n\nNow I try to alter model cards  seamless_communication/assets/cards/seamlessM4T_medium.yaml\n\
    to make them load the weights from the local folder\n#checkpoint: \"https://huggingface.co/facebook/seamless-m4t-medium/resolve/main/multitask_unity_medium.pt\"\
    \ncheckpoint: \"/home/local/seamless_communication/seamless_weights/multitask_unity_medium.pt\"\
    \nbut got exeception that this path should be a valid uri...\nIt is quite unclear\
    \ how to use local weights...\n\nUpdate:\n\nThis seamless_communication models\
    \ seems based on farseq2 library and use its classes for weights downloading \n\
    So to achieve the goal above we can implement subclasses for two  fairseq2 classes:\n\
    from fairseq2.models.utils.model_loader import ModelLoader\nfrom fairseq2.models.nllb.loader\
    \ import NllbTokenizerLoader \n\nWhere get rid of check if path to weights are\
    \ uri in fashion like this\n \n    try:\n            # Load the checkpoint.\n\
    \            uri = card.field(\"checkpoint\").as_uri()\n            pathname =\
    \ self.download_manager.download_checkpoint(uri, card.name, force=force, progress=progress)\n\
    \    except AssetCardError:\n            pathname = card.field(\"checkpoint\"\
    ).data\n\nAnd use these subclasses in dedicated classes of seamless_communication.\n\
    \nBut this doesn't fix a problem then weights are located on remote share... "
  created_at: 2023-10-03 14:18:31+00:00
  edited: true
  hidden: false
  id: 651c30c78bbd147cd5f2acf8
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 14
repo_id: facebook/seamless-m4t-large
repo_type: model
status: open
target_branch: null
title: Downloaded multitask_unity_large.pt, how can I use it
