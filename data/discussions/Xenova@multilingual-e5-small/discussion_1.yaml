!!python/object:huggingface_hub.community.DiscussionWithDetails
author: do-me
conflicting_files: null
created_at: 2023-11-18 18:09:17+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-18T18:09:17.000Z'
    data:
      edited: false
      editors:
      - do-me
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7707149386405945
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
          fullname: "Dominik Weckm\xFCller"
          isHf: false
          isPro: false
          name: do-me
          type: user
        html: "<p>Apparently the token_type_ids are missing. The <a href=\"https://huggingface.co/intfloat/multilingual-e5-small/tree/main/onnx\"\
          >intfloat</a> repo is also not working with transformers.js. </p>\n<pre><code>models.js:351\
          \ Uncaught (in promise) Error: An error occurred during model execution:\
          \ \"Missing the following inputs: token_type_ids.\n    at validateInputs\
          \ (models.js:351:15)\n    at sessionRun (models.js:379:33)\n    at Function.encoderForward\
          \ [as _forward] (models.js:643:18)\n    at Function.forward (models.js:929:27)\n\
          \    at Function._call (models.js:918:27)\n    at Function.closure [as model]\
          \ (core.js:77:28)\n    at Function._call (pipelines.js:119:34)\n    at Function._call\
          \ (pipelines.js:906:45)\n    at closure (core.js:77:28)\n    at embed (worker.js:44:22)\n\
          </code></pre>\n"
        raw: "Apparently the token_type_ids are missing. The [intfloat](https://huggingface.co/intfloat/multilingual-e5-small/tree/main/onnx)\
          \ repo is also not working with transformers.js. \r\n\r\n```\r\nmodels.js:351\
          \ Uncaught (in promise) Error: An error occurred during model execution:\
          \ \"Missing the following inputs: token_type_ids.\r\n    at validateInputs\
          \ (models.js:351:15)\r\n    at sessionRun (models.js:379:33)\r\n    at Function.encoderForward\
          \ [as _forward] (models.js:643:18)\r\n    at Function.forward (models.js:929:27)\r\
          \n    at Function._call (models.js:918:27)\r\n    at Function.closure [as\
          \ model] (core.js:77:28)\r\n    at Function._call (pipelines.js:119:34)\r\
          \n    at Function._call (pipelines.js:906:45)\r\n    at closure (core.js:77:28)\r\
          \n    at embed (worker.js:44:22)\r\n```"
        updatedAt: '2023-11-18T18:09:17.947Z'
      numEdits: 0
      reactions: []
    id: 6558fdcdc6923107399f87ff
    type: comment
  author: do-me
  content: "Apparently the token_type_ids are missing. The [intfloat](https://huggingface.co/intfloat/multilingual-e5-small/tree/main/onnx)\
    \ repo is also not working with transformers.js. \r\n\r\n```\r\nmodels.js:351\
    \ Uncaught (in promise) Error: An error occurred during model execution: \"Missing\
    \ the following inputs: token_type_ids.\r\n    at validateInputs (models.js:351:15)\r\
    \n    at sessionRun (models.js:379:33)\r\n    at Function.encoderForward [as _forward]\
    \ (models.js:643:18)\r\n    at Function.forward (models.js:929:27)\r\n    at Function._call\
    \ (models.js:918:27)\r\n    at Function.closure [as model] (core.js:77:28)\r\n\
    \    at Function._call (pipelines.js:119:34)\r\n    at Function._call (pipelines.js:906:45)\r\
    \n    at closure (core.js:77:28)\r\n    at embed (worker.js:44:22)\r\n```"
  created_at: 2023-11-18 18:09:17+00:00
  edited: false
  hidden: false
  id: 6558fdcdc6923107399f87ff
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b253b7ac5ecaae3d1efe0c/hwiQ0uvz3t-L5a-NtBIO6.png?w=200&h=200&f=face
      fullname: Joshua
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Xenova
      type: user
    createdAt: '2023-11-18T22:43:14.000Z'
    data:
      edited: false
      editors:
      - Xenova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9400132298469543
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b253b7ac5ecaae3d1efe0c/hwiQ0uvz3t-L5a-NtBIO6.png?w=200&h=200&f=face
          fullname: Joshua
          isHf: true
          isPro: false
          name: Xenova
          type: user
        html: "<p>Hi there \U0001F44B This is a known problem with the model, due\
          \ to the fact that the model author decided to mix the type of tokenizer\
          \ and the model. See here for a workaround: <a rel=\"nofollow\" href=\"\
          https://github.com/xenova/transformers.js/issues/324\">https://github.com/xenova/transformers.js/issues/324</a></p>\n"
        raw: "Hi there \U0001F44B This is a known problem with the model, due to the\
          \ fact that the model author decided to mix the type of tokenizer and the\
          \ model. See here for a workaround: https://github.com/xenova/transformers.js/issues/324"
        updatedAt: '2023-11-18T22:43:14.691Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - do-me
    id: 65593e02ab0644b531752b1f
    type: comment
  author: Xenova
  content: "Hi there \U0001F44B This is a known problem with the model, due to the\
    \ fact that the model author decided to mix the type of tokenizer and the model.\
    \ See here for a workaround: https://github.com/xenova/transformers.js/issues/324"
  created_at: 2023-11-18 22:43:14+00:00
  edited: false
  hidden: false
  id: 65593e02ab0644b531752b1f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-18T22:49:13.000Z'
    data:
      edited: false
      editors:
      - do-me
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9451873302459717
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
          fullname: "Dominik Weckm\xFCller"
          isHf: false
          isPro: false
          name: do-me
          type: user
        html: '<p>Thanks a lot for linking the issue! Maybe it''d be worth mentioning
          it in the model card too? </p>

          '
        raw: 'Thanks a lot for linking the issue! Maybe it''d be worth mentioning
          it in the model card too? '
        updatedAt: '2023-11-18T22:49:13.708Z'
      numEdits: 0
      reactions: []
    id: 65593f69c692310739a93c1f
    type: comment
  author: do-me
  content: 'Thanks a lot for linking the issue! Maybe it''d be worth mentioning it
    in the model card too? '
  created_at: 2023-11-18 22:49:13+00:00
  edited: false
  hidden: false
  id: 65593f69c692310739a93c1f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b253b7ac5ecaae3d1efe0c/hwiQ0uvz3t-L5a-NtBIO6.png?w=200&h=200&f=face
      fullname: Joshua
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Xenova
      type: user
    createdAt: '2023-11-19T05:26:04.000Z'
    data:
      edited: false
      editors:
      - Xenova
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8249067664146423
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b253b7ac5ecaae3d1efe0c/hwiQ0uvz3t-L5a-NtBIO6.png?w=200&h=200&f=face
          fullname: Joshua
          isHf: true
          isPro: false
          name: Xenova
          type: user
        html: '<p>To avoid issues like this in future, it is probably best to just
          account for this in the library. It should be as simple as adding a line
          like <a rel="nofollow" href="https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L357-L359">this</a>
          to <a rel="nofollow" href="https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L490-L496">here</a>,
          to add default input token ids if they are not present. Would you by any
          chance be interested in making a PR for this?</p>

          '
        raw: To avoid issues like this in future, it is probably best to just account
          for this in the library. It should be as simple as adding a line like [this](https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L357-L359)
          to [here](https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L490-L496),
          to add default input token ids if they are not present. Would you by any
          chance be interested in making a PR for this?
        updatedAt: '2023-11-19T05:26:04.265Z'
      numEdits: 0
      reactions: []
    id: 65599c6cda4acab10a7aab6a
    type: comment
  author: Xenova
  content: To avoid issues like this in future, it is probably best to just account
    for this in the library. It should be as simple as adding a line like [this](https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L357-L359)
    to [here](https://github.com/xenova/transformers.js/blob/19daf2d3c135b046440a944765d2b631dc294f42/src/models.js#L490-L496),
    to add default input token ids if they are not present. Would you by any chance
    be interested in making a PR for this?
  created_at: 2023-11-19 05:26:04+00:00
  edited: false
  hidden: false
  id: 65599c6cda4acab10a7aab6a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-19T07:41:37.000Z'
    data:
      edited: false
      editors:
      - do-me
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8200900554656982
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
          fullname: "Dominik Weckm\xFCller"
          isHf: false
          isPro: false
          name: do-me
          type: user
        html: '<p>Sure, great idea. Will do so today!</p>

          '
        raw: Sure, great idea. Will do so today!
        updatedAt: '2023-11-19T07:41:37.749Z'
      numEdits: 0
      reactions: []
    id: 6559bc31ab0644b53186cec7
    type: comment
  author: do-me
  content: Sure, great idea. Will do so today!
  created_at: 2023-11-19 07:41:37+00:00
  edited: false
  hidden: false
  id: 6559bc31ab0644b53186cec7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-19T10:34:53.000Z'
    data:
      edited: false
      editors:
      - do-me
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.65921550989151
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
          fullname: "Dominik Weckm\xFCller"
          isHf: false
          isPro: false
          name: do-me
          type: user
        html: '<p>Fixed it <a rel="nofollow" href="https://github.com/xenova/transformers.js/pull/242/files#diff-a19725de73a858e12dc293aef7c29e8d9d107497643f2c65175ab0064d804665">here</a>,
          tested and works now.</p>

          '
        raw: Fixed it [here](https://github.com/xenova/transformers.js/pull/242/files#diff-a19725de73a858e12dc293aef7c29e8d9d107497643f2c65175ab0064d804665),
          tested and works now.
        updatedAt: '2023-11-19T10:34:53.995Z'
      numEdits: 0
      reactions: []
    id: 6559e4cdc619b485315fef11
    type: comment
  author: do-me
  content: Fixed it [here](https://github.com/xenova/transformers.js/pull/242/files#diff-a19725de73a858e12dc293aef7c29e8d9d107497643f2c65175ab0064d804665),
    tested and works now.
  created_at: 2023-11-19 10:34:53+00:00
  edited: false
  hidden: false
  id: 6559e4cdc619b485315fef11
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-20T07:15:52.000Z'
    data:
      edited: false
      editors:
      - do-me
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.839209794998169
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
          fullname: "Dominik Weckm\xFCller"
          isHf: false
          isPro: false
          name: do-me
          type: user
        html: '<p>The fix is merged in transformers.js, see <a rel="nofollow" href="https://github.com/xenova/transformers.js/pull/403#event-11004783800">https://github.com/xenova/transformers.js/pull/403#event-11004783800</a>.<br>It
          should work flawlessly now.</p>

          '
        raw: "The fix is merged in transformers.js, see https://github.com/xenova/transformers.js/pull/403#event-11004783800.\
          \ \nIt should work flawlessly now."
        updatedAt: '2023-11-20T07:15:52.553Z'
      numEdits: 0
      reactions: []
      relatedEventId: 655b07a86a7098bc6e69b6bf
    id: 655b07a86a7098bc6e69b6b9
    type: comment
  author: do-me
  content: "The fix is merged in transformers.js, see https://github.com/xenova/transformers.js/pull/403#event-11004783800.\
    \ \nIt should work flawlessly now."
  created_at: 2023-11-20 07:15:52+00:00
  edited: false
  hidden: false
  id: 655b07a86a7098bc6e69b6b9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/IiercF_qxHWize2kitl9X.jpeg?w=200&h=200&f=face
      fullname: "Dominik Weckm\xFCller"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: do-me
      type: user
    createdAt: '2023-11-20T07:15:52.000Z'
    data:
      status: closed
    id: 655b07a86a7098bc6e69b6bf
    type: status-change
  author: do-me
  created_at: 2023-11-20 07:15:52+00:00
  id: 655b07a86a7098bc6e69b6bf
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Xenova/multilingual-e5-small
repo_type: model
status: closed
target_branch: null
title: 'Missing the following inputs: token_type_ids.'
