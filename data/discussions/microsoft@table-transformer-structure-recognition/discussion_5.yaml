!!python/object:huggingface_hub.community.DiscussionWithDetails
author: guidel
conflicting_files: null
created_at: 2023-10-16 11:53:35+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4c181c29119be8c6dcc5b33dec216b49.svg
      fullname: Guillaume
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: guidel
      type: user
    createdAt: '2023-10-16T12:53:35.000Z'
    data:
      edited: true
      editors:
      - guidel
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8404538035392761
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4c181c29119be8c6dcc5b33dec216b49.svg
          fullname: Guillaume
          isHf: false
          isPro: false
          name: guidel
          type: user
        html: "<p>Hello,</p>\n<p>I have downloaded all the files locally and am trying\
          \ to load the model with </p>\n<pre><code>from transformers import TableTransformerForObjectDetection\n\
          model = TableTransformerForObjectDetection.from_pretrained(\n    'path/to/microsoft/table-transformer-structure-recognition',\n\
          \    local_files_only = True)\n</code></pre>\n<p>But it still tries to call\
          \ the huggingface_hub for some reason. Since I don't have an internet access,\
          \ that throws an error. How can I simply load this model without internet\
          \ access?</p>\n"
        raw: "Hello,\n\nI have downloaded all the files locally and am trying to load\
          \ the model with \n```\nfrom transformers import TableTransformerForObjectDetection\n\
          model = TableTransformerForObjectDetection.from_pretrained(\n    'path/to/microsoft/table-transformer-structure-recognition',\n\
          \    local_files_only = True)\n```\nBut it still tries to call the huggingface_hub\
          \ for some reason. Since I don't have an internet access, that throws an\
          \ error. How can I simply load this model without internet access?"
        updatedAt: '2023-10-16T12:55:35.357Z'
      numEdits: 1
      reactions: []
    id: 652d324f58c30b12887fe47e
    type: comment
  author: guidel
  content: "Hello,\n\nI have downloaded all the files locally and am trying to load\
    \ the model with \n```\nfrom transformers import TableTransformerForObjectDetection\n\
    model = TableTransformerForObjectDetection.from_pretrained(\n    'path/to/microsoft/table-transformer-structure-recognition',\n\
    \    local_files_only = True)\n```\nBut it still tries to call the huggingface_hub\
    \ for some reason. Since I don't have an internet access, that throws an error.\
    \ How can I simply load this model without internet access?"
  created_at: 2023-10-16 11:53:35+00:00
  edited: true
  hidden: false
  id: 652d324f58c30b12887fe47e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-10-16T18:22:08.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.950972855091095
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: '<p>Hmmm, it shouldn''t! Would you mind sharing the error you''re getting?</p>

          '
        raw: Hmmm, it shouldn't! Would you mind sharing the error you're getting?
        updatedAt: '2023-10-16T18:22:08.338Z'
      numEdits: 0
      reactions: []
    id: 652d7f50619fc62beef9d459
    type: comment
  author: lysandre
  content: Hmmm, it shouldn't! Would you mind sharing the error you're getting?
  created_at: 2023-10-16 17:22:08+00:00
  edited: false
  hidden: false
  id: 652d7f50619fc62beef9d459
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4c181c29119be8c6dcc5b33dec216b49.svg
      fullname: Guillaume
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: guidel
      type: user
    createdAt: '2023-10-17T09:35:38.000Z'
    data:
      edited: true
      editors:
      - guidel
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9335005283355713
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4c181c29119be8c6dcc5b33dec216b49.svg
          fullname: Guillaume
          isHf: false
          isPro: false
          name: guidel
          type: user
        html: '<p>Hi,<br>Sorry I can''t paste the error here.<br>I believe the error
          arises from a model that is not available offline. Correct me if I''m wrong
          but it seems like it is requiring to use <a href="https://huggingface.co/timm/resnet18.a1_in1k/tree/main">https://huggingface.co/timm/resnet18.a1_in1k/tree/main</a>
          as backbone (according to config.json). I have downloaded that model and
          put it offline, but I''m not sure how I can link it to the <code>TableTransformerForObjectDetection.from_pretrained()</code></p>

          '
        raw: "Hi,\nSorry I can't paste the error here. \nI believe the error arises\
          \ from a model that is not available offline. Correct me if I'm wrong but\
          \ it seems like it is requiring to use https://huggingface.co/timm/resnet18.a1_in1k/tree/main\
          \ as backbone (according to config.json). I have downloaded that model and\
          \ put it offline, but I'm not sure how I can link it to the `TableTransformerForObjectDetection.from_pretrained()`"
        updatedAt: '2023-10-17T09:36:15.939Z'
      numEdits: 1
      reactions: []
    id: 652e556a45fccd4e9b2e6d6c
    type: comment
  author: guidel
  content: "Hi,\nSorry I can't paste the error here. \nI believe the error arises\
    \ from a model that is not available offline. Correct me if I'm wrong but it seems\
    \ like it is requiring to use https://huggingface.co/timm/resnet18.a1_in1k/tree/main\
    \ as backbone (according to config.json). I have downloaded that model and put\
    \ it offline, but I'm not sure how I can link it to the `TableTransformerForObjectDetection.from_pretrained()`"
  created_at: 2023-10-17 08:35:38+00:00
  edited: true
  hidden: false
  id: 652e556a45fccd4e9b2e6d6c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-10-18T11:25:15.000Z'
    data:
      edited: true
      editors:
      - nielsr
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6764665246009827
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;guidel&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/guidel\">@<span class=\"\
          underline\">guidel</span></a></span>\n\n\t</span></span>,</p>\n<p>You can\
          \ obtain this by doing:</p>\n<pre><code>from transformers import TableTransformerForObjectDetection\n\
          \nmodel =  TableTransformerForObjectDetection.from_pretrained(\"microsoft/table-transformer-structure-recognition\"\
          , use_pretrained_backbone=False)\n</code></pre>\n<p>next, you can save the\
          \ model locally:</p>\n<pre><code>model.save_pretrained(\"path_to_local_directory\"\
          )\n</code></pre>\n<p>This will allow you to load it again fully offline:</p>\n\
          <pre><code>from transformers import TableTransformerForObjectDetection\n\
          \nmodel =  TableTransformerForObjectDetection.from_pretrained(\"path_to_local_directory\"\
          )\n</code></pre>\n<p>In addition, I've been working on converting the TableTransformer\
          \ checkpoints with a Transformers-based backbone instead of a timm one (using\
          \ the new AutoBackbone API). It can be instantiated as follows:</p>\n<pre><code>from\
          \ transformers import TableTransformerConfig, ResNetConfig, TableTransformerForObjectDetection\n\
          \nbackbone_config = ResNetConfig.from_pretrained(\"microsoft/resnet-18\"\
          , out_features[\"stage1\", \"stage2\", \"stage3\", \"stage4\"])\nconfig\
          \ = TableTransformerConfig(backbone_config=backbone_config, use_timm_backbone=False)\n\
          model =  TableTransformerForObjectDetection(config)\n</code></pre>\n<p>I'll\
          \ push the weights for it shortly to a \"no_timm\" branch of this repository,\
          \ which will allow you to do:</p>\n<pre><code>from transformers import TableTransformerForObjectDetection\n\
          \nmodel =  TableTransformerForObjectDetection(\"microsoft/table-transformer-structure-recognition\"\
          , revision=\"no_timm\")\n</code></pre>\n<p>This enables you to use the model\
          \ without requiring the timm library.</p>\n"
        raw: 'Hi @guidel,


          You can obtain this by doing:


          ```

          from transformers import TableTransformerForObjectDetection


          model =  TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition",
          use_pretrained_backbone=False)

          ```

          next, you can save the model locally:

          ```

          model.save_pretrained("path_to_local_directory")

          ```

          This will allow you to load it again fully offline:

          ```

          from transformers import TableTransformerForObjectDetection


          model =  TableTransformerForObjectDetection.from_pretrained("path_to_local_directory")

          ```


          In addition, I''ve been working on converting the TableTransformer checkpoints
          with a Transformers-based backbone instead of a timm one (using the new
          AutoBackbone API). It can be instantiated as follows:

          ```

          from transformers import TableTransformerConfig, ResNetConfig, TableTransformerForObjectDetection


          backbone_config = ResNetConfig.from_pretrained("microsoft/resnet-18", out_features["stage1",
          "stage2", "stage3", "stage4"])

          config = TableTransformerConfig(backbone_config=backbone_config, use_timm_backbone=False)

          model =  TableTransformerForObjectDetection(config)

          ```

          I''ll push the weights for it shortly to a "no_timm" branch of this repository,
          which will allow you to do:

          ```

          from transformers import TableTransformerForObjectDetection


          model =  TableTransformerForObjectDetection("microsoft/table-transformer-structure-recognition",
          revision="no_timm")

          ```

          This enables you to use the model without requiring the timm library.'
        updatedAt: '2023-10-18T11:39:55.168Z'
      numEdits: 4
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sevaksevak
    id: 652fc09b477041fda2944338
    type: comment
  author: nielsr
  content: 'Hi @guidel,


    You can obtain this by doing:


    ```

    from transformers import TableTransformerForObjectDetection


    model =  TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition",
    use_pretrained_backbone=False)

    ```

    next, you can save the model locally:

    ```

    model.save_pretrained("path_to_local_directory")

    ```

    This will allow you to load it again fully offline:

    ```

    from transformers import TableTransformerForObjectDetection


    model =  TableTransformerForObjectDetection.from_pretrained("path_to_local_directory")

    ```


    In addition, I''ve been working on converting the TableTransformer checkpoints
    with a Transformers-based backbone instead of a timm one (using the new AutoBackbone
    API). It can be instantiated as follows:

    ```

    from transformers import TableTransformerConfig, ResNetConfig, TableTransformerForObjectDetection


    backbone_config = ResNetConfig.from_pretrained("microsoft/resnet-18", out_features["stage1",
    "stage2", "stage3", "stage4"])

    config = TableTransformerConfig(backbone_config=backbone_config, use_timm_backbone=False)

    model =  TableTransformerForObjectDetection(config)

    ```

    I''ll push the weights for it shortly to a "no_timm" branch of this repository,
    which will allow you to do:

    ```

    from transformers import TableTransformerForObjectDetection


    model =  TableTransformerForObjectDetection("microsoft/table-transformer-structure-recognition",
    revision="no_timm")

    ```

    This enables you to use the model without requiring the timm library.'
  created_at: 2023-10-18 10:25:15+00:00
  edited: true
  hidden: false
  id: 652fc09b477041fda2944338
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5c8168b550e2a5e8859dc577e0f0d7f6.svg
      fullname: Piotr Grygoruk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BonDevil
      type: user
    createdAt: '2023-10-30T14:47:42.000Z'
    data:
      edited: false
      editors:
      - BonDevil
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9157355427742004
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5c8168b550e2a5e8859dc577e0f0d7f6.svg
          fullname: Piotr Grygoruk
          isHf: false
          isPro: false
          name: BonDevil
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;nielsr&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/nielsr\">@<span class=\"\
          underline\">nielsr</span></a></span>\n\n\t</span></span><br>could you please\
          \ push weights to branch no_timm, so it is possible to load model completly\
          \ offline?</p>\n"
        raw: "Hi @nielsr \ncould you please push weights to branch no_timm, so it\
          \ is possible to load model completly offline?"
        updatedAt: '2023-10-30T14:47:42.787Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - Adarsha77
        - BonDevil
    id: 653fc20e9edfe59bf82fd4d3
    type: comment
  author: BonDevil
  content: "Hi @nielsr \ncould you please push weights to branch no_timm, so it is\
    \ possible to load model completly offline?"
  created_at: 2023-10-30 13:47:42+00:00
  edited: false
  hidden: false
  id: 653fc20e9edfe59bf82fd4d3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-11-04T12:45:31.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6371992230415344
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;BonDevil&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/BonDevil\"\
          >@<span class=\"underline\">BonDevil</span></a></span>\n\n\t</span></span>,\
          \ </p>\n<p>just pushed the weights, you can now use <code>from_pretrained(\"\
          microsoft/table-transformer-structure-recognition\", revision=\"no_timm\"\
          )</code> :)</p>\n"
        raw: "Hi @BonDevil, \n\njust pushed the weights, you can now use `from_pretrained(\"\
          microsoft/table-transformer-structure-recognition\", revision=\"no_timm\"\
          )` :)"
        updatedAt: '2023-11-04T12:45:31.999Z'
      numEdits: 0
      reactions: []
    id: 65463cebcd0a5621390d6382
    type: comment
  author: nielsr
  content: "Hi @BonDevil, \n\njust pushed the weights, you can now use `from_pretrained(\"\
    microsoft/table-transformer-structure-recognition\", revision=\"no_timm\")` :)"
  created_at: 2023-11-04 11:45:31+00:00
  edited: false
  hidden: false
  id: 65463cebcd0a5621390d6382
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/452b03ce8356c8fa51d263f179c7c727.svg
      fullname: Jeirwen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Wenrui3
      type: user
    createdAt: '2024-01-02T03:59:40.000Z'
    data:
      edited: false
      editors:
      - Wenrui3
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8138012290000916
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/452b03ce8356c8fa51d263f179c7c727.svg
          fullname: Jeirwen
          isHf: false
          isPro: false
          name: Wenrui3
          type: user
        html: "<p>I have downloaded all the files in a folder, but<br>when I try \"\
          model =  TableTransformerForObjectDetection.from_pretrained(path_to_the_folder\
          \ )\"\uFF0C<br>the error is \"raise LocalEntryNotFoundError(<br>huggingface_hub.utils._errors.LocalEntryNotFoundError:\
          \ An error happened while trying to locate the file on the Hub and we cannot\
          \ find the requested files in the local cache. Please check your connection\
          \ and try again or make sure your Internet connection is on.\"<br>when I\
          \ try \"model =  TableTransformerForObjectDetection.from_pretrained(path,\
          \ use_pretrained_backbone=False)\",<br>though it doesn't raise a error,\
          \  I can't get the params this way.<br>Could you please tell me how to load\
          \ model offline?</p>\n"
        raw: "I have downloaded all the files in a folder, but\nwhen I try \"model\
          \ =  TableTransformerForObjectDetection.from_pretrained(path_to_the_folder\
          \ )\"\uFF0C\nthe error is \"raise LocalEntryNotFoundError(\nhuggingface_hub.utils._errors.LocalEntryNotFoundError:\
          \ An error happened while trying to locate the file on the Hub and we cannot\
          \ find the requested files in the local cache. Please check your connection\
          \ and try again or make sure your Internet connection is on.\"\nwhen I try\
          \ \"model =  TableTransformerForObjectDetection.from_pretrained(path, use_pretrained_backbone=False)\"\
          ,\nthough it doesn't raise a error,  I can't get the params this way.\n\
          Could you please tell me how to load model offline?"
        updatedAt: '2024-01-02T03:59:40.675Z'
      numEdits: 0
      reactions: []
    id: 65938a2cdfca9fad61c586be
    type: comment
  author: Wenrui3
  content: "I have downloaded all the files in a folder, but\nwhen I try \"model =\
    \  TableTransformerForObjectDetection.from_pretrained(path_to_the_folder )\"\uFF0C\
    \nthe error is \"raise LocalEntryNotFoundError(\nhuggingface_hub.utils._errors.LocalEntryNotFoundError:\
    \ An error happened while trying to locate the file on the Hub and we cannot find\
    \ the requested files in the local cache. Please check your connection and try\
    \ again or make sure your Internet connection is on.\"\nwhen I try \"model = \
    \ TableTransformerForObjectDetection.from_pretrained(path, use_pretrained_backbone=False)\"\
    ,\nthough it doesn't raise a error,  I can't get the params this way.\nCould you\
    \ please tell me how to load model offline?"
  created_at: 2024-01-02 03:59:40+00:00
  edited: false
  hidden: false
  id: 65938a2cdfca9fad61c586be
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2024-01-02T15:43:58.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7582563161849976
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: '<p>Hi,</p>

          <p>I tried this out by first loading the weights from the web, and saving
          them locally:</p>

          <pre><code>from transformers import TableTransformerForObjectDetection


          model = TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition",
          revision="no_timm")

          model.save_pretrained(".")

          </code></pre>

          <p>Next I turned off my wifi and checked whether the following worked:</p>

          <pre><code>from transformers import TableTransformerForObjectDetection


          model = TableTransformerForObjectDetection.from_pretrained(".")

          </code></pre>

          <p>and it works for me without issues. There''s no need to pass <code>use_pretrained_backbone=False</code>
          when you pass the <code>no_timm</code> revision.</p>

          '
        raw: 'Hi,


          I tried this out by first loading the weights from the web, and saving them
          locally:


          ```

          from transformers import TableTransformerForObjectDetection


          model = TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition",
          revision="no_timm")

          model.save_pretrained(".")

          ```

          Next I turned off my wifi and checked whether the following worked:

          ```

          from transformers import TableTransformerForObjectDetection


          model = TableTransformerForObjectDetection.from_pretrained(".")

          ```

          and it works for me without issues. There''s no need to pass `use_pretrained_backbone=False`
          when you pass the `no_timm` revision.'
        updatedAt: '2024-01-02T15:43:58.234Z'
      numEdits: 0
      reactions: []
    id: 65942f3ee7c71d6d9ea7c3db
    type: comment
  author: nielsr
  content: 'Hi,


    I tried this out by first loading the weights from the web, and saving them locally:


    ```

    from transformers import TableTransformerForObjectDetection


    model = TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition",
    revision="no_timm")

    model.save_pretrained(".")

    ```

    Next I turned off my wifi and checked whether the following worked:

    ```

    from transformers import TableTransformerForObjectDetection


    model = TableTransformerForObjectDetection.from_pretrained(".")

    ```

    and it works for me without issues. There''s no need to pass `use_pretrained_backbone=False`
    when you pass the `no_timm` revision.'
  created_at: 2024-01-02 15:43:58+00:00
  edited: false
  hidden: false
  id: 65942f3ee7c71d6d9ea7c3db
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: microsoft/table-transformer-structure-recognition
repo_type: model
status: open
target_branch: null
title: unable to load model offline
