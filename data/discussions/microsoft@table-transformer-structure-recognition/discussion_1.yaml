!!python/object:huggingface_hub.community.DiscussionWithDetails
author: anantsaxena
conflicting_files: null
created_at: 2022-11-14 07:30:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2ffd63aee7bdd5a6249a622424d31638.svg
      fullname: Anant Saxena
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: anantsaxena
      type: user
    createdAt: '2022-11-14T07:30:57.000Z'
    data:
      edited: false
      editors:
      - anantsaxena
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2ffd63aee7bdd5a6249a622424d31638.svg
          fullname: Anant Saxena
          isHf: false
          isPro: false
          name: anantsaxena
          type: user
        html: '<p>I want to train this model with custom data for the tables structures
          I have. The accuracy of default model is not at par. Any repo to get help
          on this. </p>

          '
        raw: 'I want to train this model with custom data for the tables structures
          I have. The accuracy of default model is not at par. Any repo to get help
          on this. '
        updatedAt: '2022-11-14T07:30:57.896Z'
      numEdits: 0
      reactions: []
    id: 6371eeb143d75395e93e7d5d
    type: comment
  author: anantsaxena
  content: 'I want to train this model with custom data for the tables structures
    I have. The accuracy of default model is not at par. Any repo to get help on this. '
  created_at: 2022-11-14 07:30:57+00:00
  edited: false
  hidden: false
  id: 6371eeb143d75395e93e7d5d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2022-11-15T11:32:25.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: '<p>Hi,</p>

          <p>Refer to this notebook (be sure to replace the model and processor):
          <a rel="nofollow" href="https://github.com/NielsRogge/Transformers-Tutorials/blob/master/DETR/Fine_tuning_DetrForObjectDetection_on_custom_dataset_(balloon).ipynb">https://github.com/NielsRogge/Transformers-Tutorials/blob/master/DETR/Fine_tuning_DetrForObjectDetection_on_custom_dataset_(balloon).ipynb</a></p>

          '
        raw: 'Hi,


          Refer to this notebook (be sure to replace the model and processor): https://github.com/NielsRogge/Transformers-Tutorials/blob/master/DETR/Fine_tuning_DetrForObjectDetection_on_custom_dataset_(balloon).ipynb'
        updatedAt: '2022-11-15T11:32:25.174Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - anantsaxena
    id: 637378c93e75422985b6a626
    type: comment
  author: nielsr
  content: 'Hi,


    Refer to this notebook (be sure to replace the model and processor): https://github.com/NielsRogge/Transformers-Tutorials/blob/master/DETR/Fine_tuning_DetrForObjectDetection_on_custom_dataset_(balloon).ipynb'
  created_at: 2022-11-15 11:32:25+00:00
  edited: false
  hidden: false
  id: 637378c93e75422985b6a626
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9ac5f62ef96b1da7efecf2960416a1fb.svg
      fullname: Yash Sharma
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yasharma
      type: user
    createdAt: '2022-11-17T11:02:38.000Z'
    data:
      edited: false
      editors:
      - Yasharma
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9ac5f62ef96b1da7efecf2960416a1fb.svg
          fullname: Yash Sharma
          isHf: false
          isPro: false
          name: Yasharma
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;nielsr&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/nielsr\">@<span class=\"\
          underline\">nielsr</span></a></span>\n\n\t</span></span>,</p>\n<p>I am facing\
          \ an issue in downloading the data from Microsoft open dataset; Do you have\
          \ any suggestions on the custom table structure data annotation/tagging\
          \ or downloading the  Microsoft open dataset PubTables-1M?</p>\n<p>Reference:<a\
          \ rel=\"nofollow\" href=\"https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3\"\
          >https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3</a></p>\n\
          <p>Issue: Not able to log in to Microsoft open dataset.</p>\n"
        raw: 'Hi @nielsr,


          I am facing an issue in downloading the data from Microsoft open dataset;
          Do you have any suggestions on the custom table structure data annotation/tagging
          or downloading the  Microsoft open dataset PubTables-1M?


          Reference:https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3


          Issue: Not able to log in to Microsoft open dataset.'
        updatedAt: '2022-11-17T11:02:38.887Z'
      numEdits: 0
      reactions: []
    id: 637614ce58d74c7fcf498cab
    type: comment
  author: Yasharma
  content: 'Hi @nielsr,


    I am facing an issue in downloading the data from Microsoft open dataset; Do you
    have any suggestions on the custom table structure data annotation/tagging or
    downloading the  Microsoft open dataset PubTables-1M?


    Reference:https://msropendata.com/datasets/505fcbe3-1383-42b1-913a-f651b8b712d3


    Issue: Not able to log in to Microsoft open dataset.'
  created_at: 2022-11-17 11:02:38+00:00
  edited: false
  hidden: false
  id: 637614ce58d74c7fcf498cab
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4d0a2f8ed4e0c469c1b53abe0fefba70.svg
      fullname: Ankit Chouksey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ankitom
      type: user
    createdAt: '2023-04-13T14:00:34.000Z'
    data:
      edited: false
      editors:
      - ankitom
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4d0a2f8ed4e0c469c1b53abe0fefba70.svg
          fullname: Ankit Chouksey
          isHf: false
          isPro: false
          name: ankitom
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;nielsr&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/nielsr\">@<span class=\"\
          underline\">nielsr</span></a></span>\n\n\t</span></span> ,</p>\n<p>I have\
          \ fine tuned the microsoft table detector using custom data using your approach\
          \ and results are great , but when I tried to fine tune the microsoft table\
          \ structure recognition with four classes table, column, row and header,\
          \ results were very bad. Any suggestions how to fine tune the microsoft\
          \ structure recognition model ?</p>\n"
        raw: 'Hi @nielsr ,


          I have fine tuned the microsoft table detector using custom data using your
          approach and results are great , but when I tried to fine tune the microsoft
          table structure recognition with four classes table, column, row and header,
          results were very bad. Any suggestions how to fine tune the microsoft structure
          recognition model ?'
        updatedAt: '2023-04-13T14:00:34.825Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - qooob
    id: 64380b022d5f15c425c15fe3
    type: comment
  author: ankitom
  content: 'Hi @nielsr ,


    I have fine tuned the microsoft table detector using custom data using your approach
    and results are great , but when I tried to fine tune the microsoft table structure
    recognition with four classes table, column, row and header, results were very
    bad. Any suggestions how to fine tune the microsoft structure recognition model
    ?'
  created_at: 2023-04-13 13:00:34+00:00
  edited: false
  hidden: false
  id: 64380b022d5f15c425c15fe3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/68b3ea437bd6f8b9f9eaef52e2696f2c.svg
      fullname: Giuseppe Coco
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qooob
      type: user
    createdAt: '2023-06-01T18:00:14.000Z'
    data:
      edited: true
      editors:
      - qooob
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/68b3ea437bd6f8b9f9eaef52e2696f2c.svg
          fullname: Giuseppe Coco
          isHf: false
          isPro: false
          name: qooob
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;nielsr&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/nielsr\">@<span class=\"\
          underline\">nielsr</span></a></span>\n\n\t</span></span> just to add to\
          \ the above, I have a high quality dataset I used to try and fine-tune the\
          \ model but it just weakened the model, making it worse than with pre-trained\
          \ weights. I'm having a hard time figuring out if pretrained weights should\
          \ be taken from DetrForObjectDetection or TableTransformerForObjectDetection\
          \ when loading the pretrained model, what other params should be used, what\
          \ is the purpose of using no_timm in the original Detr object detection\
          \ fine-tuning example etc. I'm also not sure how to apply the difference\
          \ of Table Transformer normalizing before MLP instead of after during training.</p>\n\
          <p><em>This worked (no errors during training), but gave bad results</em><br><code>self.model\
          \ = TableTransformerForObjectDetection.from_pretrained(\"microsoft/table-transformer-structure-recognition\"\
          )</code><br><em>This gave errors during training and bad results</em><br><code>self.model\
          \ = DetrForObjectDetection.from_pretrained(\"microsoft/table-transformer-structure-recognition\"\
          )</code></p>\n"
        raw: '@nielsr just to add to the above, I have a high quality dataset I used
          to try and fine-tune the model but it just weakened the model, making it
          worse than with pre-trained weights. I''m having a hard time figuring out
          if pretrained weights should be taken from DetrForObjectDetection or TableTransformerForObjectDetection
          when loading the pretrained model, what other params should be used, what
          is the purpose of using no_timm in the original Detr object detection fine-tuning
          example etc. I''m also not sure how to apply the difference of Table Transformer
          normalizing before MLP instead of after during training.


          *This worked (no errors during training), but gave bad results*

          `self.model = TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition")`

          *This gave errors during training and bad results*

          `self.model = DetrForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition")`'
        updatedAt: '2023-06-01T18:00:38.992Z'
      numEdits: 1
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - karthikfds
        - rahulhuddar
    id: 6478dcaedbf97e0b5cc550f6
    type: comment
  author: qooob
  content: '@nielsr just to add to the above, I have a high quality dataset I used
    to try and fine-tune the model but it just weakened the model, making it worse
    than with pre-trained weights. I''m having a hard time figuring out if pretrained
    weights should be taken from DetrForObjectDetection or TableTransformerForObjectDetection
    when loading the pretrained model, what other params should be used, what is the
    purpose of using no_timm in the original Detr object detection fine-tuning example
    etc. I''m also not sure how to apply the difference of Table Transformer normalizing
    before MLP instead of after during training.


    *This worked (no errors during training), but gave bad results*

    `self.model = TableTransformerForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition")`

    *This gave errors during training and bad results*

    `self.model = DetrForObjectDetection.from_pretrained("microsoft/table-transformer-structure-recognition")`'
  created_at: 2023-06-01 17:00:14+00:00
  edited: true
  hidden: false
  id: 6478dcaedbf97e0b5cc550f6
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: microsoft/table-transformer-structure-recognition
repo_type: model
status: open
target_branch: null
title: Training model with Custom Data
