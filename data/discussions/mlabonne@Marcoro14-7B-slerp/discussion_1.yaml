!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ehartford
conflicting_files: null
created_at: 2024-01-16 04:56:04+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2024-01-16T04:56:04.000Z'
    data:
      edited: false
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6671455502510071
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p>what''s the proper chat template plrease</p>

          '
        raw: what's the proper chat template plrease
        updatedAt: '2024-01-16T04:56:04.527Z'
      numEdits: 0
      reactions: []
    id: 65a60c648fb86f6dd7aad6e0
    type: comment
  author: ehartford
  content: what's the proper chat template plrease
  created_at: 2024-01-16 04:56:04+00:00
  edited: false
  hidden: false
  id: 65a60c648fb86f6dd7aad6e0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
      fullname: Maxime Labonne
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: mlabonne
      type: user
    createdAt: '2024-01-16T08:55:42.000Z'
    data:
      edited: false
      editors:
      - mlabonne
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.34618860483169556
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
          fullname: Maxime Labonne
          isHf: false
          isPro: false
          name: mlabonne
          type: user
        html: '<p>Hi Eric, like NeuralMarcoro14 (<a href="https://huggingface.co/spaces/mlabonne/NeuralMarcoro14-7B-GGUF-Chat/blob/main/Dockerfile#L7">https://huggingface.co/spaces/mlabonne/NeuralMarcoro14-7B-GGUF-Chat/blob/main/Dockerfile#L7</a>),
          it should use the chatml template.</p>

          '
        raw: Hi Eric, like NeuralMarcoro14 (https://huggingface.co/spaces/mlabonne/NeuralMarcoro14-7B-GGUF-Chat/blob/main/Dockerfile#L7),
          it should use the chatml template.
        updatedAt: '2024-01-16T08:55:42.004Z'
      numEdits: 0
      reactions: []
    id: 65a6448ec128478d7536d830
    type: comment
  author: mlabonne
  content: Hi Eric, like NeuralMarcoro14 (https://huggingface.co/spaces/mlabonne/NeuralMarcoro14-7B-GGUF-Chat/blob/main/Dockerfile#L7),
    it should use the chatml template.
  created_at: 2024-01-16 08:55:42+00:00
  edited: false
  hidden: false
  id: 65a6448ec128478d7536d830
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2024-01-16T19:31:30.000Z'
    data:
      edited: true
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9839193224906921
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p>However, the ChatML tokens are not added (ie <code>&lt;/s&gt;</code>
          is the EOS token)</p>

          <p><a href="https://huggingface.co/mlabonne/Marcoro14-7B-slerp/blob/main/tokenizer_config.json">https://huggingface.co/mlabonne/Marcoro14-7B-slerp/blob/main/tokenizer_config.json</a></p>

          '
        raw: 'However, the ChatML tokens are not added (ie `</s>` is the EOS token)


          https://huggingface.co/mlabonne/Marcoro14-7B-slerp/blob/main/tokenizer_config.json


          '
        updatedAt: '2024-01-16T19:32:52.689Z'
      numEdits: 1
      reactions: []
    id: 65a6d992d6e5c1ed6c38d6de
    type: comment
  author: ehartford
  content: 'However, the ChatML tokens are not added (ie `</s>` is the EOS token)


    https://huggingface.co/mlabonne/Marcoro14-7B-slerp/blob/main/tokenizer_config.json


    '
  created_at: 2024-01-16 19:31:30+00:00
  edited: true
  hidden: false
  id: 65a6d992d6e5c1ed6c38d6de
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2024-01-16T19:32:29.000Z'
    data:
      edited: false
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9188056588172913
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p>So, you trained it to expect / generate &lt;|im_start|&gt; and &lt;|im_end|&gt;
          but not as tokens?  </p>

          '
        raw: 'So, you trained it to expect / generate <|im_start|> and <|im_end|>
          but not as tokens?  '
        updatedAt: '2024-01-16T19:32:29.715Z'
      numEdits: 0
      reactions: []
    id: 65a6d9cde211a95509b1b9a3
    type: comment
  author: ehartford
  content: 'So, you trained it to expect / generate <|im_start|> and <|im_end|> but
    not as tokens?  '
  created_at: 2024-01-16 19:32:29+00:00
  edited: false
  hidden: false
  id: 65a6d9cde211a95509b1b9a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
      fullname: Maxime Labonne
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: mlabonne
      type: user
    createdAt: '2024-01-16T19:43:16.000Z'
    data:
      edited: false
      editors:
      - mlabonne
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8773826956748962
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
          fullname: Maxime Labonne
          isHf: false
          isPro: false
          name: mlabonne
          type: user
        html: '<p>Yes, I had a discussion on this topic about another model. For NeuralMarcoro14,
          I added the chatml template as "chat_template" (<a href="https://huggingface.co/mlabonne/NeuralMarcoro14-7B/blob/main/tokenizer_config.json#L44">https://huggingface.co/mlabonne/NeuralMarcoro14-7B/blob/main/tokenizer_config.json#L44</a>).
          This quick fix worked so I didn''t try to change the tokens.</p>

          <p>Do you think it''s better to modify the tokenizer config to have a proper
          chatml template or just stick with Llama''s chat template?</p>

          '
        raw: 'Yes, I had a discussion on this topic about another model. For NeuralMarcoro14,
          I added the chatml template as "chat_template" (https://huggingface.co/mlabonne/NeuralMarcoro14-7B/blob/main/tokenizer_config.json#L44).
          This quick fix worked so I didn''t try to change the tokens.


          Do you think it''s better to modify the tokenizer config to have a proper
          chatml template or just stick with Llama''s chat template?'
        updatedAt: '2024-01-16T19:43:16.154Z'
      numEdits: 0
      reactions: []
    id: 65a6dc543d3c839408ed4d46
    type: comment
  author: mlabonne
  content: 'Yes, I had a discussion on this topic about another model. For NeuralMarcoro14,
    I added the chatml template as "chat_template" (https://huggingface.co/mlabonne/NeuralMarcoro14-7B/blob/main/tokenizer_config.json#L44).
    This quick fix worked so I didn''t try to change the tokens.


    Do you think it''s better to modify the tokenizer config to have a proper chatml
    template or just stick with Llama''s chat template?'
  created_at: 2024-01-16 19:43:16+00:00
  edited: false
  hidden: false
  id: 65a6dc543d3c839408ed4d46
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
      fullname: Maxime Labonne
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: mlabonne
      type: user
    createdAt: '2024-01-16T19:44:39.000Z'
    data:
      edited: false
      editors:
      - mlabonne
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9685741066932678
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
          fullname: Maxime Labonne
          isHf: false
          isPro: false
          name: mlabonne
          type: user
        html: '<blockquote>

          <p>So, you trained it to expect / generate &lt;|im_start|&gt; and &lt;|im_end|&gt;
          but not as tokens?</p>

          </blockquote>

          <p>This one is untrained, but this is exactly what happened with the neural
          version during DPO (this is mildly infuriating).</p>

          '
        raw: '> So, you trained it to expect / generate <|im_start|> and <|im_end|>
          but not as tokens?


          This one is untrained, but this is exactly what happened with the neural
          version during DPO (this is mildly infuriating).'
        updatedAt: '2024-01-16T19:44:39.718Z'
      numEdits: 0
      reactions: []
    id: 65a6dca7cc67787a8de498ce
    type: comment
  author: mlabonne
  content: '> So, you trained it to expect / generate <|im_start|> and <|im_end|>
    but not as tokens?


    This one is untrained, but this is exactly what happened with the neural version
    during DPO (this is mildly infuriating).'
  created_at: 2024-01-16 19:44:39+00:00
  edited: false
  hidden: false
  id: 65a6dca7cc67787a8de498ce
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: mlabonne/Marcoro14-7B-slerp
repo_type: model
status: open
target_branch: null
title: chat template
