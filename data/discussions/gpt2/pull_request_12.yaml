!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Narsil
conflicting_files: []
created_at: 2022-10-19 09:10:11+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
      fullname: Nicolas Patry
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Narsil
      type: user
    createdAt: '2022-10-19T10:10:11.000Z'
    data:
      edited: false
      editors:
      - Narsil
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
          fullname: Nicolas Patry
          isHf: true
          isPro: false
          name: Narsil
          type: user
        html: ''
        raw: ''
        updatedAt: '2022-10-19T10:10:11.044Z'
      numEdits: 0
      reactions: []
    id: 634fcd03eaf46b3c3d873b17
    type: comment
  author: Narsil
  content: ''
  created_at: 2022-10-19 09:10:11+00:00
  edited: false
  hidden: false
  id: 634fcd03eaf46b3c3d873b17
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
      fullname: Nicolas Patry
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Narsil
      type: user
    createdAt: '2022-10-19T10:10:12.000Z'
    data:
      oid: ba2f794b2e4ea09ef932a6628fa0815dfaf09661
      parents:
      - 909a290700bd99135e67c64eefc166960b67cfd2
      subject: Upload model.safetensors with huggingface_hub
    id: 634fcd040000000000000000
    type: commit
  author: Narsil
  created_at: 2022-10-19 09:10:12+00:00
  id: 634fcd040000000000000000
  oid: ba2f794b2e4ea09ef932a6628fa0815dfaf09661
  summary: Upload model.safetensors with huggingface_hub
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
      fullname: Nicolas Patry
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Narsil
      type: user
    createdAt: '2022-10-19T10:15:12.000Z'
    data:
      edited: false
      editors:
      - Narsil
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
          fullname: Nicolas Patry
          isHf: true
          isPro: false
          name: Narsil
          type: user
        html: "<p>This is a small version of the weights.</p>\n<p>The current safetensor\
          \ model duplicates the embeddings instead of simply using <code>tie_weights</code>.</p>\n\
          <p><span data-props=\"{&quot;user&quot;:&quot;julien-c&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/julien-c\">@<span class=\"\
          underline\">julien-c</span></a></span>\n\n\t</span></span><br><span data-props=\"\
          {&quot;user&quot;:&quot;sgugger&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/sgugger\">@<span class=\"underline\">sgugger</span></a></span>\n\
          \n\t</span></span></p>\n"
        raw: "This is a small version of the weights.\n\nThe current safetensor model\
          \ duplicates the embeddings instead of simply using `tie_weights`.\n\n@julien-c\
          \ \n@sgugger"
        updatedAt: '2022-10-19T10:15:12.272Z'
      numEdits: 0
      reactions: []
    id: 634fce3017a6475e8bfc5860
    type: comment
  author: Narsil
  content: "This is a small version of the weights.\n\nThe current safetensor model\
    \ duplicates the embeddings instead of simply using `tie_weights`.\n\n@julien-c\
    \ \n@sgugger"
  created_at: 2022-10-19 09:15:12+00:00
  edited: false
  hidden: false
  id: 634fce3017a6475e8bfc5860
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5dd96eb166059660ed1ee413/NQtzmrDdbG0H8qkZvRyGk.jpeg?w=200&h=200&f=face
      fullname: Julien Chaumond
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: julien-c
      type: user
    createdAt: '2022-10-19T10:17:31.000Z'
    data:
      edited: false
      editors:
      - julien-c
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5dd96eb166059660ed1ee413/NQtzmrDdbG0H8qkZvRyGk.jpeg?w=200&h=200&f=face
          fullname: Julien Chaumond
          isHf: true
          isPro: true
          name: julien-c
          type: user
        html: '<p>so to make sure i understand! This new conversion removes the duplicated
          embeddings?</p>

          '
        raw: so to make sure i understand! This new conversion removes the duplicated
          embeddings?
        updatedAt: '2022-10-19T10:17:31.764Z'
      numEdits: 0
      reactions: []
    id: 634fcebbf32062e9eb79f978
    type: comment
  author: julien-c
  content: so to make sure i understand! This new conversion removes the duplicated
    embeddings?
  created_at: 2022-10-19 09:17:31+00:00
  edited: false
  hidden: false
  id: 634fcebbf32062e9eb79f978
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
      fullname: Nicolas Patry
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Narsil
      type: user
    createdAt: '2022-10-19T11:16:15.000Z'
    data:
      edited: false
      editors:
      - Narsil
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
          fullname: Nicolas Patry
          isHf: true
          isPro: false
          name: Narsil
          type: user
        html: '<p>Yes !</p>

          <p>It works by just copying the PT weights. (Instead of using <code>AutoModelForCausalLM.from_pretrained("gpt2");
          model.save_pretrained(..)</code> which I think it what you might have used.<br><code>save_pretrained</code>
          with the head, saves the weights with an extra <code>transformer.</code>
          layer, and saves the head too.</p>

          '
        raw: 'Yes !


          It works by just copying the PT weights. (Instead of using `AutoModelForCausalLM.from_pretrained("gpt2");
          model.save_pretrained(..)` which I think it what you might have used.

          `save_pretrained` with the head, saves the weights with an extra `transformer.`
          layer, and saves the head too.'
        updatedAt: '2022-10-19T11:16:15.605Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - julien-c
    id: 634fdc7fc5acdbefb8e96aba
    type: comment
  author: Narsil
  content: 'Yes !


    It works by just copying the PT weights. (Instead of using `AutoModelForCausalLM.from_pretrained("gpt2");
    model.save_pretrained(..)` which I think it what you might have used.

    `save_pretrained` with the head, saves the weights with an extra `transformer.`
    layer, and saves the head too.'
  created_at: 2022-10-19 10:16:15+00:00
  edited: false
  hidden: false
  id: 634fdc7fc5acdbefb8e96aba
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5dd96eb166059660ed1ee413/NQtzmrDdbG0H8qkZvRyGk.jpeg?w=200&h=200&f=face
      fullname: Julien Chaumond
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: julien-c
      type: user
    createdAt: '2022-10-20T09:34:54.000Z'
    data:
      edited: false
      editors:
      - julien-c
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5dd96eb166059660ed1ee413/NQtzmrDdbG0H8qkZvRyGk.jpeg?w=200&h=200&f=face
          fullname: Julien Chaumond
          isHf: true
          isPro: true
          name: julien-c
          type: user
        html: '<p>makes sense, thanks! merging</p>

          '
        raw: makes sense, thanks! merging
        updatedAt: '2022-10-20T09:34:54.359Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6351163ef74cdcca6f790008
    id: 6351163ef74cdcca6f790007
    type: comment
  author: julien-c
  content: makes sense, thanks! merging
  created_at: 2022-10-20 08:34:54+00:00
  edited: false
  hidden: false
  id: 6351163ef74cdcca6f790007
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5dd96eb166059660ed1ee413/NQtzmrDdbG0H8qkZvRyGk.jpeg?w=200&h=200&f=face
      fullname: Julien Chaumond
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: true
      name: julien-c
      type: user
    createdAt: '2022-10-20T09:34:54.000Z'
    data:
      status: merged
    id: 6351163ef74cdcca6f790008
    type: status-change
  author: julien-c
  created_at: 2022-10-20 08:34:54+00:00
  id: 6351163ef74cdcca6f790008
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: 75e09b43581151bd1d9ef6700faa605df408979f
num: 12
repo_id: gpt2
repo_type: model
status: merged
target_branch: refs/heads/main
title: Upload model.safetensors with huggingface_hub
