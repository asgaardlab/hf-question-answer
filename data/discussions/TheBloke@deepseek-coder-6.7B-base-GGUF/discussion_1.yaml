!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mljxy
conflicting_files: null
created_at: 2023-12-01 05:41:50+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4e3b34f0605e6e2c9b5c5beb1a9c192f.svg
      fullname: Xiao Jin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mljxy
      type: user
    createdAt: '2023-12-01T05:41:50.000Z'
    data:
      edited: false
      editors:
      - mljxy
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.608742892742157
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4e3b34f0605e6e2c9b5c5beb1a9c192f.svg
          fullname: Xiao Jin
          isHf: false
          isPro: false
          name: mljxy
          type: user
        html: "<p>I can't seem to get infill to work. The prompt is from the infill\
          \ example in the original readme.</p>\n<pre><code>./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
          \ --verbose-prompt -p '&lt;\uFF5Cfim\u2581begin\uFF5C&gt;def quick_sort(arr):\
          \        \n    if len(arr) &lt;= 1:\n        return arr\n    pivot = arr[0]\n\
          \    left = []\n    right = []\n&lt;\uFF5Cfim\u2581hole\uFF5C&gt;\n    \
          \    if arr[i] &lt; pivot:\n            left.append(arr[i])\n        else:\n\
          \            right.append(arr[i])\n    return quick_sort(left) + [pivot]\
          \ + quick_sort(right)&lt;\uFF5Cfim\u2581end\uFF5C&gt;'\n</code></pre>\n\
          <p>this gives</p>\n<pre><code>[omitted]\nsystem_info: n_threads = 4 / 8\
          \ | AVX = 0 | AVX2 = 0 | AVX512 = 0 | AVX512_VBMI = 0 | AVX512_VNNI = 0\
          \ | FMA = 0 | NEON = 1 | ARM_FMA = 1 | F16C = 0 | FP16_VA = 1 | WASM_SIMD\
          \ = 0 | BLAS = 1 | SSE3 = 0 | SSSE3 = 0 | VSX = 0 | \nlibc++abi: terminating\
          \ due to uncaught exception of type std::out_of_range: unordered_map::at:\
          \ key not found\n[1]    4796 abort      ./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
          \ --verbose-prompt -p \n</code></pre>\n<p>without the verbose prompt, so\
          \ I guess something's wrong during tokenization. It works without these\
          \ three fim_begin/hole/end tokens.</p>\n"
        raw: "I can't seem to get infill to work. The prompt is from the infill example\
          \ in the original readme.\r\n\r\n```\r\n./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
          \ --verbose-prompt -p '<\uFF5Cfim\u2581begin\uFF5C>def quick_sort(arr):\
          \        \r\n    if len(arr) <= 1:\r\n        return arr\r\n    pivot =\
          \ arr[0]\r\n    left = []\r\n    right = []\r\n<\uFF5Cfim\u2581hole\uFF5C\
          >\r\n        if arr[i] < pivot:\r\n            left.append(arr[i])\r\n \
          \       else:\r\n            right.append(arr[i])\r\n    return quick_sort(left)\
          \ + [pivot] + quick_sort(right)<\uFF5Cfim\u2581end\uFF5C>'\r\n```\r\n\r\n\
          this gives\r\n\r\n```\r\n[omitted]\r\nsystem_info: n_threads = 4 / 8 | AVX\
          \ = 0 | AVX2 = 0 | AVX512 = 0 | AVX512_VBMI = 0 | AVX512_VNNI = 0 | FMA\
          \ = 0 | NEON = 1 | ARM_FMA = 1 | F16C = 0 | FP16_VA = 1 | WASM_SIMD = 0\
          \ | BLAS = 1 | SSE3 = 0 | SSSE3 = 0 | VSX = 0 | \r\nlibc++abi: terminating\
          \ due to uncaught exception of type std::out_of_range: unordered_map::at:\
          \ key not found\r\n[1]    4796 abort      ./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
          \ --verbose-prompt -p \r\n```\r\n\r\nwithout the verbose prompt, so I guess\
          \ something's wrong during tokenization. It works without these three fim_begin/hole/end\
          \ tokens.\r\n"
        updatedAt: '2023-12-01T05:41:50.189Z'
      numEdits: 0
      reactions: []
    id: 6569721e4527e9d1ffb1da99
    type: comment
  author: mljxy
  content: "I can't seem to get infill to work. The prompt is from the infill example\
    \ in the original readme.\r\n\r\n```\r\n./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
    \ --verbose-prompt -p '<\uFF5Cfim\u2581begin\uFF5C>def quick_sort(arr):      \
    \  \r\n    if len(arr) <= 1:\r\n        return arr\r\n    pivot = arr[0]\r\n \
    \   left = []\r\n    right = []\r\n<\uFF5Cfim\u2581hole\uFF5C>\r\n        if arr[i]\
    \ < pivot:\r\n            left.append(arr[i])\r\n        else:\r\n           \
    \ right.append(arr[i])\r\n    return quick_sort(left) + [pivot] + quick_sort(right)<\uFF5C\
    fim\u2581end\uFF5C>'\r\n```\r\n\r\nthis gives\r\n\r\n```\r\n[omitted]\r\nsystem_info:\
    \ n_threads = 4 / 8 | AVX = 0 | AVX2 = 0 | AVX512 = 0 | AVX512_VBMI = 0 | AVX512_VNNI\
    \ = 0 | FMA = 0 | NEON = 1 | ARM_FMA = 1 | F16C = 0 | FP16_VA = 1 | WASM_SIMD\
    \ = 0 | BLAS = 1 | SSE3 = 0 | SSSE3 = 0 | VSX = 0 | \r\nlibc++abi: terminating\
    \ due to uncaught exception of type std::out_of_range: unordered_map::at: key\
    \ not found\r\n[1]    4796 abort      ./main -m models/deepseek-coder-6.7b-base.Q8_0.gguf\
    \ --verbose-prompt -p \r\n```\r\n\r\nwithout the verbose prompt, so I guess something's\
    \ wrong during tokenization. It works without these three fim_begin/hole/end tokens.\r\
    \n"
  created_at: 2023-12-01 05:41:50+00:00
  edited: false
  hidden: false
  id: 6569721e4527e9d1ffb1da99
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: TheBloke/deepseek-coder-6.7B-base-GGUF
repo_type: model
status: open
target_branch: null
title: infill example crashes llama.cpp
