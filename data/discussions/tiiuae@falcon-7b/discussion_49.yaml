!!python/object:huggingface_hub.community.DiscussionWithDetails
author: NajiAboo
conflicting_files: null
created_at: 2023-06-28 06:02:01+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e596a89d174967c591c60de2b723e1ad.svg
      fullname: Mohamed Naji Aboo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: NajiAboo
      type: user
    createdAt: '2023-06-28T07:02:01.000Z'
    data:
      edited: true
      editors:
      - NajiAboo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5762592554092407
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e596a89d174967c591c60de2b723e1ad.svg
          fullname: Mohamed Naji Aboo
          isHf: false
          isPro: false
          name: NajiAboo
          type: user
        html: '<p>Trying to finetune the model in my GPU Machine ( Tesla v100). But
          getting an error as below , But this is working fine in colab </p>

          <p>modelling_RW.py", line 93, in forward<br>    return (q * cos) + (rotate_half(q)
          * sin), (k * cos) + (rotate_half(k) * sin)<br>            ~~^~~~~<br>TypeError:
          unsupported operand type(s) for *: ''Tensor'' and ''NoneType''</p>

          <p>any help on this is highly appreciated</p>

          '
        raw: "Trying to finetune the model in my GPU Machine ( Tesla v100). But getting\
          \ an error as below , But this is working fine in colab \n\nmodelling_RW.py\"\
          , line 93, in forward\n    return (q * cos) + (rotate_half(q) * sin), (k\
          \ * cos) + (rotate_half(k) * sin)\n            ~~^~~~~\nTypeError: unsupported\
          \ operand type(s) for *: 'Tensor' and 'NoneType'\n\nany help on this is\
          \ highly appreciated"
        updatedAt: '2023-06-28T07:02:28.152Z'
      numEdits: 1
      reactions:
      - count: 3
        reaction: "\U0001F44D"
        users:
        - seanfarrell
        - meyerjoseph
        - mkserge
    id: 649bdae9200e2dff194ec4a9
    type: comment
  author: NajiAboo
  content: "Trying to finetune the model in my GPU Machine ( Tesla v100). But getting\
    \ an error as below , But this is working fine in colab \n\nmodelling_RW.py\"\
    , line 93, in forward\n    return (q * cos) + (rotate_half(q) * sin), (k * cos)\
    \ + (rotate_half(k) * sin)\n            ~~^~~~~\nTypeError: unsupported operand\
    \ type(s) for *: 'Tensor' and 'NoneType'\n\nany help on this is highly appreciated"
  created_at: 2023-06-28 06:02:01+00:00
  edited: true
  hidden: false
  id: 649bdae9200e2dff194ec4a9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5ddbdcddf89dc54278804ffd2606b284.svg
      fullname: Joe Meyer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: meyerjoseph
      type: user
    createdAt: '2023-06-29T16:16:09.000Z'
    data:
      edited: false
      editors:
      - meyerjoseph
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.38486918807029724
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5ddbdcddf89dc54278804ffd2606b284.svg
          fullname: Joe Meyer
          isHf: false
          isPro: false
          name: meyerjoseph
          type: user
        html: '<p>Getting the same error</p>

          '
        raw: Getting the same error
        updatedAt: '2023-06-29T16:16:09.027Z'
      numEdits: 0
      reactions: []
    id: 649dae49d796c8e39e3a043b
    type: comment
  author: meyerjoseph
  content: Getting the same error
  created_at: 2023-06-29 15:16:09+00:00
  edited: false
  hidden: false
  id: 649dae49d796c8e39e3a043b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5ddbdcddf89dc54278804ffd2606b284.svg
      fullname: Joe Meyer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: meyerjoseph
      type: user
    createdAt: '2023-06-29T16:47:42.000Z'
    data:
      edited: false
      editors:
      - meyerjoseph
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6180474758148193
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5ddbdcddf89dc54278804ffd2606b284.svg
          fullname: Joe Meyer
          isHf: false
          isPro: false
          name: meyerjoseph
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;NajiAboo&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/NajiAboo\">@<span class=\"\
          underline\">NajiAboo</span></a></span>\n\n\t</span></span> by setting device_map\
          \ to auto it fixed the issue. I am using this script: <a rel=\"nofollow\"\
          \ href=\"https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4600438\"\
          >https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4600438</a></p>\n\
          <p><a rel=\"nofollow\" href=\"https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4605181#gistcomment-4605181\"\
          >https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4605181#gistcomment-4605181</a></p>\n"
        raw: '@NajiAboo by setting device_map to auto it fixed the issue. I am using
          this script: https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4600438


          https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4605181#gistcomment-4605181'
        updatedAt: '2023-06-29T16:47:42.706Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - vk-dell
    id: 649db5ae2a889e9b5db079e4
    type: comment
  author: meyerjoseph
  content: '@NajiAboo by setting device_map to auto it fixed the issue. I am using
    this script: https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4600438


    https://gist.github.com/pacman100/1731b41f7a90a87b457e8c5415ff1c14?permalink_comment_id=4605181#gistcomment-4605181'
  created_at: 2023-06-29 15:47:42+00:00
  edited: false
  hidden: false
  id: 649db5ae2a889e9b5db079e4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9b4f44fb4402fec88a968ff1c6c8be43.svg
      fullname: vkdell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vk-dell
      type: user
    createdAt: '2023-07-10T15:28:25.000Z'
    data:
      edited: false
      editors:
      - vk-dell
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8755161166191101
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9b4f44fb4402fec88a968ff1c6c8be43.svg
          fullname: vkdell
          isHf: false
          isPro: false
          name: vk-dell
          type: user
        html: '<p>having the same error, any help</p>

          '
        raw: 'having the same error, any help

          '
        updatedAt: '2023-07-10T15:28:25.886Z'
      numEdits: 0
      reactions: []
    id: 64ac23995870653ec8e5a742
    type: comment
  author: vk-dell
  content: 'having the same error, any help

    '
  created_at: 2023-07-10 14:28:25+00:00
  edited: false
  hidden: false
  id: 64ac23995870653ec8e5a742
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9b4f44fb4402fec88a968ff1c6c8be43.svg
      fullname: vkdell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vk-dell
      type: user
    createdAt: '2023-07-10T16:09:02.000Z'
    data:
      edited: false
      editors:
      - vk-dell
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7018404603004456
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9b4f44fb4402fec88a968ff1c6c8be43.svg
          fullname: vkdell
          isHf: false
          isPro: false
          name: vk-dell
          type: user
        html: '<p>model = AutoModelForCausalLM.from_pretrained(<br>    model_name,<br>    quantization_config=bnb_config,<br>    device_map="auto",<br>    trust_remote_code=True<br>)</p>

          <p>its working now thanks, have to update     device_map="auto",<br> as
          shown above, </p>

          '
        raw: "model = AutoModelForCausalLM.from_pretrained(\n    model_name,\n   \
          \ quantization_config=bnb_config,\n    device_map=\"auto\",\n    trust_remote_code=True\n\
          )\n\nits working now thanks, have to update     device_map=\"auto\",\n as\
          \ shown above, "
        updatedAt: '2023-07-10T16:09:02.822Z'
      numEdits: 0
      reactions: []
    id: 64ac2d1e506c85765a17142f
    type: comment
  author: vk-dell
  content: "model = AutoModelForCausalLM.from_pretrained(\n    model_name,\n    quantization_config=bnb_config,\n\
    \    device_map=\"auto\",\n    trust_remote_code=True\n)\n\nits working now thanks,\
    \ have to update     device_map=\"auto\",\n as shown above, "
  created_at: 2023-07-10 15:09:02+00:00
  edited: false
  hidden: false
  id: 64ac2d1e506c85765a17142f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e596a89d174967c591c60de2b723e1ad.svg
      fullname: Mohamed Naji Aboo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: NajiAboo
      type: user
    createdAt: '2023-07-12T11:31:09.000Z'
    data:
      edited: false
      editors:
      - NajiAboo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8532188534736633
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e596a89d174967c591c60de2b723e1ad.svg
          fullname: Mohamed Naji Aboo
          isHf: false
          isPro: false
          name: NajiAboo
          type: user
        html: '<p>I tried changing the device_map, </p>

          <p>But I am getting below error now </p>

          <p>ValueError: You can''t train a model that has been loaded in 8-bit precision
          on a different device than the one you''re training on. Make sure you loaded
          the model on the correct device using for example <code>device_map={'''':torch.cuda.current_device()}you''re
          training on. Make sure you loaded the model on the correct device using
          for example </code>device_map={'''':torch.cuda.current_device() or device_map={'''':torch.xpu.current_device()}</p>

          <p>suggestion please</p>

          '
        raw: "I tried changing the device_map, \n\nBut I am getting below error now\
          \ \n\nValueError: You can't train a model that has been loaded in 8-bit\
          \ precision on a different device than the one you're training on. Make\
          \ sure you loaded the model on the correct device using for example `device_map={'':torch.cuda.current_device()}you're\
          \ training on. Make sure you loaded the model on the correct device using\
          \ for example `device_map={'':torch.cuda.current_device() or device_map={'':torch.xpu.current_device()}\n\
          \n\nsuggestion please\n\n"
        updatedAt: '2023-07-12T11:31:09.898Z'
      numEdits: 0
      reactions:
      - count: 4
        reaction: "\U0001F44D"
        users:
        - mkserge
        - benbowman314
        - harjinder1988
        - tedbrun1
    id: 64ae8efd18aaae04fb2fc63a
    type: comment
  author: NajiAboo
  content: "I tried changing the device_map, \n\nBut I am getting below error now\
    \ \n\nValueError: You can't train a model that has been loaded in 8-bit precision\
    \ on a different device than the one you're training on. Make sure you loaded\
    \ the model on the correct device using for example `device_map={'':torch.cuda.current_device()}you're\
    \ training on. Make sure you loaded the model on the correct device using for\
    \ example `device_map={'':torch.cuda.current_device() or device_map={'':torch.xpu.current_device()}\n\
    \n\nsuggestion please\n\n"
  created_at: 2023-07-12 10:31:09+00:00
  edited: false
  hidden: false
  id: 64ae8efd18aaae04fb2fc63a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bd022b78051f4725fae8a11617eeb338.svg
      fullname: Harjinder Singh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: harjinder1988
      type: user
    createdAt: '2023-07-31T20:13:09.000Z'
    data:
      edited: false
      editors:
      - harjinder1988
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9371885657310486
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bd022b78051f4725fae8a11617eeb338.svg
          fullname: Harjinder Singh
          isHf: false
          isPro: false
          name: harjinder1988
          type: user
        html: '<p>Running into similar issue. Any update on this?</p>

          '
        raw: Running into similar issue. Any update on this?
        updatedAt: '2023-07-31T20:13:09.763Z'
      numEdits: 0
      reactions: []
    id: 64c815d5c864d962ede41159
    type: comment
  author: harjinder1988
  content: Running into similar issue. Any update on this?
  created_at: 2023-07-31 19:13:09+00:00
  edited: false
  hidden: false
  id: 64c815d5c864d962ede41159
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/14d0450108168990d4c2f10393cf1a9b.svg
      fullname: Sankha Subhra Mullick
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ssm1990
      type: user
    createdAt: '2023-09-06T14:06:59.000Z'
    data:
      edited: false
      editors:
      - ssm1990
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9174715876579285
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/14d0450108168990d4c2f10393cf1a9b.svg
          fullname: Sankha Subhra Mullick
          isHf: false
          isPro: false
          name: ssm1990
          type: user
        html: '<p>Same error at my end. Resolved for the time being by not passing
          the bitsandbytes, version 0.40.0.</p>

          '
        raw: Same error at my end. Resolved for the time being by not passing the
          bitsandbytes, version 0.40.0.
        updatedAt: '2023-09-06T14:06:59.250Z'
      numEdits: 0
      reactions: []
    id: 64f8878354d0fd40d803b74d
    type: comment
  author: ssm1990
  content: Same error at my end. Resolved for the time being by not passing the bitsandbytes,
    version 0.40.0.
  created_at: 2023-09-06 13:06:59+00:00
  edited: false
  hidden: false
  id: 64f8878354d0fd40d803b74d
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 49
repo_id: tiiuae/falcon-7b
repo_type: model
status: open
target_branch: null
title: 'Getting an error  TypeError: unsupported operand type(s) for *: ''Tensor''
  and ''NoneType'''
