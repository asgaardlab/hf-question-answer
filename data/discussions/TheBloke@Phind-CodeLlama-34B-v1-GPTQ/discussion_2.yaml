!!python/object:huggingface_hub.community.DiscussionWithDetails
author: catid
conflicting_files: null
created_at: 2023-08-27 05:18:19+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T06:18:19.000Z'
    data:
      edited: false
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.20605923235416412
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: "<p>Example of bad output:</p>\n<pre><code>{\n  \"task_id\": \"HumanEval/161\"\
          ,\n  \"completion\": \"    if not any(c.isalpha() for c in s)):\\n     \
          \   return s[::-1]\\n    else:\\n        return ''.join([c.upper() if c.islower()\
          \ else c.lower()][::-1] if c.isalpha() else [c.upper() if c.islower() else\
          \ c.lower()][::-1] if c.isalpha() else [c.upper() if c.islower() else c.lower()][::-1]\
          \ if c.isalpha() else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else\",\n  \"result\": \"failed: unmatched ')' (&lt;string&gt;, line\
          \ 13)\",\n  \"passed\": false\n}\n</code></pre>\n<p>Scores about a 0.065,\
          \ about 10x worse than advertised.</p>\n"
        raw: "Example of bad output:\r\n\r\n```\r\n{\r\n  \"task_id\": \"HumanEval/161\"\
          ,\r\n  \"completion\": \"    if not any(c.isalpha() for c in s)):\\n   \
          \     return s[::-1]\\n    else:\\n        return ''.join([c.upper() if\
          \ c.islower() else c.lower()][::-1] if c.isalpha() else [c.upper() if c.islower()\
          \ else c.lower()][::-1] if c.isalpha() else [c.upper() if c.islower() else\
          \ c.lower()][::-1] if c.isalpha() else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else else else else else else else else else else\
          \ else else else else else\",\r\n  \"result\": \"failed: unmatched ')' (<string>,\
          \ line 13)\",\r\n  \"passed\": false\r\n}\r\n```\r\n\r\nScores about a 0.065,\
          \ about 10x worse than advertised."
        updatedAt: '2023-08-27T06:18:19.902Z'
      numEdits: 0
      reactions: []
    id: 64eaeaab5349043b2b95fb2b
    type: comment
  author: catid
  content: "Example of bad output:\r\n\r\n```\r\n{\r\n  \"task_id\": \"HumanEval/161\"\
    ,\r\n  \"completion\": \"    if not any(c.isalpha() for c in s)):\\n        return\
    \ s[::-1]\\n    else:\\n        return ''.join([c.upper() if c.islower() else\
    \ c.lower()][::-1] if c.isalpha() else [c.upper() if c.islower() else c.lower()][::-1]\
    \ if c.isalpha() else [c.upper() if c.islower() else c.lower()][::-1] if c.isalpha()\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else else else else else else\
    \ else else else else else else else else else else else\",\r\n  \"result\": \"\
    failed: unmatched ')' (<string>, line 13)\",\r\n  \"passed\": false\r\n}\r\n```\r\
    \n\r\nScores about a 0.065, about 10x worse than advertised."
  created_at: 2023-08-27 05:18:19+00:00
  edited: false
  hidden: false
  id: 64eaeaab5349043b2b95fb2b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T07:49:02.000Z'
    data:
      edited: false
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9870647192001343
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: '<p>Tried main and also suggested branch in the description, both are
          broken.</p>

          '
        raw: Tried main and also suggested branch in the description, both are broken.
        updatedAt: '2023-08-27T07:49:02.939Z'
      numEdits: 0
      reactions: []
    id: 64eaffee9e53684e6e920c3e
    type: comment
  author: catid
  content: Tried main and also suggested branch in the description, both are broken.
  created_at: 2023-08-27 06:49:02+00:00
  edited: false
  hidden: false
  id: 64eaffee9e53684e6e920c3e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T07:49:45.000Z'
    data:
      edited: true
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4025057256221771
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: '<p>Loaded like this:</p>

          <pre><code>from transformers import AutoTokenizer, LlamaForCausalLM

          from human_eval.data import write_jsonl, read_problems

          from tqdm import tqdm


          # initialize the model


          model_path = "Phind-CodeLlama-34B-v1-GPTQ"

          model = LlamaForCausalLM.from_pretrained(model_path, device_map="cuda:0")

          tokenizer = AutoTokenizer.from_pretrained(model_path)

          </code></pre>

          '
        raw: 'Loaded like this:


          ```

          from transformers import AutoTokenizer, LlamaForCausalLM

          from human_eval.data import write_jsonl, read_problems

          from tqdm import tqdm


          # initialize the model


          model_path = "Phind-CodeLlama-34B-v1-GPTQ"

          model = LlamaForCausalLM.from_pretrained(model_path, device_map="cuda:0")

          tokenizer = AutoTokenizer.from_pretrained(model_path)

          ```'
        updatedAt: '2023-08-27T07:50:10.059Z'
      numEdits: 2
      reactions: []
    id: 64eb00192ca4ff1d53c2b517
    type: comment
  author: catid
  content: 'Loaded like this:


    ```

    from transformers import AutoTokenizer, LlamaForCausalLM

    from human_eval.data import write_jsonl, read_problems

    from tqdm import tqdm


    # initialize the model


    model_path = "Phind-CodeLlama-34B-v1-GPTQ"

    model = LlamaForCausalLM.from_pretrained(model_path, device_map="cuda:0")

    tokenizer = AutoTokenizer.from_pretrained(model_path)

    ```'
  created_at: 2023-08-27 06:49:45+00:00
  edited: true
  hidden: false
  id: 64eb00192ca4ff1d53c2b517
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-08-27T09:46:37.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8482404947280884
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>Can you test it with Transformers from latest Github.  It has the
          new rope_theta parameter which affects longer context, and the output you
          showed is often a symptom of bad RoPE scaling params</p>

          <p>I probably need to mention that Transformers 4.33.0.dev is required for
          this, but could you test it for me first?</p>

          <p>This is the Transformers commit that adds CodeLlama support: <a rel="nofollow"
          href="https://github.com/huggingface/transformers/commit/015f8e110d270a0ad42de4ae5b98198d69eb1964">https://github.com/huggingface/transformers/commit/015f8e110d270a0ad42de4ae5b98198d69eb1964</a></p>

          <p>You can test with: </p>

          <pre><code>pip3 install git+https://github.com/huggingface/transformers.git

          </code></pre>

          <p>Let me know</p>

          '
        raw: "Can you test it with Transformers from latest Github.  It has the new\
          \ rope_theta parameter which affects longer context, and the output you\
          \ showed is often a symptom of bad RoPE scaling params\n\nI probably need\
          \ to mention that Transformers 4.33.0.dev is required for this, but could\
          \ you test it for me first?\n\nThis is the Transformers commit that adds\
          \ CodeLlama support: https://github.com/huggingface/transformers/commit/015f8e110d270a0ad42de4ae5b98198d69eb1964\n\
          \nYou can test with: \n```\npip3 install git+https://github.com/huggingface/transformers.git\n\
          ```\n\nLet me know"
        updatedAt: '2023-08-27T09:46:37.945Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - catid
    id: 64eb1b7dbfb2aa06a44c09d1
    type: comment
  author: TheBloke
  content: "Can you test it with Transformers from latest Github.  It has the new\
    \ rope_theta parameter which affects longer context, and the output you showed\
    \ is often a symptom of bad RoPE scaling params\n\nI probably need to mention\
    \ that Transformers 4.33.0.dev is required for this, but could you test it for\
    \ me first?\n\nThis is the Transformers commit that adds CodeLlama support: https://github.com/huggingface/transformers/commit/015f8e110d270a0ad42de4ae5b98198d69eb1964\n\
    \nYou can test with: \n```\npip3 install git+https://github.com/huggingface/transformers.git\n\
    ```\n\nLet me know"
  created_at: 2023-08-27 08:46:37+00:00
  edited: false
  hidden: false
  id: 64eb1b7dbfb2aa06a44c09d1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T16:37:13.000Z'
    data:
      edited: false
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8871277570724487
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: '<p>Yup that fixed it:</p>

          <pre><code>{''pass@1'': 0.6158536585365854}

          </code></pre>

          <p>This is closer to what they claimed</p>

          '
        raw: 'Yup that fixed it:


          ```

          {''pass@1'': 0.6158536585365854}

          ```


          This is closer to what they claimed'
        updatedAt: '2023-08-27T16:37:13.130Z'
      numEdits: 0
      reactions: []
    id: 64eb7bb92f70f2a4c77678b1
    type: comment
  author: catid
  content: 'Yup that fixed it:


    ```

    {''pass@1'': 0.6158536585365854}

    ```


    This is closer to what they claimed'
  created_at: 2023-08-27 15:37:13+00:00
  edited: false
  hidden: false
  id: 64eb7bb92f70f2a4c77678b1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T16:56:39.000Z'
    data:
      edited: false
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.1967710703611374
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: '<p>Main branch: <code>{''pass@1'': 0.5670731707317073}</code></p>

          '
        raw: 'Main branch: `{''pass@1'': 0.5670731707317073}`'
        updatedAt: '2023-08-27T16:56:39.267Z'
      numEdits: 0
      reactions: []
    id: 64eb80473b889f24d65a84df
    type: comment
  author: catid
  content: 'Main branch: `{''pass@1'': 0.5670731707317073}`'
  created_at: 2023-08-27 15:56:39+00:00
  edited: false
  hidden: false
  id: 64eb80473b889f24d65a84df
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T18:04:09.000Z'
    data:
      edited: false
      editors:
      - catid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6697980761528015
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
          fullname: Chris Taylor
          isHf: false
          isPro: false
          name: catid
          type: user
        html: '<p>Repro steps here: <a rel="nofollow" href="https://github.com/catid/phind">https://github.com/catid/phind</a></p>

          '
        raw: 'Repro steps here: https://github.com/catid/phind'
        updatedAt: '2023-08-27T18:04:09.654Z'
      numEdits: 0
      reactions: []
    id: 64eb90198a9f0c94591fc431
    type: comment
  author: catid
  content: 'Repro steps here: https://github.com/catid/phind'
  created_at: 2023-08-27 17:04:09+00:00
  edited: false
  hidden: false
  id: 64eb90198a9f0c94591fc431
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661210778957-noauth.jpeg?w=200&h=200&f=face
      fullname: Chris Taylor
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: catid
      type: user
    createdAt: '2023-08-27T18:04:13.000Z'
    data:
      status: closed
    id: 64eb901d3b889f24d65c03c8
    type: status-change
  author: catid
  created_at: 2023-08-27 17:04:13+00:00
  id: 64eb901d3b889f24d65c03c8
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: TheBloke/Phind-CodeLlama-34B-v1-GPTQ
repo_type: model
status: closed
target_branch: null
title: Model is broken - Do not use
