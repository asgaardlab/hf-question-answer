!!python/object:huggingface_hub.community.DiscussionWithDetails
author: baltachev
conflicting_files: []
created_at: 2023-05-17 14:18:35+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/801a977557102963f361226756736932.svg
      fullname: Anton Baltachev
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: baltachev
      type: user
    createdAt: '2023-05-17T15:18:35.000Z'
    data:
      edited: false
      editors:
      - baltachev
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/801a977557102963f361226756736932.svg
          fullname: Anton Baltachev
          isHf: false
          isPro: false
          name: baltachev
          type: user
        html: '<p>Hello!<br>Yesterday we merged the model compatible with hf CLIP
          class. It works fine on the latest transformers version. </p>

          <p>However, I found out that it can''t be loaded on the older versions of
          transformers (specifically, 4.20.1), so I converted the open_clip model
          on transformers==4.20.1 and it works like a charm on version &gt;= 4.19.</p>

          <p>Decided not to check on older versions because there are quite outdated.</p>

          '
        raw: "Hello!\nYesterday we merged the model compatible with hf CLIP class.\
          \ It works fine on the latest transformers version. \n\nHowever, I found\
          \ out that it can't be loaded on the older versions of transformers (specifically,\
          \ 4.20.1), so I converted the open_clip model on transformers==4.20.1 and\
          \ it works like a charm on version >= 4.19.\n\nDecided not to check on older\
          \ versions because there are quite outdated."
        updatedAt: '2023-05-17T15:18:35.685Z'
      numEdits: 0
      reactions: []
    id: 6464f04ba0748f9aa4c40a64
    type: comment
  author: baltachev
  content: "Hello!\nYesterday we merged the model compatible with hf CLIP class. It\
    \ works fine on the latest transformers version. \n\nHowever, I found out that\
    \ it can't be loaded on the older versions of transformers (specifically, 4.20.1),\
    \ so I converted the open_clip model on transformers==4.20.1 and it works like\
    \ a charm on version >= 4.19.\n\nDecided not to check on older versions because\
    \ there are quite outdated."
  created_at: 2023-05-17 14:18:35+00:00
  edited: false
  hidden: false
  id: 6464f04ba0748f9aa4c40a64
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/801a977557102963f361226756736932.svg
      fullname: Anton Baltachev
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: baltachev
      type: user
    createdAt: '2023-05-17T15:18:36.000Z'
    data:
      oid: 9454a6ff4272ee06a945cf5d36a9540755059240
      parents:
      - 84c9828e63dc9a9351d1fe637c346d4c1c4db341
      subject: Make the hf model compatible with transformers older versions
    id: 6464f04c0000000000000000
    type: commit
  author: baltachev
  created_at: 2023-05-17 14:18:36+00:00
  id: 6464f04c0000000000000000
  oid: 9454a6ff4272ee06a945cf5d36a9540755059240
  summary: Make the hf model compatible with transformers older versions
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/801a977557102963f361226756736932.svg
      fullname: Anton Baltachev
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: baltachev
      type: user
    createdAt: '2023-05-19T08:48:30.000Z'
    data:
      edited: false
      editors:
      - baltachev
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/801a977557102963f361226756736932.svg
          fullname: Anton Baltachev
          isHf: false
          isPro: false
          name: baltachev
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;gabrielilharco&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/gabrielilharco\"\
          >@<span class=\"underline\">gabrielilharco</span></a></span>\n\n\t</span></span>\
          \ Would you mind taking a look at my PR again?</p>\n"
        raw: '@gabrielilharco Would you mind taking a look at my PR again?'
        updatedAt: '2023-05-19T08:48:30.780Z'
      numEdits: 0
      reactions: []
    id: 646737de3a7c8dda23fff94a
    type: comment
  author: baltachev
  content: '@gabrielilharco Would you mind taking a look at my PR again?'
  created_at: 2023-05-19 07:48:30+00:00
  edited: false
  hidden: false
  id: 646737de3a7c8dda23fff94a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/66e1f741e054a6b56f152df5ca229804.svg
      fullname: Xijia Tao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cie1
      type: user
    createdAt: '2023-06-26T08:06:54.000Z'
    data:
      edited: false
      editors:
      - Cie1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9278232455253601
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/66e1f741e054a6b56f152df5ca229804.svg
          fullname: Xijia Tao
          isHf: false
          isPro: false
          name: Cie1
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;baltachev&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/baltachev\">@<span class=\"\
          underline\">baltachev</span></a></span>\n\n\t</span></span> Hello, may I\
          \ ask how you did the conversion from open_clip_pytorch_model.bin to pytorch_model.bin?\
          \ The outputs from the two models seem to differ. So I'd like to check if\
          \ I was incorrectly running the models or there is some error in the conversion\
          \ process. Thanks a lot!</p>\n"
        raw: '@baltachev Hello, may I ask how you did the conversion from open_clip_pytorch_model.bin
          to pytorch_model.bin? The outputs from the two models seem to differ. So
          I''d like to check if I was incorrectly running the models or there is some
          error in the conversion process. Thanks a lot!'
        updatedAt: '2023-06-26T08:06:54.304Z'
      numEdits: 0
      reactions: []
    id: 6499471e4ece265dd607c03e
    type: comment
  author: Cie1
  content: '@baltachev Hello, may I ask how you did the conversion from open_clip_pytorch_model.bin
    to pytorch_model.bin? The outputs from the two models seem to differ. So I''d
    like to check if I was incorrectly running the models or there is some error in
    the conversion process. Thanks a lot!'
  created_at: 2023-06-26 07:06:54+00:00
  edited: false
  hidden: false
  id: 6499471e4ece265dd607c03e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/801a977557102963f361226756736932.svg
      fullname: Anton Baltachev
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: baltachev
      type: user
    createdAt: '2023-06-27T05:53:43.000Z'
    data:
      edited: false
      editors:
      - baltachev
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8283841609954834
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/801a977557102963f361226756736932.svg
          fullname: Anton Baltachev
          isHf: false
          isPro: false
          name: baltachev
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Cie1&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Cie1\">@<span class=\"\
          underline\">Cie1</span></a></span>\n\n\t</span></span> Hello! I just used\
          \ rwightman's <a rel=\"nofollow\" href=\"https://gist.github.com/rwightman/c79fd0241ed3c860e898114931c07990\"\
          >script</a>. My transformers version was 4.20.1 during the conversion.</p>\n"
        raw: '@Cie1 Hello! I just used rwightman''s [script](https://gist.github.com/rwightman/c79fd0241ed3c860e898114931c07990).
          My transformers version was 4.20.1 during the conversion.'
        updatedAt: '2023-06-27T05:53:43.951Z'
      numEdits: 0
      reactions: []
    id: 649a7967685215f724891176
    type: comment
  author: baltachev
  content: '@Cie1 Hello! I just used rwightman''s [script](https://gist.github.com/rwightman/c79fd0241ed3c860e898114931c07990).
    My transformers version was 4.20.1 during the conversion.'
  created_at: 2023-06-27 04:53:43+00:00
  edited: false
  hidden: false
  id: 649a7967685215f724891176
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/66e1f741e054a6b56f152df5ca229804.svg
      fullname: Xijia Tao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cie1
      type: user
    createdAt: '2023-07-10T08:54:13.000Z'
    data:
      edited: false
      editors:
      - Cie1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9166479110717773
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/66e1f741e054a6b56f152df5ca229804.svg
          fullname: Xijia Tao
          isHf: false
          isPro: false
          name: Cie1
          type: user
        html: "<blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;baltachev&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/baltachev\"\
          >@<span class=\"underline\">baltachev</span></a></span>\n\n\t</span></span>\
          \ Hello, may I ask how you did the conversion from open_clip_pytorch_model.bin\
          \ to pytorch_model.bin? The outputs from the two models seem to differ.\
          \ So I'd like to check if I was incorrectly running the models or there\
          \ is some error in the conversion process. Thanks a lot!</p>\n</blockquote>\n\
          <p>Thanks! It turns out there is a configuration error in my implementation\
          \ and the converted weight is correct.</p>\n"
        raw: '> @baltachev Hello, may I ask how you did the conversion from open_clip_pytorch_model.bin
          to pytorch_model.bin? The outputs from the two models seem to differ. So
          I''d like to check if I was incorrectly running the models or there is some
          error in the conversion process. Thanks a lot!


          Thanks! It turns out there is a configuration error in my implementation
          and the converted weight is correct.'
        updatedAt: '2023-07-10T08:54:13.354Z'
      numEdits: 0
      reactions: []
    id: 64abc7359915c39308ea013c
    type: comment
  author: Cie1
  content: '> @baltachev Hello, may I ask how you did the conversion from open_clip_pytorch_model.bin
    to pytorch_model.bin? The outputs from the two models seem to differ. So I''d
    like to check if I was incorrectly running the models or there is some error in
    the conversion process. Thanks a lot!


    Thanks! It turns out there is a configuration error in my implementation and the
    converted weight is correct.'
  created_at: 2023-07-10 07:54:13+00:00
  edited: false
  hidden: false
  id: 64abc7359915c39308ea013c
  type: comment
is_pull_request: true
merge_commit_oid: null
num: 6
repo_id: laion/CLIP-ViT-L-14-DataComp.XL-s13B-b90K
repo_type: model
status: open
target_branch: refs/heads/main
title: Make the hf model compatible with transformers older versions
