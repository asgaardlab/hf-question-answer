!!python/object:huggingface_hub.community.DiscussionWithDetails
author: f1yingbanana
conflicting_files: null
created_at: 2023-03-13 05:09:11+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1678587551389-noauth.png?w=200&h=200&f=face
      fullname: Jiacong Xu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: f1yingbanana
      type: user
    createdAt: '2023-03-13T06:09:11.000Z'
    data:
      edited: true
      editors:
      - f1yingbanana
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1678587551389-noauth.png?w=200&h=200&f=face
          fullname: Jiacong Xu
          isHf: false
          isPro: false
          name: f1yingbanana
          type: user
        html: '<p>I''ve downloaded both 16fp and 32fp models from beta 1 and 2, but
          all of them throw NansException when attempting to generate any image. WD
          1.4 works fine.</p>

          <pre><code>modules.devices.NansException: A tensor with all NaNs was produced
          in Unet. This could be either because there''s not enough precision to represent
          the picture, or because your video card does not support half type. Try
          setting the "Upcast cross attention layer to float32" option in Settings
          &gt; Stable Diffusion or using the --no-half commandline argument to fix
          this. Use --disable-nan-check commandline argument to disable this check.

          </code></pre>

          <p>Adding the command line arg <code>--no-half</code> does not help, and
          adding <code>--disable-nan-check</code> generates a black image.</p>

          '
        raw: 'I''ve downloaded both 16fp and 32fp models from beta 1 and 2, but all
          of them throw NansException when attempting to generate any image. WD 1.4
          works fine.


          ```

          modules.devices.NansException: A tensor with all NaNs was produced in Unet.
          This could be either because there''s not enough precision to represent
          the picture, or because your video card does not support half type. Try
          setting the "Upcast cross attention layer to float32" option in Settings
          > Stable Diffusion or using the --no-half commandline argument to fix this.
          Use --disable-nan-check commandline argument to disable this check.

          ```


          Adding the command line arg `--no-half` does not help, and adding `--disable-nan-check`
          generates a black image.'
        updatedAt: '2023-03-13T06:23:51.353Z'
      numEdits: 1
      reactions: []
    id: 640ebe072f9c7b364d180b8c
    type: comment
  author: f1yingbanana
  content: 'I''ve downloaded both 16fp and 32fp models from beta 1 and 2, but all
    of them throw NansException when attempting to generate any image. WD 1.4 works
    fine.


    ```

    modules.devices.NansException: A tensor with all NaNs was produced in Unet. This
    could be either because there''s not enough precision to represent the picture,
    or because your video card does not support half type. Try setting the "Upcast
    cross attention layer to float32" option in Settings > Stable Diffusion or using
    the --no-half commandline argument to fix this. Use --disable-nan-check commandline
    argument to disable this check.

    ```


    Adding the command line arg `--no-half` does not help, and adding `--disable-nan-check`
    generates a black image.'
  created_at: 2023-03-13 05:09:11+00:00
  edited: true
  hidden: false
  id: 640ebe072f9c7b364d180b8c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/03e75db68d19bdc1e0b85bfde424c934.svg
      fullname: Maddy
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Get-off-my-train
      type: user
    createdAt: '2023-04-19T04:21:07.000Z'
    data:
      edited: false
      editors:
      - Get-off-my-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/03e75db68d19bdc1e0b85bfde424c934.svg
          fullname: Maddy
          isHf: false
          isPro: false
          name: Get-off-my-train
          type: user
        html: '<blockquote>

          <p>Adding the command line arg <code>--no-half</code> does not help, and
          adding <code>--disable-nan-check</code> generates a black image.</p>

          </blockquote>

          <p>Hello. Same. Do You fix it somehow?</p>

          '
        raw: '> Adding the command line arg `--no-half` does not help, and adding
          `--disable-nan-check` generates a black image.


          Hello. Same. Do You fix it somehow?'
        updatedAt: '2023-04-19T04:21:07.399Z'
      numEdits: 0
      reactions: []
    id: 643f6c334c5309c244a198be
    type: comment
  author: Get-off-my-train
  content: '> Adding the command line arg `--no-half` does not help, and adding `--disable-nan-check`
    generates a black image.


    Hello. Same. Do You fix it somehow?'
  created_at: 2023-04-19 03:21:07+00:00
  edited: false
  hidden: false
  id: 643f6c334c5309c244a198be
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/24997afa5d60f88ee2787f2ba1fdc7f1.svg
      fullname: yoinked
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: yoinked
      type: user
    createdAt: '2023-04-19T05:00:27.000Z'
    data:
      edited: false
      editors:
      - yoinked
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/24997afa5d60f88ee2787f2ba1fdc7f1.svg
          fullname: yoinked
          isHf: false
          isPro: false
          name: yoinked
          type: user
        html: '<p>did you download the html?</p>

          '
        raw: did you download the html?
        updatedAt: '2023-04-19T05:00:27.417Z'
      numEdits: 0
      reactions: []
    id: 643f756b4c5309c244a26da3
    type: comment
  author: yoinked
  content: did you download the html?
  created_at: 2023-04-19 04:00:27+00:00
  edited: false
  hidden: false
  id: 643f756b4c5309c244a26da3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Qiy8mlJGYPjDAwcsukcao.jpeg?w=200&h=200&f=face
      fullname: David Douglas
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: SaruStudios
      type: user
    createdAt: '2023-04-29T15:36:19.000Z'
    data:
      edited: false
      editors:
      - SaruStudios
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Qiy8mlJGYPjDAwcsukcao.jpeg?w=200&h=200&f=face
          fullname: David Douglas
          isHf: false
          isPro: false
          name: SaruStudios
          type: user
        html: '<p>I get something similar when I use stable diffusion 2.1</p>

          '
        raw: I get something similar when I use stable diffusion 2.1
        updatedAt: '2023-04-29T15:36:19.962Z'
      numEdits: 0
      reactions: []
    id: 644d39730dc952d245a0213f
    type: comment
  author: SaruStudios
  content: I get something similar when I use stable diffusion 2.1
  created_at: 2023-04-29 14:36:19+00:00
  edited: false
  hidden: false
  id: 644d39730dc952d245a0213f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/24997afa5d60f88ee2787f2ba1fdc7f1.svg
      fullname: yoinked
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: yoinked
      type: user
    createdAt: '2023-04-29T17:16:22.000Z'
    data:
      edited: false
      editors:
      - yoinked
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/24997afa5d60f88ee2787f2ba1fdc7f1.svg
          fullname: yoinked
          isHf: false
          isPro: false
          name: yoinked
          type: user
        html: '<p>add the YAML file</p>

          '
        raw: add the YAML file
        updatedAt: '2023-04-29T17:16:22.638Z'
      numEdits: 0
      reactions: []
    id: 644d50e6fa94e93b0ec8b105
    type: comment
  author: yoinked
  content: add the YAML file
  created_at: 2023-04-29 16:16:22+00:00
  edited: false
  hidden: false
  id: 644d50e6fa94e93b0ec8b105
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: waifu-diffusion/wd-1-5-beta2
repo_type: model
status: open
target_branch: null
title: NansException with Automatic1111
