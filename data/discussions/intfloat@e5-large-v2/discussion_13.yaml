!!python/object:huggingface_hub.community.DiscussionWithDetails
author: innovationTony
conflicting_files: null
created_at: 2023-10-25 19:22:34+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/467f3628b7bc94e0a552bbdeddb18fe5.svg
      fullname: Tony Chan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: innovationTony
      type: user
    createdAt: '2023-10-25T20:22:34.000Z'
    data:
      edited: false
      editors:
      - innovationTony
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9042025208473206
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/467f3628b7bc94e0a552bbdeddb18fe5.svg
          fullname: Tony Chan
          isHf: false
          isPro: false
          name: innovationTony
          type: user
        html: '<p>Providing a sentence for embedding in a single input or in a list
          of string with other sentences is returning different results - is this
          expected behaviour?<br>I have set normalize_embeddings=True.</p>

          '
        raw: "Providing a sentence for embedding in a single input or in a list of\
          \ string with other sentences is returning different results - is this expected\
          \ behaviour?\r\nI have set normalize_embeddings=True."
        updatedAt: '2023-10-25T20:22:34.479Z'
      numEdits: 0
      reactions: []
    id: 6539790a821b9e4a34a5bd96
    type: comment
  author: innovationTony
  content: "Providing a sentence for embedding in a single input or in a list of string\
    \ with other sentences is returning different results - is this expected behaviour?\r\
    \nI have set normalize_embeddings=True."
  created_at: 2023-10-25 19:22:34+00:00
  edited: false
  hidden: false
  id: 6539790a821b9e4a34a5bd96
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5a1ee74c2dbe349a6ec9843a1599d281.svg
      fullname: Liang Wang
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: intfloat
      type: user
    createdAt: '2023-10-26T02:28:35.000Z'
    data:
      edited: false
      editors:
      - intfloat
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8566437363624573
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5a1ee74c2dbe349a6ec9843a1599d281.svg
          fullname: Liang Wang
          isHf: false
          isPro: false
          name: intfloat
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;innovationTony&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/innovationTony\"\
          >@<span class=\"underline\">innovationTony</span></a></span>\n\n\t</span></span>\
          \ No, this is unexpected. They should be the same, with differences up to\
          \ some small float number precision errors.</p>\n<p>I tested the following\
          \ code, but could not reproduce your reported issue. Can you provide a short\
          \ example?</p>\n<pre><code>from sentence_transformers import SentenceTransformer\n\
          model = SentenceTransformer('intfloat/e5-large-v2')\ninput_texts = [\n \
          \   'query: how much protein should a female eat',\n    'query: summit define',\n\
          \    \"passage: As a general guideline, the CDC's average requirement of\
          \ protein for women ages 19 to 70 is 46 grams per day. But, as you can see\
          \ from this chart, you'll need to increase that if you're expecting or training\
          \ for a marathon. Check out the chart below to see how much protein you\
          \ should be eating each day.\",\n    \"passage: Definition of summit for\
          \ English Language Learners. : 1  the highest point of a mountain : the\
          \ top of a mountain. : 2  the highest level. : 3  a meeting or series of\
          \ meetings between the leaders of two or more governments.\"\n]\nembeddings1\
          \ = model.encode(input_texts, normalize_embeddings=True)\nprint(embeddings1[0])\n\
          embeddings2 = model.encode(input_texts[:1], normalize_embeddings=True)\n\
          print(embeddings2[0])\n\nimport numpy as np\nassert np.allclose(embeddings1[0],\
          \ embeddings2[0], rtol=1e-4, atol=1e-4)\n</code></pre>\n"
        raw: "@innovationTony No, this is unexpected. They should be the same, with\
          \ differences up to some small float number precision errors.\n\nI tested\
          \ the following code, but could not reproduce your reported issue. Can you\
          \ provide a short example?\n\n```\nfrom sentence_transformers import SentenceTransformer\n\
          model = SentenceTransformer('intfloat/e5-large-v2')\ninput_texts = [\n \
          \   'query: how much protein should a female eat',\n    'query: summit define',\n\
          \    \"passage: As a general guideline, the CDC's average requirement of\
          \ protein for women ages 19 to 70 is 46 grams per day. But, as you can see\
          \ from this chart, you'll need to increase that if you're expecting or training\
          \ for a marathon. Check out the chart below to see how much protein you\
          \ should be eating each day.\",\n    \"passage: Definition of summit for\
          \ English Language Learners. : 1  the highest point of a mountain : the\
          \ top of a mountain. : 2  the highest level. : 3  a meeting or series of\
          \ meetings between the leaders of two or more governments.\"\n]\nembeddings1\
          \ = model.encode(input_texts, normalize_embeddings=True)\nprint(embeddings1[0])\n\
          embeddings2 = model.encode(input_texts[:1], normalize_embeddings=True)\n\
          print(embeddings2[0])\n\nimport numpy as np\nassert np.allclose(embeddings1[0],\
          \ embeddings2[0], rtol=1e-4, atol=1e-4)\n```"
        updatedAt: '2023-10-26T02:28:35.974Z'
      numEdits: 0
      reactions: []
    id: 6539ced32a101a151db07c8e
    type: comment
  author: intfloat
  content: "@innovationTony No, this is unexpected. They should be the same, with\
    \ differences up to some small float number precision errors.\n\nI tested the\
    \ following code, but could not reproduce your reported issue. Can you provide\
    \ a short example?\n\n```\nfrom sentence_transformers import SentenceTransformer\n\
    model = SentenceTransformer('intfloat/e5-large-v2')\ninput_texts = [\n    'query:\
    \ how much protein should a female eat',\n    'query: summit define',\n    \"\
    passage: As a general guideline, the CDC's average requirement of protein for\
    \ women ages 19 to 70 is 46 grams per day. But, as you can see from this chart,\
    \ you'll need to increase that if you're expecting or training for a marathon.\
    \ Check out the chart below to see how much protein you should be eating each\
    \ day.\",\n    \"passage: Definition of summit for English Language Learners.\
    \ : 1  the highest point of a mountain : the top of a mountain. : 2  the highest\
    \ level. : 3  a meeting or series of meetings between the leaders of two or more\
    \ governments.\"\n]\nembeddings1 = model.encode(input_texts, normalize_embeddings=True)\n\
    print(embeddings1[0])\nembeddings2 = model.encode(input_texts[:1], normalize_embeddings=True)\n\
    print(embeddings2[0])\n\nimport numpy as np\nassert np.allclose(embeddings1[0],\
    \ embeddings2[0], rtol=1e-4, atol=1e-4)\n```"
  created_at: 2023-10-26 01:28:35+00:00
  edited: false
  hidden: false
  id: 6539ced32a101a151db07c8e
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: intfloat/e5-large-v2
repo_type: model
status: open
target_branch: null
title: Single input vs Multiple inputs
