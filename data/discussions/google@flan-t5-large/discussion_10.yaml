!!python/object:huggingface_hub.community.DiscussionWithDetails
author: abhishekmamdapure
conflicting_files: null
created_at: 2023-02-10 10:05:27+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
      fullname: Abhishek Mamdapure
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: abhishekmamdapure
      type: user
    createdAt: '2023-02-10T10:05:27.000Z'
    data:
      edited: false
      editors:
      - abhishekmamdapure
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
          fullname: Abhishek Mamdapure
          isHf: false
          isPro: false
          name: abhishekmamdapure
          type: user
        html: '<p>Looking for ''mps'' support for flan models ? </p>

          '
        raw: 'Looking for ''mps'' support for flan models ? '
        updatedAt: '2023-02-10T10:05:27.534Z'
      numEdits: 0
      reactions: []
    id: 63e616e72d2c508de9f88cfe
    type: comment
  author: abhishekmamdapure
  content: 'Looking for ''mps'' support for flan models ? '
  created_at: 2023-02-10 10:05:27+00:00
  edited: false
  hidden: false
  id: 63e616e72d2c508de9f88cfe
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
      fullname: Abhishek Mamdapure
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: abhishekmamdapure
      type: user
    createdAt: '2023-02-21T10:29:22.000Z'
    data:
      edited: false
      editors:
      - abhishekmamdapure
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
          fullname: Abhishek Mamdapure
          isHf: false
          isPro: false
          name: abhishekmamdapure
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ybelkada&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ybelkada\">@<span class=\"\
          underline\">ybelkada</span></a></span>\n\n\t</span></span></p>\n"
        raw: '@ybelkada'
        updatedAt: '2023-02-21T10:29:22.124Z'
      numEdits: 0
      reactions: []
    id: 63f49d025d5278a016354e85
    type: comment
  author: abhishekmamdapure
  content: '@ybelkada'
  created_at: 2023-02-21 10:29:22+00:00
  edited: false
  hidden: false
  id: 63f49d025d5278a016354e85
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2023-02-21T13:46:38.000Z'
    data:
      edited: false
      editors:
      - ybelkada
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
          fullname: Younes Belkada
          isHf: true
          isPro: false
          name: ybelkada
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;abhishekmamdapure&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/abhishekmamdapure\"\
          >@<span class=\"underline\">abhishekmamdapure</span></a></span>\n\n\t</span></span><br>Thanks\
          \ for the issue, may I ask you what do you mean by <code>mps</code> support?\
          \ Running <code>flan-t5</code> on an M1 chip?</p>\n"
        raw: "Hi @abhishekmamdapure \nThanks for the issue, may I ask you what do\
          \ you mean by `mps` support? Running `flan-t5` on an M1 chip?"
        updatedAt: '2023-02-21T13:46:38.167Z'
      numEdits: 0
      reactions: []
    id: 63f4cb3e55a70e9901e21507
    type: comment
  author: ybelkada
  content: "Hi @abhishekmamdapure \nThanks for the issue, may I ask you what do you\
    \ mean by `mps` support? Running `flan-t5` on an M1 chip?"
  created_at: 2023-02-21 13:46:38+00:00
  edited: false
  hidden: false
  id: 63f4cb3e55a70e9901e21507
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
      fullname: Abhishek Mamdapure
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: abhishekmamdapure
      type: user
    createdAt: '2023-02-21T14:09:31.000Z'
    data:
      edited: false
      editors:
      - abhishekmamdapure
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
          fullname: Abhishek Mamdapure
          isHf: false
          isPro: false
          name: abhishekmamdapure
          type: user
        html: '<p>Yes. </p>

          <p>I tried running flan-t5 large on M2, but it was giving garbage results.</p>

          '
        raw: "Yes. \n\nI tried running flan-t5 large on M2, but it was giving garbage\
          \ results."
        updatedAt: '2023-02-21T14:09:31.653Z'
      numEdits: 0
      reactions: []
    id: 63f4d09b60606ac32a511a0a
    type: comment
  author: abhishekmamdapure
  content: "Yes. \n\nI tried running flan-t5 large on M2, but it was giving garbage\
    \ results."
  created_at: 2023-02-21 14:09:31+00:00
  edited: false
  hidden: false
  id: 63f4d09b60606ac32a511a0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
      fullname: Abhishek Mamdapure
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: abhishekmamdapure
      type: user
    createdAt: '2023-02-22T07:27:49.000Z'
    data:
      edited: false
      editors:
      - abhishekmamdapure
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/604751d67db74db6c89b9859/FbnmMq9YoLXG8iP9hPr2Y.jpeg?w=200&h=200&f=face
          fullname: Abhishek Mamdapure
          isHf: false
          isPro: false
          name: abhishekmamdapure
          type: user
        html: '<pre><code>from transformers import T5Tokenizer, T5ForConditionalGeneration

          import torch

          model = T5ForConditionalGeneration.from_pretrained("google/flan-t5-large")

          mps_device = torch.device(''mps'')

          model.to(mps_device)

          input_text = "Translate to German:  My name is Abhishek"

          input_ids = tokenizer(input_text, return_tensors="pt").input_ids.to("mps")


          outputs = model.generate(input_ids,max_new_tokens=50)

          print(tokenizer.decode(outputs[0]))

          </code></pre>

          <p>Code used !</p>

          '
        raw: '```

          from transformers import T5Tokenizer, T5ForConditionalGeneration

          import torch

          model = T5ForConditionalGeneration.from_pretrained("google/flan-t5-large")

          mps_device = torch.device(''mps'')

          model.to(mps_device)

          input_text = "Translate to German:  My name is Abhishek"

          input_ids = tokenizer(input_text, return_tensors="pt").input_ids.to("mps")


          outputs = model.generate(input_ids,max_new_tokens=50)

          print(tokenizer.decode(outputs[0]))

          ```


          Code used !'
        updatedAt: '2023-02-22T07:27:49.366Z'
      numEdits: 0
      reactions: []
    id: 63f5c3f552799101f3c656db
    type: comment
  author: abhishekmamdapure
  content: '```

    from transformers import T5Tokenizer, T5ForConditionalGeneration

    import torch

    model = T5ForConditionalGeneration.from_pretrained("google/flan-t5-large")

    mps_device = torch.device(''mps'')

    model.to(mps_device)

    input_text = "Translate to German:  My name is Abhishek"

    input_ids = tokenizer(input_text, return_tensors="pt").input_ids.to("mps")


    outputs = model.generate(input_ids,max_new_tokens=50)

    print(tokenizer.decode(outputs[0]))

    ```


    Code used !'
  created_at: 2023-02-22 07:27:49+00:00
  edited: false
  hidden: false
  id: 63f5c3f552799101f3c656db
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 10
repo_id: google/flan-t5-large
repo_type: model
status: open
target_branch: null
title: Is 'mps' supported for flans ?
