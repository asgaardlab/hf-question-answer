!!python/object:huggingface_hub.community.DiscussionWithDetails
author: leobg
conflicting_files: null
created_at: 2023-06-28 08:25:03+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f785b18b3ce4e931df17719d6f0ae42f.svg
      fullname: Leonard
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: leobg
      type: user
    createdAt: '2023-06-28T09:25:03.000Z'
    data:
      edited: false
      editors:
      - leobg
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5945397615432739
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f785b18b3ce4e931df17719d6f0ae42f.svg
          fullname: Leonard
          isHf: false
          isPro: false
          name: leobg
          type: user
        html: "<p>I'm getting this error:</p>\n<p><code>RuntimeError: Cannot load\
          \ the vocabulary from the model directory</code></p>\n<p>Source: </p>\n\
          <p><code>python3.8/dist-packages/hf_hub_ctranslate2/translate.py:48</code></p>\n\
          <p>This is the code I'm running:</p>\n<pre><code>from transformers import\
          \ AutoTokenizer\nfrom hf_hub_ctranslate2 import GeneratorCT2fromHfHub\n\n\
          tokenizer = AutoTokenizer.from_pretrained('mosaicml/mpt-30b')\n\nmodel_name\
          \ = \"michaelfeil/ct2fast-mpt-30b-chat\"\n\nmodel = GeneratorCT2fromHfHub(\n\
          \        # load in int8 on CUDA\n        model_name_or_path=model_name,\n\
          \        device=\"cuda\",\n        compute_type=\"int8_float16\",\n    \
          \    tokenizer=tokenizer\n)\n\noutputs = model.generate(\n    text=[\"def\
          \ fibonnaci(\", \"User: How are you doing? Bot:\"],\n    max_length=64,\n\
          \    include_prompt_in_result=False\n)\n\nprint(outputs)\n</code></pre>\n"
        raw: "I'm getting this error:\r\n\r\n`RuntimeError: Cannot load the vocabulary\
          \ from the model directory`\r\n\r\nSource: \r\n\r\n`python3.8/dist-packages/hf_hub_ctranslate2/translate.py:48`\r\
          \n\r\nThis is the code I'm running:\r\n\r\n```\r\nfrom transformers import\
          \ AutoTokenizer\r\nfrom hf_hub_ctranslate2 import GeneratorCT2fromHfHub\r\
          \n\r\ntokenizer = AutoTokenizer.from_pretrained('mosaicml/mpt-30b')\r\n\r\
          \nmodel_name = \"michaelfeil/ct2fast-mpt-30b-chat\"\r\n\r\nmodel = GeneratorCT2fromHfHub(\r\
          \n        # load in int8 on CUDA\r\n        model_name_or_path=model_name,\r\
          \n        device=\"cuda\",\r\n        compute_type=\"int8_float16\",\r\n\
          \        tokenizer=tokenizer\r\n)\r\n\r\noutputs = model.generate(\r\n \
          \   text=[\"def fibonnaci(\", \"User: How are you doing? Bot:\"],\r\n  \
          \  max_length=64,\r\n    include_prompt_in_result=False\r\n)\r\n\r\nprint(outputs)\r\
          \n```"
        updatedAt: '2023-06-28T09:25:03.556Z'
      numEdits: 0
      reactions: []
    id: 649bfc6fbd43778f113e8898
    type: comment
  author: leobg
  content: "I'm getting this error:\r\n\r\n`RuntimeError: Cannot load the vocabulary\
    \ from the model directory`\r\n\r\nSource: \r\n\r\n`python3.8/dist-packages/hf_hub_ctranslate2/translate.py:48`\r\
    \n\r\nThis is the code I'm running:\r\n\r\n```\r\nfrom transformers import AutoTokenizer\r\
    \nfrom hf_hub_ctranslate2 import GeneratorCT2fromHfHub\r\n\r\ntokenizer = AutoTokenizer.from_pretrained('mosaicml/mpt-30b')\r\
    \n\r\nmodel_name = \"michaelfeil/ct2fast-mpt-30b-chat\"\r\n\r\nmodel = GeneratorCT2fromHfHub(\r\
    \n        # load in int8 on CUDA\r\n        model_name_or_path=model_name,\r\n\
    \        device=\"cuda\",\r\n        compute_type=\"int8_float16\",\r\n      \
    \  tokenizer=tokenizer\r\n)\r\n\r\noutputs = model.generate(\r\n    text=[\"def\
    \ fibonnaci(\", \"User: How are you doing? Bot:\"],\r\n    max_length=64,\r\n\
    \    include_prompt_in_result=False\r\n)\r\n\r\nprint(outputs)\r\n```"
  created_at: 2023-06-28 08:25:03+00:00
  edited: false
  hidden: false
  id: 649bfc6fbd43778f113e8898
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/644fac0ce1d7a97f3b653ab1/fottSAPFrJdKeMW2UJv_l.jpeg?w=200&h=200&f=face
      fullname: Michael
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: michaelfeil
      type: user
    createdAt: '2023-06-28T22:15:11.000Z'
    data:
      edited: false
      editors:
      - michaelfeil
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9256018400192261
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/644fac0ce1d7a97f3b653ab1/fottSAPFrJdKeMW2UJv_l.jpeg?w=200&h=200&f=face
          fullname: Michael
          isHf: false
          isPro: false
          name: michaelfeil
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;leobg&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/leobg\">@<span class=\"\
          underline\">leobg</span></a></span>\n\n\t</span></span> I added the vocabulary.json\
          \ as vocabulary.txt - can you try if your error still occurs?</p>\n"
        raw: '@leobg I added the vocabulary.json as vocabulary.txt - can you try if
          your error still occurs?'
        updatedAt: '2023-06-28T22:15:11.189Z'
      numEdits: 0
      reactions: []
    id: 649cb0efaf6e5fb89c9531e5
    type: comment
  author: michaelfeil
  content: '@leobg I added the vocabulary.json as vocabulary.txt - can you try if
    your error still occurs?'
  created_at: 2023-06-28 21:15:11+00:00
  edited: false
  hidden: false
  id: 649cb0efaf6e5fb89c9531e5
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: michaelfeil/ct2fast-mpt-30b-chat
repo_type: model
status: open
target_branch: null
title: '"Cannot load the vocabulary from the model directory"'
