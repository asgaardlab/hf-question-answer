!!python/object:huggingface_hub.community.DiscussionWithDetails
author: JanVythikowski
conflicting_files: null
created_at: 2023-11-19 16:32:08+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/caa3f74bf60cfbec9e3ecc6ae233efe3.svg
      fullname: Vythikowski
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JanVythikowski
      type: user
    createdAt: '2023-11-19T16:32:08.000Z'
    data:
      edited: true
      editors:
      - JanVythikowski
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.36844736337661743
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/caa3f74bf60cfbec9e3ecc6ae233efe3.svg
          fullname: Vythikowski
          isHf: false
          isPro: false
          name: JanVythikowski
          type: user
        html: '<p>docs_texts = [''My dummy text'',''My text'']<br>docs_inps = tokenizer(<br>            docs_texts,
          truncation=True, padding=True, return_tensors="pt"<br>)</p>

          <p>model = AutoModel.from_pretrained(''sentence-transformers/gtr-t5-base'')<br>model(**docs_inps)</p>

          <p>I get ''ValueError: You have to specify either decoder_input_ids or decoder_inputs_embeds''.
          Nevertheless, the model only uses the encoder.</p>

          <p>It seems that you also include the T5 decoder in the architecture.</p>

          '
        raw: "docs_texts = ['My dummy text','My text']\ndocs_inps = tokenizer(\n \
          \           docs_texts, truncation=True, padding=True, return_tensors=\"\
          pt\"\n)\n\nmodel = AutoModel.from_pretrained('sentence-transformers/gtr-t5-base')\n\
          model(**docs_inps)\n\nI get 'ValueError: You have to specify either decoder_input_ids\
          \ or decoder_inputs_embeds'. Nevertheless, the model only uses the encoder.\n\
          \nIt seems that you also include the T5 decoder in the architecture."
        updatedAt: '2023-11-19T16:34:52.834Z'
      numEdits: 1
      reactions: []
    id: 655a38881c419bb072792e1a
    type: comment
  author: JanVythikowski
  content: "docs_texts = ['My dummy text','My text']\ndocs_inps = tokenizer(\n   \
    \         docs_texts, truncation=True, padding=True, return_tensors=\"pt\"\n)\n\
    \nmodel = AutoModel.from_pretrained('sentence-transformers/gtr-t5-base')\nmodel(**docs_inps)\n\
    \nI get 'ValueError: You have to specify either decoder_input_ids or decoder_inputs_embeds'.\
    \ Nevertheless, the model only uses the encoder.\n\nIt seems that you also include\
    \ the T5 decoder in the architecture."
  created_at: 2023-11-19 16:32:08+00:00
  edited: true
  hidden: false
  id: 655a38881c419bb072792e1a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6317233cc92fd6fee317e030/cJHSvvimr1kqgQfHOjO5n.png?w=200&h=200&f=face
      fullname: Tom Aarsen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: tomaarsen
      type: user
    createdAt: '2023-11-20T09:04:40.000Z'
    data:
      edited: false
      editors:
      - tomaarsen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7316574454307556
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6317233cc92fd6fee317e030/cJHSvvimr1kqgQfHOjO5n.png?w=200&h=200&f=face
          fullname: Tom Aarsen
          isHf: true
          isPro: false
          name: tomaarsen
          type: user
        html: '<p>Hello!</p>

          <p>The recommended usage for this model is via <code>sentence_transformer</code>,
          e.g.:</p>

          <pre><code class="language-py"><span class="hljs-keyword">from</span> sentence_transformers
          <span class="hljs-keyword">import</span> SentenceTransformer

          sentences = [<span class="hljs-string">"This is an example sentence"</span>,
          <span class="hljs-string">"Each sentence is converted"</span>]


          model = SentenceTransformer(<span class="hljs-string">''sentence-transformers/gtr-t5-xl''</span>)

          embeddings = model.encode(sentences)

          <span class="hljs-built_in">print</span>(embeddings)

          </code></pre>

          <p>Otherwise, the <a href="https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/1_Pooling">Pooling</a>
          and <a href="https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/2_Dense">Dense</a>
          layers won''t be loaded.</p>

          '
        raw: 'Hello!


          The recommended usage for this model is via `sentence_transformer`, e.g.:


          ```py

          from sentence_transformers import SentenceTransformer

          sentences = ["This is an example sentence", "Each sentence is converted"]


          model = SentenceTransformer(''sentence-transformers/gtr-t5-xl'')

          embeddings = model.encode(sentences)

          print(embeddings)

          ```


          Otherwise, the [Pooling](https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/1_Pooling)
          and [Dense](https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/2_Dense)
          layers won''t be loaded.'
        updatedAt: '2023-11-20T09:04:40.232Z'
      numEdits: 0
      reactions: []
    id: 655b212830ad83ad6b8085e5
    type: comment
  author: tomaarsen
  content: 'Hello!


    The recommended usage for this model is via `sentence_transformer`, e.g.:


    ```py

    from sentence_transformers import SentenceTransformer

    sentences = ["This is an example sentence", "Each sentence is converted"]


    model = SentenceTransformer(''sentence-transformers/gtr-t5-xl'')

    embeddings = model.encode(sentences)

    print(embeddings)

    ```


    Otherwise, the [Pooling](https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/1_Pooling)
    and [Dense](https://huggingface.co/sentence-transformers/gtr-t5-xl/tree/main/2_Dense)
    layers won''t be loaded.'
  created_at: 2023-11-20 09:04:40+00:00
  edited: false
  hidden: false
  id: 655b212830ad83ad6b8085e5
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: sentence-transformers/gtr-t5-xl
repo_type: model
status: open
target_branch: null
title: ValueError
