!!python/object:huggingface_hub.community.DiscussionWithDetails
author: aron1016
conflicting_files: null
created_at: 2023-12-03 07:19:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1a9c8cb5817a5037efdf93a130765121.svg
      fullname: Aron
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aron1016
      type: user
    createdAt: '2023-12-03T07:19:39.000Z'
    data:
      edited: false
      editors:
      - aron1016
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7025043368339539
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1a9c8cb5817a5037efdf93a130765121.svg
          fullname: Aron
          isHf: false
          isPro: false
          name: aron1016
          type: user
        html: '<p>I tried using the model: facebook/bart-large-cnn by loading it using
          the class TFBartForConditionalGeneration and TFAutoModelForSeq2SeqLM and
          return tensor = "tf"  in the tokenizer. while using the model in predictions
          the model is not working properly and not getting the expected results.</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/AZgMEmvERulWlKsWv-lFD.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/AZgMEmvERulWlKsWv-lFD.png"></a></p>

          <p>pls find the code,</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/o9D6o8aBin2ZwPMCreHXF.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/o9D6o8aBin2ZwPMCreHXF.png"></a></p>

          <p>The model is working fine when loaded using the class, model = AutoModelForSeq2SeqLM.from_pretrained("facebook/bart-large-cnn")
          and tokenizer = AutoTokenizer.from_pretrained("facebook/bart-large-cnn")
          and the return tensor ="pt" in tokenizer.<br>but when used the return tensor
          as "tf" getting the below error message,<br>tokenizer([input_text], return_tensors="tf")</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/31ST3dhPd7Gl5XNPCUvtc.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/31ST3dhPd7Gl5XNPCUvtc.png"></a></p>

          <p>kindly help how to use the model in tensorflow.</p>

          '
        raw: "I tried using the model: facebook/bart-large-cnn by loading it using\
          \ the class TFBartForConditionalGeneration and TFAutoModelForSeq2SeqLM and\
          \ return tensor = \"tf\"  in the tokenizer. while using the model in predictions\
          \ the model is not working properly and not getting the expected results.\r\
          \n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/AZgMEmvERulWlKsWv-lFD.png)\r\
          \n\r\npls find the code,\r\n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/o9D6o8aBin2ZwPMCreHXF.png)\r\
          \n\r\nThe model is working fine when loaded using the class, model = AutoModelForSeq2SeqLM.from_pretrained(\"\
          facebook/bart-large-cnn\") and tokenizer = AutoTokenizer.from_pretrained(\"\
          facebook/bart-large-cnn\") and the return tensor =\"pt\" in tokenizer.\r\
          \nbut when used the return tensor as \"tf\" getting the below error message,\r\
          \ntokenizer([input_text], return_tensors=\"tf\")\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/31ST3dhPd7Gl5XNPCUvtc.png)\r\
          \n\r\nkindly help how to use the model in tensorflow.\r\n"
        updatedAt: '2023-12-03T07:19:39.083Z'
      numEdits: 0
      reactions: []
    id: 656c2c0bedd446c42b4dc13a
    type: comment
  author: aron1016
  content: "I tried using the model: facebook/bart-large-cnn by loading it using the\
    \ class TFBartForConditionalGeneration and TFAutoModelForSeq2SeqLM and return\
    \ tensor = \"tf\"  in the tokenizer. while using the model in predictions the\
    \ model is not working properly and not getting the expected results.\r\n\r\n\
    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/AZgMEmvERulWlKsWv-lFD.png)\r\
    \n\r\npls find the code,\r\n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/o9D6o8aBin2ZwPMCreHXF.png)\r\
    \n\r\nThe model is working fine when loaded using the class, model = AutoModelForSeq2SeqLM.from_pretrained(\"\
    facebook/bart-large-cnn\") and tokenizer = AutoTokenizer.from_pretrained(\"facebook/bart-large-cnn\"\
    ) and the return tensor =\"pt\" in tokenizer.\r\nbut when used the return tensor\
    \ as \"tf\" getting the below error message,\r\ntokenizer([input_text], return_tensors=\"\
    tf\")\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6551a133259ab602964cf328/31ST3dhPd7Gl5XNPCUvtc.png)\r\
    \n\r\nkindly help how to use the model in tensorflow.\r\n"
  created_at: 2023-12-03 07:19:39+00:00
  edited: false
  hidden: false
  id: 656c2c0bedd446c42b4dc13a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
      fullname: Levani Vashadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: levani13
      type: user
    createdAt: '2023-12-10T17:14:23.000Z'
    data:
      edited: false
      editors:
      - levani13
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8947800397872925
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
          fullname: Levani Vashadze
          isHf: false
          isPro: false
          name: levani13
          type: user
        html: '<p>I have the same issue while using the pipeline API</p>

          '
        raw: I have the same issue while using the pipeline API
        updatedAt: '2023-12-10T17:14:23.246Z'
      numEdits: 0
      reactions: []
    id: 6575f1ef015c459f1bc9ce06
    type: comment
  author: levani13
  content: I have the same issue while using the pipeline API
  created_at: 2023-12-10 17:14:23+00:00
  edited: false
  hidden: false
  id: 6575f1ef015c459f1bc9ce06
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660312628256-60ba519750effef3a58beac3.png?w=200&h=200&f=face
      fullname: Matthew Carrigan
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Rocketknight1
      type: user
    createdAt: '2023-12-13T16:27:47.000Z'
    data:
      edited: false
      editors:
      - Rocketknight1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9299365282058716
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660312628256-60ba519750effef3a58beac3.png?w=200&h=200&f=face
          fullname: Matthew Carrigan
          isHf: true
          isPro: false
          name: Rocketknight1
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;aron1016&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/aron1016\"\
          >@<span class=\"underline\">aron1016</span></a></span>\n\n\t</span></span>\
          \ <span data-props=\"{&quot;user&quot;:&quot;levani13&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/levani13\">@<span class=\"\
          underline\">levani13</span></a></span>\n\n\t</span></span>, it's quite hard\
          \ to figure out the code from screenshots. Can you paste me some sample\
          \ code or link me to a notebook that reproduces the issue?</p>\n"
        raw: Hi @aron1016 @levani13, it's quite hard to figure out the code from screenshots.
          Can you paste me some sample code or link me to a notebook that reproduces
          the issue?
        updatedAt: '2023-12-13T16:27:47.322Z'
      numEdits: 0
      reactions: []
    id: 6579db83691da91ece7939c2
    type: comment
  author: Rocketknight1
  content: Hi @aron1016 @levani13, it's quite hard to figure out the code from screenshots.
    Can you paste me some sample code or link me to a notebook that reproduces the
    issue?
  created_at: 2023-12-13 16:27:47+00:00
  edited: false
  hidden: false
  id: 6579db83691da91ece7939c2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
      fullname: Levani Vashadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: levani13
      type: user
    createdAt: '2023-12-13T16:29:23.000Z'
    data:
      edited: false
      editors:
      - levani13
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9394566416740417
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
          fullname: Levani Vashadze
          isHf: false
          isPro: false
          name: levani13
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Rocketknight1&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Rocketknight1\"\
          >@<span class=\"underline\">Rocketknight1</span></a></span>\n\n\t</span></span>\
          \ for me it's working again, no idea why it got messed up temporarily</p>\n"
        raw: '@Rocketknight1 for me it''s working again, no idea why it got messed
          up temporarily'
        updatedAt: '2023-12-13T16:29:23.241Z'
      numEdits: 0
      reactions: []
    id: 6579dbe3c9ca8f018e01e144
    type: comment
  author: levani13
  content: '@Rocketknight1 for me it''s working again, no idea why it got messed up
    temporarily'
  created_at: 2023-12-13 16:29:23+00:00
  edited: false
  hidden: false
  id: 6579dbe3c9ca8f018e01e144
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660312628256-60ba519750effef3a58beac3.png?w=200&h=200&f=face
      fullname: Matthew Carrigan
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Rocketknight1
      type: user
    createdAt: '2023-12-13T16:38:13.000Z'
    data:
      edited: false
      editors:
      - Rocketknight1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9722435474395752
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660312628256-60ba519750effef3a58beac3.png?w=200&h=200&f=face
          fullname: Matthew Carrigan
          isHf: true
          isPro: false
          name: Rocketknight1
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;levani13&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/levani13\"\
          >@<span class=\"underline\">levani13</span></a></span>\n\n\t</span></span>,\
          \ that's good to hear! We suspect the cause was an issue in loading safetensors\
          \ in TF. This was fixed by the PR <a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/pull/27490\"\
          >here</a> which was included in in version 4.36. If you updated transformers\
          \ in the meantime, that might be what happened.</p>\n<p><span data-props=\"\
          {&quot;user&quot;:&quot;aron1016&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/aron1016\">@<span class=\"underline\">aron1016</span></a></span>\n\
          \n\t</span></span>, let me know if upgrading transformers fixes your issues\
          \ as well!</p>\n"
        raw: 'Hi @levani13, that''s good to hear! We suspect the cause was an issue
          in loading safetensors in TF. This was fixed by the PR [here](https://github.com/huggingface/transformers/pull/27490)
          which was included in in version 4.36. If you updated transformers in the
          meantime, that might be what happened.


          @aron1016, let me know if upgrading transformers fixes your issues as well!'
        updatedAt: '2023-12-13T16:38:13.087Z'
      numEdits: 0
      reactions: []
    id: 6579ddf5c8423342f8a6f7b8
    type: comment
  author: Rocketknight1
  content: 'Hi @levani13, that''s good to hear! We suspect the cause was an issue
    in loading safetensors in TF. This was fixed by the PR [here](https://github.com/huggingface/transformers/pull/27490)
    which was included in in version 4.36. If you updated transformers in the meantime,
    that might be what happened.


    @aron1016, let me know if upgrading transformers fixes your issues as well!'
  created_at: 2023-12-13 16:38:13+00:00
  edited: false
  hidden: false
  id: 6579ddf5c8423342f8a6f7b8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
      fullname: Levani Vashadze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: levani13
      type: user
    createdAt: '2023-12-13T16:58:07.000Z'
    data:
      edited: false
      editors:
      - levani13
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9845070838928223
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/42e0d726a3d4db286761372a86e7ca2a.svg
          fullname: Levani Vashadze
          isHf: false
          isPro: false
          name: levani13
          type: user
        html: '<p>Yeah I did update it as part of troubleshooting</p>

          '
        raw: Yeah I did update it as part of troubleshooting
        updatedAt: '2023-12-13T16:58:07.079Z'
      numEdits: 0
      reactions: []
    id: 6579e29fcdca8a3d5b400866
    type: comment
  author: levani13
  content: Yeah I did update it as part of troubleshooting
  created_at: 2023-12-13 16:58:07+00:00
  edited: false
  hidden: false
  id: 6579e29fcdca8a3d5b400866
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1a9c8cb5817a5037efdf93a130765121.svg
      fullname: Aron
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aron1016
      type: user
    createdAt: '2023-12-18T14:59:08.000Z'
    data:
      edited: false
      editors:
      - aron1016
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8988471031188965
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1a9c8cb5817a5037efdf93a130765121.svg
          fullname: Aron
          isHf: false
          isPro: false
          name: aron1016
          type: user
        html: '<p>!pip install transformers==4.36.1 </p>

          <p>The above code is working fine after upgrading the transformer </p>

          <p>thank you</p>

          '
        raw: "!pip install transformers==4.36.1 \n\nThe above code is working fine\
          \ after upgrading the transformer \n\nthank you"
        updatedAt: '2023-12-18T14:59:08.434Z'
      numEdits: 0
      reactions: []
    id: 65805e3c54a75cbee675c3ee
    type: comment
  author: aron1016
  content: "!pip install transformers==4.36.1 \n\nThe above code is working fine after\
    \ upgrading the transformer \n\nthank you"
  created_at: 2023-12-18 14:59:08+00:00
  edited: false
  hidden: false
  id: 65805e3c54a75cbee675c3ee
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 64
repo_id: facebook/bart-large-cnn
repo_type: model
status: open
target_branch: null
title: the model facebook/bart-large-cnn  is not working properly while loading it
  using the class TFBartForConditionalGeneration
