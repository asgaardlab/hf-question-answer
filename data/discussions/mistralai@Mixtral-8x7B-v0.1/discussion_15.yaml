!!python/object:huggingface_hub.community.DiscussionWithDetails
author: vibranium
conflicting_files: null
created_at: 2023-12-12 17:55:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
      fullname: Avanish Ranjan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vibranium
      type: user
    createdAt: '2023-12-12T17:55:56.000Z'
    data:
      edited: false
      editors:
      - vibranium
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.47526219487190247
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
          fullname: Avanish Ranjan
          isHf: false
          isPro: false
          name: vibranium
          type: user
        html: "<p>I don't know what's wrong here but the deployment is failing on\
          \ sagemaker:</p>\n<pre><code>def deploy_mistral(\n):\n    hub = {\n    \
          \    \"HF_MODEL_ID\": \"mistralai/Mixtral-8x7B-v0.1\",\n        \"SM_NUM_GPUS\"\
          : json.dumps(8),\n        \"DTYPE\": \"bfloat16\"\n    }\n\n    hf_model\
          \ = HuggingFaceModel(\n        image_uri=get_huggingface_llm_image_uri(\"\
          huggingface\"),\n        transformers_version='4.36.0',\n        env=hub,\n\
          \        name=\"mistral-model\",\n        role=get_iam_role(),\n    )\n\
          \    predictor = hf_model.deploy(\n        container_startup_health_check_timeout=300,\n\
          \        initial_instance_count=1,\n        instance_type=\"ml.p4d.24xlarge\"\
          ,\n        endpoint_name=\"mistral\",\n    )\n\ndeploy_mistral()\n</code></pre>\n\
          <pre><code>#033[2m2023-12-12T17:48:43.576706Z#033[0m #033[31mERROR#033[0m\
          \ #033[1mshard-manager#033[0m: #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
          \ Shard complete standard error output:\nTraceback (most recent call last):\n\
          \  File \"/opt/conda/bin/text-generation-server\", line 8, in &lt;module&gt;\n\
          \    sys.exit(app())\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
          , line 83, in serve\n    server.serve(\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
          , line 207, in serve\n    asyncio.run(\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\"\
          , line 44, in run\n    return loop.run_until_complete(main)\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\"\
          , line 647, in run_until_complete\n    return future.result()\n  File \"\
          /opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
          , line 159, in serve_inner\n    model = get_model(\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/__init__.py\"\
          , line 336, in get_model\n    raise ValueError(f\"Unsupported model type\
          \ {model_type}\")\nValueError: Unsupported model type mixtral\n #033[2m#033[3mrank#033[0m#033[2m=#033[0m0#033[0m\n\
          #033[2m2023-12-12T17:48:43.674324Z#033[0m #033[31mERROR#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
          \ Shard 0 failed to start\n#033[2m2023-12-12T17:48:43.674344Z#033[0m #033[32m\
          \ INFO#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m Shutting\
          \ down shards\nError: ShardCannotStart\n</code></pre>\n"
        raw: "I don't know what's wrong here but the deployment is failing on sagemaker:\r\
          \n```\r\ndef deploy_mistral(\r\n):\r\n    hub = {\r\n        \"HF_MODEL_ID\"\
          : \"mistralai/Mixtral-8x7B-v0.1\",\r\n        \"SM_NUM_GPUS\": json.dumps(8),\r\
          \n        \"DTYPE\": \"bfloat16\"\r\n    }\r\n\r\n    hf_model = HuggingFaceModel(\r\
          \n        image_uri=get_huggingface_llm_image_uri(\"huggingface\"),\r\n\
          \        transformers_version='4.36.0',\r\n        env=hub,\r\n        name=\"\
          mistral-model\",\r\n        role=get_iam_role(),\r\n    )\r\n    predictor\
          \ = hf_model.deploy(\r\n        container_startup_health_check_timeout=300,\r\
          \n        initial_instance_count=1,\r\n        instance_type=\"ml.p4d.24xlarge\"\
          ,\r\n        endpoint_name=\"mistral\",\r\n    )\r\n\r\ndeploy_mistral()\r\
          \n```\r\n\r\n```\r\n#033[2m2023-12-12T17:48:43.576706Z#033[0m #033[31mERROR#033[0m\
          \ #033[1mshard-manager#033[0m: #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
          \ Shard complete standard error output:\r\nTraceback (most recent call last):\r\
          \n  File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\
          \n    sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
          , line 83, in serve\r\n    server.serve(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
          , line 207, in serve\r\n    asyncio.run(\r\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\"\
          , line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File\
          \ \"/opt/conda/lib/python3.9/asyncio/base_events.py\", line 647, in run_until_complete\r\
          \n    return future.result()\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
          , line 159, in serve_inner\r\n    model = get_model(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/__init__.py\"\
          , line 336, in get_model\r\n    raise ValueError(f\"Unsupported model type\
          \ {model_type}\")\r\nValueError: Unsupported model type mixtral\r\n #033[2m#033[3mrank#033[0m#033[2m=#033[0m0#033[0m\r\
          \n#033[2m2023-12-12T17:48:43.674324Z#033[0m #033[31mERROR#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
          \ Shard 0 failed to start\r\n#033[2m2023-12-12T17:48:43.674344Z#033[0m #033[32m\
          \ INFO#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m Shutting\
          \ down shards\r\nError: ShardCannotStart\r\n```"
        updatedAt: '2023-12-12T17:55:56.498Z'
      numEdits: 0
      reactions: []
    id: 65789eac6cb1dcb957f1407e
    type: comment
  author: vibranium
  content: "I don't know what's wrong here but the deployment is failing on sagemaker:\r\
    \n```\r\ndef deploy_mistral(\r\n):\r\n    hub = {\r\n        \"HF_MODEL_ID\":\
    \ \"mistralai/Mixtral-8x7B-v0.1\",\r\n        \"SM_NUM_GPUS\": json.dumps(8),\r\
    \n        \"DTYPE\": \"bfloat16\"\r\n    }\r\n\r\n    hf_model = HuggingFaceModel(\r\
    \n        image_uri=get_huggingface_llm_image_uri(\"huggingface\"),\r\n      \
    \  transformers_version='4.36.0',\r\n        env=hub,\r\n        name=\"mistral-model\"\
    ,\r\n        role=get_iam_role(),\r\n    )\r\n    predictor = hf_model.deploy(\r\
    \n        container_startup_health_check_timeout=300,\r\n        initial_instance_count=1,\r\
    \n        instance_type=\"ml.p4d.24xlarge\",\r\n        endpoint_name=\"mistral\"\
    ,\r\n    )\r\n\r\ndeploy_mistral()\r\n```\r\n\r\n```\r\n#033[2m2023-12-12T17:48:43.576706Z#033[0m\
    \ #033[31mERROR#033[0m #033[1mshard-manager#033[0m: #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
    \ Shard complete standard error output:\r\nTraceback (most recent call last):\r\
    \n  File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\n  \
    \  sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
    , line 83, in serve\r\n    server.serve(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
    , line 207, in serve\r\n    asyncio.run(\r\n  File \"/opt/conda/lib/python3.9/asyncio/runners.py\"\
    , line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/opt/conda/lib/python3.9/asyncio/base_events.py\"\
    , line 647, in run_until_complete\r\n    return future.result()\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/server.py\"\
    , line 159, in serve_inner\r\n    model = get_model(\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/models/__init__.py\"\
    , line 336, in get_model\r\n    raise ValueError(f\"Unsupported model type {model_type}\"\
    )\r\nValueError: Unsupported model type mixtral\r\n #033[2m#033[3mrank#033[0m#033[2m=#033[0m0#033[0m\r\
    \n#033[2m2023-12-12T17:48:43.674324Z#033[0m #033[31mERROR#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m\
    \ Shard 0 failed to start\r\n#033[2m2023-12-12T17:48:43.674344Z#033[0m #033[32m\
    \ INFO#033[0m #033[2mtext_generation_launcher#033[0m#033[2m:#033[0m Shutting down\
    \ shards\r\nError: ShardCannotStart\r\n```"
  created_at: 2023-12-12 17:55:56+00:00
  edited: false
  hidden: false
  id: 65789eac6cb1dcb957f1407e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
      fullname: Avanish Ranjan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vibranium
      type: user
    createdAt: '2023-12-12T17:59:23.000Z'
    data:
      edited: false
      editors:
      - vibranium
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.894381046295166
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
          fullname: Avanish Ranjan
          isHf: false
          isPro: false
          name: vibranium
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Nondzu&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Nondzu\">@<span class=\"\
          underline\">Nondzu</span></a></span>\n\n\t</span></span> or anyone from\
          \ the Mistral AI team can help?</p>\n"
        raw: '@Nondzu or anyone from the Mistral AI team can help?'
        updatedAt: '2023-12-12T17:59:23.405Z'
      numEdits: 0
      reactions: []
    id: 65789f7b9c5c26f96c0c89d7
    type: comment
  author: vibranium
  content: '@Nondzu or anyone from the Mistral AI team can help?'
  created_at: 2023-12-12 17:59:23+00:00
  edited: false
  hidden: false
  id: 65789f7b9c5c26f96c0c89d7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63729f35acef705233c87909/2ApbWLasMZLptlSbk9emj.png?w=200&h=200&f=face
      fullname: Kamil
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Nondzu
      type: user
    createdAt: '2023-12-12T18:23:23.000Z'
    data:
      edited: false
      editors:
      - Nondzu
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6444253921508789
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63729f35acef705233c87909/2ApbWLasMZLptlSbk9emj.png?w=200&h=200&f=face
          fullname: Kamil
          isHf: false
          isPro: false
          name: Nondzu
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;vibranium&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/vibranium\">@<span class=\"\
          underline\">vibranium</span></a></span>\n\n\t</span></span> upgrade your\
          \ transformers <code>pip install --upgrade git+https://github.com/huggingface/transformers.git\
          \ --no-cache</code></p>\n"
        raw: '@vibranium upgrade your transformers `pip install --upgrade git+https://github.com/huggingface/transformers.git
          --no-cache`'
        updatedAt: '2023-12-12T18:23:23.081Z'
      numEdits: 0
      reactions: []
    id: 6578a51b32150025acc68d1a
    type: comment
  author: Nondzu
  content: '@vibranium upgrade your transformers `pip install --upgrade git+https://github.com/huggingface/transformers.git
    --no-cache`'
  created_at: 2023-12-12 18:23:23+00:00
  edited: false
  hidden: false
  id: 6578a51b32150025acc68d1a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
      fullname: Avanish Ranjan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vibranium
      type: user
    createdAt: '2023-12-12T18:38:26.000Z'
    data:
      edited: true
      editors:
      - vibranium
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8039212822914124
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
          fullname: Avanish Ranjan
          isHf: false
          isPro: false
          name: vibranium
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Nondzu&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Nondzu\">@<span class=\"\
          underline\">Nondzu</span></a></span>\n\n\t</span></span> This is sagemaker\
          \ deployment. </p>\n<p>from sagemaker.huggingface import HuggingFaceModel<br>and\
          \ i already have this defined in hub:</p>\n<pre><code> transformers_version='4.36.0',\n\
          </code></pre>\n<p>Did I miss something?</p>\n"
        raw: "@Nondzu This is sagemaker deployment. \n\nfrom sagemaker.huggingface\
          \ import HuggingFaceModel\nand i already have this defined in hub:\n```\n\
          \ transformers_version='4.36.0',\n```\nDid I miss something?"
        updatedAt: '2023-12-12T20:38:59.821Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Nondzu
    id: 6578a8a2f7d98f6f61263bde
    type: comment
  author: vibranium
  content: "@Nondzu This is sagemaker deployment. \n\nfrom sagemaker.huggingface import\
    \ HuggingFaceModel\nand i already have this defined in hub:\n```\n transformers_version='4.36.0',\n\
    ```\nDid I miss something?"
  created_at: 2023-12-12 18:38:26+00:00
  edited: true
  hidden: false
  id: 6578a8a2f7d98f6f61263bde
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2a8dece24cbc1779eb906d5582573c49.svg
      fullname: Dong, Bo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BoDong
      type: user
    createdAt: '2023-12-13T03:37:38.000Z'
    data:
      edited: false
      editors:
      - BoDong
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8547833561897278
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2a8dece24cbc1779eb906d5582573c49.svg
          fullname: Dong, Bo
          isHf: false
          isPro: false
          name: BoDong
          type: user
        html: '<p>I face the same issue and also installed newest transformers from
          source. transformers commit id is f4db565b695582891e43a5e042e5d318e28f20b8<br>Could
          you provide the help?</p>

          '
        raw: 'I face the same issue and also installed newest transformers from source.
          transformers commit id is f4db565b695582891e43a5e042e5d318e28f20b8

          Could you provide the help?

          '
        updatedAt: '2023-12-13T03:37:38.783Z'
      numEdits: 0
      reactions: []
    id: 6579270276b6de79782b2e2a
    type: comment
  author: BoDong
  content: 'I face the same issue and also installed newest transformers from source.
    transformers commit id is f4db565b695582891e43a5e042e5d318e28f20b8

    Could you provide the help?

    '
  created_at: 2023-12-13 03:37:38+00:00
  edited: false
  hidden: false
  id: 6579270276b6de79782b2e2a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-12-13T09:10:56.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      identifiedLanguage:
        language: es
        probability: 0.17824403941631317
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: "<p>cc <span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/philschmid\"\
          >@<span class=\"underline\">philschmid</span></a></span>\n\n\t</span></span>\
          \ </p>\n"
        raw: 'cc @philschmid '
        updatedAt: '2023-12-13T09:10:56.969Z'
      numEdits: 0
      reactions: []
    id: 65797520283d9184138af9be
    type: comment
  author: ArthurZ
  content: 'cc @philschmid '
  created_at: 2023-12-13 09:10:56+00:00
  edited: false
  hidden: false
  id: 65797520283d9184138af9be
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-12-13T09:34:07.000Z'
    data:
      edited: false
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8079209327697754
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: '<p>Hey can you please take a look at <a rel="nofollow" href="https://www.philschmid.de/sagemaker-deploy-mixtral">https://www.philschmid.de/sagemaker-deploy-mixtral</a>.
          You need the container version 1.3.1 which is not yet available in sagemaker.
          </p>

          '
        raw: 'Hey can you please take a look at https://www.philschmid.de/sagemaker-deploy-mixtral.
          You need the container version 1.3.1 which is not yet available in sagemaker. '
        updatedAt: '2023-12-13T09:34:07.894Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - Yazurs
        - rcarrata
    id: 65797a8f1bf8e371c40e0ade
    type: comment
  author: philschmid
  content: 'Hey can you please take a look at https://www.philschmid.de/sagemaker-deploy-mixtral.
    You need the container version 1.3.1 which is not yet available in sagemaker. '
  created_at: 2023-12-13 09:34:07+00:00
  edited: false
  hidden: false
  id: 65797a8f1bf8e371c40e0ade
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
      fullname: Avanish Ranjan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vibranium
      type: user
    createdAt: '2023-12-13T18:22:08.000Z'
    data:
      edited: false
      editors:
      - vibranium
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9563968181610107
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
          fullname: Avanish Ranjan
          isHf: false
          isPro: false
          name: vibranium
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> Thanks! it\
          \ worked. Much appreciated for the help.</p>\n"
        raw: '@philschmid Thanks! it worked. Much appreciated for the help.'
        updatedAt: '2023-12-13T18:22:08.659Z'
      numEdits: 0
      reactions: []
    id: 6579f650aace025871329cc1
    type: comment
  author: vibranium
  content: '@philschmid Thanks! it worked. Much appreciated for the help.'
  created_at: 2023-12-13 18:22:08+00:00
  edited: false
  hidden: false
  id: 6579f650aace025871329cc1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-15T20:55:17.000Z'
    data:
      edited: true
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9724439978599548
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> I tried following\
          \ your tutorial but I keep getting the same issue as <span data-props=\"\
          {&quot;user&quot;:&quot;vibranium&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/vibranium\">@<span class=\"underline\">vibranium</span></a></span>\n\
          \n\t</span></span>. Any ideas as to what the issues might be?</p>\n"
        raw: '@philschmid I tried following your tutorial but I keep getting the same
          issue as @vibranium. Any ideas as to what the issues might be?

          '
        updatedAt: '2023-12-15T21:02:25.822Z'
      numEdits: 1
      reactions: []
    id: 657cbd35504da7f6f38908aa
    type: comment
  author: seabasshn
  content: '@philschmid I tried following your tutorial but I keep getting the same
    issue as @vibranium. Any ideas as to what the issues might be?

    '
  created_at: 2023-12-15 20:55:17+00:00
  edited: true
  hidden: false
  id: 657cbd35504da7f6f38908aa
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
      fullname: Avanish Ranjan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vibranium
      type: user
    createdAt: '2023-12-15T21:05:59.000Z'
    data:
      edited: true
      editors:
      - vibranium
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7503291368484497
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6234e9505017b4334a9ea6617ef2b25a.svg
          fullname: Avanish Ranjan
          isHf: false
          isPro: false
          name: vibranium
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;seabasshn&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/seabasshn\">@<span class=\"\
          underline\">seabasshn</span></a></span>\n\n\t</span></span> What instance\
          \ size you are using? In my case it works on ml.g5.48xlarge. Also, make\
          \ sure you are using below image:</p>\n<pre><code>763104351884.dkr.ecr.us-east-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0\n\
          </code></pre>\n<p>You would also need sagemaker version: <code>sagemaker==2.199.0</code></p>\n"
        raw: '@seabasshn What instance size you are using? In my case it works on
          ml.g5.48xlarge. Also, make sure you are using below image:

          ```

          763104351884.dkr.ecr.us-east-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0

          ```

          You would also need sagemaker version: `sagemaker==2.199.0`'
        updatedAt: '2023-12-15T21:07:18.638Z'
      numEdits: 1
      reactions: []
    id: 657cbfb7a982e9093f3f35b3
    type: comment
  author: vibranium
  content: '@seabasshn What instance size you are using? In my case it works on ml.g5.48xlarge.
    Also, make sure you are using below image:

    ```

    763104351884.dkr.ecr.us-east-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0

    ```

    You would also need sagemaker version: `sagemaker==2.199.0`'
  created_at: 2023-12-15 21:05:59+00:00
  edited: true
  hidden: false
  id: 657cbfb7a982e9093f3f35b3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-15T21:19:14.000Z'
    data:
      edited: false
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5381293296813965
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;vibranium&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/vibranium\">@<span class=\"\
          underline\">vibranium</span></a></span>\n\n\t</span></span> Yes, I am using\
          \ ml.g5.48xlarge and image: 763104351884.dkr.ecr.us-west-2.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0</p>\n"
        raw: '@vibranium Yes, I am using ml.g5.48xlarge and image: 763104351884.dkr.ecr.us-west-2.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0'
        updatedAt: '2023-12-15T21:19:14.941Z'
      numEdits: 0
      reactions: []
    id: 657cc2d2f010d76b6eeff2eb
    type: comment
  author: seabasshn
  content: '@vibranium Yes, I am using ml.g5.48xlarge and image: 763104351884.dkr.ecr.us-west-2.amazonaws.com/huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.1-gpu-py310-cu121-ubuntu20.04-v1.0'
  created_at: 2023-12-15 21:19:14+00:00
  edited: false
  hidden: false
  id: 657cc2d2f010d76b6eeff2eb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
      fullname: David Wilman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dwilman
      type: user
    createdAt: '2024-01-16T09:10:44.000Z'
    data:
      edited: false
      editors:
      - dwilman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.909506618976593
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
          fullname: David Wilman
          isHf: false
          isPro: false
          name: dwilman
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> - I have the\
          \ same problem trying to deploy, exactly following the instructions in your\
          \ blog post ( same image, same instance, etc ), from Sagemaker Studio (exactly\
          \ as <span data-props=\"{&quot;user&quot;:&quot;seabasshn&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/seabasshn\">@<span class=\"\
          underline\">seabasshn</span></a></span>\n\n\t</span></span> seems to experience\
          \ too). The Cloud logs state a problem starting the Shard.<br>Any ideas\
          \ what might be the problem??<br>Thanks!!!</p>\n"
        raw: "@philschmid - I have the same problem trying to deploy, exactly following\
          \ the instructions in your blog post ( same image, same instance, etc ),\
          \ from Sagemaker Studio (exactly as @seabasshn seems to experience too).\
          \ The Cloud logs state a problem starting the Shard. \nAny ideas what might\
          \ be the problem??\nThanks!!!"
        updatedAt: '2024-01-16T09:10:44.470Z'
      numEdits: 0
      reactions: []
    id: 65a64814fdc98e08a5074ca8
    type: comment
  author: dwilman
  content: "@philschmid - I have the same problem trying to deploy, exactly following\
    \ the instructions in your blog post ( same image, same instance, etc ), from\
    \ Sagemaker Studio (exactly as @seabasshn seems to experience too). The Cloud\
    \ logs state a problem starting the Shard. \nAny ideas what might be the problem??\n\
    Thanks!!!"
  created_at: 2024-01-16 09:10:44+00:00
  edited: false
  hidden: false
  id: 65a64814fdc98e08a5074ca8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
      fullname: David Wilman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dwilman
      type: user
    createdAt: '2024-01-16T13:29:41.000Z'
    data:
      edited: false
      editors:
      - dwilman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8142887353897095
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
          fullname: David Wilman
          isHf: false
          isPro: false
          name: dwilman
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> , <span data-props=\"\
          {&quot;user&quot;:&quot;seabasshn&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/seabasshn\">@<span class=\"underline\">seabasshn</span></a></span>\n\
          \n\t</span></span> : problem solved: I needed TGI v1.3.3<br>i.e. huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.3-gpu-py310-cu121-ubuntu20.04-v1.0<br>NOT\
          \ v1.3.1 as described in the demo.<br>Then it worked</p>\n"
        raw: '@philschmid , @seabasshn : problem solved: I needed TGI v1.3.3

          i.e. huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.3-gpu-py310-cu121-ubuntu20.04-v1.0

          NOT v1.3.1 as described in the demo.

          Then it worked

          '
        updatedAt: '2024-01-16T13:29:41.725Z'
      numEdits: 0
      reactions: []
    id: 65a684c5f1d4e7bccc329198
    type: comment
  author: dwilman
  content: '@philschmid , @seabasshn : problem solved: I needed TGI v1.3.3

    i.e. huggingface-pytorch-tgi-inference:2.1.1-tgi1.3.3-gpu-py310-cu121-ubuntu20.04-v1.0

    NOT v1.3.1 as described in the demo.

    Then it worked

    '
  created_at: 2024-01-16 13:29:41+00:00
  edited: false
  hidden: false
  id: 65a684c5f1d4e7bccc329198
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
      fullname: David Wilman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dwilman
      type: user
    createdAt: '2024-01-16T13:32:15.000Z'
    data:
      edited: false
      editors:
      - dwilman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.800874650478363
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/yJEF966WG2lk2urhk3TXy.jpeg?w=200&h=200&f=face
          fullname: David Wilman
          isHf: false
          isPro: false
          name: dwilman
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span>, are there\
          \ quantized versions of the Mixtral-8x7B-v0.1 model available yet over the\
          \ Hugging Face LLM DLC?</p>\n"
        raw: '@philschmid, are there quantized versions of the Mixtral-8x7B-v0.1 model
          available yet over the Hugging Face LLM DLC?

          '
        updatedAt: '2024-01-16T13:32:15.676Z'
      numEdits: 0
      reactions: []
    id: 65a6855fe94d40886a349183
    type: comment
  author: dwilman
  content: '@philschmid, are there quantized versions of the Mixtral-8x7B-v0.1 model
    available yet over the Hugging Face LLM DLC?

    '
  created_at: 2024-01-16 13:32:15+00:00
  edited: false
  hidden: false
  id: 65a6855fe94d40886a349183
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5ca63b357fc6758cd645dcfecf48bb8b.svg
      fullname: "Roberto Carratal\xE1"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rcarrata
      type: user
    createdAt: '2024-01-18T21:49:11.000Z'
    data:
      edited: false
      editors:
      - rcarrata
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9701003432273865
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5ca63b357fc6758cd645dcfecf48bb8b.svg
          fullname: "Roberto Carratal\xE1"
          isHf: false
          isPro: false
          name: rcarrata
          type: user
        html: "<p>it worked also for me with the TGI v1.3.3<br>Nice blog post <span\
          \ data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span>, very neat!</p>\n"
        raw: 'it worked also for me with the TGI v1.3.3

          Nice blog post @philschmid, very neat!'
        updatedAt: '2024-01-18T21:49:11.030Z'
      numEdits: 0
      reactions: []
    id: 65a99cd72bf3e0cbbfbe68f3
    type: comment
  author: rcarrata
  content: 'it worked also for me with the TGI v1.3.3

    Nice blog post @philschmid, very neat!'
  created_at: 2024-01-18 21:49:11+00:00
  edited: false
  hidden: false
  id: 65a99cd72bf3e0cbbfbe68f3
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 15
repo_id: mistralai/Mixtral-8x7B-v0.1
repo_type: model
status: open
target_branch: null
title: Deployment failing on Sagemaker
