!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ltcs15
conflicting_files: []
created_at: 2023-04-21 06:08:09+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bb075e4ff2f89b55ac73d472b2e844e8.svg
      fullname: TangShengSheng Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ltcs15
      type: user
    createdAt: '2023-04-21T07:08:09.000Z'
    data:
      edited: false
      editors:
      - ltcs15
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bb075e4ff2f89b55ac73d472b2e844e8.svg
          fullname: TangShengSheng Li
          isHf: false
          isPro: false
          name: ltcs15
          type: user
        html: '<p>currently only support for batch=1 and use_past=False;<br>and need
          to fix several model structure to support export into ONNX</p>

          '
        raw: 'currently only support for batch=1 and use_past=False;

          and need to fix several model structure to support export into ONNX'
        updatedAt: '2023-04-21T07:08:09.376Z'
      numEdits: 0
      reactions: []
    id: 644236592506ce731f155a0f
    type: comment
  author: ltcs15
  content: 'currently only support for batch=1 and use_past=False;

    and need to fix several model structure to support export into ONNX'
  created_at: 2023-04-21 06:08:09+00:00
  edited: false
  hidden: false
  id: 644236592506ce731f155a0f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/bb075e4ff2f89b55ac73d472b2e844e8.svg
      fullname: TangShengSheng Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ltcs15
      type: user
    createdAt: '2023-04-21T07:08:10.000Z'
    data:
      oid: c54139ab9dcdfbf649a7c1b567d24cfade826baa
      parents:
      - 35ca52301fbedee885b0838da5d15b7b47faa37c
      subject: add custom onnx export config
    id: 6442365a0000000000000000
    type: commit
  author: ltcs15
  created_at: 2023-04-21 06:08:10+00:00
  id: 6442365a0000000000000000
  oid: c54139ab9dcdfbf649a7c1b567d24cfade826baa
  summary: add custom onnx export config
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620081b68c2eb991da50d36c/RhK0obXGwfrxC8vKPbAKX.png?w=200&h=200&f=face
      fullname: K024
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: K024
      type: user
    createdAt: '2023-04-23T06:15:46.000Z'
    data:
      edited: true
      editors:
      - K024
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620081b68c2eb991da50d36c/RhK0obXGwfrxC8vKPbAKX.png?w=200&h=200&f=face
          fullname: K024
          isHf: false
          isPro: false
          name: K024
          type: user
        html: "<p>\u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\u4F60\u53EF\
          \u4EE5\u5C1D\u8BD5\u4E00\u4E0B <a rel=\"nofollow\" href=\"https://github.com/K024/chatglm-q\"\
          >https://github.com/K024/chatglm-q</a></p>\n<p><a href=\"https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\"\
          >https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8</a><br>\u6548\u679C\u4E0D\
          \u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE</p>\n"
        raw: "\u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\u4F60\u53EF\u4EE5\
          \u5C1D\u8BD5\u4E00\u4E0B https://github.com/K024/chatglm-q\n\nhttps://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\n\
          \u6548\u679C\u4E0D\u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE"
        updatedAt: '2023-05-07T08:42:44.952Z'
      numEdits: 2
      reactions: []
    id: 6444cd12d1460e859d1238ff
    type: comment
  author: K024
  content: "\u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\u4F60\u53EF\u4EE5\
    \u5C1D\u8BD5\u4E00\u4E0B https://github.com/K024/chatglm-q\n\nhttps://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\n\
    \u6548\u679C\u4E0D\u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE"
  created_at: 2023-04-23 05:15:46+00:00
  edited: true
  hidden: false
  id: 6444cd12d1460e859d1238ff
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9f3fbc8b54479b098d0831e979eb7e30.svg
      fullname: boris zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: boriszhang78
      type: user
    createdAt: '2023-05-18T02:11:06.000Z'
    data:
      edited: false
      editors:
      - boriszhang78
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9f3fbc8b54479b098d0831e979eb7e30.svg
          fullname: boris zhang
          isHf: false
          isPro: false
          name: boriszhang78
          type: user
        html: "<blockquote>\n<p>\u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\
          \u4F60\u53EF\u4EE5\u5C1D\u8BD5\u4E00\u4E0B <a rel=\"nofollow\" href=\"https://github.com/K024/chatglm-q\"\
          >https://github.com/K024/chatglm-q</a></p>\n<p><a href=\"https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\"\
          >https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8</a><br>\u6548\u679C\u4E0D\
          \u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE</p>\n</blockquote>\n\
          <p>\u7528<a rel=\"nofollow\" href=\"https://github.com/K024/chatglm-q/examples%E9%87%8C%E9%9D%A2%E7%9A%84\"\
          >https://github.com/K024/chatglm-q/examples\u91CC\u9762\u7684</a> onnx_export.py\u9488\
          \u5BF9int8\u6A21\u578B\u5BFC\u51FA\u540E\uFF0C\u4F7F\u7528<a href=\"https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\"\
          >https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8</a>  \u91CC\u9762\u7684\
          \u4EE3\u7801\u52A0\u8F7D\uFF0C\u542F\u52A8\u6210\u529F\uFF0C\u4F46\u662F\
          \u95EE\u9898\u56DE\u7B54\u4E0D\u6B63\u786E<br>\u73AF\u5883\uFF1A<br>centos7\uFF0C\
          cuda11.7\uFF0CPython 3.10.9<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/njiVycI_0EBjN6iR7zzQ0.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/njiVycI_0EBjN6iR7zzQ0.png\"\
          ></a><br>\u8FD0\u884C\u7ED3\u679C\uFF1A</p>\n<p><a rel=\"nofollow\" href=\"\
          https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/QQYLMB6ifO6tmIqIcd0UI.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/QQYLMB6ifO6tmIqIcd0UI.png\"\
          ></a></p>\n<p>onnx\u6A21\u578B\u5BFC\u51FA\u5217\u8868\uFF1A</p>\n<p><a\
          \ rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/NEqgAHk2jZaE_pDWgzjXT.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/NEqgAHk2jZaE_pDWgzjXT.png\"\
          ></a></p>\n<p><span data-props=\"{&quot;user&quot;:&quot;K024&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/K024\">@<span class=\"\
          underline\">K024</span></a></span>\n\n\t</span></span> \u5E2E\u5FD9\u770B\
          \u770B\u662F\u4EC0\u4E48\u95EE\u9898</p>\n"
        raw: "> \u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\u4F60\u53EF\
          \u4EE5\u5C1D\u8BD5\u4E00\u4E0B https://github.com/K024/chatglm-q\n> \n>\
          \ https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\n> \u6548\u679C\u4E0D\
          \u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE\n\n\u7528https://github.com/K024/chatglm-q/examples\u91CC\
          \u9762\u7684 onnx_export.py\u9488\u5BF9int8\u6A21\u578B\u5BFC\u51FA\u540E\
          \uFF0C\u4F7F\u7528https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8  \u91CC\
          \u9762\u7684\u4EE3\u7801\u52A0\u8F7D\uFF0C\u542F\u52A8\u6210\u529F\uFF0C\
          \u4F46\u662F\u95EE\u9898\u56DE\u7B54\u4E0D\u6B63\u786E\n\u73AF\u5883\uFF1A\
          \ncentos7\uFF0Ccuda11.7\uFF0CPython 3.10.9\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/njiVycI_0EBjN6iR7zzQ0.png)\n\
          \u8FD0\u884C\u7ED3\u679C\uFF1A\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/QQYLMB6ifO6tmIqIcd0UI.png)\n\
          \nonnx\u6A21\u578B\u5BFC\u51FA\u5217\u8868\uFF1A\n\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/NEqgAHk2jZaE_pDWgzjXT.png)\n\
          \n@K024 \u5E2E\u5FD9\u770B\u770B\u662F\u4EC0\u4E48\u95EE\u9898"
        updatedAt: '2023-05-18T02:11:06.244Z'
      numEdits: 0
      reactions: []
    id: 6465893a86e668ad22eb787b
    type: comment
  author: boriszhang78
  content: "> \u5199\u4E86\u4E00\u4EFD\u53C2\u8003\u4EE3\u7801\uFF0C\u4F60\u53EF\u4EE5\
    \u5C1D\u8BD5\u4E00\u4E0B https://github.com/K024/chatglm-q\n> \n> https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\n\
    > \u6548\u679C\u4E0D\u592A\u597D\uFF0C\u7B97\u5B50 GPU \u652F\u6301\u5F88\u5DEE\
    \n\n\u7528https://github.com/K024/chatglm-q/examples\u91CC\u9762\u7684 onnx_export.py\u9488\
    \u5BF9int8\u6A21\u578B\u5BFC\u51FA\u540E\uFF0C\u4F7F\u7528https://huggingface.co/K024/ChatGLM-6b-onnx-u8s8\
    \  \u91CC\u9762\u7684\u4EE3\u7801\u52A0\u8F7D\uFF0C\u542F\u52A8\u6210\u529F\uFF0C\
    \u4F46\u662F\u95EE\u9898\u56DE\u7B54\u4E0D\u6B63\u786E\n\u73AF\u5883\uFF1A\ncentos7\uFF0C\
    cuda11.7\uFF0CPython 3.10.9\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/njiVycI_0EBjN6iR7zzQ0.png)\n\
    \u8FD0\u884C\u7ED3\u679C\uFF1A\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/QQYLMB6ifO6tmIqIcd0UI.png)\n\
    \nonnx\u6A21\u578B\u5BFC\u51FA\u5217\u8868\uFF1A\n\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6462d5f6d1ccd517f469ea1f/NEqgAHk2jZaE_pDWgzjXT.png)\n\
    \n@K024 \u5E2E\u5FD9\u770B\u770B\u662F\u4EC0\u4E48\u95EE\u9898"
  created_at: 2023-05-18 01:11:06+00:00
  edited: false
  hidden: false
  id: 6465893a86e668ad22eb787b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620081b68c2eb991da50d36c/RhK0obXGwfrxC8vKPbAKX.png?w=200&h=200&f=face
      fullname: K024
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: K024
      type: user
    createdAt: '2023-05-18T06:28:45.000Z'
    data:
      edited: false
      editors:
      - K024
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/620081b68c2eb991da50d36c/RhK0obXGwfrxC8vKPbAKX.png?w=200&h=200&f=face
          fullname: K024
          isHf: false
          isPro: false
          name: K024
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;boriszhang78&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/boriszhang78\"\
          >@<span class=\"underline\">boriszhang78</span></a></span>\n\n\t</span></span>\
          \ \u6570\u503C\u95EE\u9898\u633A\u96BE\u8BF4\u7684\uFF0C\u4F60\u5148\u786E\
          \u8BA4\u4E0B\u6A21\u578B\u5728torch\u4E0B\u7684\u8F93\u51FA\uFF0C\u7136\u540E\
          \u8003\u8651\u5173\u6389<a rel=\"nofollow\" href=\"https://onnxruntime.ai/docs/performance/model-optimizations/graph-optimizations.html#offline-mode\"\
          >onnxruntime\u9ED8\u8BA4\u4F18\u5316</a>\u8BD5\u8BD5\u770B\u5427</p>\n"
        raw: "@boriszhang78 \u6570\u503C\u95EE\u9898\u633A\u96BE\u8BF4\u7684\uFF0C\
          \u4F60\u5148\u786E\u8BA4\u4E0B\u6A21\u578B\u5728torch\u4E0B\u7684\u8F93\u51FA\
          \uFF0C\u7136\u540E\u8003\u8651\u5173\u6389[onnxruntime\u9ED8\u8BA4\u4F18\
          \u5316](https://onnxruntime.ai/docs/performance/model-optimizations/graph-optimizations.html#offline-mode)\u8BD5\
          \u8BD5\u770B\u5427"
        updatedAt: '2023-05-18T06:28:45.395Z'
      numEdits: 0
      reactions: []
    id: 6465c59d3b99ed9970f1ffda
    type: comment
  author: K024
  content: "@boriszhang78 \u6570\u503C\u95EE\u9898\u633A\u96BE\u8BF4\u7684\uFF0C\u4F60\
    \u5148\u786E\u8BA4\u4E0B\u6A21\u578B\u5728torch\u4E0B\u7684\u8F93\u51FA\uFF0C\u7136\
    \u540E\u8003\u8651\u5173\u6389[onnxruntime\u9ED8\u8BA4\u4F18\u5316](https://onnxruntime.ai/docs/performance/model-optimizations/graph-optimizations.html#offline-mode)\u8BD5\
    \u8BD5\u770B\u5427"
  created_at: 2023-05-18 05:28:45+00:00
  edited: false
  hidden: false
  id: 6465c59d3b99ed9970f1ffda
  type: comment
is_pull_request: true
merge_commit_oid: null
num: 46
repo_id: THUDM/chatglm-6b
repo_type: model
status: open
target_branch: refs/heads/main
title: add custom onnx export config
