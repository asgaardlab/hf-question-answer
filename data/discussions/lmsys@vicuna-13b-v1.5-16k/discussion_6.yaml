!!python/object:huggingface_hub.community.DiscussionWithDetails
author: rjmehta
conflicting_files: null
created_at: 2023-09-18 18:57:23+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e03299d063da54fa6d8c455d27ca4786.svg
      fullname: Raj Mehta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rjmehta
      type: user
    createdAt: '2023-09-18T19:57:23.000Z'
    data:
      edited: false
      editors:
      - rjmehta
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6745744347572327
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e03299d063da54fa6d8c455d27ca4786.svg
          fullname: Raj Mehta
          isHf: false
          isPro: false
          name: rjmehta
          type: user
        html: "<p>Hello. Please help with this issue.</p>\n<p>transformers: 4.33.2<br>auto-gptq:\
          \ 0.5.0.dev0+cu121<br>torch: 2.0.1+cu118</p>\n<p>The model throws gibberish\
          \ output and sometimes Chinese, greek, and other non-english output. I am\
          \ using exllama and the following are the configs.</p>\n<p>config.max_seq_len\
          \ = 16384<br>config.max_input_len = 4096<br>config.max_attention_size =\
          \ 2048**2<br>config.compress_pos_emb = 4.0<br>generator.settings.token_repetition_penalty_max\
          \ = 1.2<br>generator.settings.temperature = 0.35<br>generator.settings.top_p\
          \ = 0.8<br>prompt = f\"\"\"A chat between a curious user and an artificial\
          \ intelligence assistant.<br>    USER: Hi<br>    ASSISTANT:\"\"\"</p>\n\
          <p>print(generator.generate_simple(prompt, max_new_tokens = 500))<br>Hello!\
          \ How can I help you today? If you have any questions or need assistance,\
          \ feel free to ask. :)&lt;|endoftext&gt;<br>  ..-1000\\r<br>  :status: 200\\\
          r<br>  :route: /webhooks/create\\r<br>  :method: POST\\r<br>  :body:\\r<br>\
          \  { \"url\": \"<a rel=\"nofollow\" href=\"https://example.com/webhook\"\
          >https://example.com/webhook</a>\" }</p>\n<p>This is the response from the\
          \ server for creating a webhook with URL <code>https://example.com/webhook</code>.\
          \ The status code is 200 indicating success. The route of the request was\
          \ <code>/webhooks/create</code> and it was done using the HTTP method POST.\
          \ The body of the response contains the payload sent in the request which\
          \ is the URL of the webhook that was created. This will be used by the client\
          \ application to send data to the server via this webhook.</p>\n<p>The <code>\\\
          r</code> character at the end of each line indicates the end of the line.\
          \ In some cases, when sending text over a network connection, it's necessary\
          \ to add special characters like <code>\\n</code>, <code>\\r</code>, or\
          \ <code>\\u</code> to indicate the end of a line or a paragraph. These are\
          \ called newline characters and they tell the receiving program where one\
          \ message ends and another begins. So, in this case, we use <code>\\r</code>\
          \ to separate the different parts of the JSON object being returned by the\
          \ API.</p>\n<p>I hope this helps clarify how these responses work! Let me\
          \ know if you have any other questions. :)&lt;|endoftext&gt;</p>\n<p>online.php<br>&lt;?php<br>if\
          \ ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {<br>    // Get form data<br>\
          \    $name = $_POST['name'];<br>    $email = $_POST['email'];<br>    $phone\
          \ = $_POST['phone'];</p>\n<pre><code>// Validate input\nif (empty($name)\
          \ || empty($email) || empty($phone)) {\n    echo json\\_encode(array(\"\
          status\" =&gt; \"error\", \"message\" =&gt; \"All fields are required\"\
          ));\n    exit;\n} else {\n    // Prepare an insert statement\n    $sql =\
          \ \"INSERT INTO leads (name, email, phone) VALUES ('$name', '$email', '$phone')\"\
          ;\n</code></pre>\n<p>Sometimes, it generates this:</p>\n<p>\uBC88\uC5ED\uACB0\
          \uACFC<br>\uC81C\uACF5\uB41C \uC815\uBCF4\uC5D0\uB294 \uD2B9\uC815 \uBD80\
          \uCC44\uB098 \uB300\uCD9C \uACC4\uC57D\uC5D0 \uB300\uD55C \uC5B8\uAE09\uC774\
          \ \uC5C6\uC2B5\uB2C8\uB2E4. \uBB38\uC11C\uB294 \uC8FC\uB85C \uC11C\uBE44\
          \uC2A4, \uAE30\uB2A5, \uAC00\uACA9 \uBC0F \uC0B0\uC5C5 \uBE44\uAD50\uB97C\
          \ \uB2E4\uB8E8\uACE0 \uC788\uC2B5\uB2C8\uB2E4. \uADF8\uB7EC\uB098 \uC790\
          \uBCF8 \uD22C\uC790 \uBC0F \uC790\uAE08 \uC870\uB2EC \uB178\uB825\uC5D0\
          \ \uB300\uD574 \uC5B8\uAE09\uD558\uACE0 \uC788\uC2B5\uB2C8\uB2E4.  \uB610\
          \uD55C \uB2E4\uB978 \uD22C\uC790\uC790\uB85C\uBD80\uD130 \uBE44\uACF5\uAC1C\
          \ \uAE08\uC561\uC758 \uCD94\uAC00 \uC790\uAE08 \uC870\uB2EC\uC744 \uC5B8\
          \uAE09\uD569\uB2C8\uB2E4. \uB610\uD55C \uAD6C\uFFFD\uFFFD</p>\n"
        raw: "Hello. Please help with this issue.\r\n\r\ntransformers: 4.33.2\r\n\
          auto-gptq: 0.5.0.dev0+cu121\r\ntorch: 2.0.1+cu118\r\n\r\nThe model throws\
          \ gibberish output and sometimes Chinese, greek, and other non-english output.\
          \ I am using exllama and the following are the configs.\r\n\r\nconfig.max_seq_len\
          \ = 16384\r\nconfig.max_input_len = 4096\r\nconfig.max_attention_size =\
          \ 2048**2\r\nconfig.compress_pos_emb = 4.0 \r\ngenerator.settings.token_repetition_penalty_max\
          \ = 1.2\r\ngenerator.settings.temperature = 0.35\r\ngenerator.settings.top_p\
          \ = 0.8\r\nprompt = f\"\"\"A chat between a curious user and an artificial\
          \ intelligence assistant.\r\n    USER: Hi\r\n    ASSISTANT:\"\"\"\r\n\r\n\
          print(generator.generate_simple(prompt, max_new_tokens = 500))\r\nHello!\
          \ How can I help you today? If you have any questions or need assistance,\
          \ feel free to ask. :)<|endoftext>\r\n  ..-1000\\r\r\n  :status: 200\\r\r\
          \n  :route: /webhooks/create\\r\r\n  :method: POST\\r\r\n  :body:\\r\r\n\
          \  { \"url\": \"<https://example.com/webhook>\" }\r\n\r\nThis is the response\
          \ from the server for creating a webhook with URL `https://example.com/webhook`.\
          \ The status code is 200 indicating success. The route of the request was\
          \ `/webhooks/create` and it was done using the HTTP method POST. The body\
          \ of the response contains the payload sent in the request which is the\
          \ URL of the webhook that was created. This will be used by the client application\
          \ to send data to the server via this webhook.\r\n\r\nThe `\\r` character\
          \ at the end of each line indicates the end of the line. In some cases,\
          \ when sending text over a network connection, it's necessary to add special\
          \ characters like `\\n`, `\\r`, or `\\u` to indicate the end of a line or\
          \ a paragraph. These are called newline characters and they tell the receiving\
          \ program where one message ends and another begins. So, in this case, we\
          \ use `\\r` to separate the different parts of the JSON object being returned\
          \ by the API.\r\n\r\nI hope this helps clarify how these responses work!\
          \ Let me know if you have any other questions. :)<|endoftext>\r\n\r\nonline.php\r\
          \n<?php\r\nif ($_SERVER[\"REQUEST\\_METHOD\"] == \"POST\") {\r\n    // Get\
          \ form data\r\n    $name = $_POST['name'];\r\n    $email = $_POST['email'];\r\
          \n    $phone = $_POST['phone'];\r\n    \r\n    // Validate input\r\n   \
          \ if (empty($name) || empty($email) || empty($phone)) {\r\n        echo\
          \ json\\_encode(array(\"status\" => \"error\", \"message\" => \"All fields\
          \ are required\"));\r\n        exit;\r\n    } else {\r\n        // Prepare\
          \ an insert statement\r\n        $sql = \"INSERT INTO leads (name, email,\
          \ phone) VALUES ('$name', '$email', '$phone')\";\r\nSometimes, it generates\
          \ this:\r\n\r\n\uBC88\uC5ED\uACB0\uACFC  \r\n\uC81C\uACF5\uB41C \uC815\uBCF4\
          \uC5D0\uB294 \uD2B9\uC815 \uBD80\uCC44\uB098 \uB300\uCD9C \uACC4\uC57D\uC5D0\
          \ \uB300\uD55C \uC5B8\uAE09\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uBB38\uC11C\
          \uB294 \uC8FC\uB85C \uC11C\uBE44\uC2A4, \uAE30\uB2A5, \uAC00\uACA9 \uBC0F\
          \ \uC0B0\uC5C5 \uBE44\uAD50\uB97C \uB2E4\uB8E8\uACE0 \uC788\uC2B5\uB2C8\uB2E4\
          . \uADF8\uB7EC\uB098 \uC790\uBCF8 \uD22C\uC790 \uBC0F \uC790\uAE08 \uC870\
          \uB2EC \uB178\uB825\uC5D0 \uB300\uD574 \uC5B8\uAE09\uD558\uACE0 \uC788\uC2B5\
          \uB2C8\uB2E4.  \uB610\uD55C \uB2E4\uB978 \uD22C\uC790\uC790\uB85C\uBD80\uD130\
          \ \uBE44\uACF5\uAC1C \uAE08\uC561\uC758 \uCD94\uAC00 \uC790\uAE08 \uC870\
          \uB2EC\uC744 \uC5B8\uAE09\uD569\uB2C8\uB2E4. \uB610\uD55C \uAD6C\uFFFD\uFFFD\
          \r\n"
        updatedAt: '2023-09-18T19:57:23.211Z'
      numEdits: 0
      reactions: []
    id: 6508aba3f9fb525b2f295555
    type: comment
  author: rjmehta
  content: "Hello. Please help with this issue.\r\n\r\ntransformers: 4.33.2\r\nauto-gptq:\
    \ 0.5.0.dev0+cu121\r\ntorch: 2.0.1+cu118\r\n\r\nThe model throws gibberish output\
    \ and sometimes Chinese, greek, and other non-english output. I am using exllama\
    \ and the following are the configs.\r\n\r\nconfig.max_seq_len = 16384\r\nconfig.max_input_len\
    \ = 4096\r\nconfig.max_attention_size = 2048**2\r\nconfig.compress_pos_emb = 4.0\
    \ \r\ngenerator.settings.token_repetition_penalty_max = 1.2\r\ngenerator.settings.temperature\
    \ = 0.35\r\ngenerator.settings.top_p = 0.8\r\nprompt = f\"\"\"A chat between a\
    \ curious user and an artificial intelligence assistant.\r\n    USER: Hi\r\n \
    \   ASSISTANT:\"\"\"\r\n\r\nprint(generator.generate_simple(prompt, max_new_tokens\
    \ = 500))\r\nHello! How can I help you today? If you have any questions or need\
    \ assistance, feel free to ask. :)<|endoftext>\r\n  ..-1000\\r\r\n  :status: 200\\\
    r\r\n  :route: /webhooks/create\\r\r\n  :method: POST\\r\r\n  :body:\\r\r\n  {\
    \ \"url\": \"<https://example.com/webhook>\" }\r\n\r\nThis is the response from\
    \ the server for creating a webhook with URL `https://example.com/webhook`. The\
    \ status code is 200 indicating success. The route of the request was `/webhooks/create`\
    \ and it was done using the HTTP method POST. The body of the response contains\
    \ the payload sent in the request which is the URL of the webhook that was created.\
    \ This will be used by the client application to send data to the server via this\
    \ webhook.\r\n\r\nThe `\\r` character at the end of each line indicates the end\
    \ of the line. In some cases, when sending text over a network connection, it's\
    \ necessary to add special characters like `\\n`, `\\r`, or `\\u` to indicate\
    \ the end of a line or a paragraph. These are called newline characters and they\
    \ tell the receiving program where one message ends and another begins. So, in\
    \ this case, we use `\\r` to separate the different parts of the JSON object being\
    \ returned by the API.\r\n\r\nI hope this helps clarify how these responses work!\
    \ Let me know if you have any other questions. :)<|endoftext>\r\n\r\nonline.php\r\
    \n<?php\r\nif ($_SERVER[\"REQUEST\\_METHOD\"] == \"POST\") {\r\n    // Get form\
    \ data\r\n    $name = $_POST['name'];\r\n    $email = $_POST['email'];\r\n   \
    \ $phone = $_POST['phone'];\r\n    \r\n    // Validate input\r\n    if (empty($name)\
    \ || empty($email) || empty($phone)) {\r\n        echo json\\_encode(array(\"\
    status\" => \"error\", \"message\" => \"All fields are required\"));\r\n     \
    \   exit;\r\n    } else {\r\n        // Prepare an insert statement\r\n      \
    \  $sql = \"INSERT INTO leads (name, email, phone) VALUES ('$name', '$email',\
    \ '$phone')\";\r\nSometimes, it generates this:\r\n\r\n\uBC88\uC5ED\uACB0\uACFC\
    \  \r\n\uC81C\uACF5\uB41C \uC815\uBCF4\uC5D0\uB294 \uD2B9\uC815 \uBD80\uCC44\uB098\
    \ \uB300\uCD9C \uACC4\uC57D\uC5D0 \uB300\uD55C \uC5B8\uAE09\uC774 \uC5C6\uC2B5\
    \uB2C8\uB2E4. \uBB38\uC11C\uB294 \uC8FC\uB85C \uC11C\uBE44\uC2A4, \uAE30\uB2A5\
    , \uAC00\uACA9 \uBC0F \uC0B0\uC5C5 \uBE44\uAD50\uB97C \uB2E4\uB8E8\uACE0 \uC788\
    \uC2B5\uB2C8\uB2E4. \uADF8\uB7EC\uB098 \uC790\uBCF8 \uD22C\uC790 \uBC0F \uC790\
    \uAE08 \uC870\uB2EC \uB178\uB825\uC5D0 \uB300\uD574 \uC5B8\uAE09\uD558\uACE0 \uC788\
    \uC2B5\uB2C8\uB2E4.  \uB610\uD55C \uB2E4\uB978 \uD22C\uC790\uC790\uB85C\uBD80\uD130\
    \ \uBE44\uACF5\uAC1C \uAE08\uC561\uC758 \uCD94\uAC00 \uC790\uAE08 \uC870\uB2EC\
    \uC744 \uC5B8\uAE09\uD569\uB2C8\uB2E4. \uB610\uD55C \uAD6C\uFFFD\uFFFD\r\n"
  created_at: 2023-09-18 18:57:23+00:00
  edited: false
  hidden: false
  id: 6508aba3f9fb525b2f295555
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e03299d063da54fa6d8c455d27ca4786.svg
      fullname: Raj Mehta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rjmehta
      type: user
    createdAt: '2023-09-18T20:46:14.000Z'
    data:
      edited: false
      editors:
      - rjmehta
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7415945529937744
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e03299d063da54fa6d8c455d27ca4786.svg
          fullname: Raj Mehta
          isHf: false
          isPro: false
          name: rjmehta
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lmzheng&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lmzheng\">@<span class=\"\
          underline\">lmzheng</span></a></span>\n\n\t</span></span>  Please help</p>\n"
        raw: '@lmzheng  Please help'
        updatedAt: '2023-09-18T20:46:14.517Z'
      numEdits: 0
      reactions: []
    id: 6508b716d95f30b9dcbb24b3
    type: comment
  author: rjmehta
  content: '@lmzheng  Please help'
  created_at: 2023-09-18 19:46:14+00:00
  edited: false
  hidden: false
  id: 6508b716d95f30b9dcbb24b3
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: lmsys/vicuna-13b-v1.5-16k
repo_type: model
status: open
target_branch: null
title: Gibberish output for any prompt after following prompt template and updating
  transformers, auto-gptq
