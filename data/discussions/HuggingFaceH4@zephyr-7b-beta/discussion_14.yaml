!!python/object:huggingface_hub.community.DiscussionWithDetails
author: EviIgenius
conflicting_files: null
created_at: 2023-11-02 05:54:14+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e36af286cce2ea9f68a5f25e67c5ffb3.svg
      fullname: Dev
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: EviIgenius
      type: user
    createdAt: '2023-11-02T06:54:14.000Z'
    data:
      edited: false
      editors:
      - EviIgenius
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.44275882840156555
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e36af286cce2ea9f68a5f25e67c5ffb3.svg
          fullname: Dev
          isHf: false
          isPro: false
          name: EviIgenius
          type: user
        html: '<p>I used autotrain to load and fine tune the model , but I faced this
          error "Please specify <code>target_modules</code> in <code>peft_config</code>"<br>any
          idea how to relsove it?</p>

          <blockquote>

          <p>ERROR   train has failed due to an exception:<br>ERROR   Traceback (most
          recent call last):<br>  File "/usr/local/lib/python3.10/dist-packages/autotrain/utils.py",
          line 280, in wrapper<br>    return func(*args, **kwargs)<br>  File "/usr/local/lib/python3.10/dist-packages/autotrain/trainers/clm/<strong>main</strong>.py",
          line 226, in train<br>    model = get_peft_model(model, peft_config)<br>  File
          "/usr/local/lib/python3.10/dist-packages/peft/mapping.py", line 106, in
          get_peft_model<br>    return MODEL_TYPE_TO_PEFT_MODEL_MAPPING[peft_config.task_type](model,
          peft_config, adapter_name=adapter_name)<br>  File "/usr/local/lib/python3.10/dist-packages/peft/peft_model.py",
          line 889, in <strong>init</strong><br>    super().<strong>init</strong>(model,
          peft_config, adapter_name)<br>  File "/usr/local/lib/python3.10/dist-packages/peft/peft_model.py",
          line 111, in <strong>init</strong><br>    self.base_model = PEFT_TYPE_TO_MODEL_MAPPING[peft_config.peft_type](<br>  File
          "/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py", line 274,
          in __init__<br>    super().<strong>init</strong>(model, config, adapter_name)<br>  File
          "/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py", line
          88, in <strong>init</strong><br>    self.inject_adapter(self.model, adapter_name)<br>  File
          "/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py", line
          205, in inject_adapter<br>    peft_config = self._prepare_adapter_config(peft_config,
          model_config)<br>  File "/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py",
          line 550, in _prepare_adapter_config<br>    raise ValueError("Please specify
          <code>target_modules</code> in <code>peft_config</code>")<br>ValueError:
          Please specify <code>target_modules</code> in <code>peft_config</code></p>

          </blockquote>

          '
        raw: "I used autotrain to load and fine tune the model , but I faced this\
          \ error \"Please specify `target_modules` in `peft_config`\"\r\nany idea\
          \ how to relsove it?\r\n\r\n> ERROR   train has failed due to an exception:\r\
          \n> ERROR   Traceback (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/autotrain/utils.py\"\
          , line 280, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"\
          /usr/local/lib/python3.10/dist-packages/autotrain/trainers/clm/__main__.py\"\
          , line 226, in train\r\n    model = get_peft_model(model, peft_config)\r\
          \n  File \"/usr/local/lib/python3.10/dist-packages/peft/mapping.py\", line\
          \ 106, in get_peft_model\r\n    return MODEL_TYPE_TO_PEFT_MODEL_MAPPING[peft_config.task_type](model,\
          \ peft_config, adapter_name=adapter_name)\r\n  File \"/usr/local/lib/python3.10/dist-packages/peft/peft_model.py\"\
          , line 889, in __init__\r\n    super().__init__(model, peft_config, adapter_name)\r\
          \n  File \"/usr/local/lib/python3.10/dist-packages/peft/peft_model.py\"\
          , line 111, in __init__\r\n    self.base_model = PEFT_TYPE_TO_MODEL_MAPPING[peft_config.peft_type](\r\
          \n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py\"\
          , line 274, in __init__\r\n    super().__init__(model, config, adapter_name)\r\
          \n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py\"\
          , line 88, in __init__\r\n    self.inject_adapter(self.model, adapter_name)\r\
          \n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py\"\
          , line 205, in inject_adapter\r\n    peft_config = self._prepare_adapter_config(peft_config,\
          \ model_config)\r\n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py\"\
          , line 550, in _prepare_adapter_config\r\n    raise ValueError(\"Please\
          \ specify `target_modules` in `peft_config`\")\r\nValueError: Please specify\
          \ `target_modules` in `peft_config`"
        updatedAt: '2023-11-02T06:54:14.995Z'
      numEdits: 0
      reactions: []
    id: 654347962997b38f4fa671b1
    type: comment
  author: EviIgenius
  content: "I used autotrain to load and fine tune the model , but I faced this error\
    \ \"Please specify `target_modules` in `peft_config`\"\r\nany idea how to relsove\
    \ it?\r\n\r\n> ERROR   train has failed due to an exception:\r\n> ERROR   Traceback\
    \ (most recent call last):\r\n  File \"/usr/local/lib/python3.10/dist-packages/autotrain/utils.py\"\
    , line 280, in wrapper\r\n    return func(*args, **kwargs)\r\n  File \"/usr/local/lib/python3.10/dist-packages/autotrain/trainers/clm/__main__.py\"\
    , line 226, in train\r\n    model = get_peft_model(model, peft_config)\r\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/peft/mapping.py\", line 106, in get_peft_model\r\
    \n    return MODEL_TYPE_TO_PEFT_MODEL_MAPPING[peft_config.task_type](model, peft_config,\
    \ adapter_name=adapter_name)\r\n  File \"/usr/local/lib/python3.10/dist-packages/peft/peft_model.py\"\
    , line 889, in __init__\r\n    super().__init__(model, peft_config, adapter_name)\r\
    \n  File \"/usr/local/lib/python3.10/dist-packages/peft/peft_model.py\", line\
    \ 111, in __init__\r\n    self.base_model = PEFT_TYPE_TO_MODEL_MAPPING[peft_config.peft_type](\r\
    \n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py\", line\
    \ 274, in __init__\r\n    super().__init__(model, config, adapter_name)\r\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py\", line\
    \ 88, in __init__\r\n    self.inject_adapter(self.model, adapter_name)\r\n  File\
    \ \"/usr/local/lib/python3.10/dist-packages/peft/tuners/tuners_utils.py\", line\
    \ 205, in inject_adapter\r\n    peft_config = self._prepare_adapter_config(peft_config,\
    \ model_config)\r\n  File \"/usr/local/lib/python3.10/dist-packages/peft/tuners/lora.py\"\
    , line 550, in _prepare_adapter_config\r\n    raise ValueError(\"Please specify\
    \ `target_modules` in `peft_config`\")\r\nValueError: Please specify `target_modules`\
    \ in `peft_config`"
  created_at: 2023-11-02 05:54:14+00:00
  edited: false
  hidden: false
  id: 654347962997b38f4fa671b1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dbed75557bb804124f537221e67d39db.svg
      fullname: Hannah Bernstein
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hannahbernstein
      type: user
    createdAt: '2023-11-07T22:51:21.000Z'
    data:
      edited: false
      editors:
      - hannahbernstein
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.2743629217147827
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dbed75557bb804124f537221e67d39db.svg
          fullname: Hannah Bernstein
          isHf: false
          isPro: false
          name: hannahbernstein
          type: user
        html: '<p>Make sure to add the LoRA Target Modules to be trained --target-modules
          q_proj, v_proj</p>

          '
        raw: Make sure to add the LoRA Target Modules to be trained --target-modules
          q_proj, v_proj
        updatedAt: '2023-11-07T22:51:21.038Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Maani
    id: 654abf69c70ba116b12ad76c
    type: comment
  author: hannahbernstein
  content: Make sure to add the LoRA Target Modules to be trained --target-modules
    q_proj, v_proj
  created_at: 2023-11-07 22:51:21+00:00
  edited: false
  hidden: false
  id: 654abf69c70ba116b12ad76c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 14
repo_id: HuggingFaceH4/zephyr-7b-beta
repo_type: model
status: open
target_branch: null
title: Error in fine tuning
