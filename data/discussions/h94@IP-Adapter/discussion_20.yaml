!!python/object:huggingface_hub.community.DiscussionWithDetails
author: victorthoulouze
conflicting_files: null
created_at: 2023-12-10 14:18:27+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/da0cf939973364259c5ce3c3b47e1ebd.svg
      fullname: Thoulouze
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: victorthoulouze
      type: user
    createdAt: '2023-12-10T14:18:27.000Z'
    data:
      edited: true
      editors:
      - victorthoulouze
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.33754584193229675
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/da0cf939973364259c5ce3c3b47e1ebd.svg
          fullname: Thoulouze
          isHf: false
          isPro: false
          name: victorthoulouze
          type: user
        html: '<p>Hi Dear community, </p>

          <p>I am trying to use the IPmodel on M2 Macbook. But i have the same error
          over and over :<br>RuntimeError: Expected query, key, and value to have
          the same dtype, but got query.dtype: c10::Half key.dtype: float and value.dtype:
          float instead.</p>

          <p>I changed the webui-macos-env.sh and it works : </p>

          <p>export COMMANDLINE_ARGS="--skip-torch-cuda-test --upcast-sampling --no-half-vae
          --no-half --use-cpu interrogate --opt-sub-quad-attention --medvram --disable-safe-unpickle"</p>

          '
        raw: "Hi Dear community, \n\nI am trying to use the IPmodel on M2 Macbook.\
          \ But i have the same error over and over : \nRuntimeError: Expected query,\
          \ key, and value to have the same dtype, but got query.dtype: c10::Half\
          \ key.dtype: float and value.dtype: float instead.\n\nI changed the webui-macos-env.sh\
          \ and it works : \n\nexport COMMANDLINE_ARGS=\"--skip-torch-cuda-test --upcast-sampling\
          \ --no-half-vae --no-half --use-cpu interrogate --opt-sub-quad-attention\
          \ --medvram --disable-safe-unpickle\""
        updatedAt: '2023-12-10T14:28:05.791Z'
      numEdits: 2
      reactions: []
    id: 6575c8b3d7f487de5ffabf10
    type: comment
  author: victorthoulouze
  content: "Hi Dear community, \n\nI am trying to use the IPmodel on M2 Macbook. But\
    \ i have the same error over and over : \nRuntimeError: Expected query, key, and\
    \ value to have the same dtype, but got query.dtype: c10::Half key.dtype: float\
    \ and value.dtype: float instead.\n\nI changed the webui-macos-env.sh and it works\
    \ : \n\nexport COMMANDLINE_ARGS=\"--skip-torch-cuda-test --upcast-sampling --no-half-vae\
    \ --no-half --use-cpu interrogate --opt-sub-quad-attention --medvram --disable-safe-unpickle\""
  created_at: 2023-12-10 14:18:27+00:00
  edited: true
  hidden: false
  id: 6575c8b3d7f487de5ffabf10
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 20
repo_id: h94/IP-Adapter
repo_type: model
status: open
target_branch: null
title: 'Error "Half key.dtype: float and value.dtype: float instead"'
