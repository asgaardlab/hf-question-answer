!!python/object:huggingface_hub.community.DiscussionWithDetails
author: hkad98
conflicting_files: null
created_at: 2022-08-13 14:57:37+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-13T15:57:37.000Z'
    data:
      edited: false
      editors:
      - hkad98
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
          fullname: Jan Kadlec
          isHf: false
          isPro: false
          name: hkad98
          type: user
        html: "<p>Hello Community,<br>I was exploring NLLB, but unfortunately, I encountered\
          \ some issues during translations. The description says that the maximum\
          \ input lengths should not exceed 512 tokens because they did not train\
          \ the model on the longer sequences. So I tried to translate a text, but\
          \ unfortunately, the model translated only a part of the text even though\
          \ the tokenized text does not exceed 512 tokens. The text did not exceed\
          \ 512 tokens and splitting the text into sentences worked. So I am wondering\
          \ if anyone encountered something similar if yes, how did you solve it?\
          \ </p>\n<pre><code class=\"language-python\"><span class=\"hljs-keyword\"\
          >from</span> transformers <span class=\"hljs-keyword\">import</span> AutoTokenizer,\
          \ AutoModelForSeq2SeqLM, pipeline\n\nmodel = AutoModelForSeq2SeqLM.from_pretrained(<span\
          \ class=\"hljs-string\">\"facebook/nllb-200-distilled-600M\"</span>)\ntokenizer\
          \ = AutoTokenizer.from_pretrained(<span class=\"hljs-string\">\"facebook/nllb-200-distilled-600M\"\
          </span>)\n\ntranslator = pipeline(<span class=\"hljs-string\">'translation'</span>,\
          \ model=model, tokenizer=tokenizer, src_lang=<span class=\"hljs-string\"\
          >\"ces_Latn\"</span>, tgt_lang=<span class=\"hljs-string\">'eng_Latn'</span>)\n\
          translator(<span class=\"hljs-string\">\"Zuzka bydl\xED v panel\xE1ku na\
          \ 9. podla\u017E\xED. Ani\u010Dka bydl\xED o 3 podla\u017E\xED v\xFD\u0161\
          e. Na kter\xE9m podla\u017E\xED bydl\xED Ani\u010Dka?\"</span>)\n<span class=\"\
          hljs-comment\"># [{'translation_text': 'Zuzka lives in a boarding house\
          \ on the ninth floor, Ani\u010Dka lives three floors up.'}]</span>\n</code></pre>\n\
          <pre><code class=\"language-python\">translator([<span class=\"hljs-string\"\
          >\"Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED\
          \ o 3 podla\u017E\xED v\xFD\u0161e.\"</span>, <span class=\"hljs-string\"\
          >\"Na kter\xE9m podla\u017E\xED bydl\xED Ani\u010Dka?\"</span>])\n<span\
          \ class=\"hljs-comment\"># [{'translation_text': 'Zuzka lives in a boarding\
          \ house on the ninth floor, and Ani\u010Dka lives three floors up.'}, {'translation_text':\
          \ 'What floor does Anicka live on?'}]</span>\n</code></pre>\n"
        raw: "Hello Community,\r\nI was exploring NLLB, but unfortunately, I encountered\
          \ some issues during translations. The description says that the maximum\
          \ input lengths should not exceed 512 tokens because they did not train\
          \ the model on the longer sequences. So I tried to translate a text, but\
          \ unfortunately, the model translated only a part of the text even though\
          \ the tokenized text does not exceed 512 tokens. The text did not exceed\
          \ 512 tokens and splitting the text into sentences worked. So I am wondering\
          \ if anyone encountered something similar if yes, how did you solve it?\
          \ \r\n\r\n```python\r\nfrom transformers import AutoTokenizer, AutoModelForSeq2SeqLM,\
          \ pipeline\r\n\r\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"facebook/nllb-200-distilled-600M\"\
          )\r\ntokenizer = AutoTokenizer.from_pretrained(\"facebook/nllb-200-distilled-600M\"\
          )\r\n\r\ntranslator = pipeline('translation', model=model, tokenizer=tokenizer,\
          \ src_lang=\"ces_Latn\", tgt_lang='eng_Latn')\r\ntranslator(\"Zuzka bydl\xED\
          \ v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED o 3 podla\u017E\
          \xED v\xFD\u0161e. Na kter\xE9m podla\u017E\xED bydl\xED Ani\u010Dka?\"\
          )\r\n# [{'translation_text': 'Zuzka lives in a boarding house on the ninth\
          \ floor, Ani\u010Dka lives three floors up.'}]\r\n```\r\n```python\r\ntranslator([\"\
          Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED\
          \ o 3 podla\u017E\xED v\xFD\u0161e.\", \"Na kter\xE9m podla\u017E\xED bydl\xED\
          \ Ani\u010Dka?\"])\r\n# [{'translation_text': 'Zuzka lives in a boarding\
          \ house on the ninth floor, and Ani\u010Dka lives three floors up.'}, {'translation_text':\
          \ 'What floor does Anicka live on?'}]\r\n```"
        updatedAt: '2022-08-13T15:57:37.867Z'
      numEdits: 0
      reactions: []
    id: 62f7c9f1fe21cc48751f1c84
    type: comment
  author: hkad98
  content: "Hello Community,\r\nI was exploring NLLB, but unfortunately, I encountered\
    \ some issues during translations. The description says that the maximum input\
    \ lengths should not exceed 512 tokens because they did not train the model on\
    \ the longer sequences. So I tried to translate a text, but unfortunately, the\
    \ model translated only a part of the text even though the tokenized text does\
    \ not exceed 512 tokens. The text did not exceed 512 tokens and splitting the\
    \ text into sentences worked. So I am wondering if anyone encountered something\
    \ similar if yes, how did you solve it? \r\n\r\n```python\r\nfrom transformers\
    \ import AutoTokenizer, AutoModelForSeq2SeqLM, pipeline\r\n\r\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"\
    facebook/nllb-200-distilled-600M\")\r\ntokenizer = AutoTokenizer.from_pretrained(\"\
    facebook/nllb-200-distilled-600M\")\r\n\r\ntranslator = pipeline('translation',\
    \ model=model, tokenizer=tokenizer, src_lang=\"ces_Latn\", tgt_lang='eng_Latn')\r\
    \ntranslator(\"Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka\
    \ bydl\xED o 3 podla\u017E\xED v\xFD\u0161e. Na kter\xE9m podla\u017E\xED bydl\xED\
    \ Ani\u010Dka?\")\r\n# [{'translation_text': 'Zuzka lives in a boarding house\
    \ on the ninth floor, Ani\u010Dka lives three floors up.'}]\r\n```\r\n```python\r\
    \ntranslator([\"Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010D\
    ka bydl\xED o 3 podla\u017E\xED v\xFD\u0161e.\", \"Na kter\xE9m podla\u017E\xED\
    \ bydl\xED Ani\u010Dka?\"])\r\n# [{'translation_text': 'Zuzka lives in a boarding\
    \ house on the ninth floor, and Ani\u010Dka lives three floors up.'}, {'translation_text':\
    \ 'What floor does Anicka live on?'}]\r\n```"
  created_at: 2022-08-13 14:57:37+00:00
  edited: false
  hidden: false
  id: 62f7c9f1fe21cc48751f1c84
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2022-08-16T10:46:11.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;hkad98&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/hkad98\">@<span class=\"\
          underline\">hkad98</span></a></span>\n\n\t</span></span>!</p>\n<p>This isn't\
          \ a bug, but the <code>generate</code> method only outputs a specific number\
          \ of tokens. You can specify the <code>min_length</code> and <code>max_length</code>\
          \ parameters to get more or fewer tokens out.</p>\n<p>Here, for example,\
          \ by specifying I want a minimum number of tokens returned of 30:</p>\n\
          <pre><code class=\"language-py\"><span class=\"hljs-meta\">&gt;&gt;&gt;\
          \ </span>translator(<span class=\"hljs-string\">\"Zuzka bydl\xED v panel\xE1\
          ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED o 3 podla\u017E\xED v\xFD\
          \u0161e. Na kter\xE9m podla\u017E\xED bydl\xED Ani\u010Dka?\"</span>, min_length=<span\
          \ class=\"hljs-number\">30</span>)\nOut[<span class=\"hljs-number\">8</span>]:\
          \ [{<span class=\"hljs-string\">'translation_text'</span>: <span class=\"\
          hljs-string\">'Zuzka lives in a boarding house on the ninth floor, Ani\u010D\
          ka lives three floors up. What floor does Ani\u010Dka live on?'</span>}]\n\
          </code></pre>\n"
        raw: "Hey @hkad98!\n\nThis isn't a bug, but the `generate` method only outputs\
          \ a specific number of tokens. You can specify the `min_length` and `max_length`\
          \ parameters to get more or fewer tokens out.\n\nHere, for example, by specifying\
          \ I want a minimum number of tokens returned of 30:\n\n```py\n>>> translator(\"\
          Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED\
          \ o 3 podla\u017E\xED v\xFD\u0161e. Na kter\xE9m podla\u017E\xED bydl\xED\
          \ Ani\u010Dka?\", min_length=30)\nOut[8]: [{'translation_text': 'Zuzka lives\
          \ in a boarding house on the ninth floor, Ani\u010Dka lives three floors\
          \ up. What floor does Ani\u010Dka live on?'}]\n```"
        updatedAt: '2022-08-16T10:46:11.202Z'
      numEdits: 0
      reactions: []
    id: 62fb7573fcce44435d7f22ef
    type: comment
  author: lysandre
  content: "Hey @hkad98!\n\nThis isn't a bug, but the `generate` method only outputs\
    \ a specific number of tokens. You can specify the `min_length` and `max_length`\
    \ parameters to get more or fewer tokens out.\n\nHere, for example, by specifying\
    \ I want a minimum number of tokens returned of 30:\n\n```py\n>>> translator(\"\
    Zuzka bydl\xED v panel\xE1ku na 9. podla\u017E\xED. Ani\u010Dka bydl\xED o 3 podla\u017E\
    \xED v\xFD\u0161e. Na kter\xE9m podla\u017E\xED bydl\xED Ani\u010Dka?\", min_length=30)\n\
    Out[8]: [{'translation_text': 'Zuzka lives in a boarding house on the ninth floor,\
    \ Ani\u010Dka lives three floors up. What floor does Ani\u010Dka live on?'}]\n\
    ```"
  created_at: 2022-08-16 09:46:11+00:00
  edited: false
  hidden: false
  id: 62fb7573fcce44435d7f22ef
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-16T11:16:06.000Z'
    data:
      edited: false
      editors:
      - hkad98
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
          fullname: Jan Kadlec
          isHf: false
          isPro: false
          name: hkad98
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lysandre\"\
          >@<span class=\"underline\">lysandre</span></a></span>\n\n\t</span></span></p>\n\
          <p>Thank you for your clarification! Would you please point me to documentation\
          \ for other parameters that can be passed to the <em>generate</em> method\
          \ (I only found <a href=\"https://huggingface.co/docs/transformers/main/en/model_doc/nllb#nllb\"\
          >this</a>)? I am new to hugging face transformers.</p>\n"
        raw: 'Hi @lysandre


          Thank you for your clarification! Would you please point me to documentation
          for other parameters that can be passed to the *generate* method (I only
          found [this](https://huggingface.co/docs/transformers/main/en/model_doc/nllb#nllb))?
          I am new to hugging face transformers.'
        updatedAt: '2022-08-16T11:16:06.170Z'
      numEdits: 0
      reactions: []
    id: 62fb7c767a577e83cccac76c
    type: comment
  author: hkad98
  content: 'Hi @lysandre


    Thank you for your clarification! Would you please point me to documentation for
    other parameters that can be passed to the *generate* method (I only found [this](https://huggingface.co/docs/transformers/main/en/model_doc/nllb#nllb))?
    I am new to hugging face transformers.'
  created_at: 2022-08-16 10:16:06+00:00
  edited: false
  hidden: false
  id: 62fb7c767a577e83cccac76c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-16T11:16:17.000Z'
    data:
      from: '[QUESTION, BUG?] model translates only a part of the text'
      to: '[QUESTION] model translates only a part of the text'
    id: 62fb7c81ce54be18b0964021
    type: title-change
  author: hkad98
  created_at: 2022-08-16 10:16:17+00:00
  id: 62fb7c81ce54be18b0964021
  new_title: '[QUESTION] model translates only a part of the text'
  old_title: '[QUESTION, BUG?] model translates only a part of the text'
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2022-08-16T11:31:49.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>Yes! Here is the documentation specific to text-generation: <a href=\"\
          https://huggingface.co/docs/transformers/main/en/main_classes/text_generation\"\
          >Text Generation</a>.</p>\n<p>You will be interested in the <a href=\"https://huggingface.co/docs/transformers/main/en/main_classes/text_generation#transformers.generation_utils.GenerationMixin.generate\"\
          >generate</a> method in particular.</p>\n<p>We're currently reworking this\
          \ page, so any feedback is welcome! cc <span data-props=\"{&quot;user&quot;:&quot;patrickvonplaten&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/patrickvonplaten\"\
          >@<span class=\"underline\">patrickvonplaten</span></a></span>\n\n\t</span></span></p>\n"
        raw: 'Yes! Here is the documentation specific to text-generation: [Text Generation](https://huggingface.co/docs/transformers/main/en/main_classes/text_generation).


          You will be interested in the [generate](https://huggingface.co/docs/transformers/main/en/main_classes/text_generation#transformers.generation_utils.GenerationMixin.generate)
          method in particular.


          We''re currently reworking this page, so any feedback is welcome! cc @patrickvonplaten'
        updatedAt: '2022-08-16T11:31:49.748Z'
      numEdits: 0
      reactions: []
    id: 62fb8025f60cc3ae073a12bf
    type: comment
  author: lysandre
  content: 'Yes! Here is the documentation specific to text-generation: [Text Generation](https://huggingface.co/docs/transformers/main/en/main_classes/text_generation).


    You will be interested in the [generate](https://huggingface.co/docs/transformers/main/en/main_classes/text_generation#transformers.generation_utils.GenerationMixin.generate)
    method in particular.


    We''re currently reworking this page, so any feedback is welcome! cc @patrickvonplaten'
  created_at: 2022-08-16 10:31:49+00:00
  edited: false
  hidden: false
  id: 62fb8025f60cc3ae073a12bf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-20T15:03:14.000Z'
    data:
      edited: false
      editors:
      - hkad98
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
          fullname: Jan Kadlec
          isHf: false
          isPro: false
          name: hkad98
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lysandre&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lysandre\">@<span class=\"\
          underline\">lysandre</span></a></span>\n\n\t</span></span> Wow! Thank you\
          \ so much. It is really useful.</p>\n"
        raw: '@lysandre Wow! Thank you so much. It is really useful.'
        updatedAt: '2022-08-20T15:03:14.544Z'
      numEdits: 0
      reactions: []
    id: 6300f7b259ab5d9dc09c9f0a
    type: comment
  author: hkad98
  content: '@lysandre Wow! Thank you so much. It is really useful.'
  created_at: 2022-08-20 14:03:14+00:00
  edited: false
  hidden: false
  id: 6300f7b259ab5d9dc09c9f0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-20T15:03:20.000Z'
    data:
      status: closed
    id: 6300f7b8ceb1e0200b02f323
    type: status-change
  author: hkad98
  created_at: 2022-08-20 14:03:20+00:00
  id: 6300f7b8ceb1e0200b02f323
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: facebook/nllb-200-distilled-600M
repo_type: model
status: closed
target_branch: null
title: '[QUESTION] model translates only a part of the text'
