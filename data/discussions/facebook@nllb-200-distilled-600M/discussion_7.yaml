!!python/object:huggingface_hub.community.DiscussionWithDetails
author: hkad98
conflicting_files: null
created_at: 2022-08-20 14:48:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
      fullname: Jan Kadlec
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hkad98
      type: user
    createdAt: '2022-08-20T15:48:38.000Z'
    data:
      edited: false
      editors:
      - hkad98
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/85a5ceb1d6f8b9979ec6b629dd9c75d7.svg
          fullname: Jan Kadlec
          isHf: false
          isPro: false
          name: hkad98
          type: user
        html: '<p>Hello community,<br>is there a way to skip a translation of selected
          tokens? Let''s say that my input sequence contains numbers written using
          digits, and I would like to keep that in my output sequence. Unfortunately,
          this does not work for the following setup:</p>

          <pre><code class="language-python"><span class="hljs-keyword">from</span>
          transformers <span class="hljs-keyword">import</span> AutoTokenizer, AutoModelForSeq2SeqLM,
          pipeline


          model = AutoModelForSeq2SeqLM.from_pretrained(<span class="hljs-string">"facebook/nllb-200-distilled-600M"</span>)

          tokenizer = AutoTokenizer.from_pretrained(<span class="hljs-string">"facebook/nllb-200-distilled-600M"</span>)


          text = <span class="hljs-string">"I have 3 dogs."</span>


          translator = pipeline(<span class="hljs-string">''translation''</span>,
          model=model, tokenizer=tokenizer, src_lang=<span class="hljs-string">"eng_Latn"</span>,
          tgt_lang=<span class="hljs-string">''deu_Latn''</span>)

          translator(text)

          <span class="hljs-comment"># [{''translation_text'': ''Ich habe drei Hunde.''}]</span>

          </code></pre>

          '
        raw: "Hello community, \r\nis there a way to skip a translation of selected\
          \ tokens? Let's say that my input sequence contains numbers written using\
          \ digits, and I would like to keep that in my output sequence. Unfortunately,\
          \ this does not work for the following setup:\r\n\r\n```python\r\nfrom transformers\
          \ import AutoTokenizer, AutoModelForSeq2SeqLM, pipeline\r\n\r\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"\
          facebook/nllb-200-distilled-600M\")\r\ntokenizer = AutoTokenizer.from_pretrained(\"\
          facebook/nllb-200-distilled-600M\")\r\n\r\ntext = \"I have 3 dogs.\"\r\n\
          \r\ntranslator = pipeline('translation', model=model, tokenizer=tokenizer,\
          \ src_lang=\"eng_Latn\", tgt_lang='deu_Latn')\r\ntranslator(text)\r\n# [{'translation_text':\
          \ 'Ich habe drei Hunde.'}]\r\n```"
        updatedAt: '2022-08-20T15:48:38.122Z'
      numEdits: 0
      reactions: []
    id: 630102565ea4c617b218f3b3
    type: comment
  author: hkad98
  content: "Hello community, \r\nis there a way to skip a translation of selected\
    \ tokens? Let's say that my input sequence contains numbers written using digits,\
    \ and I would like to keep that in my output sequence. Unfortunately, this does\
    \ not work for the following setup:\r\n\r\n```python\r\nfrom transformers import\
    \ AutoTokenizer, AutoModelForSeq2SeqLM, pipeline\r\n\r\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"\
    facebook/nllb-200-distilled-600M\")\r\ntokenizer = AutoTokenizer.from_pretrained(\"\
    facebook/nllb-200-distilled-600M\")\r\n\r\ntext = \"I have 3 dogs.\"\r\n\r\ntranslator\
    \ = pipeline('translation', model=model, tokenizer=tokenizer, src_lang=\"eng_Latn\"\
    , tgt_lang='deu_Latn')\r\ntranslator(text)\r\n# [{'translation_text': 'Ich habe\
    \ drei Hunde.'}]\r\n```"
  created_at: 2022-08-20 14:48:38+00:00
  edited: false
  hidden: false
  id: 630102565ea4c617b218f3b3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624909058772-607e732632db9bc6ebaa54ae.jpeg?w=200&h=200&f=face
      fullname: Saied Alimoradi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: saied
      type: user
    createdAt: '2022-12-20T17:20:09.000Z'
    data:
      edited: false
      editors:
      - saied
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624909058772-607e732632db9bc6ebaa54ae.jpeg?w=200&h=200&f=face
          fullname: Saied Alimoradi
          isHf: false
          isPro: false
          name: saied
          type: user
        html: '<p>If you don''t face grammatical errors, first replace them with some
          special tokens like 1_1_1_1, and then after translation replace them with
          your desired words.</p>

          '
        raw: If you don't face grammatical errors, first replace them with some special
          tokens like 1_1_1_1, and then after translation replace them with your desired
          words.
        updatedAt: '2022-12-20T17:20:09.567Z'
      numEdits: 0
      reactions: []
    id: 63a1eec93c003e4093161930
    type: comment
  author: saied
  content: If you don't face grammatical errors, first replace them with some special
    tokens like 1_1_1_1, and then after translation replace them with your desired
    words.
  created_at: 2022-12-20 17:20:09+00:00
  edited: false
  hidden: false
  id: 63a1eec93c003e4093161930
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 7
repo_id: facebook/nllb-200-distilled-600M
repo_type: model
status: open
target_branch: null
title: '[QUESTION] How to skip the translation of some tokens?'
