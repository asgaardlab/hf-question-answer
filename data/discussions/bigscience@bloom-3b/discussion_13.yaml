!!python/object:huggingface_hub.community.DiscussionWithDetails
author: JoseGris
conflicting_files: null
created_at: 2022-10-10 13:07:55+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
      fullname: Jose Gris
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JoseGris
      type: user
    createdAt: '2022-10-10T14:07:55.000Z'
    data:
      edited: false
      editors:
      - JoseGris
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
          fullname: Jose Gris
          isHf: false
          isPro: false
          name: JoseGris
          type: user
        html: '<p>Hi,</p>

          <p>I am trying to get different results with bloom using always same prompt.</p>

          <p>In some colabs I have seen that some pleople are using the following
          set_seed:</p>

          <p>from transformers import AutoModelForCausalLM, AutoTokenizer, set_seed<br>set_seed(X)</p>

          <p>But everytime I change X, I get the same result.</p>

          <p>How can I change the seed? Is there any way to get a different result
          everytime I run the same prompt?</p>

          <p>Best regards and thanks in advance,<br>Jose</p>

          '
        raw: "Hi,\r\n\r\nI am trying to get different results with bloom using always\
          \ same prompt.\r\n\r\nIn some colabs I have seen that some pleople are using\
          \ the following set_seed:\r\n\r\nfrom transformers import AutoModelForCausalLM,\
          \ AutoTokenizer, set_seed\r\nset_seed(X)\r\n\r\nBut everytime I change X,\
          \ I get the same result.\r\n\r\nHow can I change the seed? Is there any\
          \ way to get a different result everytime I run the same prompt?\r\n\r\n\
          Best regards and thanks in advance,\r\nJose"
        updatedAt: '2022-10-10T14:07:55.583Z'
      numEdits: 0
      reactions: []
    id: 6344273b29de2293e7e304d0
    type: comment
  author: JoseGris
  content: "Hi,\r\n\r\nI am trying to get different results with bloom using always\
    \ same prompt.\r\n\r\nIn some colabs I have seen that some pleople are using the\
    \ following set_seed:\r\n\r\nfrom transformers import AutoModelForCausalLM, AutoTokenizer,\
    \ set_seed\r\nset_seed(X)\r\n\r\nBut everytime I change X, I get the same result.\r\
    \n\r\nHow can I change the seed? Is there any way to get a different result everytime\
    \ I run the same prompt?\r\n\r\nBest regards and thanks in advance,\r\nJose"
  created_at: 2022-10-10 13:07:55+00:00
  edited: false
  hidden: false
  id: 6344273b29de2293e7e304d0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-10-11T07:16:17.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>How are you generating text? Can you share a code snippet please?</p>

          '
        raw: How are you generating text? Can you share a code snippet please?
        updatedAt: '2022-10-11T07:16:17.538Z'
      numEdits: 0
      reactions: []
    id: 634518415ba732a320ad0573
    type: comment
  author: cakiki
  content: How are you generating text? Can you share a code snippet please?
  created_at: 2022-10-11 06:16:17+00:00
  edited: false
  hidden: false
  id: 634518415ba732a320ad0573
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
      fullname: Jose Gris
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JoseGris
      type: user
    createdAt: '2022-10-11T11:34:39.000Z'
    data:
      edited: false
      editors:
      - JoseGris
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
          fullname: Jose Gris
          isHf: false
          isPro: false
          name: JoseGris
          type: user
        html: '<p>sure</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1665488014564-6274a9d0b96faa4442e86e76.jpeg"><img
          alt="Captura.JPG" src="https://cdn-uploads.huggingface.co/production/uploads/1665488014564-6274a9d0b96faa4442e86e76.jpeg"></a></p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1665488059447-6274a9d0b96faa4442e86e76.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/1665488059447-6274a9d0b96faa4442e86e76.png"></a></p>

          '
        raw: 'sure


          ![Captura.JPG](https://cdn-uploads.huggingface.co/production/uploads/1665488014564-6274a9d0b96faa4442e86e76.jpeg)


          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665488059447-6274a9d0b96faa4442e86e76.png)'
        updatedAt: '2022-10-11T11:34:39.567Z'
      numEdits: 0
      reactions: []
    id: 634554cf547c70e4b7cb5555
    type: comment
  author: JoseGris
  content: 'sure


    ![Captura.JPG](https://cdn-uploads.huggingface.co/production/uploads/1665488014564-6274a9d0b96faa4442e86e76.jpeg)


    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665488059447-6274a9d0b96faa4442e86e76.png)'
  created_at: 2022-10-11 10:34:39+00:00
  edited: false
  hidden: false
  id: 634554cf547c70e4b7cb5555
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-10-11T11:48:08.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>I believe the <code>do_sample</code> parameter defaults to <code>False</code>.
          Try setting that to <code>True</code> in your call to <code>generate</code>
          because otherwise you''re doing greedy decoding which is deterministic and
          unaffected by random seeds.</p>

          '
        raw: I believe the `do_sample` parameter defaults to `False`. Try setting
          that to `True` in your call to `generate` because otherwise you're doing
          greedy decoding which is deterministic and unaffected by random seeds.
        updatedAt: '2022-10-11T11:48:08.671Z'
      numEdits: 0
      reactions: []
    id: 634557f8abd499c80af01fda
    type: comment
  author: cakiki
  content: I believe the `do_sample` parameter defaults to `False`. Try setting that
    to `True` in your call to `generate` because otherwise you're doing greedy decoding
    which is deterministic and unaffected by random seeds.
  created_at: 2022-10-11 10:48:08+00:00
  edited: false
  hidden: false
  id: 634557f8abd499c80af01fda
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
      fullname: Jose Gris
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JoseGris
      type: user
    createdAt: '2022-10-11T13:40:11.000Z'
    data:
      edited: false
      editors:
      - JoseGris
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
          fullname: Jose Gris
          isHf: false
          isPro: false
          name: JoseGris
          type: user
        html: '<p>Thanks a lot cakiki, but it seems to do the same with do_sample
          = True</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1665495609067-6274a9d0b96faa4442e86e76.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/1665495609067-6274a9d0b96faa4442e86e76.png"></a></p>

          '
        raw: 'Thanks a lot cakiki, but it seems to do the same with do_sample = True



          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665495609067-6274a9d0b96faa4442e86e76.png)'
        updatedAt: '2022-10-11T13:40:11.454Z'
      numEdits: 0
      reactions: []
    id: 6345723b43f4f2d2ed0e68d1
    type: comment
  author: JoseGris
  content: 'Thanks a lot cakiki, but it seems to do the same with do_sample = True



    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665495609067-6274a9d0b96faa4442e86e76.png)'
  created_at: 2022-10-11 12:40:11+00:00
  edited: false
  hidden: false
  id: 6345723b43f4f2d2ed0e68d1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-10-11T15:13:20.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>I think that''s because you''re setting <code>top_k</code> to 1,
          which basically means greedy decoding since there''s only one (<code>k=1</code>)
          token to sample from. Can you try with <code>top_k</code> set to something
          like 100? Better yet, try using <code>top_p</code> instead of <code>top_k</code>.</p>

          '
        raw: I think that's because you're setting `top_k` to 1, which basically means
          greedy decoding since there's only one (`k=1`) token to sample from. Can
          you try with `top_k` set to something like 100? Better yet, try using `top_p`
          instead of `top_k`.
        updatedAt: '2022-10-11T15:13:20.206Z'
      numEdits: 0
      reactions: []
    id: 63458810952248db893722e1
    type: comment
  author: cakiki
  content: I think that's because you're setting `top_k` to 1, which basically means
    greedy decoding since there's only one (`k=1`) token to sample from. Can you try
    with `top_k` set to something like 100? Better yet, try using `top_p` instead
    of `top_k`.
  created_at: 2022-10-11 14:13:20+00:00
  edited: false
  hidden: false
  id: 63458810952248db893722e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
      fullname: Jose Gris
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JoseGris
      type: user
    createdAt: '2022-10-12T14:29:27.000Z'
    data:
      edited: false
      editors:
      - JoseGris
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5cdf0335984dff70070873183d931f7c.svg
          fullname: Jose Gris
          isHf: false
          isPro: false
          name: JoseGris
          type: user
        html: '<p>Thanks Caikiki, with top_k=50 and do_sample= True works perfect!</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1665584941626-6274a9d0b96faa4442e86e76.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/1665584941626-6274a9d0b96faa4442e86e76.png"></a></p>

          '
        raw: 'Thanks Caikiki, with top_k=50 and do_sample= True works perfect!



          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665584941626-6274a9d0b96faa4442e86e76.png)'
        updatedAt: '2022-10-12T14:29:27.762Z'
      numEdits: 0
      reactions: []
    id: 6346cf47a6f101c7f906e18b
    type: comment
  author: JoseGris
  content: 'Thanks Caikiki, with top_k=50 and do_sample= True works perfect!



    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/1665584941626-6274a9d0b96faa4442e86e76.png)'
  created_at: 2022-10-12 13:29:27+00:00
  edited: false
  hidden: false
  id: 6346cf47a6f101c7f906e18b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-10-12T14:46:24.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>Nice!</p>

          '
        raw: Nice!
        updatedAt: '2022-10-12T14:46:24.248Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6346d3403ea42ee2cb4c7c83
    id: 6346d3403ea42ee2cb4c7c82
    type: comment
  author: cakiki
  content: Nice!
  created_at: 2022-10-12 13:46:24+00:00
  edited: false
  hidden: false
  id: 6346d3403ea42ee2cb4c7c82
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-10-12T14:46:24.000Z'
    data:
      status: closed
    id: 6346d3403ea42ee2cb4c7c83
    type: status-change
  author: cakiki
  created_at: 2022-10-12 13:46:24+00:00
  id: 6346d3403ea42ee2cb4c7c83
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: bigscience/bloom-3b
repo_type: model
status: closed
target_branch: null
title: Bloom3B set_seed
