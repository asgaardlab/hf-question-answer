!!python/object:huggingface_hub.community.DiscussionWithDetails
author: swang12
conflicting_files: null
created_at: 2023-08-14 01:33:41+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
      fullname: Su Wang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: swang12
      type: user
    createdAt: '2023-08-14T02:33:41.000Z'
    data:
      edited: false
      editors:
      - swang12
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6021210551261902
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
          fullname: Su Wang
          isHf: false
          isPro: false
          name: swang12
          type: user
        html: "<p>Hi, I'm running hyperparam_optimiz_for_disease_classifier.py for\
          \ fine-tuning the pre-trained Geneformer model, but I encountered many errors\
          \ regarding several packages. I tried various combinations of package versions,\
          \ but they either didn't fix the issues or brought new issues. I'm pasting\
          \ the errors I haven't fixed below:</p>\n<ol>\n<li>ray.init<br>runtime_env\
          \ = {\"conda\": \"base\",<br>        \"env_vars\": {\"LD_LIBRARY_PATH\"\
          : \"/raid/swang12/Transformer/myenv/lib\"}}<br>ray.init(runtime_env=runtime_env)</li>\n\
          </ol>\n<p>TypeError: init() got an unexpected keyword argument 'runtime_env'</p>\n\
          <p>I currently walked around this by using ray.init() without runtime_env.</p>\n\
          <ol start=\"2\">\n<li><p>aioredis<br>(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer$\
          \ python3.8 hyperparam_optimiz_for_disease_classifier.py<br>2023-08-13 20:38:06,838\t\
          INFO services.py:1172 -- View the Ray dashboard at <a rel=\"nofollow\" href=\"\
          http://127.0.0.1:8265\">http://127.0.0.1:8265</a><br>(raylet) Traceback\
          \ (most recent call last):<br>(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 334, in <br>(raylet)     raise e<br>(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 323, in <br>(raylet)     loop.run_until_complete(agent.run())<br>(raylet)\
          \   File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616, in run_until_complete<br>(raylet)\
          \     return future.result()<br>(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 121, in run<br>(raylet)     self.aioredis_client = await dashboard_utils.get_aioredis_client(<br>(raylet)\
          \   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/utils.py\"\
          , line 662, in get_aioredis_client<br>(raylet)     return await aioredis.create_redis_pool(<br>(raylet)\
          \ AttributeError: module 'aioredis' has no attribute 'create_redis_pool'</p>\n\
          </li>\n<li><p>tune.CLIReporter<br>trainer.hyperparameter_search(<br> direction=\"\
          maximize\",<br> backend=\"ray\",<br> resources_per_trial={\"cpu\":8,\"gpu\"\
          :1},<br> hp_space=lambda _: ray_config,<br> search_alg=hyperopt_search,<br>\
          \ n_trials=100, # number of trials<br> progress_reporter=tune.CLIReporter(max_report_frequency=600,<br>\
          \                                sort_by_metric=True,<br>              \
          \                  max_progress_rows=100,<br>                          \
          \      mode=\"max\",<br>                                metric=\"eval_accuracy\"\
          ,<br>                                metric_columns=[\"loss\", \"eval_loss\"\
          , \"eval_accuracy\"]<br>                                )<br>)</p>\n</li>\n\
          </ol>\n<p>Traceback (most recent call last):<br>  File \"hyperparam_optimiz_for_disease_classifier.py\"\
          , line 190, in <br>    progress_reporter=tune.CLIReporter(max_report_frequency=600,<br>TypeError:\
          \ <strong>init</strong>() got an unexpected keyword argument 'sort_by_metric'</p>\n\
          <p>Besides sort_by_metric, these parameters also raise errors: mode, metric,\
          \ metric_columns.</p>\n<p>For ray, I tried 1.2, 1.5, 1.9, and the latest\
          \ 2.6 versions. For aioredis, I tried from 0.x to the latest 2.x versions.<br>I\
          \ was wondering if you could let me know the key package versions that work\
          \ for you. Thank you very much!</p>\n<p>Sincerely,<br>Su Wang</p>\n"
        raw: "Hi, I'm running hyperparam_optimiz_for_disease_classifier.py for fine-tuning\
          \ the pre-trained Geneformer model, but I encountered many errors regarding\
          \ several packages. I tried various combinations of package versions, but\
          \ they either didn't fix the issues or brought new issues. I'm pasting the\
          \ errors I haven't fixed below:\r\n\r\n1. ray.init\r\nruntime_env = {\"\
          conda\": \"base\",\r\n               \"env_vars\": {\"LD_LIBRARY_PATH\"\
          : \"/raid/swang12/Transformer/myenv/lib\"}}\r\nray.init(runtime_env=runtime_env)\r\
          \n\r\nTypeError: init() got an unexpected keyword argument 'runtime_env'\r\
          \n\r\nI currently walked around this by using ray.init() without runtime_env.\r\
          \n\r\n2. aioredis\r\n(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer$\
          \ python3.8 hyperparam_optimiz_for_disease_classifier.py\r\n2023-08-13 20:38:06,838\t\
          INFO services.py:1172 -- View the Ray dashboard at http://127.0.0.1:8265\r\
          \n(raylet) Traceback (most recent call last):\r\n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 334, in <module>\r\n(raylet)     raise e\r\n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 323, in <module>\r\n(raylet)     loop.run_until_complete(agent.run())\r\
          \n(raylet)   File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616,\
          \ in run_until_complete\r\n(raylet)     return future.result()\r\n(raylet)\
          \   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
          , line 121, in run\r\n(raylet)     self.aioredis_client = await dashboard_utils.get_aioredis_client(\r\
          \n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/utils.py\"\
          , line 662, in get_aioredis_client\r\n(raylet)     return await aioredis.create_redis_pool(\r\
          \n(raylet) AttributeError: module 'aioredis' has no attribute 'create_redis_pool'\r\
          \n\r\n3. tune.CLIReporter\r\ntrainer.hyperparameter_search(\r\n    direction=\"\
          maximize\",\r\n    backend=\"ray\",\r\n    resources_per_trial={\"cpu\"\
          :8,\"gpu\":1},\r\n    hp_space=lambda _: ray_config,\r\n    search_alg=hyperopt_search,\r\
          \n    n_trials=100, # number of trials\r\n    progress_reporter=tune.CLIReporter(max_report_frequency=600,\r\
          \n                                       sort_by_metric=True,\r\n      \
          \                                 max_progress_rows=100,\r\n           \
          \                            mode=\"max\",\r\n                         \
          \              metric=\"eval_accuracy\",\r\n                           \
          \            metric_columns=[\"loss\", \"eval_loss\", \"eval_accuracy\"\
          ]\r\n                                       )\r\n)\r\n\r\nTraceback (most\
          \ recent call last):\r\n  File \"hyperparam_optimiz_for_disease_classifier.py\"\
          , line 190, in <module>\r\n    progress_reporter=tune.CLIReporter(max_report_frequency=600,\r\
          \nTypeError: __init__() got an unexpected keyword argument 'sort_by_metric'\r\
          \n\r\nBesides sort_by_metric, these parameters also raise errors: mode,\
          \ metric, metric_columns.\r\n\r\n\r\nFor ray, I tried 1.2, 1.5, 1.9, and\
          \ the latest 2.6 versions. For aioredis, I tried from 0.x to the latest\
          \ 2.x versions.\r\nI was wondering if you could let me know the key package\
          \ versions that work for you. Thank you very much!\r\n\r\nSincerely,\r\n\
          Su Wang"
        updatedAt: '2023-08-14T02:33:41.682Z'
      numEdits: 0
      reactions: []
    id: 64d992856682b2e845590a5f
    type: comment
  author: swang12
  content: "Hi, I'm running hyperparam_optimiz_for_disease_classifier.py for fine-tuning\
    \ the pre-trained Geneformer model, but I encountered many errors regarding several\
    \ packages. I tried various combinations of package versions, but they either\
    \ didn't fix the issues or brought new issues. I'm pasting the errors I haven't\
    \ fixed below:\r\n\r\n1. ray.init\r\nruntime_env = {\"conda\": \"base\",\r\n \
    \              \"env_vars\": {\"LD_LIBRARY_PATH\": \"/raid/swang12/Transformer/myenv/lib\"\
    }}\r\nray.init(runtime_env=runtime_env)\r\n\r\nTypeError: init() got an unexpected\
    \ keyword argument 'runtime_env'\r\n\r\nI currently walked around this by using\
    \ ray.init() without runtime_env.\r\n\r\n2. aioredis\r\n(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer$\
    \ python3.8 hyperparam_optimiz_for_disease_classifier.py\r\n2023-08-13 20:38:06,838\t\
    INFO services.py:1172 -- View the Ray dashboard at http://127.0.0.1:8265\r\n(raylet)\
    \ Traceback (most recent call last):\r\n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
    , line 334, in <module>\r\n(raylet)     raise e\r\n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
    , line 323, in <module>\r\n(raylet)     loop.run_until_complete(agent.run())\r\
    \n(raylet)   File \"/usr/lib/python3.8/asyncio/base_events.py\", line 616, in\
    \ run_until_complete\r\n(raylet)     return future.result()\r\n(raylet)   File\
    \ \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/agent.py\"\
    , line 121, in run\r\n(raylet)     self.aioredis_client = await dashboard_utils.get_aioredis_client(\r\
    \n(raylet)   File \"/home/swang12/.local/lib/python3.8/site-packages/ray/new_dashboard/utils.py\"\
    , line 662, in get_aioredis_client\r\n(raylet)     return await aioredis.create_redis_pool(\r\
    \n(raylet) AttributeError: module 'aioredis' has no attribute 'create_redis_pool'\r\
    \n\r\n3. tune.CLIReporter\r\ntrainer.hyperparameter_search(\r\n    direction=\"\
    maximize\",\r\n    backend=\"ray\",\r\n    resources_per_trial={\"cpu\":8,\"gpu\"\
    :1},\r\n    hp_space=lambda _: ray_config,\r\n    search_alg=hyperopt_search,\r\
    \n    n_trials=100, # number of trials\r\n    progress_reporter=tune.CLIReporter(max_report_frequency=600,\r\
    \n                                       sort_by_metric=True,\r\n            \
    \                           max_progress_rows=100,\r\n                       \
    \                mode=\"max\",\r\n                                       metric=\"\
    eval_accuracy\",\r\n                                       metric_columns=[\"\
    loss\", \"eval_loss\", \"eval_accuracy\"]\r\n                                \
    \       )\r\n)\r\n\r\nTraceback (most recent call last):\r\n  File \"hyperparam_optimiz_for_disease_classifier.py\"\
    , line 190, in <module>\r\n    progress_reporter=tune.CLIReporter(max_report_frequency=600,\r\
    \nTypeError: __init__() got an unexpected keyword argument 'sort_by_metric'\r\n\
    \r\nBesides sort_by_metric, these parameters also raise errors: mode, metric,\
    \ metric_columns.\r\n\r\n\r\nFor ray, I tried 1.2, 1.5, 1.9, and the latest 2.6\
    \ versions. For aioredis, I tried from 0.x to the latest 2.x versions.\r\nI was\
    \ wondering if you could let me know the key package versions that work for you.\
    \ Thank you very much!\r\n\r\nSincerely,\r\nSu Wang"
  created_at: 2023-08-14 01:33:41+00:00
  edited: false
  hidden: false
  id: 64d992856682b2e845590a5f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
      fullname: Madhavan Venkatesh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: madhavanvenkatesh
      type: user
    createdAt: '2023-08-29T23:04:16.000Z'
    data:
      edited: false
      editors:
      - madhavanvenkatesh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8558640480041504
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
          fullname: Madhavan Venkatesh
          isHf: false
          isPro: false
          name: madhavanvenkatesh
          type: user
        html: '<p>HI! Looks like you are using Python 3.8. Ray 2.6.1 issues should
          be resolved in a Python 3.10.12 contained environment. I recommend either
          1) instating a Python 3.10 conda environment before Ray 2.6.X installation
          or 2) Conda/mamba installation by first requesting that the environment
          be set to Python version 3.10.12. I suggest conda/mamba installations for
          Ray. You could also install Ray through PyPi channels in your conda environment
          with !pip install ray and !pip install ray[tune].<br>Thank you,<br>Madhavan</p>

          '
        raw: "HI! Looks like you are using Python 3.8. Ray 2.6.1 issues should be\
          \ resolved in a Python 3.10.12 contained environment. I recommend either\
          \ 1) instating a Python 3.10 conda environment before Ray 2.6.X installation\
          \ or 2) Conda/mamba installation by first requesting that the environment\
          \ be set to Python version 3.10.12. I suggest conda/mamba installations\
          \ for Ray. You could also install Ray through PyPi channels in your conda\
          \ environment with !pip install ray and !pip install ray[tune].\nThank you,\
          \ \nMadhavan"
        updatedAt: '2023-08-29T23:04:16.041Z'
      numEdits: 0
      reactions: []
    id: 64ee79705fb7a96a2de08f87
    type: comment
  author: madhavanvenkatesh
  content: "HI! Looks like you are using Python 3.8. Ray 2.6.1 issues should be resolved\
    \ in a Python 3.10.12 contained environment. I recommend either 1) instating a\
    \ Python 3.10 conda environment before Ray 2.6.X installation or 2) Conda/mamba\
    \ installation by first requesting that the environment be set to Python version\
    \ 3.10.12. I suggest conda/mamba installations for Ray. You could also install\
    \ Ray through PyPi channels in your conda environment with !pip install ray and\
    \ !pip install ray[tune].\nThank you, \nMadhavan"
  created_at: 2023-08-29 22:04:16+00:00
  edited: false
  hidden: false
  id: 64ee79705fb7a96a2de08f87
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-08-31T17:41:07.000Z'
    data:
      status: closed
    id: 64f0d0b3efdb755d7f835ff7
    type: status-change
  author: ctheodoris
  created_at: 2023-08-31 16:41:07+00:00
  id: 64f0d0b3efdb755d7f835ff7
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
      fullname: Su Wang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: swang12
      type: user
    createdAt: '2023-09-05T06:22:18.000Z'
    data:
      edited: false
      editors:
      - swang12
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7370216846466064
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
          fullname: Su Wang
          isHf: false
          isPro: false
          name: swang12
          type: user
        html: '<p>Hi Madhavan, Thanks a lot for your reply! I created a new virtual
          environment in Python 3.10.12 and installed Ray 2.6.1 and ray[tune], but
          I still got this error:</p>

          <p>(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer31012$ python hyperparam_optimiz_for_disease_classifier.py<br>Traceback
          (most recent call last):<br>  File "/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py",
          line 19, in <br>    from ray.tune.suggest.hyperopt import HyperOptSearch<br>ModuleNotFoundError:
          No module named ''ray.tune.suggest''</p>

          <p>Could you help me with this? Thank you very much!</p>

          <p>Sincerely,<br>Su</p>

          '
        raw: "Hi Madhavan, Thanks a lot for your reply! I created a new virtual environment\
          \ in Python 3.10.12 and installed Ray 2.6.1 and ray[tune], but I still got\
          \ this error:\n\n(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer31012$\
          \ python hyperparam_optimiz_for_disease_classifier.py\nTraceback (most recent\
          \ call last):\n  File \"/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py\"\
          , line 19, in <module>\n    from ray.tune.suggest.hyperopt import HyperOptSearch\n\
          ModuleNotFoundError: No module named 'ray.tune.suggest'\n\nCould you help\
          \ me with this? Thank you very much!\n\nSincerely,\nSu"
        updatedAt: '2023-09-05T06:22:18.888Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64f6c91a7cff6e8fe0435465
    id: 64f6c91a7cff6e8fe0435464
    type: comment
  author: swang12
  content: "Hi Madhavan, Thanks a lot for your reply! I created a new virtual environment\
    \ in Python 3.10.12 and installed Ray 2.6.1 and ray[tune], but I still got this\
    \ error:\n\n(myenv) swang12@sbbdmaplp003:/raid/swang12/Transformer31012$ python\
    \ hyperparam_optimiz_for_disease_classifier.py\nTraceback (most recent call last):\n\
    \  File \"/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py\"\
    , line 19, in <module>\n    from ray.tune.suggest.hyperopt import HyperOptSearch\n\
    ModuleNotFoundError: No module named 'ray.tune.suggest'\n\nCould you help me with\
    \ this? Thank you very much!\n\nSincerely,\nSu"
  created_at: 2023-09-05 05:22:18+00:00
  edited: false
  hidden: false
  id: 64f6c91a7cff6e8fe0435464
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
      fullname: Su Wang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: swang12
      type: user
    createdAt: '2023-09-05T06:22:18.000Z'
    data:
      status: open
    id: 64f6c91a7cff6e8fe0435465
    type: status-change
  author: swang12
  created_at: 2023-09-05 05:22:18+00:00
  id: 64f6c91a7cff6e8fe0435465
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
      fullname: Madhavan Venkatesh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: madhavanvenkatesh
      type: user
    createdAt: '2023-09-05T15:51:41.000Z'
    data:
      edited: false
      editors:
      - madhavanvenkatesh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7561538815498352
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
          fullname: Madhavan Venkatesh
          isHf: false
          isPro: false
          name: madhavanvenkatesh
          type: user
        html: '<p>Sure! Since RayTune is updated, you might want to try changing "from
          ray.tune.suggest.hyperopt import HyperOptSearch" to "from ray.tune.search.hyperopt
          import HyperOptSearch"</p>

          <ul>

          <li>Madhavan</li>

          </ul>

          '
        raw: 'Sure! Since RayTune is updated, you might want to try changing "from
          ray.tune.suggest.hyperopt import HyperOptSearch" to "from ray.tune.search.hyperopt
          import HyperOptSearch"

          - Madhavan'
        updatedAt: '2023-09-05T15:51:41.479Z'
      numEdits: 0
      reactions: []
    id: 64f74e8dc150f2f1dddc6a72
    type: comment
  author: madhavanvenkatesh
  content: 'Sure! Since RayTune is updated, you might want to try changing "from ray.tune.suggest.hyperopt
    import HyperOptSearch" to "from ray.tune.search.hyperopt import HyperOptSearch"

    - Madhavan'
  created_at: 2023-09-05 14:51:41+00:00
  edited: false
  hidden: false
  id: 64f74e8dc150f2f1dddc6a72
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
      fullname: Su Wang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: swang12
      type: user
    createdAt: '2023-09-08T06:27:41.000Z'
    data:
      edited: false
      editors:
      - swang12
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6498982906341553
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
          fullname: Su Wang
          isHf: false
          isPro: false
          name: swang12
          type: user
        html: '<p>Hi Madhavan, I followed your instructions and it works. Now I got
          another error:</p>

          <p>Traceback (most recent call last):<br>  File "/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py",
          line 110, in <br>    trainset_v4 = trainset_v3.map(classes_to_ids, num_proc=num_proc)<br>  File
          "/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py",
          line 592, in wrapper<br>    out: Union["Dataset", "DatasetDict"] = func(self,
          *args, **kwargs)<br>  File "/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py",
          line 557, in wrapper<br>    out: Union["Dataset", "DatasetDict"] = func(self,
          *args, **kwargs)<br>  File "/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py",
          line 3189, in map<br>    for rank, done, content in iflatmap_unordered(<br>  File
          "/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/utils/py_utils.py",
          line 1387, in iflatmap_unordered<br>    raise RuntimeError(<br>RuntimeError:
          One of the subprocesses has abruptly died during map operation.To debug
          the error, disable multiprocessing.</p>

          <p>I tried disabling multiprocessing but it doesn''t work. Do you have any
          clues? Thank you very much!</p>

          <p>Sincerely,<br>Su</p>

          '
        raw: "Hi Madhavan, I followed your instructions and it works. Now I got another\
          \ error:\n\nTraceback (most recent call last):\n  File \"/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py\"\
          , line 110, in <module>\n    trainset_v4 = trainset_v3.map(classes_to_ids,\
          \ num_proc=num_proc)\n  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
          , line 592, in wrapper\n    out: Union[\"Dataset\", \"DatasetDict\"] = func(self,\
          \ *args, **kwargs)\n  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
          , line 557, in wrapper\n    out: Union[\"Dataset\", \"DatasetDict\"] = func(self,\
          \ *args, **kwargs)\n  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
          , line 3189, in map\n    for rank, done, content in iflatmap_unordered(\n\
          \  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/utils/py_utils.py\"\
          , line 1387, in iflatmap_unordered\n    raise RuntimeError(\nRuntimeError:\
          \ One of the subprocesses has abruptly died during map operation.To debug\
          \ the error, disable multiprocessing.\n\nI tried disabling multiprocessing\
          \ but it doesn't work. Do you have any clues? Thank you very much!\n\nSincerely,\n\
          Su"
        updatedAt: '2023-09-08T06:27:41.148Z'
      numEdits: 0
      reactions: []
    id: 64fabedd8f76d45069fbeb22
    type: comment
  author: swang12
  content: "Hi Madhavan, I followed your instructions and it works. Now I got another\
    \ error:\n\nTraceback (most recent call last):\n  File \"/raid/swang12/Transformer31012/hyperparam_optimiz_for_disease_classifier.py\"\
    , line 110, in <module>\n    trainset_v4 = trainset_v3.map(classes_to_ids, num_proc=num_proc)\n\
    \  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
    , line 592, in wrapper\n    out: Union[\"Dataset\", \"DatasetDict\"] = func(self,\
    \ *args, **kwargs)\n  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
    , line 557, in wrapper\n    out: Union[\"Dataset\", \"DatasetDict\"] = func(self,\
    \ *args, **kwargs)\n  File \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/arrow_dataset.py\"\
    , line 3189, in map\n    for rank, done, content in iflatmap_unordered(\n  File\
    \ \"/home/swang12/anaconda3/envs/myenv/lib/python3.10/site-packages/datasets/utils/py_utils.py\"\
    , line 1387, in iflatmap_unordered\n    raise RuntimeError(\nRuntimeError: One\
    \ of the subprocesses has abruptly died during map operation.To debug the error,\
    \ disable multiprocessing.\n\nI tried disabling multiprocessing but it doesn't\
    \ work. Do you have any clues? Thank you very much!\n\nSincerely,\nSu"
  created_at: 2023-09-08 05:27:41+00:00
  edited: false
  hidden: false
  id: 64fabedd8f76d45069fbeb22
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
      fullname: Madhavan Venkatesh
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: madhavanvenkatesh
      type: user
    createdAt: '2023-09-08T18:46:25.000Z'
    data:
      edited: true
      editors:
      - madhavanvenkatesh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8652852773666382
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/94fd966421d599166f30dd00e28fe3bf.svg
          fullname: Madhavan Venkatesh
          isHf: false
          isPro: false
          name: madhavanvenkatesh
          type: user
        html: '<p>When multiprocessing is disabled, what is the error you get? This
          error comes from a map operation on an Arrow dataset from the datasets library.
          For troubleshooting, you can try dataset = dataset.map(function_name, num_proc=1).<br>Another
          consideration could be a memory issue: on a Linux machine, you can try to
          monitor this with htop/top. This goes in hand with concurrency, where the
          script would crash if the background load approached capacity.<br>Thanks,<br>Madhavan
          </p>

          '
        raw: "When multiprocessing is disabled, what is the error you get? This error\
          \ comes from a map operation on an Arrow dataset from the datasets library.\
          \ For troubleshooting, you can try dataset = dataset.map(function_name,\
          \ num_proc=1). \nAnother consideration could be a memory issue: on a Linux\
          \ machine, you can try to monitor this with htop/top. This goes in hand\
          \ with concurrency, where the script would crash if the background load\
          \ approached capacity. \nThanks, \nMadhavan "
        updatedAt: '2023-09-08T18:46:50.357Z'
      numEdits: 2
      reactions: []
    id: 64fb6c0120a2d04cc185fed7
    type: comment
  author: madhavanvenkatesh
  content: "When multiprocessing is disabled, what is the error you get? This error\
    \ comes from a map operation on an Arrow dataset from the datasets library. For\
    \ troubleshooting, you can try dataset = dataset.map(function_name, num_proc=1).\
    \ \nAnother consideration could be a memory issue: on a Linux machine, you can\
    \ try to monitor this with htop/top. This goes in hand with concurrency, where\
    \ the script would crash if the background load approached capacity. \nThanks,\
    \ \nMadhavan "
  created_at: 2023-09-08 17:46:25+00:00
  edited: true
  hidden: false
  id: 64fb6c0120a2d04cc185fed7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-09-13T08:01:30.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.976015031337738
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>This can also happen due to poor network connection between the
          data and node where the processing is occurring, for example if the data
          is being used on a mounted network drive as opposed to copied onto a scratch
          disk local to the processing node, which we would recommend.</p>

          '
        raw: This can also happen due to poor network connection between the data
          and node where the processing is occurring, for example if the data is being
          used on a mounted network drive as opposed to copied onto a scratch disk
          local to the processing node, which we would recommend.
        updatedAt: '2023-09-13T08:01:30.420Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65016c5a7804f04a165d21e7
    id: 65016c5a7804f04a165d21e4
    type: comment
  author: ctheodoris
  content: This can also happen due to poor network connection between the data and
    node where the processing is occurring, for example if the data is being used
    on a mounted network drive as opposed to copied onto a scratch disk local to the
    processing node, which we would recommend.
  created_at: 2023-09-13 07:01:30+00:00
  edited: false
  hidden: false
  id: 65016c5a7804f04a165d21e4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-09-13T08:01:30.000Z'
    data:
      status: closed
    id: 65016c5a7804f04a165d21e7
    type: status-change
  author: ctheodoris
  created_at: 2023-09-13 07:01:30+00:00
  id: 65016c5a7804f04a165d21e7
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 217
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Package errors when running hyperparam_optimiz_for_disease_classifier.py
