!!python/object:huggingface_hub.community.DiscussionWithDetails
author: DYXDAVE
conflicting_files: null
created_at: 2023-07-26 13:36:14+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/58015c33c4c76a3882ea428ae3c3d399.svg
      fullname: Yuxuan Du
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: DYXDAVE
      type: user
    createdAt: '2023-07-26T14:36:14.000Z'
    data:
      edited: false
      editors:
      - DYXDAVE
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9337494969367981
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/58015c33c4c76a3882ea428ae3c3d399.svg
          fullname: Yuxuan Du
          isHf: false
          isPro: false
          name: DYXDAVE
          type: user
        html: '<p>Thank you for your great work. It helps me a lot on my analysis.<br>I
          realized a small question when I''m thinking input size 2048. Since in the
          paper, you mentioned the input of a cells was the rank of gene expression
          normalized by 30M corpus, which means those strongly down regulated genes
          might got rank larger than 2048, and they will be excluded from the input.
          I''m wondering whether this exclusion will affect our analysis since these
          down regulated genes might be important when analyzing gene network. Do
          you think expanding the input size will further improve the model''s understanding
          about gene network?<br>Thanks </p>

          '
        raw: "Thank you for your great work. It helps me a lot on my analysis. \r\n\
          I realized a small question when I'm thinking input size 2048. Since in\
          \ the paper, you mentioned the input of a cells was the rank of gene expression\
          \ normalized by 30M corpus, which means those strongly down regulated genes\
          \ might got rank larger than 2048, and they will be excluded from the input.\
          \ I'm wondering whether this exclusion will affect our analysis since these\
          \ down regulated genes might be important when analyzing gene network. Do\
          \ you think expanding the input size will further improve the model's understanding\
          \ about gene network? \r\nThanks "
        updatedAt: '2023-07-26T14:36:14.152Z'
      numEdits: 0
      reactions: []
    id: 64c12f5ea63fc47c5ac412eb
    type: comment
  author: DYXDAVE
  content: "Thank you for your great work. It helps me a lot on my analysis. \r\n\
    I realized a small question when I'm thinking input size 2048. Since in the paper,\
    \ you mentioned the input of a cells was the rank of gene expression normalized\
    \ by 30M corpus, which means those strongly down regulated genes might got rank\
    \ larger than 2048, and they will be excluded from the input. I'm wondering whether\
    \ this exclusion will affect our analysis since these down regulated genes might\
    \ be important when analyzing gene network. Do you think expanding the input size\
    \ will further improve the model's understanding about gene network? \r\nThanks "
  created_at: 2023-07-26 13:36:14+00:00
  edited: false
  hidden: false
  id: 64c12f5ea63fc47c5ac412eb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-26T19:15:45.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9057198762893677
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your question! The normalization factor that reflects\
          \ the nonzero median value of expression across the ~30M single cells in\
          \ Genecorpus-30M allows the model to take advantage of the vast number of\
          \ observations of each gene\u2019s expression across the pretraining corpus\
          \ to deprioritize genes like housekeeping genes that are ubiquitously highly\
          \ expressed while prioritizing genes like transcription factors that may\
          \ be lowly expressed when they are expressed but highly distinguish cell\
          \ state. Therefore, if the particular single cell had more than 2048 genes\
          \ detected, the genes that extend past the 2048 input size will not simply\
          \ be genes that have a lower expression value generally like transcription\
          \ factors but more-so genes that are specifically downregulated in that\
          \ cell population compared to the others in Genecorpus-30M (as you suggested).\
          \ The absence of those genes is still highly informative to the model. The\
          \ model learns from the absence of genes from the rank value encoding similarly\
          \ to how NLP models learn from the absence of negative words from a movie\
          \ review indicating a more positive sentiment, for example. Including a\
          \ larger input size would still be beneficial, but there are trade-offs\
          \ to the compute required given that fully dense attention is quadratic\
          \ in time dependency. 2048 is a fairly large input size for fully dense\
          \ attention, so we selected this size based on the fact that it fully encompassed\
          \ 93% of the cells in Genecorpus-30M so well-balanced the available size\
          \ and the required compute. We are working on future methodologies that\
          \ extend the input size while still optimizing the compute required to further\
          \ address this though. Please also see the related discussion here: <a href=\"\
          https://huggingface.co/ctheodoris/Geneformer/discussions/134\">https://huggingface.co/ctheodoris/Geneformer/discussions/134</a></p>\n"
        raw: "Thank you for your question! The normalization factor that reflects\
          \ the nonzero median value of expression across the ~30M single cells in\
          \ Genecorpus-30M allows the model to take advantage of the vast number of\
          \ observations of each gene\u2019s expression across the pretraining corpus\
          \ to deprioritize genes like housekeeping genes that are ubiquitously highly\
          \ expressed while prioritizing genes like transcription factors that may\
          \ be lowly expressed when they are expressed but highly distinguish cell\
          \ state. Therefore, if the particular single cell had more than 2048 genes\
          \ detected, the genes that extend past the 2048 input size will not simply\
          \ be genes that have a lower expression value generally like transcription\
          \ factors but more-so genes that are specifically downregulated in that\
          \ cell population compared to the others in Genecorpus-30M (as you suggested).\
          \ The absence of those genes is still highly informative to the model. The\
          \ model learns from the absence of genes from the rank value encoding similarly\
          \ to how NLP models learn from the absence of negative words from a movie\
          \ review indicating a more positive sentiment, for example. Including a\
          \ larger input size would still be beneficial, but there are trade-offs\
          \ to the compute required given that fully dense attention is quadratic\
          \ in time dependency. 2048 is a fairly large input size for fully dense\
          \ attention, so we selected this size based on the fact that it fully encompassed\
          \ 93% of the cells in Genecorpus-30M so well-balanced the available size\
          \ and the required compute. We are working on future methodologies that\
          \ extend the input size while still optimizing the compute required to further\
          \ address this though. Please also see the related discussion here: https://huggingface.co/ctheodoris/Geneformer/discussions/134"
        updatedAt: '2023-07-26T19:15:45.074Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - DYXDAVE
      relatedEventId: 64c170e1c1d1f89163bb5b10
    id: 64c170e1c1d1f89163bb5b0f
    type: comment
  author: ctheodoris
  content: "Thank you for your question! The normalization factor that reflects the\
    \ nonzero median value of expression across the ~30M single cells in Genecorpus-30M\
    \ allows the model to take advantage of the vast number of observations of each\
    \ gene\u2019s expression across the pretraining corpus to deprioritize genes like\
    \ housekeeping genes that are ubiquitously highly expressed while prioritizing\
    \ genes like transcription factors that may be lowly expressed when they are expressed\
    \ but highly distinguish cell state. Therefore, if the particular single cell\
    \ had more than 2048 genes detected, the genes that extend past the 2048 input\
    \ size will not simply be genes that have a lower expression value generally like\
    \ transcription factors but more-so genes that are specifically downregulated\
    \ in that cell population compared to the others in Genecorpus-30M (as you suggested).\
    \ The absence of those genes is still highly informative to the model. The model\
    \ learns from the absence of genes from the rank value encoding similarly to how\
    \ NLP models learn from the absence of negative words from a movie review indicating\
    \ a more positive sentiment, for example. Including a larger input size would\
    \ still be beneficial, but there are trade-offs to the compute required given\
    \ that fully dense attention is quadratic in time dependency. 2048 is a fairly\
    \ large input size for fully dense attention, so we selected this size based on\
    \ the fact that it fully encompassed 93% of the cells in Genecorpus-30M so well-balanced\
    \ the available size and the required compute. We are working on future methodologies\
    \ that extend the input size while still optimizing the compute required to further\
    \ address this though. Please also see the related discussion here: https://huggingface.co/ctheodoris/Geneformer/discussions/134"
  created_at: 2023-07-26 18:15:45+00:00
  edited: false
  hidden: false
  id: 64c170e1c1d1f89163bb5b0f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-26T19:15:45.000Z'
    data:
      status: closed
    id: 64c170e1c1d1f89163bb5b10
    type: status-change
  author: ctheodoris
  created_at: 2023-07-26 18:15:45+00:00
  id: 64c170e1c1d1f89163bb5b10
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/58015c33c4c76a3882ea428ae3c3d399.svg
      fullname: Yuxuan Du
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: DYXDAVE
      type: user
    createdAt: '2023-07-27T06:10:38.000Z'
    data:
      edited: false
      editors:
      - DYXDAVE
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9590955376625061
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/58015c33c4c76a3882ea428ae3c3d399.svg
          fullname: Yuxuan Du
          isHf: false
          isPro: false
          name: DYXDAVE
          type: user
        html: '<p>Thank you for your answer. It definitely solved my question.<br>(I
          was thinking using the rank of absolute value of gene''s fold change compare
          to the normalization factor since it prioritize the genes that changed a
          lot, but this encoding will lose the information of up-regulation and down-regulation,
          which makes is a bad choice)<br>It is reasonable that  absent genes are
          informative to the model. </p>

          '
        raw: "Thank you for your answer. It definitely solved my question. \n(I was\
          \ thinking using the rank of absolute value of gene's fold change compare\
          \ to the normalization factor since it prioritize the genes that changed\
          \ a lot, but this encoding will lose the information of up-regulation and\
          \ down-regulation, which makes is a bad choice)\nIt is reasonable that \
          \ absent genes are informative to the model. "
        updatedAt: '2023-07-27T06:10:38.423Z'
      numEdits: 0
      reactions: []
    id: 64c20a5e275dc8cd7f22d6ee
    type: comment
  author: DYXDAVE
  content: "Thank you for your answer. It definitely solved my question. \n(I was\
    \ thinking using the rank of absolute value of gene's fold change compare to the\
    \ normalization factor since it prioritize the genes that changed a lot, but this\
    \ encoding will lose the information of up-regulation and down-regulation, which\
    \ makes is a bad choice)\nIt is reasonable that  absent genes are informative\
    \ to the model. "
  created_at: 2023-07-27 05:10:38+00:00
  edited: false
  hidden: false
  id: 64c20a5e275dc8cd7f22d6ee
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 135
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Question about rank value encoding
