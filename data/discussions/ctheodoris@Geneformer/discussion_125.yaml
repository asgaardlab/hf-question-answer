!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jinbo1129
conflicting_files: null
created_at: 2023-07-18 07:02:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
      fullname: zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jinbo1129
      type: user
    createdAt: '2023-07-18T08:02:20.000Z'
    data:
      edited: false
      editors:
      - jinbo1129
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3604764938354492
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
          fullname: zhang
          isHf: false
          isPro: false
          name: jinbo1129
          type: user
        html: "<p>hello, thank for this great tool !!!<br>I try to do the in_silico_perturber\
          \ for my own data. I look into the codes of in_silico_perturber, and for\
          \ this:</p>\n<pre><code>        if (self.tokens_to_perturb != \"all\") and\
          \ (self.perturb_type != \"overexpress\"):\n            # minimum # genes\
          \ needed for perturbation test\n            min_genes = len(self.tokens_to_perturb)\n\
          \            def if_has_tokens_to_perturb(example):\n                return\
          \ (len(set(example[\"input_ids\"]).intersection(self.tokens_to_perturb))&gt;min_genes)\n\
          \            filtered_input_data = filtered_input_data.filter(if_has_tokens_to_perturb,\
          \ num_proc=self.nproc)\n</code></pre>\n<p>Should \"&gt;min_genes\" change\
          \ to \"&gt;0\" ?</p>\n<p>I got 0 rows of filtered_input_data after running\
          \ these codes.<br>Thanks !!!</p>\n"
        raw: "hello, thank for this great tool !!!\r\nI try to do the in_silico_perturber\
          \ for my own data. I look into the codes of in_silico_perturber, and for\
          \ this:\r\n```\r\n        if (self.tokens_to_perturb != \"all\") and (self.perturb_type\
          \ != \"overexpress\"):\r\n            # minimum # genes needed for perturbation\
          \ test\r\n            min_genes = len(self.tokens_to_perturb)\r\n      \
          \      def if_has_tokens_to_perturb(example):\r\n                return\
          \ (len(set(example[\"input_ids\"]).intersection(self.tokens_to_perturb))>min_genes)\r\
          \n            filtered_input_data = filtered_input_data.filter(if_has_tokens_to_perturb,\
          \ num_proc=self.nproc)\r\n```\r\n\r\nShould \">min_genes\" change to \"\
          >0\" ?\r\n\r\nI got 0 rows of filtered_input_data after running these codes.\r\
          \nThanks !!!"
        updatedAt: '2023-07-18T08:02:20.702Z'
      numEdits: 0
      reactions: []
    id: 64b6470c107dfba5fd243e6e
    type: comment
  author: jinbo1129
  content: "hello, thank for this great tool !!!\r\nI try to do the in_silico_perturber\
    \ for my own data. I look into the codes of in_silico_perturber, and for this:\r\
    \n```\r\n        if (self.tokens_to_perturb != \"all\") and (self.perturb_type\
    \ != \"overexpress\"):\r\n            # minimum # genes needed for perturbation\
    \ test\r\n            min_genes = len(self.tokens_to_perturb)\r\n            def\
    \ if_has_tokens_to_perturb(example):\r\n                return (len(set(example[\"\
    input_ids\"]).intersection(self.tokens_to_perturb))>min_genes)\r\n           \
    \ filtered_input_data = filtered_input_data.filter(if_has_tokens_to_perturb, num_proc=self.nproc)\r\
    \n```\r\n\r\nShould \">min_genes\" change to \">0\" ?\r\n\r\nI got 0 rows of filtered_input_data\
    \ after running these codes.\r\nThanks !!!"
  created_at: 2023-07-18 07:02:20+00:00
  edited: false
  hidden: false
  id: 64b6470c107dfba5fd243e6e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-18T08:19:44.000Z'
    data:
      edited: true
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8650043606758118
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your interest in Geneformer! Please ensure you have\
          \ pulled the updated version and check the documentation of the options\
          \ with help(InSilicoPerturber). If you provide a list of genes to perturb,\
          \ they will be perturbed as a group so there must be cells that express\
          \ all genes in the list. If you want to perturb them one by one, you can\
          \ either use the \u201Call\u201D option if it\u2019s nearing the full list\
          \ of genes in the cell, or you can run the in silico perturber for each\
          \ individual gene if it\u2019s a small list. This will parallelize by cells\
          \ rather than by genes so that batches involve multiple cells and it will\
          \ be more efficient.</p>\n<p>Update: <span data-props=\"{&quot;user&quot;:&quot;jinbo1129&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/jinbo1129\"\
          >@<span class=\"underline\">jinbo1129</span></a></span>\n\n\t</span></span>\
          \ this should be &gt;=min_genes though. I just updated this in the code.\
          \ Thank you!</p>\n"
        raw: "Thank you for your interest in Geneformer! Please ensure you have pulled\
          \ the updated version and check the documentation of the options with help(InSilicoPerturber).\
          \ If you provide a list of genes to perturb, they will be perturbed as a\
          \ group so there must be cells that express all genes in the list. If you\
          \ want to perturb them one by one, you can either use the \u201Call\u201D\
          \ option if it\u2019s nearing the full list of genes in the cell, or you\
          \ can run the in silico perturber for each individual gene if it\u2019s\
          \ a small list. This will parallelize by cells rather than by genes so that\
          \ batches involve multiple cells and it will be more efficient.\n\nUpdate:\
          \ @jinbo1129 this should be >=min_genes though. I just updated this in the\
          \ code. Thank you!"
        updatedAt: '2023-07-19T19:40:29.070Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - jinbo1129
      relatedEventId: 64b64b20e15acdad80e208f4
    id: 64b64b20e15acdad80e208f2
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer! Please ensure you have pulled\
    \ the updated version and check the documentation of the options with help(InSilicoPerturber).\
    \ If you provide a list of genes to perturb, they will be perturbed as a group\
    \ so there must be cells that express all genes in the list. If you want to perturb\
    \ them one by one, you can either use the \u201Call\u201D option if it\u2019s\
    \ nearing the full list of genes in the cell, or you can run the in silico perturber\
    \ for each individual gene if it\u2019s a small list. This will parallelize by\
    \ cells rather than by genes so that batches involve multiple cells and it will\
    \ be more efficient.\n\nUpdate: @jinbo1129 this should be >=min_genes though.\
    \ I just updated this in the code. Thank you!"
  created_at: 2023-07-18 07:19:44+00:00
  edited: true
  hidden: false
  id: 64b64b20e15acdad80e208f2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-18T08:19:44.000Z'
    data:
      status: closed
    id: 64b64b20e15acdad80e208f4
    type: status-change
  author: ctheodoris
  created_at: 2023-07-18 07:19:44+00:00
  id: 64b64b20e15acdad80e208f4
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
      fullname: zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jinbo1129
      type: user
    createdAt: '2023-07-21T01:45:41.000Z'
    data:
      edited: false
      editors:
      - jinbo1129
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5952792763710022
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
          fullname: zhang
          isHf: false
          isPro: false
          name: jinbo1129
          type: user
        html: '<p>Thanks !!!</p>

          '
        raw: Thanks !!!
        updatedAt: '2023-07-21T01:45:41.387Z'
      numEdits: 0
      reactions: []
    id: 64b9e3457132196e0827808a
    type: comment
  author: jinbo1129
  content: Thanks !!!
  created_at: 2023-07-21 00:45:41+00:00
  edited: false
  hidden: false
  id: 64b9e3457132196e0827808a
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 125
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Question about the "in_silico_perturber.py" codes
