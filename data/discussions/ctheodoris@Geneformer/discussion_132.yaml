!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Theodore94
conflicting_files: null
created_at: 2023-07-22 12:45:00+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
      fullname: Theodore Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Theodore94
      type: user
    createdAt: '2023-07-22T13:45:00.000Z'
    data:
      edited: true
      editors:
      - Theodore94
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9034691452980042
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
          fullname: Theodore Liu
          isHf: false
          isPro: false
          name: Theodore94
          type: user
        html: '<p>Hello, first of all thank you for your wonderful work, in the process
          of Tokenizing I have a lot of confusion,<br>I use barcodes TSV, the features,
          TSV and matrix. These three files for loom MTX format file, after tokening
          in the dataset arrow file is only 464bytes,<br>Then I downloaded loom file
          from GEO, and found that after tokening it is still only a few hundred bytes,
          my own data is now in fastq format, so do you have any good suggestions
          for input data?<br> And for {"cell_type": "cell_type", "organ_major": "organ_major"},
          since it is optional, why does the code not work when I remove this parameter?
          Looking forward to your reply!</p>

          '
        raw: "Hello, first of all thank you for your wonderful work, in the process\
          \ of Tokenizing I have a lot of confusion, \nI use barcodes TSV, the features,\
          \ TSV and matrix. These three files for loom MTX format file, after tokening\
          \ in the dataset arrow file is only 464bytes, \nThen I downloaded loom file\
          \ from GEO, and found that after tokening it is still only a few hundred\
          \ bytes, my own data is now in fastq format, so do you have any good suggestions\
          \ for input data? \n And for {\"cell_type\": \"cell_type\", \"organ_major\"\
          : \"organ_major\"}, since it is optional, why does the code not work when\
          \ I remove this parameter? Looking forward to your reply!"
        updatedAt: '2023-07-22T13:46:44.906Z'
      numEdits: 1
      reactions: []
    id: 64bbdd5c81caff7f1800ebbd
    type: comment
  author: Theodore94
  content: "Hello, first of all thank you for your wonderful work, in the process\
    \ of Tokenizing I have a lot of confusion, \nI use barcodes TSV, the features,\
    \ TSV and matrix. These three files for loom MTX format file, after tokening in\
    \ the dataset arrow file is only 464bytes, \nThen I downloaded loom file from\
    \ GEO, and found that after tokening it is still only a few hundred bytes, my\
    \ own data is now in fastq format, so do you have any good suggestions for input\
    \ data? \n And for {\"cell_type\": \"cell_type\", \"organ_major\": \"organ_major\"\
    }, since it is optional, why does the code not work when I remove this parameter?\
    \ Looking forward to your reply!"
  created_at: 2023-07-22 12:45:00+00:00
  edited: true
  hidden: false
  id: 64bbdd5c81caff7f1800ebbd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-22T15:12:04.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9039574861526489
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! Please pull the current
          version. The default is no custom cell attribute dictionary so there should
          not be a problem with removing this. Regarding the input format, the input
          file should be a .loom file in the format as described in detail in the
          transcriptome tokenizing example in the repository. If you believe you are
          providing a file in this format and you are still having issues, please
          respond with a sample of the column and row attributes and their values
          and a sample of the value matrix so I can confirm if there is anything unexpected
          about the format.</p>

          '
        raw: Thank you for your interest in Geneformer! Please pull the current version.
          The default is no custom cell attribute dictionary so there should not be
          a problem with removing this. Regarding the input format, the input file
          should be a .loom file in the format as described in detail in the transcriptome
          tokenizing example in the repository. If you believe you are providing a
          file in this format and you are still having issues, please respond with
          a sample of the column and row attributes and their values and a sample
          of the value matrix so I can confirm if there is anything unexpected about
          the format.
        updatedAt: '2023-07-22T15:12:04.212Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64bbf1c4891751ce9bf72126
    id: 64bbf1c4891751ce9bf72124
    type: comment
  author: ctheodoris
  content: Thank you for your interest in Geneformer! Please pull the current version.
    The default is no custom cell attribute dictionary so there should not be a problem
    with removing this. Regarding the input format, the input file should be a .loom
    file in the format as described in detail in the transcriptome tokenizing example
    in the repository. If you believe you are providing a file in this format and
    you are still having issues, please respond with a sample of the column and row
    attributes and their values and a sample of the value matrix so I can confirm
    if there is anything unexpected about the format.
  created_at: 2023-07-22 14:12:04+00:00
  edited: false
  hidden: false
  id: 64bbf1c4891751ce9bf72124
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-22T15:12:04.000Z'
    data:
      status: closed
    id: 64bbf1c4891751ce9bf72126
    type: status-change
  author: ctheodoris
  created_at: 2023-07-22 14:12:04+00:00
  id: 64bbf1c4891751ce9bf72126
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
      fullname: Theodore Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Theodore94
      type: user
    createdAt: '2023-07-22T16:05:54.000Z'
    data:
      edited: false
      editors:
      - Theodore94
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7898268699645996
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
          fullname: Theodore Liu
          isHf: false
          isPro: false
          name: Theodore94
          type: user
        html: '<p>git clone <a href="https://huggingface.co/ctheodoris/Geneformer">https://huggingface.co/ctheodoris/Geneformer</a></p>

          <p>cd Geneformer</p>

          <p>pip install .</p>

          <p>I installed it according to this code, what should I do if I update to
          the latest version?</p>

          '
        raw: 'git clone https://huggingface.co/ctheodoris/Geneformer


          cd Geneformer


          pip install .


          I installed it according to this code, what should I do if I update to the
          latest version?'
        updatedAt: '2023-07-22T16:05:54.746Z'
      numEdits: 0
      reactions: []
    id: 64bbfe6281caff7f18046647
    type: comment
  author: Theodore94
  content: 'git clone https://huggingface.co/ctheodoris/Geneformer


    cd Geneformer


    pip install .


    I installed it according to this code, what should I do if I update to the latest
    version?'
  created_at: 2023-07-22 15:05:54+00:00
  edited: false
  hidden: false
  id: 64bbfe6281caff7f18046647
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-22T16:22:39.000Z'
    data:
      edited: true
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9185786247253418
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Yes, from inside the Geneformer directory, the command would be:<br>    git
          pull</p>

          '
        raw: "Yes, from inside the Geneformer directory, the command would be:\n \
          \   git pull"
        updatedAt: '2023-07-22T16:22:56.148Z'
      numEdits: 1
      reactions: []
    id: 64bc024f4b4ff0d5092954ef
    type: comment
  author: ctheodoris
  content: "Yes, from inside the Geneformer directory, the command would be:\n   \
    \ git pull"
  created_at: 2023-07-22 15:22:39+00:00
  edited: true
  hidden: false
  id: 64bc024f4b4ff0d5092954ef
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
      fullname: Theodore Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Theodore94
      type: user
    createdAt: '2023-07-23T02:14:50.000Z'
    data:
      edited: false
      editors:
      - Theodore94
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5183449983596802
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
          fullname: Theodore Liu
          isHf: false
          isPro: false
          name: Theodore94
          type: user
        html: '<p>Thank you very much for your patient guidance. Here are the contents
          of my loom file and the code I used. Please check why the arrow file is
          only 464bytes long.<br>Gene number: 36,601</p>

          <p>Cell count: 13770</p>

          <p>All row property names:</p>

          <p>[''ensembl_id'', ''feature_types'', ''var_names'']</p>

          <p>All column property names:</p>

          <p>[''n_counts'', ''obs_names'', ''sample_type'']</p>

          <p>Gene name: [''MIR1302-2HG'' ''FAM138A'' ''OR4F5''... ''AC007325.1'' ''AC007325.4''</p>

          <p>''AC007325.2]</p>

          <p>Cell name: [''AAACCCAAGCTGCCTG-1'' ''AAACCCACACGCGTCA-1'' ''AAACCCAGTACAATAG-1''...</p>

          <p>''TTTGTTGTCGTTGTTT-1'' ''TTTGTTGTCTGTCAGA-1'' ''TTTGTTGTCTGTCGTC-1'']</p>

          <p>Gene expression matrix:</p>

          <p>[[0.0.0.... 0.0.0. 0.</p>

          <p>[0. 0. 0.... 0. 0. 0.</p>

          <p>[0. 0. 0.... 0. 0. 0.</p>

          <p>...</p>

          <p>[0. 0. 0.... 0. 0. 0.</p>

          <p>[0. 0. 0.... 0. 0. 0.</p>

          <p>[0. 0. 0.... 0. 0. 0.]</p>

          <p>Total reading count per cell: [20354.8665. 14138.... 19214.17543.6870.]</p>

          <p>tk = TranscriptomeTokenizer({"obs_names": "obs_names", "sample_type":
          "sample_type"}, nproc=4)<br>tk.tokenize_data("/home/data/t110343/test/data_test.loom",
          "/home/data/t110343/test", "mydata")</p>

          '
        raw: 'Thank you very much for your patient guidance. Here are the contents
          of my loom file and the code I used. Please check why the arrow file is
          only 464bytes long.

          Gene number: 36,601


          Cell count: 13770


          All row property names:


          [''ensembl_id'', ''feature_types'', ''var_names'']


          All column property names:


          [''n_counts'', ''obs_names'', ''sample_type'']


          Gene name: [''MIR1302-2HG'' ''FAM138A'' ''OR4F5''... ''AC007325.1'' ''AC007325.4''


          ''AC007325.2]


          Cell name: [''AAACCCAAGCTGCCTG-1'' ''AAACCCACACGCGTCA-1'' ''AAACCCAGTACAATAG-1''...


          ''TTTGTTGTCGTTGTTT-1'' ''TTTGTTGTCTGTCAGA-1'' ''TTTGTTGTCTGTCGTC-1'']


          Gene expression matrix:


          [[0.0.0.... 0.0.0. 0.


          [0. 0. 0.... 0. 0. 0.


          [0. 0. 0.... 0. 0. 0.


          ...


          [0. 0. 0.... 0. 0. 0.


          [0. 0. 0.... 0. 0. 0.


          [0. 0. 0.... 0. 0. 0.]


          Total reading count per cell: [20354.8665. 14138.... 19214.17543.6870.]



          tk = TranscriptomeTokenizer({"obs_names": "obs_names", "sample_type": "sample_type"},
          nproc=4)

          tk.tokenize_data("/home/data/t110343/test/data_test.loom", "/home/data/t110343/test",
          "mydata")'
        updatedAt: '2023-07-23T02:14:50.156Z'
      numEdits: 0
      reactions: []
    id: 64bc8d1a2915a879706a2d2c
    type: comment
  author: Theodore94
  content: 'Thank you very much for your patient guidance. Here are the contents of
    my loom file and the code I used. Please check why the arrow file is only 464bytes
    long.

    Gene number: 36,601


    Cell count: 13770


    All row property names:


    [''ensembl_id'', ''feature_types'', ''var_names'']


    All column property names:


    [''n_counts'', ''obs_names'', ''sample_type'']


    Gene name: [''MIR1302-2HG'' ''FAM138A'' ''OR4F5''... ''AC007325.1'' ''AC007325.4''


    ''AC007325.2]


    Cell name: [''AAACCCAAGCTGCCTG-1'' ''AAACCCACACGCGTCA-1'' ''AAACCCAGTACAATAG-1''...


    ''TTTGTTGTCGTTGTTT-1'' ''TTTGTTGTCTGTCAGA-1'' ''TTTGTTGTCTGTCGTC-1'']


    Gene expression matrix:


    [[0.0.0.... 0.0.0. 0.


    [0. 0. 0.... 0. 0. 0.


    [0. 0. 0.... 0. 0. 0.


    ...


    [0. 0. 0.... 0. 0. 0.


    [0. 0. 0.... 0. 0. 0.


    [0. 0. 0.... 0. 0. 0.]


    Total reading count per cell: [20354.8665. 14138.... 19214.17543.6870.]



    tk = TranscriptomeTokenizer({"obs_names": "obs_names", "sample_type": "sample_type"},
    nproc=4)

    tk.tokenize_data("/home/data/t110343/test/data_test.loom", "/home/data/t110343/test",
    "mydata")'
  created_at: 2023-07-23 01:14:50+00:00
  edited: false
  hidden: false
  id: 64bc8d1a2915a879706a2d2c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-23T03:51:51.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9134956002235413
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>What do your Ensembl IDs look like?</p>

          <p>Also, I wanted to emphasize that the input should be raw counts - I am
          mentioning this since your counts and n_counts values imply the counts are
          not integers and may not be raw counts.</p>

          '
        raw: 'What do your Ensembl IDs look like?


          Also, I wanted to emphasize that the input should be raw counts - I am mentioning
          this since your counts and n_counts values imply the counts are not integers
          and may not be raw counts.'
        updatedAt: '2023-07-23T03:51:51.057Z'
      numEdits: 0
      reactions: []
    id: 64bca3d7f8f28a19b0b60219
    type: comment
  author: ctheodoris
  content: 'What do your Ensembl IDs look like?


    Also, I wanted to emphasize that the input should be raw counts - I am mentioning
    this since your counts and n_counts values imply the counts are not integers and
    may not be raw counts.'
  created_at: 2023-07-23 02:51:51+00:00
  edited: false
  hidden: false
  id: 64bca3d7f8f28a19b0b60219
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
      fullname: Theodore Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Theodore94
      type: user
    createdAt: '2023-07-25T16:17:19.000Z'
    data:
      edited: false
      editors:
      - Theodore94
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.946631669998169
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2d771b3d98ef13076e95f54a76cbfd5.svg
          fullname: Theodore Liu
          isHf: false
          isPro: false
          name: Theodore94
          type: user
        html: '<p>Thank you very much for your help, now that I have converted the
          seurat object to a loom file and found that there is no ensembl id, I wonder
          how the loom file fits the following two requirements:<br>Required row (gene)
          attribute: "ensembl_id";    Ensembl ID for each gene<br>Required col (cell)
          attribute: "n_counts";    total read counts in that cell<br>This question
          has puzzled me for several days, and I am looking forward to your answer.</p>

          '
        raw: 'Thank you very much for your help, now that I have converted the seurat
          object to a loom file and found that there is no ensembl id, I wonder how
          the loom file fits the following two requirements:

          Required row (gene) attribute: "ensembl_id";    Ensembl ID for each gene

          Required col (cell) attribute: "n_counts";    total read counts in that
          cell

          This question has puzzled me for several days, and I am looking forward
          to your answer.'
        updatedAt: '2023-07-25T16:17:19.738Z'
      numEdits: 0
      reactions: []
    id: 64bff58f9638fbb8e1a197f3
    type: comment
  author: Theodore94
  content: 'Thank you very much for your help, now that I have converted the seurat
    object to a loom file and found that there is no ensembl id, I wonder how the
    loom file fits the following two requirements:

    Required row (gene) attribute: "ensembl_id";    Ensembl ID for each gene

    Required col (cell) attribute: "n_counts";    total read counts in that cell

    This question has puzzled me for several days, and I am looking forward to your
    answer.'
  created_at: 2023-07-25 15:17:19+00:00
  edited: false
  hidden: false
  id: 64bff58f9638fbb8e1a197f3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-25T23:03:26.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8376646041870117
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your question. As indicated in the example for tokenizing\
          \ transcriptomes, you can use Ensembl Biomart to convert other types of\
          \ gene annotations to Ensembl IDs (<a rel=\"nofollow\" href=\"https://useast.ensembl.org/info/data/biomart/index.html\"\
          >https://useast.ensembl.org/info/data/biomart/index.html</a>).</p>\n<p>The\
          \ n_counts are just a sum of the total number of read counts in that cell.\
          \ Again, please note that the input should be the raw count matrix.</p>\n\
          <p>You could do something like this: </p>\n<pre><code>with lp.connect(f\"\
          {input_file}\") as data:\n    total_count = []\n\n    for (ix, selection,\
          \ view) in data.scan(axis=1):\n        # sum total counts\n        total_count_view\
          \ = np.sum(view[:,:], axis=0)\n        total_count += total_count_view.tolist()\n\
          \n    data.ca[\"n_counts\"] = total_count\n</code></pre>\n"
        raw: "Thank you for your question. As indicated in the example for tokenizing\
          \ transcriptomes, you can use Ensembl Biomart to convert other types of\
          \ gene annotations to Ensembl IDs (https://useast.ensembl.org/info/data/biomart/index.html).\n\
          \nThe n_counts are just a sum of the total number of read counts in that\
          \ cell. Again, please note that the input should be the raw count matrix.\n\
          \nYou could do something like this: \n\n```\nwith lp.connect(f\"{input_file}\"\
          ) as data:\n    total_count = []\n\n    for (ix, selection, view) in data.scan(axis=1):\n\
          \        # sum total counts\n        total_count_view = np.sum(view[:,:],\
          \ axis=0)\n        total_count += total_count_view.tolist()\n\n    data.ca[\"\
          n_counts\"] = total_count\n```"
        updatedAt: '2023-07-25T23:03:26.057Z'
      numEdits: 0
      reactions: []
    id: 64c054beabe5f855b79021f4
    type: comment
  author: ctheodoris
  content: "Thank you for your question. As indicated in the example for tokenizing\
    \ transcriptomes, you can use Ensembl Biomart to convert other types of gene annotations\
    \ to Ensembl IDs (https://useast.ensembl.org/info/data/biomart/index.html).\n\n\
    The n_counts are just a sum of the total number of read counts in that cell. Again,\
    \ please note that the input should be the raw count matrix.\n\nYou could do something\
    \ like this: \n\n```\nwith lp.connect(f\"{input_file}\") as data:\n    total_count\
    \ = []\n\n    for (ix, selection, view) in data.scan(axis=1):\n        # sum total\
    \ counts\n        total_count_view = np.sum(view[:,:], axis=0)\n        total_count\
    \ += total_count_view.tolist()\n\n    data.ca[\"n_counts\"] = total_count\n```"
  created_at: 2023-07-25 22:03:26+00:00
  edited: false
  hidden: false
  id: 64c054beabe5f855b79021f4
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 132
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Parameter tuning for tokenizer
