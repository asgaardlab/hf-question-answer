!!python/object:huggingface_hub.community.DiscussionWithDetails
author: nwt
conflicting_files: null
created_at: 2023-08-10 14:34:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64d1b501e9cac0020bdc6eec/2Ay0dhA4JZSMi_p5gWiVV.jpeg?w=200&h=200&f=face
      fullname: wtni-gidle
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nwt
      type: user
    createdAt: '2023-08-10T15:34:18.000Z'
    data:
      edited: false
      editors:
      - nwt
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9177811741828918
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64d1b501e9cac0020bdc6eec/2Ay0dhA4JZSMi_p5gWiVV.jpeg?w=200&h=200&f=face
          fullname: wtni-gidle
          isHf: false
          isPro: false
          name: nwt
          type: user
        html: '<p>Thank you for your great work! </p>

          <p>I was trying to fine-tune the model using spatial transcriptome data.
          However, I found that about 60% of spots/cells have a length of 2048 after
          tokenization on a spatial transcriptome dataset, which means that a considerable
          part of the spots are truncated. (Actually 30% of spots had at least 3000
          genes that appear in the token vocabulary.) There is no problem when the
          spot length slightly exceeds the maximum input size, but will it be problematic
          if the spot length exceeds the maximum input size significantly? And whether
          spatial transcriptome data can be used for this model?</p>

          <p>I noticed that you have proposed "selecting 2048 genes in an unbiased
          way from the initial bulk RNAseq to present to the model, for example by
          intersecting with genes detected in that cell type in usual single cell
          RNAseq data." in a previous similar discussion <a href="https://huggingface.co/ctheodoris/Geneformer/discussions/134">https://huggingface.co/ctheodoris/Geneformer/discussions/134</a>.
          May I use a similar way such as intersecting genes using scRNA-seq data
          from adjacent tissue sections as an alternative strategy?</p>

          <p>Thanks!</p>

          '
        raw: "Thank you for your great work! \r\n\r\nI was trying to fine-tune the\
          \ model using spatial transcriptome data. However, I found that about 60%\
          \ of spots/cells have a length of 2048 after tokenization on a spatial transcriptome\
          \ dataset, which means that a considerable part of the spots are truncated.\
          \ (Actually 30% of spots had at least 3000 genes that appear in the token\
          \ vocabulary.) There is no problem when the spot length slightly exceeds\
          \ the maximum input size, but will it be problematic if the spot length\
          \ exceeds the maximum input size significantly? And whether spatial transcriptome\
          \ data can be used for this model?\r\n\r\nI noticed that you have proposed\
          \ \"selecting 2048 genes in an unbiased way from the initial bulk RNAseq\
          \ to present to the model, for example by intersecting with genes detected\
          \ in that cell type in usual single cell RNAseq data.\" in a previous similar\
          \ discussion https://huggingface.co/ctheodoris/Geneformer/discussions/134.\
          \ May I use a similar way such as intersecting genes using scRNA-seq data\
          \ from adjacent tissue sections as an alternative strategy?\r\n\r\nThanks!"
        updatedAt: '2023-08-10T15:34:18.353Z'
      numEdits: 0
      reactions: []
    id: 64d5037a7705391d39116833
    type: comment
  author: nwt
  content: "Thank you for your great work! \r\n\r\nI was trying to fine-tune the model\
    \ using spatial transcriptome data. However, I found that about 60% of spots/cells\
    \ have a length of 2048 after tokenization on a spatial transcriptome dataset,\
    \ which means that a considerable part of the spots are truncated. (Actually 30%\
    \ of spots had at least 3000 genes that appear in the token vocabulary.) There\
    \ is no problem when the spot length slightly exceeds the maximum input size,\
    \ but will it be problematic if the spot length exceeds the maximum input size\
    \ significantly? And whether spatial transcriptome data can be used for this model?\r\
    \n\r\nI noticed that you have proposed \"selecting 2048 genes in an unbiased way\
    \ from the initial bulk RNAseq to present to the model, for example by intersecting\
    \ with genes detected in that cell type in usual single cell RNAseq data.\" in\
    \ a previous similar discussion https://huggingface.co/ctheodoris/Geneformer/discussions/134.\
    \ May I use a similar way such as intersecting genes using scRNA-seq data from\
    \ adjacent tissue sections as an alternative strategy?\r\n\r\nThanks!"
  created_at: 2023-08-10 14:34:18+00:00
  edited: false
  hidden: false
  id: 64d5037a7705391d39116833
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-08-11T05:46:55.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9385418891906738
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! Yes, as mentioned in
          other discussions in this repository, the maximum input size of the current
          model is 2048, which is a considerably large input size for full dense attention,
          which has quadratic time dependency. This fully encompassed 93% of the single
          cell transcriptomes in Genecorpus-30M and was chosen to balance performance
          in modeling accuracy and compute. I would recommend testing the model with
          the 2048 input size to determine whether it is able to achieve efficacious
          predictions for your scientific question, as it may be sufficient despite
          the truncation of some of your data. We have not tested the model with spatial
          transcriptomics specifically but as long as you are fine-tuning for your
          downstream task, the model should learn any differences in distribution
          compared to the initial single cell RNAseq data used for pretraining and
          it should be compatible. For ~3000 detected genes, the rank value encoding
          should prioritize the top-ranked 2048 genes based on their normalization
          factor-scaled expression without having to restrict the initial genes further
          via a strategy like the one suggested for bulk RNAseq, which has an order
          of magnitude more genes detected. However, you could directly compare the
          performance using both strategies and select the one that works best.</p>

          '
        raw: Thank you for your interest in Geneformer! Yes, as mentioned in other
          discussions in this repository, the maximum input size of the current model
          is 2048, which is a considerably large input size for full dense attention,
          which has quadratic time dependency. This fully encompassed 93% of the single
          cell transcriptomes in Genecorpus-30M and was chosen to balance performance
          in modeling accuracy and compute. I would recommend testing the model with
          the 2048 input size to determine whether it is able to achieve efficacious
          predictions for your scientific question, as it may be sufficient despite
          the truncation of some of your data. We have not tested the model with spatial
          transcriptomics specifically but as long as you are fine-tuning for your
          downstream task, the model should learn any differences in distribution
          compared to the initial single cell RNAseq data used for pretraining and
          it should be compatible. For ~3000 detected genes, the rank value encoding
          should prioritize the top-ranked 2048 genes based on their normalization
          factor-scaled expression without having to restrict the initial genes further
          via a strategy like the one suggested for bulk RNAseq, which has an order
          of magnitude more genes detected. However, you could directly compare the
          performance using both strategies and select the one that works best.
        updatedAt: '2023-08-11T05:46:55.996Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64d5cb508711e883ca43f491
    id: 64d5cb4f8711e883ca43f48d
    type: comment
  author: ctheodoris
  content: Thank you for your interest in Geneformer! Yes, as mentioned in other discussions
    in this repository, the maximum input size of the current model is 2048, which
    is a considerably large input size for full dense attention, which has quadratic
    time dependency. This fully encompassed 93% of the single cell transcriptomes
    in Genecorpus-30M and was chosen to balance performance in modeling accuracy and
    compute. I would recommend testing the model with the 2048 input size to determine
    whether it is able to achieve efficacious predictions for your scientific question,
    as it may be sufficient despite the truncation of some of your data. We have not
    tested the model with spatial transcriptomics specifically but as long as you
    are fine-tuning for your downstream task, the model should learn any differences
    in distribution compared to the initial single cell RNAseq data used for pretraining
    and it should be compatible. For ~3000 detected genes, the rank value encoding
    should prioritize the top-ranked 2048 genes based on their normalization factor-scaled
    expression without having to restrict the initial genes further via a strategy
    like the one suggested for bulk RNAseq, which has an order of magnitude more genes
    detected. However, you could directly compare the performance using both strategies
    and select the one that works best.
  created_at: 2023-08-11 04:46:55+00:00
  edited: false
  hidden: false
  id: 64d5cb4f8711e883ca43f48d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-08-11T05:46:56.000Z'
    data:
      status: closed
    id: 64d5cb508711e883ca43f491
    type: status-change
  author: ctheodoris
  created_at: 2023-08-11 04:46:56+00:00
  id: 64d5cb508711e883ca43f491
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 210
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Questions about significantly exceeding the input size
