!!python/object:huggingface_hub.community.DiscussionWithDetails
author: zxh1210
conflicting_files: null
created_at: 2023-06-15 14:02:55+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/01ee362402f59396c2fdf7e4afa259a5.svg
      fullname: Xinghao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zxh1210
      type: user
    createdAt: '2023-06-15T15:02:55.000Z'
    data:
      edited: false
      editors:
      - zxh1210
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8926190733909607
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/01ee362402f59396c2fdf7e4afa259a5.svg
          fullname: Xinghao
          isHf: false
          isPro: false
          name: zxh1210
          type: user
        html: '<p>Hello, congrats on the work</p>

          <p>I use provided gene_name_id_dict.pkl to map gene names and there are
          ~10k genes without proper mapping. Most of these are pseudogenes though
          around 500 are not. Do I need to remove the unmapped genes for fine-tune
          and in silico perturbation?</p>

          <p>For in silico perturbation, I used a subset with ~2k cells. The output
          from pertrubation_stats (all genes with delete and all cells) only included
          ~3k genes. Is this expected due to the low cell number or similarity across
          the start-goal status? What''s the threshold applied to export the top perturbed
          stats?</p>

          <p>Thank you~</p>

          '
        raw: "Hello, congrats on the work\r\n\r\nI use provided gene_name_id_dict.pkl\
          \ to map gene names and there are ~10k genes without proper mapping. Most\
          \ of these are pseudogenes though around 500 are not. Do I need to remove\
          \ the unmapped genes for fine-tune and in silico perturbation?\r\n\r\nFor\
          \ in silico perturbation, I used a subset with ~2k cells. The output from\
          \ pertrubation_stats (all genes with delete and all cells) only included\
          \ ~3k genes. Is this expected due to the low cell number or similarity across\
          \ the start-goal status? What's the threshold applied to export the top\
          \ perturbed stats?\r\n\r\nThank you~"
        updatedAt: '2023-06-15T15:02:55.189Z'
      numEdits: 0
      reactions: []
    id: 648b281ff26e49efcf575394
    type: comment
  author: zxh1210
  content: "Hello, congrats on the work\r\n\r\nI use provided gene_name_id_dict.pkl\
    \ to map gene names and there are ~10k genes without proper mapping. Most of these\
    \ are pseudogenes though around 500 are not. Do I need to remove the unmapped\
    \ genes for fine-tune and in silico perturbation?\r\n\r\nFor in silico perturbation,\
    \ I used a subset with ~2k cells. The output from pertrubation_stats (all genes\
    \ with delete and all cells) only included ~3k genes. Is this expected due to\
    \ the low cell number or similarity across the start-goal status? What's the threshold\
    \ applied to export the top perturbed stats?\r\n\r\nThank you~"
  created_at: 2023-06-15 14:02:55+00:00
  edited: false
  hidden: false
  id: 648b281ff26e49efcf575394
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-15T20:14:58.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9315305352210999
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your question. The vocabulary for the model is 25,424
          protein-coding and miRNA genes (see token_dictionary.pkl). The gene_name_id_dict.pkl
          may not have the same gene names as your annotation. We suggest converting
          your genes to Ensembl IDs with Ensembl Biomart so that you can convert as
          many as possible of your genes to Ensembl IDs and then running the transcriptome
          tokenizer to convert the data to rank value encodings. If the genes you
          provide are outside of the 25,424 genes in the model''s vocabulary, they
          will not be tokenized by the transcriptome tokenizer, so you do not need
          to remove them yourself before tokenization.</p>

          <p>Regarding how many genes to expect as an output from the in silico perturbation,
          this is dependent on the number of genes tested in the perturbation, not
          on any threshold for reporting top predicted genes. The output should include
          all genes tested, along with statistics indicating whether or not the gene
          perturbation is statistically significant. The number of genes tested depends
          on various factors. As you mentioned, if the ~2K cells you selected are
          very similar, and there are only ~3K genes detected in total among the ~2K
          cells, then this would lead to only ~3K genes being tested by in silico
          perturbation. However, if you are subsetting ~2K cells from a larger dataset,
          we would expect more diversity in the genes detected and therefore tested
          by perturbation. The mode you are running for the in silico perturber also
          can affect the number of genes as an output. Particularly, if you are running
          a combination in silico deletion with an anchor gene, Gene A, then it will
          be testing only the cells where Gene A is detected and deleting each other
          gene in combination with Gene A. If Gene A is only detected in a few cells,
          then this will limit the other genes that are co-expressed for testing with
          in silico deletion. </p>

          <p>That being said, the number of ~3K genes is much lower than any number
          we had as output in our analyses. Please see Supplementary Tables 3, 5,
          and 12 as examples. The number of genes we are perturbing in these analyses
          in cardiomyocytes is ~17-19K.</p>

          '
        raw: "Thank you for your question. The vocabulary for the model is 25,424\
          \ protein-coding and miRNA genes (see token_dictionary.pkl). The gene_name_id_dict.pkl\
          \ may not have the same gene names as your annotation. We suggest converting\
          \ your genes to Ensembl IDs with Ensembl Biomart so that you can convert\
          \ as many as possible of your genes to Ensembl IDs and then running the\
          \ transcriptome tokenizer to convert the data to rank value encodings. If\
          \ the genes you provide are outside of the 25,424 genes in the model's vocabulary,\
          \ they will not be tokenized by the transcriptome tokenizer, so you do not\
          \ need to remove them yourself before tokenization.\n\nRegarding how many\
          \ genes to expect as an output from the in silico perturbation, this is\
          \ dependent on the number of genes tested in the perturbation, not on any\
          \ threshold for reporting top predicted genes. The output should include\
          \ all genes tested, along with statistics indicating whether or not the\
          \ gene perturbation is statistically significant. The number of genes tested\
          \ depends on various factors. As you mentioned, if the ~2K cells you selected\
          \ are very similar, and there are only ~3K genes detected in total among\
          \ the ~2K cells, then this would lead to only ~3K genes being tested by\
          \ in silico perturbation. However, if you are subsetting ~2K cells from\
          \ a larger dataset, we would expect more diversity in the genes detected\
          \ and therefore tested by perturbation. The mode you are running for the\
          \ in silico perturber also can affect the number of genes as an output.\
          \ Particularly, if you are running a combination in silico deletion with\
          \ an anchor gene, Gene A, then it will be testing only the cells where Gene\
          \ A is detected and deleting each other gene in combination with Gene A.\
          \ If Gene A is only detected in a few cells, then this will limit the other\
          \ genes that are co-expressed for testing with in silico deletion. \n\n\
          That being said, the number of ~3K genes is much lower than any number we\
          \ had as output in our analyses. Please see Supplementary Tables 3, 5, and\
          \ 12 as examples. The number of genes we are perturbing in these analyses\
          \ in cardiomyocytes is ~17-19K."
        updatedAt: '2023-06-15T20:14:58.324Z'
      numEdits: 0
      reactions: []
      relatedEventId: 648b7142412f81cc0c2407a9
    id: 648b7142412f81cc0c2407a8
    type: comment
  author: ctheodoris
  content: "Thank you for your question. The vocabulary for the model is 25,424 protein-coding\
    \ and miRNA genes (see token_dictionary.pkl). The gene_name_id_dict.pkl may not\
    \ have the same gene names as your annotation. We suggest converting your genes\
    \ to Ensembl IDs with Ensembl Biomart so that you can convert as many as possible\
    \ of your genes to Ensembl IDs and then running the transcriptome tokenizer to\
    \ convert the data to rank value encodings. If the genes you provide are outside\
    \ of the 25,424 genes in the model's vocabulary, they will not be tokenized by\
    \ the transcriptome tokenizer, so you do not need to remove them yourself before\
    \ tokenization.\n\nRegarding how many genes to expect as an output from the in\
    \ silico perturbation, this is dependent on the number of genes tested in the\
    \ perturbation, not on any threshold for reporting top predicted genes. The output\
    \ should include all genes tested, along with statistics indicating whether or\
    \ not the gene perturbation is statistically significant. The number of genes\
    \ tested depends on various factors. As you mentioned, if the ~2K cells you selected\
    \ are very similar, and there are only ~3K genes detected in total among the ~2K\
    \ cells, then this would lead to only ~3K genes being tested by in silico perturbation.\
    \ However, if you are subsetting ~2K cells from a larger dataset, we would expect\
    \ more diversity in the genes detected and therefore tested by perturbation. The\
    \ mode you are running for the in silico perturber also can affect the number\
    \ of genes as an output. Particularly, if you are running a combination in silico\
    \ deletion with an anchor gene, Gene A, then it will be testing only the cells\
    \ where Gene A is detected and deleting each other gene in combination with Gene\
    \ A. If Gene A is only detected in a few cells, then this will limit the other\
    \ genes that are co-expressed for testing with in silico deletion. \n\nThat being\
    \ said, the number of ~3K genes is much lower than any number we had as output\
    \ in our analyses. Please see Supplementary Tables 3, 5, and 12 as examples. The\
    \ number of genes we are perturbing in these analyses in cardiomyocytes is ~17-19K."
  created_at: 2023-06-15 19:14:58+00:00
  edited: false
  hidden: false
  id: 648b7142412f81cc0c2407a8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-15T20:14:58.000Z'
    data:
      status: closed
    id: 648b7142412f81cc0c2407a9
    type: status-change
  author: ctheodoris
  created_at: 2023-06-15 19:14:58+00:00
  id: 648b7142412f81cc0c2407a9
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 36
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: ensembl_id and in silico perturbation
