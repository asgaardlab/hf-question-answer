!!python/object:huggingface_hub.community.DiscussionWithDetails
author: LZW150
conflicting_files: null
created_at: 2023-09-18 04:59:42+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8d368ddaf8af53ad0726c3c434e33ff9.svg
      fullname: ZhiweiLiu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LZW150
      type: user
    createdAt: '2023-09-18T05:59:42.000Z'
    data:
      edited: false
      editors:
      - LZW150
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5741717219352722
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8d368ddaf8af53ad0726c3c434e33ff9.svg
          fullname: ZhiweiLiu
          isHf: false
          isPro: false
          name: LZW150
          type: user
        html: '<p>When I run the code of gene_classification.ipynb,  there was an
          error:<br>Traceback (most recent call last):<br>  File "Geneformer_sample1.py",
          line 400, in <br>    = cross_validate(subsampled_train_dataset, targets,
          labels, nsplits, subsample_size, training_args, freeze_layers, training_output_dir,
          1)<br>  File "Geneformer_sample1.py", line 294, in cross_validate<br>    trainer.train()<br>  File
          "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py",
          line 1422, in train<br>    tr_loss_step = self.training_step(model, inputs)<br>  File
          "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py",
          line 2011, in training_step<br>    loss = self.compute_loss(model, inputs)<br>  File
          "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py",
          line 2043, in compute_loss<br>    outputs = model(**inputs)<br>  File "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py",
          line 1102, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py",
          line 1751, in forward<br>    return_dict=return_dict,<br>  File "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py",
          line 1102, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py",
          line 962, in forward<br>    buffered_token_type_ids_expanded = buffered_token_type_ids.expand(batch_size,
          seq_length)<br>RuntimeError: The expanded size of the tensor (2048) must
          match the existing size (512) at non-singleton dimension 1.  Target sizes:
          [12, 2048].  Tensor sizes: [1, 512]</p>

          '
        raw: "When I run the code of gene_classification.ipynb,  there was an error:\r\
          \nTraceback (most recent call last):\r\n  File \"Geneformer_sample1.py\"\
          , line 400, in <module>\r\n    = cross_validate(subsampled_train_dataset,\
          \ targets, labels, nsplits, subsample_size, training_args, freeze_layers,\
          \ training_output_dir, 1)\r\n  File \"Geneformer_sample1.py\", line 294,\
          \ in cross_validate\r\n    trainer.train()\r\n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
          , line 1422, in train\r\n    tr_loss_step = self.training_step(model, inputs)\r\
          \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
          , line 2011, in training_step\r\n    loss = self.compute_loss(model, inputs)\r\
          \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
          , line 2043, in compute_loss\r\n    outputs = model(**inputs)\r\n  File\
          \ \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py\"\
          , line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\
          \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py\"\
          , line 1751, in forward\r\n    return_dict=return_dict,\r\n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py\"\
          , line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\
          \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py\"\
          , line 962, in forward\r\n    buffered_token_type_ids_expanded = buffered_token_type_ids.expand(batch_size,\
          \ seq_length)\r\nRuntimeError: The expanded size of the tensor (2048) must\
          \ match the existing size (512) at non-singleton dimension 1.  Target sizes:\
          \ [12, 2048].  Tensor sizes: [1, 512]"
        updatedAt: '2023-09-18T05:59:42.412Z'
      numEdits: 0
      reactions: []
    id: 6507e74e14302b1d76d8aa3f
    type: comment
  author: LZW150
  content: "When I run the code of gene_classification.ipynb,  there was an error:\r\
    \nTraceback (most recent call last):\r\n  File \"Geneformer_sample1.py\", line\
    \ 400, in <module>\r\n    = cross_validate(subsampled_train_dataset, targets,\
    \ labels, nsplits, subsample_size, training_args, freeze_layers, training_output_dir,\
    \ 1)\r\n  File \"Geneformer_sample1.py\", line 294, in cross_validate\r\n    trainer.train()\r\
    \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
    , line 1422, in train\r\n    tr_loss_step = self.training_step(model, inputs)\r\
    \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
    , line 2011, in training_step\r\n    loss = self.compute_loss(model, inputs)\r\
    \n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/trainer.py\"\
    , line 2043, in compute_loss\r\n    outputs = model(**inputs)\r\n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py\"\
    , line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File\
    \ \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py\"\
    , line 1751, in forward\r\n    return_dict=return_dict,\r\n  File \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/torch/nn/modules/module.py\"\
    , line 1102, in _call_impl\r\n    return forward_call(*input, **kwargs)\r\n  File\
    \ \"/home/guotiannanLab/liuzhiwei/.local/lib/python3.6/site-packages/transformers/models/bert/modeling_bert.py\"\
    , line 962, in forward\r\n    buffered_token_type_ids_expanded = buffered_token_type_ids.expand(batch_size,\
    \ seq_length)\r\nRuntimeError: The expanded size of the tensor (2048) must match\
    \ the existing size (512) at non-singleton dimension 1.  Target sizes: [12, 2048].\
    \  Tensor sizes: [1, 512]"
  created_at: 2023-09-18 04:59:42+00:00
  edited: false
  hidden: false
  id: 6507e74e14302b1d76d8aa3f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-15T09:32:40.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9486417174339294
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! I am not able to reproduce
          this error. My suggestion would be to ensure that the max_input_size is
          set to 2048 and that you are using the 6 layer model which is in the outer
          directory of the repository. If you continue to have this error, please
          respond with the exact code you are running / any changes you''ve made to
          the example notebook.</p>

          '
        raw: Thank you for your interest in Geneformer! I am not able to reproduce
          this error. My suggestion would be to ensure that the max_input_size is
          set to 2048 and that you are using the 6 layer model which is in the outer
          directory of the repository. If you continue to have this error, please
          respond with the exact code you are running / any changes you've made to
          the example notebook.
        updatedAt: '2023-12-15T09:32:40.086Z'
      numEdits: 0
      reactions: []
      relatedEventId: 657c1d388e7790a347f427c3
    id: 657c1d388e7790a347f427c1
    type: comment
  author: ctheodoris
  content: Thank you for your interest in Geneformer! I am not able to reproduce this
    error. My suggestion would be to ensure that the max_input_size is set to 2048
    and that you are using the 6 layer model which is in the outer directory of the
    repository. If you continue to have this error, please respond with the exact
    code you are running / any changes you've made to the example notebook.
  created_at: 2023-12-15 09:32:40+00:00
  edited: false
  hidden: false
  id: 657c1d388e7790a347f427c1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-15T09:32:40.000Z'
    data:
      status: closed
    id: 657c1d388e7790a347f427c3
    type: status-change
  author: ctheodoris
  created_at: 2023-12-15 09:32:40+00:00
  id: 657c1d388e7790a347f427c3
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 247
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: 'RuntimeError: The expanded size of the tensor (2048) must match the existing
  size (512) at non-singleton dimension 1. '
