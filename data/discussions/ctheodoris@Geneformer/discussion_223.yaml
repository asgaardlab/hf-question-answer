!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Pingiotto
conflicting_files: null
created_at: 2023-08-17 19:26:25+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2e19b0efd2e371d62a492c416f5d9ca1.svg
      fullname: Matthew Pace
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Pingiotto
      type: user
    createdAt: '2023-08-17T20:26:25.000Z'
    data:
      edited: false
      editors:
      - Pingiotto
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5953769683837891
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2e19b0efd2e371d62a492c416f5d9ca1.svg
          fullname: Matthew Pace
          isHf: false
          isPro: false
          name: Pingiotto
          type: user
        html: "<p>I am trying to reproduce some of your results using the fine-tuned\
          \ CM cell classifier model in conjugation with the human_dcm_hcm_nf dataset.\
          \ I tried to delete ADCY5, SRPK3 and ACTB (independently of each other),\
          \ all of which gave statistically insignificant results. Any guidance would\
          \ be greatly appreciated.</p>\n<pre><code>    isp = InSilicoPerturber(\n\
          \        perturb_type=\"delete\",\n        perturb_rank_shift=None,\n  \
          \      genes_to_perturb=[\"ENSG00000184343\"],\n        combos=0,\n    \
          \    anchor_gene=None,\n        model_type=\"CellClassifier\",\n       \
          \ num_classes=3,\n        emb_mode=\"cell\",\n        cell_emb_style=\"\
          mean_pool\",\n        filter_data={\"cell_type\":[\"Cardiomyocyte1\",\"\
          Cardiomyocyte2\",\"Cardiomyocyte3\"]},\n        cell_states_to_model={\n\
          \            'state_key': 'disease', \n            'start_state': 'dcm',\
          \ \n            'goal_state': 'nf', \n            'alt_states': ['hcm']\n\
          \        },\n        max_ncells=None,\n        emb_layer=0,\n        forward_batch_size=50,\n\
          \        nproc=16,\n    )\n\n    isp.perturb_data(\n        \"./CellClassifier_cardiomyopathies/\"\
          ,\n        \"./human_dcm_hcm_nf.dataset\",\n        \"./perturb_out/\",\n\
          \         prefix\n    )\n\nispstats = InSilicoPerturberStats(mode=\"goal_state_shift\"\
          ,\n                                  genes_perturbed=[\"ENSG00000184343\"\
          ],\n                                  combos=0,\n                      \
          \            anchor_gene=None,\n                                  cell_states_to_model={\"\
          disease\":([\"dcm\"],[\"nf\"],[\"hcm\"])})\n\nispstats.get_stats(\"./perturb_out/\"\
          ,\n                   None,\n                   \"./perturb_out/\",\n  \
          \                 prefix)\n</code></pre>\n<p>Results produced the cell embedding\
          \ shifts for each cell expressing the respective gene. Here is a list of\
          \ the mean values for the Shift_to_goal_end column \xB1 std dev:<br>ACTB:\
          \ 0.0013 \xB1 0.0160<br>ADCY5: -0.0011 \xB1 0.0340<br>SRPK3: -0.00105 \xB1\
          \ 0.0246</p>\n"
        raw: "I am trying to reproduce some of your results using the fine-tuned CM\
          \ cell classifier model in conjugation with the human_dcm_hcm_nf dataset.\
          \ I tried to delete ADCY5, SRPK3 and ACTB (independently of each other),\
          \ all of which gave statistically insignificant results. Any guidance would\
          \ be greatly appreciated.\r\n\r\n```\r\n    isp = InSilicoPerturber(\r\n\
          \        perturb_type=\"delete\",\r\n        perturb_rank_shift=None,\r\n\
          \        genes_to_perturb=[\"ENSG00000184343\"],\r\n        combos=0,\r\n\
          \        anchor_gene=None,\r\n        model_type=\"CellClassifier\",\r\n\
          \        num_classes=3,\r\n        emb_mode=\"cell\",\r\n        cell_emb_style=\"\
          mean_pool\",\r\n        filter_data={\"cell_type\":[\"Cardiomyocyte1\",\"\
          Cardiomyocyte2\",\"Cardiomyocyte3\"]},\r\n        cell_states_to_model={\r\
          \n            'state_key': 'disease', \r\n            'start_state': 'dcm',\
          \ \r\n            'goal_state': 'nf', \r\n            'alt_states': ['hcm']\r\
          \n        },\r\n        max_ncells=None,\r\n        emb_layer=0,\r\n   \
          \     forward_batch_size=50,\r\n        nproc=16,\r\n    )\r\n\r\n    isp.perturb_data(\r\
          \n        \"./CellClassifier_cardiomyopathies/\",\r\n        \"./human_dcm_hcm_nf.dataset\"\
          ,\r\n        \"./perturb_out/\",\r\n         prefix\r\n    )\r\n\r\nispstats\
          \ = InSilicoPerturberStats(mode=\"goal_state_shift\",\r\n              \
          \                    genes_perturbed=[\"ENSG00000184343\"],\r\n        \
          \                          combos=0,\r\n                               \
          \   anchor_gene=None,\r\n                                  cell_states_to_model={\"\
          disease\":([\"dcm\"],[\"nf\"],[\"hcm\"])})\r\n\r\nispstats.get_stats(\"\
          ./perturb_out/\",\r\n                   None,\r\n                   \"./perturb_out/\"\
          ,\r\n                   prefix)\r\n```\r\n\r\nResults produced the cell\
          \ embedding shifts for each cell expressing the respective gene. Here is\
          \ a list of the mean values for the Shift_to_goal_end column \xB1 std dev:\r\
          \nACTB: 0.0013 \xB1 0.0160\r\nADCY5: -0.0011 \xB1 0.0340\r\nSRPK3: -0.00105\
          \ \xB1 0.0246\r\n\r\n"
        updatedAt: '2023-08-17T20:26:25.792Z'
      numEdits: 0
      reactions: []
    id: 64de8271f1f6c89619a2adab
    type: comment
  author: Pingiotto
  content: "I am trying to reproduce some of your results using the fine-tuned CM\
    \ cell classifier model in conjugation with the human_dcm_hcm_nf dataset. I tried\
    \ to delete ADCY5, SRPK3 and ACTB (independently of each other), all of which\
    \ gave statistically insignificant results. Any guidance would be greatly appreciated.\r\
    \n\r\n```\r\n    isp = InSilicoPerturber(\r\n        perturb_type=\"delete\",\r\
    \n        perturb_rank_shift=None,\r\n        genes_to_perturb=[\"ENSG00000184343\"\
    ],\r\n        combos=0,\r\n        anchor_gene=None,\r\n        model_type=\"\
    CellClassifier\",\r\n        num_classes=3,\r\n        emb_mode=\"cell\",\r\n\
    \        cell_emb_style=\"mean_pool\",\r\n        filter_data={\"cell_type\":[\"\
    Cardiomyocyte1\",\"Cardiomyocyte2\",\"Cardiomyocyte3\"]},\r\n        cell_states_to_model={\r\
    \n            'state_key': 'disease', \r\n            'start_state': 'dcm', \r\
    \n            'goal_state': 'nf', \r\n            'alt_states': ['hcm']\r\n  \
    \      },\r\n        max_ncells=None,\r\n        emb_layer=0,\r\n        forward_batch_size=50,\r\
    \n        nproc=16,\r\n    )\r\n\r\n    isp.perturb_data(\r\n        \"./CellClassifier_cardiomyopathies/\"\
    ,\r\n        \"./human_dcm_hcm_nf.dataset\",\r\n        \"./perturb_out/\",\r\n\
    \         prefix\r\n    )\r\n\r\nispstats = InSilicoPerturberStats(mode=\"goal_state_shift\"\
    ,\r\n                                  genes_perturbed=[\"ENSG00000184343\"],\r\
    \n                                  combos=0,\r\n                            \
    \      anchor_gene=None,\r\n                                  cell_states_to_model={\"\
    disease\":([\"dcm\"],[\"nf\"],[\"hcm\"])})\r\n\r\nispstats.get_stats(\"./perturb_out/\"\
    ,\r\n                   None,\r\n                   \"./perturb_out/\",\r\n  \
    \                 prefix)\r\n```\r\n\r\nResults produced the cell embedding shifts\
    \ for each cell expressing the respective gene. Here is a list of the mean values\
    \ for the Shift_to_goal_end column \xB1 std dev:\r\nACTB: 0.0013 \xB1 0.0160\r\
    \nADCY5: -0.0011 \xB1 0.0340\r\nSRPK3: -0.00105 \xB1 0.0246\r\n\r\n"
  created_at: 2023-08-17 19:26:25+00:00
  edited: false
  hidden: false
  id: 64de8271f1f6c89619a2adab
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-09-18T07:07:02.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8816649913787842
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! Please see closed discussion
          246:<br><a href="https://huggingface.co/ctheodoris/Geneformer/discussions/246">https://huggingface.co/ctheodoris/Geneformer/discussions/246</a></p>

          '
        raw: 'Thank you for your interest in Geneformer! Please see closed discussion
          246:

          https://huggingface.co/ctheodoris/Geneformer/discussions/246'
        updatedAt: '2023-09-18T07:07:02.036Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6507f7169c5e6b2767e2ac2d
    id: 6507f7169c5e6b2767e2ac2a
    type: comment
  author: ctheodoris
  content: 'Thank you for your interest in Geneformer! Please see closed discussion
    246:

    https://huggingface.co/ctheodoris/Geneformer/discussions/246'
  created_at: 2023-09-18 06:07:02+00:00
  edited: false
  hidden: false
  id: 6507f7169c5e6b2767e2ac2a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-09-18T07:07:02.000Z'
    data:
      status: closed
    id: 6507f7169c5e6b2767e2ac2d
    type: status-change
  author: ctheodoris
  created_at: 2023-09-18 06:07:02+00:00
  id: 6507f7169c5e6b2767e2ac2d
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 223
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Unable to produce meaningful in silico perturb results
