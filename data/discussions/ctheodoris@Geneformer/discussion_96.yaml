!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jinbo1129
conflicting_files: null
created_at: 2023-07-06 01:54:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
      fullname: zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jinbo1129
      type: user
    createdAt: '2023-07-06T02:54:33.000Z'
    data:
      edited: false
      editors:
      - jinbo1129
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9245179891586304
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
          fullname: zhang
          isHf: false
          isPro: false
          name: jinbo1129
          type: user
        html: "<p>hello, thanks for this great tool !!!<br>I want to do a fine tune\
          \ task such as \"Human PBMC scRNA-seq\u2013based aging clocks\" from this\
          \ <a rel=\"nofollow\" href=\"https://www.science.org/doi/10.1126/sciadv.abq7599\"\
          >paper</a>.<br>In this paper, the authors use the Cell type proportion as\
          \ the key features to build the models.<br>I think GeneFormer is usually\
          \ based on cell expressions.<br>Could you please give some suggestions about\
          \ how to add the Cell type proportion into the finetuning task?</p>\n<p>Thanks\
          \ !!!</p>\n"
        raw: "hello, thanks for this great tool !!!\r\nI want to do a fine tune task\
          \ such as \"Human PBMC scRNA-seq\u2013based aging clocks\" from this [paper](https://www.science.org/doi/10.1126/sciadv.abq7599).\r\
          \nIn this paper, the authors use the Cell type proportion as the key features\
          \ to build the models.\r\nI think GeneFormer is usually based on cell expressions.\r\
          \nCould you please give some suggestions about how to add the Cell type\
          \ proportion into the finetuning task?\r\n\r\nThanks !!!"
        updatedAt: '2023-07-06T02:54:33.312Z'
      numEdits: 0
      reactions: []
    id: 64a62ce99f2ad4bc417ed483
    type: comment
  author: jinbo1129
  content: "hello, thanks for this great tool !!!\r\nI want to do a fine tune task\
    \ such as \"Human PBMC scRNA-seq\u2013based aging clocks\" from this [paper](https://www.science.org/doi/10.1126/sciadv.abq7599).\r\
    \nIn this paper, the authors use the Cell type proportion as the key features\
    \ to build the models.\r\nI think GeneFormer is usually based on cell expressions.\r\
    \nCould you please give some suggestions about how to add the Cell type proportion\
    \ into the finetuning task?\r\n\r\nThanks !!!"
  created_at: 2023-07-06 01:54:33+00:00
  edited: false
  hidden: false
  id: 64a62ce99f2ad4bc417ed483
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-07T21:40:17.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9295034408569336
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! The optimal fine-tuning
          objective depends on your exact question. One way you may approach understanding
          the differences between samples from donors of different ages is by fine-tuning
          the model to classify the age of the cells based on their gene expression.
          To do this you could follow the disease classification example but instead
          of classifying the label of healthy vs. disease, you would classify the
          label of age. Then, you could probe the embedding space to determine the
          genes important for each cell state through the in silico perturbation approach
          as in the example notebook, again substituting the age instead of disease
          state.</p>

          <p>To incorporate multiple cells, you could add multiple cells together
          separated by a separator token you would add to the token dictionary. You
          could then present the multiple cells together to the model, and again fine-tune
          the model to classify them, this time as a group of cells. This would be
          analogous to fine-tuning BERT for sentiment analysis of a movie review,
          let''s say, which would have multiple sentences (analogous to multiple cells).
          Because more genes are detected per cell than there are words per sentence
          and the model may limit the number of total genes you are presenting to
          the model, you may instead consider extracting Geneformer cell embeddings
          for each cell using the full rank value encoding and then presenting the
          group of cell embeddings to a model on top of Geneformer. Purely looking
          at the proportion of cell types present in a sample can be accomplished
          with a simpler approach, but this approach may enable the model to get a
          better understanding of cell interactions since the group of cells and their
          embeddings are presented together to the model.</p>

          '
        raw: 'Thank you for your interest in Geneformer! The optimal fine-tuning objective
          depends on your exact question. One way you may approach understanding the
          differences between samples from donors of different ages is by fine-tuning
          the model to classify the age of the cells based on their gene expression.
          To do this you could follow the disease classification example but instead
          of classifying the label of healthy vs. disease, you would classify the
          label of age. Then, you could probe the embedding space to determine the
          genes important for each cell state through the in silico perturbation approach
          as in the example notebook, again substituting the age instead of disease
          state.


          To incorporate multiple cells, you could add multiple cells together separated
          by a separator token you would add to the token dictionary. You could then
          present the multiple cells together to the model, and again fine-tune the
          model to classify them, this time as a group of cells. This would be analogous
          to fine-tuning BERT for sentiment analysis of a movie review, let''s say,
          which would have multiple sentences (analogous to multiple cells). Because
          more genes are detected per cell than there are words per sentence and the
          model may limit the number of total genes you are presenting to the model,
          you may instead consider extracting Geneformer cell embeddings for each
          cell using the full rank value encoding and then presenting the group of
          cell embeddings to a model on top of Geneformer. Purely looking at the proportion
          of cell types present in a sample can be accomplished with a simpler approach,
          but this approach may enable the model to get a better understanding of
          cell interactions since the group of cells and their embeddings are presented
          together to the model.'
        updatedAt: '2023-07-07T21:40:17.365Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64a8864132c9473fed9d5901
    id: 64a8864132c9473fed9d5900
    type: comment
  author: ctheodoris
  content: 'Thank you for your interest in Geneformer! The optimal fine-tuning objective
    depends on your exact question. One way you may approach understanding the differences
    between samples from donors of different ages is by fine-tuning the model to classify
    the age of the cells based on their gene expression. To do this you could follow
    the disease classification example but instead of classifying the label of healthy
    vs. disease, you would classify the label of age. Then, you could probe the embedding
    space to determine the genes important for each cell state through the in silico
    perturbation approach as in the example notebook, again substituting the age instead
    of disease state.


    To incorporate multiple cells, you could add multiple cells together separated
    by a separator token you would add to the token dictionary. You could then present
    the multiple cells together to the model, and again fine-tune the model to classify
    them, this time as a group of cells. This would be analogous to fine-tuning BERT
    for sentiment analysis of a movie review, let''s say, which would have multiple
    sentences (analogous to multiple cells). Because more genes are detected per cell
    than there are words per sentence and the model may limit the number of total
    genes you are presenting to the model, you may instead consider extracting Geneformer
    cell embeddings for each cell using the full rank value encoding and then presenting
    the group of cell embeddings to a model on top of Geneformer. Purely looking at
    the proportion of cell types present in a sample can be accomplished with a simpler
    approach, but this approach may enable the model to get a better understanding
    of cell interactions since the group of cells and their embeddings are presented
    together to the model.'
  created_at: 2023-07-07 20:40:17+00:00
  edited: false
  hidden: false
  id: 64a8864132c9473fed9d5900
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-07T21:40:17.000Z'
    data:
      status: closed
    id: 64a8864132c9473fed9d5901
    type: status-change
  author: ctheodoris
  created_at: 2023-07-07 20:40:17+00:00
  id: 64a8864132c9473fed9d5901
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
      fullname: zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jinbo1129
      type: user
    createdAt: '2023-07-27T09:56:35.000Z'
    data:
      edited: true
      editors:
      - jinbo1129
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9271692633628845
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
          fullname: zhang
          isHf: false
          isPro: false
          name: jinbo1129
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ctheodoris&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ctheodoris\">@<span class=\"\
          underline\">ctheodoris</span></a></span>\n\n\t</span></span> , thanks for\
          \ your suggestion !!!<br>I am new to tranformers and hugging face. That\
          \ you mentioned:</p>\n<pre><code>This would be analogous to fine-tuning\
          \ BERT for sentiment analysis of a movie review, let's say, which would\
          \ have multiple sentences \n(analogous to multiple cells). \nBecause more\
          \ genes are detected per cell than there are words per sentence and the\
          \ model may limit the number of total genes you are presenting to the model,\
          \ \nyou may instead consider extracting Geneformer cell embeddings for each\
          \ cell using the full rank value encoding and then presenting the group\
          \ of cell embeddings to a model on top of Geneformer. \n</code></pre>\n\
          <p>It is very interesting but I currently have no idea how to implement\
          \ this method. Could please you provide some examples or materials? </p>\n\
          <p>Thank you very much.</p>\n"
        raw: "@ctheodoris , thanks for your suggestion !!!\nI am new to tranformers\
          \ and hugging face. That you mentioned:\n```\nThis would be analogous to\
          \ fine-tuning BERT for sentiment analysis of a movie review, let's say,\
          \ which would have multiple sentences \n(analogous to multiple cells). \n\
          Because more genes are detected per cell than there are words per sentence\
          \ and the model may limit the number of total genes you are presenting to\
          \ the model, \nyou may instead consider extracting Geneformer cell embeddings\
          \ for each cell using the full rank value encoding and then presenting the\
          \ group of cell embeddings to a model on top of Geneformer. \n```\nIt is\
          \ very interesting but I currently have no idea how to implement this method.\
          \ Could please you provide some examples or materials? \n\nThank you very\
          \ much.\n\n"
        updatedAt: '2023-07-27T09:56:56.641Z'
      numEdits: 1
      reactions: []
    id: 64c23f535b329de1b1e618ad
    type: comment
  author: jinbo1129
  content: "@ctheodoris , thanks for your suggestion !!!\nI am new to tranformers\
    \ and hugging face. That you mentioned:\n```\nThis would be analogous to fine-tuning\
    \ BERT for sentiment analysis of a movie review, let's say, which would have multiple\
    \ sentences \n(analogous to multiple cells). \nBecause more genes are detected\
    \ per cell than there are words per sentence and the model may limit the number\
    \ of total genes you are presenting to the model, \nyou may instead consider extracting\
    \ Geneformer cell embeddings for each cell using the full rank value encoding\
    \ and then presenting the group of cell embeddings to a model on top of Geneformer.\
    \ \n```\nIt is very interesting but I currently have no idea how to implement\
    \ this method. Could please you provide some examples or materials? \n\nThank\
    \ you very much.\n\n"
  created_at: 2023-07-27 08:56:35+00:00
  edited: true
  hidden: false
  id: 64c23f535b329de1b1e618ad
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 96
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: "Suggestions for how to add celltype percentages in the fine tuning task\uFF1F"
