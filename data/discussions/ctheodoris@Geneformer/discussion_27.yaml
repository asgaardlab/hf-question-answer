!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Leonskra
conflicting_files: null
created_at: 2023-06-11 16:02:09+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e0074ebffebb90d3c9c9a7eaa1bd2d6d.svg
      fullname: QINMENG YANG
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Leonskra
      type: user
    createdAt: '2023-06-11T17:02:09.000Z'
    data:
      edited: false
      editors:
      - Leonskra
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9500473141670227
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e0074ebffebb90d3c9c9a7eaa1bd2d6d.svg
          fullname: QINMENG YANG
          isHf: false
          isPro: false
          name: Leonskra
          type: user
        html: '<p>Hello, thanks for your fantastic work, now I am trying to find how
          to quantify the impact of common batch-dependent technical artifacts on
          Geneformer gene<br>embeddings, but I could not find where I can get the
          results of gene embedding, could you please give some advice.</p>

          <p>Many Thanks</p>

          '
        raw: "Hello, thanks for your fantastic work, now I am trying to find how to\
          \ quantify the impact of common batch-dependent technical artifacts on Geneformer\
          \ gene\r\nembeddings, but I could not find where I can get the results of\
          \ gene embedding, could you please give some advice.\r\n\r\nMany Thanks"
        updatedAt: '2023-06-11T17:02:09.575Z'
      numEdits: 0
      reactions: []
    id: 6485fe1162f545a51c63e6fe
    type: comment
  author: Leonskra
  content: "Hello, thanks for your fantastic work, now I am trying to find how to\
    \ quantify the impact of common batch-dependent technical artifacts on Geneformer\
    \ gene\r\nembeddings, but I could not find where I can get the results of gene\
    \ embedding, could you please give some advice.\r\n\r\nMany Thanks"
  created_at: 2023-06-11 16:02:09+00:00
  edited: false
  hidden: false
  id: 6485fe1162f545a51c63e6fe
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-11T19:23:43.000Z'
    data:
      edited: true
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.911910355091095
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer. Gene embeddings can be
          extracted from the model similarly to any transformers model, by setting
          the model to evaluation mode and doing a forward pass through the model
          to obtain outputs with setting output_hidden_states=True. </p>

          <p>Please see this relevant page from Huggingface transformers documentation:<br><a
          href="https://huggingface.co/docs/transformers/main_classes/output">https://huggingface.co/docs/transformers/main_classes/output</a></p>

          <p>In the methods of the manuscript, we state which layer embeddings we
          used for each analysis. There are many ways to consider which embeddings
          to extract for each question at hand. However, generally speaking, the last
          layer embeddings are most specific to the predictions optimized by the learning
          objective, so if your question is closely aligned, then you could use the
          last layer embeddings, but if not, the second to last layer may be a better
          choice. There are also methods that consider concatenation or pooling of
          multiple layer embeddings. You can explore what is the best option for your
          specific application and question at hand.</p>

          <p>Update:<br>We have now added a function to extract and plot cell embeddings
          (extracting gene embeddings will also be added in the future). Please see
          example here:<br><a href="https://huggingface.co/ctheodoris/Geneformer/blob/main/examples/extract_and_plot_cell_embeddings.ipynb">https://huggingface.co/ctheodoris/Geneformer/blob/main/examples/extract_and_plot_cell_embeddings.ipynb</a></p>

          '
        raw: "Thank you for your interest in Geneformer. Gene embeddings can be extracted\
          \ from the model similarly to any transformers model, by setting the model\
          \ to evaluation mode and doing a forward pass through the model to obtain\
          \ outputs with setting output_hidden_states=True. \n\nPlease see this relevant\
          \ page from Huggingface transformers documentation:\nhttps://huggingface.co/docs/transformers/main_classes/output\n\
          \nIn the methods of the manuscript, we state which layer embeddings we used\
          \ for each analysis. There are many ways to consider which embeddings to\
          \ extract for each question at hand. However, generally speaking, the last\
          \ layer embeddings are most specific to the predictions optimized by the\
          \ learning objective, so if your question is closely aligned, then you could\
          \ use the last layer embeddings, but if not, the second to last layer may\
          \ be a better choice. There are also methods that consider concatenation\
          \ or pooling of multiple layer embeddings. You can explore what is the best\
          \ option for your specific application and question at hand.\n\nUpdate:\n\
          We have now added a function to extract and plot cell embeddings (extracting\
          \ gene embeddings will also be added in the future). Please see example\
          \ here:\nhttps://huggingface.co/ctheodoris/Geneformer/blob/main/examples/extract_and_plot_cell_embeddings.ipynb"
        updatedAt: '2023-07-28T07:16:05.388Z'
      numEdits: 1
      reactions: []
      relatedEventId: 64861f3f96c483981548868e
    id: 64861f3f96c4839815488684
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer. Gene embeddings can be extracted\
    \ from the model similarly to any transformers model, by setting the model to\
    \ evaluation mode and doing a forward pass through the model to obtain outputs\
    \ with setting output_hidden_states=True. \n\nPlease see this relevant page from\
    \ Huggingface transformers documentation:\nhttps://huggingface.co/docs/transformers/main_classes/output\n\
    \nIn the methods of the manuscript, we state which layer embeddings we used for\
    \ each analysis. There are many ways to consider which embeddings to extract for\
    \ each question at hand. However, generally speaking, the last layer embeddings\
    \ are most specific to the predictions optimized by the learning objective, so\
    \ if your question is closely aligned, then you could use the last layer embeddings,\
    \ but if not, the second to last layer may be a better choice. There are also\
    \ methods that consider concatenation or pooling of multiple layer embeddings.\
    \ You can explore what is the best option for your specific application and question\
    \ at hand.\n\nUpdate:\nWe have now added a function to extract and plot cell embeddings\
    \ (extracting gene embeddings will also be added in the future). Please see example\
    \ here:\nhttps://huggingface.co/ctheodoris/Geneformer/blob/main/examples/extract_and_plot_cell_embeddings.ipynb"
  created_at: 2023-06-11 18:23:43+00:00
  edited: true
  hidden: false
  id: 64861f3f96c4839815488684
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-11T19:23:43.000Z'
    data:
      status: closed
    id: 64861f3f96c483981548868e
    type: status-change
  author: ctheodoris
  created_at: 2023-06-11 18:23:43+00:00
  id: 64861f3f96c483981548868e
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 27
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Gene embedding
