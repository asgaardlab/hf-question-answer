!!python/object:huggingface_hub.community.DiscussionWithDetails
author: allenxiao
conflicting_files: null
created_at: 2023-06-25 08:32:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a925c2d07d72b9ddad29d3638a4491c3.svg
      fullname: Allen Xiao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: allenxiao
      type: user
    createdAt: '2023-06-25T09:32:18.000Z'
    data:
      edited: false
      editors:
      - allenxiao
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8822360634803772
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a925c2d07d72b9ddad29d3638a4491c3.svg
          fullname: Allen Xiao
          isHf: false
          isPro: false
          name: allenxiao
          type: user
        html: '<p>Thanks a lot for your great work  Geneformer.<br>I have a question.
          If I download a .h5ad file from a gene database website and want to pretrain
          a new model with it, how to preprocess it? Do I need to do some preprocessing
          procedures over the .h5ad file, like log, normalize, filter or other means?<br>Or
          just transfer the raw .h5ad data to the .loom format, and then use TranscriptomeTokenizer
          to transfer it to the .arrow format? </p>

          '
        raw: "Thanks a lot for your great work  Geneformer.\r\nI have a question.\
          \ If I download a .h5ad file from a gene database website and want to pretrain\
          \ a new model with it, how to preprocess it? Do I need to do some preprocessing\
          \ procedures over the .h5ad file, like log, normalize, filter or other means?\
          \ \r\nOr just transfer the raw .h5ad data to the .loom format, and then\
          \ use TranscriptomeTokenizer to transfer it to the .arrow format? "
        updatedAt: '2023-06-25T09:32:18.302Z'
      numEdits: 0
      reactions: []
    id: 649809a25551ac0d48cf8da8
    type: comment
  author: allenxiao
  content: "Thanks a lot for your great work  Geneformer.\r\nI have a question. If\
    \ I download a .h5ad file from a gene database website and want to pretrain a\
    \ new model with it, how to preprocess it? Do I need to do some preprocessing\
    \ procedures over the .h5ad file, like log, normalize, filter or other means?\
    \ \r\nOr just transfer the raw .h5ad data to the .loom format, and then use TranscriptomeTokenizer\
    \ to transfer it to the .arrow format? "
  created_at: 2023-06-25 08:32:18+00:00
  edited: false
  hidden: false
  id: 649809a25551ac0d48cf8da8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-25T15:08:40.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8528103232383728
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! The input is raw counts
          without any normalization or filtering. Please check out the instructions
          in the example notebook for tokenizing data for further details. </p>

          '
        raw: 'Thank you for your interest in Geneformer! The input is raw counts without
          any normalization or filtering. Please check out the instructions in the
          example notebook for tokenizing data for further details. '
        updatedAt: '2023-06-25T15:08:40.640Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64985878271c503661d8daef
    id: 64985878271c503661d8daec
    type: comment
  author: ctheodoris
  content: 'Thank you for your interest in Geneformer! The input is raw counts without
    any normalization or filtering. Please check out the instructions in the example
    notebook for tokenizing data for further details. '
  created_at: 2023-06-25 14:08:40+00:00
  edited: false
  hidden: false
  id: 64985878271c503661d8daec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-25T15:08:40.000Z'
    data:
      status: closed
    id: 64985878271c503661d8daef
    type: status-change
  author: ctheodoris
  created_at: 2023-06-25 14:08:40+00:00
  id: 64985878271c503661d8daef
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a925c2d07d72b9ddad29d3638a4491c3.svg
      fullname: Allen Xiao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: allenxiao
      type: user
    createdAt: '2023-06-28T03:32:05.000Z'
    data:
      edited: false
      editors:
      - allenxiao
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9514006972312927
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a925c2d07d72b9ddad29d3638a4491c3.svg
          fullname: Allen Xiao
          isHf: false
          isPro: false
          name: allenxiao
          type: user
        html: '<p>Thanks for your fast reply.<br>However, by reading the paper, I
          find some instructions about data processing as follows:</p>

          <p>"We excluded cells with high mutational burdens (for example, malignant
          cells and immortalized cell lines) that could lead to substantial network
          rewiring without companion genome sequencing to facilitate interpretation.
          We only included droplet-based sequencing platforms to assure expression
          value unit comparability. Overall, 561 datasets were included and stored
          as uniform files in the .loom HDF5 format including metadata from the original
          studies as row (feature) and column (cell) attributes described below. </p>

          <p>Column cell attributes also included several calculated measurements
          for each cell: the total number of read counts, the percentage of mitochondrial
          reads, the number of genes Ensembl-annotated as protein-coding or miRNA
          genes and whether the cell passed the quality-control metrics we established
          for scalable filtering of the cells to exclude possible doublets and/or
          damaged cells. Only cells that passed these filtering metrics were used
          for downstream analyses in this work. Specifically, datasets were filtered
          to retain cells with total read counts within 3 s.d. of the mean within
          that dataset and mitochondrial reads within 3 s.d. of the mean within that
          dataset. Ensembl-annotated<br>protein-coding and miRNA genes were used for
          downstream analysis. Cells with less than seven detected Ensembl-annotated
          protein-coding or miRNA genes were excluded as the 15% masking used for
          the pretraining learning objective would not reliably mask a gene in cells
          with fewer detected genes. Ultimately, 27.4 million (27,406,217) cells passed
          the defined quality filters. "</p>

          <p>Are these procedures part of data preprocessing or something like that,
          especially the second paragraph? Could you provide code please?</p>

          '
        raw: "Thanks for your fast reply. \nHowever, by reading the paper, I find\
          \ some instructions about data processing as follows:\n\n\"We excluded cells\
          \ with high mutational burdens (for example, malignant cells and immortalized\
          \ cell lines) that could lead to substantial network rewiring without companion\
          \ genome sequencing to facilitate interpretation. We only included droplet-based\
          \ sequencing platforms to assure expression value unit comparability. Overall,\
          \ 561 datasets were included and stored as uniform files in the .loom HDF5\
          \ format including metadata from the original studies as row (feature) and\
          \ column (cell) attributes described below. \n\nColumn cell attributes also\
          \ included several calculated measurements for each cell: the total number\
          \ of read counts, the percentage of mitochondrial reads, the number of genes\
          \ Ensembl-annotated as protein-coding or miRNA genes and whether the cell\
          \ passed the quality-control metrics we established for scalable filtering\
          \ of the cells to exclude possible doublets and/or damaged cells. Only cells\
          \ that passed these filtering metrics were used for downstream analyses\
          \ in this work. Specifically, datasets were filtered to retain cells with\
          \ total read counts within 3 s.d. of the mean within that dataset and mitochondrial\
          \ reads within 3 s.d. of the mean within that dataset. Ensembl-annotated\
          \ \nprotein-coding and miRNA genes were used for downstream analysis. Cells\
          \ with less than seven detected Ensembl-annotated protein-coding or miRNA\
          \ genes were excluded as the 15% masking used for the pretraining learning\
          \ objective would not reliably mask a gene in cells with fewer detected\
          \ genes. Ultimately, 27.4 million (27,406,217) cells passed the defined\
          \ quality filters. \"\n\nAre these procedures part of data preprocessing\
          \ or something like that, especially the second paragraph? Could you provide\
          \ code please?\n"
        updatedAt: '2023-06-28T03:32:05.540Z'
      numEdits: 0
      reactions: []
      relatedEventId: 649ba9b58302704b3c36f5da
    id: 649ba9b58302704b3c36f5d9
    type: comment
  author: allenxiao
  content: "Thanks for your fast reply. \nHowever, by reading the paper, I find some\
    \ instructions about data processing as follows:\n\n\"We excluded cells with high\
    \ mutational burdens (for example, malignant cells and immortalized cell lines)\
    \ that could lead to substantial network rewiring without companion genome sequencing\
    \ to facilitate interpretation. We only included droplet-based sequencing platforms\
    \ to assure expression value unit comparability. Overall, 561 datasets were included\
    \ and stored as uniform files in the .loom HDF5 format including metadata from\
    \ the original studies as row (feature) and column (cell) attributes described\
    \ below. \n\nColumn cell attributes also included several calculated measurements\
    \ for each cell: the total number of read counts, the percentage of mitochondrial\
    \ reads, the number of genes Ensembl-annotated as protein-coding or miRNA genes\
    \ and whether the cell passed the quality-control metrics we established for scalable\
    \ filtering of the cells to exclude possible doublets and/or damaged cells. Only\
    \ cells that passed these filtering metrics were used for downstream analyses\
    \ in this work. Specifically, datasets were filtered to retain cells with total\
    \ read counts within 3 s.d. of the mean within that dataset and mitochondrial\
    \ reads within 3 s.d. of the mean within that dataset. Ensembl-annotated \nprotein-coding\
    \ and miRNA genes were used for downstream analysis. Cells with less than seven\
    \ detected Ensembl-annotated protein-coding or miRNA genes were excluded as the\
    \ 15% masking used for the pretraining learning objective would not reliably mask\
    \ a gene in cells with fewer detected genes. Ultimately, 27.4 million (27,406,217)\
    \ cells passed the defined quality filters. \"\n\nAre these procedures part of\
    \ data preprocessing or something like that, especially the second paragraph?\
    \ Could you provide code please?\n"
  created_at: 2023-06-28 02:32:05+00:00
  edited: false
  hidden: false
  id: 649ba9b58302704b3c36f5d9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/a925c2d07d72b9ddad29d3638a4491c3.svg
      fullname: Allen Xiao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: allenxiao
      type: user
    createdAt: '2023-06-28T03:32:05.000Z'
    data:
      status: open
    id: 649ba9b58302704b3c36f5da
    type: status-change
  author: allenxiao
  created_at: 2023-06-28 02:32:05+00:00
  id: 649ba9b58302704b3c36f5da
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-28T03:42:52.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9129329919815063
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>The sections from the Methods that you referenced are related to
          our inclusion criteria for the pretraining corpus. Genecorpus-30M already
          reflects the cells that were included by these criteria. These criteria
          are not constraints for any new data presented to the model. For example,
          users can use plate-based sequencing platforms, they can use immortalized
          cell lines, and they can use any filtering criteria they deem appropriate.
          The example notebook for tokenizing data provides comprehensive instructions
          for any preprocessing that should (or more importantly should not) be done
          for data used with Geneformer.</p>

          '
        raw: The sections from the Methods that you referenced are related to our
          inclusion criteria for the pretraining corpus. Genecorpus-30M already reflects
          the cells that were included by these criteria. These criteria are not constraints
          for any new data presented to the model. For example, users can use plate-based
          sequencing platforms, they can use immortalized cell lines, and they can
          use any filtering criteria they deem appropriate. The example notebook for
          tokenizing data provides comprehensive instructions for any preprocessing
          that should (or more importantly should not) be done for data used with
          Geneformer.
        updatedAt: '2023-06-28T03:42:52.618Z'
      numEdits: 0
      reactions: []
      relatedEventId: 649bac3cc5d076065a6754fe
    id: 649bac3cc5d076065a6754fc
    type: comment
  author: ctheodoris
  content: The sections from the Methods that you referenced are related to our inclusion
    criteria for the pretraining corpus. Genecorpus-30M already reflects the cells
    that were included by these criteria. These criteria are not constraints for any
    new data presented to the model. For example, users can use plate-based sequencing
    platforms, they can use immortalized cell lines, and they can use any filtering
    criteria they deem appropriate. The example notebook for tokenizing data provides
    comprehensive instructions for any preprocessing that should (or more importantly
    should not) be done for data used with Geneformer.
  created_at: 2023-06-28 02:42:52+00:00
  edited: false
  hidden: false
  id: 649bac3cc5d076065a6754fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-28T03:42:52.000Z'
    data:
      status: closed
    id: 649bac3cc5d076065a6754fe
    type: status-change
  author: ctheodoris
  created_at: 2023-06-28 02:42:52+00:00
  id: 649bac3cc5d076065a6754fe
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 64
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: How to preprocess the raw data?
