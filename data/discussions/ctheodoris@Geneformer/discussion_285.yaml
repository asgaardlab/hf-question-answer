!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Jonyyqn
conflicting_files: null
created_at: 2023-12-26 07:11:23+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-26T07:11:23.000Z'
    data:
      edited: true
      editors:
      - Jonyyqn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9018368124961853
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
          fullname: Journey
          isHf: false
          isPro: false
          name: Jonyyqn
          type: user
        html: '<p>Hi, great work !<br>I have the following questions:</p>

          <ol>

          <li>I am running the provided example code in_silico_perturbation.ipynb.
          The only change is to change the genes_to_perturb parameter from "all" to
          a list containing a single gene. I found that the result csv file only contains
          cosine similarity but no p-value and FDR. How can I get the p-value and
          FDR?</li>

          <li>If I want to study how the expression/embedding of the remaining genes
          changes after a single gene is deleted, how should I do it? The purpose
          of this is that I want to study which related genes will be affected after
          simulating a gene perturbation, so as to predict the changes in biological
          pathways after gene perturbation.</li>

          <li>In addition, according to the parameter introduction, I noticed that
          when the genes_to_perturb parameter is set to a list containing multiple
          genes, these genes will be perturbed as a whole (Otherwise, may provide
          a list of ENSEMBL IDs of genes perturbed as a group all together) . Suppose
          I have a list of multiple genes and want to study the results of perturbation
          of each gene individually and generate a csv containing the perturbation
          of each gene in the list. How should I do this?</li>

          </ol>

          '
        raw: 'Hi, great work !

          I have the following questions:

          1. I am running the provided example code in_silico_perturbation.ipynb.
          The only change is to change the genes_to_perturb parameter from "all" to
          a list containing a single gene. I found that the result csv file only contains
          cosine similarity but no p-value and FDR. How can I get the p-value and
          FDR?

          2. If I want to study how the expression/embedding of the remaining genes
          changes after a single gene is deleted, how should I do it? The purpose
          of this is that I want to study which related genes will be affected after
          simulating a gene perturbation, so as to predict the changes in biological
          pathways after gene perturbation.

          3. In addition, according to the parameter introduction, I noticed that
          when the genes_to_perturb parameter is set to a list containing multiple
          genes, these genes will be perturbed as a whole (Otherwise, may provide
          a list of ENSEMBL IDs of genes perturbed as a group all together) . Suppose
          I have a list of multiple genes and want to study the results of perturbation
          of each gene individually and generate a csv containing the perturbation
          of each gene in the list. How should I do this? '
        updatedAt: '2023-12-26T08:30:26.033Z'
      numEdits: 3
      reactions: []
    id: 658a7c9b586088fd2797ccbc
    type: comment
  author: Jonyyqn
  content: 'Hi, great work !

    I have the following questions:

    1. I am running the provided example code in_silico_perturbation.ipynb. The only
    change is to change the genes_to_perturb parameter from "all" to a list containing
    a single gene. I found that the result csv file only contains cosine similarity
    but no p-value and FDR. How can I get the p-value and FDR?

    2. If I want to study how the expression/embedding of the remaining genes changes
    after a single gene is deleted, how should I do it? The purpose of this is that
    I want to study which related genes will be affected after simulating a gene perturbation,
    so as to predict the changes in biological pathways after gene perturbation.

    3. In addition, according to the parameter introduction, I noticed that when the
    genes_to_perturb parameter is set to a list containing multiple genes, these genes
    will be perturbed as a whole (Otherwise, may provide a list of ENSEMBL IDs of
    genes perturbed as a group all together) . Suppose I have a list of multiple genes
    and want to study the results of perturbation of each gene individually and generate
    a csv containing the perturbation of each gene in the list. How should I do this? '
  created_at: 2023-12-26 07:11:23+00:00
  edited: true
  hidden: false
  id: 658a7c9b586088fd2797ccbc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-26T07:17:52.000Z'
    data:
      status: closed
    id: 658a7e204bb41498f7dc2120
    type: status-change
  author: Jonyyqn
  created_at: 2023-12-26 07:17:52+00:00
  id: 658a7e204bb41498f7dc2120
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-26T07:17:57.000Z'
    data:
      status: open
    id: 658a7e254f9d2b955e62f6f1
    type: status-change
  author: Jonyyqn
  created_at: 2023-12-26 07:17:57+00:00
  id: 658a7e254f9d2b955e62f6f1
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-26T07:22:10.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
          fullname: Journey
          isHf: false
          isPro: false
          name: Jonyyqn
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-12-26T07:23:01.673Z'
      numEdits: 0
      reactions: []
    id: 658a7f22304552ba0cf5783a
    type: comment
  author: Jonyyqn
  content: This comment has been hidden
  created_at: 2023-12-26 07:22:10+00:00
  edited: true
  hidden: true
  id: 658a7f22304552ba0cf5783a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-27T22:43:56.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8920238018035889
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your interest in Geneformer! </p>\n<ol>\n<li><p>If\
          \ you only test in silico perturbation of a single gene in a single cell\
          \ population, there is no control to compare against statistically so there\
          \ is no p-value and FDR generated. If you would like to derive a p-value\
          \ and FDR, you have to provide something to compare to. The possible modes\
          \ for running the in silico perturber stats generator are as follows:</p>\n\
          <pre><code>     \"goal_state_shift\": perturbation vs. random for desired\
          \ cell state shift\n     \"vs_null\": perturbation vs. null from provided\
          \ null distribution dataset\n     \"mixture_model\": perturbation in impact\
          \ vs. no impact component of mixture model (no goal direction)\n     \"\
          aggregate_data\": aggregates cosine shifts for single perturbation in multiple\
          \ cells\n     \"aggregate_gene_shifts\": aggregates cosine shifts of genes\
          \ in response to perturbation(s)\n</code></pre>\n</li>\n</ol>\n<p>The most\
          \ relevant mode depends on your scientific question. If you would like to\
          \ determine whether a particular gene leads to a more significant shift\
          \ between a start state and goal state compared to other genes, it would\
          \ be best to run the in silico perturbation using all genes so that you\
          \ could compare that gene to a random distribution drawn from the other\
          \ genes, using \"goal_state_shift\". If you would like to determine whether\
          \ a particular gene leads to a more significant perturbation in a given\
          \ starting cell state compared to that gene in a different starting cell\
          \ state, without a particular goal state in mind, then you should perform\
          \ the in silico perturbation of that gene in start state A and in start\
          \ state B and provide one of those as the null distribution in the \"vs_null\"\
          \ mode. If you would like to do the former but would like to derive the\
          \ random distribution more efficiently without perturbing all genes in all\
          \ cells, you can run the single gene perturbation mode with the InSilicoPerturber\
          \ with random genes and provide all files in the same directory for the\
          \ in silico perturber stats generator to read them together. These are just\
          \ a few examples but there are other ways to arrange the test depending\
          \ on your question.</p>\n<ol start=\"2\">\n<li><p>You can run the InSilicoPerturber\
          \ with the mode \"cell_and_gene\" and the InSilicoPerturberStats with the\
          \ mode \"aggregate_gene_shifts\". Please make sure you are using the updated\
          \ version.</p>\n</li>\n<li><p>You can run the InSilicoPerturber with genes_to_perturb=\"\
          all\" or, if your gene list is small, you can run it with perturbing a single\
          \ gene each time with separate jobs for each gene. The resulting files can\
          \ be placed in the same directory so that the stats generator reads all\
          \ of them together.</p>\n</li>\n</ol>\n"
        raw: "Thank you for your interest in Geneformer! \n\n1) If you only test in\
          \ silico perturbation of a single gene in a single cell population, there\
          \ is no control to compare against statistically so there is no p-value\
          \ and FDR generated. If you would like to derive a p-value and FDR, you\
          \ have to provide something to compare to. The possible modes for running\
          \ the in silico perturber stats generator are as follows:\n\n          \
          \  \"goal_state_shift\": perturbation vs. random for desired cell state\
          \ shift\n            \"vs_null\": perturbation vs. null from provided null\
          \ distribution dataset\n            \"mixture_model\": perturbation in impact\
          \ vs. no impact component of mixture model (no goal direction)\n       \
          \     \"aggregate_data\": aggregates cosine shifts for single perturbation\
          \ in multiple cells\n            \"aggregate_gene_shifts\": aggregates cosine\
          \ shifts of genes in response to perturbation(s)\n\nThe most relevant mode\
          \ depends on your scientific question. If you would like to determine whether\
          \ a particular gene leads to a more significant shift between a start state\
          \ and goal state compared to other genes, it would be best to run the in\
          \ silico perturbation using all genes so that you could compare that gene\
          \ to a random distribution drawn from the other genes, using \"goal_state_shift\"\
          . If you would like to determine whether a particular gene leads to a more\
          \ significant perturbation in a given starting cell state compared to that\
          \ gene in a different starting cell state, without a particular goal state\
          \ in mind, then you should perform the in silico perturbation of that gene\
          \ in start state A and in start state B and provide one of those as the\
          \ null distribution in the \"vs_null\" mode. If you would like to do the\
          \ former but would like to derive the random distribution more efficiently\
          \ without perturbing all genes in all cells, you can run the single gene\
          \ perturbation mode with the InSilicoPerturber with random genes and provide\
          \ all files in the same directory for the in silico perturber stats generator\
          \ to read them together. These are just a few examples but there are other\
          \ ways to arrange the test depending on your question.\n\n2) You can run\
          \ the InSilicoPerturber with the mode \"cell_and_gene\" and the InSilicoPerturberStats\
          \ with the mode \"aggregate_gene_shifts\". Please make sure you are using\
          \ the updated version.\n\n3) You can run the InSilicoPerturber with genes_to_perturb=\"\
          all\" or, if your gene list is small, you can run it with perturbing a single\
          \ gene each time with separate jobs for each gene. The resulting files can\
          \ be placed in the same directory so that the stats generator reads all\
          \ of them together."
        updatedAt: '2023-12-27T22:43:56.096Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Minnnzhou
      relatedEventId: 658ca8acc8217618ed62d4cb
    id: 658ca8acc8217618ed62d4c8
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer! \n\n1) If you only test in\
    \ silico perturbation of a single gene in a single cell population, there is no\
    \ control to compare against statistically so there is no p-value and FDR generated.\
    \ If you would like to derive a p-value and FDR, you have to provide something\
    \ to compare to. The possible modes for running the in silico perturber stats\
    \ generator are as follows:\n\n            \"goal_state_shift\": perturbation\
    \ vs. random for desired cell state shift\n            \"vs_null\": perturbation\
    \ vs. null from provided null distribution dataset\n            \"mixture_model\"\
    : perturbation in impact vs. no impact component of mixture model (no goal direction)\n\
    \            \"aggregate_data\": aggregates cosine shifts for single perturbation\
    \ in multiple cells\n            \"aggregate_gene_shifts\": aggregates cosine\
    \ shifts of genes in response to perturbation(s)\n\nThe most relevant mode depends\
    \ on your scientific question. If you would like to determine whether a particular\
    \ gene leads to a more significant shift between a start state and goal state\
    \ compared to other genes, it would be best to run the in silico perturbation\
    \ using all genes so that you could compare that gene to a random distribution\
    \ drawn from the other genes, using \"goal_state_shift\". If you would like to\
    \ determine whether a particular gene leads to a more significant perturbation\
    \ in a given starting cell state compared to that gene in a different starting\
    \ cell state, without a particular goal state in mind, then you should perform\
    \ the in silico perturbation of that gene in start state A and in start state\
    \ B and provide one of those as the null distribution in the \"vs_null\" mode.\
    \ If you would like to do the former but would like to derive the random distribution\
    \ more efficiently without perturbing all genes in all cells, you can run the\
    \ single gene perturbation mode with the InSilicoPerturber with random genes and\
    \ provide all files in the same directory for the in silico perturber stats generator\
    \ to read them together. These are just a few examples but there are other ways\
    \ to arrange the test depending on your question.\n\n2) You can run the InSilicoPerturber\
    \ with the mode \"cell_and_gene\" and the InSilicoPerturberStats with the mode\
    \ \"aggregate_gene_shifts\". Please make sure you are using the updated version.\n\
    \n3) You can run the InSilicoPerturber with genes_to_perturb=\"all\" or, if your\
    \ gene list is small, you can run it with perturbing a single gene each time with\
    \ separate jobs for each gene. The resulting files can be placed in the same directory\
    \ so that the stats generator reads all of them together."
  created_at: 2023-12-27 22:43:56+00:00
  edited: false
  hidden: false
  id: 658ca8acc8217618ed62d4c8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-27T22:43:56.000Z'
    data:
      status: closed
    id: 658ca8acc8217618ed62d4cb
    type: status-change
  author: ctheodoris
  created_at: 2023-12-27 22:43:56+00:00
  id: 658ca8acc8217618ed62d4cb
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-28T01:22:46.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
          fullname: Journey
          isHf: false
          isPro: false
          name: Jonyyqn
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-12-28T01:24:46.067Z'
      numEdits: 0
      reactions: []
    id: 658ccde67f5ad56419f5030a
    type: comment
  author: Jonyyqn
  content: This comment has been hidden
  created_at: 2023-12-28 01:22:46+00:00
  edited: true
  hidden: true
  id: 658ccde67f5ad56419f5030a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-28T01:22:46.000Z'
    data:
      status: open
    id: 658ccde67f5ad56419f5030c
    type: status-change
  author: Jonyyqn
  created_at: 2023-12-28 01:22:46+00:00
  id: 658ccde67f5ad56419f5030c
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
      fullname: Journey
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonyyqn
      type: user
    createdAt: '2023-12-28T01:31:38.000Z'
    data:
      edited: false
      editors:
      - Jonyyqn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8939322829246521
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0a4422c08eab1b32dd30922fc0fb7666.svg
          fullname: Journey
          isHf: false
          isPro: false
          name: Jonyyqn
          type: user
        html: "<blockquote>\n<p>Thank you for your interest in Geneformer! </p>\n\
          <ol>\n<li><p>If you only test in silico perturbation of a single gene in\
          \ a single cell population, there is no control to compare against statistically\
          \ so there is no p-value and FDR generated. If you would like to derive\
          \ a p-value and FDR, you have to provide something to compare to. The possible\
          \ modes for running the in silico perturber stats generator are as follows:</p>\n\
          <pre><code>     \"goal_state_shift\": perturbation vs. random for desired\
          \ cell state shift\n     \"vs_null\": perturbation vs. null from provided\
          \ null distribution dataset\n     \"mixture_model\": perturbation in impact\
          \ vs. no impact component of mixture model (no goal direction)\n     \"\
          aggregate_data\": aggregates cosine shifts for single perturbation in multiple\
          \ cells\n     \"aggregate_gene_shifts\": aggregates cosine shifts of genes\
          \ in response to perturbation(s)\n</code></pre>\n</li>\n</ol>\n<p>The most\
          \ relevant mode depends on your scientific question. If you would like to\
          \ determine whether a particular gene leads to a more significant shift\
          \ between a start state and goal state compared to other genes, it would\
          \ be best to run the in silico perturbation using all genes so that you\
          \ could compare that gene to a random distribution drawn from the other\
          \ genes, using \"goal_state_shift\". If you would like to determine whether\
          \ a particular gene leads to a more significant perturbation in a given\
          \ starting cell state compared to that gene in a different starting cell\
          \ state, without a particular goal state in mind, then you should perform\
          \ the in silico perturbation of that gene in start state A and in start\
          \ state B and provide one of those as the null distribution in the \"vs_null\"\
          \ mode. If you would like to do the former but would like to derive the\
          \ random distribution more efficiently without perturbing all genes in all\
          \ cells, you can run the single gene perturbation mode with the InSilicoPerturber\
          \ with random genes and provide all files in the same directory for the\
          \ in silico perturber stats generator to read them together. These are just\
          \ a few examples but there are other ways to arrange the test depending\
          \ on your question.</p>\n<ol start=\"2\">\n<li><p>You can run the InSilicoPerturber\
          \ with the mode \"cell_and_gene\" and the InSilicoPerturberStats with the\
          \ mode \"aggregate_gene_shifts\". Please make sure you are using the updated\
          \ version.</p>\n</li>\n<li><p>You can run the InSilicoPerturber with genes_to_perturb=\"\
          all\" or, if your gene list is small, you can run it with perturbing a single\
          \ gene each time with separate jobs for each gene. The resulting files can\
          \ be placed in the same directory so that the stats generator reads all\
          \ of them together.</p>\n</li>\n</ol>\n</blockquote>\n<p>Thank you for your\
          \ detailed response. In response to the first question, I have an additional\
          \ question. I have currently chosen the \"goal_state_shift\" mode. Due to\
          \ limited machine resources (no GPU), I would like to further inquire if\
          \ there is a way, in the \"goal_state_shift\" mode, to compare each gene\
          \ in the provided list with the remaining genes in that list while introducing\
          \ perturbations and generate p-values and FDR. This idea (if I understand\
          \ correctly) aligns with the approach you mentioned: \"you can run the single\
          \ gene perturbation mode with the InSilicoPerturber with random genes and\
          \ provide all files in the same directory for the in silico perturber stats\
          \ generator to read them together\". However, I couldn't find a parameter\
          \ in the documentation of the in_silico_perturbation.ipynb related functions\
          \ and features that allows providing a gene list for random distribution.\
          \ So, I would like to ask how to specifically implement this step. I look\
          \ forward to your response!</p>\n"
        raw: "> Thank you for your interest in Geneformer! \n> \n> 1) If you only\
          \ test in silico perturbation of a single gene in a single cell population,\
          \ there is no control to compare against statistically so there is no p-value\
          \ and FDR generated. If you would like to derive a p-value and FDR, you\
          \ have to provide something to compare to. The possible modes for running\
          \ the in silico perturber stats generator are as follows:\n> \n>       \
          \      \"goal_state_shift\": perturbation vs. random for desired cell state\
          \ shift\n>             \"vs_null\": perturbation vs. null from provided\
          \ null distribution dataset\n>             \"mixture_model\": perturbation\
          \ in impact vs. no impact component of mixture model (no goal direction)\n\
          >             \"aggregate_data\": aggregates cosine shifts for single perturbation\
          \ in multiple cells\n>             \"aggregate_gene_shifts\": aggregates\
          \ cosine shifts of genes in response to perturbation(s)\n> \n> The most\
          \ relevant mode depends on your scientific question. If you would like to\
          \ determine whether a particular gene leads to a more significant shift\
          \ between a start state and goal state compared to other genes, it would\
          \ be best to run the in silico perturbation using all genes so that you\
          \ could compare that gene to a random distribution drawn from the other\
          \ genes, using \"goal_state_shift\". If you would like to determine whether\
          \ a particular gene leads to a more significant perturbation in a given\
          \ starting cell state compared to that gene in a different starting cell\
          \ state, without a particular goal state in mind, then you should perform\
          \ the in silico perturbation of that gene in start state A and in start\
          \ state B and provide one of those as the null distribution in the \"vs_null\"\
          \ mode. If you would like to do the former but would like to derive the\
          \ random distribution more efficiently without perturbing all genes in all\
          \ cells, you can run the single gene perturbation mode with the InSilicoPerturber\
          \ with random genes and provide all files in the same directory for the\
          \ in silico perturber stats generator to read them together. These are just\
          \ a few examples but there are other ways to arrange the test depending\
          \ on your question.\n> \n> 2) You can run the InSilicoPerturber with the\
          \ mode \"cell_and_gene\" and the InSilicoPerturberStats with the mode \"\
          aggregate_gene_shifts\". Please make sure you are using the updated version.\n\
          > \n> 3) You can run the InSilicoPerturber with genes_to_perturb=\"all\"\
          \ or, if your gene list is small, you can run it with perturbing a single\
          \ gene each time with separate jobs for each gene. The resulting files can\
          \ be placed in the same directory so that the stats generator reads all\
          \ of them together.\n\nThank you for your detailed response. In response\
          \ to the first question, I have an additional question. I have currently\
          \ chosen the \"goal_state_shift\" mode. Due to limited machine resources\
          \ (no GPU), I would like to further inquire if there is a way, in the \"\
          goal_state_shift\" mode, to compare each gene in the provided list with\
          \ the remaining genes in that list while introducing perturbations and generate\
          \ p-values and FDR. This idea (if I understand correctly) aligns with the\
          \ approach you mentioned: \"you can run the single gene perturbation mode\
          \ with the InSilicoPerturber with random genes and provide all files in\
          \ the same directory for the in silico perturber stats generator to read\
          \ them together\". However, I couldn't find a parameter in the documentation\
          \ of the in_silico_perturbation.ipynb related functions and features that\
          \ allows providing a gene list for random distribution. So, I would like\
          \ to ask how to specifically implement this step. I look forward to your\
          \ response!"
        updatedAt: '2023-12-28T01:31:38.975Z'
      numEdits: 0
      reactions: []
    id: 658ccffa9b22f4d79639cf67
    type: comment
  author: Jonyyqn
  content: "> Thank you for your interest in Geneformer! \n> \n> 1) If you only test\
    \ in silico perturbation of a single gene in a single cell population, there is\
    \ no control to compare against statistically so there is no p-value and FDR generated.\
    \ If you would like to derive a p-value and FDR, you have to provide something\
    \ to compare to. The possible modes for running the in silico perturber stats\
    \ generator are as follows:\n> \n>             \"goal_state_shift\": perturbation\
    \ vs. random for desired cell state shift\n>             \"vs_null\": perturbation\
    \ vs. null from provided null distribution dataset\n>             \"mixture_model\"\
    : perturbation in impact vs. no impact component of mixture model (no goal direction)\n\
    >             \"aggregate_data\": aggregates cosine shifts for single perturbation\
    \ in multiple cells\n>             \"aggregate_gene_shifts\": aggregates cosine\
    \ shifts of genes in response to perturbation(s)\n> \n> The most relevant mode\
    \ depends on your scientific question. If you would like to determine whether\
    \ a particular gene leads to a more significant shift between a start state and\
    \ goal state compared to other genes, it would be best to run the in silico perturbation\
    \ using all genes so that you could compare that gene to a random distribution\
    \ drawn from the other genes, using \"goal_state_shift\". If you would like to\
    \ determine whether a particular gene leads to a more significant perturbation\
    \ in a given starting cell state compared to that gene in a different starting\
    \ cell state, without a particular goal state in mind, then you should perform\
    \ the in silico perturbation of that gene in start state A and in start state\
    \ B and provide one of those as the null distribution in the \"vs_null\" mode.\
    \ If you would like to do the former but would like to derive the random distribution\
    \ more efficiently without perturbing all genes in all cells, you can run the\
    \ single gene perturbation mode with the InSilicoPerturber with random genes and\
    \ provide all files in the same directory for the in silico perturber stats generator\
    \ to read them together. These are just a few examples but there are other ways\
    \ to arrange the test depending on your question.\n> \n> 2) You can run the InSilicoPerturber\
    \ with the mode \"cell_and_gene\" and the InSilicoPerturberStats with the mode\
    \ \"aggregate_gene_shifts\". Please make sure you are using the updated version.\n\
    > \n> 3) You can run the InSilicoPerturber with genes_to_perturb=\"all\" or, if\
    \ your gene list is small, you can run it with perturbing a single gene each time\
    \ with separate jobs for each gene. The resulting files can be placed in the same\
    \ directory so that the stats generator reads all of them together.\n\nThank you\
    \ for your detailed response. In response to the first question, I have an additional\
    \ question. I have currently chosen the \"goal_state_shift\" mode. Due to limited\
    \ machine resources (no GPU), I would like to further inquire if there is a way,\
    \ in the \"goal_state_shift\" mode, to compare each gene in the provided list\
    \ with the remaining genes in that list while introducing perturbations and generate\
    \ p-values and FDR. This idea (if I understand correctly) aligns with the approach\
    \ you mentioned: \"you can run the single gene perturbation mode with the InSilicoPerturber\
    \ with random genes and provide all files in the same directory for the in silico\
    \ perturber stats generator to read them together\". However, I couldn't find\
    \ a parameter in the documentation of the in_silico_perturbation.ipynb related\
    \ functions and features that allows providing a gene list for random distribution.\
    \ So, I would like to ask how to specifically implement this step. I look forward\
    \ to your response!"
  created_at: 2023-12-28 01:31:38+00:00
  edited: false
  hidden: false
  id: 658ccffa9b22f4d79639cf67
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-28T01:33:19.000Z'
    data:
      edited: true
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9466384053230286
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for following up. I would like to note that there are
          two comments from you, one from 6 min ago and one from 2 days ago, that
          say "This comment has been hidden" so I cannot be sure the content of the
          comments. However, based on the email notification, it seems you are interested
          in comparing the given single gene perturbation to the rest of the single
          gene perturbations in your list. In that case, you can run the InSilicoPerturber
          with a job for each gene and then provide all files in the same directory
          to InSilicoPerturberStats and run this in the "goal_state_shift" mode so
          that it pulls the random distribution from all genes. If there is a major
          imbalance in the number of detections for each gene, I would consider this
          when interpreting the p-values since this will affect the power of each
          comparison and also the random distribution. You can also alternatively
          provide a custom null distribution with the "vs_null" mode and compare to
          each of your single gene perturbations.</p>

          <p>Update after comment unhidden: The random distribution is pulled from
          all perturbations provided in the "goal_state_shift" mode; you do not need
          to explicitly define it. You can provide a custom null distribution with
          the "vs_null" mode.</p>

          '
        raw: 'Thank you for following up. I would like to note that there are two
          comments from you, one from 6 min ago and one from 2 days ago, that say
          "This comment has been hidden" so I cannot be sure the content of the comments.
          However, based on the email notification, it seems you are interested in
          comparing the given single gene perturbation to the rest of the single gene
          perturbations in your list. In that case, you can run the InSilicoPerturber
          with a job for each gene and then provide all files in the same directory
          to InSilicoPerturberStats and run this in the "goal_state_shift" mode so
          that it pulls the random distribution from all genes. If there is a major
          imbalance in the number of detections for each gene, I would consider this
          when interpreting the p-values since this will affect the power of each
          comparison and also the random distribution. You can also alternatively
          provide a custom null distribution with the "vs_null" mode and compare to
          each of your single gene perturbations.


          Update after comment unhidden: The random distribution is pulled from all
          perturbations provided in the "goal_state_shift" mode; you do not need to
          explicitly define it. You can provide a custom null distribution with the
          "vs_null" mode.'
        updatedAt: '2023-12-28T01:34:50.119Z'
      numEdits: 1
      reactions: []
      relatedEventId: 658cd05f363800354b521121
    id: 658cd05f363800354b52111f
    type: comment
  author: ctheodoris
  content: 'Thank you for following up. I would like to note that there are two comments
    from you, one from 6 min ago and one from 2 days ago, that say "This comment has
    been hidden" so I cannot be sure the content of the comments. However, based on
    the email notification, it seems you are interested in comparing the given single
    gene perturbation to the rest of the single gene perturbations in your list. In
    that case, you can run the InSilicoPerturber with a job for each gene and then
    provide all files in the same directory to InSilicoPerturberStats and run this
    in the "goal_state_shift" mode so that it pulls the random distribution from all
    genes. If there is a major imbalance in the number of detections for each gene,
    I would consider this when interpreting the p-values since this will affect the
    power of each comparison and also the random distribution. You can also alternatively
    provide a custom null distribution with the "vs_null" mode and compare to each
    of your single gene perturbations.


    Update after comment unhidden: The random distribution is pulled from all perturbations
    provided in the "goal_state_shift" mode; you do not need to explicitly define
    it. You can provide a custom null distribution with the "vs_null" mode.'
  created_at: 2023-12-28 01:33:19+00:00
  edited: true
  hidden: false
  id: 658cd05f363800354b52111f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-12-28T01:33:19.000Z'
    data:
      status: closed
    id: 658cd05f363800354b521121
    type: status-change
  author: ctheodoris
  created_at: 2023-12-28 01:33:19+00:00
  id: 658cd05f363800354b521121
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 285
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: How to output p-value and FDR and perturbation result of gene embedding when
  doing single-gene perturbation
