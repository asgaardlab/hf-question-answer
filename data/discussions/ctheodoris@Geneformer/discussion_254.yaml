!!python/object:huggingface_hub.community.DiscussionWithDetails
author: swang12
conflicting_files: null
created_at: 2023-10-04 15:56:07+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
      fullname: Su Wang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: swang12
      type: user
    createdAt: '2023-10-04T16:56:07.000Z'
    data:
      edited: false
      editors:
      - swang12
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9198407530784607
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/dfad9b282f034de3ccdaf7ab2b999559.svg
          fullname: Su Wang
          isHf: false
          isPro: false
          name: swang12
          type: user
        html: '<p>Hi, I fine-tuned the pre-trained Geneformer model into a cell type
          classifier using one dataset. I was wondering how I should apply it for
          cell type annotation of a new dataset. I loaded the fine-tuned model using
          transformers.BertForSequenceClassification and tokenized the new dataset
          using geneformer.TranscriptomeTokenizer. I was trying to feed the tokenized
          dataset into the model and let it output probability scores for each possible
          class, but I''m not sure what the correct way is. It would be best if I
          could do multi-class annotation. I was wondering if there is an example
          code for this. Thank you very much!</p>

          <p>Regards,<br>Su</p>

          '
        raw: "Hi, I fine-tuned the pre-trained Geneformer model into a cell type classifier\
          \ using one dataset. I was wondering how I should apply it for cell type\
          \ annotation of a new dataset. I loaded the fine-tuned model using transformers.BertForSequenceClassification\
          \ and tokenized the new dataset using geneformer.TranscriptomeTokenizer.\
          \ I was trying to feed the tokenized dataset into the model and let it output\
          \ probability scores for each possible class, but I'm not sure what the\
          \ correct way is. It would be best if I could do multi-class annotation.\
          \ I was wondering if there is an example code for this. Thank you very much!\r\
          \n\r\nRegards,\r\nSu"
        updatedAt: '2023-10-04T16:56:07.624Z'
      numEdits: 0
      reactions: []
    id: 651d9927e970350f7b1f574f
    type: comment
  author: swang12
  content: "Hi, I fine-tuned the pre-trained Geneformer model into a cell type classifier\
    \ using one dataset. I was wondering how I should apply it for cell type annotation\
    \ of a new dataset. I loaded the fine-tuned model using transformers.BertForSequenceClassification\
    \ and tokenized the new dataset using geneformer.TranscriptomeTokenizer. I was\
    \ trying to feed the tokenized dataset into the model and let it output probability\
    \ scores for each possible class, but I'm not sure what the correct way is. It\
    \ would be best if I could do multi-class annotation. I was wondering if there\
    \ is an example code for this. Thank you very much!\r\n\r\nRegards,\r\nSu"
  created_at: 2023-10-04 15:56:07+00:00
  edited: false
  hidden: false
  id: 651d9927e970350f7b1f574f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-10-04T21:27:16.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7513146996498108
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your interest in Geneformer! You can load the fine-tuned\
          \ model and then pass it the tokenized dataset input_ids as the input to\
          \ generate the logits that indicate the prediction for each class:</p>\n\
          <pre><code>with torch.no_grad():\n    logits = model(**inputs).logits\n\
          </code></pre>\n<p>You can also check the function \"classifier_predict\"\
          \ in the example notebook for gene classification.</p>\n"
        raw: "Thank you for your interest in Geneformer! You can load the fine-tuned\
          \ model and then pass it the tokenized dataset input_ids as the input to\
          \ generate the logits that indicate the prediction for each class:\n```\n\
          with torch.no_grad():\n    logits = model(**inputs).logits\n```\n\nYou can\
          \ also check the function \"classifier_predict\" in the example notebook\
          \ for gene classification."
        updatedAt: '2023-10-04T21:27:16.786Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - swang12
      relatedEventId: 651dd8b40a472c21f4ad9bcf
    id: 651dd8b40a472c21f4ad9bce
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer! You can load the fine-tuned\
    \ model and then pass it the tokenized dataset input_ids as the input to generate\
    \ the logits that indicate the prediction for each class:\n```\nwith torch.no_grad():\n\
    \    logits = model(**inputs).logits\n```\n\nYou can also check the function \"\
    classifier_predict\" in the example notebook for gene classification."
  created_at: 2023-10-04 20:27:16+00:00
  edited: false
  hidden: false
  id: 651dd8b40a472c21f4ad9bce
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-10-04T21:27:16.000Z'
    data:
      status: closed
    id: 651dd8b40a472c21f4ad9bcf
    type: status-change
  author: ctheodoris
  created_at: 2023-10-04 20:27:16+00:00
  id: 651dd8b40a472c21f4ad9bcf
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 254
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Using fine-tuned model for cell type annotation of a new dataset
