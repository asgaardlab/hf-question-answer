!!python/object:huggingface_hub.community.DiscussionWithDetails
author: giovp
conflicting_files: []
created_at: 2023-07-06 17:26:49+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
      fullname: Giovanni Palla
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: giovp
      type: user
    createdAt: '2023-07-06T18:26:49.000Z'
    data:
      edited: false
      editors:
      - giovp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5027815103530884
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
          fullname: Giovanni Palla
          isHf: false
          isPro: false
          name: giovp
          type: user
        html: '<p>Enable tokenier to work on anndata files</p>

          '
        raw: Enable tokenier to work on anndata files
        updatedAt: '2023-07-06T18:26:49.865Z'
      numEdits: 0
      reactions: []
    id: 64a70769bc8fc71579d68ae7
    type: comment
  author: giovp
  content: Enable tokenier to work on anndata files
  created_at: 2023-07-06 17:26:49+00:00
  edited: false
  hidden: false
  id: 64a70769bc8fc71579d68ae7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
      fullname: Giovanni Palla
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: giovp
      type: user
    createdAt: '2023-07-06T18:26:50.000Z'
    data:
      oid: 411fc8e06aed898d76596c8dbfdffab55af5c9d4
      parents:
      - 77eb432430e05760c80cc931b0e17844fe18f391
      subject: Upload tokenizer.py
    id: 64a7076a0000000000000000
    type: commit
  author: giovp
  created_at: 2023-07-06 17:26:50+00:00
  id: 64a7076a0000000000000000
  oid: 411fc8e06aed898d76596c8dbfdffab55af5c9d4
  summary: Upload tokenizer.py
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
      fullname: Giovanni Palla
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: giovp
      type: user
    createdAt: '2023-07-06T18:32:43.000Z'
    data:
      edited: false
      editors:
      - giovp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6711428761482239
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
          fullname: Giovanni Palla
          isHf: false
          isPro: false
          name: giovp
          type: user
        html: '<p>hi, I added a method to enable the tokenizer to also take anndata
          files as input. I tested it with the following:</p>

          <pre><code class="language-python">

          <span class="hljs-comment"># take any anndata file</span>

          <span class="hljs-comment"># ...</span>


          <span class="hljs-comment"># save it as loom and as h5ad</span>

          adata.write_loom(<span class="hljs-string">"/path/to/folder/temp_files/temp.loom"</span>)

          adata.write(<span class="hljs-string">"/path/to/folder/temp_files/temp.h5ad"</span>)


          <span class="hljs-comment"># tokenize data</span>

          <span class="hljs-keyword">from</span> geneformer <span class="hljs-keyword">import</span>
          TranscriptomeTokenizer


          tk = TranscriptomeTokenizer({<span class="hljs-string">"tissue"</span>:<span
          class="hljs-string">"tissue"</span>}, nproc=<span class="hljs-number">4</span>)
          <span class="hljs-comment"># some annotation</span>

          tk.tokenize_data(<span class="hljs-string">"/path/to/folder/temp_files/temp.h5ad"</span>,
          <span class="hljs-string">"/path/to/folder/temp_files"</span>, <span class="hljs-string">"dataset_h5ad"</span>,
          <span class="hljs-string">"h5ad"</span>)


          tk = TranscriptomeTokenizer({<span class="hljs-string">"tissue"</span>:<span
          class="hljs-string">"tissue"</span>}, nproc=<span class="hljs-number">4</span>)
          <span class="hljs-comment"># some annotation</span>

          tk.tokenize_data(<span class="hljs-string">"/path/to/folder/temp_files/temp.loom"</span>,
          <span class="hljs-string">"/path/to/folder/temp_files"</span>, <span class="hljs-string">"dataset_loom"</span>,
          <span class="hljs-string">"loom"</span>)

          </code></pre>

          <p>and test with e.g. <code>diff -r -q dataset_h5ad.dataset dataset_loom.dataset</code>
          or reading the arrow files etc.</p>

          <p>not sure if this is the best way to submit contributions via HF hub,
          diffs don''t look good. Any help on how to do this properly is appreciated,
          in case there is interest to have this contribution.</p>

          '
        raw: 'hi, I added a method to enable the tokenizer to also take anndata files
          as input. I tested it with the following:


          ```python


          # take any anndata file

          # ...


          # save it as loom and as h5ad

          adata.write_loom("/path/to/folder/temp_files/temp.loom")

          adata.write("/path/to/folder/temp_files/temp.h5ad")


          # tokenize data

          from geneformer import TranscriptomeTokenizer


          tk = TranscriptomeTokenizer({"tissue":"tissue"}, nproc=4) # some annotation

          tk.tokenize_data("/path/to/folder/temp_files/temp.h5ad", "/path/to/folder/temp_files",
          "dataset_h5ad", "h5ad")


          tk = TranscriptomeTokenizer({"tissue":"tissue"}, nproc=4) # some annotation

          tk.tokenize_data("/path/to/folder/temp_files/temp.loom", "/path/to/folder/temp_files",
          "dataset_loom", "loom")

          ```


          and test with e.g. `diff -r -q dataset_h5ad.dataset dataset_loom.dataset`
          or reading the arrow files etc.


          not sure if this is the best way to submit contributions via HF hub, diffs
          don''t look good. Any help on how to do this properly is appreciated, in
          case there is interest to have this contribution.'
        updatedAt: '2023-07-06T18:32:43.481Z'
      numEdits: 0
      reactions: []
    id: 64a708cbe940d769192d71df
    type: comment
  author: giovp
  content: 'hi, I added a method to enable the tokenizer to also take anndata files
    as input. I tested it with the following:


    ```python


    # take any anndata file

    # ...


    # save it as loom and as h5ad

    adata.write_loom("/path/to/folder/temp_files/temp.loom")

    adata.write("/path/to/folder/temp_files/temp.h5ad")


    # tokenize data

    from geneformer import TranscriptomeTokenizer


    tk = TranscriptomeTokenizer({"tissue":"tissue"}, nproc=4) # some annotation

    tk.tokenize_data("/path/to/folder/temp_files/temp.h5ad", "/path/to/folder/temp_files",
    "dataset_h5ad", "h5ad")


    tk = TranscriptomeTokenizer({"tissue":"tissue"}, nproc=4) # some annotation

    tk.tokenize_data("/path/to/folder/temp_files/temp.loom", "/path/to/folder/temp_files",
    "dataset_loom", "loom")

    ```


    and test with e.g. `diff -r -q dataset_h5ad.dataset dataset_loom.dataset` or reading
    the arrow files etc.


    not sure if this is the best way to submit contributions via HF hub, diffs don''t
    look good. Any help on how to do this properly is appreciated, in case there is
    interest to have this contribution.'
  created_at: 2023-07-06 17:32:43+00:00
  edited: false
  hidden: false
  id: 64a708cbe940d769192d71df
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
      fullname: Giovanni Palla
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: giovp
      type: user
    createdAt: '2023-07-06T19:03:31.000Z'
    data:
      edited: false
      editors:
      - giovp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.986767053604126
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
          fullname: Giovanni Palla
          isHf: false
          isPro: false
          name: giovp
          type: user
        html: '<p>found some bugs, closing and reopening later</p>

          '
        raw: found some bugs, closing and reopening later
        updatedAt: '2023-07-06T19:03:31.883Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64a71003b5e5c56860a6be79
    id: 64a71003b5e5c56860a6be77
    type: comment
  author: giovp
  content: found some bugs, closing and reopening later
  created_at: 2023-07-06 18:03:31+00:00
  edited: false
  hidden: false
  id: 64a71003b5e5c56860a6be77
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/6481e089ab49674d438403a5098fa35a.svg
      fullname: Giovanni Palla
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: giovp
      type: user
    createdAt: '2023-07-06T19:03:31.000Z'
    data:
      status: closed
    id: 64a71003b5e5c56860a6be79
    type: status-change
  author: giovp
  created_at: 2023-07-06 18:03:31+00:00
  id: 64a71003b5e5c56860a6be79
  new_status: closed
  type: status-change
is_pull_request: true
merge_commit_oid: null
num: 99
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: refs/heads/main
title: Upload tokenizer.py
