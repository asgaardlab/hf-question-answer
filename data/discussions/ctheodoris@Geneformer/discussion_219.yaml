!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jinbo1129
conflicting_files: null
created_at: 2023-08-14 06:04:44+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
      fullname: zhang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jinbo1129
      type: user
    createdAt: '2023-08-14T07:04:44.000Z'
    data:
      edited: false
      editors:
      - jinbo1129
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.856031596660614
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/979d5517514710ed6163619042dbf005.svg
          fullname: zhang
          isHf: false
          isPro: false
          name: jinbo1129
          type: user
        html: "<p>Hello, thanks for this great tool !<br>I am trying to use this software\
          \ to perform data analysis on <a rel=\"nofollow\" href=\"https://www.nature.com/articles/s41591-019-0733-7\"\
          >a published article</a>.<br>The article compared single-cell data from\
          \ normal samples and disease samples to identify JAK3 targets, and then\
          \ treated patients with relevant drugs, resulting in improved conditions.\
          \ Therefore, I want to analyze this data using Geneformer.</p>\n<p>First,\
          \ the article indicates that T cells are the main cause of the disease.\
          \ Therefore, I input T cells into the geneformer model, using 1 for normal\
          \ and 0 for disease, to train a cell classification model. The model successfully\
          \ distinguished between the two groups of cells\uFF1A<br><a rel=\"nofollow\"\
          \ href=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/ykIW3w4OK8mWM-EDhZrfp.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/ykIW3w4OK8mWM-EDhZrfp.png\"\
          ></a></p>\n<p>Next, based on the trained model, I randomly knocked out several\
          \ genes including the JAK3 gene. I observed that the value obtained for\
          \ JAK3 was not significantly different from other genes, and the best-scoring\
          \ genes were the most significantly differentially expressed NN genes in\
          \ the two groups\uFF1A</p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/iifLfQyoz4vk00aWdUi5U.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/iifLfQyoz4vk00aWdUi5U.png\"\
          ></a></p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/jLwxWD-0Cr0Jb-cNBt183.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/jLwxWD-0Cr0Jb-cNBt183.png\"\
          ></a></p>\n<p>Could you please give some suggestions for this experiment\
          \ to help me analyze the data using the geneformer model?</p>\n<p>Best</p>\n"
        raw: "Hello, thanks for this great tool !\r\nI am trying to use this software\
          \ to perform data analysis on [a published article](https://www.nature.com/articles/s41591-019-0733-7).\
          \ \r\nThe article compared single-cell data from normal samples and disease\
          \ samples to identify JAK3 targets, and then treated patients with relevant\
          \ drugs, resulting in improved conditions. Therefore, I want to analyze\
          \ this data using Geneformer.\r\n\r\nFirst, the article indicates that T\
          \ cells are the main cause of the disease. Therefore, I input T cells into\
          \ the geneformer model, using 1 for normal and 0 for disease, to train a\
          \ cell classification model. The model successfully distinguished between\
          \ the two groups of cells\uFF1A\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/ykIW3w4OK8mWM-EDhZrfp.png)\r\
          \n\r\nNext, based on the trained model, I randomly knocked out several genes\
          \ including the JAK3 gene. I observed that the value obtained for JAK3 was\
          \ not significantly different from other genes, and the best-scoring genes\
          \ were the most significantly differentially expressed NN genes in the two\
          \ groups\uFF1A\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/iifLfQyoz4vk00aWdUi5U.png)\r\
          \n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/jLwxWD-0Cr0Jb-cNBt183.png)\r\
          \n\r\nCould you please give some suggestions for this experiment to help\
          \ me analyze the data using the geneformer model?\r\n\r\nBest\r\n\r\n\r\n"
        updatedAt: '2023-08-14T07:04:44.874Z'
      numEdits: 0
      reactions: []
    id: 64d9d20c749fcf366a5eff49
    type: comment
  author: jinbo1129
  content: "Hello, thanks for this great tool !\r\nI am trying to use this software\
    \ to perform data analysis on [a published article](https://www.nature.com/articles/s41591-019-0733-7).\
    \ \r\nThe article compared single-cell data from normal samples and disease samples\
    \ to identify JAK3 targets, and then treated patients with relevant drugs, resulting\
    \ in improved conditions. Therefore, I want to analyze this data using Geneformer.\r\
    \n\r\nFirst, the article indicates that T cells are the main cause of the disease.\
    \ Therefore, I input T cells into the geneformer model, using 1 for normal and\
    \ 0 for disease, to train a cell classification model. The model successfully\
    \ distinguished between the two groups of cells\uFF1A\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/ykIW3w4OK8mWM-EDhZrfp.png)\r\
    \n\r\nNext, based on the trained model, I randomly knocked out several genes including\
    \ the JAK3 gene. I observed that the value obtained for JAK3 was not significantly\
    \ different from other genes, and the best-scoring genes were the most significantly\
    \ differentially expressed NN genes in the two groups\uFF1A\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/iifLfQyoz4vk00aWdUi5U.png)\r\
    \n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647d74d6d412b3b3765cd091/jLwxWD-0Cr0Jb-cNBt183.png)\r\
    \n\r\nCould you please give some suggestions for this experiment to help me analyze\
    \ the data using the geneformer model?\r\n\r\nBest\r\n\r\n\r\n"
  created_at: 2023-08-14 06:04:44+00:00
  edited: false
  hidden: false
  id: 64d9d20c749fcf366a5eff49
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-08-23T18:03:28.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9351556301116943
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer! Your fine-tuned model
          appears to distinguish the normal and disease state well. You can also quantify
          the accuracy of the predictive performance on test data to ensure the model
          has not overfit to your training data. If it has overfit, you could consider
          training for only 1 epoch (if you trained for more than 1) or including
          data from multiple datasets (if available) to promote generalizability.
          </p>

          <p>Regarding the in silico perturbation, it is expected that genes that
          are significantly differentially expressed between the classes would contribute
          to the model''s embedding of the two states. However, in our experience,
          the model does not strictly separate the classes based only on these significantly
          differentially expressed genes, likely because it has baseline knowledge
          from the large-scale pretraining that affects its interpretation of each
          cell state. You could consider taking an unbiased approach of perturbing
          all genes (genes_to_perturb="all") to determine the genes whose perturbation
          most significantly shifts the embedding between the start and goal state.
          If you performed the in silico perturbation on the last embedding layer
          (emb_layer=0), you could consider testing the second to last layer (emb_layer=-1)
          as this layer may represent a more general representation of the cell state,
          while the final layer is more specifically related to the learning objective,
          in this case predicting the normal vs. disease classes. You could also consider
          freezing more layers (e.g. freezing 4 and training 2) while fine-tuning
          the cell classifier to retain more general attention weights from the pretraining
          phase. </p>

          '
        raw: "Thank you for your interest in Geneformer! Your fine-tuned model appears\
          \ to distinguish the normal and disease state well. You can also quantify\
          \ the accuracy of the predictive performance on test data to ensure the\
          \ model has not overfit to your training data. If it has overfit, you could\
          \ consider training for only 1 epoch (if you trained for more than 1) or\
          \ including data from multiple datasets (if available) to promote generalizability.\
          \ \n\nRegarding the in silico perturbation, it is expected that genes that\
          \ are significantly differentially expressed between the classes would contribute\
          \ to the model's embedding of the two states. However, in our experience,\
          \ the model does not strictly separate the classes based only on these significantly\
          \ differentially expressed genes, likely because it has baseline knowledge\
          \ from the large-scale pretraining that affects its interpretation of each\
          \ cell state. You could consider taking an unbiased approach of perturbing\
          \ all genes (genes_to_perturb=\"all\") to determine the genes whose perturbation\
          \ most significantly shifts the embedding between the start and goal state.\
          \ If you performed the in silico perturbation on the last embedding layer\
          \ (emb_layer=0), you could consider testing the second to last layer (emb_layer=-1)\
          \ as this layer may represent a more general representation of the cell\
          \ state, while the final layer is more specifically related to the learning\
          \ objective, in this case predicting the normal vs. disease classes. You\
          \ could also consider freezing more layers (e.g. freezing 4 and training\
          \ 2) while fine-tuning the cell classifier to retain more general attention\
          \ weights from the pretraining phase. "
        updatedAt: '2023-08-23T18:03:28.521Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64e649f0e645f2b308bed33a
    id: 64e649f0e645f2b308bed337
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer! Your fine-tuned model appears\
    \ to distinguish the normal and disease state well. You can also quantify the\
    \ accuracy of the predictive performance on test data to ensure the model has\
    \ not overfit to your training data. If it has overfit, you could consider training\
    \ for only 1 epoch (if you trained for more than 1) or including data from multiple\
    \ datasets (if available) to promote generalizability. \n\nRegarding the in silico\
    \ perturbation, it is expected that genes that are significantly differentially\
    \ expressed between the classes would contribute to the model's embedding of the\
    \ two states. However, in our experience, the model does not strictly separate\
    \ the classes based only on these significantly differentially expressed genes,\
    \ likely because it has baseline knowledge from the large-scale pretraining that\
    \ affects its interpretation of each cell state. You could consider taking an\
    \ unbiased approach of perturbing all genes (genes_to_perturb=\"all\") to determine\
    \ the genes whose perturbation most significantly shifts the embedding between\
    \ the start and goal state. If you performed the in silico perturbation on the\
    \ last embedding layer (emb_layer=0), you could consider testing the second to\
    \ last layer (emb_layer=-1) as this layer may represent a more general representation\
    \ of the cell state, while the final layer is more specifically related to the\
    \ learning objective, in this case predicting the normal vs. disease classes.\
    \ You could also consider freezing more layers (e.g. freezing 4 and training 2)\
    \ while fine-tuning the cell classifier to retain more general attention weights\
    \ from the pretraining phase. "
  created_at: 2023-08-23 17:03:28+00:00
  edited: false
  hidden: false
  id: 64e649f0e645f2b308bed337
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-08-23T18:03:28.000Z'
    data:
      status: closed
    id: 64e649f0e645f2b308bed33a
    type: status-change
  author: ctheodoris
  created_at: 2023-08-23 17:03:28+00:00
  id: 64e649f0e645f2b308bed33a
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 219
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Suggestions for the results of in silico perturbation?
