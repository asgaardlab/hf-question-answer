!!python/object:huggingface_hub.community.DiscussionWithDetails
author: beannn
conflicting_files: null
created_at: 2023-06-10 08:09:37+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-10T09:09:37.000Z'
    data:
      edited: false
      editors:
      - beannn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8956742286682129
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
          fullname: Liu
          isHf: false
          isPro: false
          name: beannn
          type: user
        html: '<p>Thanks for your fantastic work! I want to try Geneformer on Zheng68k
          dataset for cell classification. How can I process the h5ad file to fulfill
          the input requirements? Can you provide a simple tutorial, since the h5ad
          file is quite a popular format in this task. Thank you!</p>

          '
        raw: Thanks for your fantastic work! I want to try Geneformer on Zheng68k
          dataset for cell classification. How can I process the h5ad file to fulfill
          the input requirements? Can you provide a simple tutorial, since the h5ad
          file is quite a popular format in this task. Thank you!
        updatedAt: '2023-06-10T09:09:37.395Z'
      numEdits: 0
      reactions: []
    id: 64843dd1dcece54afd739989
    type: comment
  author: beannn
  content: Thanks for your fantastic work! I want to try Geneformer on Zheng68k dataset
    for cell classification. How can I process the h5ad file to fulfill the input
    requirements? Can you provide a simple tutorial, since the h5ad file is quite
    a popular format in this task. Thank you!
  created_at: 2023-06-10 08:09:37+00:00
  edited: false
  hidden: false
  id: 64843dd1dcece54afd739989
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-10T10:36:25.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8993571400642395
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your interest in Geneformer. Please see this closed
          issue: <a href="https://huggingface.co/ctheodoris/Geneformer/discussions/4">https://huggingface.co/ctheodoris/Geneformer/discussions/4</a></p>

          '
        raw: 'Thank you for your interest in Geneformer. Please see this closed issue:
          https://huggingface.co/ctheodoris/Geneformer/discussions/4'
        updatedAt: '2023-06-10T10:36:25.180Z'
      numEdits: 0
      reactions: []
      relatedEventId: 648452294bb88d273c512646
    id: 648452294bb88d273c512642
    type: comment
  author: ctheodoris
  content: 'Thank you for your interest in Geneformer. Please see this closed issue:
    https://huggingface.co/ctheodoris/Geneformer/discussions/4'
  created_at: 2023-06-10 09:36:25+00:00
  edited: false
  hidden: false
  id: 648452294bb88d273c512642
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-10T10:36:25.000Z'
    data:
      status: closed
    id: 648452294bb88d273c512646
    type: status-change
  author: ctheodoris
  created_at: 2023-06-10 09:36:25+00:00
  id: 648452294bb88d273c512646
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-10T15:54:46.000Z'
    data:
      edited: false
      editors:
      - beannn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9574046730995178
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
          fullname: Liu
          isHf: false
          isPro: false
          name: beannn
          type: user
        html: '<p>Thank you for your prompt reply. I tried doing the data conversion,
          but it seems that the "organ_major" field is required. So can data without
          this field be used? (Zheng68k does not have this field). And from the code
          point of view, without this field, it seems that the subsequent classification
          cannot be run.<br>BTW, I can''t seem to find any instructions about the
          requirement of the data or the field. Thank you!</p>

          '
        raw: 'Thank you for your prompt reply. I tried doing the data conversion,
          but it seems that the "organ_major" field is required. So can data without
          this field be used? (Zheng68k does not have this field). And from the code
          point of view, without this field, it seems that the subsequent classification
          cannot be run.

          BTW, I can''t seem to find any instructions about the requirement of the
          data or the field. Thank you!'
        updatedAt: '2023-06-10T15:54:46.130Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64849cc6d53fc2f418baad4a
    id: 64849cc6d53fc2f418baad41
    type: comment
  author: beannn
  content: 'Thank you for your prompt reply. I tried doing the data conversion, but
    it seems that the "organ_major" field is required. So can data without this field
    be used? (Zheng68k does not have this field). And from the code point of view,
    without this field, it seems that the subsequent classification cannot be run.

    BTW, I can''t seem to find any instructions about the requirement of the data
    or the field. Thank you!'
  created_at: 2023-06-10 14:54:46+00:00
  edited: false
  hidden: false
  id: 64849cc6d53fc2f418baad41
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-10T15:54:46.000Z'
    data:
      status: open
    id: 64849cc6d53fc2f418baad4a
    type: status-change
  author: beannn
  created_at: 2023-06-10 14:54:46+00:00
  id: 64849cc6d53fc2f418baad4a
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-10T22:22:00.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9227752089500427
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your question. The organ_major field is not required.
          (There are no specific attributes required.) You can supply a dictionary
          of custom attributes to be included, but this is optional. All of the examples
          in this repository are just examples. I am guessing you are following the
          example literally and including organ_major as an attribute you would like
          to include in the tokenized dataset even though this is not an attribute
          in your dataset. If you remove this from the custom attribute dictionary
          then it should resolve the issue. </p>

          <p>Similarly, the classification example notebooks are just examples of
          downstream applications. In the manuscript we demonstrate a diverse panel
          of downstream tasks, of which we include just a couple of examples here
          to provide a concrete example for others to design their own fine-tuning
          applications. You can fine-tune the model to classify any gene or cell state
          classes based on how you design the learning objective. You will need to
          modify the example notebooks/scripts accordingly for your specific application.</p>

          <p>We have now added detailed explanation to the tokenizer example script
          to make the input data format clearer for users. However, there is also
          documentation within each of the modules that you are always welcome to
          check for more information should you need.</p>

          '
        raw: "Thank you for your question. The organ_major field is not required.\
          \ (There are no specific attributes required.) You can supply a dictionary\
          \ of custom attributes to be included, but this is optional. All of the\
          \ examples in this repository are just examples. I am guessing you are following\
          \ the example literally and including organ_major as an attribute you would\
          \ like to include in the tokenized dataset even though this is not an attribute\
          \ in your dataset. If you remove this from the custom attribute dictionary\
          \ then it should resolve the issue. \n\nSimilarly, the classification example\
          \ notebooks are just examples of downstream applications. In the manuscript\
          \ we demonstrate a diverse panel of downstream tasks, of which we include\
          \ just a couple of examples here to provide a concrete example for others\
          \ to design their own fine-tuning applications. You can fine-tune the model\
          \ to classify any gene or cell state classes based on how you design the\
          \ learning objective. You will need to modify the example notebooks/scripts\
          \ accordingly for your specific application.\n\nWe have now added detailed\
          \ explanation to the tokenizer example script to make the input data format\
          \ clearer for users. However, there is also documentation within each of\
          \ the modules that you are always welcome to check for more information\
          \ should you need."
        updatedAt: '2023-06-10T22:22:00.174Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6484f788d6971a2d6fe004b6
    id: 6484f788d6971a2d6fe004ae
    type: comment
  author: ctheodoris
  content: "Thank you for your question. The organ_major field is not required. (There\
    \ are no specific attributes required.) You can supply a dictionary of custom\
    \ attributes to be included, but this is optional. All of the examples in this\
    \ repository are just examples. I am guessing you are following the example literally\
    \ and including organ_major as an attribute you would like to include in the tokenized\
    \ dataset even though this is not an attribute in your dataset. If you remove\
    \ this from the custom attribute dictionary then it should resolve the issue.\
    \ \n\nSimilarly, the classification example notebooks are just examples of downstream\
    \ applications. In the manuscript we demonstrate a diverse panel of downstream\
    \ tasks, of which we include just a couple of examples here to provide a concrete\
    \ example for others to design their own fine-tuning applications. You can fine-tune\
    \ the model to classify any gene or cell state classes based on how you design\
    \ the learning objective. You will need to modify the example notebooks/scripts\
    \ accordingly for your specific application.\n\nWe have now added detailed explanation\
    \ to the tokenizer example script to make the input data format clearer for users.\
    \ However, there is also documentation within each of the modules that you are\
    \ always welcome to check for more information should you need."
  created_at: 2023-06-10 21:22:00+00:00
  edited: false
  hidden: false
  id: 6484f788d6971a2d6fe004ae
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-10T22:22:00.000Z'
    data:
      status: closed
    id: 6484f788d6971a2d6fe004b6
    type: status-change
  author: ctheodoris
  created_at: 2023-06-10 21:22:00+00:00
  id: 6484f788d6971a2d6fe004b6
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-11T15:27:22.000Z'
    data:
      edited: false
      editors:
      - beannn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9288544654846191
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
          fullname: Liu
          isHf: false
          isPro: false
          name: beannn
          type: user
        html: '<p>Thank you for your feedback. From the code, I found that it has
          to have an "ensembl_id", how can we construct this if is not included in
          other datasets?</p>

          <pre><code>[self.genelist_dict.get(i, False) for i in data.ra["ensembl_id"]]

          </code></pre>

          '
        raw: 'Thank you for your feedback. From the code, I found that it has to have
          an "ensembl_id", how can we construct this if is not included in other datasets?

          ```

          [self.genelist_dict.get(i, False) for i in data.ra["ensembl_id"]]

          ```'
        updatedAt: '2023-06-11T15:27:22.030Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6485e7da097c4b9f75d91364
    id: 6485e7da097c4b9f75d9135d
    type: comment
  author: beannn
  content: 'Thank you for your feedback. From the code, I found that it has to have
    an "ensembl_id", how can we construct this if is not included in other datasets?

    ```

    [self.genelist_dict.get(i, False) for i in data.ra["ensembl_id"]]

    ```'
  created_at: 2023-06-11 14:27:22+00:00
  edited: false
  hidden: false
  id: 6485e7da097c4b9f75d9135d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-11T15:27:22.000Z'
    data:
      status: open
    id: 6485e7da097c4b9f75d91364
    type: status-change
  author: beannn
  created_at: 2023-06-11 14:27:22+00:00
  id: 6485e7da097c4b9f75d91364
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-11T15:45:07.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7284987568855286
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Yes, no cell attributes are required, but the genes should be labeled
          with the Ensembl ID because this is how the token dictionary converts the
          genes to the appropriate token. While gene names can vary, Ensembl IDs should
          be unique. Ensembl Biomart is one way you can convert gene names (or other
          identifiers) to Ensembl IDs. <a rel="nofollow" href="http://useast.ensembl.org/info/data/biomart/index.html">http://useast.ensembl.org/info/data/biomart/index.html</a></p>

          '
        raw: Yes, no cell attributes are required, but the genes should be labeled
          with the Ensembl ID because this is how the token dictionary converts the
          genes to the appropriate token. While gene names can vary, Ensembl IDs should
          be unique. Ensembl Biomart is one way you can convert gene names (or other
          identifiers) to Ensembl IDs. http://useast.ensembl.org/info/data/biomart/index.html
        updatedAt: '2023-06-11T15:45:07.094Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6485ec03d38342fff2ab50e3
    id: 6485ec03d38342fff2ab50e2
    type: comment
  author: ctheodoris
  content: Yes, no cell attributes are required, but the genes should be labeled with
    the Ensembl ID because this is how the token dictionary converts the genes to
    the appropriate token. While gene names can vary, Ensembl IDs should be unique.
    Ensembl Biomart is one way you can convert gene names (or other identifiers) to
    Ensembl IDs. http://useast.ensembl.org/info/data/biomart/index.html
  created_at: 2023-06-11 14:45:07+00:00
  edited: false
  hidden: false
  id: 6485ec03d38342fff2ab50e2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-11T15:45:07.000Z'
    data:
      status: closed
    id: 6485ec03d38342fff2ab50e3
    type: status-change
  author: ctheodoris
  created_at: 2023-06-11 14:45:07+00:00
  id: 6485ec03d38342fff2ab50e3
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-12T10:24:29.000Z'
    data:
      edited: false
      editors:
      - beannn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8990492820739746
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
          fullname: Liu
          isHf: false
          isPro: false
          name: beannn
          type: user
        html: "<p>It seems it also needs n_counts. What is the meaning of this field?\
          \ Is it the sum of expression for each cell? Thanks!</p>\n<pre><code>subview_norm_array\
          \ = (\n                    subview[:, :]\n                    / subview.ca.n_counts\n\
          \                    * 10_000\n                    / norm_factor_vector[:,\
          \ None]\n                )\n</code></pre>\n"
        raw: "It seems it also needs n_counts. What is the meaning of this field?\
          \ Is it the sum of expression for each cell? Thanks!\n```\nsubview_norm_array\
          \ = (\n                    subview[:, :]\n                    / subview.ca.n_counts\n\
          \                    * 10_000\n                    / norm_factor_vector[:,\
          \ None]\n                )\n```"
        updatedAt: '2023-06-12T10:24:29.142Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6486f25d9264d020ddb54a7c
    id: 6486f25d9264d020ddb54a7b
    type: comment
  author: beannn
  content: "It seems it also needs n_counts. What is the meaning of this field? Is\
    \ it the sum of expression for each cell? Thanks!\n```\nsubview_norm_array = (\n\
    \                    subview[:, :]\n                    / subview.ca.n_counts\n\
    \                    * 10_000\n                    / norm_factor_vector[:, None]\n\
    \                )\n```"
  created_at: 2023-06-12 09:24:29+00:00
  edited: false
  hidden: false
  id: 6486f25d9264d020ddb54a7b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/55bb64eeeb094fc18656559ec0381c36.svg
      fullname: Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: beannn
      type: user
    createdAt: '2023-06-12T10:24:29.000Z'
    data:
      status: open
    id: 6486f25d9264d020ddb54a7c
    type: status-change
  author: beannn
  created_at: 2023-06-12 09:24:29+00:00
  id: 6486f25d9264d020ddb54a7c
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-12T19:38:26.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9332037568092346
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: '<p>Thank you for your question. Yes, it is the total read counts for
          each cell (described in the documentation in the lines above the code you
          pasted). We have now added this point to the documentation in the example
          notebook as well to help clarify.</p>

          '
        raw: Thank you for your question. Yes, it is the total read counts for each
          cell (described in the documentation in the lines above the code you pasted).
          We have now added this point to the documentation in the example notebook
          as well to help clarify.
        updatedAt: '2023-06-12T19:38:26.485Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64877432226e95a4118d5d43
    id: 64877432226e95a4118d5d34
    type: comment
  author: ctheodoris
  content: Thank you for your question. Yes, it is the total read counts for each
    cell (described in the documentation in the lines above the code you pasted).
    We have now added this point to the documentation in the example notebook as well
    to help clarify.
  created_at: 2023-06-12 18:38:26+00:00
  edited: false
  hidden: false
  id: 64877432226e95a4118d5d34
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-06-12T19:38:26.000Z'
    data:
      status: closed
    id: 64877432226e95a4118d5d43
    type: status-change
  author: ctheodoris
  created_at: 2023-06-12 18:38:26+00:00
  id: 64877432226e95a4118d5d43
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 25
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: How to construct new dataset from h5ad file?
