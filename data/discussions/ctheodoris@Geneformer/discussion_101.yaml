!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Oskm
conflicting_files: null
created_at: 2023-07-07 16:58:46+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5c571ed03b9961adc9dd5a0f429d4d3c.svg
      fullname: Ostap Kim
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Oskm
      type: user
    createdAt: '2023-07-07T17:58:46.000Z'
    data:
      edited: false
      editors:
      - Oskm
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7933741807937622
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5c571ed03b9961adc9dd5a0f429d4d3c.svg
          fullname: Ostap Kim
          isHf: false
          isPro: false
          name: Oskm
          type: user
        html: '<p>Hello, congratulations on your amazing work! I''m trying to reproduce
          the in silico fibroblast to iPSC conversion reported in your paper, was
          able to successfully tokenize the data from Xing et. al. (listed parameters
          I''m using below), able to perturb individual genes and have a few questions
          regarding combinatorial perturbations:</p>

          <ol>

          <li>How did you perturb 4 genes (OSKM)? Does combos function allow for 4
          perturbations at once or did you need to use one of the factors as an anchor
          gene?</li>

          <li>For the anchor_gene function, I tried using ensembl id for various genes
          (in a format shown below), but getting an error. Can you please double check
          to see if there is anything wrong with my parameters?</li>

          <li>How many cells did you need to model to get statistical significance
          for OSKM reprogramming reported in the paper?</li>

          <li>For some genes (like SOX2), I''m getting extremely low N_detections
          in the dataset (3 cells out of 1000). Could you please explain why that
          would be when I''m using an "overexpress" function and if there is any way
          to increase it?</li>

          </ol>

          <p>Thank you very much for your help, this is really a great tool and will
          help many researchers!</p>

          <p>isp = InSilicoPerturber(perturb_type="overexpress",<br>                      perturb_rank_shift=None,<br>                      genes_to_perturb=["ENSG00000204531",
          "ENSG00000181449", "ENSG00000136826"],<br>                      combos=2,<br>                      anchor_gene="ENSG00000136997",<br>                      model_type="Pretrained",<br>                      num_classes=0,<br>                      emb_mode="cell",<br>                      cell_emb_style="mean_pool",<br>                      filter_data={},<br>                      cell_states_to_model={"cell_type":(["D0"],["D16_positive"],[])},<br>                      max_ncells=1000,<br>                      emb_layer=-1,<br>                      forward_batch_size=50,<br>                      nproc=1,<br>                      save_raw_data=True,<br>                      )</p>

          <p>ispstats = InSilicoPerturberStats(mode="goal_state_shift",<br>                                combos=2,<br>                                anchor_gene="ENSG00000136997",<br>                                cell_states_to_model={"cell_type":(["D0"],["D16_positive"],[])})</p>

          '
        raw: "Hello, congratulations on your amazing work! I'm trying to reproduce\
          \ the in silico fibroblast to iPSC conversion reported in your paper, was\
          \ able to successfully tokenize the data from Xing et. al. (listed parameters\
          \ I'm using below), able to perturb individual genes and have a few questions\
          \ regarding combinatorial perturbations:\r\n\r\n1. How did you perturb 4\
          \ genes (OSKM)? Does combos function allow for 4 perturbations at once or\
          \ did you need to use one of the factors as an anchor gene?\r\n2. For the\
          \ anchor_gene function, I tried using ensembl id for various genes (in a\
          \ format shown below), but getting an error. Can you please double check\
          \ to see if there is anything wrong with my parameters?\r\n3. How many cells\
          \ did you need to model to get statistical significance for OSKM reprogramming\
          \ reported in the paper?\r\n4. For some genes (like SOX2), I'm getting extremely\
          \ low N_detections in the dataset (3 cells out of 1000). Could you please\
          \ explain why that would be when I'm using an \"overexpress\" function and\
          \ if there is any way to increase it?\r\n\r\nThank you very much for your\
          \ help, this is really a great tool and will help many researchers!\r\n\r\
          \nisp = InSilicoPerturber(perturb_type=\"overexpress\",\r\n            \
          \          perturb_rank_shift=None,\r\n                      genes_to_perturb=[\"\
          ENSG00000204531\", \"ENSG00000181449\", \"ENSG00000136826\"],\r\n      \
          \                combos=2,\r\n                      anchor_gene=\"ENSG00000136997\"\
          ,\r\n                      model_type=\"Pretrained\",\r\n              \
          \        num_classes=0,\r\n                      emb_mode=\"cell\",\r\n\
          \                      cell_emb_style=\"mean_pool\",\r\n               \
          \       filter_data={},\r\n                      cell_states_to_model={\"\
          cell_type\":([\"D0\"],[\"D16_positive\"],[])},\r\n                     \
          \ max_ncells=1000,\r\n                      emb_layer=-1,\r\n          \
          \            forward_batch_size=50,\r\n                      nproc=1,\r\n\
          \                      save_raw_data=True,\r\n                      )\r\n\
          \r\nispstats = InSilicoPerturberStats(mode=\"goal_state_shift\",\r\n   \
          \                             combos=2,\r\n                            \
          \    anchor_gene=\"ENSG00000136997\",\r\n                              \
          \  cell_states_to_model={\"cell_type\":([\"D0\"],[\"D16_positive\"],[])})"
        updatedAt: '2023-07-07T17:58:46.612Z'
      numEdits: 0
      reactions: []
    id: 64a852564a7028998355b980
    type: comment
  author: Oskm
  content: "Hello, congratulations on your amazing work! I'm trying to reproduce the\
    \ in silico fibroblast to iPSC conversion reported in your paper, was able to\
    \ successfully tokenize the data from Xing et. al. (listed parameters I'm using\
    \ below), able to perturb individual genes and have a few questions regarding\
    \ combinatorial perturbations:\r\n\r\n1. How did you perturb 4 genes (OSKM)? Does\
    \ combos function allow for 4 perturbations at once or did you need to use one\
    \ of the factors as an anchor gene?\r\n2. For the anchor_gene function, I tried\
    \ using ensembl id for various genes (in a format shown below), but getting an\
    \ error. Can you please double check to see if there is anything wrong with my\
    \ parameters?\r\n3. How many cells did you need to model to get statistical significance\
    \ for OSKM reprogramming reported in the paper?\r\n4. For some genes (like SOX2),\
    \ I'm getting extremely low N_detections in the dataset (3 cells out of 1000).\
    \ Could you please explain why that would be when I'm using an \"overexpress\"\
    \ function and if there is any way to increase it?\r\n\r\nThank you very much\
    \ for your help, this is really a great tool and will help many researchers!\r\
    \n\r\nisp = InSilicoPerturber(perturb_type=\"overexpress\",\r\n              \
    \        perturb_rank_shift=None,\r\n                      genes_to_perturb=[\"\
    ENSG00000204531\", \"ENSG00000181449\", \"ENSG00000136826\"],\r\n            \
    \          combos=2,\r\n                      anchor_gene=\"ENSG00000136997\"\
    ,\r\n                      model_type=\"Pretrained\",\r\n                    \
    \  num_classes=0,\r\n                      emb_mode=\"cell\",\r\n            \
    \          cell_emb_style=\"mean_pool\",\r\n                      filter_data={},\r\
    \n                      cell_states_to_model={\"cell_type\":([\"D0\"],[\"D16_positive\"\
    ],[])},\r\n                      max_ncells=1000,\r\n                      emb_layer=-1,\r\
    \n                      forward_batch_size=50,\r\n                      nproc=1,\r\
    \n                      save_raw_data=True,\r\n                      )\r\n\r\n\
    ispstats = InSilicoPerturberStats(mode=\"goal_state_shift\",\r\n             \
    \                   combos=2,\r\n                                anchor_gene=\"\
    ENSG00000136997\",\r\n                                cell_states_to_model={\"\
    cell_type\":([\"D0\"],[\"D16_positive\"],[])})"
  created_at: 2023-07-07 16:58:46+00:00
  edited: false
  hidden: false
  id: 64a852564a7028998355b980
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-16T18:46:52.000Z'
    data:
      edited: false
      editors:
      - ctheodoris
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6032575964927673
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
          fullname: Christina Theodoris
          isHf: false
          isPro: false
          name: ctheodoris
          type: user
        html: "<p>Thank you for your interest in Geneformer! I updated the in silico\
          \ perturber to allow for efficient modeling of a single perturbation in\
          \ multiple cells as a batch. Please pull the updated version. You can set\
          \ up the isp and ispstats as follows. The other issues should also be resolved\
          \ but please let me know if you still have any issues.</p>\n<pre><code>isp\
          \ = InSilicoPerturber(perturb_type=\"overexpress\",\n                  \
          \      perturb_rank_shift=None,\n                        genes_to_perturb=[list_of_reprogramming_factors],\n\
          \                        combos=0,\n                        anchor_gene=None,\n\
          \                        model_type=\"Pretrained\",\n                  \
          \      num_classes=0,\n                        emb_mode=\"cell\",\n    \
          \                    cell_emb_style=\"mean_pool\",\n                   \
          \     filter_data={\"cell_type\":[\"fibroblasts\",\"iPSCs\"]},\n       \
          \                 cell_states_to_model={\"cell_type\":([\"fibroblasts\"\
          ],[\"iPSCs\"])},\n                        max_ncells=None,\n           \
          \             emb_layer=-1,\n                        forward_batch_size=400,\n\
          \                        nproc=16)\n\nispstats = InSilicoPerturberStats(mode=\"\
          goal_state_shift\",\n                                genes_perturbed=[list_of_reprogramming_factors],\n\
          \                                combos=0,\n                           \
          \     anchor_gene=None,\n                                cell_states_to_model={\"\
          cell_type\":([\"fibroblasts\"],[\"iPSCs\"])})\n</code></pre>\n"
        raw: "Thank you for your interest in Geneformer! I updated the in silico perturber\
          \ to allow for efficient modeling of a single perturbation in multiple cells\
          \ as a batch. Please pull the updated version. You can set up the isp and\
          \ ispstats as follows. The other issues should also be resolved but please\
          \ let me know if you still have any issues.\n\n    isp = InSilicoPerturber(perturb_type=\"\
          overexpress\",\n                            perturb_rank_shift=None,\n \
          \                           genes_to_perturb=[list_of_reprogramming_factors],\n\
          \                            combos=0,\n                            anchor_gene=None,\n\
          \                            model_type=\"Pretrained\",\n              \
          \              num_classes=0,\n                            emb_mode=\"cell\"\
          ,\n                            cell_emb_style=\"mean_pool\",\n         \
          \                   filter_data={\"cell_type\":[\"fibroblasts\",\"iPSCs\"\
          ]},\n                            cell_states_to_model={\"cell_type\":([\"\
          fibroblasts\"],[\"iPSCs\"])},\n                            max_ncells=None,\n\
          \                            emb_layer=-1,\n                           \
          \ forward_batch_size=400,\n                            nproc=16)\n    \n\
          \    ispstats = InSilicoPerturberStats(mode=\"goal_state_shift\",\n    \
          \                                genes_perturbed=[list_of_reprogramming_factors],\n\
          \                                    combos=0,\n                       \
          \             anchor_gene=None,\n                                    cell_states_to_model={\"\
          cell_type\":([\"fibroblasts\"],[\"iPSCs\"])})"
        updatedAt: '2023-07-16T18:46:52.960Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64b43b1cb6b73d7584013d31
    id: 64b43b1cb6b73d7584013d2f
    type: comment
  author: ctheodoris
  content: "Thank you for your interest in Geneformer! I updated the in silico perturber\
    \ to allow for efficient modeling of a single perturbation in multiple cells as\
    \ a batch. Please pull the updated version. You can set up the isp and ispstats\
    \ as follows. The other issues should also be resolved but please let me know\
    \ if you still have any issues.\n\n    isp = InSilicoPerturber(perturb_type=\"\
    overexpress\",\n                            perturb_rank_shift=None,\n       \
    \                     genes_to_perturb=[list_of_reprogramming_factors],\n    \
    \                        combos=0,\n                            anchor_gene=None,\n\
    \                            model_type=\"Pretrained\",\n                    \
    \        num_classes=0,\n                            emb_mode=\"cell\",\n    \
    \                        cell_emb_style=\"mean_pool\",\n                     \
    \       filter_data={\"cell_type\":[\"fibroblasts\",\"iPSCs\"]},\n           \
    \                 cell_states_to_model={\"cell_type\":([\"fibroblasts\"],[\"iPSCs\"\
    ])},\n                            max_ncells=None,\n                         \
    \   emb_layer=-1,\n                            forward_batch_size=400,\n     \
    \                       nproc=16)\n    \n    ispstats = InSilicoPerturberStats(mode=\"\
    goal_state_shift\",\n                                    genes_perturbed=[list_of_reprogramming_factors],\n\
    \                                    combos=0,\n                             \
    \       anchor_gene=None,\n                                    cell_states_to_model={\"\
    cell_type\":([\"fibroblasts\"],[\"iPSCs\"])})"
  created_at: 2023-07-16 17:46:52+00:00
  edited: false
  hidden: false
  id: 64b43b1cb6b73d7584013d2f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671502872617-622d085c8d04fd29a9ccf169.png?w=200&h=200&f=face
      fullname: Christina Theodoris
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ctheodoris
      type: user
    createdAt: '2023-07-16T18:46:52.000Z'
    data:
      status: closed
    id: 64b43b1cb6b73d7584013d31
    type: status-change
  author: ctheodoris
  created_at: 2023-07-16 17:46:52+00:00
  id: 64b43b1cb6b73d7584013d31
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 101
repo_id: ctheodoris/Geneformer
repo_type: model
status: closed
target_branch: null
title: Question about reproducing in silico reprogramming
