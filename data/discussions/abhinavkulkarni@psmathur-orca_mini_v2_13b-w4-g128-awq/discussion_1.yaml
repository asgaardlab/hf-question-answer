!!python/object:huggingface_hub.community.DiscussionWithDetails
author: alphatozeta
conflicting_files: null
created_at: 2023-07-14 12:01:40+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9d7c9291c5ddf32087ee2919981fa657.svg
      fullname: Dhruv Singal
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: alphatozeta
      type: user
    createdAt: '2023-07-14T13:01:40.000Z'
    data:
      edited: false
      editors:
      - alphatozeta
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5899217128753662
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9d7c9291c5ddf32087ee2919981fa657.svg
          fullname: Dhruv Singal
          isHf: false
          isPro: false
          name: alphatozeta
          type: user
        html: '<p>Possible relevant bits from the logs(they are very long):<br>48.69
          No CUDA runtime is found, using CUDA_HOME=''/usr/local/cuda''<br>48.75 running
          install<br>48.75 /usr/local/lib/python3.10/dist-packages/setuptools/command/install.py:34:
          SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build
          and pip and other standards-based tools.<br>48.75   warnings.warn(<br>48.78
          /usr/local/lib/python3.10/dist-packages/setuptools/command/easy_install.py:144:
          EasyInstallDeprecationWarning: easy_install command is deprecated. Use build
          and pip and other standards-based tools.<br>48.78   warnings.warn(</p>

          <p>er<br>107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1019; error   :
          Feature ''mma'' requires .target sm_70 or higher<br>107.1 ptxas gemm_cuda_gen.compute_52.ptx,
          line 1019; error   : Feature ''.m16n8k16'' requires .target sm_80 or higher<br>107.1
          ptxas gemm_cuda_gen.compute_52.ptx, line 1023; error   : Feature ''mma''
          requires .target sm_70 or higher<br>107.1 ptxas gemm_cuda_gen.compute_52.ptx,
          line 1023; error   : Feature ''.m16n8k16'' requires .target sm_80 or higher<br>107.1
          ptxas fatal   : Ptx assembly aborted due to errors<br>107.1 ninja: build
          stopped: subcommand failed.<br>107.1 Traceback (most recent call last):<br>107.1   File
          "/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py",
          line 1894, in _run_ninja_build<br>107.1     subprocess.run(<br>107.1   File
          "/usr/lib/python3.10/subprocess.py", line 524, in run<br>107.1     raise
          CalledProcessError(retcode, process.args,<br>107.1 subprocess.CalledProcessError:
          Command ''[''ninja'', ''-v'']'' returned non-zero exit status 1.<br>107.1<br>107.1
          The above exception was the direct cause of the following exception:</p>

          <p>107.1     _write_ninja_file_and_compile_objects(<br>107.1   File "/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py",
          line 1573, in _write_ninja_file_and_compile_objects<br>107.1     _run_ninja_build(<br>107.1   File
          "/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py",
          line 1910, in _run_ninja_build<br>107.1     raise RuntimeError(message)
          from e<br>107.1 RuntimeError: Error compiling objects for extension</p>

          '
        raw: "Possible relevant bits from the logs(they are very long):\r\n48.69 No\
          \ CUDA runtime is found, using CUDA_HOME='/usr/local/cuda'\r\n48.75 running\
          \ install\r\n48.75 /usr/local/lib/python3.10/dist-packages/setuptools/command/install.py:34:\
          \ SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build\
          \ and pip and other standards-based tools.\r\n48.75   warnings.warn(\r\n\
          48.78 /usr/local/lib/python3.10/dist-packages/setuptools/command/easy_install.py:144:\
          \ EasyInstallDeprecationWarning: easy_install command is deprecated. Use\
          \ build and pip and other standards-based tools.\r\n48.78   warnings.warn(\r\
          \n\r\n\r\ner\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1019; error\
          \   : Feature 'mma' requires .target sm_70 or higher\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx,\
          \ line 1019; error   : Feature '.m16n8k16' requires .target sm_80 or higher\r\
          \n107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1023; error   : Feature\
          \ 'mma' requires .target sm_70 or higher\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx,\
          \ line 1023; error   : Feature '.m16n8k16' requires .target sm_80 or higher\r\
          \n107.1 ptxas fatal   : Ptx assembly aborted due to errors\r\n107.1 ninja:\
          \ build stopped: subcommand failed.\r\n107.1 Traceback (most recent call\
          \ last):\r\n107.1   File \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\"\
          , line 1894, in _run_ninja_build\r\n107.1     subprocess.run(\r\n107.1 \
          \  File \"/usr/lib/python3.10/subprocess.py\", line 524, in run\r\n107.1\
          \     raise CalledProcessError(retcode, process.args,\r\n107.1 subprocess.CalledProcessError:\
          \ Command '['ninja', '-v']' returned non-zero exit status 1.\r\n107.1\r\n\
          107.1 The above exception was the direct cause of the following exception:\r\
          \n\r\n\r\n107.1     _write_ninja_file_and_compile_objects(\r\n107.1   File\
          \ \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\"\
          , line 1573, in _write_ninja_file_and_compile_objects\r\n107.1     _run_ninja_build(\r\
          \n107.1   File \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\"\
          , line 1910, in _run_ninja_build\r\n107.1     raise RuntimeError(message)\
          \ from e\r\n107.1 RuntimeError: Error compiling objects for extension"
        updatedAt: '2023-07-14T13:01:40.585Z'
      numEdits: 0
      reactions: []
    id: 64b14734f460afaefcfc3e28
    type: comment
  author: alphatozeta
  content: "Possible relevant bits from the logs(they are very long):\r\n48.69 No\
    \ CUDA runtime is found, using CUDA_HOME='/usr/local/cuda'\r\n48.75 running install\r\
    \n48.75 /usr/local/lib/python3.10/dist-packages/setuptools/command/install.py:34:\
    \ SetuptoolsDeprecationWarning: setup.py install is deprecated. Use build and\
    \ pip and other standards-based tools.\r\n48.75   warnings.warn(\r\n48.78 /usr/local/lib/python3.10/dist-packages/setuptools/command/easy_install.py:144:\
    \ EasyInstallDeprecationWarning: easy_install command is deprecated. Use build\
    \ and pip and other standards-based tools.\r\n48.78   warnings.warn(\r\n\r\n\r\
    \ner\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1019; error   : Feature\
    \ 'mma' requires .target sm_70 or higher\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx,\
    \ line 1019; error   : Feature '.m16n8k16' requires .target sm_80 or higher\r\n\
    107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1023; error   : Feature 'mma' requires\
    \ .target sm_70 or higher\r\n107.1 ptxas gemm_cuda_gen.compute_52.ptx, line 1023;\
    \ error   : Feature '.m16n8k16' requires .target sm_80 or higher\r\n107.1 ptxas\
    \ fatal   : Ptx assembly aborted due to errors\r\n107.1 ninja: build stopped:\
    \ subcommand failed.\r\n107.1 Traceback (most recent call last):\r\n107.1   File\
    \ \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\", line\
    \ 1894, in _run_ninja_build\r\n107.1     subprocess.run(\r\n107.1   File \"/usr/lib/python3.10/subprocess.py\"\
    , line 524, in run\r\n107.1     raise CalledProcessError(retcode, process.args,\r\
    \n107.1 subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero\
    \ exit status 1.\r\n107.1\r\n107.1 The above exception was the direct cause of\
    \ the following exception:\r\n\r\n\r\n107.1     _write_ninja_file_and_compile_objects(\r\
    \n107.1   File \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\"\
    , line 1573, in _write_ninja_file_and_compile_objects\r\n107.1     _run_ninja_build(\r\
    \n107.1   File \"/usr/local/lib/python3.10/dist-packages/torch/utils/cpp_extension.py\"\
    , line 1910, in _run_ninja_build\r\n107.1     raise RuntimeError(message) from\
    \ e\r\n107.1 RuntimeError: Error compiling objects for extension"
  created_at: 2023-07-14 12:01:40+00:00
  edited: false
  hidden: false
  id: 64b14734f460afaefcfc3e28
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: abhinavkulkarni/psmathur-orca_mini_v2_13b-w4-g128-awq
repo_type: model
status: open
target_branch: null
title: AWQ compile fails against 23.06 Pytorch container on L4
