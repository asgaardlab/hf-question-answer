!!python/object:huggingface_hub.community.DiscussionWithDetails
author: musicallyut
conflicting_files: null
created_at: 2023-09-23 10:50:25+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e4c92f75eac948cee7e7e8913f9aa379.svg
      fullname: Utkarsh Upadhyay
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: musicallyut
      type: user
    createdAt: '2023-09-23T11:50:25.000Z'
    data:
      edited: false
      editors:
      - musicallyut
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8536019921302795
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e4c92f75eac948cee7e7e8913f9aa379.svg
          fullname: Utkarsh Upadhyay
          isHf: false
          isPro: false
          name: musicallyut
          type: user
        html: '<p>Though the <code>README.md</code> explicitly states:</p>

          <blockquote>

          <p>Change <code>-c 4096</code> to the desired sequence length. For extended
          sequence models - eg 8K, 16K, 32K - the necessary RoPE scaling parameters
          are read from the GGUF file and set by llama.cpp automatically.</p>

          </blockquote>

          <p>However, in my experience, I had to still explicitly <a rel="nofollow"
          href="https://github.com/ggerganov/llama.cpp/issues/2530#issuecomment-1667946460">add
          <code>--rope-freq-scale 0.125</code></a> to get sensible output, even after
          passing <code>-c 32768</code> as an argument. Without that, I was only getting
          spaces and new-lines in the output (probably token 0?).</p>

          <p>Perhaps this deserves an explicit call-out in the <code>README.md</code>?</p>

          '
        raw: "Though the `README.md` explicitly states:\r\n\r\n> Change `-c 4096`\
          \ to the desired sequence length. For extended sequence models - eg 8K,\
          \ 16K, 32K - the necessary RoPE scaling parameters are read from the GGUF\
          \ file and set by llama.cpp automatically.\r\n\r\nHowever, in my experience,\
          \ I had to still explicitly [add `--rope-freq-scale 0.125`](https://github.com/ggerganov/llama.cpp/issues/2530#issuecomment-1667946460)\
          \ to get sensible output, even after passing `-c 32768` as an argument.\
          \ Without that, I was only getting spaces and new-lines in the output (probably\
          \ token 0?).\r\n\r\nPerhaps this deserves an explicit call-out in the `README.md`?"
        updatedAt: '2023-09-23T11:50:25.613Z'
      numEdits: 0
      reactions: []
    id: 650ed10129242c85ef7f05a0
    type: comment
  author: musicallyut
  content: "Though the `README.md` explicitly states:\r\n\r\n> Change `-c 4096` to\
    \ the desired sequence length. For extended sequence models - eg 8K, 16K, 32K\
    \ - the necessary RoPE scaling parameters are read from the GGUF file and set\
    \ by llama.cpp automatically.\r\n\r\nHowever, in my experience, I had to still\
    \ explicitly [add `--rope-freq-scale 0.125`](https://github.com/ggerganov/llama.cpp/issues/2530#issuecomment-1667946460)\
    \ to get sensible output, even after passing `-c 32768` as an argument. Without\
    \ that, I was only getting spaces and new-lines in the output (probably token\
    \ 0?).\r\n\r\nPerhaps this deserves an explicit call-out in the `README.md`?"
  created_at: 2023-09-23 10:50:25+00:00
  edited: false
  hidden: false
  id: 650ed10129242c85ef7f05a0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2f97b771d87f68abffdf134f260ec644.svg
      fullname: Abhinav Prabhakar
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BlahBlah1
      type: user
    createdAt: '2023-09-29T05:28:41.000Z'
    data:
      edited: false
      editors:
      - BlahBlah1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8982433080673218
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2f97b771d87f68abffdf134f260ec644.svg
          fullname: Abhinav Prabhakar
          isHf: false
          isPro: false
          name: BlahBlah1
          type: user
        html: '<p>so this works? cause I still get blank output with colons and dashes
          even with setting --rope-freq-scale 0.125. How are you passing the instruction?</p>

          '
        raw: so this works? cause I still get blank output with colons and dashes
          even with setting --rope-freq-scale 0.125. How are you passing the instruction?
        updatedAt: '2023-09-29T05:28:41.532Z'
      numEdits: 0
      reactions: []
    id: 65166089639340e445cd02ee
    type: comment
  author: BlahBlah1
  content: so this works? cause I still get blank output with colons and dashes even
    with setting --rope-freq-scale 0.125. How are you passing the instruction?
  created_at: 2023-09-29 04:28:41+00:00
  edited: false
  hidden: false
  id: 65166089639340e445cd02ee
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e4c92f75eac948cee7e7e8913f9aa379.svg
      fullname: Utkarsh Upadhyay
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: musicallyut
      type: user
    createdAt: '2023-10-01T17:28:35.000Z'
    data:
      edited: false
      editors:
      - musicallyut
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.30455484986305237
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e4c92f75eac948cee7e7e8913f9aa379.svg
          fullname: Utkarsh Upadhyay
          isHf: false
          isPro: false
          name: musicallyut
          type: user
        html: '<p>Like so:</p>

          <pre><code>./main -t 24 -m ./llama-2-7b-32k-instruct.Q8_0.gguf.1 --color
          -c 32768 --temp 0 --repeat_penalty 1 -n 512 -p "[INST] Describe in detail
          the timeline of the moon landing. [/INST]" --rope-freq-scale 0.125

          </code></pre>

          <p>The output is legible.</p>

          '
        raw: 'Like so:


          ```

          ./main -t 24 -m ./llama-2-7b-32k-instruct.Q8_0.gguf.1 --color -c 32768 --temp
          0 --repeat_penalty 1 -n 512 -p "[INST] Describe in detail the timeline of
          the moon landing. [/INST]" --rope-freq-scale 0.125

          ```


          The output is legible.'
        updatedAt: '2023-10-01T17:28:35.457Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - jlzhou
    id: 6519ac438876a95d5a5e7906
    type: comment
  author: musicallyut
  content: 'Like so:


    ```

    ./main -t 24 -m ./llama-2-7b-32k-instruct.Q8_0.gguf.1 --color -c 32768 --temp
    0 --repeat_penalty 1 -n 512 -p "[INST] Describe in detail the timeline of the
    moon landing. [/INST]" --rope-freq-scale 0.125

    ```


    The output is legible.'
  created_at: 2023-10-01 16:28:35+00:00
  edited: false
  hidden: false
  id: 6519ac438876a95d5a5e7906
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2f97b771d87f68abffdf134f260ec644.svg
      fullname: Abhinav Prabhakar
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BlahBlah1
      type: user
    createdAt: '2023-10-05T05:37:38.000Z'
    data:
      edited: false
      editors:
      - BlahBlah1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9154642820358276
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2f97b771d87f68abffdf134f260ec644.svg
          fullname: Abhinav Prabhakar
          isHf: false
          isPro: false
          name: BlahBlah1
          type: user
        html: '<p>ok ill try and update</p>

          '
        raw: ok ill try and update
        updatedAt: '2023-10-05T05:37:38.091Z'
      numEdits: 0
      reactions: []
    id: 651e4ba203d482f752f66052
    type: comment
  author: BlahBlah1
  content: ok ill try and update
  created_at: 2023-10-05 04:37:38+00:00
  edited: false
  hidden: false
  id: 651e4ba203d482f752f66052
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: TheBloke/Llama-2-7B-32K-Instruct-GGUF
repo_type: model
status: open
target_branch: null
title: Note about the `--rope-freq-scale` argument.
