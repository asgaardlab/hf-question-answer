!!python/object:huggingface_hub.community.DiscussionWithDetails
author: MrBananaHuman
conflicting_files: null
created_at: 2023-07-14 10:44:12+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
      fullname: MrBananaHuman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MrBananaHuman
      type: user
    createdAt: '2023-07-14T11:44:12.000Z'
    data:
      edited: true
      editors:
      - MrBananaHuman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4575313627719879
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
          fullname: MrBananaHuman
          isHf: false
          isPro: false
          name: MrBananaHuman
          type: user
        html: '<p>I tried to generate sentence using your sample code, but I got just
          unk tokens</p>

          <p>so, I add ''bad_words_ids = [[tokenizer.unk_token_id]]'', and the result
          is</p>

          <p>''Beijing is the capital of China. Translate this sentence from English
          to Chinese.<s><s><s></s><s><s> [LEN0]<s><s> [LEN1]<s><s> [LEN2]<s><s> [LEN3]<s><s>
          [LEN4]<s><s> [LEN5]<s><s> [LEN6]<s><s> [LEN7]<s><s> [LEN8]<s><s> [LEN9]<s><s>
          [LEN10]<s><s> [LEN11]<s><s> [LEN12]<s><s> [LEN13]<s><s> [LEN14]<s><s> [LEN15]<s><s>
          [LEN16]<s><s> [LEN17]<s><s>''</s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></s></p><s><s><s>

          <p>what is wrong?</p>

          </s></s></s>'
        raw: 'I tried to generate sentence using your sample code, but I got just
          unk tokens


          so, I add ''bad_words_ids = [[tokenizer.unk_token_id]]'', and the result
          is


          ''Beijing is the capital of China. Translate this sentence from English
          to Chinese.<s><s><s></s><s><s> [LEN0]<s><s> [LEN1]<s><s> [LEN2]<s><s> [LEN3]<s><s>
          [LEN4]<s><s> [LEN5]<s><s> [LEN6]<s><s> [LEN7]<s><s> [LEN8]<s><s> [LEN9]<s><s>
          [LEN10]<s><s> [LEN11]<s><s> [LEN12]<s><s> [LEN13]<s><s> [LEN14]<s><s> [LEN15]<s><s>
          [LEN16]<s><s> [LEN17]<s><s>''


          what is wrong?'
        updatedAt: '2023-07-14T11:45:04.046Z'
      numEdits: 3
      reactions: []
    id: 64b1350cb090e6970ee08c75
    type: comment
  author: MrBananaHuman
  content: 'I tried to generate sentence using your sample code, but I got just unk
    tokens


    so, I add ''bad_words_ids = [[tokenizer.unk_token_id]]'', and the result is


    ''Beijing is the capital of China. Translate this sentence from English to Chinese.<s><s><s></s><s><s>
    [LEN0]<s><s> [LEN1]<s><s> [LEN2]<s><s> [LEN3]<s><s> [LEN4]<s><s> [LEN5]<s><s>
    [LEN6]<s><s> [LEN7]<s><s> [LEN8]<s><s> [LEN9]<s><s> [LEN10]<s><s> [LEN11]<s><s>
    [LEN12]<s><s> [LEN13]<s><s> [LEN14]<s><s> [LEN15]<s><s> [LEN16]<s><s> [LEN17]<s><s>''


    what is wrong?'
  created_at: 2023-07-14 10:44:12+00:00
  edited: true
  hidden: false
  id: 64b1350cb090e6970ee08c75
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7702da77650df0be9f21cc300f761975.svg
      fullname: Xiangpeng Wei
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: pemywei
      type: user
    createdAt: '2023-07-14T12:22:58.000Z'
    data:
      edited: false
      editors:
      - pemywei
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8980017304420471
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7702da77650df0be9f21cc300f761975.svg
          fullname: Xiangpeng Wei
          isHf: false
          isPro: false
          name: pemywei
          type: user
        html: '<p>I was unable to replicate the problem.</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/64abad4d329f5e6e7831ced4/VTqW6hZCKuEgQ8IS87046.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/64abad4d329f5e6e7831ced4/VTqW6hZCKuEgQ8IS87046.png"></a></p>

          <p>However, I have optimized the sample code and you may try again.</p>

          '
        raw: 'I was unable to replicate the problem.


          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64abad4d329f5e6e7831ced4/VTqW6hZCKuEgQ8IS87046.png)


          However, I have optimized the sample code and you may try again.'
        updatedAt: '2023-07-14T12:22:58.647Z'
      numEdits: 0
      reactions: []
    id: 64b13e2204c172aef952779a
    type: comment
  author: pemywei
  content: 'I was unable to replicate the problem.


    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64abad4d329f5e6e7831ced4/VTqW6hZCKuEgQ8IS87046.png)


    However, I have optimized the sample code and you may try again.'
  created_at: 2023-07-14 11:22:58+00:00
  edited: false
  hidden: false
  id: 64b13e2204c172aef952779a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
      fullname: MrBananaHuman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MrBananaHuman
      type: user
    createdAt: '2023-07-14T12:33:32.000Z'
    data:
      edited: false
      editors:
      - MrBananaHuman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6630907654762268
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
          fullname: MrBananaHuman
          isHf: false
          isPro: false
          name: MrBananaHuman
          type: user
        html: '<p>here is my colab code</p>

          <p><a rel="nofollow" href="https://colab.research.google.com/drive/108YvdvdxzDN62TX9M0d6DsqztXSeLla4?usp=sharing">https://colab.research.google.com/drive/108YvdvdxzDN62TX9M0d6DsqztXSeLla4?usp=sharing</a></p>

          <p>(I added ''torch_dtype=torch.float16'' option due to the colab vram issue)</p>

          '
        raw: 'here is my colab code


          https://colab.research.google.com/drive/108YvdvdxzDN62TX9M0d6DsqztXSeLla4?usp=sharing


          (I added ''torch_dtype=torch.float16'' option due to the colab vram issue)'
        updatedAt: '2023-07-14T12:33:32.800Z'
      numEdits: 0
      reactions: []
    id: 64b1409cffed52962a80dc3f
    type: comment
  author: MrBananaHuman
  content: 'here is my colab code


    https://colab.research.google.com/drive/108YvdvdxzDN62TX9M0d6DsqztXSeLla4?usp=sharing


    (I added ''torch_dtype=torch.float16'' option due to the colab vram issue)'
  created_at: 2023-07-14 11:33:32+00:00
  edited: false
  hidden: false
  id: 64b1409cffed52962a80dc3f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7702da77650df0be9f21cc300f761975.svg
      fullname: Xiangpeng Wei
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: pemywei
      type: user
    createdAt: '2023-07-14T12:38:44.000Z'
    data:
      edited: false
      editors:
      - pemywei
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5234904289245605
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7702da77650df0be9f21cc300f761975.svg
          fullname: Xiangpeng Wei
          isHf: false
          isPro: false
          name: pemywei
          type: user
        html: '<p>We incorporate the bfloat16 numerical format for polylm, fp16 should
          be problematic.</p>

          '
        raw: We incorporate the bfloat16 numerical format for polylm, fp16 should
          be problematic.
        updatedAt: '2023-07-14T12:38:44.662Z'
      numEdits: 0
      reactions: []
    id: 64b141d4b090e6970ee21b13
    type: comment
  author: pemywei
  content: We incorporate the bfloat16 numerical format for polylm, fp16 should be
    problematic.
  created_at: 2023-07-14 11:38:44+00:00
  edited: false
  hidden: false
  id: 64b141d4b090e6970ee21b13
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
      fullname: MrBananaHuman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MrBananaHuman
      type: user
    createdAt: '2023-07-14T12:39:31.000Z'
    data:
      edited: false
      editors:
      - MrBananaHuman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7957530617713928
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
          fullname: MrBananaHuman
          isHf: false
          isPro: false
          name: MrBananaHuman
          type: user
        html: '<p>oh, i see :) i will test without that option<br>thank you</p>

          '
        raw: 'oh, i see :) i will test without that option

          thank you'
        updatedAt: '2023-07-14T12:39:31.378Z'
      numEdits: 0
      reactions: []
    id: 64b1420393679cd0090532b9
    type: comment
  author: MrBananaHuman
  content: 'oh, i see :) i will test without that option

    thank you'
  created_at: 2023-07-14 11:39:31+00:00
  edited: false
  hidden: false
  id: 64b1420393679cd0090532b9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
      fullname: MrBananaHuman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MrBananaHuman
      type: user
    createdAt: '2023-07-15T09:35:25.000Z'
    data:
      edited: true
      editors:
      - MrBananaHuman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7348356246948242
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fb6068ce6ae537272bdeb11/0l8YLMG5v9KFLCtYIruBh.png?w=200&h=200&f=face
          fullname: MrBananaHuman
          isHf: false
          isPro: false
          name: MrBananaHuman
          type: user
        html: '<p>This time, I loaded the 1.7b model, but the result is as follows.</p>

          <p>"Beijing is the capital of China.\nTranslate this sentence from English
          to Chinese.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"</p>

          <p>Please check the same colab link.</p>

          '
        raw: 'This time, I loaded the 1.7b model, but the result is as follows.


          "Beijing is the capital of China.\nTranslate this sentence from English
          to Chinese.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"


          Please check the same colab link.'
        updatedAt: '2023-07-15T09:40:08.575Z'
      numEdits: 1
      reactions: []
    id: 64b2685d0a54158d66f7d272
    type: comment
  author: MrBananaHuman
  content: 'This time, I loaded the 1.7b model, but the result is as follows.


    "Beijing is the capital of China.\nTranslate this sentence from English to Chinese.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"


    Please check the same colab link.'
  created_at: 2023-07-15 08:35:25+00:00
  edited: true
  hidden: false
  id: 64b2685d0a54158d66f7d272
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/3acf15ac95847c0d55205f16cba7b0f8.svg
      fullname: "Jo\xE3o Alves"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaomiguel26
      type: user
    createdAt: '2023-07-24T09:17:00.000Z'
    data:
      edited: false
      editors:
      - joaomiguel26
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8969321846961975
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/3acf15ac95847c0d55205f16cba7b0f8.svg
          fullname: "Jo\xE3o Alves"
          isHf: false
          isPro: false
          name: joaomiguel26
          type: user
        html: "<p>I am having the same problem with the 13B model. It only generates\
          \ UNK tokens.<br>It does not happen with the 1.7B. Could you help us <span\
          \ data-props=\"{&quot;user&quot;:&quot;pemywei&quot;}\" data-target=\"UserMention\"\
          \ class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"\
          ><span class=\"contents\"><a href=\"/pemywei\">@<span class=\"underline\"\
          >pemywei</span></a></span>\n\n\t</span></span> ?<br>Thanks!</p>\n"
        raw: "I am having the same problem with the 13B model. It only generates UNK\
          \ tokens. \nIt does not happen with the 1.7B. Could you help us @pemywei\
          \ ? \nThanks!"
        updatedAt: '2023-07-24T09:17:00.861Z'
      numEdits: 0
      reactions: []
    id: 64be418cb9296eef62ec491c
    type: comment
  author: joaomiguel26
  content: "I am having the same problem with the 13B model. It only generates UNK\
    \ tokens. \nIt does not happen with the 1.7B. Could you help us @pemywei ? \n\
    Thanks!"
  created_at: 2023-07-24 08:17:00+00:00
  edited: false
  hidden: false
  id: 64be418cb9296eef62ec491c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: DAMO-NLP-MT/polylm-13b
repo_type: model
status: open
target_branch: null
title: The model just print <unk> tokens
