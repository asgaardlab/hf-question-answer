!!python/object:huggingface_hub.community.DiscussionWithDetails
author: qpoisson
conflicting_files: null
created_at: 2022-11-19 14:09:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
      fullname: Yu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qpoisson
      type: user
    createdAt: '2022-11-19T14:09:18.000Z'
    data:
      edited: true
      editors:
      - qpoisson
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
          fullname: Yu
          isHf: false
          isPro: false
          name: qpoisson
          type: user
        html: '<p>pipe = StableDiffusionInpaintPipeline.from_pretrained(<br>        "runwayml/stable-diffusion-inpainting",<br>        use_auth_token
          = TOKEN,<br>        revision="fp16",<br>        torch_dtype=torch.float16<br>    ).to(''cuda'')</p>

          <p>(Loaded to GPU memory successfully.)</p>

          <p>Using fp16 as above caused : "RuntimeError: expected scalar type Half
          but found Float "</p>

          <p>at </p>

          <p>python3.10/site-packages/transformers/models/clip/modeling_clip.py",
          line 259, in forward<br>    attn_output = torch.bmm(attn_probs, value_states)</p>

          '
        raw: "pipe = StableDiffusionInpaintPipeline.from_pretrained(\n        \"runwayml/stable-diffusion-inpainting\"\
          ,\n        use_auth_token = TOKEN,\n        revision=\"fp16\",\n       \
          \ torch_dtype=torch.float16\n    ).to('cuda')\n\n(Loaded to GPU memory successfully.)\n\
          \nUsing fp16 as above caused : \"RuntimeError: expected scalar type Half\
          \ but found Float \"\n\nat \n\npython3.10/site-packages/transformers/models/clip/modeling_clip.py\"\
          , line 259, in forward\n    attn_output = torch.bmm(attn_probs, value_states)"
        updatedAt: '2022-11-19T14:43:32.628Z'
      numEdits: 2
      reactions: []
    id: 6378e38e2cb50dda39d45acb
    type: comment
  author: qpoisson
  content: "pipe = StableDiffusionInpaintPipeline.from_pretrained(\n        \"runwayml/stable-diffusion-inpainting\"\
    ,\n        use_auth_token = TOKEN,\n        revision=\"fp16\",\n        torch_dtype=torch.float16\n\
    \    ).to('cuda')\n\n(Loaded to GPU memory successfully.)\n\nUsing fp16 as above\
    \ caused : \"RuntimeError: expected scalar type Half but found Float \"\n\nat\
    \ \n\npython3.10/site-packages/transformers/models/clip/modeling_clip.py\", line\
    \ 259, in forward\n    attn_output = torch.bmm(attn_probs, value_states)"
  created_at: 2022-11-19 14:09:18+00:00
  edited: true
  hidden: false
  id: 6378e38e2cb50dda39d45acb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/37b75f2f0be89715bac8dcedd16f3ae7.svg
      fullname: "Elias Nehm\xE9"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Eliacus
      type: user
    createdAt: '2022-11-19T20:11:02.000Z'
    data:
      edited: false
      editors:
      - Eliacus
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/37b75f2f0be89715bac8dcedd16f3ae7.svg
          fullname: "Elias Nehm\xE9"
          isHf: false
          isPro: false
          name: Eliacus
          type: user
        html: '<p>Hey, I had the same problem. What solved it for me was installing
          the requirements they had used in the notebook:</p>

          <pre><code>pip install -qq -U diffusers==0.6.0 transformers ftfy gradio

          pip install git+https://github.com/huggingface/diffusers.git

          </code></pre>

          '
        raw: 'Hey, I had the same problem. What solved it for me was installing the
          requirements they had used in the notebook:


          ```

          pip install -qq -U diffusers==0.6.0 transformers ftfy gradio

          pip install git+https://github.com/huggingface/diffusers.git

          ```'
        updatedAt: '2022-11-19T20:11:02.643Z'
      numEdits: 0
      reactions: []
    id: 637938562cb50dda39d6d619
    type: comment
  author: Eliacus
  content: 'Hey, I had the same problem. What solved it for me was installing the
    requirements they had used in the notebook:


    ```

    pip install -qq -U diffusers==0.6.0 transformers ftfy gradio

    pip install git+https://github.com/huggingface/diffusers.git

    ```'
  created_at: 2022-11-19 20:11:02+00:00
  edited: false
  hidden: false
  id: 637938562cb50dda39d6d619
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
      fullname: Yu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qpoisson
      type: user
    createdAt: '2022-11-20T11:16:25.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
          fullname: Yu
          isHf: false
          isPro: false
          name: qpoisson
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2022-11-20T11:34:05.412Z'
      numEdits: 0
      reactions: []
    id: 637a0c8914076b808c65507c
    type: comment
  author: qpoisson
  content: This comment has been hidden
  created_at: 2022-11-20 11:16:25+00:00
  edited: true
  hidden: true
  id: 637a0c8914076b808c65507c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
      fullname: Yu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qpoisson
      type: user
    createdAt: '2022-11-20T11:16:25.000Z'
    data:
      status: closed
    id: 637a0c8914076b808c65507d
    type: status-change
  author: qpoisson
  created_at: 2022-11-20 11:16:25+00:00
  id: 637a0c8914076b808c65507d
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/ca3aad21367107bd0cc321a4abd26196.svg
      fullname: Yu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qpoisson
      type: user
    createdAt: '2022-11-20T11:33:24.000Z'
    data:
      status: open
    id: 637a10843f8f451d6bd21f91
    type: status-change
  author: qpoisson
  created_at: 2022-11-20 11:33:24+00:00
  id: 637a10843f8f451d6bd21f91
  new_status: open
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: runwayml/stable-diffusion-inpainting
repo_type: model
status: open
target_branch: null
title: '"RuntimeError: expected scalar type Half but found Float "  when using fp16'
