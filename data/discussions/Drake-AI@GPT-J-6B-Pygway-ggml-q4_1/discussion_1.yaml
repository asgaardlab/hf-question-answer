!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Rogerooo
conflicting_files: null
created_at: 2023-04-27 01:26:04+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
      fullname: Rogerooo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rogerooo
      type: user
    createdAt: '2023-04-27T02:26:04.000Z'
    data:
      edited: false
      editors:
      - Rogerooo
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
          fullname: Rogerooo
          isHf: false
          isPro: false
          name: Rogerooo
          type: user
        html: '<p>Hi, I''m looking to convert a gpt-j based model into ggml but I
          can''t seem to find a good source to learn how to do it.</p>

          <p>This is probably the place to start: <a rel="nofollow" href="https://github.com/ggerganov/ggml/tree/master/examples/gpt-j">https://github.com/ggerganov/ggml/tree/master/examples/gpt-j</a></p>

          <p>There is a convert script but I believe it''s intended to be used on
          the big h5 format base model. Can you share some tips on conversion, thanks.</p>

          '
        raw: "Hi, I'm looking to convert a gpt-j based model into ggml but I can't\
          \ seem to find a good source to learn how to do it.\r\n\r\nThis is probably\
          \ the place to start: https://github.com/ggerganov/ggml/tree/master/examples/gpt-j\r\
          \n\r\nThere is a convert script but I believe it's intended to be used on\
          \ the big h5 format base model. Can you share some tips on conversion, thanks."
        updatedAt: '2023-04-27T02:26:04.201Z'
      numEdits: 0
      reactions: []
    id: 6449dd3c020f9299f2ad0275
    type: comment
  author: Rogerooo
  content: "Hi, I'm looking to convert a gpt-j based model into ggml but I can't seem\
    \ to find a good source to learn how to do it.\r\n\r\nThis is probably the place\
    \ to start: https://github.com/ggerganov/ggml/tree/master/examples/gpt-j\r\n\r\
    \nThere is a convert script but I believe it's intended to be used on the big\
    \ h5 format base model. Can you share some tips on conversion, thanks."
  created_at: 2023-04-27 01:26:04+00:00
  edited: false
  hidden: false
  id: 6449dd3c020f9299f2ad0275
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
      fullname: Rogerooo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rogerooo
      type: user
    createdAt: '2023-04-27T07:49:19.000Z'
    data:
      edited: false
      editors:
      - Rogerooo
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
          fullname: Rogerooo
          isHf: false
          isPro: false
          name: Rogerooo
          type: user
        html: '<p>Sorry, looks like that''s actually the script we should use. Here
          are a couple more as well: <a rel="nofollow" href="https://github.com/NolanoOrg/cformers/tree/master/cformers/cpp/converters">https://github.com/NolanoOrg/cformers/tree/master/cformers/cpp/converters</a></p>

          '
        raw: 'Sorry, looks like that''s actually the script we should use. Here are
          a couple more as well: https://github.com/NolanoOrg/cformers/tree/master/cformers/cpp/converters'
        updatedAt: '2023-04-27T07:49:19.430Z'
      numEdits: 0
      reactions: []
      relatedEventId: 644a28ffca8809b635dab1f3
    id: 644a28ffca8809b635dab1f2
    type: comment
  author: Rogerooo
  content: 'Sorry, looks like that''s actually the script we should use. Here are
    a couple more as well: https://github.com/NolanoOrg/cformers/tree/master/cformers/cpp/converters'
  created_at: 2023-04-27 06:49:19+00:00
  edited: false
  hidden: false
  id: 644a28ffca8809b635dab1f2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
      fullname: Rogerooo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rogerooo
      type: user
    createdAt: '2023-04-27T07:49:19.000Z'
    data:
      status: closed
    id: 644a28ffca8809b635dab1f3
    type: status-change
  author: Rogerooo
  created_at: 2023-04-27 06:49:19+00:00
  id: 644a28ffca8809b635dab1f3
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6318da145442cbea7df32c1f/7i7mwYwT_mcqHWZVW16pr.png?w=200&h=200&f=face
      fullname: Drake-AI
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Drake-AI
      type: user
    createdAt: '2023-04-27T12:50:35.000Z'
    data:
      status: open
    id: 644a6f9b70b10f96958dccb8
    type: status-change
  author: Drake-AI
  created_at: 2023-04-27 11:50:35+00:00
  id: 644a6f9b70b10f96958dccb8
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6318da145442cbea7df32c1f/7i7mwYwT_mcqHWZVW16pr.png?w=200&h=200&f=face
      fullname: Drake-AI
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Drake-AI
      type: user
    createdAt: '2023-04-27T12:54:11.000Z'
    data:
      edited: false
      editors:
      - Drake-AI
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6318da145442cbea7df32c1f/7i7mwYwT_mcqHWZVW16pr.png?w=200&h=200&f=face
          fullname: Drake-AI
          isHf: false
          isPro: false
          name: Drake-AI
          type: user
        html: '<p>I use <a rel="nofollow" href="https://github.com/ggerganov/ggml/">https://github.com/ggerganov/ggml/</a>
          you need the full model and run the convert script on examples/gpt-j/convert-h5-to-ggml.py
          to generate a f32 or f16 model. Then you quantize the f32 or f16 using /build/bin/gpt-j-quantize</p>

          <p>You need to compile following the instructions on the repo.</p>

          '
        raw: 'I use https://github.com/ggerganov/ggml/ you need the full model and
          run the convert script on examples/gpt-j/convert-h5-to-ggml.py to generate
          a f32 or f16 model. Then you quantize the f32 or f16 using /build/bin/gpt-j-quantize


          You need to compile following the instructions on the repo.'
        updatedAt: '2023-04-27T12:54:11.206Z'
      numEdits: 0
      reactions: []
    id: 644a707370b10f96958de1eb
    type: comment
  author: Drake-AI
  content: 'I use https://github.com/ggerganov/ggml/ you need the full model and run
    the convert script on examples/gpt-j/convert-h5-to-ggml.py to generate a f32 or
    f16 model. Then you quantize the f32 or f16 using /build/bin/gpt-j-quantize


    You need to compile following the instructions on the repo.'
  created_at: 2023-04-27 11:54:11+00:00
  edited: false
  hidden: false
  id: 644a707370b10f96958de1eb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
      fullname: Rogerooo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rogerooo
      type: user
    createdAt: '2023-04-27T13:47:08.000Z'
    data:
      edited: false
      editors:
      - Rogerooo
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/36905e20cbedd599bafa8c0bbcb41c28.svg
          fullname: Rogerooo
          isHf: false
          isPro: false
          name: Rogerooo
          type: user
        html: '<p>Thanks for the reply. I was actually following that workflow on
          WSL but for some reason the script is killed while loading model.state_dict().
          There is no helpful error message but most likely it''s a memory issue,
          I have 32gb but Windows is probably eating up too much for this stuff.</p>

          '
        raw: Thanks for the reply. I was actually following that workflow on WSL but
          for some reason the script is killed while loading model.state_dict(). There
          is no helpful error message but most likely it's a memory issue, I have
          32gb but Windows is probably eating up too much for this stuff.
        updatedAt: '2023-04-27T13:47:08.037Z'
      numEdits: 0
      reactions: []
    id: 644a7cdc376e8fd2bbe47b29
    type: comment
  author: Rogerooo
  content: Thanks for the reply. I was actually following that workflow on WSL but
    for some reason the script is killed while loading model.state_dict(). There is
    no helpful error message but most likely it's a memory issue, I have 32gb but
    Windows is probably eating up too much for this stuff.
  created_at: 2023-04-27 12:47:08+00:00
  edited: false
  hidden: false
  id: 644a7cdc376e8fd2bbe47b29
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Drake-AI/GPT-J-6B-Pygway-ggml-q4_1
repo_type: model
status: open
target_branch: null
title: GPT-J to ggml conversion help
