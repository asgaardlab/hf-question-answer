!!python/object:huggingface_hub.community.DiscussionWithDetails
author: luoji12345
conflicting_files: null
created_at: 2023-05-19 02:27:07+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2e88ae33e3b4b8501e37817261478d03.svg
      fullname: xingxiangrui
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: luoji12345
      type: user
    createdAt: '2023-05-19T03:27:07.000Z'
    data:
      edited: false
      editors:
      - luoji12345
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2e88ae33e3b4b8501e37817261478d03.svg
          fullname: xingxiangrui
          isHf: false
          isPro: false
          name: luoji12345
          type: user
        html: '<p>Replit is an amazing model as it can generate valid results even
          thouth it is only 2.7B.<br>However I have trouble in accelerating Inference
          Replit. These are the method that I have ever tried and failed :</p>

          <ul>

          <li>torch2.0 : is an easy way to realize, but no speed up than torch 1.13</li>

          <li>flash_attn:  not match alibi , so no model weights available </li>

          <li>triton :  I meed the same error as described in <a href="https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10">https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10</a></li>

          <li>deepspeed : Realized but no speed up than torch 1.13, and it only fits
          torch.float16 rather than torch.bfloat16, slower in A100</li>

          </ul>

          <p>I am going to try FasterTransformer although it is hard to realize.</p>

          <p>Could you please give me some advice about the inference accelerate ?
          Will you release the project to accelerate the Repilt Inference ?</p>

          '
        raw: "Replit is an amazing model as it can generate valid results even thouth\
          \ it is only 2.7B.\r\nHowever I have trouble in accelerating Inference Replit.\
          \ These are the method that I have ever tried and failed :\r\n* torch2.0\
          \ : is an easy way to realize, but no speed up than torch 1.13\r\n* flash_attn:\
          \  not match alibi , so no model weights available \r\n* triton :  I meed\
          \ the same error as described in https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10\r\
          \n* deepspeed : Realized but no speed up than torch 1.13, and it only fits\
          \ torch.float16 rather than torch.bfloat16, slower in A100\r\n\r\nI am going\
          \ to try FasterTransformer although it is hard to realize.\r\n\r\nCould\
          \ you please give me some advice about the inference accelerate ? Will you\
          \ release the project to accelerate the Repilt Inference ?\r\n"
        updatedAt: '2023-05-19T03:27:07.068Z'
      numEdits: 0
      reactions: []
    id: 6466ec8b425875eca92b814e
    type: comment
  author: luoji12345
  content: "Replit is an amazing model as it can generate valid results even thouth\
    \ it is only 2.7B.\r\nHowever I have trouble in accelerating Inference Replit.\
    \ These are the method that I have ever tried and failed :\r\n* torch2.0 : is\
    \ an easy way to realize, but no speed up than torch 1.13\r\n* flash_attn:  not\
    \ match alibi , so no model weights available \r\n* triton :  I meed the same\
    \ error as described in https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10\r\
    \n* deepspeed : Realized but no speed up than torch 1.13, and it only fits torch.float16\
    \ rather than torch.bfloat16, slower in A100\r\n\r\nI am going to try FasterTransformer\
    \ although it is hard to realize.\r\n\r\nCould you please give me some advice\
    \ about the inference accelerate ? Will you release the project to accelerate\
    \ the Repilt Inference ?\r\n"
  created_at: 2023-05-19 02:27:07+00:00
  edited: false
  hidden: false
  id: 6466ec8b425875eca92b814e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4a8c44891f3e8243c8cfe76286adbd4a.svg
      fullname: James
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: leojames
      type: user
    createdAt: '2023-05-24T06:24:23.000Z'
    data:
      edited: false
      editors:
      - leojames
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4a8c44891f3e8243c8cfe76286adbd4a.svg
          fullname: James
          isHf: false
          isPro: false
          name: leojames
          type: user
        html: "<p>I used the NVIDIA GPU P100, which is based on the Pascal architecture,\
          \ so it does not support this type of acceleration. Even after switching\
          \ to A30, the speed is still slow.I donot know how to accerlerate the repilt\
          \ interfence   .Offical can give some advice \uFF1F</p>\n"
        raw: "I used the NVIDIA GPU P100, which is based on the Pascal architecture,\
          \ so it does not support this type of acceleration. Even after switching\
          \ to A30, the speed is still slow.I donot know how to accerlerate the repilt\
          \ interfence   .Offical can give some advice \uFF1F"
        updatedAt: '2023-05-24T06:24:23.788Z'
      numEdits: 0
      reactions: []
    id: 646dad975c3c0df5aee6c5bb
    type: comment
  author: leojames
  content: "I used the NVIDIA GPU P100, which is based on the Pascal architecture,\
    \ so it does not support this type of acceleration. Even after switching to A30,\
    \ the speed is still slow.I donot know how to accerlerate the repilt interfence\
    \   .Offical can give some advice \uFF1F"
  created_at: 2023-05-24 05:24:23+00:00
  edited: false
  hidden: false
  id: 646dad975c3c0df5aee6c5bb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6434ad9cea46c009904c91c2/Ofa-wDlcUHSWH48LgOHeZ.jpeg?w=200&h=200&f=face
      fullname: Michele Catasta
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: pirroh
      type: user
    createdAt: '2023-06-05T19:10:48.000Z'
    data:
      edited: false
      editors:
      - pirroh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9149619936943054
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6434ad9cea46c009904c91c2/Ofa-wDlcUHSWH48LgOHeZ.jpeg?w=200&h=200&f=face
          fullname: Michele Catasta
          isHf: false
          isPro: false
          name: pirroh
          type: user
        html: '<p>Closing issue as OP has already found a solution and posted it on
          the mpt-7b-storywriter discussion thread: <a href="https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10#646833123a7c8dda230f87ab">https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10#646833123a7c8dda230f87ab</a></p>

          '
        raw: 'Closing issue as OP has already found a solution and posted it on the
          mpt-7b-storywriter discussion thread: https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10#646833123a7c8dda230f87ab'
        updatedAt: '2023-06-05T19:10:48.647Z'
      numEdits: 0
      reactions: []
      relatedEventId: 647e33385214d172cbc2ed96
    id: 647e33385214d172cbc2ed94
    type: comment
  author: pirroh
  content: 'Closing issue as OP has already found a solution and posted it on the
    mpt-7b-storywriter discussion thread: https://huggingface.co/mosaicml/mpt-7b-storywriter/discussions/10#646833123a7c8dda230f87ab'
  created_at: 2023-06-05 18:10:48+00:00
  edited: false
  hidden: false
  id: 647e33385214d172cbc2ed94
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6434ad9cea46c009904c91c2/Ofa-wDlcUHSWH48LgOHeZ.jpeg?w=200&h=200&f=face
      fullname: Michele Catasta
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: pirroh
      type: user
    createdAt: '2023-06-05T19:10:48.000Z'
    data:
      status: closed
    id: 647e33385214d172cbc2ed96
    type: status-change
  author: pirroh
  created_at: 2023-06-05 18:10:48+00:00
  id: 647e33385214d172cbc2ed96
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 14
repo_id: replit/replit-code-v1-3b
repo_type: model
status: closed
target_branch: null
title: Speed UP method
