!!python/object:huggingface_hub.community.DiscussionWithDetails
author: kexul
conflicting_files: null
created_at: 2023-06-15 05:50:07+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/40faaf22f14e15051cbdadf8d6446fc3.svg
      fullname: xul
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kexul
      type: user
    createdAt: '2023-06-15T06:50:07.000Z'
    data:
      edited: false
      editors:
      - kexul
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7526644468307495
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/40faaf22f14e15051cbdadf8d6446fc3.svg
          fullname: xul
          isHf: false
          isPro: false
          name: kexul
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;TheBloke&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/TheBloke\"\
          >@<span class=\"underline\">TheBloke</span></a></span>\n\n\t</span></span>\
          \ , Many thanks for your work! May I ask how should I properly configure\
          \ the koboldcpp to use this model?</p>\n<p>Currenty I use Instruct mode\
          \ with Start Sequence: <code>Below is an instruction that describes a task.\
          \ Write a response that appropriately completes the request  ### Instruction:</code>,\
          \ with End Sequence: <code>### Response:</code>. </p>\n<p>Here is the full\
          \ configuration: </p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/NbRsNlkxXLaHnzlaCgq0C.png\"\
          ><img alt=\"\u56FE\u7247.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/NbRsNlkxXLaHnzlaCgq0C.png\"\
          ></a></p>\n<p>However, the model generate some strange string. </p>\n<p><a\
          \ rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/vndZuky3DPY86g0XMkA6A.png\"\
          ><img alt=\"\u56FE\u7247.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/vndZuky3DPY86g0XMkA6A.png\"\
          ></a></p>\n"
        raw: "Hi @TheBloke , Many thanks for your work! May I ask how should I properly\
          \ configure the koboldcpp to use this model?\r\n\r\nCurrenty I use Instruct\
          \ mode with Start Sequence: `Below is an instruction that describes a task.\
          \ Write a response that appropriately completes the request  ### Instruction:`,\
          \ with End Sequence: `### Response:`. \r\n\r\nHere is the full configuration:\
          \ \r\n\r\n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/NbRsNlkxXLaHnzlaCgq0C.png)\r\
          \n\r\nHowever, the model generate some strange string. \r\n\r\n![\u56FE\u7247\
          .png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/vndZuky3DPY86g0XMkA6A.png)\r\
          \n"
        updatedAt: '2023-06-15T06:50:07.539Z'
      numEdits: 0
      reactions: []
    id: 648ab49fc4d84809105f0625
    type: comment
  author: kexul
  content: "Hi @TheBloke , Many thanks for your work! May I ask how should I properly\
    \ configure the koboldcpp to use this model?\r\n\r\nCurrenty I use Instruct mode\
    \ with Start Sequence: `Below is an instruction that describes a task. Write a\
    \ response that appropriately completes the request  ### Instruction:`, with End\
    \ Sequence: `### Response:`. \r\n\r\nHere is the full configuration: \r\n\r\n\
    ![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/NbRsNlkxXLaHnzlaCgq0C.png)\r\
    \n\r\nHowever, the model generate some strange string. \r\n\r\n![\u56FE\u7247\
    .png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/vndZuky3DPY86g0XMkA6A.png)\r\
    \n"
  created_at: 2023-06-15 05:50:07+00:00
  edited: false
  hidden: false
  id: 648ab49fc4d84809105f0625
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-06-15T14:40:24.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.914713442325592
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;kexul&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/kexul\">@<span class=\"\
          underline\">kexul</span></a></span>\n\n\t</span></span> </p>\n<p>I don't\
          \ have any experience of KoboldCpp myself so I asked Lost Ruins, the koboldcpp\
          \ developer. He said:</p>\n<blockquote>\n<p>okay looks like they ran the\
          \ model without unbanning the EOS token. by default, koboldcpp bans the\
          \ EOS (end of stream) token for all models, allowing infinite text generation<br>they'd\
          \ have to run it with the flag --unbantokens and try again</p>\n</blockquote>\n\
          <p>So please try that!</p>\n"
        raw: "Hi @kexul \n\nI don't have any experience of KoboldCpp myself so I asked\
          \ Lost Ruins, the koboldcpp developer. He said:\n\n> okay looks like they\
          \ ran the model without unbanning the EOS token. by default, koboldcpp bans\
          \ the EOS (end of stream) token for all models, allowing infinite text generation\n\
          > they'd have to run it with the flag --unbantokens and try again\n\nSo\
          \ please try that!"
        updatedAt: '2023-06-15T14:40:24.968Z'
      numEdits: 0
      reactions: []
    id: 648b22d88c5598163123ba91
    type: comment
  author: TheBloke
  content: "Hi @kexul \n\nI don't have any experience of KoboldCpp myself so I asked\
    \ Lost Ruins, the koboldcpp developer. He said:\n\n> okay looks like they ran\
    \ the model without unbanning the EOS token. by default, koboldcpp bans the EOS\
    \ (end of stream) token for all models, allowing infinite text generation\n> they'd\
    \ have to run it with the flag --unbantokens and try again\n\nSo please try that!"
  created_at: 2023-06-15 13:40:24+00:00
  edited: false
  hidden: false
  id: 648b22d88c5598163123ba91
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63cd4b6d1c8a5d1d7d76a778/FAnsBh9h5-wG9Vb252ZNt.png?w=200&h=200&f=face
      fullname: Concedo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: concedo
      type: user
    createdAt: '2023-06-15T14:40:26.000Z'
    data:
      edited: true
      editors:
      - concedo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6779454350471497
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63cd4b6d1c8a5d1d7d76a778/FAnsBh9h5-wG9Vb252ZNt.png?w=200&h=200&f=face
          fullname: Concedo
          isHf: false
          isPro: false
          name: concedo
          type: user
        html: '<p>Can you try launching KoboldCpp with the <code>--unbantokens</code>
          flag (or if using the GUI, select Unban Tokens) and then try again?</p>

          <p>Edit: Took a closer look and realized that starcoder models use a different
          EOS ID. This will be handled in KoboldCpp release 1.31</p>

          '
        raw: 'Can you try launching KoboldCpp with the `--unbantokens` flag (or if
          using the GUI, select Unban Tokens) and then try again?


          Edit: Took a closer look and realized that starcoder models use a different
          EOS ID. This will be handled in KoboldCpp release 1.31'
        updatedAt: '2023-06-15T14:59:53.032Z'
      numEdits: 1
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - PrimeD
        - YearZero
    id: 648b22da63045329e1d89ec8
    type: comment
  author: concedo
  content: 'Can you try launching KoboldCpp with the `--unbantokens` flag (or if using
    the GUI, select Unban Tokens) and then try again?


    Edit: Took a closer look and realized that starcoder models use a different EOS
    ID. This will be handled in KoboldCpp release 1.31'
  created_at: 2023-06-15 13:40:26+00:00
  edited: true
  hidden: false
  id: 648b22da63045329e1d89ec8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/40faaf22f14e15051cbdadf8d6446fc3.svg
      fullname: xul
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kexul
      type: user
    createdAt: '2023-06-16T03:03:29.000Z'
    data:
      edited: false
      editors:
      - kexul
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7373119592666626
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/40faaf22f14e15051cbdadf8d6446fc3.svg
          fullname: xul
          isHf: false
          isPro: false
          name: kexul
          type: user
        html: "<p>Many thanks for your suggestion <span data-props=\"{&quot;user&quot;:&quot;TheBloke&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/TheBloke\"\
          >@<span class=\"underline\">TheBloke</span></a></span>\n\n\t</span></span>\
          \ , <span data-props=\"{&quot;user&quot;:&quot;concedo&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/concedo\">@<span class=\"\
          underline\">concedo</span></a></span>\n\n\t</span></span> , the <code>--unbantokens</code>\
          \ flag works very well.<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/nVqR0XX1x4-yOFuvRN8en.png\"\
          ><img alt=\"\u56FE\u7247.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/nVqR0XX1x4-yOFuvRN8en.png\"\
          ></a></p>\n<p>So this is my settings for now: </p>\n<p><a rel=\"nofollow\"\
          \ href=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/fzHoOzaqce414pKALnowQ.png\"\
          ><img alt=\"\u56FE\u7247.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/fzHoOzaqce414pKALnowQ.png\"\
          ></a></p>\n<p>The memory is used to set the prompt, which makes the setting\
          \ panel more tidy, according to some suggestion I found online:<br><a rel=\"\
          nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/PLUbpOGTCSQHOoRaVTxZ6.png\"\
          ><img alt=\"\u56FE\u7247.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/PLUbpOGTCSQHOoRaVTxZ6.png\"\
          ></a></p>\n<p>Hope this helps!</p>\n"
        raw: "Many thanks for your suggestion @TheBloke , @concedo , the `--unbantokens`\
          \ flag works very well. \n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/nVqR0XX1x4-yOFuvRN8en.png)\n\
          \nSo this is my settings for now: \n\n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/fzHoOzaqce414pKALnowQ.png)\n\
          \nThe memory is used to set the prompt, which makes the setting panel more\
          \ tidy, according to some suggestion I found online:\n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/PLUbpOGTCSQHOoRaVTxZ6.png)\n\
          \nHope this helps!"
        updatedAt: '2023-06-16T03:03:29.510Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\u2764\uFE0F"
        users:
        - TheBloke
        - mufeed
        - mirek190
    id: 648bd1014831a0e55746dbe8
    type: comment
  author: kexul
  content: "Many thanks for your suggestion @TheBloke , @concedo , the `--unbantokens`\
    \ flag works very well. \n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/nVqR0XX1x4-yOFuvRN8en.png)\n\
    \nSo this is my settings for now: \n\n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/fzHoOzaqce414pKALnowQ.png)\n\
    \nThe memory is used to set the prompt, which makes the setting panel more tidy,\
    \ according to some suggestion I found online:\n![\u56FE\u7247.png](https://cdn-uploads.huggingface.co/production/uploads/6458c1d8ab9a44f42f631628/PLUbpOGTCSQHOoRaVTxZ6.png)\n\
    \nHope this helps!"
  created_at: 2023-06-16 02:03:29+00:00
  edited: false
  hidden: false
  id: 648bd1014831a0e55746dbe8
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: TheBloke/WizardCoder-15B-1.0-GGML
repo_type: model
status: open
target_branch: null
title: How to configure koboldcpp?
