!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jonatanklosko
conflicting_files: []
created_at: 2023-01-23 19:17:34+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:13:27.000Z'
    data:
      oid: dcca07232bfb1028e499333730f868b87fd3d043
      parents:
      - 5ab69dbb407402d042447cf12341a4b25f35a7ce
      subject: Add tokenizer.json
    id: 63cedc570000000000000000
    type: commit
  author: jonatanklosko
  created_at: 2023-01-23 19:13:27+00:00
  id: 63cedc570000000000000000
  oid: dcca07232bfb1028e499333730f868b87fd3d043
  summary: Add tokenizer.json
  type: commit
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:15:48.000Z'
    data:
      oid: 8852c40b30c9b7b981faf4fa77167fd862fd5fdb
      parents:
      - dcca07232bfb1028e499333730f868b87fd3d043
      subject: Update unknown token
    id: 63cedce40000000000000000
    type: commit
  author: jonatanklosko
  created_at: 2023-01-23 19:15:48+00:00
  id: 63cedce40000000000000000
  oid: 8852c40b30c9b7b981faf4fa77167fd862fd5fdb
  summary: Update unknown token
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:17:34.000Z'
    data:
      edited: true
      editors:
      - jonatanklosko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
          fullname: "Jonatan K\u0142osko"
          isHf: false
          isPro: false
          name: jonatanklosko
          type: user
        html: '<p>See <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/21222">https://github.com/huggingface/transformers/pull/21222</a>.</p>

          <p>This adds <code>tokenizer.json</code> to allow loading fast whisper tokenizer
          directly. It also changes the configured unknown token from <code>""</code>
          to <code>"&lt;|endoftext|&gt;</code>, which matches the English checkpoints
          and addresses some issues with <code>""</code> as a token.</p>

          '
        raw: 'See https://github.com/huggingface/transformers/pull/21222.


          This adds `tokenizer.json` to allow loading fast whisper tokenizer directly.
          It also changes the configured unknown token from `""` to `"<|endoftext|>`,
          which matches the English checkpoints and addresses some issues with `""`
          as a token.'
        updatedAt: '2023-01-23T19:21:07.501Z'
      numEdits: 1
      reactions: []
    id: 63cedd4e7805047440920f7f
    type: comment
  author: jonatanklosko
  content: 'See https://github.com/huggingface/transformers/pull/21222.


    This adds `tokenizer.json` to allow loading fast whisper tokenizer directly. It
    also changes the configured unknown token from `""` to `"<|endoftext|>`, which
    matches the English checkpoints and addresses some issues with `""` as a token.'
  created_at: 2023-01-23 19:17:34+00:00
  edited: true
  hidden: false
  id: 63cedd4e7805047440920f7f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:21:14.000Z'
    data:
      status: open
    id: 63cede2a7805047440922277
    type: status-change
  author: jonatanklosko
  created_at: 2023-01-23 19:21:14+00:00
  id: 63cede2a7805047440922277
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:21:53.000Z'
    data:
      from: jk-whisper-tokenizer-fast
      to: Changes for fast tokenizer
    id: 63cede51c2f9f9d9dccc3fb2
    type: title-change
  author: jonatanklosko
  created_at: 2023-01-23 19:21:53+00:00
  id: 63cede51c2f9f9d9dccc3fb2
  new_title: Changes for fast tokenizer
  old_title: jk-whisper-tokenizer-fast
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T19:49:37.000Z'
    data:
      edited: false
      editors:
      - jonatanklosko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
          fullname: "Jonatan K\u0142osko"
          isHf: false
          isPro: false
          name: jonatanklosko
          type: user
        html: '<p>Hmm, changing the unknown token seems to break special token ids
          when loading slow tokenizer:</p>

          <pre><code class="language-python"><span class="hljs-keyword">from</span>
          transformers <span class="hljs-keyword">import</span> WhisperTokenizer


          <span class="hljs-comment"># Add tokenizer.json</span>

          tokenizer = WhisperTokenizer.from_pretrained(<span class="hljs-string">"openai/whisper-tiny"</span>,
          revision=<span class="hljs-string">"dcca07232bfb1028e499333730f868b87fd3d043"</span>)

          <span class="hljs-built_in">print</span>(tokenizer.eos_token_id) <span class="hljs-comment">#=&gt;
          50257</span>


          <span class="hljs-comment"># Update unknown token</span>

          tokenizer = WhisperTokenizer.from_pretrained(<span class="hljs-string">"openai/whisper-tiny"</span>,
          revision=<span class="hljs-string">"8852c40b30c9b7b981faf4fa77167fd862fd5fdb"</span>)

          <span class="hljs-built_in">print</span>(tokenizer.eos_token_id) <span class="hljs-comment">#=&gt;
          None</span>

          </code></pre>

          <p>Please await merging until we figure this out.</p>

          '
        raw: 'Hmm, changing the unknown token seems to break special token ids when
          loading slow tokenizer:


          ```python

          from transformers import WhisperTokenizer


          # Add tokenizer.json

          tokenizer = WhisperTokenizer.from_pretrained("openai/whisper-tiny", revision="dcca07232bfb1028e499333730f868b87fd3d043")

          print(tokenizer.eos_token_id) #=> 50257


          # Update unknown token

          tokenizer = WhisperTokenizer.from_pretrained("openai/whisper-tiny", revision="8852c40b30c9b7b981faf4fa77167fd862fd5fdb")

          print(tokenizer.eos_token_id) #=> None

          ```


          Please await merging until we figure this out.'
        updatedAt: '2023-01-23T19:49:37.038Z'
      numEdits: 0
      reactions: []
    id: 63cee4d15b34d3d193560f78
    type: comment
  author: jonatanklosko
  content: 'Hmm, changing the unknown token seems to break special token ids when
    loading slow tokenizer:


    ```python

    from transformers import WhisperTokenizer


    # Add tokenizer.json

    tokenizer = WhisperTokenizer.from_pretrained("openai/whisper-tiny", revision="dcca07232bfb1028e499333730f868b87fd3d043")

    print(tokenizer.eos_token_id) #=> 50257


    # Update unknown token

    tokenizer = WhisperTokenizer.from_pretrained("openai/whisper-tiny", revision="8852c40b30c9b7b981faf4fa77167fd862fd5fdb")

    print(tokenizer.eos_token_id) #=> None

    ```


    Please await merging until we figure this out.'
  created_at: 2023-01-23 19:49:37+00:00
  edited: false
  hidden: false
  id: 63cee4d15b34d3d193560f78
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T23:07:00.000Z'
    data:
      oid: 3e9581879a6134abfb58f5788096027dd1756a63
      parents:
      - 8852c40b30c9b7b981faf4fa77167fd862fd5fdb
      subject: Move <|endoftext|> from added_tokens.json to vocab.json
    id: 63cf13140000000000000000
    type: commit
  author: jonatanklosko
  created_at: 2023-01-23 23:07:00+00:00
  id: 63cf13140000000000000000
  oid: 3e9581879a6134abfb58f5788096027dd1756a63
  summary: Move <|endoftext|> from added_tokens.json to vocab.json
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
      fullname: "Jonatan K\u0142osko"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonatanklosko
      type: user
    createdAt: '2023-01-23T23:19:32.000Z'
    data:
      edited: false
      editors:
      - jonatanklosko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661254068904-noauth.jpeg?w=200&h=200&f=face
          fullname: "Jonatan K\u0142osko"
          isHf: false
          isPro: false
          name: jonatanklosko
          type: user
        html: '<p>Moving <code>&lt;|endoftext|&gt;</code> to <code>vocab.json</code>
          resolves the issue, as outlined <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/21222#issuecomment-1401119817">in
          the GitHub comment</a>.</p>

          '
        raw: Moving `<|endoftext|>` to `vocab.json` resolves the issue, as outlined
          [in the GitHub comment](https://github.com/huggingface/transformers/pull/21222#issuecomment-1401119817).
        updatedAt: '2023-01-23T23:19:32.929Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - ArthurZ
    id: 63cf1604f971d7968536f0b4
    type: comment
  author: jonatanklosko
  content: Moving `<|endoftext|>` to `vocab.json` resolves the issue, as outlined
    [in the GitHub comment](https://github.com/huggingface/transformers/pull/21222#issuecomment-1401119817).
  created_at: 2023-01-23 23:19:32+00:00
  edited: false
  hidden: false
  id: 63cf1604f971d7968536f0b4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-01-25T10:17:40.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: '<p>I will merge, thanks for working on this</p>

          '
        raw: I will merge, thanks for working on this
        updatedAt: '2023-01-25T10:17:40.720Z'
      numEdits: 0
      reactions: []
    id: 63d101c4dae2635f2199675c
    type: comment
  author: ArthurZ
  content: I will merge, thanks for working on this
  created_at: 2023-01-25 10:17:40+00:00
  edited: false
  hidden: false
  id: 63d101c4dae2635f2199675c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-01-25T10:17:42.000Z'
    data:
      status: merged
    id: 63d101c662f0de677d80d0a8
    type: status-change
  author: ArthurZ
  created_at: 2023-01-25 10:17:42+00:00
  id: 63d101c662f0de677d80d0a8
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: a1790163fb3622f17b849f41f11c58aaf6fd65a3
num: 5
repo_id: openai/whisper-tiny
repo_type: model
status: merged
target_branch: refs/heads/main
title: Changes for fast tokenizer
