!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Maisieoy
conflicting_files: null
created_at: 2023-10-20 04:29:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/05966ee1045d968d12ed2868d671a2ca.svg
      fullname: Maisie Ouyang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Maisieoy
      type: user
    createdAt: '2023-10-20T05:29:45.000Z'
    data:
      edited: false
      editors:
      - Maisieoy
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5746801495552063
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/05966ee1045d968d12ed2868d671a2ca.svg
          fullname: Maisie Ouyang
          isHf: false
          isPro: false
          name: Maisieoy
          type: user
        html: "<p>Hi Smilingwolf, thanks for your amazing work. I want to deploy this\
          \ model for inference. Could you please provide a sample code for my reference?</p>\n\
          <p>For example:</p>\n<p>from huggingface_hub import from_pretrained_keras<br>import\
          \ numpy as np<br>from tensorflow.keras.utils import load_img</p>\n<p>model\
          \ = from_pretrained_keras(\"SmilingWolf/wd-v1-4-swinv2-tagger-v2\")</p>\n\
          <p>cat_image = load_img(\"./aaa.png\", target_size=(448, 448))<br>cat_image_array\
          \ = np.array(cat_image).reshape((1,448, 448, 3))<br>prediction = model.predict(cat_image_array)<br>prediction1\
          \ = tf.squeeze(tf.round(prediction))<br>print(prediction1)</p>\n<p>The output\
          \ from prediction1 is a Tensor list, so how to convert it to tag\uFF1FThank\
          \ you.<br>tf.Tensor([1. 0. 0. ... 0. 0. 0.], shape=(9083,), dtype=float32)</p>\n"
        raw: "Hi Smilingwolf, thanks for your amazing work. I want to deploy this\
          \ model for inference. Could you please provide a sample code for my reference?\r\
          \n\r\nFor example:\r\n\r\nfrom huggingface_hub import from_pretrained_keras\r\
          \nimport numpy as np\r\nfrom tensorflow.keras.utils import load_img\r\n\r\
          \nmodel = from_pretrained_keras(\"SmilingWolf/wd-v1-4-swinv2-tagger-v2\"\
          )\r\n\r\ncat_image = load_img(\"./aaa.png\", target_size=(448, 448))\r\n\
          cat_image_array = np.array(cat_image).reshape((1,448, 448, 3))\r\nprediction\
          \ = model.predict(cat_image_array)\r\nprediction1 = tf.squeeze(tf.round(prediction))\r\
          \nprint(prediction1)\r\n\r\nThe output from prediction1 is a Tensor list,\
          \ so how to convert it to tag\uFF1FThank you. \r\ntf.Tensor([1. 0. 0. ...\
          \ 0. 0. 0.], shape=(9083,), dtype=float32)\r\n\r\n\r\n\r\n"
        updatedAt: '2023-10-20T05:29:45.803Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - cornpip
    id: 65321049cb0270ed05bdfce7
    type: comment
  author: Maisieoy
  content: "Hi Smilingwolf, thanks for your amazing work. I want to deploy this model\
    \ for inference. Could you please provide a sample code for my reference?\r\n\r\
    \nFor example:\r\n\r\nfrom huggingface_hub import from_pretrained_keras\r\nimport\
    \ numpy as np\r\nfrom tensorflow.keras.utils import load_img\r\n\r\nmodel = from_pretrained_keras(\"\
    SmilingWolf/wd-v1-4-swinv2-tagger-v2\")\r\n\r\ncat_image = load_img(\"./aaa.png\"\
    , target_size=(448, 448))\r\ncat_image_array = np.array(cat_image).reshape((1,448,\
    \ 448, 3))\r\nprediction = model.predict(cat_image_array)\r\nprediction1 = tf.squeeze(tf.round(prediction))\r\
    \nprint(prediction1)\r\n\r\nThe output from prediction1 is a Tensor list, so how\
    \ to convert it to tag\uFF1FThank you. \r\ntf.Tensor([1. 0. 0. ... 0. 0. 0.],\
    \ shape=(9083,), dtype=float32)\r\n\r\n\r\n\r\n"
  created_at: 2023-10-20 04:29:45+00:00
  edited: false
  hidden: false
  id: 65321049cb0270ed05bdfce7
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: SmilingWolf/wd-v1-4-swinv2-tagger-v2
repo_type: model
status: open
target_branch: null
title: inference code sample
