!!python/object:huggingface_hub.community.DiscussionWithDetails
author: neteasy
conflicting_files: null
created_at: 2023-08-10 14:40:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
      fullname: webmaster
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: neteasy
      type: user
    createdAt: '2023-08-10T15:40:29.000Z'
    data:
      edited: false
      editors:
      - neteasy
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.45052772760391235
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
          fullname: webmaster
          isHf: false
          isPro: false
          name: neteasy
          type: user
        html: "<p><a rel=\"nofollow\" href=\"https://github.com/labring/FastGPT/blob/main/files/models/ChatGLM2/openai_api.py\"\
          >https://github.com/labring/FastGPT/blob/main/files/models/ChatGLM2/openai_api.py</a></p>\n\
          <p>\u57FA\u4E8E\u8FD9\u4E2Aapi\u52A0\u8F7D\u60A8\u7684\u6A21\u578B\uFF0C\
          \u51FA\u73B0\u9519\u8BEF\uFF1Alog\u5982\u4E0B\uFF1A<br> File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52128 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52130 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52134 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52140 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52144 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52148 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52156 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52160 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float<br>INFO:     172.18.0.3:52164 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error<br>ERROR:  \
          \  Exception in ASGI application<br>Traceback (most recent call last):<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi<br>    result = await app(  # type: ignore[func-returns-value]<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in <strong>call</strong><br>    return await self.app(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in <strong>call</strong><br>    await super().<strong>call</strong>(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in <strong>call</strong><br>    await self.middleware_stack(scope,\
          \ receive, send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ _send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in <strong>call</strong><br>    raise exc<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ sender)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in <strong>call</strong><br>    raise e<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in <strong>call</strong><br>    await self.app(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in <strong>call</strong><br>    await route.handle(scope, receive,\
          \ send)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle<br>    await self.app(scope, receive, send)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app<br>    response = await func(request)<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app<br>    raw_response = await run_endpoint_function(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function<br>    return await dependant.call(**values)<br>\
          \  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion<br>\
          \    response, _ = model.chat(tokenizer, query, history=history)<br>  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat<br>    outputs = self.generate(**inputs, **gen_kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context<br>    return func(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate<br>    return self.sample(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample<br>    outputs = self(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward<br>    transformer_outputs = self.transformer(<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward<br>    layer_ret = layer(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward<br>    attention_input = self.input_layernorm(hidden_states)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl<br>    return forward_call(*args, **kwargs)<br>\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward<br>    return F.layer_norm(<br>  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm<br>    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)<br>RuntimeError: expected\
          \ scalar type Half but found Float</p>\n"
        raw: "https://github.com/labring/FastGPT/blob/main/files/models/ChatGLM2/openai_api.py\r\
          \n\r\n\u57FA\u4E8E\u8FD9\u4E2Aapi\u52A0\u8F7D\u60A8\u7684\u6A21\u578B\uFF0C\
          \u51FA\u73B0\u9519\u8BEF\uFF1Alog\u5982\u4E0B\uFF1A\r\n File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52128 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52130 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52134 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52140 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52144 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52148 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52156 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52160 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float\r\nINFO:     172.18.0.3:52164 - \"POST\
          \ /v1/chat/completions HTTP/1.1\" 500 Internal Server Error\r\nERROR:  \
          \  Exception in ASGI application\r\nTraceback (most recent call last):\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
          , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
          , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
          , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
          \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File\
          \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n\
          \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
          , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
          , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
          , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\
          \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
          , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
          , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
          \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected\
          \ scalar type Half but found Float"
        updatedAt: '2023-08-10T15:40:29.341Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - neteasy
    id: 64d504ed620c17bfa02dbe53
    type: comment
  author: neteasy
  content: "https://github.com/labring/FastGPT/blob/main/files/models/ChatGLM2/openai_api.py\r\
    \n\r\n\u57FA\u4E8E\u8FD9\u4E2Aapi\u52A0\u8F7D\u60A8\u7684\u6A21\u578B\uFF0C\u51FA\
    \u73B0\u9519\u8BEF\uFF1Alog\u5982\u4E0B\uFF1A\r\n File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52128 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52130 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52134 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52140 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52144 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52148 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52156 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52160 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float\r\nINFO:     172.18.0.3:52164 - \"POST /v1/chat/completions\
    \ HTTP/1.1\" 500 Internal Server Error\r\nERROR:    Exception in ASGI application\r\
    \nTraceback (most recent call last):\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 428, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 78, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/applications.py\"\
    , line 289, in __call__\r\n    await super().__call__(scope, receive, send)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/applications.py\"\
    , line 122, in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 184, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/cors.py\"\
    , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/starlette/routing.py\"\
    , line 66, in app\r\n    response = await func(request)\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/fastapi/routing.py\"\
    , line 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
    \n  File \"/www/wwwroot/chatglm2/apifast.py\", line 139, in create_chat_completion\r\
    \n    response, _ = model.chat(tokenizer, query, history=history)\r\n  File \"\
    /www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1285, in chat\r\n    outputs = self.generate(**inputs, **gen_kwargs)\r\n\
    \  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\n    return func(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 1572, in generate\r\n    return self.sample(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/transformers/generation/utils.py\"\
    , line 2619, in sample\r\n    outputs = self(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 1190, in forward\r\n    transformer_outputs = self.transformer(\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 996, in forward\r\n    layer_ret = layer(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/root/.cache/huggingface/modules/transformers_modules/chatglm/modeling_chatglm.py\"\
    , line 624, in forward\r\n    attention_input = self.input_layernorm(hidden_states)\r\
    \n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/module.py\"\
    , line 1501, in _call_impl\r\n    return forward_call(*args, **kwargs)\r\n  File\
    \ \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/modules/normalization.py\"\
    , line 190, in forward\r\n    return F.layer_norm(\r\n  File \"/www/server/pyporject_evn/c6c91b000da227aab4443cae4e8c16dc_venv/lib/python3.9/site-packages/torch/nn/functional.py\"\
    , line 2515, in layer_norm\r\n    return torch.layer_norm(input, normalized_shape,\
    \ weight, bias, eps, torch.backends.cudnn.enabled)\r\nRuntimeError: expected scalar\
    \ type Half but found Float"
  created_at: 2023-08-10 14:40:29+00:00
  edited: false
  hidden: false
  id: 64d504ed620c17bfa02dbe53
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
      fullname: fbai
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: fb700
      type: user
    createdAt: '2023-08-10T17:14:36.000Z'
    data:
      edited: false
      editors:
      - fb700
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.7779669165611267
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
          fullname: fbai
          isHf: false
          isPro: false
          name: fb700
          type: user
        html: "<p>\u75281\u7684API</p>\n"
        raw: "\u75281\u7684API"
        updatedAt: '2023-08-10T17:14:36.151Z'
      numEdits: 0
      reactions: []
    id: 64d51afcc3b41747a235870a
    type: comment
  author: fb700
  content: "\u75281\u7684API"
  created_at: 2023-08-10 16:14:36+00:00
  edited: false
  hidden: false
  id: 64d51afcc3b41747a235870a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
      fullname: webmaster
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: neteasy
      type: user
    createdAt: '2023-08-12T16:12:54.000Z'
    data:
      edited: false
      editors:
      - neteasy
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4341317415237427
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
          fullname: webmaster
          isHf: false
          isPro: false
          name: neteasy
          type: user
        html: "<blockquote>\n<p>\u75281\u7684API</p>\n</blockquote>\n<p>C:\\ProgramData\\\
          miniconda3\\envs\\nlp\\python.exe E:\\glm\\apiv3.py<br>Traceback (most recent\
          \ call last):<br>  File \"E:\\glm\\apiv3.py\", line 55, in <br>    model\
          \ = AutoModel.from_pretrained(\"v3\", device_map='auto')<br>  File \"C:\\\
          ProgramData\\miniconda3\\envs\\nlp\\lib\\site-packages\\transformers\\models\\\
          auto\\auto_factory.py\", line 441, in from_pretrained<br>    config, kwargs\
          \ = AutoConfig.from_pretrained(<br>  File \"C:\\ProgramData\\miniconda3\\\
          envs\\nlp\\lib\\site-packages\\transformers\\models\\auto\\configuration_auto.py\"\
          , line 899, in from_pretrained<br>    raise ValueError(<br>ValueError: Loading\
          \ v3 requires you to execute the configuration file in that repo on your\
          \ local machine. Make sure you have read the code there to avoid malicious\
          \ use, then set the option <code>trust_remote_code=True</code> to remove\
          \ this error.</p>\n<p>\u8FDB\u7A0B\u5DF2\u7ED3\u675F,\u9000\u51FA\u4EE3\u7801\
          1</p>\n"
        raw: "> \u75281\u7684API\n\n\nC:\\ProgramData\\miniconda3\\envs\\nlp\\python.exe\
          \ E:\\glm\\apiv3.py \nTraceback (most recent call last):\n  File \"E:\\\
          glm\\apiv3.py\", line 55, in <module>\n    model = AutoModel.from_pretrained(\"\
          v3\", device_map='auto')\n  File \"C:\\ProgramData\\miniconda3\\envs\\nlp\\\
          lib\\site-packages\\transformers\\models\\auto\\auto_factory.py\", line\
          \ 441, in from_pretrained\n    config, kwargs = AutoConfig.from_pretrained(\n\
          \  File \"C:\\ProgramData\\miniconda3\\envs\\nlp\\lib\\site-packages\\transformers\\\
          models\\auto\\configuration_auto.py\", line 899, in from_pretrained\n  \
          \  raise ValueError(\nValueError: Loading v3 requires you to execute the\
          \ configuration file in that repo on your local machine. Make sure you have\
          \ read the code there to avoid malicious use, then set the option `trust_remote_code=True`\
          \ to remove this error.\n\n\u8FDB\u7A0B\u5DF2\u7ED3\u675F,\u9000\u51FA\u4EE3\
          \u78011"
        updatedAt: '2023-08-12T16:12:54.009Z'
      numEdits: 0
      reactions: []
    id: 64d7af86a146b1c0a68fff12
    type: comment
  author: neteasy
  content: "> \u75281\u7684API\n\n\nC:\\ProgramData\\miniconda3\\envs\\nlp\\python.exe\
    \ E:\\glm\\apiv3.py \nTraceback (most recent call last):\n  File \"E:\\glm\\apiv3.py\"\
    , line 55, in <module>\n    model = AutoModel.from_pretrained(\"v3\", device_map='auto')\n\
    \  File \"C:\\ProgramData\\miniconda3\\envs\\nlp\\lib\\site-packages\\transformers\\\
    models\\auto\\auto_factory.py\", line 441, in from_pretrained\n    config, kwargs\
    \ = AutoConfig.from_pretrained(\n  File \"C:\\ProgramData\\miniconda3\\envs\\\
    nlp\\lib\\site-packages\\transformers\\models\\auto\\configuration_auto.py\",\
    \ line 899, in from_pretrained\n    raise ValueError(\nValueError: Loading v3\
    \ requires you to execute the configuration file in that repo on your local machine.\
    \ Make sure you have read the code there to avoid malicious use, then set the\
    \ option `trust_remote_code=True` to remove this error.\n\n\u8FDB\u7A0B\u5DF2\u7ED3\
    \u675F,\u9000\u51FA\u4EE3\u78011"
  created_at: 2023-08-12 15:12:54+00:00
  edited: false
  hidden: false
  id: 64d7af86a146b1c0a68fff12
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
      fullname: fbai
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: fb700
      type: user
    createdAt: '2023-08-12T16:30:34.000Z'
    data:
      edited: false
      editors:
      - fb700
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 1.0000098943710327
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
          fullname: fbai
          isHf: false
          isPro: false
          name: fb700
          type: user
        html: "<p>1\u7684\u4E0D\u662F\u5B98\u65B9\u7684\u5417</p>\n"
        raw: "1\u7684\u4E0D\u662F\u5B98\u65B9\u7684\u5417"
        updatedAt: '2023-08-12T16:30:34.260Z'
      numEdits: 0
      reactions: []
    id: 64d7b3aad38302bf80e2f7a9
    type: comment
  author: fb700
  content: "1\u7684\u4E0D\u662F\u5B98\u65B9\u7684\u5417"
  created_at: 2023-08-12 15:30:34+00:00
  edited: false
  hidden: false
  id: 64d7b3aad38302bf80e2f7a9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
      fullname: webmaster
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: neteasy
      type: user
    createdAt: '2023-08-15T00:56:12.000Z'
    data:
      edited: false
      editors:
      - neteasy
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9972711205482483
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676806864585-noauth.png?w=200&h=200&f=face
          fullname: webmaster
          isHf: false
          isPro: false
          name: neteasy
          type: user
        html: "<p>\u662F\u5B98\u65B9\u7684\uFF0C\u4E0D\u8FC7\u4F60\u793A\u8303\u90A3\
          \u4E2A\u8C03\u7528\u6709\u95EE\u9898\uFF0C\u6211\u81EA\u5DF1\u6539\u597D\
          \u5566\uFF0C \u8C22\u8C22\uFF01</p>\n"
        raw: "\u662F\u5B98\u65B9\u7684\uFF0C\u4E0D\u8FC7\u4F60\u793A\u8303\u90A3\u4E2A\
          \u8C03\u7528\u6709\u95EE\u9898\uFF0C\u6211\u81EA\u5DF1\u6539\u597D\u5566\
          \uFF0C \u8C22\u8C22\uFF01"
        updatedAt: '2023-08-15T00:56:12.629Z'
      numEdits: 0
      reactions: []
    id: 64dacd2cc8d191a54ac5268a
    type: comment
  author: neteasy
  content: "\u662F\u5B98\u65B9\u7684\uFF0C\u4E0D\u8FC7\u4F60\u793A\u8303\u90A3\u4E2A\
    \u8C03\u7528\u6709\u95EE\u9898\uFF0C\u6211\u81EA\u5DF1\u6539\u597D\u5566\uFF0C\
    \ \u8C22\u8C22\uFF01"
  created_at: 2023-08-14 23:56:12+00:00
  edited: false
  hidden: false
  id: 64dacd2cc8d191a54ac5268a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
      fullname: fbai
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: fb700
      type: user
    createdAt: '2023-08-15T02:34:01.000Z'
    data:
      edited: false
      editors:
      - fb700
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 1.0000545978546143
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ce27e6fa46ccb9aba6505a5def09806a.svg
          fullname: fbai
          isHf: false
          isPro: false
          name: fb700
          type: user
        html: "<p>\u6709\u4EC0\u4E48\u95EE\u9898\uFF0C\u53EF\u4EE5\u8D34\u4E0B</p>\n"
        raw: "\u6709\u4EC0\u4E48\u95EE\u9898\uFF0C\u53EF\u4EE5\u8D34\u4E0B"
        updatedAt: '2023-08-15T02:34:01.723Z'
      numEdits: 0
      reactions: []
    id: 64dae4193a7ab21ea7dd7419
    type: comment
  author: fb700
  content: "\u6709\u4EC0\u4E48\u95EE\u9898\uFF0C\u53EF\u4EE5\u8D34\u4E0B"
  created_at: 2023-08-15 01:34:01+00:00
  edited: false
  hidden: false
  id: 64dae4193a7ab21ea7dd7419
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 10
repo_id: fb700/chatglm-fitness-RLHF
repo_type: model
status: open
target_branch: null
title: "api \u8C03\u7528\u60A8\u7684\u6A21\u578B\u51FA\u73B0\u9519\u8BEF"
