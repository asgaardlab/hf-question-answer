!!python/object:huggingface_hub.community.DiscussionWithDetails
author: corin9122
conflicting_files: null
created_at: 2023-07-21 05:40:31+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/00c1544b2fa7780801a5688f1c634c67.svg
      fullname: james yu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: corin9122
      type: user
    createdAt: '2023-07-21T06:40:31.000Z'
    data:
      edited: false
      editors:
      - corin9122
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7983258366584778
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/00c1544b2fa7780801a5688f1c634c67.svg
          fullname: james yu
          isHf: false
          isPro: false
          name: corin9122
          type: user
        html: '<p>I tried to run the model on Mac Studio. It''s said that MPS doesn''t
          support bfloat16, so I changed the dtype in the sample code to float16.
          And I got the error:</p>

          <p>loc("varianceEps"("(mpsFileLoc): /AppleInternal/Library/BuildRoots/ff32e6fb-db00-11ed-a068-428477786501/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm":228:0)):
          error: input types ''tensor&lt;1x61x1xf16&gt;'' and ''tensor&lt;1xf32&gt;''
          are not broadcast compatible<br>LLVM ERROR: Failed to infer result type(s).</p>

          <p>What should I do to make it work?</p>

          '
        raw: "I tried to run the model on Mac Studio. It's said that MPS doesn't support\
          \ bfloat16, so I changed the dtype in the sample code to float16. And I\
          \ got the error:\r\n\r\nloc(\"varianceEps\"(\"(mpsFileLoc): /AppleInternal/Library/BuildRoots/ff32e6fb-db00-11ed-a068-428477786501/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm\"\
          :228:0)): error: input types 'tensor<1x61x1xf16>' and 'tensor<1xf32>' are\
          \ not broadcast compatible\r\nLLVM ERROR: Failed to infer result type(s).\r\
          \n\r\nWhat should I do to make it work?"
        updatedAt: '2023-07-21T06:40:31.495Z'
      numEdits: 0
      reactions: []
    id: 64ba285f356eeb0d8ccc495b
    type: comment
  author: corin9122
  content: "I tried to run the model on Mac Studio. It's said that MPS doesn't support\
    \ bfloat16, so I changed the dtype in the sample code to float16. And I got the\
    \ error:\r\n\r\nloc(\"varianceEps\"(\"(mpsFileLoc): /AppleInternal/Library/BuildRoots/ff32e6fb-db00-11ed-a068-428477786501/Library/Caches/com.apple.xbs/Sources/MetalPerformanceShadersGraph/mpsgraph/MetalPerformanceShadersGraph/Core/Files/MPSGraphUtilities.mm\"\
    :228:0)): error: input types 'tensor<1x61x1xf16>' and 'tensor<1xf32>' are not\
    \ broadcast compatible\r\nLLVM ERROR: Failed to infer result type(s).\r\n\r\n\
    What should I do to make it work?"
  created_at: 2023-07-21 05:40:31+00:00
  edited: false
  hidden: false
  id: 64ba285f356eeb0d8ccc495b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/446af4a88cb1b3acc4e26334839722cd.svg
      fullname: Jonathan Roiz
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jonathanroiz
      type: user
    createdAt: '2023-09-18T19:18:25.000Z'
    data:
      edited: false
      editors:
      - Jonathanroiz
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8849626183509827
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/446af4a88cb1b3acc4e26334839722cd.svg
          fullname: Jonathan Roiz
          isHf: false
          isPro: false
          name: Jonathanroiz
          type: user
        html: '<p>I''m getting the same error on a different model</p>

          '
        raw: I'm getting the same error on a different model
        updatedAt: '2023-09-18T19:18:25.634Z'
      numEdits: 0
      reactions: []
    id: 6508a281ac5108b93a5d1ef3
    type: comment
  author: Jonathanroiz
  content: I'm getting the same error on a different model
  created_at: 2023-09-18 18:18:25+00:00
  edited: false
  hidden: false
  id: 6508a281ac5108b93a5d1ef3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2ae352bc76ed8ea0bd6627103daed049.svg
      fullname: Wei Yang CHANG
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ericCWY
      type: user
    createdAt: '2023-10-15T07:03:27.000Z'
    data:
      edited: false
      editors:
      - ericCWY
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9789960980415344
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2ae352bc76ed8ea0bd6627103daed049.svg
          fullname: Wei Yang CHANG
          isHf: false
          isPro: false
          name: ericCWY
          type: user
        html: '<p>I success to run the model when I change bfloat16 to float32, it
          seems that the MPS doesn''t support some dtype and some dtype doesn''t compatible
          to each other.</p>

          '
        raw: I success to run the model when I change bfloat16 to float32, it seems
          that the MPS doesn't support some dtype and some dtype doesn't compatible
          to each other.
        updatedAt: '2023-10-15T07:03:27.034Z'
      numEdits: 0
      reactions: []
    id: 652b8ebfa21958f7db63c321
    type: comment
  author: ericCWY
  content: I success to run the model when I change bfloat16 to float32, it seems
    that the MPS doesn't support some dtype and some dtype doesn't compatible to each
    other.
  created_at: 2023-10-15 06:03:27+00:00
  edited: false
  hidden: false
  id: 652b8ebfa21958f7db63c321
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 95
repo_id: tiiuae/falcon-40b
repo_type: model
status: open
target_branch: null
title: Run falcon on Mac
