!!python/object:huggingface_hub.community.DiscussionWithDetails
author: cchudant
conflicting_files:
- modelling_RW.py
created_at: 2023-06-07 10:59:17+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671801056760-noauth.png?w=200&h=200&f=face
      fullname: Charles Chudant
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cchudant
      type: user
    createdAt: '2023-06-07T11:59:17.000Z'
    data:
      edited: false
      editors:
      - cchudant
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8580883145332336
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671801056760-noauth.png?w=200&h=200&f=face
          fullname: Charles Chudant
          isHf: false
          isPro: false
          name: cchudant
          type: user
        html: '<p>Hello!<br>I have noticed that the dimension of the kv-cache here
          is weird, and does not match the hugginface transformers modeling_bloom.py
          file.<br>Is the departure from the bloom dimension intended?<br>Judging
          from the copy-pasted comments, it looks like a bug - also, <code>_convert_to_rw_cache</code>
          &amp; its <code>_convert_to_standard_cache</code> counterpart matches bloom
          dimensions.</p>

          '
        raw: 'Hello!

          I have noticed that the dimension of the kv-cache here is weird, and does
          not match the hugginface transformers modeling_bloom.py file.

          Is the departure from the bloom dimension intended?

          Judging from the copy-pasted comments, it looks like a bug - also, `_convert_to_rw_cache`
          & its `_convert_to_standard_cache` counterpart matches bloom dimensions.'
        updatedAt: '2023-06-07T11:59:17.495Z'
      numEdits: 0
      reactions: []
    id: 64807115e1421e205fd68c50
    type: comment
  author: cchudant
  content: 'Hello!

    I have noticed that the dimension of the kv-cache here is weird, and does not
    match the hugginface transformers modeling_bloom.py file.

    Is the departure from the bloom dimension intended?

    Judging from the copy-pasted comments, it looks like a bug - also, `_convert_to_rw_cache`
    & its `_convert_to_standard_cache` counterpart matches bloom dimensions.'
  created_at: 2023-06-07 10:59:17+00:00
  edited: false
  hidden: false
  id: 64807115e1421e205fd68c50
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671801056760-noauth.png?w=200&h=200&f=face
      fullname: Charles Chudant
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cchudant
      type: user
    createdAt: '2023-06-07T11:59:18.000Z'
    data:
      oid: d5ff350e19093729320012bc03e38f534486bb53
      parents:
      - 88b92aef6921a843415b6142bd5a906197e3fb0e
      subject: Fix the kv-cache dimensions
    id: '648071160000000000000000'
    type: commit
  author: cchudant
  created_at: 2023-06-07 10:59:18+00:00
  id: '648071160000000000000000'
  oid: d5ff350e19093729320012bc03e38f534486bb53
  summary: Fix the kv-cache dimensions
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671801056760-noauth.png?w=200&h=200&f=face
      fullname: Charles Chudant
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cchudant
      type: user
    createdAt: '2023-06-07T12:00:31.000Z'
    data:
      edited: false
      editors:
      - cchudant
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5469785332679749
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1671801056760-noauth.png?w=200&h=200&f=face
          fullname: Charles Chudant
          isHf: false
          isPro: false
          name: cchudant
          type: user
        html: '<p>Upstream modeling_bloom.py: <a rel="nofollow" href="https://github.com/huggingface/transformers/blob/fabe17a726bbf6081cfbcc975d8ac451a81f3e2d/src/transformers/models/bloom/modeling_bloom.py#L305">https://github.com/huggingface/transformers/blob/fabe17a726bbf6081cfbcc975d8ac451a81f3e2d/src/transformers/models/bloom/modeling_bloom.py#L305</a></p>

          '
        raw: 'Upstream modeling_bloom.py: https://github.com/huggingface/transformers/blob/fabe17a726bbf6081cfbcc975d8ac451a81f3e2d/src/transformers/models/bloom/modeling_bloom.py#L305'
        updatedAt: '2023-06-07T12:00:31.808Z'
      numEdits: 0
      reactions: []
    id: 6480715fe1421e205fd69333
    type: comment
  author: cchudant
  content: 'Upstream modeling_bloom.py: https://github.com/huggingface/transformers/blob/fabe17a726bbf6081cfbcc975d8ac451a81f3e2d/src/transformers/models/bloom/modeling_bloom.py#L305'
  created_at: 2023-06-07 11:00:31+00:00
  edited: false
  hidden: false
  id: 6480715fe1421e205fd69333
  type: comment
is_pull_request: true
merge_commit_oid: null
num: 47
repo_id: tiiuae/falcon-40b
repo_type: model
status: open
target_branch: refs/heads/main
title: Fix the kv-cache dimensions
