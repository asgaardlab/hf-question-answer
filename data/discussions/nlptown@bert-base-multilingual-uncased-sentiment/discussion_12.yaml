!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ritzshah
conflicting_files: null
created_at: 2023-07-08 10:43:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ec5a4b9abe8da6b97084567a621f19a5.svg
      fullname: Ritz Shah
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ritzshah
      type: user
    createdAt: '2023-07-08T11:43:38.000Z'
    data:
      edited: false
      editors:
      - ritzshah
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6675718426704407
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ec5a4b9abe8da6b97084567a621f19a5.svg
          fullname: Ritz Shah
          isHf: false
          isPro: false
          name: ritzshah
          type: user
        html: "<p>Hi,</p>\n<p>I have used optimum to convert this model to onnx format\
          \ and am try to serve using model serving.<br>When I directly use the model\
          \ from local folder it works fine and gives logits but when I try to use\
          \ api it doesn't work.</p>\n<p>What is the data input I need to pass to\
          \ the model when working using api (model serving). Where can I find the\
          \ correct data to be provided.</p>\n<p>This is my code and error. Can someone\
          \ guid on what can I do to fix this.</p>\n<p>API_URL = \"my-url.com/v2/models/sentiment-classification/infer\"\
          <br>headers = {\"content-type\": \"application/json\"}<br>\u200B********************************<br>def\
          \ query(payload):<br>    response = requests.post(API_URL, headers=headers,\
          \ json=payload)<br>    return response.json()</p>\n<p>output = query({<br>\
          \    \"inputs\": \"I like you.\"<br>})<br>\u200B<br>print(output)</p>\n\
          <hr>\n<p>send: b'POST /v2/models/sentiment-classification/infer HTTP/1.1\\\
          r\\nHost: my-url.com\\r\\nUser-Agent: python-requests/2.31.0\\r\\nAccept-Encoding:\
          \ gzip, deflate\\r\\nAccept: */*\\r\\nConnection: keep-alive\\r\\ncontent-type:\
          \ application/json\\r\\nContent-Length: 25\\r\\n\\r\\n'<br>send: b'{\"inputs\"\
          : \"I like you.\"}'<br>reply: 'HTTP/1.1 400 Bad Request\\r\\n'<br>header:\
          \ content-type: application/json<br>header: date: Sat, 08 Jul 2023 11:41:03\
          \ GMT<br>header: content-length: 119<br>header: set-cookie: XXXXX=XXXXX;\
          \ path=/; HttpOnly; Secure; SameSite=None<br>{'code': 3, 'message': 'json:\
          \ cannot unmarshal string into Go struct field RESTRequest.inputs of type\
          \ []main.InputTensor'}</p>\n"
        raw: "Hi,\r\n\r\nI have used optimum to convert this model to onnx format\
          \ and am try to serve using model serving.  \r\nWhen I directly use the\
          \ model from local folder it works fine and gives logits but when I try\
          \ to use api it doesn't work.\r\n\r\nWhat is the data input I need to pass\
          \ to the model when working using api (model serving). Where can I find\
          \ the correct data to be provided.\r\n\r\nThis is my code and error. Can\
          \ someone guid on what can I do to fix this.\r\n\r\nAPI_URL = \"my-url.com/v2/models/sentiment-classification/infer\"\
          \r\nheaders = {\"content-type\": \"application/json\"}\r\n\u200B********************************\r\
          \ndef query(payload):\r\n    response = requests.post(API_URL, headers=headers,\
          \ json=payload)\r\n    return response.json()\r\n    \r\noutput = query({\r\
          \n    \"inputs\": \"I like you.\"\r\n})\r\n\u200B\r\nprint(output)\r\n\r\
          \n********************************\r\nsend: b'POST /v2/models/sentiment-classification/infer\
          \ HTTP/1.1\\r\\nHost: my-url.com\\r\\nUser-Agent: python-requests/2.31.0\\\
          r\\nAccept-Encoding: gzip, deflate\\r\\nAccept: */*\\r\\nConnection: keep-alive\\\
          r\\ncontent-type: application/json\\r\\nContent-Length: 25\\r\\n\\r\\n'\r\
          \nsend: b'{\"inputs\": \"I like you.\"}'\r\nreply: 'HTTP/1.1 400 Bad Request\\\
          r\\n'\r\nheader: content-type: application/json\r\nheader: date: Sat, 08\
          \ Jul 2023 11:41:03 GMT\r\nheader: content-length: 119\r\nheader: set-cookie:\
          \ XXXXX=XXXXX; path=/; HttpOnly; Secure; SameSite=None\r\n{'code': 3, 'message':\
          \ 'json: cannot unmarshal string into Go struct field RESTRequest.inputs\
          \ of type []main.InputTensor'}\r\n\r\n"
        updatedAt: '2023-07-08T11:43:38.273Z'
      numEdits: 0
      reactions: []
    id: 64a94beaa8e86b27d09e94c6
    type: comment
  author: ritzshah
  content: "Hi,\r\n\r\nI have used optimum to convert this model to onnx format and\
    \ am try to serve using model serving.  \r\nWhen I directly use the model from\
    \ local folder it works fine and gives logits but when I try to use api it doesn't\
    \ work.\r\n\r\nWhat is the data input I need to pass to the model when working\
    \ using api (model serving). Where can I find the correct data to be provided.\r\
    \n\r\nThis is my code and error. Can someone guid on what can I do to fix this.\r\
    \n\r\nAPI_URL = \"my-url.com/v2/models/sentiment-classification/infer\"\r\nheaders\
    \ = {\"content-type\": \"application/json\"}\r\n\u200B********************************\r\
    \ndef query(payload):\r\n    response = requests.post(API_URL, headers=headers,\
    \ json=payload)\r\n    return response.json()\r\n    \r\noutput = query({\r\n\
    \    \"inputs\": \"I like you.\"\r\n})\r\n\u200B\r\nprint(output)\r\n\r\n********************************\r\
    \nsend: b'POST /v2/models/sentiment-classification/infer HTTP/1.1\\r\\nHost: my-url.com\\\
    r\\nUser-Agent: python-requests/2.31.0\\r\\nAccept-Encoding: gzip, deflate\\r\\\
    nAccept: */*\\r\\nConnection: keep-alive\\r\\ncontent-type: application/json\\\
    r\\nContent-Length: 25\\r\\n\\r\\n'\r\nsend: b'{\"inputs\": \"I like you.\"}'\r\
    \nreply: 'HTTP/1.1 400 Bad Request\\r\\n'\r\nheader: content-type: application/json\r\
    \nheader: date: Sat, 08 Jul 2023 11:41:03 GMT\r\nheader: content-length: 119\r\
    \nheader: set-cookie: XXXXX=XXXXX; path=/; HttpOnly; Secure; SameSite=None\r\n\
    {'code': 3, 'message': 'json: cannot unmarshal string into Go struct field RESTRequest.inputs\
    \ of type []main.InputTensor'}\r\n\r\n"
  created_at: 2023-07-08 10:43:38+00:00
  edited: false
  hidden: false
  id: 64a94beaa8e86b27d09e94c6
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 12
repo_id: nlptown/bert-base-multilingual-uncased-sentiment
repo_type: model
status: open
target_branch: null
title: onnx model serving. what data input should be provided.
