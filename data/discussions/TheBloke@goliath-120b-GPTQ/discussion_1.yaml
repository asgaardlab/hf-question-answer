!!python/object:huggingface_hub.community.DiscussionWithDetails
author: rocca
conflicting_files: null
created_at: 2024-01-04 11:58:13+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8213f0ffc9106d7663c4b5f29f4ec9e5.svg
      fullname: Joe Rocca
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rocca
      type: user
    createdAt: '2024-01-04T11:58:13.000Z'
    data:
      edited: false
      editors:
      - rocca
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.39081138372421265
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8213f0ffc9106d7663c4b5f29f4ec9e5.svg
          fullname: Joe Rocca
          isHf: false
          isPro: false
          name: rocca
          type: user
        html: "<p>Regarding this branch: <a href=\"https://huggingface.co/TheBloke/goliath-120b-GPTQ/tree/gptq-3bit--1g-actorder_True\"\
          >https://huggingface.co/TheBloke/goliath-120b-GPTQ/tree/gptq-3bit--1g-actorder_True</a></p>\n\
          <p>When I run it with TGI I get: </p>\n<pre><code>huggingface_hub.utils._validators.HFValidationError:\
          \ Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are\
          \ forbidden, '-' and '.' cannot start or end the name, max length is 96:\
          \ 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\n</code></pre>\n\
          <p>I've tested in TGI v1.1.1 and the latest version, v1.3.4, so I'm guessing\
          \ this isn't due to a recent change in requirements.</p>\n<p>Full error:</p>\n\
          <pre><code>2024-01-04T11:50:01.191601230Z 2024-01-04T11:50:01.191458Z  INFO\
          \ text_generation_launcher: Args { model_id: \"TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True\"\
          , revision: None, validation_workers: 2, sharded: None, num_shard: None,\
          \ quantize: Some(Gptq), dtype: None, trust_remote_code: false, max_concurrent_requests:\
          \ 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length:\
          \ 1024, max_total_tokens: 4096, waiting_served_ratio: 1.2, max_batch_prefill_tokens:\
          \ 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname:\
          \ \"75538cdede3a\", port: 3000, shard_uds_path: \"/tmp/text-generation-server\"\
          , master_addr: \"localhost\", master_port: 29500, huggingface_hub_cache:\
          \ Some(\"/data\"), weights_cache_override: None, disable_custom_kernels:\
          \ false, cuda_memory_fraction: 1.0, rope_scaling: None, rope_factor: None,\
          \ json_output: false, otlp_endpoint: None, cors_allow_origin: [], watermark_gamma:\
          \ None, watermark_delta: None, ngrok: false, ngrok_authtoken: None, ngrok_edge:\
          \ None, env: false }\n2024-01-04T11:50:01.191631687Z 2024-01-04T11:50:01.191485Z\
          \  INFO text_generation_launcher: Sharding model on 2 processes\n2024-01-04T11:50:01.191635594Z\
          \ 2024-01-04T11:50:01.191549Z  INFO download: text_generation_launcher:\
          \ Starting download process.\n2024-01-04T11:50:03.643908063Z 2024-01-04T11:50:03.643633Z\
          \ ERROR download: text_generation_launcher: Download encountered an error:\
          \ Traceback (most recent call last):\n2024-01-04T11:50:03.643941646Z \n\
          2024-01-04T11:50:03.643945183Z   File \"/opt/conda/bin/text-generation-server\"\
          , line 8, in &lt;module&gt;\n2024-01-04T11:50:03.643948229Z     sys.exit(app())\n\
          2024-01-04T11:50:03.643950924Z \n2024-01-04T11:50:03.643953038Z   File \"\
          /opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\",\
          \ line 115, in download_weights\n2024-01-04T11:50:03.643955933Z     utils.weight_files(model_id,\
          \ revision, extension)\n2024-01-04T11:50:03.643958278Z \n2024-01-04T11:50:03.643960281Z\
          \   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 96, in weight_files\n2024-01-04T11:50:03.643962425Z     filenames\
          \ = weight_hub_files(model_id, revision, extension)\n2024-01-04T11:50:03.643964541Z\
          \ \n2024-01-04T11:50:03.643966524Z   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 25, in weight_hub_files\n2024-01-04T11:50:03.643968689Z     info\
          \ = api.model_info(model_id, revision=revision)\n2024-01-04T11:50:03.643970712Z\
          \ \n2024-01-04T11:50:03.643972716Z   File \"/opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
          , line 110, in _inner_fn\n2024-01-04T11:50:03.643975101Z     validate_repo_id(arg_value)\n\
          2024-01-04T11:50:03.643977445Z \n2024-01-04T11:50:03.643979398Z   File \"\
          /opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
          , line 164, in validate_repo_id\n2024-01-04T11:50:03.643981502Z     raise\
          \ HFValidationError(\n2024-01-04T11:50:03.643983606Z \n2024-01-04T11:50:03.643985720Z\
          \ huggingface_hub.utils._validators.HFValidationError: Repo id must use\
          \ alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-'\
          \ and '.' cannot start or end the name, max length is 96: 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\n\
          2024-01-04T11:50:03.643987854Z \n2024-01-04T11:50:03.643989828Z \n2024-01-04T11:50:03.644028811Z\
          \ Error: DownloadError\n</code></pre>\n"
        raw: "Regarding this branch: https://huggingface.co/TheBloke/goliath-120b-GPTQ/tree/gptq-3bit--1g-actorder_True\r\
          \n\r\nWhen I run it with TGI I get: \r\n\r\n```\r\nhuggingface_hub.utils._validators.HFValidationError:\
          \ Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are\
          \ forbidden, '-' and '.' cannot start or end the name, max length is 96:\
          \ 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\r\n```\r\n\r\
          \nI've tested in TGI v1.1.1 and the latest version, v1.3.4, so I'm guessing\
          \ this isn't due to a recent change in requirements.\r\n\r\nFull error:\r\
          \n```\r\n2024-01-04T11:50:01.191601230Z 2024-01-04T11:50:01.191458Z  INFO\
          \ text_generation_launcher: Args { model_id: \"TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True\"\
          , revision: None, validation_workers: 2, sharded: None, num_shard: None,\
          \ quantize: Some(Gptq), dtype: None, trust_remote_code: false, max_concurrent_requests:\
          \ 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length:\
          \ 1024, max_total_tokens: 4096, waiting_served_ratio: 1.2, max_batch_prefill_tokens:\
          \ 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname:\
          \ \"75538cdede3a\", port: 3000, shard_uds_path: \"/tmp/text-generation-server\"\
          , master_addr: \"localhost\", master_port: 29500, huggingface_hub_cache:\
          \ Some(\"/data\"), weights_cache_override: None, disable_custom_kernels:\
          \ false, cuda_memory_fraction: 1.0, rope_scaling: None, rope_factor: None,\
          \ json_output: false, otlp_endpoint: None, cors_allow_origin: [], watermark_gamma:\
          \ None, watermark_delta: None, ngrok: false, ngrok_authtoken: None, ngrok_edge:\
          \ None, env: false }\r\n2024-01-04T11:50:01.191631687Z 2024-01-04T11:50:01.191485Z\
          \  INFO text_generation_launcher: Sharding model on 2 processes\r\n2024-01-04T11:50:01.191635594Z\
          \ 2024-01-04T11:50:01.191549Z  INFO download: text_generation_launcher:\
          \ Starting download process.\r\n2024-01-04T11:50:03.643908063Z 2024-01-04T11:50:03.643633Z\
          \ ERROR download: text_generation_launcher: Download encountered an error:\
          \ Traceback (most recent call last):\r\n2024-01-04T11:50:03.643941646Z \r\
          \n2024-01-04T11:50:03.643945183Z   File \"/opt/conda/bin/text-generation-server\"\
          , line 8, in <module>\r\n2024-01-04T11:50:03.643948229Z     sys.exit(app())\r\
          \n2024-01-04T11:50:03.643950924Z \r\n2024-01-04T11:50:03.643953038Z   File\
          \ \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
          , line 115, in download_weights\r\n2024-01-04T11:50:03.643955933Z     utils.weight_files(model_id,\
          \ revision, extension)\r\n2024-01-04T11:50:03.643958278Z \r\n2024-01-04T11:50:03.643960281Z\
          \   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 96, in weight_files\r\n2024-01-04T11:50:03.643962425Z     filenames\
          \ = weight_hub_files(model_id, revision, extension)\r\n2024-01-04T11:50:03.643964541Z\
          \ \r\n2024-01-04T11:50:03.643966524Z   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 25, in weight_hub_files\r\n2024-01-04T11:50:03.643968689Z     info\
          \ = api.model_info(model_id, revision=revision)\r\n2024-01-04T11:50:03.643970712Z\
          \ \r\n2024-01-04T11:50:03.643972716Z   File \"/opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
          , line 110, in _inner_fn\r\n2024-01-04T11:50:03.643975101Z     validate_repo_id(arg_value)\r\
          \n2024-01-04T11:50:03.643977445Z \r\n2024-01-04T11:50:03.643979398Z   File\
          \ \"/opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
          , line 164, in validate_repo_id\r\n2024-01-04T11:50:03.643981502Z     raise\
          \ HFValidationError(\r\n2024-01-04T11:50:03.643983606Z \r\n2024-01-04T11:50:03.643985720Z\
          \ huggingface_hub.utils._validators.HFValidationError: Repo id must use\
          \ alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden, '-'\
          \ and '.' cannot start or end the name, max length is 96: 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\r\
          \n2024-01-04T11:50:03.643987854Z \r\n2024-01-04T11:50:03.643989828Z \r\n\
          2024-01-04T11:50:03.644028811Z Error: DownloadError\r\n```"
        updatedAt: '2024-01-04T11:58:13.715Z'
      numEdits: 0
      reactions: []
    id: 65969d5572376a9c31ba67ac
    type: comment
  author: rocca
  content: "Regarding this branch: https://huggingface.co/TheBloke/goliath-120b-GPTQ/tree/gptq-3bit--1g-actorder_True\r\
    \n\r\nWhen I run it with TGI I get: \r\n\r\n```\r\nhuggingface_hub.utils._validators.HFValidationError:\
    \ Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden,\
    \ '-' and '.' cannot start or end the name, max length is 96: 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\r\
    \n```\r\n\r\nI've tested in TGI v1.1.1 and the latest version, v1.3.4, so I'm\
    \ guessing this isn't due to a recent change in requirements.\r\n\r\nFull error:\r\
    \n```\r\n2024-01-04T11:50:01.191601230Z 2024-01-04T11:50:01.191458Z  INFO text_generation_launcher:\
    \ Args { model_id: \"TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True\"\
    , revision: None, validation_workers: 2, sharded: None, num_shard: None, quantize:\
    \ Some(Gptq), dtype: None, trust_remote_code: false, max_concurrent_requests:\
    \ 128, max_best_of: 2, max_stop_sequences: 4, max_top_n_tokens: 5, max_input_length:\
    \ 1024, max_total_tokens: 4096, waiting_served_ratio: 1.2, max_batch_prefill_tokens:\
    \ 4096, max_batch_total_tokens: None, max_waiting_tokens: 20, hostname: \"75538cdede3a\"\
    , port: 3000, shard_uds_path: \"/tmp/text-generation-server\", master_addr: \"\
    localhost\", master_port: 29500, huggingface_hub_cache: Some(\"/data\"), weights_cache_override:\
    \ None, disable_custom_kernels: false, cuda_memory_fraction: 1.0, rope_scaling:\
    \ None, rope_factor: None, json_output: false, otlp_endpoint: None, cors_allow_origin:\
    \ [], watermark_gamma: None, watermark_delta: None, ngrok: false, ngrok_authtoken:\
    \ None, ngrok_edge: None, env: false }\r\n2024-01-04T11:50:01.191631687Z 2024-01-04T11:50:01.191485Z\
    \  INFO text_generation_launcher: Sharding model on 2 processes\r\n2024-01-04T11:50:01.191635594Z\
    \ 2024-01-04T11:50:01.191549Z  INFO download: text_generation_launcher: Starting\
    \ download process.\r\n2024-01-04T11:50:03.643908063Z 2024-01-04T11:50:03.643633Z\
    \ ERROR download: text_generation_launcher: Download encountered an error: Traceback\
    \ (most recent call last):\r\n2024-01-04T11:50:03.643941646Z \r\n2024-01-04T11:50:03.643945183Z\
    \   File \"/opt/conda/bin/text-generation-server\", line 8, in <module>\r\n2024-01-04T11:50:03.643948229Z\
    \     sys.exit(app())\r\n2024-01-04T11:50:03.643950924Z \r\n2024-01-04T11:50:03.643953038Z\
    \   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
    , line 115, in download_weights\r\n2024-01-04T11:50:03.643955933Z     utils.weight_files(model_id,\
    \ revision, extension)\r\n2024-01-04T11:50:03.643958278Z \r\n2024-01-04T11:50:03.643960281Z\
    \   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 96, in weight_files\r\n2024-01-04T11:50:03.643962425Z     filenames = weight_hub_files(model_id,\
    \ revision, extension)\r\n2024-01-04T11:50:03.643964541Z \r\n2024-01-04T11:50:03.643966524Z\
    \   File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 25, in weight_hub_files\r\n2024-01-04T11:50:03.643968689Z     info = api.model_info(model_id,\
    \ revision=revision)\r\n2024-01-04T11:50:03.643970712Z \r\n2024-01-04T11:50:03.643972716Z\
    \   File \"/opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
    , line 110, in _inner_fn\r\n2024-01-04T11:50:03.643975101Z     validate_repo_id(arg_value)\r\
    \n2024-01-04T11:50:03.643977445Z \r\n2024-01-04T11:50:03.643979398Z   File \"\
    /opt/conda/lib/python3.9/site-packages/huggingface_hub/utils/_validators.py\"\
    , line 164, in validate_repo_id\r\n2024-01-04T11:50:03.643981502Z     raise HFValidationError(\r\
    \n2024-01-04T11:50:03.643983606Z \r\n2024-01-04T11:50:03.643985720Z huggingface_hub.utils._validators.HFValidationError:\
    \ Repo id must use alphanumeric chars or '-', '_', '.', '--' and '..' are forbidden,\
    \ '-' and '.' cannot start or end the name, max length is 96: 'TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True'.\r\
    \n2024-01-04T11:50:03.643987854Z \r\n2024-01-04T11:50:03.643989828Z \r\n2024-01-04T11:50:03.644028811Z\
    \ Error: DownloadError\r\n```"
  created_at: 2024-01-04 11:58:13+00:00
  edited: false
  hidden: false
  id: 65969d5572376a9c31ba67ac
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8213f0ffc9106d7663c4b5f29f4ec9e5.svg
      fullname: Joe Rocca
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rocca
      type: user
    createdAt: '2024-01-04T14:08:16.000Z'
    data:
      edited: true
      editors:
      - rocca
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4316796660423279
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8213f0ffc9106d7663c4b5f29f4ec9e5.svg
          fullname: Joe Rocca
          isHf: false
          isPro: false
          name: rocca
          type: user
        html: '<p>Oh, woops, I had this:</p>

          <pre><code>--model-id TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True

          </code></pre>

          <p>instead of this:</p>

          <pre><code>--model-id TheBloke/goliath-120b-GPTQ --revision gptq-3bit--1g-actorder_True

          </code></pre>

          <p>So double-hyphens <em>are</em> allowed in the branch name, but the branch
          name must be specified in the <code>revision</code> param, not at the end
          of the <code>model-id</code> param.</p>

          <p>Sorry for the notification!</p>

          '
        raw: 'Oh, woops, I had this:

          ```

          --model-id TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True

          ```

          instead of this:

          ```

          --model-id TheBloke/goliath-120b-GPTQ --revision gptq-3bit--1g-actorder_True

          ```

          So double-hyphens *are* allowed in the branch name, but the branch name
          must be specified in the `revision` param, not at the end of the `model-id`
          param.


          Sorry for the notification!'
        updatedAt: '2024-01-04T14:09:25.091Z'
      numEdits: 1
      reactions: []
      relatedEventId: 6596bbd0ddf1d7f9d29411cd
    id: 6596bbd0ddf1d7f9d29411cc
    type: comment
  author: rocca
  content: 'Oh, woops, I had this:

    ```

    --model-id TheBloke/goliath-120b-GPTQ:gptq-3bit--1g-actorder_True

    ```

    instead of this:

    ```

    --model-id TheBloke/goliath-120b-GPTQ --revision gptq-3bit--1g-actorder_True

    ```

    So double-hyphens *are* allowed in the branch name, but the branch name must be
    specified in the `revision` param, not at the end of the `model-id` param.


    Sorry for the notification!'
  created_at: 2024-01-04 14:08:16+00:00
  edited: true
  hidden: false
  id: 6596bbd0ddf1d7f9d29411cc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/8213f0ffc9106d7663c4b5f29f4ec9e5.svg
      fullname: Joe Rocca
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rocca
      type: user
    createdAt: '2024-01-04T14:08:16.000Z'
    data:
      status: closed
    id: 6596bbd0ddf1d7f9d29411cd
    type: status-change
  author: rocca
  created_at: 2024-01-04 14:08:16+00:00
  id: 6596bbd0ddf1d7f9d29411cd
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: TheBloke/goliath-120b-GPTQ
repo_type: model
status: closed
target_branch: null
title: Double-hyphen in "gptq-3bit--1g-actorder_True" branch name is invalid according
  to TGI
