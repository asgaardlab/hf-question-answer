!!python/object:huggingface_hub.community.DiscussionWithDetails
author: TimVan1
conflicting_files: null
created_at: 2023-08-10 01:59:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646ad67431fbfc5df81fc589/-jAX5SLrSU7plc5ytmD27.png?w=200&h=200&f=face
      fullname: TimVan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: TimVan1
      type: user
    createdAt: '2023-08-10T02:59:24.000Z'
    data:
      edited: false
      editors:
      - TimVan1
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.6617804765701294
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646ad67431fbfc5df81fc589/-jAX5SLrSU7plc5ytmD27.png?w=200&h=200&f=face
          fullname: TimVan
          isHf: false
          isPro: false
          name: TimVan1
          type: user
        html: "<p> \u4E3B\u9875\u7684Hosted inference API \u8865\u5145</p>\n"
        raw: " \u4E3B\u9875\u7684Hosted inference API \u8865\u5145"
        updatedAt: '2023-08-10T02:59:24.442Z'
      numEdits: 0
      reactions: []
    id: 64d4528cf63b01b7f67c83fc
    type: comment
  author: TimVan1
  content: " \u4E3B\u9875\u7684Hosted inference API \u8865\u5145"
  created_at: 2023-08-10 01:59:24+00:00
  edited: false
  hidden: false
  id: 64d4528cf63b01b7f67c83fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646ad67431fbfc5df81fc589/-jAX5SLrSU7plc5ytmD27.png?w=200&h=200&f=face
      fullname: TimVan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: TimVan1
      type: user
    createdAt: '2023-09-12T01:56:31.000Z'
    data:
      edited: false
      editors:
      - TimVan1
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3183300793170929
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646ad67431fbfc5df81fc589/-jAX5SLrSU7plc5ytmD27.png?w=200&h=200&f=face
          fullname: TimVan
          isHf: false
          isPro: false
          name: TimVan1
          type: user
        html: "<pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span>\
          \ requests\n<span class=\"hljs-keyword\">from</span> flask <span class=\"\
          hljs-keyword\">import</span> Flask, request, jsonify\n\napp = Flask(__name__)\n\
          app.config.from_pyfile(<span class=\"hljs-string\">'config.py'</span>)\n\
          PROMPT_DICT = app.config[<span class=\"hljs-string\">\"PROMPT_DICT\"</span>]\n\
          \nAPI_URL = <span class=\"hljs-string\">\"https://api-inference.huggingface.co/models/funstoryai/immersiveL-exp\"\
          </span>\nheaders = {<span class=\"hljs-string\">\"Authorization\"</span>:\
          \ <span class=\"hljs-string\">\"Bearer hf_YOUR_TOKEN\"</span>}\n\n<span\
          \ class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\"\
          >query</span>(<span class=\"hljs-params\">prompt</span>):\n    payload =\
          \ {\n        <span class=\"hljs-string\">\"inputs\"</span>: prompt,\n  \
          \      <span class=\"hljs-string\">\"parameters\"</span>: {<span class=\"\
          hljs-string\">\"do_sample\"</span>: <span class=\"hljs-literal\">False</span>,\n\
          \                 \t\t<span class=\"hljs-string\">\"max_length\"</span>:\
          \ <span class=\"hljs-number\">500</span>,\n                 \t\t<span class=\"\
          hljs-string\">\"repetition_penalty\"</span>: <span class=\"hljs-number\"\
          >1.4</span>,\n                        <span class=\"hljs-string\">\"temperature\"\
          </span>:<span class=\"hljs-number\">0</span>},\n\n    }\n    \n    response\
          \ = requests.post(API_URL, headers=headers, json=payload)\n    <span class=\"\
          hljs-keyword\">return</span> response.json()\n\ntext=<span class=\"hljs-string\"\
          >\"\u8FD9\u662F\u4E00\u4E2A\u6D4B\u8BD5\u53E5\u5B50\"</span>\ntask = <span\
          \ class=\"hljs-string\">'zh2en'</span>\nprompt = generate_input_prompt(text,\
          \ task)\n\noutput = query(prompt)\n</code></pre>\n"
        raw: "```python\nimport requests\nfrom flask import Flask, request, jsonify\n\
          \napp = Flask(__name__)\napp.config.from_pyfile('config.py')\nPROMPT_DICT\
          \ = app.config[\"PROMPT_DICT\"]\n\nAPI_URL = \"https://api-inference.huggingface.co/models/funstoryai/immersiveL-exp\"\
          \nheaders = {\"Authorization\": \"Bearer hf_YOUR_TOKEN\"}\n\ndef query(prompt):\n\
          \tpayload = {\n\t\t\"inputs\": prompt,\n\t\t\"parameters\": {\"do_sample\"\
          : False,\n\t\t\t\t \t\t\"max_length\": 500,\n\t\t\t\t \t\t\"repetition_penalty\"\
          : 1.4,\n\t\t\t\t\t\t\"temperature\":0},\n\n\t}\n\t\n\tresponse = requests.post(API_URL,\
          \ headers=headers, json=payload)\n\treturn response.json()\n\ntext=\"\u8FD9\
          \u662F\u4E00\u4E2A\u6D4B\u8BD5\u53E5\u5B50\"\ntask = 'zh2en'\nprompt = generate_input_prompt(text,\
          \ task)\n\noutput = query(prompt)\n```"
        updatedAt: '2023-09-12T01:56:31.566Z'
      numEdits: 0
      reactions: []
    id: 64ffc54f96c544b3a6d7faf1
    type: comment
  author: TimVan1
  content: "```python\nimport requests\nfrom flask import Flask, request, jsonify\n\
    \napp = Flask(__name__)\napp.config.from_pyfile('config.py')\nPROMPT_DICT = app.config[\"\
    PROMPT_DICT\"]\n\nAPI_URL = \"https://api-inference.huggingface.co/models/funstoryai/immersiveL-exp\"\
    \nheaders = {\"Authorization\": \"Bearer hf_YOUR_TOKEN\"}\n\ndef query(prompt):\n\
    \tpayload = {\n\t\t\"inputs\": prompt,\n\t\t\"parameters\": {\"do_sample\": False,\n\
    \t\t\t\t \t\t\"max_length\": 500,\n\t\t\t\t \t\t\"repetition_penalty\": 1.4,\n\
    \t\t\t\t\t\t\"temperature\":0},\n\n\t}\n\t\n\tresponse = requests.post(API_URL,\
    \ headers=headers, json=payload)\n\treturn response.json()\n\ntext=\"\u8FD9\u662F\
    \u4E00\u4E2A\u6D4B\u8BD5\u53E5\u5B50\"\ntask = 'zh2en'\nprompt = generate_input_prompt(text,\
    \ task)\n\noutput = query(prompt)\n```"
  created_at: 2023-09-12 00:56:31+00:00
  edited: false
  hidden: false
  id: 64ffc54f96c544b3a6d7faf1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646ad67431fbfc5df81fc589/-jAX5SLrSU7plc5ytmD27.png?w=200&h=200&f=face
      fullname: TimVan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: TimVan1
      type: user
    createdAt: '2023-09-12T01:56:45.000Z'
    data:
      status: closed
    id: 64ffc55d7aa4d88f206162e2
    type: status-change
  author: TimVan1
  created_at: 2023-09-12 00:56:45+00:00
  id: 64ffc55d7aa4d88f206162e2
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 8
repo_id: funstoryai/immersiveL-exp
repo_type: model
status: closed
target_branch: null
title: " Hosted inference API \u8865\u5145"
