!!python/object:huggingface_hub.community.DiscussionWithDetails
author: LittleGreen
conflicting_files: null
created_at: 2023-10-25 04:56:31+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ca0dba064df511e347d19dde0918ec15.svg
      fullname: Yuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LittleGreen
      type: user
    createdAt: '2023-10-25T05:56:31.000Z'
    data:
      edited: false
      editors:
      - LittleGreen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.675683319568634
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ca0dba064df511e347d19dde0918ec15.svg
          fullname: Yuan
          isHf: false
          isPro: false
          name: LittleGreen
          type: user
        html: '<p>GPU device used is: A800 (80G)<br>Memory size is: 64G<br>But the
          following error log appears during the loading of the model:<br>''''''<br>[2023-10-25
          09:14:47,988] [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator
          to cuda (auto detect)<br>[2023-10-25 09:14:50,747] [INFO] building CogVLMModel
          model ...<br>[2023-10-25 09:14:50,749] [INFO] [RANK 0] &gt; initializing
          model parallel with size 1<br>[2023-10-25 09:14:50,750] [INFO] [RANK 0]
          You are using model-only mode.<br>For torch.distributed users or loading
          model parallel models, set environment variables RANK, WORLD_SIZE and LOCAL_RANK.<br>[2023-10-25
          09:15:05,366] [INFO] [RANK 0]  &gt; number of parameters on model parallel
          rank 0: 17639685376<br>[2023-10-25 09:15:11,894] [INFO] [RANK 0] global
          rank 0 is loading checkpoint /home/user/CogVLM/main/CogVLM-main/cogvlm-chat/1/mp_rank_00_model_states.pt<br>Killed<br>''''''<br>How
          should this situation be handled?</p>

          '
        raw: "GPU device used is: A800 (80G)\r\nMemory size is: 64G\r\nBut the following\
          \ error log appears during the loading of the model:\r\n'''\r\n[2023-10-25\
          \ 09:14:47,988] [INFO] [real_accelerator.py:158:get_accelerator] Setting\
          \ ds_accelerator to cuda (auto detect)\r\n[2023-10-25 09:14:50,747] [INFO]\
          \ building CogVLMModel model ...\r\n[2023-10-25 09:14:50,749] [INFO] [RANK\
          \ 0] > initializing model parallel with size 1\r\n[2023-10-25 09:14:50,750]\
          \ [INFO] [RANK 0] You are using model-only mode.\r\nFor torch.distributed\
          \ users or loading model parallel models, set environment variables RANK,\
          \ WORLD_SIZE and LOCAL_RANK.\r\n[2023-10-25 09:15:05,366] [INFO] [RANK 0]\
          \  > number of parameters on model parallel rank 0: 17639685376\r\n[2023-10-25\
          \ 09:15:11,894] [INFO] [RANK 0] global rank 0 is loading checkpoint /home/user/CogVLM/main/CogVLM-main/cogvlm-chat/1/mp_rank_00_model_states.pt\r\
          \nKilled\r\n'''\r\nHow should this situation be handled?"
        updatedAt: '2023-10-25T05:56:31.170Z'
      numEdits: 0
      reactions: []
    id: 6538ae0fa5ab055cf2dc5eb1
    type: comment
  author: LittleGreen
  content: "GPU device used is: A800 (80G)\r\nMemory size is: 64G\r\nBut the following\
    \ error log appears during the loading of the model:\r\n'''\r\n[2023-10-25 09:14:47,988]\
    \ [INFO] [real_accelerator.py:158:get_accelerator] Setting ds_accelerator to cuda\
    \ (auto detect)\r\n[2023-10-25 09:14:50,747] [INFO] building CogVLMModel model\
    \ ...\r\n[2023-10-25 09:14:50,749] [INFO] [RANK 0] > initializing model parallel\
    \ with size 1\r\n[2023-10-25 09:14:50,750] [INFO] [RANK 0] You are using model-only\
    \ mode.\r\nFor torch.distributed users or loading model parallel models, set environment\
    \ variables RANK, WORLD_SIZE and LOCAL_RANK.\r\n[2023-10-25 09:15:05,366] [INFO]\
    \ [RANK 0]  > number of parameters on model parallel rank 0: 17639685376\r\n[2023-10-25\
    \ 09:15:11,894] [INFO] [RANK 0] global rank 0 is loading checkpoint /home/user/CogVLM/main/CogVLM-main/cogvlm-chat/1/mp_rank_00_model_states.pt\r\
    \nKilled\r\n'''\r\nHow should this situation be handled?"
  created_at: 2023-10-25 04:56:31+00:00
  edited: false
  hidden: false
  id: 6538ae0fa5ab055cf2dc5eb1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f8ed016c6d496e6205f60b3e26ea4586.svg
      fullname: Yoyo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: YoYo1234Qwerty
      type: user
    createdAt: '2023-10-26T22:03:29.000Z'
    data:
      edited: false
      editors:
      - YoYo1234Qwerty
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6680387854576111
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f8ed016c6d496e6205f60b3e26ea4586.svg
          fullname: Yoyo
          isHf: false
          isPro: false
          name: YoYo1234Qwerty
          type: user
        html: '<p>Sounds like OOM. </p>

          '
        raw: 'Sounds like OOM. '
        updatedAt: '2023-10-26T22:03:29.649Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - LittleGreen
    id: 653ae2318f8d60f2047a8f53
    type: comment
  author: YoYo1234Qwerty
  content: 'Sounds like OOM. '
  created_at: 2023-10-26 21:03:29+00:00
  edited: false
  hidden: false
  id: 653ae2318f8d60f2047a8f53
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ca0dba064df511e347d19dde0918ec15.svg
      fullname: Yuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LittleGreen
      type: user
    createdAt: '2023-10-27T06:46:39.000Z'
    data:
      edited: false
      editors:
      - LittleGreen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9721888899803162
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ca0dba064df511e347d19dde0918ec15.svg
          fullname: Yuan
          isHf: false
          isPro: false
          name: LittleGreen
          type: user
        html: '<p>Based on the troubleshooting, OOM did occur</p>

          '
        raw: Based on the troubleshooting, OOM did occur
        updatedAt: '2023-10-27T06:46:39.920Z'
      numEdits: 0
      reactions: []
      relatedEventId: 653b5ccfc75dc136bfd69a00
    id: 653b5ccfc75dc136bfd699ff
    type: comment
  author: LittleGreen
  content: Based on the troubleshooting, OOM did occur
  created_at: 2023-10-27 05:46:39+00:00
  edited: false
  hidden: false
  id: 653b5ccfc75dc136bfd699ff
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/ca0dba064df511e347d19dde0918ec15.svg
      fullname: Yuan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LittleGreen
      type: user
    createdAt: '2023-10-27T06:46:39.000Z'
    data:
      status: closed
    id: 653b5ccfc75dc136bfd69a00
    type: status-change
  author: LittleGreen
  created_at: 2023-10-27 05:46:39+00:00
  id: 653b5ccfc75dc136bfd69a00
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: THUDM/CogVLM
repo_type: model
status: closed
target_branch: null
title: "Errors in loading models\uFF08error\uFF1AKilled\uFF09"
