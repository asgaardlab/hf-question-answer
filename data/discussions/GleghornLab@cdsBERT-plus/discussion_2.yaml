!!python/object:huggingface_hub.community.DiscussionWithDetails
author: aashutoshb97
conflicting_files: null
created_at: 2023-09-29 13:48:00+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6aa998d4ac4f9a22beef6b16fbfcb379.svg
      fullname: Aashutosh Boob
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aashutoshb97
      type: user
    createdAt: '2023-09-29T14:48:00.000Z'
    data:
      edited: false
      editors:
      - aashutoshb97
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7038395404815674
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6aa998d4ac4f9a22beef6b16fbfcb379.svg
          fullname: Aashutosh Boob
          isHf: false
          isPro: false
          name: aashutoshb97
          type: user
        html: '<p>Hi,<br>I am trying to run cdsBERT using the provided code. When
          loading the model either using CPU or GPU, I am getting some warnings about
          the weights not loaded from checkpoint. Is this normal behavior? I also
          get an AttributeError (see below). </p>

          <p>2023-09-25 16:40:21.633712: I tensorflow/core/platform/cpu_feature_guard.cc:182]
          This TensorFlow binary is optimized to use available CPU instructions in
          performance-critical operations.<br>To enable the following instructions:
          AVX2 FMA, in other operations, rebuild TensorFlow with the appropriate compiler
          flags.<br>2023-09-25 16:40:40.924721: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38]
          TF-TRT Warning: Could not find TensorRT<br>Some weights of BertForMaskedLM
          were not initialized from the model checkpoint at lhallee/cdsBERT and are
          newly initialized: [''cls.predictions.transform.LayerNorm.weight'', ''cls.predictions.transform.LayerNorm.bias'',
          ''cls.predictions.transform.dense.weight'', ''cls.predictions.decoder.bias'',
          ''cls.predictions.transform.dense.bias'', ''cls.predictions.bias'']<br>You
          should probably TRAIN this model on a down-stream task to be able to use
          it for predictions and inference.<br>Traceback (most recent call last):<br>  File
          "../scripts/test.py", line 52, in <br>    matrix_embedding = model(**example).last_hidden_state.cpu()<br>AttributeError:
          ''MaskedLMOutput'' object has no attribute ''last_hidden_state''</p>

          '
        raw: "Hi, \r\nI am trying to run cdsBERT using the provided code. When loading\
          \ the model either using CPU or GPU, I am getting some warnings about the\
          \ weights not loaded from checkpoint. Is this normal behavior? I also get\
          \ an AttributeError (see below). \r\n\r\n2023-09-25 16:40:21.633712: I tensorflow/core/platform/cpu_feature_guard.cc:182]\
          \ This TensorFlow binary is optimized to use available CPU instructions\
          \ in performance-critical operations.\r\nTo enable the following instructions:\
          \ AVX2 FMA, in other operations, rebuild TensorFlow with the appropriate\
          \ compiler flags.\r\n2023-09-25 16:40:40.924721: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38]\
          \ TF-TRT Warning: Could not find TensorRT\r\nSome weights of BertForMaskedLM\
          \ were not initialized from the model checkpoint at lhallee/cdsBERT and\
          \ are newly initialized: ['cls.predictions.transform.LayerNorm.weight',\
          \ 'cls.predictions.transform.LayerNorm.bias', 'cls.predictions.transform.dense.weight',\
          \ 'cls.predictions.decoder.bias', 'cls.predictions.transform.dense.bias',\
          \ 'cls.predictions.bias']\r\nYou should probably TRAIN this model on a down-stream\
          \ task to be able to use it for predictions and inference.\r\nTraceback\
          \ (most recent call last):\r\n  File \"../scripts/test.py\", line 52, in\
          \ <module>\r\n    matrix_embedding = model(**example).last_hidden_state.cpu()\r\
          \nAttributeError: 'MaskedLMOutput' object has no attribute 'last_hidden_state'"
        updatedAt: '2023-09-29T14:48:00.380Z'
      numEdits: 0
      reactions: []
    id: 6516e3a0b447213cb5f93231
    type: comment
  author: aashutoshb97
  content: "Hi, \r\nI am trying to run cdsBERT using the provided code. When loading\
    \ the model either using CPU or GPU, I am getting some warnings about the weights\
    \ not loaded from checkpoint. Is this normal behavior? I also get an AttributeError\
    \ (see below). \r\n\r\n2023-09-25 16:40:21.633712: I tensorflow/core/platform/cpu_feature_guard.cc:182]\
    \ This TensorFlow binary is optimized to use available CPU instructions in performance-critical\
    \ operations.\r\nTo enable the following instructions: AVX2 FMA, in other operations,\
    \ rebuild TensorFlow with the appropriate compiler flags.\r\n2023-09-25 16:40:40.924721:\
    \ W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning: Could\
    \ not find TensorRT\r\nSome weights of BertForMaskedLM were not initialized from\
    \ the model checkpoint at lhallee/cdsBERT and are newly initialized: ['cls.predictions.transform.LayerNorm.weight',\
    \ 'cls.predictions.transform.LayerNorm.bias', 'cls.predictions.transform.dense.weight',\
    \ 'cls.predictions.decoder.bias', 'cls.predictions.transform.dense.bias', 'cls.predictions.bias']\r\
    \nYou should probably TRAIN this model on a down-stream task to be able to use\
    \ it for predictions and inference.\r\nTraceback (most recent call last):\r\n\
    \  File \"../scripts/test.py\", line 52, in <module>\r\n    matrix_embedding =\
    \ model(**example).last_hidden_state.cpu()\r\nAttributeError: 'MaskedLMOutput'\
    \ object has no attribute 'last_hidden_state'"
  created_at: 2023-09-29 13:48:00+00:00
  edited: false
  hidden: false
  id: 6516e3a0b447213cb5f93231
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62f2bd3bdb7cbd214b658c48/PyfUpBnNg4B3BWhgNQsYo.jpeg?w=200&h=200&f=face
      fullname: Logan Hallee
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: lhallee
      type: user
    createdAt: '2023-09-29T15:58:19.000Z'
    data:
      edited: true
      editors:
      - lhallee
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9124695658683777
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62f2bd3bdb7cbd214b658c48/PyfUpBnNg4B3BWhgNQsYo.jpeg?w=200&h=200&f=face
          fullname: Logan Hallee
          isHf: false
          isPro: true
          name: lhallee
          type: user
        html: '<p>Hello! This is the feature extraction checkpoint. So use BertModel
          instead of BertForMaskedLM. I updated the documentation and uploaded the
          MLM checkpoint. Please see our preprint and/or the model cards for the difference
          between the checkpoints. Let me know if there are any other issues!</p>

          '
        raw: Hello! This is the feature extraction checkpoint. So use BertModel instead
          of BertForMaskedLM. I updated the documentation and uploaded the MLM checkpoint.
          Please see our preprint and/or the model cards for the difference between
          the checkpoints. Let me know if there are any other issues!
        updatedAt: '2023-09-29T16:17:34.654Z'
      numEdits: 2
      reactions: []
    id: 6516f41b8e0251f2a44cc631
    type: comment
  author: lhallee
  content: Hello! This is the feature extraction checkpoint. So use BertModel instead
    of BertForMaskedLM. I updated the documentation and uploaded the MLM checkpoint.
    Please see our preprint and/or the model cards for the difference between the
    checkpoints. Let me know if there are any other issues!
  created_at: 2023-09-29 14:58:19+00:00
  edited: true
  hidden: false
  id: 6516f41b8e0251f2a44cc631
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6aa998d4ac4f9a22beef6b16fbfcb379.svg
      fullname: Aashutosh Boob
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aashutoshb97
      type: user
    createdAt: '2023-09-29T16:28:29.000Z'
    data:
      edited: false
      editors:
      - aashutoshb97
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8596094846725464
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6aa998d4ac4f9a22beef6b16fbfcb379.svg
          fullname: Aashutosh Boob
          isHf: false
          isPro: false
          name: aashutoshb97
          type: user
        html: '<p>Hi,<br>Thank you for the suggestion. I updated BertForMaskedLM to
          BertModel. I can get the features now. I do get this following warning:
          </p>

          <p>To enable the following instructions: AVX2 FMA, in other operations,
          rebuild TensorFlow with the appropriate compiler flags.<br>2023-09-29 11:25:37.062213:
          W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38] TF-TRT Warning:
          Could not find TensorRT<br>Some weights of BertModel were not initialized
          from the model checkpoint at lhallee/cdsBERT and are newly initialized:
          [''bert.pooler.dense.weight'', ''bert.pooler.dense.bias'']<br>You should
          probably TRAIN this model on a down-stream task to be able to use it for
          predictions and inference.</p>

          <p>I would be grateful if you could let me know this is normal. </p>

          '
        raw: "Hi,\nThank you for the suggestion. I updated BertForMaskedLM to BertModel.\
          \ I can get the features now. I do get this following warning: \n\nTo enable\
          \ the following instructions: AVX2 FMA, in other operations, rebuild TensorFlow\
          \ with the appropriate compiler flags.\n2023-09-29 11:25:37.062213: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38]\
          \ TF-TRT Warning: Could not find TensorRT\nSome weights of BertModel were\
          \ not initialized from the model checkpoint at lhallee/cdsBERT and are newly\
          \ initialized: ['bert.pooler.dense.weight', 'bert.pooler.dense.bias']\n\
          You should probably TRAIN this model on a down-stream task to be able to\
          \ use it for predictions and inference.\n\nI would be grateful if you could\
          \ let me know this is normal. "
        updatedAt: '2023-09-29T16:28:29.353Z'
      numEdits: 0
      reactions: []
    id: 6516fb2d049f79e53c7493c1
    type: comment
  author: aashutoshb97
  content: "Hi,\nThank you for the suggestion. I updated BertForMaskedLM to BertModel.\
    \ I can get the features now. I do get this following warning: \n\nTo enable the\
    \ following instructions: AVX2 FMA, in other operations, rebuild TensorFlow with\
    \ the appropriate compiler flags.\n2023-09-29 11:25:37.062213: W tensorflow/compiler/tf2tensorrt/utils/py_utils.cc:38]\
    \ TF-TRT Warning: Could not find TensorRT\nSome weights of BertModel were not\
    \ initialized from the model checkpoint at lhallee/cdsBERT and are newly initialized:\
    \ ['bert.pooler.dense.weight', 'bert.pooler.dense.bias']\nYou should probably\
    \ TRAIN this model on a down-stream task to be able to use it for predictions\
    \ and inference.\n\nI would be grateful if you could let me know this is normal. "
  created_at: 2023-09-29 15:28:29+00:00
  edited: false
  hidden: false
  id: 6516fb2d049f79e53c7493c1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62f2bd3bdb7cbd214b658c48/PyfUpBnNg4B3BWhgNQsYo.jpeg?w=200&h=200&f=face
      fullname: Logan Hallee
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: lhallee
      type: user
    createdAt: '2023-09-29T17:10:13.000Z'
    data:
      edited: false
      editors:
      - lhallee
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9339251518249512
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62f2bd3bdb7cbd214b658c48/PyfUpBnNg4B3BWhgNQsYo.jpeg?w=200&h=200&f=face
          fullname: Logan Hallee
          isHf: false
          isPro: true
          name: lhallee
          type: user
        html: '<p>Yes, this is normal with some Bert models. You can train the pooler_output,
          (instead of last_hidden_state) which gives a vector based on the [CLS] token,
          for fine-tuning other tasks. However, if you use it without training it
          will be randomized. If you are using the last_hidden_state only this does
          not cause any problems.</p>

          '
        raw: Yes, this is normal with some Bert models. You can train the pooler_output,
          (instead of last_hidden_state) which gives a vector based on the [CLS] token,
          for fine-tuning other tasks. However, if you use it without training it
          will be randomized. If you are using the last_hidden_state only this does
          not cause any problems.
        updatedAt: '2023-09-29T17:10:13.243Z'
      numEdits: 0
      reactions: []
      relatedEventId: 651704f5404da51aa0ff9e6b
    id: 651704f5404da51aa0ff9e68
    type: comment
  author: lhallee
  content: Yes, this is normal with some Bert models. You can train the pooler_output,
    (instead of last_hidden_state) which gives a vector based on the [CLS] token,
    for fine-tuning other tasks. However, if you use it without training it will be
    randomized. If you are using the last_hidden_state only this does not cause any
    problems.
  created_at: 2023-09-29 16:10:13+00:00
  edited: false
  hidden: false
  id: 651704f5404da51aa0ff9e68
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62f2bd3bdb7cbd214b658c48/PyfUpBnNg4B3BWhgNQsYo.jpeg?w=200&h=200&f=face
      fullname: Logan Hallee
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: lhallee
      type: user
    createdAt: '2023-09-29T17:10:13.000Z'
    data:
      status: closed
    id: 651704f5404da51aa0ff9e6b
    type: status-change
  author: lhallee
  created_at: 2023-09-29 16:10:13+00:00
  id: 651704f5404da51aa0ff9e6b
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: GleghornLab/cdsBERT-plus
repo_type: model
status: closed
target_branch: null
title: Models Weights not Initialized
