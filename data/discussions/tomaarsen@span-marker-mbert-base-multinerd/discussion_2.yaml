!!python/object:huggingface_hub.community.DiscussionWithDetails
author: MoritzLaurer
conflicting_files: null
created_at: 2023-08-19 09:48:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1613511937628-5fb15d1e84389b139cf3b508.jpeg?w=200&h=200&f=face
      fullname: Moritz Laurer
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MoritzLaurer
      type: user
    createdAt: '2023-08-19T10:48:56.000Z'
    data:
      edited: false
      editors:
      - MoritzLaurer
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.39300617575645447
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1613511937628-5fb15d1e84389b139cf3b508.jpeg?w=200&h=200&f=face
          fullname: Moritz Laurer
          isHf: true
          isPro: false
          name: MoritzLaurer
          type: user
        html: "<p>I just tried to run <code>pipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
          , aggregation_strategy=\"simple\")</code>, but got the following error.\
          \ </p>\n<pre><code>---------------------------------------------------------------------------\n\
          KeyError                                  Traceback (most recent call last)\n\
          &lt;ipython-input-65-565010e60ddc&gt; in &lt;cell line: 1&gt;()\n----&gt;\
          \ 1 pipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
          , aggregation_strategy=\"simple\")\n\n2 frames\n/usr/local/lib/python3.10/dist-packages/transformers/models/auto/configuration_auto.py\
          \ in __getitem__(self, key)\n    708             return self._extra_content[key]\n\
          \    709         if key not in self._mapping:\n--&gt; 710             raise\
          \ KeyError(key)\n    711         value = self._mapping[key]\n    712   \
          \      module_name = model_type_to_module_name(key)\n\nKeyError: 'span-marker'\n\
          </code></pre>\n"
        raw: "I just tried to run `pipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
          , aggregation_strategy=\"simple\")`, but got the following error. \r\n\r\
          \n\r\n```\r\n---------------------------------------------------------------------------\r\
          \nKeyError                                  Traceback (most recent call\
          \ last)\r\n<ipython-input-65-565010e60ddc> in <cell line: 1>()\r\n---->\
          \ 1 pipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
          , aggregation_strategy=\"simple\")\r\n\r\n2 frames\r\n/usr/local/lib/python3.10/dist-packages/transformers/models/auto/configuration_auto.py\
          \ in __getitem__(self, key)\r\n    708             return self._extra_content[key]\r\
          \n    709         if key not in self._mapping:\r\n--> 710             raise\
          \ KeyError(key)\r\n    711         value = self._mapping[key]\r\n    712\
          \         module_name = model_type_to_module_name(key)\r\n\r\nKeyError:\
          \ 'span-marker'\r\n```"
        updatedAt: '2023-08-19T10:48:56.764Z'
      numEdits: 0
      reactions: []
    id: 64e09e18e43b9464c8356565
    type: comment
  author: MoritzLaurer
  content: "I just tried to run `pipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
    , aggregation_strategy=\"simple\")`, but got the following error. \r\n\r\n\r\n\
    ```\r\n---------------------------------------------------------------------------\r\
    \nKeyError                                  Traceback (most recent call last)\r\
    \n<ipython-input-65-565010e60ddc> in <cell line: 1>()\r\n----> 1 pipeline_ner\
    \ = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\", aggregation_strategy=\"\
    simple\")\r\n\r\n2 frames\r\n/usr/local/lib/python3.10/dist-packages/transformers/models/auto/configuration_auto.py\
    \ in __getitem__(self, key)\r\n    708             return self._extra_content[key]\r\
    \n    709         if key not in self._mapping:\r\n--> 710             raise KeyError(key)\r\
    \n    711         value = self._mapping[key]\r\n    712         module_name =\
    \ model_type_to_module_name(key)\r\n\r\nKeyError: 'span-marker'\r\n```"
  created_at: 2023-08-19 09:48:56+00:00
  edited: false
  hidden: false
  id: 64e09e18e43b9464c8356565
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6317233cc92fd6fee317e030/cJHSvvimr1kqgQfHOjO5n.png?w=200&h=200&f=face
      fullname: Tom Aarsen
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: tomaarsen
      type: user
    createdAt: '2023-08-23T08:33:26.000Z'
    data:
      edited: false
      editors:
      - tomaarsen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7612269520759583
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6317233cc92fd6fee317e030/cJHSvvimr1kqgQfHOjO5n.png?w=200&h=200&f=face
          fullname: Tom Aarsen
          isHf: true
          isPro: false
          name: tomaarsen
          type: user
        html: "<p>Hello!</p>\n<p>This error itself is caused by <code>transformers</code>not\
          \ knowing about the <code>span-marker</code> model architecture, as that's\
          \ only implemented in the <code>span-marker</code> Python module. You can\
          \ technically avoid this issue by importing <code>span_marker</code>, as\
          \ it will then register the <code>span-marker</code> model architecture:</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span>\
          \ span_marker  <span class=\"hljs-comment\"># &lt;- register 'span-marker'\
          \ model architecture</span>\n<span class=\"hljs-keyword\">from</span> transformers\
          \ <span class=\"hljs-keyword\">import</span> pipeline\n\npipeline_ner =\
          \ pipeline(model=<span class=\"hljs-string\">\"tomaarsen/span-marker-mbert-base-multinerd\"\
          </span>)\n</code></pre>\n<p>But that still won't work:</p>\n<pre><code>RuntimeError:\
          \ This model is meant to be used with span-marker not with transformers\n\
          </code></pre>\n<hr>\n<p>You can perform inference like so:</p>\n<pre><code\
          \ class=\"language-python\"><span class=\"hljs-keyword\">from</span> span_marker\
          \ <span class=\"hljs-keyword\">import</span> SpanMarkerModel\n\nmodel =\
          \ SpanMarkerModel(<span class=\"hljs-string\">\"tomaarsen/span-marker-mbert-base-multinerd\"\
          </span>)\nmodel.predict(<span class=\"hljs-string\">\"We took our Toyota\
          \ Aygo to the Moon.\"</span>)\n</code></pre>\n<p>Or via a free API:</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">import</span>\
          \ requests\n\nAPI_URL = <span class=\"hljs-string\">\"https://api-inference.huggingface.co/models/tomaarsen/span-marker-mbert-base-multinerd\"\
          </span>\nheaders = {<span class=\"hljs-string\">\"Authorization\"</span>:\
          \ <span class=\"hljs-string\">\"Bearer hf_...\"</span>}\n\n<span class=\"\
          hljs-keyword\">def</span> <span class=\"hljs-title function_\">query</span>(<span\
          \ class=\"hljs-params\">payload</span>):\n    response = requests.post(API_URL,\
          \ headers=headers, json=payload)\n    <span class=\"hljs-keyword\">return</span>\
          \ response.json()\n    \noutput = query({\n    <span class=\"hljs-string\"\
          >\"inputs\"</span>: <span class=\"hljs-string\">\"We took our Toyota Aygo\
          \ to the Moon.\"</span>,\n})\n</code></pre>\n<p>Hope that helps,</p>\n<p>Tom\
          \ Aarsen</p>\n"
        raw: "Hello!\n\nThis error itself is caused by `transformers`not knowing about\
          \ the `span-marker` model architecture, as that's only implemented in the\
          \ `span-marker` Python module. You can technically avoid this issue by importing\
          \ `span_marker`, as it will then register the `span-marker` model architecture:\n\
          ```python\nimport span_marker  # <- register 'span-marker' model architecture\n\
          from transformers import pipeline\n\npipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
          )\n```\nBut that still won't work:\n```\nRuntimeError: This model is meant\
          \ to be used with span-marker not with transformers\n```\n---\nYou can perform\
          \ inference like so:\n```python\nfrom span_marker import SpanMarkerModel\n\
          \nmodel = SpanMarkerModel(\"tomaarsen/span-marker-mbert-base-multinerd\"\
          )\nmodel.predict(\"We took our Toyota Aygo to the Moon.\")\n```\nOr via\
          \ a free API:\n```python\nimport requests\n\nAPI_URL = \"https://api-inference.huggingface.co/models/tomaarsen/span-marker-mbert-base-multinerd\"\
          \nheaders = {\"Authorization\": \"Bearer hf_...\"}\n\ndef query(payload):\n\
          \tresponse = requests.post(API_URL, headers=headers, json=payload)\n\treturn\
          \ response.json()\n\t\noutput = query({\n\t\"inputs\": \"We took our Toyota\
          \ Aygo to the Moon.\",\n})\n```\n\nHope that helps,\n\nTom Aarsen"
        updatedAt: '2023-08-23T08:33:26.780Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - MoritzLaurer
      relatedEventId: 64e5c45605abd2d87c92ad4d
    id: 64e5c45605abd2d87c92ad4c
    type: comment
  author: tomaarsen
  content: "Hello!\n\nThis error itself is caused by `transformers`not knowing about\
    \ the `span-marker` model architecture, as that's only implemented in the `span-marker`\
    \ Python module. You can technically avoid this issue by importing `span_marker`,\
    \ as it will then register the `span-marker` model architecture:\n```python\n\
    import span_marker  # <- register 'span-marker' model architecture\nfrom transformers\
    \ import pipeline\n\npipeline_ner = pipeline(model=\"tomaarsen/span-marker-mbert-base-multinerd\"\
    )\n```\nBut that still won't work:\n```\nRuntimeError: This model is meant to\
    \ be used with span-marker not with transformers\n```\n---\nYou can perform inference\
    \ like so:\n```python\nfrom span_marker import SpanMarkerModel\n\nmodel = SpanMarkerModel(\"\
    tomaarsen/span-marker-mbert-base-multinerd\")\nmodel.predict(\"We took our Toyota\
    \ Aygo to the Moon.\")\n```\nOr via a free API:\n```python\nimport requests\n\n\
    API_URL = \"https://api-inference.huggingface.co/models/tomaarsen/span-marker-mbert-base-multinerd\"\
    \nheaders = {\"Authorization\": \"Bearer hf_...\"}\n\ndef query(payload):\n\t\
    response = requests.post(API_URL, headers=headers, json=payload)\n\treturn response.json()\n\
    \t\noutput = query({\n\t\"inputs\": \"We took our Toyota Aygo to the Moon.\",\n\
    })\n```\n\nHope that helps,\n\nTom Aarsen"
  created_at: 2023-08-23 07:33:26+00:00
  edited: false
  hidden: false
  id: 64e5c45605abd2d87c92ad4c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6317233cc92fd6fee317e030/cJHSvvimr1kqgQfHOjO5n.png?w=200&h=200&f=face
      fullname: Tom Aarsen
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: tomaarsen
      type: user
    createdAt: '2023-08-23T08:33:26.000Z'
    data:
      status: closed
    id: 64e5c45605abd2d87c92ad4d
    type: status-change
  author: tomaarsen
  created_at: 2023-08-23 07:33:26+00:00
  id: 64e5c45605abd2d87c92ad4d
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: tomaarsen/span-marker-mbert-base-multinerd
repo_type: model
status: closed
target_branch: null
title: 'KeyError: ''span-marker'''
