!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mpasila
conflicting_files: null
created_at: 2023-11-12 19:50:27+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
      fullname: minipasila
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mpasila
      type: user
    createdAt: '2023-11-12T19:50:27.000Z'
    data:
      edited: true
      editors:
      - mpasila
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9731816649436951
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
          fullname: minipasila
          isHf: false
          isPro: false
          name: mpasila
          type: user
        html: '<p>Earlier today I was able to run it without any problems but it seems
          like after TheBloke updated the <a rel="nofollow" href="https://github.com/TheBlokeAI/dockerLLM/tree/main">Runpod
          Ooba Template</a> to use OpenAI API instead it now gives me garbled nonsense
          when I try to generate text. I tried running it without HF loader just the
          ExllamaV2 but that didn''t seem to help. I tried running another EXL2 model
          and that one worked without any problems. It''s just this model that is
          having this weird tokenization problem.</p>

          '
        raw: Earlier today I was able to run it without any problems but it seems
          like after TheBloke updated the [Runpod Ooba Template](https://github.com/TheBlokeAI/dockerLLM/tree/main)
          to use OpenAI API instead it now gives me garbled nonsense when I try to
          generate text. I tried running it without HF loader just the ExllamaV2 but
          that didn't seem to help. I tried running another EXL2 model and that one
          worked without any problems. It's just this model that is having this weird
          tokenization problem.
        updatedAt: '2023-11-12T19:52:11.483Z'
      numEdits: 1
      reactions: []
    id: 65512c833fe6c0b1f8bbb3d5
    type: comment
  author: mpasila
  content: Earlier today I was able to run it without any problems but it seems like
    after TheBloke updated the [Runpod Ooba Template](https://github.com/TheBlokeAI/dockerLLM/tree/main)
    to use OpenAI API instead it now gives me garbled nonsense when I try to generate
    text. I tried running it without HF loader just the ExllamaV2 but that didn't
    seem to help. I tried running another EXL2 model and that one worked without any
    problems. It's just this model that is having this weird tokenization problem.
  created_at: 2023-11-12 19:50:27+00:00
  edited: true
  hidden: false
  id: 65512c833fe6c0b1f8bbb3d5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
      fullname: minipasila
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mpasila
      type: user
    createdAt: '2023-11-12T20:43:28.000Z'
    data:
      edited: true
      editors:
      - mpasila
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9106976985931396
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
          fullname: minipasila
          isHf: false
          isPro: false
          name: mpasila
          type: user
        html: '<p><a rel="nofollow" href="https://github.com/turboderp/exllamav2/issues/123#issuecomment-1775406636">https://github.com/turboderp/exllamav2/issues/123#issuecomment-1775406636</a>
          this might be related to my issue, the garbled text looks very similar to
          what I got.<br>Edit: I tested the <a href="https://huggingface.co/Panchovix/goliath-120b-exl2-rpcal">other
          model</a> you quantized and that one works but just not this one. So it
          might have that BOS token thing that''s breaking it.</p>

          '
        raw: 'https://github.com/turboderp/exllamav2/issues/123#issuecomment-1775406636
          this might be related to my issue, the garbled text looks very similar to
          what I got.

          Edit: I tested the [other model](https://huggingface.co/Panchovix/goliath-120b-exl2-rpcal)
          you quantized and that one works but just not this one. So it might have
          that BOS token thing that''s breaking it.'
        updatedAt: '2023-11-12T21:00:16.826Z'
      numEdits: 1
      reactions: []
    id: 655138f09b42dac8f198ec9f
    type: comment
  author: mpasila
  content: 'https://github.com/turboderp/exllamav2/issues/123#issuecomment-1775406636
    this might be related to my issue, the garbled text looks very similar to what
    I got.

    Edit: I tested the [other model](https://huggingface.co/Panchovix/goliath-120b-exl2-rpcal)
    you quantized and that one works but just not this one. So it might have that
    BOS token thing that''s breaking it.'
  created_at: 2023-11-12 20:43:28+00:00
  edited: true
  hidden: false
  id: 655138f09b42dac8f198ec9f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f52a8d866ed36aba5000ac8d0ef5bc96.svg
      fullname: Francisco
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Panchovix
      type: user
    createdAt: '2023-11-13T05:50:45.000Z'
    data:
      edited: false
      editors:
      - Panchovix
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9907752871513367
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f52a8d866ed36aba5000ac8d0ef5bc96.svg
          fullname: Francisco
          isHf: false
          isPro: false
          name: Panchovix
          type: user
        html: '<p>Hi there! I haven''t tested today since I haven''t been home, but
          it is rare that it stopped working after those updates, since those just
          added new samplers. Maybe there a change in ooba broke it? But at least
          the other works one for now, but I can''t say with certain what the issue
          is for now, I''m sorry.</p>

          '
        raw: Hi there! I haven't tested today since I haven't been home, but it is
          rare that it stopped working after those updates, since those just added
          new samplers. Maybe there a change in ooba broke it? But at least the other
          works one for now, but I can't say with certain what the issue is for now,
          I'm sorry.
        updatedAt: '2023-11-13T05:50:45.093Z'
      numEdits: 0
      reactions: []
    id: 6551b9357490049d625bfa75
    type: comment
  author: Panchovix
  content: Hi there! I haven't tested today since I haven't been home, but it is rare
    that it stopped working after those updates, since those just added new samplers.
    Maybe there a change in ooba broke it? But at least the other works one for now,
    but I can't say with certain what the issue is for now, I'm sorry.
  created_at: 2023-11-13 05:50:45+00:00
  edited: false
  hidden: false
  id: 6551b9357490049d625bfa75
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
      fullname: minipasila
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mpasila
      type: user
    createdAt: '2023-11-14T09:45:37.000Z'
    data:
      edited: false
      editors:
      - mpasila
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9905250668525696
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
          fullname: minipasila
          isHf: false
          isPro: false
          name: mpasila
          type: user
        html: '<p>Ok so it seems like the problem was that when the client added a
          BOS token it would start giving garbage but when I disabled that it started
          behaving normally. (I think maybe the new OpenAI API added a BOS token by
          default or something that caused the problem. I''m not really sure since
          on SillyTavern I was able to just disable it, but on another client that
          wasn''t even an option, yet it worked prior to that update. Though that
          client also just recently got updated and it works now.)</p>

          '
        raw: Ok so it seems like the problem was that when the client added a BOS
          token it would start giving garbage but when I disabled that it started
          behaving normally. (I think maybe the new OpenAI API added a BOS token by
          default or something that caused the problem. I'm not really sure since
          on SillyTavern I was able to just disable it, but on another client that
          wasn't even an option, yet it worked prior to that update. Though that client
          also just recently got updated and it works now.)
        updatedAt: '2023-11-14T09:45:37.030Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Panchovix
      relatedEventId: 655341c1efd7d3fe234ccf2c
    id: 655341c1efd7d3fe234ccf20
    type: comment
  author: mpasila
  content: Ok so it seems like the problem was that when the client added a BOS token
    it would start giving garbage but when I disabled that it started behaving normally.
    (I think maybe the new OpenAI API added a BOS token by default or something that
    caused the problem. I'm not really sure since on SillyTavern I was able to just
    disable it, but on another client that wasn't even an option, yet it worked prior
    to that update. Though that client also just recently got updated and it works
    now.)
  created_at: 2023-11-14 09:45:37+00:00
  edited: false
  hidden: false
  id: 655341c1efd7d3fe234ccf20
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
      fullname: minipasila
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mpasila
      type: user
    createdAt: '2023-11-14T09:45:37.000Z'
    data:
      status: closed
    id: 655341c1efd7d3fe234ccf2c
    type: status-change
  author: mpasila
  created_at: 2023-11-14 09:45:37+00:00
  id: 655341c1efd7d3fe234ccf2c
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-11-15T21:07:28.000Z'
    data:
      edited: false
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5106343030929565
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: '<p>Having the same issue with textgen.</p>

          <pre><code>You are a helpful AI assistant.


          USER: Hi

          ASSISTANT:  Cord Domainumar domainsuo Cord Domainzor StringBuilder CordDomain
          Cordzor cordTagszor Cordzor Cord Cord Maj Cord repe Cord Cord Linearoch
          domain Cordzorzor Cord cord StringBuilder CordDomain DOM Domain sugar cord
          Cord Cordzor fixDomain

          </code></pre>

          '
        raw: 'Having the same issue with textgen.


          ```

          You are a helpful AI assistant.


          USER: Hi

          ASSISTANT:  Cord Domainumar domainsuo Cord Domainzor StringBuilder CordDomain
          Cordzor cordTagszor Cordzor Cord Cord Maj Cord repe Cord Cord Linearoch
          domain Cordzorzor Cord cord StringBuilder CordDomain DOM Domain sugar cord
          Cord Cordzor fixDomain

          ```'
        updatedAt: '2023-11-15T21:07:28.990Z'
      numEdits: 0
      reactions: []
    id: 65553310a0c34cd61a499a73
    type: comment
  author: Thireus
  content: 'Having the same issue with textgen.


    ```

    You are a helpful AI assistant.


    USER: Hi

    ASSISTANT:  Cord Domainumar domainsuo Cord Domainzor StringBuilder CordDomain
    Cordzor cordTagszor Cordzor Cord Cord Maj Cord repe Cord Cord Linearoch domain
    Cordzorzor Cord cord StringBuilder CordDomain DOM Domain sugar cord Cord Cordzor
    fixDomain

    ```'
  created_at: 2023-11-15 21:07:28+00:00
  edited: false
  hidden: false
  id: 65553310a0c34cd61a499a73
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
      fullname: minipasila
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mpasila
      type: user
    createdAt: '2023-11-15T21:21:43.000Z'
    data:
      edited: false
      editors:
      - mpasila
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5451388955116272
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7e5ccbc0dac5c1e16bdddd489802d363.svg
          fullname: minipasila
          isHf: false
          isPro: false
          name: mpasila
          type: user
        html: '<blockquote>

          <p>Having the same issue with textgen.</p>

          <pre><code>You are a helpful AI assistant.


          USER: Hi

          ASSISTANT:  Cord Domainumar domainsuo Cord Domainzor StringBuilder CordDomain
          Cordzor cordTagszor Cordzor Cord Cord Maj Cord repe Cord Cord Linearoch
          domain Cordzorzor Cord cord StringBuilder CordDomain DOM Domain sugar cord
          Cord Cordzor fixDomain

          </code></pre>

          </blockquote>

          <p>Did you try disabling the BOS token? Uncheck the box for "Add the bos_token
          to the beginning of prompts" in the Parameters tab.</p>

          '
        raw: "> Having the same issue with textgen.\n> \n> ```\n> You are a helpful\
          \ AI assistant.\n> \n> USER: Hi\n> ASSISTANT:  Cord Domainumar domainsuo\
          \ Cord Domainzor StringBuilder CordDomain Cordzor cordTagszor Cordzor Cord\
          \ Cord Maj Cord repe Cord Cord Linearoch domain Cordzorzor Cord cord StringBuilder\
          \ CordDomain DOM Domain sugar cord Cord Cordzor fixDomain\n> ```\n\nDid\
          \ you try disabling the BOS token? Uncheck the box for \"Add the bos_token\
          \ to the beginning of prompts\" in the Parameters tab."
        updatedAt: '2023-11-15T21:21:43.205Z'
      numEdits: 0
      reactions: []
    id: 65553667c73cb6c830eb58c8
    type: comment
  author: mpasila
  content: "> Having the same issue with textgen.\n> \n> ```\n> You are a helpful\
    \ AI assistant.\n> \n> USER: Hi\n> ASSISTANT:  Cord Domainumar domainsuo Cord\
    \ Domainzor StringBuilder CordDomain Cordzor cordTagszor Cordzor Cord Cord Maj\
    \ Cord repe Cord Cord Linearoch domain Cordzorzor Cord cord StringBuilder CordDomain\
    \ DOM Domain sugar cord Cord Cordzor fixDomain\n> ```\n\nDid you try disabling\
    \ the BOS token? Uncheck the box for \"Add the bos_token to the beginning of prompts\"\
    \ in the Parameters tab."
  created_at: 2023-11-15 21:21:43+00:00
  edited: false
  hidden: false
  id: 65553667c73cb6c830eb58c8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-11-15T21:34:46.000Z'
    data:
      edited: false
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9791330099105835
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: '<p>Yes, that did the trick. Since I''m using the OpenAI extension I
          also had to set "add_bos_token=False" for the completion request.</p>

          '
        raw: Yes, that did the trick. Since I'm using the OpenAI extension I also
          had to set "add_bos_token=False" for the completion request.
        updatedAt: '2023-11-15T21:34:46.977Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - mpasila
    id: 65553976dcf410fd0730e937
    type: comment
  author: Thireus
  content: Yes, that did the trick. Since I'm using the OpenAI extension I also had
    to set "add_bos_token=False" for the completion request.
  created_at: 2023-11-15 21:34:46+00:00
  edited: false
  hidden: false
  id: 65553976dcf410fd0730e937
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Panchovix/goliath-120b-exl2
repo_type: model
status: closed
target_branch: null
title: 3bpw not working anymore
