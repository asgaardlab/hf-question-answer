!!python/object:huggingface_hub.community.DiscussionWithDetails
author: caldwecg
conflicting_files: null
created_at: 2023-02-19 16:04:04+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f5a5ae0c867a2ddf246489f1359c71a3.svg
      fullname: Carter Caldwell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: caldwecg
      type: user
    createdAt: '2023-02-19T16:04:04.000Z'
    data:
      edited: false
      editors:
      - caldwecg
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f5a5ae0c867a2ddf246489f1359c71a3.svg
          fullname: Carter Caldwell
          isHf: false
          isPro: false
          name: caldwecg
          type: user
        html: "<p>Hello, I am unable to get the safety checker to work when running\
          \ the regular stablediffusionpipeline, but when trying to run the StableDiffusionPipelineSafe,\
          \ I get the below error. I am running on an AWS instance. </p>\n<p><a rel=\"\
          nofollow\" href=\"\"><img alt=\"Uploading Screen Shot 2023-02-19 at 9.54.31\
          \ AM.png\u2026\" src=\"\"></a></p>\n<p>NotImplementedError: No operator\
          \ found for <code>memory_efficient_attention_forward</code> with inputs:<br>\
          \     query       : shape=(24, 4096, 1, 40) (torch.float32)<br>     key\
          \         : shape=(24, 4096, 1, 40) (torch.float32)<br>     value      \
          \ : shape=(24, 4096, 1, 40) (torch.float32)<br>     attn_bias   : &lt;class\
          \ 'NoneType'&gt;<br>     p           : 0.0<br><code>cutlassF</code> is not\
          \ supported because:<br>    device=cpu (supported: {'cuda'})<br><code>flshattF</code>\
          \ is not supported because:<br>    device=cpu (supported: {'cuda'})<br>\
          \    dtype=torch.float32 (supported: {torch.bfloat16, torch.float16})<br><code>tritonflashattF</code>\
          \ is not supported because:<br>    device=cpu (supported: {'cuda'})<br>\
          \    dtype=torch.float32 (supported: {torch.bfloat16, torch.float16})<br><code>smallkF</code>\
          \ is not supported because:<br>    max(query.shape[-1] != value.shape[-1])\
          \ &gt; 32<br>    unsupported embed per head: 40</p>\n"
        raw: "Hello, I am unable to get the safety checker to work when running the\
          \ regular stablediffusionpipeline, but when trying to run the StableDiffusionPipelineSafe,\
          \ I get the below error. I am running on an AWS instance. \r\n\r\n\r\n![Uploading\
          \ Screen Shot 2023-02-19 at 9.54.31 AM.png\u2026]()\r\n\r\n\r\nNotImplementedError:\
          \ No operator found for `memory_efficient_attention_forward` with inputs:\r\
          \n     query       : shape=(24, 4096, 1, 40) (torch.float32)\r\n     key\
          \         : shape=(24, 4096, 1, 40) (torch.float32)\r\n     value      \
          \ : shape=(24, 4096, 1, 40) (torch.float32)\r\n     attn_bias   : <class\
          \ 'NoneType'>\r\n     p           : 0.0\r\n`cutlassF` is not supported because:\r\
          \n    device=cpu (supported: {'cuda'})\r\n`flshattF` is not supported because:\r\
          \n    device=cpu (supported: {'cuda'})\r\n    dtype=torch.float32 (supported:\
          \ {torch.bfloat16, torch.float16})\r\n`tritonflashattF` is not supported\
          \ because:\r\n    device=cpu (supported: {'cuda'})\r\n    dtype=torch.float32\
          \ (supported: {torch.bfloat16, torch.float16})\r\n`smallkF` is not supported\
          \ because:\r\n    max(query.shape[-1] != value.shape[-1]) > 32\r\n    unsupported\
          \ embed per head: 40"
        updatedAt: '2023-02-19T16:04:04.554Z'
      numEdits: 0
      reactions: []
    id: 63f24874f4e30ffd2bd27153
    type: comment
  author: caldwecg
  content: "Hello, I am unable to get the safety checker to work when running the\
    \ regular stablediffusionpipeline, but when trying to run the StableDiffusionPipelineSafe,\
    \ I get the below error. I am running on an AWS instance. \r\n\r\n\r\n![Uploading\
    \ Screen Shot 2023-02-19 at 9.54.31 AM.png\u2026]()\r\n\r\n\r\nNotImplementedError:\
    \ No operator found for `memory_efficient_attention_forward` with inputs:\r\n\
    \     query       : shape=(24, 4096, 1, 40) (torch.float32)\r\n     key      \
    \   : shape=(24, 4096, 1, 40) (torch.float32)\r\n     value       : shape=(24,\
    \ 4096, 1, 40) (torch.float32)\r\n     attn_bias   : <class 'NoneType'>\r\n  \
    \   p           : 0.0\r\n`cutlassF` is not supported because:\r\n    device=cpu\
    \ (supported: {'cuda'})\r\n`flshattF` is not supported because:\r\n    device=cpu\
    \ (supported: {'cuda'})\r\n    dtype=torch.float32 (supported: {torch.bfloat16,\
    \ torch.float16})\r\n`tritonflashattF` is not supported because:\r\n    device=cpu\
    \ (supported: {'cuda'})\r\n    dtype=torch.float32 (supported: {torch.bfloat16,\
    \ torch.float16})\r\n`smallkF` is not supported because:\r\n    max(query.shape[-1]\
    \ != value.shape[-1]) > 32\r\n    unsupported embed per head: 40"
  created_at: 2023-02-19 16:04:04+00:00
  edited: false
  hidden: false
  id: 63f24874f4e30ffd2bd27153
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1677960285745-noauth.jpeg?w=200&h=200&f=face
      fullname: tamil
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: SWMSpodcast
      type: user
    createdAt: '2023-03-08T02:47:28.000Z'
    data:
      edited: false
      editors:
      - SWMSpodcast
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1677960285745-noauth.jpeg?w=200&h=200&f=face
          fullname: tamil
          isHf: false
          isPro: false
          name: SWMSpodcast
          type: user
        html: '<p>hi did u solve this issue ? if so please help</p>

          '
        raw: hi did u solve this issue ? if so please help
        updatedAt: '2023-03-08T02:47:28.856Z'
      numEdits: 0
      reactions: []
    id: 6407f740878f41283b2b29d8
    type: comment
  author: SWMSpodcast
  content: hi did u solve this issue ? if so please help
  created_at: 2023-03-08 02:47:28+00:00
  edited: false
  hidden: false
  id: 6407f740878f41283b2b29d8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660124097215-noauth.jpeg?w=200&h=200&f=face
      fullname: Magala Reuben
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BlaqCosmos
      type: user
    createdAt: '2023-03-18T08:22:24.000Z'
    data:
      edited: true
      editors:
      - BlaqCosmos
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660124097215-noauth.jpeg?w=200&h=200&f=face
          fullname: Magala Reuben
          isHf: false
          isPro: false
          name: BlaqCosmos
          type: user
        html: '<p>your pytorch version doesnt match with xformers, currently aws sagemarker
          uses pytorch 2.0<br>this is probably your error:<br>xFormers can''t load
          C++/CUDA extensions. xFormers was built for:<br>    PyTorch 1.13.1+cu117
          with CUDA 1107 (you have 2.0.0+cu117)<br>    Python  3.9.16 (you have 3.9.16)<br>  Please
          reinstall xformers (see <a rel="nofollow" href="https://github.com/facebookresearch/xformers#installing-xformers">https://github.com/facebookresearch/xformers#installing-xformers</a>)<br>  Memory-efficient
          attention, SwiGLU, sparse and more won''t be available.</p>

          '
        raw: "your pytorch version doesnt match with xformers, currently aws sagemarker\
          \ uses pytorch 2.0\nthis is probably your error:\nxFormers can't load C++/CUDA\
          \ extensions. xFormers was built for:\n    PyTorch 1.13.1+cu117 with CUDA\
          \ 1107 (you have 2.0.0+cu117)\n    Python  3.9.16 (you have 3.9.16)\n  Please\
          \ reinstall xformers (see https://github.com/facebookresearch/xformers#installing-xformers)\n\
          \  Memory-efficient attention, SwiGLU, sparse and more won't be available."
        updatedAt: '2023-03-18T08:23:35.537Z'
      numEdits: 1
      reactions: []
    id: 641574c0f0e3d47d0ea09829
    type: comment
  author: BlaqCosmos
  content: "your pytorch version doesnt match with xformers, currently aws sagemarker\
    \ uses pytorch 2.0\nthis is probably your error:\nxFormers can't load C++/CUDA\
    \ extensions. xFormers was built for:\n    PyTorch 1.13.1+cu117 with CUDA 1107\
    \ (you have 2.0.0+cu117)\n    Python  3.9.16 (you have 3.9.16)\n  Please reinstall\
    \ xformers (see https://github.com/facebookresearch/xformers#installing-xformers)\n\
    \  Memory-efficient attention, SwiGLU, sparse and more won't be available."
  created_at: 2023-03-18 07:22:24+00:00
  edited: true
  hidden: false
  id: 641574c0f0e3d47d0ea09829
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7bdd535f486a224aa3eb906b73a7b744.svg
      fullname: Raphael Weissling
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Kobold2208
      type: user
    createdAt: '2023-04-02T11:39:58.000Z'
    data:
      edited: false
      editors:
      - Kobold2208
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7bdd535f486a224aa3eb906b73a7b744.svg
          fullname: Raphael Weissling
          isHf: false
          isPro: false
          name: Kobold2208
          type: user
        html: '<p>Did it work, because I reinstalled it and the error still appears</p>

          '
        raw: Did it work, because I reinstalled it and the error still appears
        updatedAt: '2023-04-02T11:39:58.719Z'
      numEdits: 0
      reactions: []
    id: 6429698e4059ac9e6836dea8
    type: comment
  author: Kobold2208
  content: Did it work, because I reinstalled it and the error still appears
  created_at: 2023-04-02 10:39:58+00:00
  edited: false
  hidden: false
  id: 6429698e4059ac9e6836dea8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660124097215-noauth.jpeg?w=200&h=200&f=face
      fullname: Magala Reuben
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: BlaqCosmos
      type: user
    createdAt: '2023-04-11T22:26:28.000Z'
    data:
      edited: false
      editors:
      - BlaqCosmos
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1660124097215-noauth.jpeg?w=200&h=200&f=face
          fullname: Magala Reuben
          isHf: false
          isPro: false
          name: BlaqCosmos
          type: user
        html: '<p>You need to downgrade Pytorch from 2.0 to PyTorch 1.13.1 because
          xFormers was built for:<br>PyTorch 1.13.1+cu117 with CUDA 1107</p>

          '
        raw: 'You need to downgrade Pytorch from 2.0 to PyTorch 1.13.1 because xFormers
          was built for:

          PyTorch 1.13.1+cu117 with CUDA 1107'
        updatedAt: '2023-04-11T22:26:28.327Z'
      numEdits: 0
      reactions: []
    id: 6435de9479c45fcf1adc54d6
    type: comment
  author: BlaqCosmos
  content: 'You need to downgrade Pytorch from 2.0 to PyTorch 1.13.1 because xFormers
    was built for:

    PyTorch 1.13.1+cu117 with CUDA 1107'
  created_at: 2023-04-11 21:26:28+00:00
  edited: false
  hidden: false
  id: 6435de9479c45fcf1adc54d6
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 38
repo_id: CompVis/stable-diffusion-safety-checker
repo_type: model
status: open
target_branch: null
title: 'Error when running '
