!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Biohebb
conflicting_files: null
created_at: 2023-11-27 07:53:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/33d99e2428fac6f1c664af33b480ac7d.svg
      fullname: He beibei
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Biohebb
      type: user
    createdAt: '2023-11-27T07:53:57.000Z'
    data:
      edited: false
      editors:
      - Biohebb
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8284329771995544
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/33d99e2428fac6f1c664af33b480ac7d.svg
          fullname: He beibei
          isHf: false
          isPro: false
          name: Biohebb
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;nferruz&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/nferruz\">@<span class=\"\
          underline\">nferruz</span></a></span>\n\n\t</span></span> Hello Noelia,<br>Thank\
          \ you for sharing ProtGPT2 with the protein design community, great work.\
          \ I'm new to deep learning and only have a few experiences in prediction/classification\
          \ tasks using pre-trained protein language models, e.g., the ESM-2 model.\
          \ For fine-tuning, I'm using Hugging Face Trainer. </p>\n<p>May I ask how\
          \ to define the <strong>compute_metrics</strong> function in fine-tuning\
          \ ProtGPT2? For the classification task, the compute_metrics function is\
          \ like:</p>\n<pre><code>def compute_metrics(eval_pred):\n    metrics = load('accuracy')\n\
          \    predictions, labels = eval_pred\n    predictions = np.argmax(predictions,\
          \ axis=1)\n    return metrics.compute(predictions=predictions, references=labels)\n\
          </code></pre>\n<p>I know we can use <strong>run_clm.py</strong> to fine-tune.\
          \ I just want to try to use Hugging Face Trainer to make it run.</p>\n<p>Don't\
          \ know if it's appropriate to ask this question. I googled it, but what\
          \ I got is all about validation for text generation tasks. Any hints would\
          \ be appreciated.</p>\n<p>Sincerely,<br>Beibei</p>\n"
        raw: "@nferruz Hello Noelia,\r\nThank you for sharing ProtGPT2 with the protein\
          \ design community, great work. I'm new to deep learning and only have a\
          \ few experiences in prediction/classification tasks using pre-trained protein\
          \ language models, e.g., the ESM-2 model. For fine-tuning, I'm using Hugging\
          \ Face Trainer. \r\n\r\nMay I ask how to define the **compute_metrics**\
          \ function in fine-tuning ProtGPT2? For the classification task, the compute_metrics\
          \ function is like:\r\n```\r\ndef compute_metrics(eval_pred):\r\n    metrics\
          \ = load('accuracy')\r\n    predictions, labels = eval_pred\r\n    predictions\
          \ = np.argmax(predictions, axis=1)\r\n    return metrics.compute(predictions=predictions,\
          \ references=labels)\r\n```\r\nI know we can use **run_clm.py** to fine-tune.\
          \ I just want to try to use Hugging Face Trainer to make it run.\r\n\r\n\
          Don't know if it's appropriate to ask this question. I googled it, but what\
          \ I got is all about validation for text generation tasks. Any hints would\
          \ be appreciated.\r\n\r\nSincerely,\r\nBeibei"
        updatedAt: '2023-11-27T07:53:57.496Z'
      numEdits: 0
      reactions: []
    id: 65644b152741d606a000c1b1
    type: comment
  author: Biohebb
  content: "@nferruz Hello Noelia,\r\nThank you for sharing ProtGPT2 with the protein\
    \ design community, great work. I'm new to deep learning and only have a few experiences\
    \ in prediction/classification tasks using pre-trained protein language models,\
    \ e.g., the ESM-2 model. For fine-tuning, I'm using Hugging Face Trainer. \r\n\
    \r\nMay I ask how to define the **compute_metrics** function in fine-tuning ProtGPT2?\
    \ For the classification task, the compute_metrics function is like:\r\n```\r\n\
    def compute_metrics(eval_pred):\r\n    metrics = load('accuracy')\r\n    predictions,\
    \ labels = eval_pred\r\n    predictions = np.argmax(predictions, axis=1)\r\n \
    \   return metrics.compute(predictions=predictions, references=labels)\r\n```\r\
    \nI know we can use **run_clm.py** to fine-tune. I just want to try to use Hugging\
    \ Face Trainer to make it run.\r\n\r\nDon't know if it's appropriate to ask this\
    \ question. I googled it, but what I got is all about validation for text generation\
    \ tasks. Any hints would be appreciated.\r\n\r\nSincerely,\r\nBeibei"
  created_at: 2023-11-27 07:53:57+00:00
  edited: false
  hidden: false
  id: 65644b152741d606a000c1b1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d53ce612a2ca69b758fd3fe0e962d3cc.svg
      fullname: Noelia Ferruz
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: nferruz
      type: user
    createdAt: '2023-11-28T18:34:13.000Z'
    data:
      edited: false
      editors:
      - nferruz
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8286934494972229
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d53ce612a2ca69b758fd3fe0e962d3cc.svg
          fullname: Noelia Ferruz
          isHf: false
          isPro: false
          name: nferruz
          type: user
        html: "<p>I\u2019m afraid I don\u2019t know either, but I\u2019ll try to have\
          \ a look!</p>\n"
        raw: "I\u2019m afraid I don\u2019t know either, but I\u2019ll try to have\
          \ a look!"
        updatedAt: '2023-11-28T18:34:13.237Z'
      numEdits: 0
      reactions: []
    id: 656632a5b0e94dc742dc2adc
    type: comment
  author: nferruz
  content: "I\u2019m afraid I don\u2019t know either, but I\u2019ll try to have a\
    \ look!"
  created_at: 2023-11-28 18:34:13+00:00
  edited: false
  hidden: false
  id: 656632a5b0e94dc742dc2adc
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 37
repo_id: nferruz/ProtGPT2
repo_type: model
status: open
target_branch: null
title: how to define the compute_metrics function in fine-tuning
