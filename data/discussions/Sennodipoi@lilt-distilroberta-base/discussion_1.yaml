!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Frank94
conflicting_files: null
created_at: 2023-01-25 14:13:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/210d8d644fb9aa70d2cc9fb49618e5d0.svg
      fullname: Francesco Cavina
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Frank94
      type: user
    createdAt: '2023-01-25T14:13:24.000Z'
    data:
      edited: false
      editors:
      - Frank94
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/210d8d644fb9aa70d2cc9fb49618e5d0.svg
          fullname: Francesco Cavina
          isHf: false
          isPro: false
          name: Frank94
          type: user
        html: '<p>I can''t reproduce the export of the model as you did. I get the
          error: Some weights of the model checkpoint at lilt-distilroberta-base were
          not used when initializing LiltForTokenClassification. Trying with your
          model the error does not appear. The colab I''m testing with is the following:
          <a rel="nofollow" href="https://colab.research.google.com/drive/1k2uGoDBOQwrK4iokGJOQKdDfll0QPbl-#scrollTo=0ZmvE7ku4hSW">https://colab.research.google.com/drive/1k2uGoDBOQwrK4iokGJOQKdDfll0QPbl-#scrollTo=0ZmvE7ku4hSW</a>.</p>

          <p>Can you help me figure out what I''m doing wrong? Thanks in advance</p>

          '
        raw: "I can't reproduce the export of the model as you did. I get the error:\
          \ Some weights of the model checkpoint at lilt-distilroberta-base were not\
          \ used when initializing LiltForTokenClassification. Trying with your model\
          \ the error does not appear. The colab I'm testing with is the following:\
          \ https://colab.research.google.com/drive/1k2uGoDBOQwrK4iokGJOQKdDfll0QPbl-#scrollTo=0ZmvE7ku4hSW.\r\
          \n\r\nCan you help me figure out what I'm doing wrong? Thanks in advance\r\
          \n\r\n"
        updatedAt: '2023-01-25T14:13:24.428Z'
      numEdits: 0
      reactions: []
    id: 63d139042036e44c44f69c58
    type: comment
  author: Frank94
  content: "I can't reproduce the export of the model as you did. I get the error:\
    \ Some weights of the model checkpoint at lilt-distilroberta-base were not used\
    \ when initializing LiltForTokenClassification. Trying with your model the error\
    \ does not appear. The colab I'm testing with is the following: https://colab.research.google.com/drive/1k2uGoDBOQwrK4iokGJOQKdDfll0QPbl-#scrollTo=0ZmvE7ku4hSW.\r\
    \n\r\nCan you help me figure out what I'm doing wrong? Thanks in advance\r\n\r\
    \n"
  created_at: 2023-01-25 14:13:24+00:00
  edited: false
  hidden: false
  id: 63d139042036e44c44f69c58
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e0e6798f2411ddcbf08068ed7721bf2f.svg
      fullname: Alessandro Rosa
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Sennodipoi
      type: user
    createdAt: '2023-01-27T09:05:36.000Z'
    data:
      edited: false
      editors:
      - Sennodipoi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e0e6798f2411ddcbf08068ed7721bf2f.svg
          fullname: Alessandro Rosa
          isHf: false
          isPro: false
          name: Sennodipoi
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;Frank94&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Frank94\">@<span class=\"\
          underline\">Frank94</span></a></span>\n\n\t</span></span>, i'm not quite\
          \ sure what might be the error in your case, but I remember also having\
          \ problems at first while creating a LiLT model using distilroberta.<br>If\
          \ I recall correctly, here's two additional passage that I had to do:</p>\n\
          <ol>\n<li>I had to manually download the pytorch_model.bin and config.json\
          \ files from the hub because for some reasons using wget led me to some\
          \ error</li>\n<li>I changed a couple of lines of the original get_weight_roberta_like.py\
          \ script. In particular</li>\n</ol>\n<p><a rel=\"nofollow\" href=\"https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L19\"\
          >https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L19</a><br>config['model_type']\
          \ = 'LiltModel' #changed from 'liltrobertalike'</p>\n<p><a rel=\"nofollow\"\
          \ href=\"https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L26\"\
          >https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L26</a><br>\
          \ text_model = torch.load(opt.text, map_location=torch.device('cpu')) #changed\
          \ to cpu</p>\n<p><a rel=\"nofollow\" href=\"https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L28\"\
          >https://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L28</a><br>\
          \    lilt_model = torch.load(opt.lilt, map_location=torch.device('cpu'))\
          \ #changed to cpu</p>\n<p>Last two changes were made because I was working\
          \ on cpu, I don't know if that is also your case.</p>\n<p>Hope this helps\
          \ :)</p>\n"
        raw: "Hi @Frank94, i'm not quite sure what might be the error in your case,\
          \ but I remember also having problems at first while creating a LiLT model\
          \ using distilroberta. \nIf I recall correctly, here's two additional passage\
          \ that I had to do:\n\n1) I had to manually download the pytorch_model.bin\
          \ and config.json files from the hub because for some reasons using wget\
          \ led me to some error\n2) I changed a couple of lines of the original get_weight_roberta_like.py\
          \ script. In particular\n\nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L19\
          \ \nconfig['model_type'] = 'LiltModel' #changed from 'liltrobertalike'\n\
          \nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L26\n\
          \ text_model = torch.load(opt.text, map_location=torch.device('cpu')) #changed\
          \ to cpu\n\nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L28\n\
          \    lilt_model = torch.load(opt.lilt, map_location=torch.device('cpu'))\
          \ #changed to cpu\n\nLast two changes were made because I was working on\
          \ cpu, I don't know if that is also your case.\n\nHope this helps :)"
        updatedAt: '2023-01-27T09:05:36.961Z'
      numEdits: 0
      reactions: []
    id: 63d393e0daaab1644440fa1f
    type: comment
  author: Sennodipoi
  content: "Hi @Frank94, i'm not quite sure what might be the error in your case,\
    \ but I remember also having problems at first while creating a LiLT model using\
    \ distilroberta. \nIf I recall correctly, here's two additional passage that I\
    \ had to do:\n\n1) I had to manually download the pytorch_model.bin and config.json\
    \ files from the hub because for some reasons using wget led me to some error\n\
    2) I changed a couple of lines of the original get_weight_roberta_like.py script.\
    \ In particular\n\nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L19\
    \ \nconfig['model_type'] = 'LiltModel' #changed from 'liltrobertalike'\n\nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L26\n\
    \ text_model = torch.load(opt.text, map_location=torch.device('cpu')) #changed\
    \ to cpu\n\nhttps://github.com/jpWang/LiLT/blob/main/gen_weight_roberta_like.py#L28\n\
    \    lilt_model = torch.load(opt.lilt, map_location=torch.device('cpu')) #changed\
    \ to cpu\n\nLast two changes were made because I was working on cpu, I don't know\
    \ if that is also your case.\n\nHope this helps :)"
  created_at: 2023-01-27 09:05:36+00:00
  edited: false
  hidden: false
  id: 63d393e0daaab1644440fa1f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/210d8d644fb9aa70d2cc9fb49618e5d0.svg
      fullname: Francesco Cavina
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Frank94
      type: user
    createdAt: '2023-01-30T10:22:30.000Z'
    data:
      edited: false
      editors:
      - Frank94
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/210d8d644fb9aa70d2cc9fb49618e5d0.svg
          fullname: Francesco Cavina
          isHf: false
          isPro: false
          name: Frank94
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;Sennodipoi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Sennodipoi\"\
          >@<span class=\"underline\">Sennodipoi</span></a></span>\n\n\t</span></span>,<br>I'll\
          \ try to do some tests as you suggested.<br>thanks for your support :)</p>\n"
        raw: 'Hi @Sennodipoi,

          I''ll try to do some tests as you suggested.

          thanks for your support :)


          '
        updatedAt: '2023-01-30T10:22:30.527Z'
      numEdits: 0
      reactions: []
      relatedEventId: 63d79a66143d89ad806f86ee
    id: 63d79a66143d89ad806f86ed
    type: comment
  author: Frank94
  content: 'Hi @Sennodipoi,

    I''ll try to do some tests as you suggested.

    thanks for your support :)


    '
  created_at: 2023-01-30 10:22:30+00:00
  edited: false
  hidden: false
  id: 63d79a66143d89ad806f86ed
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/210d8d644fb9aa70d2cc9fb49618e5d0.svg
      fullname: Francesco Cavina
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Frank94
      type: user
    createdAt: '2023-01-30T10:22:30.000Z'
    data:
      status: closed
    id: 63d79a66143d89ad806f86ee
    type: status-change
  author: Frank94
  created_at: 2023-01-30 10:22:30+00:00
  id: 63d79a66143d89ad806f86ee
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Sennodipoi/lilt-distilroberta-base
repo_type: model
status: closed
target_branch: null
title: Problems reproducing model export
