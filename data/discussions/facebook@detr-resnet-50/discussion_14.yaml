!!python/object:huggingface_hub.community.DiscussionWithDetails
author: orcaman2
conflicting_files: null
created_at: 2023-11-30 10:45:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f9d1450403b864d6b17f30ba0ce0aee3.svg
      fullname: Or Hiltch
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: orcaman2
      type: user
    createdAt: '2023-11-30T10:45:56.000Z'
    data:
      edited: false
      editors:
      - orcaman2
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8720991611480713
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f9d1450403b864d6b17f30ba0ce0aee3.svg
          fullname: Or Hiltch
          isHf: false
          isPro: false
          name: orcaman2
          type: user
        html: '<p>After the endpoint is deployed to SageMaker, the following error
          is received upon invoking the model:</p>

          <p>ModelError: An error occurred (ModelError) when calling the InvokeEndpoint
          operation: Received client error (400) from primary with message "{<br>  "code":
          400,<br>  "type": "InternalServerException",<br>  "message": "\nDetrForObjectDetection
          requires the timm library but it was not found in your environment. You
          can install it with pip:\n<code>pip install timm</code>. Please note that
          you may need to restart your runtime after installation.\n"}</p>

          <p>Looks like an external dependency is missing on the image</p>

          '
        raw: "After the endpoint is deployed to SageMaker, the following error is\
          \ received upon invoking the model:\r\n\r\nModelError: An error occurred\
          \ (ModelError) when calling the InvokeEndpoint operation: Received client\
          \ error (400) from primary with message \"{\r\n  \"code\": 400,\r\n  \"\
          type\": \"InternalServerException\",\r\n  \"message\": \"\\nDetrForObjectDetection\
          \ requires the timm library but it was not found in your environment. You\
          \ can install it with pip:\\n`pip install timm`. Please note that you may\
          \ need to restart your runtime after installation.\\n\"}\r\n\r\nLooks like\
          \ an external dependency is missing on the image"
        updatedAt: '2023-11-30T10:45:56.866Z'
      numEdits: 0
      reactions: []
    id: 656867e42f3ec92d7e876fec
    type: comment
  author: orcaman2
  content: "After the endpoint is deployed to SageMaker, the following error is received\
    \ upon invoking the model:\r\n\r\nModelError: An error occurred (ModelError) when\
    \ calling the InvokeEndpoint operation: Received client error (400) from primary\
    \ with message \"{\r\n  \"code\": 400,\r\n  \"type\": \"InternalServerException\"\
    ,\r\n  \"message\": \"\\nDetrForObjectDetection requires the timm library but\
    \ it was not found in your environment. You can install it with pip:\\n`pip install\
    \ timm`. Please note that you may need to restart your runtime after installation.\\\
    n\"}\r\n\r\nLooks like an external dependency is missing on the image"
  created_at: 2023-11-30 10:45:56+00:00
  edited: false
  hidden: false
  id: 656867e42f3ec92d7e876fec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-12-19T07:59:43.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.618873119354248
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;orcaman2&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/orcaman2\"\
          >@<span class=\"underline\">orcaman2</span></a></span>\n\n\t</span></span>,</p>\n\
          <p>It's now possible to use the DETR models without relying on the \"timm\"\
          \ dependency. Just pass in revision=\u201Cno_timm\u201D to the from_pretrained\
          \ method:</p>\n<pre><code>from transformers import DetrForObjectDetection\n\
          \nmodel = DetrForObjectDetection.from_pretrained(\"facebook/detr-resnet-50\"\
          , revision=\"no_timm\")\n</code></pre>\n"
        raw: "Hi @orcaman2,\n\nIt's now possible to use the DETR models without relying\
          \ on the \"timm\" dependency. Just pass in revision=\u201Cno_timm\u201D\
          \ to the from_pretrained method:\n\n```\nfrom transformers import DetrForObjectDetection\n\
          \nmodel = DetrForObjectDetection.from_pretrained(\"facebook/detr-resnet-50\"\
          , revision=\"no_timm\")\n```"
        updatedAt: '2023-12-19T07:59:43.439Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - ydshieh
    id: 65814d6f0be5959522d60545
    type: comment
  author: nielsr
  content: "Hi @orcaman2,\n\nIt's now possible to use the DETR models without relying\
    \ on the \"timm\" dependency. Just pass in revision=\u201Cno_timm\u201D to the\
    \ from_pretrained method:\n\n```\nfrom transformers import DetrForObjectDetection\n\
    \nmodel = DetrForObjectDetection.from_pretrained(\"facebook/detr-resnet-50\",\
    \ revision=\"no_timm\")\n```"
  created_at: 2023-12-19 07:59:43+00:00
  edited: false
  hidden: false
  id: 65814d6f0be5959522d60545
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 14
repo_id: facebook/detr-resnet-50
repo_type: model
status: open
target_branch: null
title: SageMaker Deployment Not Working (image missing  timm library)
