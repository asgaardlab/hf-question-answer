!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Dimi3
conflicting_files: null
created_at: 2023-12-09 22:08:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f68f0508e783cc92af8a40c6537cf424.svg
      fullname: Kamgaing Dimitri
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Dimi3
      type: user
    createdAt: '2023-12-09T22:08:18.000Z'
    data:
      edited: false
      editors:
      - Dimi3
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8949382305145264
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f68f0508e783cc92af8a40c6537cf424.svg
          fullname: Kamgaing Dimitri
          isHf: false
          isPro: false
          name: Dimi3
          type: user
        html: '<p>Hello Guys.</p>

          <p>I am using this model with langchain and "dangvantuan/sentence-camembert-large"
          model embeddings<br>to build a Chatbot with RAG on French document.</p>

          <p>But when I ask question to the chatbot+RAG model in French, it answers
          in English systematically.</p>

          <p>I am sure that:</p>

          <ul>

          <li>The vector space contains french sentence</li>

          <li>vigogne-7b-chat model answer in french</li>

          </ul>

          <p>But the the chatbot+RAG model resulting always answers in English</p>

          '
        raw: "Hello Guys.\r\n\r\nI am using this model with langchain and \"dangvantuan/sentence-camembert-large\"\
          \ model embeddings\r\nto build a Chatbot with RAG on French document.\r\n\
          \r\nBut when I ask question to the chatbot+RAG model in French, it answers\
          \ in English systematically.\r\n\r\nI am sure that:\r\n- The vector space\
          \ contains french sentence\r\n- vigogne-7b-chat model answer in french\r\
          \n\r\nBut the the chatbot+RAG model resulting always answers in English"
        updatedAt: '2023-12-09T22:08:18.434Z'
      numEdits: 0
      reactions: []
    id: 6574e552ca03b6c514cdc240
    type: comment
  author: Dimi3
  content: "Hello Guys.\r\n\r\nI am using this model with langchain and \"dangvantuan/sentence-camembert-large\"\
    \ model embeddings\r\nto build a Chatbot with RAG on French document.\r\n\r\n\
    But when I ask question to the chatbot+RAG model in French, it answers in English\
    \ systematically.\r\n\r\nI am sure that:\r\n- The vector space contains french\
    \ sentence\r\n- vigogne-7b-chat model answer in french\r\n\r\nBut the the chatbot+RAG\
    \ model resulting always answers in English"
  created_at: 2023-12-09 22:08:18+00:00
  edited: false
  hidden: false
  id: 6574e552ca03b6c514cdc240
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f68f0508e783cc92af8a40c6537cf424.svg
      fullname: Kamgaing Dimitri
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Dimi3
      type: user
    createdAt: '2023-12-17T03:37:07.000Z'
    data:
      edited: false
      editors:
      - Dimi3
      hidden: false
      identifiedLanguage:
        language: fr
        probability: 0.2898140549659729
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f68f0508e783cc92af8a40c6537cf424.svg
          fullname: Kamgaing Dimitri
          isHf: false
          isPro: false
          name: Dimi3
          type: user
        html: "<p>Hello</p>\n<p>I finally solve my problem by adding a prompt template\
          \ to ConversationalRetrievalChain instance.<br>Prompt written in french</p>\n\
          <p>template=\"\"\"Vous \xEAtes un chatbot en conversation avec un humain.</p>\n\
          <p>\xC0 partir des parties extraites suivantes d'un long document et d'une\
          \ question, cr\xE9ez une r\xE9ponse finale.<br>{context}</p>\n<p>{chat_history}<br>Humain:\
          \ {user_query}<br>Chatbot:\"\"\"</p>\n<h1 id=\"prompt-template\">Prompt\
          \ template</h1>\n<p>prompt = PromptTemplate(<br>    input_variables=[\"\
          chat_history\", \"user_query\", \"context\"],<br>    template=template<br>)</p>\n\
          <p>qa_llm = ConversationalRetrievalChain.from_llm(llm=llm,<br>         \
          \                            retriever=retriever,<br>                  \
          \                   combine_docs_chain_kwargs={\"prompt\": prompt},<br>\
          \                                     return_source_documents=True,<br>\
          \                                     memory=memory,<br>               \
          \                      get_chat_history=lambda h : h)</p>\n"
        raw: "Hello\n\nI finally solve my problem by adding a prompt template to ConversationalRetrievalChain\
          \ instance.\nPrompt written in french\n\ntemplate=\"\"\"Vous \xEAtes un\
          \ chatbot en conversation avec un humain.\n\n\xC0 partir des parties extraites\
          \ suivantes d'un long document et d'une question, cr\xE9ez une r\xE9ponse\
          \ finale.\n{context}\n\n{chat_history}\nHumain: {user_query}\nChatbot:\"\
          \"\"\n\n# Prompt template\nprompt = PromptTemplate(\n    input_variables=[\"\
          chat_history\", \"user_query\", \"context\"],\n    template=template\n)\n\
          \nqa_llm = ConversationalRetrievalChain.from_llm(llm=llm,\n            \
          \                         retriever=retriever,\n                       \
          \              combine_docs_chain_kwargs={\"prompt\": prompt},\n       \
          \                              return_source_documents=True,\n         \
          \                            memory=memory,\n                          \
          \           get_chat_history=lambda h : h)"
        updatedAt: '2023-12-17T03:37:07.322Z'
      numEdits: 0
      reactions: []
    id: 657e6ce38888ccb894e9c4e6
    type: comment
  author: Dimi3
  content: "Hello\n\nI finally solve my problem by adding a prompt template to ConversationalRetrievalChain\
    \ instance.\nPrompt written in french\n\ntemplate=\"\"\"Vous \xEAtes un chatbot\
    \ en conversation avec un humain.\n\n\xC0 partir des parties extraites suivantes\
    \ d'un long document et d'une question, cr\xE9ez une r\xE9ponse finale.\n{context}\n\
    \n{chat_history}\nHumain: {user_query}\nChatbot:\"\"\"\n\n# Prompt template\n\
    prompt = PromptTemplate(\n    input_variables=[\"chat_history\", \"user_query\"\
    , \"context\"],\n    template=template\n)\n\nqa_llm = ConversationalRetrievalChain.from_llm(llm=llm,\n\
    \                                     retriever=retriever,\n                 \
    \                    combine_docs_chain_kwargs={\"prompt\": prompt},\n       \
    \                              return_source_documents=True,\n               \
    \                      memory=memory,\n                                     get_chat_history=lambda\
    \ h : h)"
  created_at: 2023-12-17 03:37:07+00:00
  edited: false
  hidden: false
  id: 657e6ce38888ccb894e9c4e6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f68f0508e783cc92af8a40c6537cf424.svg
      fullname: Kamgaing Dimitri
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Dimi3
      type: user
    createdAt: '2023-12-17T03:37:21.000Z'
    data:
      status: closed
    id: 657e6cf1792970912804658e
    type: status-change
  author: Dimi3
  created_at: 2023-12-17 03:37:21+00:00
  id: 657e6cf1792970912804658e
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: bofenghuang/vigogne-7b-chat
repo_type: model
status: closed
target_branch: null
title: The model answers in English instead of French
