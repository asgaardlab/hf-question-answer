!!python/object:huggingface_hub.community.DiscussionWithDetails
author: loubnabnl
conflicting_files: null
created_at: 2023-08-29 07:55:26+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/81AwoT5IQ_Xdw0OVw7TKu.jpeg?w=200&h=200&f=face
      fullname: Loubna Ben Allal
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: loubnabnl
      type: user
    createdAt: '2023-08-29T08:55:26.000Z'
    data:
      edited: true
      editors:
      - loubnabnl
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5124619603157043
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/81AwoT5IQ_Xdw0OVw7TKu.jpeg?w=200&h=200&f=face
          fullname: Loubna Ben Allal
          isHf: true
          isPro: false
          name: loubnabnl
          type: user
        html: '<p>The <code>bos_token</code> in <code>special_tokens_map.json</code>
          seems to be <code>&lt;/s&gt;</code> when it should be <code>&lt;s&gt;</code>
          since that''s the token being added at start of each sequence (id 1)</p>

          <pre><code class="language-python">tokenizer = AutoTokenizer.from_pretrained(<span
          class="hljs-string">"WizardLM/WizardCoder-Python-34B-V1.0"</span>)

          <span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.bos_token

          <span class="hljs-string">''&lt;/s&gt;''</span>

          <span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer.bos_token_id

          <span class="hljs-number">2</span>

          <span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer(<span class="hljs-string">"&lt;/s&gt;"</span>)

          {<span class="hljs-string">''input_ids''</span>: [<span class="hljs-number">1</span>,
          <span class="hljs-number">2</span>], <span class="hljs-string">''attention_mask''</span>:
          [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]}

          </code></pre>

          '
        raw: 'The `bos_token` in `special_tokens_map.json` seems to be `</s>` when
          it should be `<s>` since that''s the token being added at start of each
          sequence (id 1)


          ```python

          tokenizer = AutoTokenizer.from_pretrained("WizardLM/WizardCoder-Python-34B-V1.0")

          >>> tokenizer.bos_token

          ''</s>''

          >>> tokenizer.bos_token_id

          2

          >>> tokenizer("</s>")

          {''input_ids'': [1, 2], ''attention_mask'': [1, 1]}

          ```'
        updatedAt: '2023-08-29T09:00:56.436Z'
      numEdits: 1
      reactions: []
    id: 64edb27e1a9234f0f6ec2bd0
    type: comment
  author: loubnabnl
  content: 'The `bos_token` in `special_tokens_map.json` seems to be `</s>` when it
    should be `<s>` since that''s the token being added at start of each sequence
    (id 1)


    ```python

    tokenizer = AutoTokenizer.from_pretrained("WizardLM/WizardCoder-Python-34B-V1.0")

    >>> tokenizer.bos_token

    ''</s>''

    >>> tokenizer.bos_token_id

    2

    >>> tokenizer("</s>")

    {''input_ids'': [1, 2], ''attention_mask'': [1, 1]}

    ```'
  created_at: 2023-08-29 07:55:26+00:00
  edited: true
  hidden: false
  id: 64edb27e1a9234f0f6ec2bd0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6090ff099a8bcaa437b234a4/nxN64gFkr5o5UZM-i03re.png?w=200&h=200&f=face
      fullname: Ziyang Luo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ziyang
      type: user
    createdAt: '2023-08-29T09:54:43.000Z'
    data:
      edited: false
      editors:
      - Ziyang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8141733407974243
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6090ff099a8bcaa437b234a4/nxN64gFkr5o5UZM-i03re.png?w=200&h=200&f=face
          fullname: Ziyang Luo
          isHf: false
          isPro: false
          name: Ziyang
          type: user
        html: '<p>During training, we set bos_token and eos_token to be the same <code>&lt;/s&gt;</code>.</p>

          '
        raw: During training, we set bos_token and eos_token to be the same `</s>`.
        updatedAt: '2023-08-29T09:54:43.006Z'
      numEdits: 0
      reactions: []
    id: 64edc063f172ec32ddd7a3fb
    type: comment
  author: Ziyang
  content: During training, we set bos_token and eos_token to be the same `</s>`.
  created_at: 2023-08-29 08:54:43+00:00
  edited: false
  hidden: false
  id: 64edc063f172ec32ddd7a3fb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/81AwoT5IQ_Xdw0OVw7TKu.jpeg?w=200&h=200&f=face
      fullname: Loubna Ben Allal
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: loubnabnl
      type: user
    createdAt: '2023-08-29T10:33:43.000Z'
    data:
      edited: false
      editors:
      - loubnabnl
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.770291805267334
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61c141342aac764ce1654e43/81AwoT5IQ_Xdw0OVw7TKu.jpeg?w=200&h=200&f=face
          fullname: Loubna Ben Allal
          isHf: true
          isPro: false
          name: loubnabnl
          type: user
        html: '<p>I see, but in this case shouldn''t the <code>bos_token</code> be
          changed in <a href="https://huggingface.co/WizardLM/WizardCoder-Python-34B-V1.0/blob/5cdc34e4a81d202f1d4a3b5d60e028aab895dfeb/tokenizer_config.json#L4">tokenizer_config</a>
          to be <code>&lt;/s&gt;</code> for consistency so it''s the token that gets
          added at the beginning?</p>

          '
        raw: I see, but in this case shouldn't the `bos_token` be changed in [tokenizer_config](https://huggingface.co/WizardLM/WizardCoder-Python-34B-V1.0/blob/5cdc34e4a81d202f1d4a3b5d60e028aab895dfeb/tokenizer_config.json#L4)
          to be `</s>` for consistency so it's the token that gets added at the beginning?
        updatedAt: '2023-08-29T10:33:43.956Z'
      numEdits: 0
      reactions: []
    id: 64edc9871d37361c583ce6fd
    type: comment
  author: loubnabnl
  content: I see, but in this case shouldn't the `bos_token` be changed in [tokenizer_config](https://huggingface.co/WizardLM/WizardCoder-Python-34B-V1.0/blob/5cdc34e4a81d202f1d4a3b5d60e028aab895dfeb/tokenizer_config.json#L4)
    to be `</s>` for consistency so it's the token that gets added at the beginning?
  created_at: 2023-08-29 09:33:43+00:00
  edited: false
  hidden: false
  id: 64edc9871d37361c583ce6fd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6090ff099a8bcaa437b234a4/nxN64gFkr5o5UZM-i03re.png?w=200&h=200&f=face
      fullname: Ziyang Luo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ziyang
      type: user
    createdAt: '2023-08-30T07:42:33.000Z'
    data:
      edited: false
      editors:
      - Ziyang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6959218978881836
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6090ff099a8bcaa437b234a4/nxN64gFkr5o5UZM-i03re.png?w=200&h=200&f=face
          fullname: Ziyang Luo
          isHf: false
          isPro: false
          name: Ziyang
          type: user
        html: '<p>I have done an extra experiment to change the <code>bos_token</code>
          in the tokenizer_config  to <code>&lt;/s&gt;</code> on our <code>WizardLM/WizardCoder-Python-7B-V1.0</code>.
          The humaneval score decreases from 55.5 to 51.2. Therefore, we cannot modify
          the <code>bos_token</code> in the <code>tokenizer_config</code>.</p>

          '
        raw: I have done an extra experiment to change the `bos_token` in the tokenizer_config  to
          `</s>` on our `WizardLM/WizardCoder-Python-7B-V1.0`. The humaneval score
          decreases from 55.5 to 51.2. Therefore, we cannot modify the `bos_token`
          in the `tokenizer_config`.
        updatedAt: '2023-08-30T07:42:33.415Z'
      numEdits: 0
      reactions: []
    id: 64eef2e9281500ecd5b656a3
    type: comment
  author: Ziyang
  content: I have done an extra experiment to change the `bos_token` in the tokenizer_config  to
    `</s>` on our `WizardLM/WizardCoder-Python-7B-V1.0`. The humaneval score decreases
    from 55.5 to 51.2. Therefore, we cannot modify the `bos_token` in the `tokenizer_config`.
  created_at: 2023-08-30 06:42:33+00:00
  edited: false
  hidden: false
  id: 64eef2e9281500ecd5b656a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/627b9f3f4d0858f0034efbb9/2Qnattrzv6qvqiZVVfV5x.png?w=200&h=200&f=face
      fullname: WizardLM
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: WizardLM
      type: user
    createdAt: '2023-09-14T06:59:39.000Z'
    data:
      status: closed
    id: 6502af5b2cec4c6d94eb2311
    type: status-change
  author: WizardLM
  created_at: 2023-09-14 05:59:39+00:00
  id: 6502af5b2cec4c6d94eb2311
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 15
repo_id: WizardLM/WizardCoder-Python-34B-V1.0
repo_type: model
status: closed
target_branch: null
title: wrong bos_token
