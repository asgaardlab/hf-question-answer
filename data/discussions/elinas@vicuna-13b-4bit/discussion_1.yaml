!!python/object:huggingface_hub.community.DiscussionWithDetails
author: MohamedRashad
conflicting_files: null
created_at: 2023-04-04 15:14:07+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
      fullname: Mohamed Rashad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MohamedRashad
      type: user
    createdAt: '2023-04-04T16:14:07.000Z'
    data:
      edited: false
      editors:
      - MohamedRashad
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
          fullname: Mohamed Rashad
          isHf: false
          isPro: false
          name: MohamedRashad
          type: user
        html: '<p>I use this command for inference</p>

          <pre><code>CUDA_VISIBLE_DEVICES=0 python llama_inference.py elinas/vicuna-13b-4bit
          --wbits 4 --groupsize 128 --load vicuna-13b-4bit/vicuna-13b-4bit-128g.safetensors
          --text "this is llama"

          </code></pre>

          <p>and it give me an error in loading state dict</p>

          '
        raw: "I use this command for inference\r\n```\r\nCUDA_VISIBLE_DEVICES=0 python\
          \ llama_inference.py elinas/vicuna-13b-4bit --wbits 4 --groupsize 128 --load\
          \ vicuna-13b-4bit/vicuna-13b-4bit-128g.safetensors --text \"this is llama\"\
          \r\n```\r\nand it give me an error in loading state dict"
        updatedAt: '2023-04-04T16:14:07.294Z'
      numEdits: 0
      reactions: []
    id: 642c4ccfad221e8f41cfb5a4
    type: comment
  author: MohamedRashad
  content: "I use this command for inference\r\n```\r\nCUDA_VISIBLE_DEVICES=0 python\
    \ llama_inference.py elinas/vicuna-13b-4bit --wbits 4 --groupsize 128 --load vicuna-13b-4bit/vicuna-13b-4bit-128g.safetensors\
    \ --text \"this is llama\"\r\n```\r\nand it give me an error in loading state\
    \ dict"
  created_at: 2023-04-04 15:14:07+00:00
  edited: false
  hidden: false
  id: 642c4ccfad221e8f41cfb5a4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-04T16:21:13.000Z'
    data:
      edited: false
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: '<p>See this in the README and ensure you''re on the stable commit.
          <a href="https://huggingface.co/elinas/vicuna-13b-4bit#update-2023-04-03">https://huggingface.co/elinas/vicuna-13b-4bit#update-2023-04-03</a></p>

          '
        raw: See this in the README and ensure you're on the stable commit. https://huggingface.co/elinas/vicuna-13b-4bit#update-2023-04-03
        updatedAt: '2023-04-04T16:21:13.068Z'
      numEdits: 0
      reactions: []
    id: 642c4e79344576fa5eb63740
    type: comment
  author: elinas
  content: See this in the README and ensure you're on the stable commit. https://huggingface.co/elinas/vicuna-13b-4bit#update-2023-04-03
  created_at: 2023-04-04 15:21:13+00:00
  edited: false
  hidden: false
  id: 642c4e79344576fa5eb63740
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
      fullname: Neal Chandra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nealchandra
      type: user
    createdAt: '2023-04-04T20:30:18.000Z'
    data:
      edited: false
      editors:
      - nealchandra
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
          fullname: Neal Chandra
          isHf: false
          isPro: false
          name: nealchandra
          type: user
        html: "<p>With the stable commit indicated in the readme, I'm able to load\
          \ the model fine but inference still fails with the following error:</p>\n\
          <pre><code>TypeError: vecquant4matmul(): incompatible function arguments.\
          \ The following argument types are supported:\n    1. (arg0: at::Tensor,\
          \ arg1: at::Tensor, arg2: at::Tensor, arg3: at::Tensor, arg4: at::Tensor)\
          \ -&gt; None\n</code></pre>\n<p>Any ideas? Is there a particular commit\
          \ of transformers you are pinned to?</p>\n"
        raw: "With the stable commit indicated in the readme, I'm able to load the\
          \ model fine but inference still fails with the following error:\n```\n\
          TypeError: vecquant4matmul(): incompatible function arguments. The following\
          \ argument types are supported:\n    1. (arg0: at::Tensor, arg1: at::Tensor,\
          \ arg2: at::Tensor, arg3: at::Tensor, arg4: at::Tensor) -> None\n```\n\n\
          Any ideas? Is there a particular commit of transformers you are pinned to?"
        updatedAt: '2023-04-04T20:30:18.592Z'
      numEdits: 0
      reactions: []
    id: 642c88da7bbd30404933fb4e
    type: comment
  author: nealchandra
  content: "With the stable commit indicated in the readme, I'm able to load the model\
    \ fine but inference still fails with the following error:\n```\nTypeError: vecquant4matmul():\
    \ incompatible function arguments. The following argument types are supported:\n\
    \    1. (arg0: at::Tensor, arg1: at::Tensor, arg2: at::Tensor, arg3: at::Tensor,\
    \ arg4: at::Tensor) -> None\n```\n\nAny ideas? Is there a particular commit of\
    \ transformers you are pinned to?"
  created_at: 2023-04-04 19:30:18+00:00
  edited: false
  hidden: false
  id: 642c88da7bbd30404933fb4e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-04T21:12:09.000Z'
    data:
      edited: false
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: '<p>This does not support llama.cpp, this is for GPTQ via CUDA (or triton).</p>

          '
        raw: This does not support llama.cpp, this is for GPTQ via CUDA (or triton).
        updatedAt: '2023-04-04T21:12:09.595Z'
      numEdits: 0
      reactions: []
    id: 642c92a977fcbd9c3306275d
    type: comment
  author: elinas
  content: This does not support llama.cpp, this is for GPTQ via CUDA (or triton).
  created_at: 2023-04-04 20:12:09+00:00
  edited: false
  hidden: false
  id: 642c92a977fcbd9c3306275d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
      fullname: Neal Chandra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nealchandra
      type: user
    createdAt: '2023-04-04T21:43:47.000Z'
    data:
      edited: true
      editors:
      - nealchandra
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
          fullname: Neal Chandra
          isHf: false
          isPro: false
          name: nealchandra
          type: user
        html: '<p>Right, I understand -- this is running on an A5000 in the cloud.
          Perhaps it''s not using the correct device, I will investigate a bit further.</p>

          <p>EDIT -- was able to get it working, needed to rerun setup_cuda</p>

          '
        raw: 'Right, I understand -- this is running on an A5000 in the cloud. Perhaps
          it''s not using the correct device, I will investigate a bit further.


          EDIT -- was able to get it working, needed to rerun setup_cuda'
        updatedAt: '2023-04-05T01:24:22.198Z'
      numEdits: 1
      reactions: []
    id: 642c9a133bf67e4014209ebf
    type: comment
  author: nealchandra
  content: 'Right, I understand -- this is running on an A5000 in the cloud. Perhaps
    it''s not using the correct device, I will investigate a bit further.


    EDIT -- was able to get it working, needed to rerun setup_cuda'
  created_at: 2023-04-04 20:43:47+00:00
  edited: true
  hidden: false
  id: 642c9a133bf67e4014209ebf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
      fullname: Mohamed Rashad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MohamedRashad
      type: user
    createdAt: '2023-04-04T21:45:32.000Z'
    data:
      edited: false
      editors:
      - MohamedRashad
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
          fullname: Mohamed Rashad
          isHf: false
          isPro: false
          name: MohamedRashad
          type: user
        html: '<pre><code>fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

          </code></pre>

          <p>I am getting reference error when checkingout to the commit specified</p>

          '
        raw: '```

          fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

          ```

          I am getting reference error when checkingout to the commit specified'
        updatedAt: '2023-04-04T21:45:32.608Z'
      numEdits: 0
      reactions: []
    id: 642c9a7c3bf67e401420a148
    type: comment
  author: MohamedRashad
  content: '```

    fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

    ```

    I am getting reference error when checkingout to the commit specified'
  created_at: 2023-04-04 20:45:32+00:00
  edited: false
  hidden: false
  id: 642c9a7c3bf67e401420a148
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-04T21:48:10.000Z'
    data:
      edited: false
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: '<p>I have not seen that error format before so I assumed you were using
          the Python llama.cpp wrapper.</p>

          '
        raw: I have not seen that error format before so I assumed you were using
          the Python llama.cpp wrapper.
        updatedAt: '2023-04-04T21:48:10.741Z'
      numEdits: 0
      reactions: []
    id: 642c9b1ac811cd1de5bbf30e
    type: comment
  author: elinas
  content: I have not seen that error format before so I assumed you were using the
    Python llama.cpp wrapper.
  created_at: 2023-04-04 20:48:10+00:00
  edited: false
  hidden: false
  id: 642c9b1ac811cd1de5bbf30e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-04T21:52:00.000Z'
    data:
      edited: false
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: '<blockquote>

          <p>I am getting reference error when checkingout to the commit specified</p>

          </blockquote>

          <p>Paste the content of the topmost entry from the command <code>git log</code></p>

          '
        raw: '> I am getting reference error when checkingout to the commit specified


          Paste the content of the topmost entry from the command `git log`'
        updatedAt: '2023-04-04T21:52:00.467Z'
      numEdits: 0
      reactions: []
    id: 642c9c003bf67e401420ab5d
    type: comment
  author: elinas
  content: '> I am getting reference error when checkingout to the commit specified


    Paste the content of the topmost entry from the command `git log`'
  created_at: 2023-04-04 20:52:00+00:00
  edited: false
  hidden: false
  id: 642c9c003bf67e401420ab5d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
      fullname: Neal Chandra
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nealchandra
      type: user
    createdAt: '2023-04-04T21:57:40.000Z'
    data:
      edited: false
      editors:
      - nealchandra
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/168969944b2772fed6c599f3047fb833.svg
          fullname: Neal Chandra
          isHf: false
          isPro: false
          name: nealchandra
          type: user
        html: '<blockquote>

          <pre><code>fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

          </code></pre>

          <p>I am getting reference error when checkingout to the commit specified</p>

          </blockquote>

          <p>I think you just need to do <code>git fetch origin a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773</code></p>

          '
        raw: '> ```

          > fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

          > ```

          > I am getting reference error when checkingout to the commit specified


          I think you just need to do `git fetch origin a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773`'
        updatedAt: '2023-04-04T21:57:40.702Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - MohamedRashad
    id: 642c9d540d7975d94274714b
    type: comment
  author: nealchandra
  content: '> ```

    > fatal: reference is not a tree: a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773

    > ```

    > I am getting reference error when checkingout to the commit specified


    I think you just need to do `git fetch origin a6f363e3f93b9fb5c26064b5ac7ed58d22e3f773`'
  created_at: 2023-04-04 20:57:40+00:00
  edited: false
  hidden: false
  id: 642c9d540d7975d94274714b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
      fullname: Mohamed Rashad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MohamedRashad
      type: user
    createdAt: '2023-04-05T11:18:55.000Z'
    data:
      edited: false
      editors:
      - MohamedRashad
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1628885133347-6116d0584ef9fdfbf45dc4d9.jpeg?w=200&h=200&f=face
          fullname: Mohamed Rashad
          isHf: false
          isPro: false
          name: MohamedRashad
          type: user
        html: '<p>I was able to fix the quant problem now it gives me this error:</p>

          <pre><code>Missing key(s) in state_dict

          </code></pre>

          '
        raw: 'I was able to fix the quant problem now it gives me this error:

          ```

          Missing key(s) in state_dict

          ```'
        updatedAt: '2023-04-05T11:18:55.975Z'
      numEdits: 0
      reactions: []
    id: 642d591f2ad4ad6f9ab15ddd
    type: comment
  author: MohamedRashad
  content: 'I was able to fix the quant problem now it gives me this error:

    ```

    Missing key(s) in state_dict

    ```'
  created_at: 2023-04-05 10:18:55+00:00
  edited: false
  hidden: false
  id: 642d591f2ad4ad6f9ab15ddd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-05T16:43:32.000Z'
    data:
      edited: false
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;nealchandra&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/nealchandra\"\
          >@<span class=\"underline\">nealchandra</span></a></span>\n\n\t</span></span>\
          \ Thanks, I saw that commit is no longer in the base repo (I haven't fetched\
          \ so I can still checkout that branch). I have updated the instructions\
          \ to just use the fork.</p>\n"
        raw: '@nealchandra Thanks, I saw that commit is no longer in the base repo
          (I haven''t fetched so I can still checkout that branch). I have updated
          the instructions to just use the fork.'
        updatedAt: '2023-04-05T16:43:32.801Z'
      numEdits: 0
      reactions: []
    id: 642da5342098ed5747273c64
    type: comment
  author: elinas
  content: '@nealchandra Thanks, I saw that commit is no longer in the base repo (I
    haven''t fetched so I can still checkout that branch). I have updated the instructions
    to just use the fork.'
  created_at: 2023-04-05 15:43:32+00:00
  edited: false
  hidden: false
  id: 642da5342098ed5747273c64
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
      fullname: elinas
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: elinas
      type: user
    createdAt: '2023-04-05T16:45:04.000Z'
    data:
      edited: true
      editors:
      - elinas
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630417380907b9a115c6aa9f/hsmz_dU2AyXe1DWHW7Pvd.png?w=200&h=200&f=face
          fullname: elinas
          isHf: false
          isPro: false
          name: elinas
          type: user
        html: '<blockquote>

          <p>I was able to fix the quant problem now it gives me this error:</p>

          <pre><code>Missing key(s) in state_dict

          </code></pre>

          </blockquote>

          <p>Make sure you have followed the above steps such as running <code>python
          setup_cuda.py install</code> and having all of the <code>requirements.txt</code>
          installed.</p>

          <p><a rel="nofollow" href="https://github.com/oobabooga/GPTQ-for-LLaMa#installation">https://github.com/oobabooga/GPTQ-for-LLaMa#installation</a></p>

          '
        raw: '> I was able to fix the quant problem now it gives me this error:

          > ```

          > Missing key(s) in state_dict

          > ```


          Make sure you have followed the above steps such as running `python setup_cuda.py
          install` and having all of the `requirements.txt` installed.


          https://github.com/oobabooga/GPTQ-for-LLaMa#installation'
        updatedAt: '2023-04-05T16:47:09.557Z'
      numEdits: 1
      reactions: []
    id: 642da590baf943d5db43a148
    type: comment
  author: elinas
  content: '> I was able to fix the quant problem now it gives me this error:

    > ```

    > Missing key(s) in state_dict

    > ```


    Make sure you have followed the above steps such as running `python setup_cuda.py
    install` and having all of the `requirements.txt` installed.


    https://github.com/oobabooga/GPTQ-for-LLaMa#installation'
  created_at: 2023-04-05 15:45:04+00:00
  edited: true
  hidden: false
  id: 642da590baf943d5db43a148
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: elinas/vicuna-13b-4bit
repo_type: model
status: open
target_branch: null
title: Can't run the model
