!!python/object:huggingface_hub.community.DiscussionWithDetails
author: YanShu
conflicting_files: null
created_at: 2023-04-06 08:01:40+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5ffb10324cd494239bb0dee9c84be049.svg
      fullname: Yan Shu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: YanShu
      type: user
    createdAt: '2023-04-06T09:01:40.000Z'
    data:
      edited: false
      editors:
      - YanShu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5ffb10324cd494239bb0dee9c84be049.svg
          fullname: Yan Shu
          isHf: false
          isPro: false
          name: YanShu
          type: user
        html: "<p>Hi!<br>Good job!<br>I'm trying to reproduce your TemporalNet base\
          \ on the code of ControlNet, but it works bad. I just made another controlnet\
          \ model as \"temporalnet model\". the temporalnet utilizes the last generated\
          \ image as input and is initialized with the parameters in  <code>diff_control_sd15_temporalnet_fp16.safetensors</code>.\
          \ The output of the temporalnet is added to the middle and decoder block\
          \ of stable diffusion model at the same location as the ControlNet, which\
          \ is initialized with <code>control_sd15_hed.pth</code>. And the control\
          \ weight is 1.5 and 0.7 for ControlNet and TemporalNet respectively, comparing\
          \ with 1.0 in the original ControlNet. Is there any problem about my understanding\
          \ of TemporalNet structure? Could you please correct it for me\uFF1F Thanks!</p>\n"
        raw: "Hi!\r\nGood job!\r\nI'm trying to reproduce your TemporalNet base on\
          \ the code of ControlNet, but it works bad. I just made another controlnet\
          \ model as \"temporalnet model\". the temporalnet utilizes the last generated\
          \ image as input and is initialized with the parameters in  `diff_control_sd15_temporalnet_fp16.safetensors`.\
          \ The output of the temporalnet is added to the middle and decoder block\
          \ of stable diffusion model at the same location as the ControlNet, which\
          \ is initialized with `control_sd15_hed.pth`. And the control weight is\
          \ 1.5 and 0.7 for ControlNet and TemporalNet respectively, comparing with\
          \ 1.0 in the original ControlNet. Is there any problem about my understanding\
          \ of TemporalNet structure? Could you please correct it for me\uFF1F Thanks!"
        updatedAt: '2023-04-06T09:01:40.558Z'
      numEdits: 0
      reactions: []
    id: 642e8a7458ba61373f2f5bf0
    type: comment
  author: YanShu
  content: "Hi!\r\nGood job!\r\nI'm trying to reproduce your TemporalNet base on the\
    \ code of ControlNet, but it works bad. I just made another controlnet model as\
    \ \"temporalnet model\". the temporalnet utilizes the last generated image as\
    \ input and is initialized with the parameters in  `diff_control_sd15_temporalnet_fp16.safetensors`.\
    \ The output of the temporalnet is added to the middle and decoder block of stable\
    \ diffusion model at the same location as the ControlNet, which is initialized\
    \ with `control_sd15_hed.pth`. And the control weight is 1.5 and 0.7 for ControlNet\
    \ and TemporalNet respectively, comparing with 1.0 in the original ControlNet.\
    \ Is there any problem about my understanding of TemporalNet structure? Could\
    \ you please correct it for me\uFF1F Thanks!"
  created_at: 2023-04-06 08:01:40+00:00
  edited: false
  hidden: false
  id: 642e8a7458ba61373f2f5bf0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
      fullname: Ciara
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: CiaraRowles
      type: user
    createdAt: '2023-04-06T11:01:41.000Z'
    data:
      edited: false
      editors:
      - CiaraRowles
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
          fullname: Ciara
          isHf: false
          isPro: false
          name: CiaraRowles
          type: user
        html: '<p>Hi!</p>

          <p>So if i''m reading this right, you''re trying to re-create this kind
          of model by using the generated outputs as dataset?</p>

          '
        raw: 'Hi!


          So if i''m reading this right, you''re trying to re-create this kind of
          model by using the generated outputs as dataset?'
        updatedAt: '2023-04-06T11:01:41.526Z'
      numEdits: 0
      reactions: []
    id: 642ea6953285417bb3b84978
    type: comment
  author: CiaraRowles
  content: 'Hi!


    So if i''m reading this right, you''re trying to re-create this kind of model
    by using the generated outputs as dataset?'
  created_at: 2023-04-06 10:01:41+00:00
  edited: false
  hidden: false
  id: 642ea6953285417bb3b84978
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5ffb10324cd494239bb0dee9c84be049.svg
      fullname: Yan Shu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: YanShu
      type: user
    createdAt: '2023-04-06T13:08:13.000Z'
    data:
      edited: true
      editors:
      - YanShu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5ffb10324cd494239bb0dee9c84be049.svg
          fullname: Yan Shu
          isHf: false
          isPro: false
          name: YanShu
          type: user
        html: '<p>Hi!</p>

          <p>Actually, I want to run TemporalNet without WebUI, just using PyTorch
          codes. So I need to understand the structure of the TemporalNet and how
          does it work. The above statement " <code>I just made another controlnet
          model as "temporalnet model". ... And the control weight is 1.5 and 0.7
          for ControlNet and TemporalNet respectively</code>" is my understanding.
          but according to the experiment results, it seems that i didn''t figure
          out how do the TemporalNet work. Please let me try to clarify it:</p>

          <blockquote>

          <ol>

          <li>To generate the i-th frame, TemporalNet use the generated (i-1)-th frame
          as input.</li>

          <li>The outputs of the TemporalNet are added to the middle and decoder blocks
          of stable diffusion model along with the corresponding output of the ControlNet.
          For example, the outputs from the middle block of the TemporalNet and the
          ControlNet are both added to the middle block of the stable diffusion.</li>

          <li>The add operation termed in <code>2</code> are weighted sum. That is:
          $z_{sd_{new}} = z_{sd} + 1.5\times z_{controlnet} + 0.7\times z_{temporalnet}$.</li>

          <li>The parameters of the TemporalNet are loaded from <code>diff_control_sd15_temporalnet_fp16.safetensors</code>
          and the ControlNet from <code>control_sd15_hed.pth</code>.</li>

          </ol>

          </blockquote>

          <p>Do I misunderstand the structure of the TemporalNet? Could you please
          correct it for me? Thanks again!</p>

          '
        raw: 'Hi!


          Actually, I want to run TemporalNet without WebUI, just using PyTorch codes.
          So I need to understand the structure of the TemporalNet and how does it
          work. The above statement " `I just made another controlnet model as "temporalnet
          model". ... And the control weight is 1.5 and 0.7 for ControlNet and TemporalNet
          respectively`" is my understanding. but according to the experiment results,
          it seems that i didn''t figure out how do the TemporalNet work. Please let
          me try to clarify it:


          >1. To generate the i-th frame, TemporalNet use the generated (i-1)-th frame
          as input.

          >2. The outputs of the TemporalNet are added to the middle and decoder blocks
          of stable diffusion model along with the corresponding output of the ControlNet.
          For example, the outputs from the middle block of the TemporalNet and the
          ControlNet are both added to the middle block of the stable diffusion.

          >3. The add operation termed in `2` are weighted sum. That is: $z_{sd_{new}}
          = z_{sd} + 1.5\times z_{controlnet} + 0.7\times z_{temporalnet}$.

          >4. The parameters of the TemporalNet are loaded from `diff_control_sd15_temporalnet_fp16.safetensors`
          and the ControlNet from `control_sd15_hed.pth`.


          Do I misunderstand the structure of the TemporalNet? Could you please correct
          it for me? Thanks again!'
        updatedAt: '2023-04-06T14:42:31.075Z'
      numEdits: 4
      reactions: []
    id: 642ec43d32e711e21aa0f9cb
    type: comment
  author: YanShu
  content: 'Hi!


    Actually, I want to run TemporalNet without WebUI, just using PyTorch codes. So
    I need to understand the structure of the TemporalNet and how does it work. The
    above statement " `I just made another controlnet model as "temporalnet model".
    ... And the control weight is 1.5 and 0.7 for ControlNet and TemporalNet respectively`"
    is my understanding. but according to the experiment results, it seems that i
    didn''t figure out how do the TemporalNet work. Please let me try to clarify it:


    >1. To generate the i-th frame, TemporalNet use the generated (i-1)-th frame as
    input.

    >2. The outputs of the TemporalNet are added to the middle and decoder blocks
    of stable diffusion model along with the corresponding output of the ControlNet.
    For example, the outputs from the middle block of the TemporalNet and the ControlNet
    are both added to the middle block of the stable diffusion.

    >3. The add operation termed in `2` are weighted sum. That is: $z_{sd_{new}} =
    z_{sd} + 1.5\times z_{controlnet} + 0.7\times z_{temporalnet}$.

    >4. The parameters of the TemporalNet are loaded from `diff_control_sd15_temporalnet_fp16.safetensors`
    and the ControlNet from `control_sd15_hed.pth`.


    Do I misunderstand the structure of the TemporalNet? Could you please correct
    it for me? Thanks again!'
  created_at: 2023-04-06 12:08:13+00:00
  edited: true
  hidden: false
  id: 642ec43d32e711e21aa0f9cb
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 16
repo_id: CiaraRowles/TemporalNet
repo_type: model
status: open
target_branch: null
title: Question about model structure
