!!python/object:huggingface_hub.community.DiscussionWithDetails
author: abhi-mosaic
conflicting_files: []
created_at: 2023-06-02 23:00:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:00:29.000Z'
    data:
      edited: true
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.11044929921627045
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>** Duplicate of <a href="https://huggingface.co/mosaicml/mpt-7b/discussions/47">https://huggingface.co/mosaicml/mpt-7b/discussions/47</a>
          **</p>

          <p>This PR adds updates from the LLM Foundry repo as of 06/01/2023.</p>

          <p>These include:</p>

          <ul>

          <li><code>device_map</code> support for multiple GPUs</li>

          <li>faster inference thanks to a refactor of the KV cacheing</li>

          <li>bugfix for returning the last hidden_state</li>

          <li>support for <code>output_attentions</code> when using <code>attn_impl:
          torch</code></li>

          <li>a <code>requirements.txt</code> file to make it easier to know what
          you need to install for MPT</li>

          <li>updated README instructions for fast GPU initialization</li>

          </ul>

          '
        raw: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
          **


          This PR adds updates from the LLM Foundry repo as of 06/01/2023.


          These include:


          * `device_map` support for multiple GPUs

          * faster inference thanks to a refactor of the KV cacheing

          * bugfix for returning the last hidden_state

          * support for `output_attentions` when using `attn_impl: torch`

          * a `requirements.txt` file to make it easier to know what you need to install
          for MPT

          * updated README instructions for fast GPU initialization'
        updatedAt: '2023-06-03T00:07:14.113Z'
      numEdits: 2
      reactions: []
    id: 647a829d44b6a3ae9d28e893
    type: comment
  author: abhi-mosaic
  content: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
    **


    This PR adds updates from the LLM Foundry repo as of 06/01/2023.


    These include:


    * `device_map` support for multiple GPUs

    * faster inference thanks to a refactor of the KV cacheing

    * bugfix for returning the last hidden_state

    * support for `output_attentions` when using `attn_impl: torch`

    * a `requirements.txt` file to make it easier to know what you need to install
    for MPT

    * updated README instructions for fast GPU initialization'
  created_at: 2023-06-02 23:00:29+00:00
  edited: true
  hidden: false
  id: 647a829d44b6a3ae9d28e893
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:01:35.000Z'
    data:
      oid: 7ce579222d350dde0f9b08301df5417aa3fc3aca
      parents:
      - 87f6b347622fc8b0bf855717b74528825f5c77e2
      subject: wip
    id: 647a82df0000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 23:01:35+00:00
  id: 647a82df0000000000000000
  oid: 7ce579222d350dde0f9b08301df5417aa3fc3aca
  summary: wip
  type: commit
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:03:00.000Z'
    data:
      oid: b1bd9bce58065db5a248cc49e7799877fe0277a2
      parents:
      - 7ce579222d350dde0f9b08301df5417aa3fc3aca
      subject: update README
    id: 647a83340000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 23:03:00+00:00
  id: 647a83340000000000000000
  oid: b1bd9bce58065db5a248cc49e7799877fe0277a2
  summary: update README
  type: commit
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:03:10.000Z'
    data:
      status: open
    id: 647a833e42abe27747612b52
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 23:03:10+00:00
  id: 647a833e42abe27747612b52
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:07:23.000Z'
    data:
      edited: false
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4245477616786957
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>Tested with LLM Foundry: <code>python scripts/inference/hf_generate.py
          -n mosaicml/mpt-7b-chat --revision pr/17 --device_map auto</code></p>

          '
        raw: 'Tested with LLM Foundry: `python scripts/inference/hf_generate.py -n
          mosaicml/mpt-7b-chat --revision pr/17 --device_map auto`'
        updatedAt: '2023-06-03T00:07:23.183Z'
      numEdits: 0
      reactions: []
      relatedEventId: 647a843b44b6a3ae9d291409
    id: 647a843b44b6a3ae9d291405
    type: comment
  author: abhi-mosaic
  content: 'Tested with LLM Foundry: `python scripts/inference/hf_generate.py -n mosaicml/mpt-7b-chat
    --revision pr/17 --device_map auto`'
  created_at: 2023-06-02 23:07:23+00:00
  edited: false
  hidden: false
  id: 647a843b44b6a3ae9d291405
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:07:23.000Z'
    data:
      status: merged
    id: 647a843b44b6a3ae9d291409
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 23:07:23+00:00
  id: 647a843b44b6a3ae9d291409
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: 001074605821e6205a796c989c68b3794c8b4572
num: 17
repo_id: mosaicml/mpt-7b-chat
repo_type: model
status: merged
target_branch: refs/heads/main
title: LLM Foundry Updates 06-01-2023
