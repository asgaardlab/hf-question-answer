!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jerinmathews
conflicting_files: null
created_at: 2024-01-03 01:09:17+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7c53d4574556ec8d5c5350df26c9b0f0.svg
      fullname: Jerin Mathews
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jerinmathews
      type: user
    createdAt: '2024-01-03T01:09:17.000Z'
    data:
      edited: true
      editors:
      - jerinmathews
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.39278262853622437
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7c53d4574556ec8d5c5350df26c9b0f0.svg
          fullname: Jerin Mathews
          isHf: false
          isPro: false
          name: jerinmathews
          type: user
        html: '<p>Error: DownloadError<br>2024/01/02 17:05:42 ~ {"timestamp":"2024-01-03T01:05:42.420564Z","level":"ERROR","fields":{"message":"Download
          encountered an error: Traceback (most recent call last):\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 164, in validate_repo_id\n raise</p>

          <p>HFValidationError(\n\nhuggingface_hub.utils.<em>validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''</em>'', ''.'', ''--'' and
          ''..'' are forbidden, ''-'' and ''.'' cannot start or end the name, max
          length is 96: ''/repository''.\n\n\nDuring handling of the above exception,
          another exception occurred:\n\n\nTraceback (most recent call last):\n\n
          File "/opt/conda/bin/text-generation-server", line 8, in \n sys.exit(app())\n\n
          File "/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py",
          line 204, in download_weights\n utils.download_and_unload_peft(\n\n File
          "/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py",
          line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
          File "/opt/conda/lib/python3.10/site-packages/peft/auto.py", line 69, in
          from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 121, in from_pretrained\n raise ValueError(f"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}</p>

          '
        raw: 'Error: DownloadError

          2024/01/02 17:05:42 ~ {"timestamp":"2024-01-03T01:05:42.420564Z","level":"ERROR","fields":{"message":"Download
          encountered an error: Traceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 164, in validate_repo_id\n raise



          HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..''
          are forbidden, ''-'' and ''.'' cannot start or end the name, max length
          is 96: ''/repository''.\n\n\nDuring handling of the above exception, another
          exception occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/bin/text-generation-server\",
          line 8, in <module>\n sys.exit(app())\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py\",
          line 204, in download_weights\n utils.download_and_unload_peft(\n\n File
          \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
          line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
          File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69,
          in from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 121, in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''\")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}'
        updatedAt: '2024-01-03T01:56:07.974Z'
      numEdits: 1
      reactions: []
    id: 6594b3bdb72f4ce63bf3990a
    type: comment
  author: jerinmathews
  content: 'Error: DownloadError

    2024/01/02 17:05:42 ~ {"timestamp":"2024-01-03T01:05:42.420564Z","level":"ERROR","fields":{"message":"Download
    encountered an error: Traceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
    line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 164, in validate_repo_id\n raise



    HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError: Repo
    id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..'' are forbidden,
    ''-'' and ''.'' cannot start or end the name, max length is 96: ''/repository''.\n\n\nDuring
    handling of the above exception, another exception occurred:\n\n\nTraceback (most
    recent call last):\n\n File \"/opt/conda/bin/text-generation-server\", line 8,
    in <module>\n sys.exit(app())\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py\",
    line 204, in download_weights\n utils.download_and_unload_peft(\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
    line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69, in from_pretrained\n
    peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path, **kwargs)\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\", line 121,
    in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}'' at ''{pretrained_model_name_or_path}''\")\n\nValueError:
    Can''t find ''adapter_config.json'' at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}'
  created_at: 2024-01-03 01:09:17+00:00
  edited: true
  hidden: false
  id: 6594b3bdb72f4ce63bf3990a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/05bb1120c7cda43e541572aa7f8d9eab.svg
      fullname: Akari Asai
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: akariasai
      type: user
    createdAt: '2024-01-22T04:08:08.000Z'
    data:
      edited: false
      editors:
      - akariasai
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9391576051712036
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/05bb1120c7cda43e541572aa7f8d9eab.svg
          fullname: Akari Asai
          isHf: false
          isPro: false
          name: akariasai
          type: user
        html: '<p>Hi! I''ve never tried to load the model from PEFT, so I am not sure
          why this happens... If possible, I recommend loading the model with vllm,
          which provide a much faster inference! </p>

          '
        raw: 'Hi! I''ve never tried to load the model from PEFT, so I am not sure
          why this happens... If possible, I recommend loading the model with vllm,
          which provide a much faster inference! '
        updatedAt: '2024-01-22T04:08:08.386Z'
      numEdits: 0
      reactions: []
    id: 65adea280150f64adfde963b
    type: comment
  author: akariasai
  content: 'Hi! I''ve never tried to load the model from PEFT, so I am not sure why
    this happens... If possible, I recommend loading the model with vllm, which provide
    a much faster inference! '
  created_at: 2024-01-22 04:08:08+00:00
  edited: false
  hidden: false
  id: 65adea280150f64adfde963b
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: selfrag/selfrag_llama2_7b
repo_type: model
status: open
target_branch: null
title: Getting error while trying to infer in huggingface
