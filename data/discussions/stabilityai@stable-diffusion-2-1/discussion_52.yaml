!!python/object:huggingface_hub.community.DiscussionWithDetails
author: SaruStudios
conflicting_files: null
created_at: 2023-04-29 15:10:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Qiy8mlJGYPjDAwcsukcao.jpeg?w=200&h=200&f=face
      fullname: David Douglas
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: SaruStudios
      type: user
    createdAt: '2023-04-29T16:10:57.000Z'
    data:
      edited: false
      editors:
      - SaruStudios
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Qiy8mlJGYPjDAwcsukcao.jpeg?w=200&h=200&f=face
          fullname: David Douglas
          isHf: false
          isPro: false
          name: SaruStudios
          type: user
        html: '<p>How do I get stable diffusion 2.1 to work on a Mac? </p>

          <p>I''m not a developer so I don''t understand most of this stuff but I''ve
          been using YouChat at you.com which is an AI that uses GPT 3 or 4 and the
          internet to help me. </p>

          <p>I''m trying to run this on a M1 MacBook Pro with 32 Memory. I know there''s
          issues with GPU and Graphics cards though I know its possible to get Stable
          Diffusion to work. </p>

          <p>I watched these tutorials:<br><a rel="nofollow" href="https://youtu.be/Jh-clc4jEvk">Mac:
          Easy Stable Diffusion WebUI Installation | Full Guide &amp; Tutorial</a><br><a
          rel="nofollow" href="https://youtu.be/dIB4GW3iACQ">How to Install Stable
          Diffusion on M1 Macs</a></p>

          <p>My first error I came across was "Error completing request." This was
          related to home brew installing. I was also getting "zsh: command not found:
          brew"</p>

          <p>I saw in the comments of the first YouTube video from a guy called <a
          rel="nofollow" href="https://www.youtube.com/channel/UCxe7RhBKw1EImE6BIPVLOxg">FUGASA</a>
          that said </p>

          <p>"add ''export PATH=/opt/homebrew/bin:$PATH''"</p>

          <p>I entered that in terminal and that did the trick and I got past the
          home brew issues. Remember I followed all the steps of the first tutorial.
          </p>

          <p>After the install was finished I did text to image. I typed pool or girl
          and then click generate and this is the last part of the next error I would
          get:</p>

          <p>"A tensor with all NaNs was produced in Unet. This could be either because
          there''s not enough precision to represent the picture, or because your
          video card does not support half type. Try setting the "Upcast cross attention
          layer to float32" option in Settings &gt; Stable Diffusion or using the
          --no-half commandline argument to fix this. Use --disable-nan-check commandline
          argument to disable this check."</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/644d38cbce3065fb76c1284c/EjkC4FlrP0BkfNIIL8LTW.png"><img
          alt="Screenshot 2023-04-29 at 8.30.36 AM.png" src="https://cdn-uploads.huggingface.co/production/uploads/644d38cbce3065fb76c1284c/EjkC4FlrP0BkfNIIL8LTW.png"></a></p>

          <p>I also watched this tutorial for mac errors:<br><a rel="nofollow" href="https://youtu.be/ue-_BT0EtiY">How
          to Fix Common Warnings When Installing Stable Diffusion on Your Mac</a></p>

          <p>I gave it the error to "YouChat" and this is what it says:</p>

          <p>"Based on the error message you mentioned, it seems that Stable Diffusion
          is encountering a problem with generating an image due to an issue with
          the precision of the data or video card type. The error message suggests
          two potential solutions:</p>

          <p>Set the "Upcast cross attention layer to float32" option in Settings
          &gt; Stable Diffusion, which may help to resolve the precision issue.</p>

          <p>Use the --no-half command line argument to disable the use of half data
          type and instead use float32 type, which may also help to resolve the issue.</p>

          <p>If those solutions do not work, the error message suggests using --disable-nan-check
          command line argument to disable the NaN check. This could suppress the
          error message but it''s unclear if the resulting images would be valid.</p>

          <p>If you are still encountering the issue after trying these suggestions,
          you may need to seek further assistance from the Stable Diffusion development
          team or community."</p>

          <p>I asked for help to execute the solutions:</p>

          <p>"Yes, I can explain how to implement the solutions mentioned in the error
          message you encountered with Stable Diffusion.</p>

          <p>Set the "Upcast cross attention layer to float32" option in Settings
          &gt; Stable Diffusion: To set the "Upcast cross attention layer to float32"
          option, you need to open the Stable Diffusion settings window and navigate
          to the "Advanced" tab. There you will find an option to "Upcast cross attention
          layer to float32". Enable this option, save your changes, and then try generating
          an image again.</p>

          <p>Use the --no-half command line argument: If you are using the command
          line to run Stable Diffusion, you can add the --no-half flag to disable
          the use of half data type and instead use float32 type. Simply add this
          flag to your command when running Stable Diffusion. For example:</p>

          <p>python run_generator.py --no-half<br>Use the --disable-nan-check command
          line argument: If you want to disable the NaN check, you can do so by adding
          the --disable-nan-check flag to your command. For example:</p>

          <p>python run_generator.py --disable-nan-check<br>Note that disabling the
          NaN check could suppress the error message but the resulting images may
          be invalid.</p>

          <p>I hope these solutions help to resolve the issue you are encountering
          with Stable Diffusion. If you need further assistance, feel free to ask!"</p>

          <p>It was a simple fix but not having experience working with terminal I
          ended up making it more complicated. Thankfully I saw this:</p>

          <p>Settings &gt; Stable Diffusion: To set the "Upcast cross attention layer
          to float32"</p>

          <p>I went to the settings and found "Upcast cross attention layer to float32"
          and checked the box.</p>

          <p>I typed Pool and got my first generation.</p>

          <p>I am apart of a <a rel="nofollow" href="https://discord.com/invite/stablediffusion">Stable
          Diffusion discord</a> which also helped. I just googled it and joined the
          first one I found.</p>

          <p>I will post updates here and I''ll make a YouTube video also about my
          experience since there isn''t enough mac tutorials out there.</p>

          '
        raw: "How do I get stable diffusion 2.1 to work on a Mac? \r\n\r\nI'm not\
          \ a developer so I don't understand most of this stuff but I've been using\
          \ YouChat at you.com which is an AI that uses GPT 3 or 4 and the internet\
          \ to help me. \r\n\r\nI'm trying to run this on a M1 MacBook Pro with 32\
          \ Memory. I know there's issues with GPU and Graphics cards though I know\
          \ its possible to get Stable Diffusion to work. \r\n\r\nI watched these\
          \ tutorials: \r\n[Mac: Easy Stable Diffusion WebUI Installation | Full Guide\
          \ & Tutorial](https://youtu.be/Jh-clc4jEvk)\r\n[How to Install Stable Diffusion\
          \ on M1 Macs](https://youtu.be/dIB4GW3iACQ)\r\n\r\nMy first error I came\
          \ across was \"Error completing request.\" This was related to home brew\
          \ installing. I was also getting \"zsh: command not found: brew\"\r\n\r\n\
          I saw in the comments of the first YouTube video from a guy called [FUGASA](https://www.youtube.com/channel/UCxe7RhBKw1EImE6BIPVLOxg)\
          \ that said \r\n\r\n\"add 'export PATH=/opt/homebrew/bin:$PATH'\"\r\n\r\n\
          I entered that in terminal and that did the trick and I got past the home\
          \ brew issues. Remember I followed all the steps of the first tutorial.\
          \ \r\n\r\nAfter the install was finished I did text to image. I typed pool\
          \ or girl and then click generate and this is the last part of the next\
          \ error I would get:\r\n\r\n\"A tensor with all NaNs was produced in Unet.\
          \ This could be either because there's not enough precision to represent\
          \ the picture, or because your video card does not support half type. Try\
          \ setting the \"Upcast cross attention layer to float32\" option in Settings\
          \ > Stable Diffusion or using the --no-half commandline argument to fix\
          \ this. Use --disable-nan-check commandline argument to disable this check.\"\
          \r\n\r\n![Screenshot 2023-04-29 at 8.30.36 AM.png](https://cdn-uploads.huggingface.co/production/uploads/644d38cbce3065fb76c1284c/EjkC4FlrP0BkfNIIL8LTW.png)\r\
          \n\r\nI also watched this tutorial for mac errors:\r\n[How to Fix Common\
          \ Warnings When Installing Stable Diffusion on Your Mac](https://youtu.be/ue-_BT0EtiY)\r\
          \n\r\nI gave it the error to \"YouChat\" and this is what it says:\r\n\r\
          \n\"Based on the error message you mentioned, it seems that Stable Diffusion\
          \ is encountering a problem with generating an image due to an issue with\
          \ the precision of the data or video card type. The error message suggests\
          \ two potential solutions:\r\n\r\nSet the \"Upcast cross attention layer\
          \ to float32\" option in Settings > Stable Diffusion, which may help to\
          \ resolve the precision issue.\r\n\r\nUse the --no-half command line argument\
          \ to disable the use of half data type and instead use float32 type, which\
          \ may also help to resolve the issue.\r\n\r\nIf those solutions do not work,\
          \ the error message suggests using --disable-nan-check command line argument\
          \ to disable the NaN check. This could suppress the error message but it's\
          \ unclear if the resulting images would be valid.\r\n\r\nIf you are still\
          \ encountering the issue after trying these suggestions, you may need to\
          \ seek further assistance from the Stable Diffusion development team or\
          \ community.\"\r\n\r\nI asked for help to execute the solutions:\r\n\r\n\
          \"Yes, I can explain how to implement the solutions mentioned in the error\
          \ message you encountered with Stable Diffusion.\r\n\r\nSet the \"Upcast\
          \ cross attention layer to float32\" option in Settings > Stable Diffusion:\
          \ To set the \"Upcast cross attention layer to float32\" option, you need\
          \ to open the Stable Diffusion settings window and navigate to the \"Advanced\"\
          \ tab. There you will find an option to \"Upcast cross attention layer to\
          \ float32\". Enable this option, save your changes, and then try generating\
          \ an image again.\r\n\r\nUse the --no-half command line argument: If you\
          \ are using the command line to run Stable Diffusion, you can add the --no-half\
          \ flag to disable the use of half data type and instead use float32 type.\
          \ Simply add this flag to your command when running Stable Diffusion. For\
          \ example:\r\n\r\npython run_generator.py --no-half\r\nUse the --disable-nan-check\
          \ command line argument: If you want to disable the NaN check, you can do\
          \ so by adding the --disable-nan-check flag to your command. For example:\r\
          \n\r\npython run_generator.py --disable-nan-check\r\nNote that disabling\
          \ the NaN check could suppress the error message but the resulting images\
          \ may be invalid.\r\n\r\nI hope these solutions help to resolve the issue\
          \ you are encountering with Stable Diffusion. If you need further assistance,\
          \ feel free to ask!\"\r\n\r\nIt was a simple fix but not having experience\
          \ working with terminal I ended up making it more complicated. Thankfully\
          \ I saw this:\r\n\r\nSettings > Stable Diffusion: To set the \"Upcast cross\
          \ attention layer to float32\"\r\n\r\nI went to the settings and found \"\
          Upcast cross attention layer to float32\" and checked the box.\r\n\r\nI\
          \ typed Pool and got my first generation.\r\n\r\nI am apart of a [Stable\
          \ Diffusion discord](https://discord.com/invite/stablediffusion) which also\
          \ helped. I just googled it and joined the first one I found.\r\n\r\nI will\
          \ post updates here and I'll make a YouTube video also about my experience\
          \ since there isn't enough mac tutorials out there.\r\n"
        updatedAt: '2023-04-29T16:10:57.998Z'
      numEdits: 0
      reactions: []
    id: 644d4191cfb40c94eae29599
    type: comment
  author: SaruStudios
  content: "How do I get stable diffusion 2.1 to work on a Mac? \r\n\r\nI'm not a\
    \ developer so I don't understand most of this stuff but I've been using YouChat\
    \ at you.com which is an AI that uses GPT 3 or 4 and the internet to help me.\
    \ \r\n\r\nI'm trying to run this on a M1 MacBook Pro with 32 Memory. I know there's\
    \ issues with GPU and Graphics cards though I know its possible to get Stable\
    \ Diffusion to work. \r\n\r\nI watched these tutorials: \r\n[Mac: Easy Stable\
    \ Diffusion WebUI Installation | Full Guide & Tutorial](https://youtu.be/Jh-clc4jEvk)\r\
    \n[How to Install Stable Diffusion on M1 Macs](https://youtu.be/dIB4GW3iACQ)\r\
    \n\r\nMy first error I came across was \"Error completing request.\" This was\
    \ related to home brew installing. I was also getting \"zsh: command not found:\
    \ brew\"\r\n\r\nI saw in the comments of the first YouTube video from a guy called\
    \ [FUGASA](https://www.youtube.com/channel/UCxe7RhBKw1EImE6BIPVLOxg) that said\
    \ \r\n\r\n\"add 'export PATH=/opt/homebrew/bin:$PATH'\"\r\n\r\nI entered that\
    \ in terminal and that did the trick and I got past the home brew issues. Remember\
    \ I followed all the steps of the first tutorial. \r\n\r\nAfter the install was\
    \ finished I did text to image. I typed pool or girl and then click generate and\
    \ this is the last part of the next error I would get:\r\n\r\n\"A tensor with\
    \ all NaNs was produced in Unet. This could be either because there's not enough\
    \ precision to represent the picture, or because your video card does not support\
    \ half type. Try setting the \"Upcast cross attention layer to float32\" option\
    \ in Settings > Stable Diffusion or using the --no-half commandline argument to\
    \ fix this. Use --disable-nan-check commandline argument to disable this check.\"\
    \r\n\r\n![Screenshot 2023-04-29 at 8.30.36 AM.png](https://cdn-uploads.huggingface.co/production/uploads/644d38cbce3065fb76c1284c/EjkC4FlrP0BkfNIIL8LTW.png)\r\
    \n\r\nI also watched this tutorial for mac errors:\r\n[How to Fix Common Warnings\
    \ When Installing Stable Diffusion on Your Mac](https://youtu.be/ue-_BT0EtiY)\r\
    \n\r\nI gave it the error to \"YouChat\" and this is what it says:\r\n\r\n\"Based\
    \ on the error message you mentioned, it seems that Stable Diffusion is encountering\
    \ a problem with generating an image due to an issue with the precision of the\
    \ data or video card type. The error message suggests two potential solutions:\r\
    \n\r\nSet the \"Upcast cross attention layer to float32\" option in Settings >\
    \ Stable Diffusion, which may help to resolve the precision issue.\r\n\r\nUse\
    \ the --no-half command line argument to disable the use of half data type and\
    \ instead use float32 type, which may also help to resolve the issue.\r\n\r\n\
    If those solutions do not work, the error message suggests using --disable-nan-check\
    \ command line argument to disable the NaN check. This could suppress the error\
    \ message but it's unclear if the resulting images would be valid.\r\n\r\nIf you\
    \ are still encountering the issue after trying these suggestions, you may need\
    \ to seek further assistance from the Stable Diffusion development team or community.\"\
    \r\n\r\nI asked for help to execute the solutions:\r\n\r\n\"Yes, I can explain\
    \ how to implement the solutions mentioned in the error message you encountered\
    \ with Stable Diffusion.\r\n\r\nSet the \"Upcast cross attention layer to float32\"\
    \ option in Settings > Stable Diffusion: To set the \"Upcast cross attention layer\
    \ to float32\" option, you need to open the Stable Diffusion settings window and\
    \ navigate to the \"Advanced\" tab. There you will find an option to \"Upcast\
    \ cross attention layer to float32\". Enable this option, save your changes, and\
    \ then try generating an image again.\r\n\r\nUse the --no-half command line argument:\
    \ If you are using the command line to run Stable Diffusion, you can add the --no-half\
    \ flag to disable the use of half data type and instead use float32 type. Simply\
    \ add this flag to your command when running Stable Diffusion. For example:\r\n\
    \r\npython run_generator.py --no-half\r\nUse the --disable-nan-check command line\
    \ argument: If you want to disable the NaN check, you can do so by adding the\
    \ --disable-nan-check flag to your command. For example:\r\n\r\npython run_generator.py\
    \ --disable-nan-check\r\nNote that disabling the NaN check could suppress the\
    \ error message but the resulting images may be invalid.\r\n\r\nI hope these solutions\
    \ help to resolve the issue you are encountering with Stable Diffusion. If you\
    \ need further assistance, feel free to ask!\"\r\n\r\nIt was a simple fix but\
    \ not having experience working with terminal I ended up making it more complicated.\
    \ Thankfully I saw this:\r\n\r\nSettings > Stable Diffusion: To set the \"Upcast\
    \ cross attention layer to float32\"\r\n\r\nI went to the settings and found \"\
    Upcast cross attention layer to float32\" and checked the box.\r\n\r\nI typed\
    \ Pool and got my first generation.\r\n\r\nI am apart of a [Stable Diffusion discord](https://discord.com/invite/stablediffusion)\
    \ which also helped. I just googled it and joined the first one I found.\r\n\r\
    \nI will post updates here and I'll make a YouTube video also about my experience\
    \ since there isn't enough mac tutorials out there.\r\n"
  created_at: 2023-04-29 15:10:57+00:00
  edited: false
  hidden: false
  id: 644d4191cfb40c94eae29599
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 52
repo_id: stabilityai/stable-diffusion-2-1
repo_type: model
status: open
target_branch: null
title: '[Solution] How do I get stable diffusion 2.1 to work on a Mac?'
