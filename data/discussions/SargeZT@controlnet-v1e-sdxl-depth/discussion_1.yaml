!!python/object:huggingface_hub.community.DiscussionWithDetails
author: zbulrush
conflicting_files: null
created_at: 2023-07-29 17:09:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
      fullname: weilu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zbulrush
      type: user
    createdAt: '2023-07-29T18:09:29.000Z'
    data:
      edited: false
      editors:
      - zbulrush
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9805140495300293
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
          fullname: weilu
          isHf: false
          isPro: false
          name: zbulrush
          type: user
        html: '<p>Hey there! So, I was trying to train ControlNet using the Diffusers
          library, but I ran into a few hiccups. Mind sharing the parameters you used
          during training? It could really help me out! Thanks!</p>

          '
        raw: Hey there! So, I was trying to train ControlNet using the Diffusers library,
          but I ran into a few hiccups. Mind sharing the parameters you used during
          training? It could really help me out! Thanks!
        updatedAt: '2023-07-29T18:09:29.822Z'
      numEdits: 0
      reactions: []
    id: 64c555d9aedc4337780aae55
    type: comment
  author: zbulrush
  content: Hey there! So, I was trying to train ControlNet using the Diffusers library,
    but I ran into a few hiccups. Mind sharing the parameters you used during training?
    It could really help me out! Thanks!
  created_at: 2023-07-29 17:09:29+00:00
  edited: false
  hidden: false
  id: 64c555d9aedc4337780aae55
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-07-30T00:49:01.000Z'
    data:
      edited: true
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5878790616989136
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: '<p>Sure! I''ve made a few modifications to the training script, including
          using a non-standard optimizer. Here''s my version of the <a rel="nofollow"
          href="https://gist.github.com/AMorporkian/1651fc19f742c84a079fcc672ead100a">script</a>
          and what I used to launch it was <code>accelerate launch /workspace/train_control.py
          --pretrained_model_name_or_path=stabilityai/stable-diffusion-xl-base-1.0
          --output_dir=/workspace/out --dataset_name=/workspace/zoe_stuff --conditioning_image_column=depth
          --validation_prompt "nightmare construction worker, unsettling" "android
          warrior, unsettling" --validation_image /workspace/depth2.png /workspace/depth4.png
          --validation_steps 100 --tracker_project_name sd_xl_train_controlnet --mixed_precision
          fp16 --report_to wandb --push_to_hub --hub_model_id controlnet-sd-xl-1.0-depth-magma
          --max_grad_norm 1.0 --checkpointing_steps 10000 --num_train_epochs 5 --resolution
          512 --seed 1 --gradient_accumulation_steps 1 --train_batch_size 8 --enable_xformers_memory_efficient_attention
          --caption_column prompt --gradient_checkpointing --pretrained_vae_model_name_or_path
          madebyollin/sdxl-vae-fp16-fix --use_prodigy --set_grads_to_none --controlnet_model_name_or_path
          /workspace/out</code>. If you were running into black preview images, chances
          are your problem was the VAE; the version included by default is unstable
          at FP16. Finally, you can few my wandb run for it <a rel="nofollow" href="https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/kwi429e8/overview?workspace=user-patrick-e-shanahan">here</a></p>

          <p>Hope that helps!</p>

          '
        raw: 'Sure! I''ve made a few modifications to the training script, including
          using a non-standard optimizer. Here''s my version of the [script](https://gist.github.com/AMorporkian/1651fc19f742c84a079fcc672ead100a)
          and what I used to launch it was `accelerate launch

          /workspace/train_control.py --pretrained_model_name_or_path=stabilityai/stable-diffusion-xl-base-1.0
          --output_dir=/workspace/out --dataset_name=/workspace/zoe_stuff --conditioning_image_column=depth
          --validation_prompt "nightmare construction worker, unsettling" "android
          warrior, unsettling" --validation_image /workspace/depth2.png /workspace/depth4.png
          --validation_steps 100 --tracker_project_name sd_xl_train_controlnet --mixed_precision
          fp16 --report_to wandb --push_to_hub --hub_model_id controlnet-sd-xl-1.0-depth-magma
          --max_grad_norm 1.0 --checkpointing_steps 10000 --num_train_epochs 5 --resolution
          512 --seed 1 --gradient_accumulation_steps 1 --train_batch_size 8 --enable_xformers_memory_efficient_attention
          --caption_column prompt --gradient_checkpointing --pretrained_vae_model_name_or_path
          madebyollin/sdxl-vae-fp16-fix --use_prodigy --set_grads_to_none --controlnet_model_name_or_path
          /workspace/out`. If you were running into black preview images, chances
          are your problem was the VAE; the version included by default is unstable
          at FP16. Finally, you can few my wandb run for it [here](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/kwi429e8/overview?workspace=user-patrick-e-shanahan)


          Hope that helps!'
        updatedAt: '2023-07-30T00:49:27.426Z'
      numEdits: 1
      reactions:
      - count: 3
        reaction: "\u2764\uFE0F"
        users:
        - melmass
        - mattdl
        - shoaibahmed
    id: 64c5b37d19565937fb3a9b30
    type: comment
  author: SargeZT
  content: 'Sure! I''ve made a few modifications to the training script, including
    using a non-standard optimizer. Here''s my version of the [script](https://gist.github.com/AMorporkian/1651fc19f742c84a079fcc672ead100a)
    and what I used to launch it was `accelerate launch

    /workspace/train_control.py --pretrained_model_name_or_path=stabilityai/stable-diffusion-xl-base-1.0
    --output_dir=/workspace/out --dataset_name=/workspace/zoe_stuff --conditioning_image_column=depth
    --validation_prompt "nightmare construction worker, unsettling" "android warrior,
    unsettling" --validation_image /workspace/depth2.png /workspace/depth4.png --validation_steps
    100 --tracker_project_name sd_xl_train_controlnet --mixed_precision fp16 --report_to
    wandb --push_to_hub --hub_model_id controlnet-sd-xl-1.0-depth-magma --max_grad_norm
    1.0 --checkpointing_steps 10000 --num_train_epochs 5 --resolution 512 --seed 1
    --gradient_accumulation_steps 1 --train_batch_size 8 --enable_xformers_memory_efficient_attention
    --caption_column prompt --gradient_checkpointing --pretrained_vae_model_name_or_path
    madebyollin/sdxl-vae-fp16-fix --use_prodigy --set_grads_to_none --controlnet_model_name_or_path
    /workspace/out`. If you were running into black preview images, chances are your
    problem was the VAE; the version included by default is unstable at FP16. Finally,
    you can few my wandb run for it [here](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/kwi429e8/overview?workspace=user-patrick-e-shanahan)


    Hope that helps!'
  created_at: 2023-07-29 23:49:01+00:00
  edited: true
  hidden: false
  id: 64c5b37d19565937fb3a9b30
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
      fullname: weilu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zbulrush
      type: user
    createdAt: '2023-07-30T02:50:41.000Z'
    data:
      edited: false
      editors:
      - zbulrush
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9759591221809387
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
          fullname: weilu
          isHf: false
          isPro: false
          name: zbulrush
          type: user
        html: '<p>Wow, thank you so much! You''ve been a great help to me. </p>

          '
        raw: 'Wow, thank you so much! You''ve been a great help to me. '
        updatedAt: '2023-07-30T02:50:41.558Z'
      numEdits: 0
      reactions: []
    id: 64c5d00157e5b2cd8aeb338f
    type: comment
  author: zbulrush
  content: 'Wow, thank you so much! You''ve been a great help to me. '
  created_at: 2023-07-30 01:50:41+00:00
  edited: false
  hidden: false
  id: 64c5d00157e5b2cd8aeb338f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-07-30T03:16:57.000Z'
    data:
      edited: false
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9681889414787292
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: "<p>No worries! I hope everything goes well, feel free to hit me up\
          \ here or on discord <span data-props=\"{&quot;user&quot;:&quot;sargezt&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sargezt\"\
          >@<span class=\"underline\">sargezt</span></a></span>\n\n\t</span></span>\
          \ if you need anything else on it. I'm working on a more general purpose\
          \ training base, a base controlnet if you will, that is currently training.\
          \ Right now a lot of the time in training is simply doing the first adaptation\
          \ of the network, so I'm doing augmentations on the input data and mixing\
          \ depth, canny, and seg during training to decondition the network from\
          \ normal image generation. If you'd like, I can certainly ping you when\
          \ it's done so you can resume from that. Happy training!</p>\n"
        raw: No worries! I hope everything goes well, feel free to hit me up here
          or on discord @sargezt if you need anything else on it. I'm working on a
          more general purpose training base, a base controlnet if you will, that
          is currently training. Right now a lot of the time in training is simply
          doing the first adaptation of the network, so I'm doing augmentations on
          the input data and mixing depth, canny, and seg during training to decondition
          the network from normal image generation. If you'd like, I can certainly
          ping you when it's done so you can resume from that. Happy training!
        updatedAt: '2023-07-30T03:16:57.893Z'
      numEdits: 0
      reactions: []
    id: 64c5d629e4e2212a4f10715f
    type: comment
  author: SargeZT
  content: No worries! I hope everything goes well, feel free to hit me up here or
    on discord @sargezt if you need anything else on it. I'm working on a more general
    purpose training base, a base controlnet if you will, that is currently training.
    Right now a lot of the time in training is simply doing the first adaptation of
    the network, so I'm doing augmentations on the input data and mixing depth, canny,
    and seg during training to decondition the network from normal image generation.
    If you'd like, I can certainly ping you when it's done so you can resume from
    that. Happy training!
  created_at: 2023-07-30 02:16:57+00:00
  edited: false
  hidden: false
  id: 64c5d629e4e2212a4f10715f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
      fullname: weilu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zbulrush
      type: user
    createdAt: '2023-07-30T18:15:17.000Z'
    data:
      edited: false
      editors:
      - zbulrush
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7663792371749878
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
          fullname: weilu
          isHf: false
          isPro: false
          name: zbulrush
          type: user
        html: '<p>I''m really puzzled, the validate_image generated every 100 steps
          is always the same, you can find it in my wandb:<br><a rel="nofollow" href="https://wandb.ai/zbulrush/sd_xl_train_controlnet/runs/3n9w86jj/workspace?workspace=user-zbulrush">https://wandb.ai/zbulrush/sd_xl_train_controlnet/runs/3n9w86jj/workspace?workspace=user-zbulrush</a></p>

          '
        raw: 'I''m really puzzled, the validate_image generated every 100 steps is
          always the same, you can find it in my wandb:

          https://wandb.ai/zbulrush/sd_xl_train_controlnet/runs/3n9w86jj/workspace?workspace=user-zbulrush'
        updatedAt: '2023-07-30T18:15:17.112Z'
      numEdits: 0
      reactions: []
    id: 64c6a8b515bd12e5798dbead
    type: comment
  author: zbulrush
  content: 'I''m really puzzled, the validate_image generated every 100 steps is always
    the same, you can find it in my wandb:

    https://wandb.ai/zbulrush/sd_xl_train_controlnet/runs/3n9w86jj/workspace?workspace=user-zbulrush'
  created_at: 2023-07-30 17:15:17+00:00
  edited: false
  hidden: false
  id: 64c6a8b515bd12e5798dbead
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-07-31T01:19:00.000Z'
    data:
      edited: false
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9917240142822266
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: '<p>That''s very strange. I''ll try to replicate that since the dataset
          is public and report back!</p>

          '
        raw: That's very strange. I'll try to replicate that since the dataset is
          public and report back!
        updatedAt: '2023-07-31T01:19:00.284Z'
      numEdits: 0
      reactions: []
    id: 64c70c0417bd806045515bbb
    type: comment
  author: SargeZT
  content: That's very strange. I'll try to replicate that since the dataset is public
    and report back!
  created_at: 2023-07-31 00:19:00+00:00
  edited: false
  hidden: false
  id: 64c70c0417bd806045515bbb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-07-31T01:25:35.000Z'
    data:
      edited: false
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9906910061836243
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: '<p>Oh jeez, I just noticed I left the augments on in the version I
          sent you. I was using that for some experiments. I''ve updated the gist
          to remove them. I''m about to start a run to make sure that that was the
          problem with that verison.</p>

          '
        raw: Oh jeez, I just noticed I left the augments on in the version I sent
          you. I was using that for some experiments. I've updated the gist to remove
          them. I'm about to start a run to make sure that that was the problem with
          that verison.
        updatedAt: '2023-07-31T01:25:35.584Z'
      numEdits: 0
      reactions: []
    id: 64c70d8f50b231b2236511be
    type: comment
  author: SargeZT
  content: Oh jeez, I just noticed I left the augments on in the version I sent you.
    I was using that for some experiments. I've updated the gist to remove them. I'm
    about to start a run to make sure that that was the problem with that verison.
  created_at: 2023-07-31 00:25:35+00:00
  edited: false
  hidden: false
  id: 64c70d8f50b231b2236511be
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-07-31T02:58:29.000Z'
    data:
      edited: false
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9317485690116882
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: '<p>OK yeah, that appears to have been the problem. I can''t speak to
          how it''s fitting yet, but my samples are most certainly <a rel="nofollow"
          href="https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan">changing</a>.
          I have relocated the trivial transform to only act on the target image,
          which is how it''s supposed to be used, not in the way I was using it on
          both the control and training images. Here is the new <a rel="nofollow"
          href="https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4">version</a>,
          one note though is that I''ve ripped out the manual prompts and just use
          the test split of the dataset to generate images. If you want to revert
          to the old behavior, just rip out the log_validation function from your
          current version. </p>

          <p>TrivialAugmentWide will take a bit longer to learn, but it will be much
          less prone to overfitting. You can remove it from the preprocess transforms
          if you so wish though!</p>

          '
        raw: "OK yeah, that appears to have been the problem. I can't speak to how\
          \ it's fitting yet, but my samples are most certainly [changing](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan).\
          \ I have relocated the trivial transform to only act on the target image,\
          \ which is how it's supposed to be used, not in the way I was using it on\
          \ both the control and training images. Here is the new [version](https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4),\
          \ one note though is that I've ripped out the manual prompts and just use\
          \ the test split of the dataset to generate images. If you want to revert\
          \ to the old behavior, just rip out the log_validation function from your\
          \ current version. \n\nTrivialAugmentWide will take a bit longer to learn,\
          \ but it will be much less prone to overfitting. You can remove it from\
          \ the preprocess transforms if you so wish though!"
        updatedAt: '2023-07-31T02:58:29.601Z'
      numEdits: 0
      reactions: []
    id: 64c72355589826641bcc5c81
    type: comment
  author: SargeZT
  content: "OK yeah, that appears to have been the problem. I can't speak to how it's\
    \ fitting yet, but my samples are most certainly [changing](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan).\
    \ I have relocated the trivial transform to only act on the target image, which\
    \ is how it's supposed to be used, not in the way I was using it on both the control\
    \ and training images. Here is the new [version](https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4),\
    \ one note though is that I've ripped out the manual prompts and just use the\
    \ test split of the dataset to generate images. If you want to revert to the old\
    \ behavior, just rip out the log_validation function from your current version.\
    \ \n\nTrivialAugmentWide will take a bit longer to learn, but it will be much\
    \ less prone to overfitting. You can remove it from the preprocess transforms\
    \ if you so wish though!"
  created_at: 2023-07-31 01:58:29+00:00
  edited: false
  hidden: false
  id: 64c72355589826641bcc5c81
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
      fullname: weilu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zbulrush
      type: user
    createdAt: '2023-07-31T06:36:16.000Z'
    data:
      edited: false
      editors:
      - zbulrush
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9356877207756042
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f3453aa9484a0403275276d989c919be.svg
          fullname: weilu
          isHf: false
          isPro: false
          name: zbulrush
          type: user
        html: '<blockquote>

          <p>OK yeah, that appears to have been the problem. I can''t speak to how
          it''s fitting yet, but my samples are most certainly <a rel="nofollow" href="https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan">changing</a>.
          I have relocated the trivial transform to only act on the target image,
          which is how it''s supposed to be used, not in the way I was using it on
          both the control and training images. Here is the new <a rel="nofollow"
          href="https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4">version</a>,
          one note though is that I''ve ripped out the manual prompts and just use
          the test split of the dataset to generate images. If you want to revert
          to the old behavior, just rip out the log_validation function from your
          current version. </p>

          <p>TrivialAugmentWide will take a bit longer to learn, but it will be much
          less prone to overfitting. You can remove it from the preprocess transforms
          if you so wish though!</p>

          </blockquote>

          <p>thanks again,  I''ll hurry up and give it a try!</p>

          '
        raw: "> OK yeah, that appears to have been the problem. I can't speak to how\
          \ it's fitting yet, but my samples are most certainly [changing](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan).\
          \ I have relocated the trivial transform to only act on the target image,\
          \ which is how it's supposed to be used, not in the way I was using it on\
          \ both the control and training images. Here is the new [version](https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4),\
          \ one note though is that I've ripped out the manual prompts and just use\
          \ the test split of the dataset to generate images. If you want to revert\
          \ to the old behavior, just rip out the log_validation function from your\
          \ current version. \n> \n> TrivialAugmentWide will take a bit longer to\
          \ learn, but it will be much less prone to overfitting. You can remove it\
          \ from the preprocess transforms if you so wish though!\n\nthanks again,\
          \  I'll hurry up and give it a try!"
        updatedAt: '2023-07-31T06:36:16.330Z'
      numEdits: 0
      reactions: []
    id: 64c75660d68946edada21ebc
    type: comment
  author: zbulrush
  content: "> OK yeah, that appears to have been the problem. I can't speak to how\
    \ it's fitting yet, but my samples are most certainly [changing](https://wandb.ai/patrick-e-shanahan/sd_xl_train_controlnet/runs/y0h2dv7k?workspace=user-patrick-e-shanahan).\
    \ I have relocated the trivial transform to only act on the target image, which\
    \ is how it's supposed to be used, not in the way I was using it on both the control\
    \ and training images. Here is the new [version](https://gist.github.com/AMorporkian/4e8a61c9facd454fc7a2f5110ecac4f4),\
    \ one note though is that I've ripped out the manual prompts and just use the\
    \ test split of the dataset to generate images. If you want to revert to the old\
    \ behavior, just rip out the log_validation function from your current version.\
    \ \n> \n> TrivialAugmentWide will take a bit longer to learn, but it will be much\
    \ less prone to overfitting. You can remove it from the preprocess transforms\
    \ if you so wish though!\n\nthanks again,  I'll hurry up and give it a try!"
  created_at: 2023-07-31 05:36:16+00:00
  edited: false
  hidden: false
  id: 64c75660d68946edada21ebc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d7975cb9079b15ce0e725844b92c8ebc.svg
      fullname: Matthias
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mattdl
      type: user
    createdAt: '2023-08-10T12:34:29.000Z'
    data:
      edited: false
      editors:
      - mattdl
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9528754353523254
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d7975cb9079b15ce0e725844b92c8ebc.svg
          fullname: Matthias
          isHf: false
          isPro: false
          name: mattdl
          type: user
        html: '<p>Thanks a lot for sharing the training details! I''m trying to train
          a controlnet for SDXL (full precision) myself but quickly get to noisy validation
          images (already after 200 steps).<br>Now I''m trying your hyperparameters,
          but I''m seeing that the learning rate is set to ''1'' with ''cosine'' schedule.<br>Do
          you know how your model learning anything with such a high learning rate?
          Thanks!</p>

          '
        raw: "Thanks a lot for sharing the training details! I'm trying to train a\
          \ controlnet for SDXL (full precision) myself but quickly get to noisy validation\
          \ images (already after 200 steps).\nNow I'm trying your hyperparameters,\
          \ but I'm seeing that the learning rate is set to '1' with 'cosine' schedule.\
          \ \nDo you know how your model learning anything with such a high learning\
          \ rate? Thanks!"
        updatedAt: '2023-08-10T12:34:29.207Z'
      numEdits: 0
      reactions: []
    id: 64d4d95570891ac9b8423419
    type: comment
  author: mattdl
  content: "Thanks a lot for sharing the training details! I'm trying to train a controlnet\
    \ for SDXL (full precision) myself but quickly get to noisy validation images\
    \ (already after 200 steps).\nNow I'm trying your hyperparameters, but I'm seeing\
    \ that the learning rate is set to '1' with 'cosine' schedule. \nDo you know how\
    \ your model learning anything with such a high learning rate? Thanks!"
  created_at: 2023-08-10 11:34:29+00:00
  edited: false
  hidden: false
  id: 64d4d95570891ac9b8423419
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
      fullname: Patrick Shanahan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: SargeZT
      type: user
    createdAt: '2023-08-13T17:29:48.000Z'
    data:
      edited: false
      editors:
      - SargeZT
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.87530517578125
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59fff07ae8a29f15ef20bf3517a5537e.svg
          fullname: Patrick Shanahan
          isHf: false
          isPro: false
          name: SargeZT
          type: user
        html: '<p>I use the prodigy optimizer which automatically adapts the LR but
          requires starting out at 1 and going down, preferably with a cosine schedule.</p>

          '
        raw: 'I use the prodigy optimizer which automatically adapts the LR but requires
          starting out at 1 and going down, preferably with a cosine schedule.

          '
        updatedAt: '2023-08-13T17:29:48.944Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - mattdl
    id: 64d9130c1a81ece17dd65667
    type: comment
  author: SargeZT
  content: 'I use the prodigy optimizer which automatically adapts the LR but requires
    starting out at 1 and going down, preferably with a cosine schedule.

    '
  created_at: 2023-08-13 16:29:48+00:00
  edited: false
  hidden: false
  id: 64d9130c1a81ece17dd65667
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: SargeZT/controlnet-v1e-sdxl-depth
repo_type: model
status: open
target_branch: null
title: Mind sharing the parameters you used during training?
