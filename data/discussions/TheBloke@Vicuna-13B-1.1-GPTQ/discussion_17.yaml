!!python/object:huggingface_hub.community.DiscussionWithDetails
author: joshlevy89
conflicting_files: null
created_at: 2023-06-20 21:11:08+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5d96bd8ba5f1d60a17ea00386444f383.svg
      fullname: Joshua Levy
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joshlevy89
      type: user
    createdAt: '2023-06-20T22:11:08.000Z'
    data:
      edited: false
      editors:
      - joshlevy89
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8823540210723877
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5d96bd8ba5f1d60a17ea00386444f383.svg
          fullname: Joshua Levy
          isHf: false
          isPro: false
          name: joshlevy89
          type: user
        html: '<p>When I do model.generate on a single sample it works fine. However,
          getting it to work on multiple samples of different length has been a challenge
          because there is no pad token in this model and my attempts to modify the
          embedding layer to include one (e.g. model.resize_token_embeddings(len(tokenizer))
          have failed (''LlamaGPTQForCausalLM'' object has no attribute ''resize_token_embeddings'').</p>

          <p>Has anyone gotten batch inference to work with this model, and if so
          how?</p>

          '
        raw: "When I do model.generate on a single sample it works fine. However,\
          \ getting it to work on multiple samples of different length has been a\
          \ challenge because there is no pad token in this model and my attempts\
          \ to modify the embedding layer to include one (e.g. model.resize_token_embeddings(len(tokenizer))\
          \ have failed ('LlamaGPTQForCausalLM' object has no attribute 'resize_token_embeddings').\r\
          \n\r\nHas anyone gotten batch inference to work with this model, and if\
          \ so how?"
        updatedAt: '2023-06-20T22:11:08.722Z'
      numEdits: 0
      reactions: []
    id: 649223fc3606787ba48a0bff
    type: comment
  author: joshlevy89
  content: "When I do model.generate on a single sample it works fine. However, getting\
    \ it to work on multiple samples of different length has been a challenge because\
    \ there is no pad token in this model and my attempts to modify the embedding\
    \ layer to include one (e.g. model.resize_token_embeddings(len(tokenizer)) have\
    \ failed ('LlamaGPTQForCausalLM' object has no attribute 'resize_token_embeddings').\r\
    \n\r\nHas anyone gotten batch inference to work with this model, and if so how?"
  created_at: 2023-06-20 21:11:08+00:00
  edited: false
  hidden: false
  id: 649223fc3606787ba48a0bff
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 17
repo_id: TheBloke/Vicuna-13B-1.1-GPTQ
repo_type: model
status: open
target_branch: null
title: Batch inference working?
