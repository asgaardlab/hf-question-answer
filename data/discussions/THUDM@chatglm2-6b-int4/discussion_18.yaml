!!python/object:huggingface_hub.community.DiscussionWithDetails
author: tcdoudousky
conflicting_files: null
created_at: 2023-09-18 12:48:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/db238fc1fccc05832c52e96942073e27.svg
      fullname: DOUDOU
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tcdoudousky
      type: user
    createdAt: '2023-09-18T13:48:39.000Z'
    data:
      edited: false
      editors:
      - tcdoudousky
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4961075484752655
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/db238fc1fccc05832c52e96942073e27.svg
          fullname: DOUDOU
          isHf: false
          isPro: false
          name: tcdoudousky
          type: user
        html: "<p>\u5728\u6267\u884Cpeft_model = get_peft_model(model, peft_config)\u65F6\
          \u62A5\u9519<br>Target module QuantizedLinear() is not supported. Currently,\
          \ only <code>torch.nn.Linear</code> and <code>Conv1D</code> are supported.<br>\u6709\
          \u6CA1\u6709\u5927\u795E\u53EF\u4EE5\u5E2E\u5FD9\u89E3\u7B54</p>\n"
        raw: "\u5728\u6267\u884Cpeft_model = get_peft_model(model, peft_config)\u65F6\
          \u62A5\u9519\r\nTarget module QuantizedLinear() is not supported. Currently,\
          \ only `torch.nn.Linear` and `Conv1D` are supported.\r\n\u6709\u6CA1\u6709\
          \u5927\u795E\u53EF\u4EE5\u5E2E\u5FD9\u89E3\u7B54"
        updatedAt: '2023-09-18T13:48:39.879Z'
      numEdits: 0
      reactions: []
    id: 6508553795c45596854969ae
    type: comment
  author: tcdoudousky
  content: "\u5728\u6267\u884Cpeft_model = get_peft_model(model, peft_config)\u65F6\
    \u62A5\u9519\r\nTarget module QuantizedLinear() is not supported. Currently, only\
    \ `torch.nn.Linear` and `Conv1D` are supported.\r\n\u6709\u6CA1\u6709\u5927\u795E\
    \u53EF\u4EE5\u5E2E\u5FD9\u89E3\u7B54"
  created_at: 2023-09-18 12:48:39+00:00
  edited: false
  hidden: false
  id: 6508553795c45596854969ae
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/276239281d452e8005972d02a3bcf9e2.svg
      fullname: charent
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: charent
      type: user
    createdAt: '2024-01-25T06:03:18.000Z'
    data:
      edited: false
      editors:
      - charent
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.5861461758613586
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/276239281d452e8005972d02a3bcf9e2.svg
          fullname: charent
          isHf: false
          isPro: false
          name: charent
          type: user
        html: "<p>\u5728\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\u7684\u65F6\u5019\u4E0D\
          \u8981\u7528\u5B98\u65B9\u63D0\u4F9B\u7684\u91CF\u5316\u4EE3\u7801</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-comment\"># \u5B98\
          \u65B9\u63D0\u4F9B\u7684\u4EE3\u7801\uFF1A</span>\n<span class=\"hljs-comment\"\
          ># \u5C1D\u8BD5\u6DFB\u52A0 --quantization_bit 8 \u6216 --quantization_bit\
          \ 4\u3002</span>\n<span class=\"hljs-comment\"># https://github.com/THUDM/ChatGLM3/blob/main/finetune_chatmodel_demo/finetune.py</span>\n\
          model = model.quantize(model_args.quantization_bit)\n</code></pre>\n<p>\u81EA\
          \u5DF1\u7528\u539F\u751F\u7684\u4EE3\u7801\u52A0\u8F7D\u5C31\u53EF\u4EE5\
          \u4E86\uFF0C\u91CF\u5316\u8017\u65F6\u5927\u69822-3\u5206\u949F\u3002</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-comment\"># \u7528\
          transformers\u539F\u751F\u53C2\u6570 load_in_8bit=True \u5C31\u53EF\u4EE5\
          \u4E86</span>\nmodel = AutoModel.from_pretrained(MODEL_PATH, trust_remote_code=<span\
          \ class=\"hljs-literal\">True</span>, device_map=<span class=\"hljs-string\"\
          >\"auto\"</span>,  load_in_8bit=<span class=\"hljs-literal\">True</span>)\n\
          </code></pre>\n"
        raw: "\u5728\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\u7684\u65F6\u5019\u4E0D\u8981\
          \u7528\u5B98\u65B9\u63D0\u4F9B\u7684\u91CF\u5316\u4EE3\u7801\n```python\n\
          # \u5B98\u65B9\u63D0\u4F9B\u7684\u4EE3\u7801\uFF1A\n# \u5C1D\u8BD5\u6DFB\
          \u52A0 --quantization_bit 8 \u6216 --quantization_bit 4\u3002\n# https://github.com/THUDM/ChatGLM3/blob/main/finetune_chatmodel_demo/finetune.py\n\
          model = model.quantize(model_args.quantization_bit)\n```\n\u81EA\u5DF1\u7528\
          \u539F\u751F\u7684\u4EE3\u7801\u52A0\u8F7D\u5C31\u53EF\u4EE5\u4E86\uFF0C\
          \u91CF\u5316\u8017\u65F6\u5927\u69822-3\u5206\u949F\u3002\n```python\n#\
          \ \u7528transformers\u539F\u751F\u53C2\u6570 load_in_8bit=True \u5C31\u53EF\
          \u4EE5\u4E86\nmodel = AutoModel.from_pretrained(MODEL_PATH, trust_remote_code=True,\
          \ device_map=\"auto\",  load_in_8bit=True)\n```"
        updatedAt: '2024-01-25T06:03:18.587Z'
      numEdits: 0
      reactions: []
    id: 65b1f9a6fcead433ff251214
    type: comment
  author: charent
  content: "\u5728\u52A0\u8F7D\u539F\u59CB\u6A21\u578B\u7684\u65F6\u5019\u4E0D\u8981\
    \u7528\u5B98\u65B9\u63D0\u4F9B\u7684\u91CF\u5316\u4EE3\u7801\n```python\n# \u5B98\
    \u65B9\u63D0\u4F9B\u7684\u4EE3\u7801\uFF1A\n# \u5C1D\u8BD5\u6DFB\u52A0 --quantization_bit\
    \ 8 \u6216 --quantization_bit 4\u3002\n# https://github.com/THUDM/ChatGLM3/blob/main/finetune_chatmodel_demo/finetune.py\n\
    model = model.quantize(model_args.quantization_bit)\n```\n\u81EA\u5DF1\u7528\u539F\
    \u751F\u7684\u4EE3\u7801\u52A0\u8F7D\u5C31\u53EF\u4EE5\u4E86\uFF0C\u91CF\u5316\
    \u8017\u65F6\u5927\u69822-3\u5206\u949F\u3002\n```python\n# \u7528transformers\u539F\
    \u751F\u53C2\u6570 load_in_8bit=True \u5C31\u53EF\u4EE5\u4E86\nmodel = AutoModel.from_pretrained(MODEL_PATH,\
    \ trust_remote_code=True, device_map=\"auto\",  load_in_8bit=True)\n```"
  created_at: 2024-01-25 06:03:18+00:00
  edited: false
  hidden: false
  id: 65b1f9a6fcead433ff251214
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 18
repo_id: THUDM/chatglm2-6b-int4
repo_type: model
status: open
target_branch: null
title: "\u4F7F\u7528AdaLora\u5FAE\u8C03\u8BAD\u7EC3chatglm2-6b-int4\u6A21\u578B\u62A5\
  \u9519"
