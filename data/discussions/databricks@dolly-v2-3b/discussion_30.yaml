!!python/object:huggingface_hub.community.DiscussionWithDetails
author: juan-cytora
conflicting_files: null
created_at: 2023-06-22 12:03:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:03:38.000Z'
    data:
      edited: false
      editors:
      - juan-cytora
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6183491349220276
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
          fullname: Juan Uys
          isHf: false
          isPro: false
          name: juan-cytora
          type: user
        html: "<p>Here are the contents of tokenizer_config.json</p>\n<pre><code>{\n\
          \  \"add_prefix_space\": false,\n  \"bos_token\": \"&lt;|endoftext|&gt;\"\
          ,\n  \"eos_token\": \"&lt;|endoftext|&gt;\",\n  \"model_max_length\": 1000000000000000019884624838656,\n\
          \  \"name_or_path\": \"EleutherAI/pythia-12b\",\n  \"special_tokens_map_file\"\
          : \"/admin/home-hailey/.cache/huggingface/hub/models--EleutherAI--gpt-neox-20b/snapshots/4e49eadb5d14bd22f314ec3f45b69a87b88c7691/special_tokens_map.json\"\
          ,\n  \"tokenizer_class\": \"GPTNeoXTokenizer\",\n  \"unk_token\": \"&lt;|endoftext|&gt;\"\
          \n}\n</code></pre>\n<p>I note that <code>special_tokens_map_file</code>\
          \ points to a file which doesn't exist in any of my testing environments,\
          \ which made me question its (and now all the other fields') usefulness.</p>\n"
        raw: "Here are the contents of tokenizer_config.json\r\n\r\n```\r\n{\r\n \
          \ \"add_prefix_space\": false,\r\n  \"bos_token\": \"<|endoftext|>\",\r\n\
          \  \"eos_token\": \"<|endoftext|>\",\r\n  \"model_max_length\": 1000000000000000019884624838656,\r\
          \n  \"name_or_path\": \"EleutherAI/pythia-12b\",\r\n  \"special_tokens_map_file\"\
          : \"/admin/home-hailey/.cache/huggingface/hub/models--EleutherAI--gpt-neox-20b/snapshots/4e49eadb5d14bd22f314ec3f45b69a87b88c7691/special_tokens_map.json\"\
          ,\r\n  \"tokenizer_class\": \"GPTNeoXTokenizer\",\r\n  \"unk_token\": \"\
          <|endoftext|>\"\r\n}\r\n```\r\nI note that `special_tokens_map_file` points\
          \ to a file which doesn't exist in any of my testing environments, which\
          \ made me question its (and now all the other fields') usefulness.\r\n"
        updatedAt: '2023-06-22T13:03:38.563Z'
      numEdits: 0
      reactions: []
    id: 649446aa2be71393c491e58b
    type: comment
  author: juan-cytora
  content: "Here are the contents of tokenizer_config.json\r\n\r\n```\r\n{\r\n  \"\
    add_prefix_space\": false,\r\n  \"bos_token\": \"<|endoftext|>\",\r\n  \"eos_token\"\
    : \"<|endoftext|>\",\r\n  \"model_max_length\": 1000000000000000019884624838656,\r\
    \n  \"name_or_path\": \"EleutherAI/pythia-12b\",\r\n  \"special_tokens_map_file\"\
    : \"/admin/home-hailey/.cache/huggingface/hub/models--EleutherAI--gpt-neox-20b/snapshots/4e49eadb5d14bd22f314ec3f45b69a87b88c7691/special_tokens_map.json\"\
    ,\r\n  \"tokenizer_class\": \"GPTNeoXTokenizer\",\r\n  \"unk_token\": \"<|endoftext|>\"\
    \r\n}\r\n```\r\nI note that `special_tokens_map_file` points to a file which doesn't\
    \ exist in any of my testing environments, which made me question its (and now\
    \ all the other fields') usefulness.\r\n"
  created_at: 2023-06-22 12:03:38+00:00
  edited: false
  hidden: false
  id: 649446aa2be71393c491e58b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-06-22T13:06:25.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9938286542892456
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>I don''t think it''s used. This is a holdover from Pythia where
          also not sure if it has significance </p>

          '
        raw: 'I don''t think it''s used. This is a holdover from Pythia where also
          not sure if it has significance '
        updatedAt: '2023-06-22T13:06:25.583Z'
      numEdits: 0
      reactions: []
    id: 64944751212ffa1f3645c0e2
    type: comment
  author: srowen
  content: 'I don''t think it''s used. This is a holdover from Pythia where also not
    sure if it has significance '
  created_at: 2023-06-22 12:06:25+00:00
  edited: false
  hidden: false
  id: 64944751212ffa1f3645c0e2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:07:52.000Z'
    data:
      edited: false
      editors:
      - juan-cytora
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.88772052526474
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
          fullname: Juan Uys
          isHf: false
          isPro: false
          name: juan-cytora
          type: user
        html: '<p>Thanks Sean, what about the other fields?</p>

          <p>E.g. I fine-tuned each of 3b/7b/12b, but for all of them just copied
          the pipelines from 3b, which means all of them have:</p>

          <pre><code>"name_or_path": "EleutherAI/pythia-2.8b",

          </code></pre>

          <p>Wondering if this breaks things.</p>

          '
        raw: 'Thanks Sean, what about the other fields?


          E.g. I fine-tuned each of 3b/7b/12b, but for all of them just copied the
          pipelines from 3b, which means all of them have:


          ```

          "name_or_path": "EleutherAI/pythia-2.8b",

          ```


          Wondering if this breaks things.'
        updatedAt: '2023-06-22T13:07:52.359Z'
      numEdits: 0
      reactions: []
    id: 649447a82be71393c491fe0d
    type: comment
  author: juan-cytora
  content: 'Thanks Sean, what about the other fields?


    E.g. I fine-tuned each of 3b/7b/12b, but for all of them just copied the pipelines
    from 3b, which means all of them have:


    ```

    "name_or_path": "EleutherAI/pythia-2.8b",

    ```


    Wondering if this breaks things.'
  created_at: 2023-06-22 12:07:52+00:00
  edited: false
  hidden: false
  id: 649447a82be71393c491fe0d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:09:09.000Z'
    data:
      edited: false
      editors:
      - juan-cytora
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9923169612884521
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
          fullname: Juan Uys
          isHf: false
          isPro: false
          name: juan-cytora
          type: user
        html: '<p>(I suppose where you say "I don''t think it''s used." by "it''s"
          you mean the entire file, not just that one field...)</p>

          '
        raw: (I suppose where you say "I don't think it's used." by "it's" you mean
          the entire file, not just that one field...)
        updatedAt: '2023-06-22T13:09:09.866Z'
      numEdits: 0
      reactions: []
    id: 649447f5ac4822c3779da8f9
    type: comment
  author: juan-cytora
  content: (I suppose where you say "I don't think it's used." by "it's" you mean
    the entire file, not just that one field...)
  created_at: 2023-06-22 12:09:09+00:00
  edited: false
  hidden: false
  id: 649447f5ac4822c3779da8f9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-06-22T13:09:36.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9500899910926819
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>That is important, it says what tokenizer to use. It is Pythia''s
          . It is not modified here</p>

          '
        raw: That is important, it says what tokenizer to use. It is Pythia's . It
          is not modified here
        updatedAt: '2023-06-22T13:09:36.333Z'
      numEdits: 0
      reactions: []
    id: 649448102b32f4282401785c
    type: comment
  author: srowen
  content: That is important, it says what tokenizer to use. It is Pythia's . It is
    not modified here
  created_at: 2023-06-22 12:09:36+00:00
  edited: false
  hidden: false
  id: 649448102b32f4282401785c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
      fullname: Sean Owen
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: srowen
      type: user
    createdAt: '2023-06-22T13:10:00.000Z'
    data:
      edited: false
      editors:
      - srowen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9752359986305237
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63050fbfce6b12280b1e2976/2lJphRSgdt9B_5YAQ1SIs.jpeg?w=200&h=200&f=face
          fullname: Sean Owen
          isHf: false
          isPro: false
          name: srowen
          type: user
        html: '<p>I mean just that one entry</p>

          '
        raw: I mean just that one entry
        updatedAt: '2023-06-22T13:10:00.634Z'
      numEdits: 0
      reactions: []
    id: 64944828aa1ba69d28e55697
    type: comment
  author: srowen
  content: I mean just that one entry
  created_at: 2023-06-22 12:10:00+00:00
  edited: false
  hidden: false
  id: 64944828aa1ba69d28e55697
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:11:30.000Z'
    data:
      edited: false
      editors:
      - juan-cytora
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6869189739227295
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
          fullname: Juan Uys
          isHf: false
          isPro: false
          name: juan-cytora
          type: user
        html: '<p>OK, thanks Sean!</p>

          '
        raw: OK, thanks Sean!
        updatedAt: '2023-06-22T13:11:30.526Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64944882b14db30b0a9799d0
    id: 64944882b14db30b0a9799ce
    type: comment
  author: juan-cytora
  content: OK, thanks Sean!
  created_at: 2023-06-22 12:11:30+00:00
  edited: false
  hidden: false
  id: 64944882b14db30b0a9799ce
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:11:30.000Z'
    data:
      status: closed
    id: 64944882b14db30b0a9799d0
    type: status-change
  author: juan-cytora
  created_at: 2023-06-22 12:11:30+00:00
  id: 64944882b14db30b0a9799d0
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
      fullname: Juan Uys
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: juan-cytora
      type: user
    createdAt: '2023-06-22T13:20:13.000Z'
    data:
      edited: true
      editors:
      - juan-cytora
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7223125696182251
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/UEeLkeMbtcoMfm72geVGF.jpeg?w=200&h=200&f=face
          fullname: Juan Uys
          isHf: false
          isPro: false
          name: juan-cytora
          type: user
        html: '<p>Quick test: only <code>name_or_path</code> seems to differ:</p>

          <pre><code>mkdir 3b 7b 12b

          for scale in 3b 7b 12b; do for file in instruct_pipeline.py special_tokens_map.json
          tokenizer_config.json tokenizer.json ; do cd $scale ; wget https://huggingface.co/databricks/dolly-v2-$scale/raw/main/$file
          ; done; cd -; done

          </code></pre>

          <h1 id="what-differs">What differs?</h1>

          <pre><code>% for f in `ls -1 3b`; do diff -q 3b/$f 7b/$f; done

          Files 3b/instruct_pipeline.py and 7b/instruct_pipeline.py differ

          Files 3b/tokenizer_config.json and 7b/tokenizer_config.json differ

          </code></pre>

          <pre><code>% for f in `ls -1 3b`; do diff -q 3b/$f 12b/$f; done

          Files 3b/instruct_pipeline.py and 12b/instruct_pipeline.py differ

          Files 3b/tokenizer_config.json and 12b/tokenizer_config.json differ

          </code></pre>

          <pre><code>% for f in `ls -1 3b`; do diff -q 7b/$f 12b/$f; done

          Files 7b/tokenizer_config.json and 12b/tokenizer_config.json differ

          </code></pre>

          <p><code>instruct_pipeline.py</code> doesn''t really differ. Just newline
          at end of file.</p>

          <h1 id="just-one-field-differs-in-tokenizer_configjson">Just one field differs
          in tokenizer_config.json</h1>

          <p>Which is the important one, as Sean noted.</p>

          <pre><code>% diff {3b,7b}/tokenizer_config.json

          6c6

          &lt;   "name_or_path": "EleutherAI/pythia-2.8b",

          ---

          &gt;   "name_or_path": "EleutherAI/pythia-6.9b",

          </code></pre>

          <pre><code>% diff {3b,12b}/tokenizer_config.json

          6c6

          &lt;   "name_or_path": "EleutherAI/pythia-2.8b",

          ---

          &gt;   "name_or_path": "EleutherAI/pythia-12b",

          </code></pre>

          '
        raw: 'Quick test: only `name_or_path` seems to differ:


          ```

          mkdir 3b 7b 12b

          for scale in 3b 7b 12b; do for file in instruct_pipeline.py special_tokens_map.json
          tokenizer_config.json tokenizer.json ; do cd $scale ; wget https://huggingface.co/databricks/dolly-v2-$scale/raw/main/$file
          ; done; cd -; done

          ```


          # What differs?


          ```

          % for f in `ls -1 3b`; do diff -q 3b/$f 7b/$f; done

          Files 3b/instruct_pipeline.py and 7b/instruct_pipeline.py differ

          Files 3b/tokenizer_config.json and 7b/tokenizer_config.json differ

          ```


          ```

          % for f in `ls -1 3b`; do diff -q 3b/$f 12b/$f; done

          Files 3b/instruct_pipeline.py and 12b/instruct_pipeline.py differ

          Files 3b/tokenizer_config.json and 12b/tokenizer_config.json differ

          ```


          ```

          % for f in `ls -1 3b`; do diff -q 7b/$f 12b/$f; done

          Files 7b/tokenizer_config.json and 12b/tokenizer_config.json differ

          ```


          `instruct_pipeline.py` doesn''t really differ. Just newline at end of file.


          # Just one field differs in tokenizer_config.json


          Which is the important one, as Sean noted.


          ```

          % diff {3b,7b}/tokenizer_config.json

          6c6

          <   "name_or_path": "EleutherAI/pythia-2.8b",

          ---

          >   "name_or_path": "EleutherAI/pythia-6.9b",

          ```


          ```

          % diff {3b,12b}/tokenizer_config.json

          6c6

          <   "name_or_path": "EleutherAI/pythia-2.8b",

          ---

          >   "name_or_path": "EleutherAI/pythia-12b",

          ```'
        updatedAt: '2023-06-22T13:20:29.582Z'
      numEdits: 1
      reactions: []
    id: 64944a8d5c7ba28747900e56
    type: comment
  author: juan-cytora
  content: 'Quick test: only `name_or_path` seems to differ:


    ```

    mkdir 3b 7b 12b

    for scale in 3b 7b 12b; do for file in instruct_pipeline.py special_tokens_map.json
    tokenizer_config.json tokenizer.json ; do cd $scale ; wget https://huggingface.co/databricks/dolly-v2-$scale/raw/main/$file
    ; done; cd -; done

    ```


    # What differs?


    ```

    % for f in `ls -1 3b`; do diff -q 3b/$f 7b/$f; done

    Files 3b/instruct_pipeline.py and 7b/instruct_pipeline.py differ

    Files 3b/tokenizer_config.json and 7b/tokenizer_config.json differ

    ```


    ```

    % for f in `ls -1 3b`; do diff -q 3b/$f 12b/$f; done

    Files 3b/instruct_pipeline.py and 12b/instruct_pipeline.py differ

    Files 3b/tokenizer_config.json and 12b/tokenizer_config.json differ

    ```


    ```

    % for f in `ls -1 3b`; do diff -q 7b/$f 12b/$f; done

    Files 7b/tokenizer_config.json and 12b/tokenizer_config.json differ

    ```


    `instruct_pipeline.py` doesn''t really differ. Just newline at end of file.


    # Just one field differs in tokenizer_config.json


    Which is the important one, as Sean noted.


    ```

    % diff {3b,7b}/tokenizer_config.json

    6c6

    <   "name_or_path": "EleutherAI/pythia-2.8b",

    ---

    >   "name_or_path": "EleutherAI/pythia-6.9b",

    ```


    ```

    % diff {3b,12b}/tokenizer_config.json

    6c6

    <   "name_or_path": "EleutherAI/pythia-2.8b",

    ---

    >   "name_or_path": "EleutherAI/pythia-12b",

    ```'
  created_at: 2023-06-22 12:20:13+00:00
  edited: true
  hidden: false
  id: 64944a8d5c7ba28747900e56
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 30
repo_id: databricks/dolly-v2-3b
repo_type: model
status: closed
target_branch: null
title: Which fields in tokenizer_config.json are important?
