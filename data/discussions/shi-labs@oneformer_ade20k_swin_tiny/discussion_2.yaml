!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Jazz72
conflicting_files: null
created_at: 2022-12-30 09:04:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661235990956-noauth.png?w=200&h=200&f=face
      fullname: Pau Domingo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jazz72
      type: user
    createdAt: '2022-12-30T09:04:20.000Z'
    data:
      edited: true
      editors:
      - Jazz72
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661235990956-noauth.png?w=200&h=200&f=face
          fullname: Pau Domingo
          isHf: false
          isPro: false
          name: Jazz72
          type: user
        html: "<p>This version at commit <a href=\"/shi-labs/oneformer_ade20k_swin_tiny/commit/335f67e01854325c968b30ea36487505e33cdbbd\"\
          >335f67e01854325c968b30ea36487505e33cdbbd</a> produces segmentation masks\
          \ to only detect one class. If we could access to the previous snapshot\
          \ <a href=\"/shi-labs/oneformer_ade20k_swin_tiny/commit/95748dabb58e92dd8854b63aba1cf30eb2370ecd\"\
          >95748dabb58e92dd8854b63aba1cf30eb2370ecd</a> i think this could be solved.\
          \ Here is my code, using the following repo <a rel=\"nofollow\" href=\"\
          https://github.com/praeclarumjj3/transformers.git@oneformer\">https://github.com/praeclarumjj3/transformers.git@oneformer</a>\
          \ and snapshot <a href=\"/shi-labs/oneformer_ade20k_swin_tiny/commit/335f67e01854325c968b30ea36487505e33cdbbd\"\
          >335f67e01854325c968b30ea36487505e33cdbbd</a></p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-keyword\">from</span> transformers <span class=\"hljs-keyword\"\
          >import</span> OneFormerProcessor, OneFormerForUniversalSegmentation\n<span\
          \ class=\"hljs-keyword\">from</span> PIL <span class=\"hljs-keyword\">import</span>\
          \ Image\nprocessor = OneFormerProcessor.from_pretrained(<span class=\"hljs-string\"\
          >\"shi-labs/oneformer_ade20k_swin_tiny\"</span>)\nmodel = OneFormerForUniversalSegmentation.from_pretrained(<span\
          \ class=\"hljs-string\">\"shi-labs/oneformer_ade20k_swin_tiny\"</span>)\n\
          image = Image.<span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\"\
          >'image.png'</span>)\ninputs = processor(image, task_inputs = [<span class=\"\
          hljs-string\">'semantic'</span>], return_tensors=<span class=\"hljs-string\"\
          >'pt'</span>)\noutputs = model(** inputs)\npredicted_semantic_map = processor.post_process_semantic_segmentation(outputs,\
          \ target_sizes=[image.size[::-<span class=\"hljs-number\">1</span>]])[<span\
          \ class=\"hljs-number\">0</span>]\n\npredicted_semantic_map: tensor([[<span\
          \ class=\"hljs-number\">14</span>, <span class=\"hljs-number\">14</span>,\
          \ <span class=\"hljs-number\">14</span>,  ..., <span class=\"hljs-number\"\
          >14</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\"\
          >14</span>],\n        [<span class=\"hljs-number\">14</span>, <span class=\"\
          hljs-number\">14</span>, <span class=\"hljs-number\">14</span>,  ..., <span\
          \ class=\"hljs-number\">14</span>, <span class=\"hljs-number\">14</span>,\
          \ <span class=\"hljs-number\">14</span>],\n        [<span class=\"hljs-number\"\
          >14</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\"\
          >14</span>,  ..., <span class=\"hljs-number\">14</span>, <span class=\"\
          hljs-number\">14</span>, <span class=\"hljs-number\">14</span>],\n     \
          \   ...,\n        [<span class=\"hljs-number\">14</span>, <span class=\"\
          hljs-number\">14</span>, <span class=\"hljs-number\">14</span>,  ..., <span\
          \ class=\"hljs-number\">14</span>, <span class=\"hljs-number\">14</span>,\
          \ <span class=\"hljs-number\">14</span>],\n        [<span class=\"hljs-number\"\
          >14</span>, <span class=\"hljs-number\">14</span>, <span class=\"hljs-number\"\
          >14</span>,  ..., <span class=\"hljs-number\">14</span>, <span class=\"\
          hljs-number\">14</span>, <span class=\"hljs-number\">14</span>],\n     \
          \   [<span class=\"hljs-number\">14</span>, <span class=\"hljs-number\"\
          >14</span>, <span class=\"hljs-number\">14</span>,  ..., <span class=\"\
          hljs-number\">14</span>, <span class=\"hljs-number\">14</span>, <span class=\"\
          hljs-number\">14</span>]])\n</code></pre>\n"
        raw: "This version at commit 335f67e01854325c968b30ea36487505e33cdbbd produces\
          \ segmentation masks to only detect one class. If we could access to the\
          \ previous snapshot 95748dabb58e92dd8854b63aba1cf30eb2370ecd i think this\
          \ could be solved. Here is my code, using the following repo https://github.com/praeclarumjj3/transformers.git@oneformer\
          \ and snapshot 335f67e01854325c968b30ea36487505e33cdbbd\n```python\nfrom\
          \ transformers import OneFormerProcessor, OneFormerForUniversalSegmentation\n\
          from PIL import Image\nprocessor = OneFormerProcessor.from_pretrained(\"\
          shi-labs/oneformer_ade20k_swin_tiny\")\nmodel = OneFormerForUniversalSegmentation.from_pretrained(\"\
          shi-labs/oneformer_ade20k_swin_tiny\")\nimage = Image.open('image.png')\n\
          inputs = processor(image, task_inputs = ['semantic'], return_tensors='pt')\n\
          outputs = model(** inputs)\npredicted_semantic_map = processor.post_process_semantic_segmentation(outputs,\
          \ target_sizes=[image.size[::-1]])[0]\n\npredicted_semantic_map: tensor([[14,\
          \ 14, 14,  ..., 14, 14, 14],\n        [14, 14, 14,  ..., 14, 14, 14],\n\
          \        [14, 14, 14,  ..., 14, 14, 14],\n        ...,\n        [14, 14,\
          \ 14,  ..., 14, 14, 14],\n        [14, 14, 14,  ..., 14, 14, 14],\n    \
          \    [14, 14, 14,  ..., 14, 14, 14]])\n```"
        updatedAt: '2022-12-30T09:05:17.121Z'
      numEdits: 1
      reactions: []
    id: 63aea994557befe297a7c7d5
    type: comment
  author: Jazz72
  content: "This version at commit 335f67e01854325c968b30ea36487505e33cdbbd produces\
    \ segmentation masks to only detect one class. If we could access to the previous\
    \ snapshot 95748dabb58e92dd8854b63aba1cf30eb2370ecd i think this could be solved.\
    \ Here is my code, using the following repo https://github.com/praeclarumjj3/transformers.git@oneformer\
    \ and snapshot 335f67e01854325c968b30ea36487505e33cdbbd\n```python\nfrom transformers\
    \ import OneFormerProcessor, OneFormerForUniversalSegmentation\nfrom PIL import\
    \ Image\nprocessor = OneFormerProcessor.from_pretrained(\"shi-labs/oneformer_ade20k_swin_tiny\"\
    )\nmodel = OneFormerForUniversalSegmentation.from_pretrained(\"shi-labs/oneformer_ade20k_swin_tiny\"\
    )\nimage = Image.open('image.png')\ninputs = processor(image, task_inputs = ['semantic'],\
    \ return_tensors='pt')\noutputs = model(** inputs)\npredicted_semantic_map = processor.post_process_semantic_segmentation(outputs,\
    \ target_sizes=[image.size[::-1]])[0]\n\npredicted_semantic_map: tensor([[14,\
    \ 14, 14,  ..., 14, 14, 14],\n        [14, 14, 14,  ..., 14, 14, 14],\n      \
    \  [14, 14, 14,  ..., 14, 14, 14],\n        ...,\n        [14, 14, 14,  ..., 14,\
    \ 14, 14],\n        [14, 14, 14,  ..., 14, 14, 14],\n        [14, 14, 14,  ...,\
    \ 14, 14, 14]])\n```"
  created_at: 2022-12-30 09:04:20+00:00
  edited: true
  hidden: false
  id: 63aea994557befe297a7c7d5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-01-19T14:35:32.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: '<p>Hi,</p>

          <p>OneFormer was just merged into the main branch, could you try again?</p>

          '
        raw: 'Hi,


          OneFormer was just merged into the main branch, could you try again?'
        updatedAt: '2023-01-19T14:35:32.352Z'
      numEdits: 0
      reactions: []
    id: 63c95534988796b9db59292e
    type: comment
  author: nielsr
  content: 'Hi,


    OneFormer was just merged into the main branch, could you try again?'
  created_at: 2023-01-19 14:35:32+00:00
  edited: false
  hidden: false
  id: 63c95534988796b9db59292e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63579f324fba057662ce32a5/Ux-60gK6tlgLw-ypf4jBk.png?w=200&h=200&f=face
      fullname: StageInHome
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: StageInHome
      type: user
    createdAt: '2023-01-20T10:40:14.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63579f324fba057662ce32a5/Ux-60gK6tlgLw-ypf4jBk.png?w=200&h=200&f=face
          fullname: StageInHome
          isHf: false
          isPro: false
          name: StageInHome
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-01-20T10:40:28.769Z'
      numEdits: 0
      reactions: []
    id: 63ca6f8ea9c026b1d1f4e7dc
    type: comment
  author: StageInHome
  content: This comment has been hidden
  created_at: 2023-01-20 10:40:14+00:00
  edited: true
  hidden: true
  id: 63ca6f8ea9c026b1d1f4e7dc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661235990956-noauth.png?w=200&h=200&f=face
      fullname: Pau Domingo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jazz72
      type: user
    createdAt: '2023-01-20T10:43:11.000Z'
    data:
      edited: false
      editors:
      - Jazz72
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661235990956-noauth.png?w=200&h=200&f=face
          fullname: Pau Domingo
          isHf: false
          isPro: false
          name: Jazz72
          type: user
        html: '<p>Works perfectly! Thanks!</p>

          '
        raw: Works perfectly! Thanks!
        updatedAt: '2023-01-20T10:43:11.312Z'
      numEdits: 0
      reactions: []
    id: 63ca703f538ffe073f42dccd
    type: comment
  author: Jazz72
  content: Works perfectly! Thanks!
  created_at: 2023-01-20 10:43:11+00:00
  edited: false
  hidden: false
  id: 63ca703f538ffe073f42dccd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-01-20T10:54:09.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: '<p>Thanks for verifying! Closing this issue.</p>

          '
        raw: Thanks for verifying! Closing this issue.
        updatedAt: '2023-01-20T10:54:09.833Z'
      numEdits: 0
      reactions: []
      relatedEventId: 63ca72d1a9c026b1d1f53b4b
    id: 63ca72d1a9c026b1d1f53b4a
    type: comment
  author: nielsr
  content: Thanks for verifying! Closing this issue.
  created_at: 2023-01-20 10:54:09+00:00
  edited: false
  hidden: false
  id: 63ca72d1a9c026b1d1f53b4a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2023-01-20T10:54:09.000Z'
    data:
      status: closed
    id: 63ca72d1a9c026b1d1f53b4b
    type: status-change
  author: nielsr
  created_at: 2023-01-20 10:54:09+00:00
  id: 63ca72d1a9c026b1d1f53b4b
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: shi-labs/oneformer_ade20k_swin_tiny
repo_type: model
status: closed
target_branch: null
title: Actual version not working
