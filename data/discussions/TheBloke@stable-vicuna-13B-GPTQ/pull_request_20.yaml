!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mzbac
conflicting_files: []
created_at: 2023-05-14 11:23:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/513e0d2c15cfbb1542cb268eb2c8d68b.svg
      fullname: 'null'
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mzbac
      type: user
    createdAt: '2023-05-14T12:23:38.000Z'
    data:
      edited: false
      editors:
      - mzbac
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/513e0d2c15cfbb1542cb268eb2c8d68b.svg
          fullname: 'null'
          isHf: false
          isPro: false
          name: mzbac
          type: user
        html: ''
        raw: ''
        updatedAt: '2023-05-14T12:23:38.828Z'
      numEdits: 0
      reactions: []
    id: 6460d2ca604bf8923332b3e7
    type: comment
  author: mzbac
  content: ''
  created_at: 2023-05-14 11:23:38+00:00
  edited: false
  hidden: false
  id: 6460d2ca604bf8923332b3e7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/513e0d2c15cfbb1542cb268eb2c8d68b.svg
      fullname: 'null'
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mzbac
      type: user
    createdAt: '2023-05-14T12:23:39.000Z'
    data:
      oid: 67dc7e41b29aeb56be9f5e0320f338707e332b16
      parents:
      - 71a9918aa96e8367b102aba1d98982a3658df0ac
      subject: Fix the special token mapping
    id: 6460d2cb0000000000000000
    type: commit
  author: mzbac
  created_at: 2023-05-14 11:23:39+00:00
  id: 6460d2cb0000000000000000
  oid: 67dc7e41b29aeb56be9f5e0320f338707e332b16
  summary: Fix the special token mapping
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-14T15:17:29.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>Have you tested this change and confirmed a positive benefit? If
          so can you give details of that?</p>

          <p>I kept special_tokens_map.json the same as it was provided by the Stable
          Vicuna team. I did test changing it like you have here, but noticed no benefit.
          It still required a very specific prompt template.</p>

          <p>If there''s some known benefit to changing it then I''ll happily do it.
          But otherwise I''d prefer to keep using the same file as provided by the
          original creators, as that''s what they trained with.</p>

          '
        raw: 'Have you tested this change and confirmed a positive benefit? If so
          can you give details of that?


          I kept special_tokens_map.json the same as it was provided by the Stable
          Vicuna team. I did test changing it like you have here, but noticed no benefit.
          It still required a very specific prompt template.


          If there''s some known benefit to changing it then I''ll happily do it.
          But otherwise I''d prefer to keep using the same file as provided by the
          original creators, as that''s what they trained with.'
        updatedAt: '2023-05-14T15:17:29.602Z'
      numEdits: 0
      reactions: []
    id: 6460fb893cc3259ce0598dd5
    type: comment
  author: TheBloke
  content: 'Have you tested this change and confirmed a positive benefit? If so can
    you give details of that?


    I kept special_tokens_map.json the same as it was provided by the Stable Vicuna
    team. I did test changing it like you have here, but noticed no benefit. It still
    required a very specific prompt template.


    If there''s some known benefit to changing it then I''ll happily do it. But otherwise
    I''d prefer to keep using the same file as provided by the original creators,
    as that''s what they trained with.'
  created_at: 2023-05-14 14:17:29+00:00
  edited: false
  hidden: false
  id: 6460fb893cc3259ce0598dd5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/513e0d2c15cfbb1542cb268eb2c8d68b.svg
      fullname: 'null'
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mzbac
      type: user
    createdAt: '2023-05-14T16:01:53.000Z'
    data:
      edited: true
      editors:
      - mzbac
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/513e0d2c15cfbb1542cb268eb2c8d68b.svg
          fullname: 'null'
          isHf: false
          isPro: false
          name: mzbac
          type: user
        html: '<p>Just noticed it from the Reddit post here: <a rel="nofollow" href="https://www.reddit.com/r/LocalLLaMA/comments/13h3tac/gptqforllama_repo_default_tokenization_issue_and/">https://www.reddit.com/r/LocalLLaMA/comments/13h3tac/gptqforllama_repo_default_tokenization_issue_and/</a>,
          thought it may be related. From my local test, I didn''t see any significant
          improvement for the model output. However, the stable Vicuna seems to have
          the same issue -&gt; <a href="https://huggingface.co/CarperAI/stable-vicuna-13b-delta/discussions/3">https://huggingface.co/CarperAI/stable-vicuna-13b-delta/discussions/3</a></p>

          '
        raw: 'Just noticed it from the Reddit post here: https://www.reddit.com/r/LocalLLaMA/comments/13h3tac/gptqforllama_repo_default_tokenization_issue_and/,
          thought it may be related. From my local test, I didn''t see any significant
          improvement for the model output. However, the stable Vicuna seems to have
          the same issue -> https://huggingface.co/CarperAI/stable-vicuna-13b-delta/discussions/3'
        updatedAt: '2023-05-15T00:01:14.829Z'
      numEdits: 1
      reactions: []
    id: 646105f1567598449e0645b6
    type: comment
  author: mzbac
  content: 'Just noticed it from the Reddit post here: https://www.reddit.com/r/LocalLLaMA/comments/13h3tac/gptqforllama_repo_default_tokenization_issue_and/,
    thought it may be related. From my local test, I didn''t see any significant improvement
    for the model output. However, the stable Vicuna seems to have the same issue
    -> https://huggingface.co/CarperAI/stable-vicuna-13b-delta/discussions/3'
  created_at: 2023-05-14 15:01:53+00:00
  edited: true
  hidden: false
  id: 646105f1567598449e0645b6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-15T07:39:23.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>Yeah, that was the issue. They used Vicuna v0 which didn''t train
          with a stopping token, and so it would only work with a specific prompt
          template.  In my testing, changing special_tokens_map.json doesn''t help,
          because it wasn''t trained to use a stopping token in the first place.</p>

          <p>So I''d prefer to keep my files matching the ones they released, just
          to avoid confusion.</p>

          <p>Thanks anyway.</p>

          '
        raw: 'Yeah, that was the issue. They used Vicuna v0 which didn''t train with
          a stopping token, and so it would only work with a specific prompt template.  In
          my testing, changing special_tokens_map.json doesn''t help, because it wasn''t
          trained to use a stopping token in the first place.


          So I''d prefer to keep my files matching the ones they released, just to
          avoid confusion.


          Thanks anyway.'
        updatedAt: '2023-05-15T07:39:23.231Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6461e1abc67e1a494d8e7fff
    id: 6461e1abc67e1a494d8e7ffe
    type: comment
  author: TheBloke
  content: 'Yeah, that was the issue. They used Vicuna v0 which didn''t train with
    a stopping token, and so it would only work with a specific prompt template.  In
    my testing, changing special_tokens_map.json doesn''t help, because it wasn''t
    trained to use a stopping token in the first place.


    So I''d prefer to keep my files matching the ones they released, just to avoid
    confusion.


    Thanks anyway.'
  created_at: 2023-05-15 06:39:23+00:00
  edited: false
  hidden: false
  id: 6461e1abc67e1a494d8e7ffe
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-15T07:39:23.000Z'
    data:
      status: closed
    id: 6461e1abc67e1a494d8e7fff
    type: status-change
  author: TheBloke
  created_at: 2023-05-15 06:39:23+00:00
  id: 6461e1abc67e1a494d8e7fff
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-19T08:57:07.000Z'
    data:
      status: open
    id: 646739e33a7c8dda2300207f
    type: status-change
  author: TheBloke
  created_at: 2023-05-19 07:57:07+00:00
  id: 646739e33a7c8dda2300207f
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-19T08:58:54.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: '<p>Just to say that CarperAI have just merged a change change similar
          to this, so you were right that it makes a difference to have this!</p>

          <p>I will use the exact file they put into their repo, which has a couple
          of other changes as always. But just wanted to say thanks for PRing this.</p>

          '
        raw: 'Just to say that CarperAI have just merged a change change similar to
          this, so you were right that it makes a difference to have this!


          I will use the exact file they put into their repo, which has a couple of
          other changes as always. But just wanted to say thanks for PRing this.'
        updatedAt: '2023-05-19T08:58:54.909Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - mzbac
      relatedEventId: 64673a4e3a7c8dda2300291c
    id: 64673a4e3a7c8dda2300291b
    type: comment
  author: TheBloke
  content: 'Just to say that CarperAI have just merged a change change similar to
    this, so you were right that it makes a difference to have this!


    I will use the exact file they put into their repo, which has a couple of other
    changes as always. But just wanted to say thanks for PRing this.'
  created_at: 2023-05-19 07:58:54+00:00
  edited: false
  hidden: false
  id: 64673a4e3a7c8dda2300291b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-05-19T08:58:54.000Z'
    data:
      status: merged
    id: 64673a4e3a7c8dda2300291c
    type: status-change
  author: TheBloke
  created_at: 2023-05-19 07:58:54+00:00
  id: 64673a4e3a7c8dda2300291c
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: c427dd91baae9d5d7e4d11c74ab79bbda8e43c9f
num: 20
repo_id: TheBloke/stable-vicuna-13B-GPTQ
repo_type: model
status: merged
target_branch: refs/heads/main
title: Fix the special token mapping
