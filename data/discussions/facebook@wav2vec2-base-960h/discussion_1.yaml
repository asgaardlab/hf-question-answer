!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jonasislive
conflicting_files: null
created_at: 2022-06-22 15:21:43+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0c525f4ead100c7d988f18a36eada767.svg
      fullname: bjerg
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jonasislive
      type: user
    createdAt: '2022-06-22T16:21:43.000Z'
    data:
      edited: false
      editors:
      - jonasislive
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0c525f4ead100c7d988f18a36eada767.svg
          fullname: bjerg
          isHf: false
          isPro: false
          name: jonasislive
          type: user
        html: '<p>I followed the installation guide and cloned the repo to my machine.</p>

          <p>But the model is completely wrong when i run the code below. but if i
          instead use the online test option on the models front page, i get perfect
          results. the audio file says "test one two three" which is  exactly correct
          in the browser test, but completely wrong on the local model. any suggestions
          would be greatly appreciated</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1655914822276-62b33fb14ea3eff279d6d703.png"><img
          alt="Screenshot 2022-06-22 at 18.12.42.png" src="https://cdn-uploads.huggingface.co/production/uploads/1655914822276-62b33fb14ea3eff279d6d703.png"></a></p>

          '
        raw: "I followed the installation guide and cloned the repo to my machine.\r\
          \n\r\nBut the model is completely wrong when i run the code below. but if\
          \ i instead use the online test option on the models front page, i get perfect\
          \ results. the audio file says \"test one two three\" which is  exactly\
          \ correct in the browser test, but completely wrong on the local model.\
          \ any suggestions would be greatly appreciated\r\n\r\n![Screenshot 2022-06-22\
          \ at 18.12.42.png](https://cdn-uploads.huggingface.co/production/uploads/1655914822276-62b33fb14ea3eff279d6d703.png)\r\
          \n"
        updatedAt: '2022-06-22T16:21:43.199Z'
      numEdits: 0
      reactions: []
    id: 62b34197003cd12329d38584
    type: comment
  author: jonasislive
  content: "I followed the installation guide and cloned the repo to my machine.\r\
    \n\r\nBut the model is completely wrong when i run the code below. but if i instead\
    \ use the online test option on the models front page, i get perfect results.\
    \ the audio file says \"test one two three\" which is  exactly correct in the\
    \ browser test, but completely wrong on the local model. any suggestions would\
    \ be greatly appreciated\r\n\r\n![Screenshot 2022-06-22 at 18.12.42.png](https://cdn-uploads.huggingface.co/production/uploads/1655914822276-62b33fb14ea3eff279d6d703.png)\r\
    \n"
  created_at: 2022-06-22 15:21:43+00:00
  edited: false
  hidden: false
  id: 62b34197003cd12329d38584
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/629ef7454313a7c1dd66f208/IyGo_XIdoCMpDaxBBsFho.png?w=200&h=200&f=face
      fullname: Hemanth-thunder
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Hemanth-thunder
      type: user
    createdAt: '2022-06-23T05:00:33.000Z'
    data:
      edited: true
      editors:
      - Hemanth-thunder
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/629ef7454313a7c1dd66f208/IyGo_XIdoCMpDaxBBsFho.png?w=200&h=200&f=face
          fullname: Hemanth-thunder
          isHf: false
          isPro: false
          name: Hemanth-thunder
          type: user
        html: '<p>hi mate i also faced same issue for longer wav audio , </p>

          <ol>

          <li>remove noise </li>

          <li>do chunk for longer audio</li>

          <li>use torch.nograd()<br>4.using librose</li>

          </ol>

          '
        raw: "hi mate i also faced same issue for longer wav audio , \n1. remove noise\
          \ \n2. do chunk for longer audio\n3. use torch.nograd()\n4.using librose"
        updatedAt: '2022-06-23T05:02:18.730Z'
      numEdits: 1
      reactions: []
    id: 62b3f3710385d6048988eac8
    type: comment
  author: Hemanth-thunder
  content: "hi mate i also faced same issue for longer wav audio , \n1. remove noise\
    \ \n2. do chunk for longer audio\n3. use torch.nograd()\n4.using librose"
  created_at: 2022-06-23 04:00:33+00:00
  edited: true
  hidden: false
  id: 62b3f3710385d6048988eac8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2022-06-28T11:17:21.000Z'
    data:
      edited: true
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;jonasislive&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/jonasislive\"\
          >@<span class=\"underline\">jonasislive</span></a></span>\n\n\t</span></span>!\
          \ Have you verified that the sampling rate of the <code>.wav</code> file\
          \ matches the sampling rate of the Wav2Vec2 processor? If not, you will\
          \ need to resample the audio to 16kHz. </p>\n<p>For reference, you can paste\
          \ fenced code blocks by placing triple backticks ``` before and after the\
          \ code. As an example:</p>\n<pre><code class=\"language-python\"><span class=\"\
          hljs-keyword\">import</span> numpy <span class=\"hljs-keyword\">as</span>\
          \ np\n</code></pre>\n<p>More info can be found in the <a rel=\"nofollow\"\
          \ href=\"https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-and-highlighting-code-blocks\"\
          >docs</a>.</p>\n<p>Pasting code helps the community in running code and\
          \ reproducing results! If you're able to modify the code snippet such that\
          \ it is reproducible (i.e. we can run the code with the queried data) we'll\
          \ be able to get to the bottom of this much more quickly! You could try\
          \ uploading the <code>.wav</code> file to the Hub as a dataset (<a href=\"\
          https://huggingface.co/docs/datasets/loading#inmemory-data\">https://huggingface.co/docs/datasets/loading#inmemory-data</a>):</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span>\
          \ datasets <span class=\"hljs-keyword\">import</span> Dataset\n\naudio_dict\
          \ = {<span class=\"hljs-string\">\"audio\"</span>: {<span class=\"hljs-string\"\
          >\"array\"</span>: audio, <span class=\"hljs-string\">\"sampling_rate\"\
          </span>: _}}\ndataset = Dataset.from_dict(audio_dict)\ndataset.push_to_hub(<span\
          \ class=\"hljs-string\">\"dummy_audio\"</span>)\n</code></pre>\n<p>Thanks!</p>\n"
        raw: "Hi @jonasislive! Have you verified that the sampling rate of the `.wav`\
          \ file matches the sampling rate of the Wav2Vec2 processor? If not, you\
          \ will need to resample the audio to 16kHz. \n\nFor reference, you can paste\
          \ fenced code blocks by placing triple backticks ``` before and after the\
          \ code. As an example:\n```python\nimport numpy as np\n```\nMore info can\
          \ be found in the [docs](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-and-highlighting-code-blocks).\n\
          \nPasting code helps the community in running code and reproducing results!\
          \ If you're able to modify the code snippet such that it is reproducible\
          \ (i.e. we can run the code with the queried data) we'll be able to get\
          \ to the bottom of this much more quickly! You could try uploading the `.wav`\
          \ file to the Hub as a dataset (https://huggingface.co/docs/datasets/loading#inmemory-data):\n\
          ```python\nfrom datasets import Dataset\n\naudio_dict = {\"audio\": {\"\
          array\": audio, \"sampling_rate\": _}}\ndataset = Dataset.from_dict(audio_dict)\n\
          dataset.push_to_hub(\"dummy_audio\")\n```\n\nThanks!"
        updatedAt: '2022-06-29T10:25:23.076Z'
      numEdits: 2
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Hemanth-thunder
    id: 62bae34168bc5c8274795006
    type: comment
  author: sanchit-gandhi
  content: "Hi @jonasislive! Have you verified that the sampling rate of the `.wav`\
    \ file matches the sampling rate of the Wav2Vec2 processor? If not, you will need\
    \ to resample the audio to 16kHz. \n\nFor reference, you can paste fenced code\
    \ blocks by placing triple backticks ``` before and after the code. As an example:\n\
    ```python\nimport numpy as np\n```\nMore info can be found in the [docs](https://docs.github.com/en/get-started/writing-on-github/working-with-advanced-formatting/creating-and-highlighting-code-blocks).\n\
    \nPasting code helps the community in running code and reproducing results! If\
    \ you're able to modify the code snippet such that it is reproducible (i.e. we\
    \ can run the code with the queried data) we'll be able to get to the bottom of\
    \ this much more quickly! You could try uploading the `.wav` file to the Hub as\
    \ a dataset (https://huggingface.co/docs/datasets/loading#inmemory-data):\n```python\n\
    from datasets import Dataset\n\naudio_dict = {\"audio\": {\"array\": audio, \"\
    sampling_rate\": _}}\ndataset = Dataset.from_dict(audio_dict)\ndataset.push_to_hub(\"\
    dummy_audio\")\n```\n\nThanks!"
  created_at: 2022-06-28 10:17:21+00:00
  edited: true
  hidden: false
  id: 62bae34168bc5c8274795006
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: facebook/wav2vec2-base-960h
repo_type: model
status: open
target_branch: null
title: model performs poorly on local machine
