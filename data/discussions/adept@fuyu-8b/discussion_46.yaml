!!python/object:huggingface_hub.community.DiscussionWithDetails
author: FantasticMrCat
conflicting_files: null
created_at: 2023-11-09 02:27:25+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7ba40579f20c23b5715f35956a20dfa.svg
      fullname: Henson Liga
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: FantasticMrCat
      type: user
    createdAt: '2023-11-09T02:27:25.000Z'
    data:
      edited: false
      editors:
      - FantasticMrCat
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.578899621963501
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7ba40579f20c23b5715f35956a20dfa.svg
          fullname: Henson Liga
          isHf: false
          isPro: false
          name: FantasticMrCat
          type: user
        html: "<p>I am currently geting the following bug. I beleave this is because\
          \ bitsandbytes only works on linux. is there a way i can run this on windows.\
          \ if so how and what is the code?</p>\n<pre><code>\n===================================BUG\
          \ REPORT===================================\nC:\\Users\\henso\\AppData\\\
          Local\\Programs\\Python\\Python310\\lib\\site-packages\\bitsandbytes\\cuda_setup\\\
          main.py:166: UserWarning: Welcome to bitsandbytes. For bug reports, please\
          \ run\n\npython -m bitsandbytes\n\n\n  warn(msg)\n================================================================================\n\
          The following directories listed in your path were found to be non-existent:\
          \ {WindowsPath('C')}\nC:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
          Python310\\lib\\site-packages\\bitsandbytes\\cuda_setup\\main.py:166: UserWarning:\
          \ C:\\Users\\henso\\anaconda3 did not contain ['libcudart.so', 'libcudart.so.11.0',\
          \ 'libcudart.so.12.0'] as expected! Searching further paths...\n  warn(msg)\n\
          The following directories listed in your path were found to be non-existent:\
          \ {WindowsPath('AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAABKa/Ud0p/kKIDk52UkSDsAQAAAACAAAAAAAQZgAAAAEAACAAAADgZx/y2yxMKW0LfnC5+pz0gZVDk3/ZhsOECiA1qk1faQAAAAAOgAAAAAIAACAAAABeotZcMR4+a/nMEepdn2C7xeSXoOj9Hz0xQf1b6e1DHmAAAAD6h3xlf63b0R6p1gcVpQCMJbjuq6q/oGxIWIYIwrX/4fDiyQaOWbIDbCcmJ3gAVquAC11TPpTgoGh0TcSjKY+Wd3n8bQH4/AxWCphTLA/ijV4S4Ylut0lBbfVd/jjbiSpAAAAALHQUFVJPs6SKGSpNXoq22eBBtQrz7zpi6Y+G9vpBXG4U0AFPOGVJk5CrJRKHZhFW5qMo6BaCHJqbapw63a79oQ==')}\n\
          CUDA_SETUP: WARNING! libcudart.so not found in any environmental path. Searching\
          \ in backup paths...\nThe following directories listed in your path were\
          \ found to be non-existent: {WindowsPath('/usr/local/cuda/lib64')}\nDEBUG:\
          \ Possible options found for libcudart.so: set()\nCUDA SETUP: PyTorch settings\
          \ found: CUDA_VERSION=118, Highest Compute Capability: 8.9.\nCUDA SETUP:\
          \ To manually override the PyTorch CUDA version please see:https://github.com/TimDettmers/bitsandbytes/blob/main/how_to_use_nonpytorch_cuda.md\n\
          CUDA SETUP: Loading binary C:\\Users\\henso\\AppData\\Local\\Programs\\\
          Python\\Python310\\lib\\site-packages\\bitsandbytes\\libbitsandbytes_cuda118.so...\n\
          argument of type 'WindowsPath' is not iterable\nCUDA SETUP: Problem: The\
          \ main issue seems to be that the main CUDA runtime library was not detected.\n\
          CUDA SETUP: Solution 1: To solve the issue the libcudart.so location needs\
          \ to be added to the LD_LIBRARY_PATH variable\nCUDA SETUP: Solution 1a):\
          \ Find the cuda runtime library via: find / -name libcudart.so 2&gt;/dev/null\n\
          CUDA SETUP: Solution 1b): Once the library is found add it to the LD_LIBRARY_PATH:\
          \ export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:FOUND_PATH_FROM_1a\nCUDA SETUP:\
          \ Solution 1c): For a permanent solution add the export from 1b into your\
          \ .bashrc file, located at ~/.bashrc\nCUDA SETUP: Solution 2: If no library\
          \ was found in step 1a) you need to install CUDA.\nCUDA SETUP: Solution\
          \ 2a): Download CUDA install script: wget https://github.com/TimDettmers/bitsandbytes/blob/main/cuda_install.sh\n\
          CUDA SETUP: Solution 2b): Install desired CUDA version to desired location.\
          \ The syntax is bash cuda_install.sh CUDA_VERSION PATH_TO_INSTALL_INTO.\n\
          CUDA SETUP: Solution 2b): For example, \"bash cuda_install.sh 113 ~/local/\"\
          \ will download CUDA 11.3 and install into the folder ~/local\nTraceback\
          \ (most recent call last):\n  File \"C:\\Users\\henso\\AppData\\Local\\\
          Programs\\Python\\Python310\\lib\\site-packages\\transformers\\utils\\import_utils.py\"\
          , line 1345, in _get_module\n    return importlib.import_module(\".\" +\
          \ module_name, self.__name__)\n  File \"C:\\Users\\henso\\AppData\\Local\\\
          Programs\\Python\\Python310\\lib\\importlib\\__init__.py\", line 126, in\
          \ import_module\n    return _bootstrap._gcd_import(name[level:], package,\
          \ level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1050, in\
          \ _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1027,\
          \ in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line\
          \ 1006, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\"\
          , line 688, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\"\
          , line 883, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\"\
          , line 241, in _call_with_frames_removed\n  File \"C:\\Users\\henso\\AppData\\\
          Local\\Programs\\Python\\Python310\\lib\\site-packages\\transformers\\integrations\\\
          bitsandbytes.py\", line 11, in &lt;module&gt;\n    import bitsandbytes as\
          \ bnb\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\__init__.py\", line 6, in &lt;module&gt;\n\
          \    from . import cuda_setup, utils, research\n  File \"C:\\Users\\henso\\\
          AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\bitsandbytes\\\
          research\\__init__.py\", line 1, in &lt;module&gt;\n    from . import nn\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\research\\nn\\__init__.py\", line 1, in\
          \ &lt;module&gt;\n    from .modules import LinearFP8Mixed, LinearFP8Global\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\research\\nn\\modules.py\", line 8, in\
          \ &lt;module&gt;\n    from bitsandbytes.optim import GlobalOptimManager\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\optim\\__init__.py\", line 6, in &lt;module&gt;\n\
          \    from bitsandbytes.cextension import COMPILED_WITH_CUDA\n  File \"C:\\\
          Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
          bitsandbytes\\cextension.py\", line 20, in &lt;module&gt;\n    raise RuntimeError('''\n\
          RuntimeError:\n        CUDA Setup failed despite GPU being available. Please\
          \ run the following command to get more information:\n\n        python -m\
          \ bitsandbytes\n\n        Inspect the output of the command and see if you\
          \ can locate CUDA libraries. You might need to add them\n        to your\
          \ LD_LIBRARY_PATH. If you suspect a bug, please take the information from\
          \ python -m bitsandbytes\n        and open an issue at: https://github.com/TimDettmers/bitsandbytes/issues\n\
          \nThe above exception was the direct cause of the following exception:\n\
          \nTraceback (most recent call last):\n  File \"c:\\AI\\AAA-AI-PROJECT\\\
          fuyu-8b-test\\fuyu-2\\fuyu-8b\\test.py\", line 16, in &lt;module&gt;\n \
          \   model = FuyuForCausalLM.from_pretrained(model_id, quantization_config=quantization_config,\
          \ device_map=\"cuda:0\", torch_dtype=torch.float16)\n  File \"C:\\Users\\\
          henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
          transformers\\modeling_utils.py\", line 3250, in from_pretrained\n    from\
          \ .integrations import get_keys_to_not_convert, replace_with_bnb_linear\n\
          \  File \"&lt;frozen importlib._bootstrap&gt;\", line 1075, in _handle_fromlist\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\transformers\\utils\\import_utils.py\", line 1335, in\
          \ __getattr__\n    module = self._get_module(self._class_to_module[name])\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\transformers\\utils\\import_utils.py\", line 1347, in\
          \ _get_module\n    raise RuntimeError(\nRuntimeError: Failed to import transformers.integrations.bitsandbytes\
          \ because of the following error (look up to see its traceback):\n\n   \
          \     CUDA Setup failed despite GPU being available. Please run the following\
          \ command to get more information:\n\n        python -m bitsandbytes\n\n\
          \        Inspect the output of the command and see if you can locate CUDA\
          \ libraries. You might need to add them\n        to your LD_LIBRARY_PATH.\
          \ If you suspect a bug, please take the information from python -m bitsandbytes\n\
          \        and open an issue at: https://github.com/TimDettmers/bitsandbytes/issues\n\
          </code></pre>\n"
        raw: "I am currently geting the following bug. I beleave this is because bitsandbytes\
          \ only works on linux. is there a way i can run this on windows. if so how\
          \ and what is the code?\r\n\r\n```\r\n\r\n===================================BUG\
          \ REPORT===================================\r\nC:\\Users\\henso\\AppData\\\
          Local\\Programs\\Python\\Python310\\lib\\site-packages\\bitsandbytes\\cuda_setup\\\
          main.py:166: UserWarning: Welcome to bitsandbytes. For bug reports, please\
          \ run\r\n\r\npython -m bitsandbytes\r\n\r\n\r\n  warn(msg)\r\n================================================================================\r\
          \nThe following directories listed in your path were found to be non-existent:\
          \ {WindowsPath('C')}\r\nC:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
          Python310\\lib\\site-packages\\bitsandbytes\\cuda_setup\\main.py:166: UserWarning:\
          \ C:\\Users\\henso\\anaconda3 did not contain ['libcudart.so', 'libcudart.so.11.0',\
          \ 'libcudart.so.12.0'] as expected! Searching further paths...\r\n  warn(msg)\r\
          \nThe following directories listed in your path were found to be non-existent:\
          \ {WindowsPath('AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAABKa/Ud0p/kKIDk52UkSDsAQAAAACAAAAAAAQZgAAAAEAACAAAADgZx/y2yxMKW0LfnC5+pz0gZVDk3/ZhsOECiA1qk1faQAAAAAOgAAAAAIAACAAAABeotZcMR4+a/nMEepdn2C7xeSXoOj9Hz0xQf1b6e1DHmAAAAD6h3xlf63b0R6p1gcVpQCMJbjuq6q/oGxIWIYIwrX/4fDiyQaOWbIDbCcmJ3gAVquAC11TPpTgoGh0TcSjKY+Wd3n8bQH4/AxWCphTLA/ijV4S4Ylut0lBbfVd/jjbiSpAAAAALHQUFVJPs6SKGSpNXoq22eBBtQrz7zpi6Y+G9vpBXG4U0AFPOGVJk5CrJRKHZhFW5qMo6BaCHJqbapw63a79oQ==')}\r\
          \nCUDA_SETUP: WARNING! libcudart.so not found in any environmental path.\
          \ Searching in backup paths...\r\nThe following directories listed in your\
          \ path were found to be non-existent: {WindowsPath('/usr/local/cuda/lib64')}\r\
          \nDEBUG: Possible options found for libcudart.so: set()\r\nCUDA SETUP: PyTorch\
          \ settings found: CUDA_VERSION=118, Highest Compute Capability: 8.9.\r\n\
          CUDA SETUP: To manually override the PyTorch CUDA version please see:https://github.com/TimDettmers/bitsandbytes/blob/main/how_to_use_nonpytorch_cuda.md\r\
          \nCUDA SETUP: Loading binary C:\\Users\\henso\\AppData\\Local\\Programs\\\
          Python\\Python310\\lib\\site-packages\\bitsandbytes\\libbitsandbytes_cuda118.so...\r\
          \nargument of type 'WindowsPath' is not iterable\r\nCUDA SETUP: Problem:\
          \ The main issue seems to be that the main CUDA runtime library was not\
          \ detected.\r\nCUDA SETUP: Solution 1: To solve the issue the libcudart.so\
          \ location needs to be added to the LD_LIBRARY_PATH variable\r\nCUDA SETUP:\
          \ Solution 1a): Find the cuda runtime library via: find / -name libcudart.so\
          \ 2>/dev/null\r\nCUDA SETUP: Solution 1b): Once the library is found add\
          \ it to the LD_LIBRARY_PATH: export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:FOUND_PATH_FROM_1a\r\
          \nCUDA SETUP: Solution 1c): For a permanent solution add the export from\
          \ 1b into your .bashrc file, located at ~/.bashrc\r\nCUDA SETUP: Solution\
          \ 2: If no library was found in step 1a) you need to install CUDA.\r\nCUDA\
          \ SETUP: Solution 2a): Download CUDA install script: wget https://github.com/TimDettmers/bitsandbytes/blob/main/cuda_install.sh\r\
          \nCUDA SETUP: Solution 2b): Install desired CUDA version to desired location.\
          \ The syntax is bash cuda_install.sh CUDA_VERSION PATH_TO_INSTALL_INTO.\r\
          \nCUDA SETUP: Solution 2b): For example, \"bash cuda_install.sh 113 ~/local/\"\
          \ will download CUDA 11.3 and install into the folder ~/local\r\nTraceback\
          \ (most recent call last):\r\n  File \"C:\\Users\\henso\\AppData\\Local\\\
          Programs\\Python\\Python310\\lib\\site-packages\\transformers\\utils\\import_utils.py\"\
          , line 1345, in _get_module\r\n    return importlib.import_module(\".\"\
          \ + module_name, self.__name__)\r\n  File \"C:\\Users\\henso\\AppData\\\
          Local\\Programs\\Python\\Python310\\lib\\importlib\\__init__.py\", line\
          \ 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:],\
          \ package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050,\
          \ in _gcd_import\r\n  File \"<frozen importlib._bootstrap>\", line 1027,\
          \ in _find_and_load\r\n  File \"<frozen importlib._bootstrap>\", line 1006,\
          \ in _find_and_load_unlocked\r\n  File \"<frozen importlib._bootstrap>\"\
          , line 688, in _load_unlocked\r\n  File \"<frozen importlib._bootstrap_external>\"\
          , line 883, in exec_module\r\n  File \"<frozen importlib._bootstrap>\",\
          \ line 241, in _call_with_frames_removed\r\n  File \"C:\\Users\\henso\\\
          AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\transformers\\\
          integrations\\bitsandbytes.py\", line 11, in <module>\r\n    import bitsandbytes\
          \ as bnb\r\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
          Python310\\lib\\site-packages\\bitsandbytes\\__init__.py\", line 6, in <module>\r\
          \n    from . import cuda_setup, utils, research\r\n  File \"C:\\Users\\\
          henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
          bitsandbytes\\research\\__init__.py\", line 1, in <module>\r\n    from .\
          \ import nn\r\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
          Python310\\lib\\site-packages\\bitsandbytes\\research\\nn\\__init__.py\"\
          , line 1, in <module>\r\n    from .modules import LinearFP8Mixed, LinearFP8Global\r\
          \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\research\\nn\\modules.py\", line 8, in\
          \ <module>\r\n    from bitsandbytes.optim import GlobalOptimManager\r\n\
          \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\bitsandbytes\\optim\\__init__.py\", line 6, in <module>\r\
          \n    from bitsandbytes.cextension import COMPILED_WITH_CUDA\r\n  File \"\
          C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
          bitsandbytes\\cextension.py\", line 20, in <module>\r\n    raise RuntimeError('''\r\
          \nRuntimeError:\r\n        CUDA Setup failed despite GPU being available.\
          \ Please run the following command to get more information:\r\n\r\n    \
          \    python -m bitsandbytes\r\n\r\n        Inspect the output of the command\
          \ and see if you can locate CUDA libraries. You might need to add them\r\
          \n        to your LD_LIBRARY_PATH. If you suspect a bug, please take the\
          \ information from python -m bitsandbytes\r\n        and open an issue at:\
          \ https://github.com/TimDettmers/bitsandbytes/issues\r\n\r\nThe above exception\
          \ was the direct cause of the following exception:\r\n\r\nTraceback (most\
          \ recent call last):\r\n  File \"c:\\AI\\AAA-AI-PROJECT\\fuyu-8b-test\\\
          fuyu-2\\fuyu-8b\\test.py\", line 16, in <module>\r\n    model = FuyuForCausalLM.from_pretrained(model_id,\
          \ quantization_config=quantization_config, device_map=\"cuda:0\", torch_dtype=torch.float16)\r\
          \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\transformers\\modeling_utils.py\", line 3250, in from_pretrained\r\
          \n    from .integrations import get_keys_to_not_convert, replace_with_bnb_linear\r\
          \n  File \"<frozen importlib._bootstrap>\", line 1075, in _handle_fromlist\r\
          \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\transformers\\utils\\import_utils.py\", line 1335, in\
          \ __getattr__\r\n    module = self._get_module(self._class_to_module[name])\r\
          \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
          lib\\site-packages\\transformers\\utils\\import_utils.py\", line 1347, in\
          \ _get_module\r\n    raise RuntimeError(\r\nRuntimeError: Failed to import\
          \ transformers.integrations.bitsandbytes because of the following error\
          \ (look up to see its traceback):\r\n\r\n        CUDA Setup failed despite\
          \ GPU being available. Please run the following command to get more information:\r\
          \n\r\n        python -m bitsandbytes\r\n\r\n        Inspect the output of\
          \ the command and see if you can locate CUDA libraries. You might need to\
          \ add them\r\n        to your LD_LIBRARY_PATH. If you suspect a bug, please\
          \ take the information from python -m bitsandbytes\r\n        and open an\
          \ issue at: https://github.com/TimDettmers/bitsandbytes/issues\r\n```"
        updatedAt: '2023-11-09T02:27:25.325Z'
      numEdits: 0
      reactions: []
    id: 654c438d7824e2bb58e7b209
    type: comment
  author: FantasticMrCat
  content: "I am currently geting the following bug. I beleave this is because bitsandbytes\
    \ only works on linux. is there a way i can run this on windows. if so how and\
    \ what is the code?\r\n\r\n```\r\n\r\n===================================BUG REPORT===================================\r\
    \nC:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
    bitsandbytes\\cuda_setup\\main.py:166: UserWarning: Welcome to bitsandbytes. For\
    \ bug reports, please run\r\n\r\npython -m bitsandbytes\r\n\r\n\r\n  warn(msg)\r\
    \n================================================================================\r\
    \nThe following directories listed in your path were found to be non-existent:\
    \ {WindowsPath('C')}\r\nC:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
    lib\\site-packages\\bitsandbytes\\cuda_setup\\main.py:166: UserWarning: C:\\Users\\\
    henso\\anaconda3 did not contain ['libcudart.so', 'libcudart.so.11.0', 'libcudart.so.12.0']\
    \ as expected! Searching further paths...\r\n  warn(msg)\r\nThe following directories\
    \ listed in your path were found to be non-existent: {WindowsPath('AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAABKa/Ud0p/kKIDk52UkSDsAQAAAACAAAAAAAQZgAAAAEAACAAAADgZx/y2yxMKW0LfnC5+pz0gZVDk3/ZhsOECiA1qk1faQAAAAAOgAAAAAIAACAAAABeotZcMR4+a/nMEepdn2C7xeSXoOj9Hz0xQf1b6e1DHmAAAAD6h3xlf63b0R6p1gcVpQCMJbjuq6q/oGxIWIYIwrX/4fDiyQaOWbIDbCcmJ3gAVquAC11TPpTgoGh0TcSjKY+Wd3n8bQH4/AxWCphTLA/ijV4S4Ylut0lBbfVd/jjbiSpAAAAALHQUFVJPs6SKGSpNXoq22eBBtQrz7zpi6Y+G9vpBXG4U0AFPOGVJk5CrJRKHZhFW5qMo6BaCHJqbapw63a79oQ==')}\r\
    \nCUDA_SETUP: WARNING! libcudart.so not found in any environmental path. Searching\
    \ in backup paths...\r\nThe following directories listed in your path were found\
    \ to be non-existent: {WindowsPath('/usr/local/cuda/lib64')}\r\nDEBUG: Possible\
    \ options found for libcudart.so: set()\r\nCUDA SETUP: PyTorch settings found:\
    \ CUDA_VERSION=118, Highest Compute Capability: 8.9.\r\nCUDA SETUP: To manually\
    \ override the PyTorch CUDA version please see:https://github.com/TimDettmers/bitsandbytes/blob/main/how_to_use_nonpytorch_cuda.md\r\
    \nCUDA SETUP: Loading binary C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
    Python310\\lib\\site-packages\\bitsandbytes\\libbitsandbytes_cuda118.so...\r\n\
    argument of type 'WindowsPath' is not iterable\r\nCUDA SETUP: Problem: The main\
    \ issue seems to be that the main CUDA runtime library was not detected.\r\nCUDA\
    \ SETUP: Solution 1: To solve the issue the libcudart.so location needs to be\
    \ added to the LD_LIBRARY_PATH variable\r\nCUDA SETUP: Solution 1a): Find the\
    \ cuda runtime library via: find / -name libcudart.so 2>/dev/null\r\nCUDA SETUP:\
    \ Solution 1b): Once the library is found add it to the LD_LIBRARY_PATH: export\
    \ LD_LIBRARY_PATH=$LD_LIBRARY_PATH:FOUND_PATH_FROM_1a\r\nCUDA SETUP: Solution\
    \ 1c): For a permanent solution add the export from 1b into your .bashrc file,\
    \ located at ~/.bashrc\r\nCUDA SETUP: Solution 2: If no library was found in step\
    \ 1a) you need to install CUDA.\r\nCUDA SETUP: Solution 2a): Download CUDA install\
    \ script: wget https://github.com/TimDettmers/bitsandbytes/blob/main/cuda_install.sh\r\
    \nCUDA SETUP: Solution 2b): Install desired CUDA version to desired location.\
    \ The syntax is bash cuda_install.sh CUDA_VERSION PATH_TO_INSTALL_INTO.\r\nCUDA\
    \ SETUP: Solution 2b): For example, \"bash cuda_install.sh 113 ~/local/\" will\
    \ download CUDA 11.3 and install into the folder ~/local\r\nTraceback (most recent\
    \ call last):\r\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\\
    Python310\\lib\\site-packages\\transformers\\utils\\import_utils.py\", line 1345,\
    \ in _get_module\r\n    return importlib.import_module(\".\" + module_name, self.__name__)\r\
    \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\\
    importlib\\__init__.py\", line 126, in import_module\r\n    return _bootstrap._gcd_import(name[level:],\
    \ package, level)\r\n  File \"<frozen importlib._bootstrap>\", line 1050, in _gcd_import\r\
    \n  File \"<frozen importlib._bootstrap>\", line 1027, in _find_and_load\r\n \
    \ File \"<frozen importlib._bootstrap>\", line 1006, in _find_and_load_unlocked\r\
    \n  File \"<frozen importlib._bootstrap>\", line 688, in _load_unlocked\r\n  File\
    \ \"<frozen importlib._bootstrap_external>\", line 883, in exec_module\r\n  File\
    \ \"<frozen importlib._bootstrap>\", line 241, in _call_with_frames_removed\r\n\
    \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\\
    site-packages\\transformers\\integrations\\bitsandbytes.py\", line 11, in <module>\r\
    \n    import bitsandbytes as bnb\r\n  File \"C:\\Users\\henso\\AppData\\Local\\\
    Programs\\Python\\Python310\\lib\\site-packages\\bitsandbytes\\__init__.py\",\
    \ line 6, in <module>\r\n    from . import cuda_setup, utils, research\r\n  File\
    \ \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
    bitsandbytes\\research\\__init__.py\", line 1, in <module>\r\n    from . import\
    \ nn\r\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\\
    lib\\site-packages\\bitsandbytes\\research\\nn\\__init__.py\", line 1, in <module>\r\
    \n    from .modules import LinearFP8Mixed, LinearFP8Global\r\n  File \"C:\\Users\\\
    henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\bitsandbytes\\\
    research\\nn\\modules.py\", line 8, in <module>\r\n    from bitsandbytes.optim\
    \ import GlobalOptimManager\r\n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\\
    Python\\Python310\\lib\\site-packages\\bitsandbytes\\optim\\__init__.py\", line\
    \ 6, in <module>\r\n    from bitsandbytes.cextension import COMPILED_WITH_CUDA\r\
    \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\\
    site-packages\\bitsandbytes\\cextension.py\", line 20, in <module>\r\n    raise\
    \ RuntimeError('''\r\nRuntimeError:\r\n        CUDA Setup failed despite GPU being\
    \ available. Please run the following command to get more information:\r\n\r\n\
    \        python -m bitsandbytes\r\n\r\n        Inspect the output of the command\
    \ and see if you can locate CUDA libraries. You might need to add them\r\n   \
    \     to your LD_LIBRARY_PATH. If you suspect a bug, please take the information\
    \ from python -m bitsandbytes\r\n        and open an issue at: https://github.com/TimDettmers/bitsandbytes/issues\r\
    \n\r\nThe above exception was the direct cause of the following exception:\r\n\
    \r\nTraceback (most recent call last):\r\n  File \"c:\\AI\\AAA-AI-PROJECT\\fuyu-8b-test\\\
    fuyu-2\\fuyu-8b\\test.py\", line 16, in <module>\r\n    model = FuyuForCausalLM.from_pretrained(model_id,\
    \ quantization_config=quantization_config, device_map=\"cuda:0\", torch_dtype=torch.float16)\r\
    \n  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\\
    site-packages\\transformers\\modeling_utils.py\", line 3250, in from_pretrained\r\
    \n    from .integrations import get_keys_to_not_convert, replace_with_bnb_linear\r\
    \n  File \"<frozen importlib._bootstrap>\", line 1075, in _handle_fromlist\r\n\
    \  File \"C:\\Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\\
    site-packages\\transformers\\utils\\import_utils.py\", line 1335, in __getattr__\r\
    \n    module = self._get_module(self._class_to_module[name])\r\n  File \"C:\\\
    Users\\henso\\AppData\\Local\\Programs\\Python\\Python310\\lib\\site-packages\\\
    transformers\\utils\\import_utils.py\", line 1347, in _get_module\r\n    raise\
    \ RuntimeError(\r\nRuntimeError: Failed to import transformers.integrations.bitsandbytes\
    \ because of the following error (look up to see its traceback):\r\n\r\n     \
    \   CUDA Setup failed despite GPU being available. Please run the following command\
    \ to get more information:\r\n\r\n        python -m bitsandbytes\r\n\r\n     \
    \   Inspect the output of the command and see if you can locate CUDA libraries.\
    \ You might need to add them\r\n        to your LD_LIBRARY_PATH. If you suspect\
    \ a bug, please take the information from python -m bitsandbytes\r\n        and\
    \ open an issue at: https://github.com/TimDettmers/bitsandbytes/issues\r\n```"
  created_at: 2023-11-09 02:27:25+00:00
  edited: false
  hidden: false
  id: 654c438d7824e2bb58e7b209
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 46
repo_id: adept/fuyu-8b
repo_type: model
status: open
target_branch: null
title: issue with quantization on windows
