!!python/object:huggingface_hub.community.DiscussionWithDetails
author: RaviNaik
conflicting_files: null
created_at: 2023-10-18 17:10:18+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
      fullname: Ravi Naik
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: RaviNaik
      type: user
    createdAt: '2023-10-18T18:10:18.000Z'
    data:
      edited: false
      editors:
      - RaviNaik
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.828867495059967
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
          fullname: Ravi Naik
          isHf: false
          isPro: false
          name: RaviNaik
          type: user
        html: '<p>Hi, is there any way to use AWQ quantized models with transformers
          pipeline? Getting this error when tried to use the AWQ model with pipeline.<br><code>AttributeError:
          ''MistralAWQForCausalLM'' object has no attribute ''config''</code></p>

          <p>Thanks</p>

          '
        raw: "Hi, is there any way to use AWQ quantized models with transformers pipeline?\
          \ Getting this error when tried to use the AWQ model with pipeline.\r\n\
          `AttributeError: 'MistralAWQForCausalLM' object has no attribute 'config'`\r\
          \n\r\nThanks"
        updatedAt: '2023-10-18T18:10:18.940Z'
      numEdits: 0
      reactions: []
    id: 65301f8aa9390a5ddf7dd7c4
    type: comment
  author: RaviNaik
  content: "Hi, is there any way to use AWQ quantized models with transformers pipeline?\
    \ Getting this error when tried to use the AWQ model with pipeline.\r\n`AttributeError:\
    \ 'MistralAWQForCausalLM' object has no attribute 'config'`\r\n\r\nThanks"
  created_at: 2023-10-18 17:10:18+00:00
  edited: false
  hidden: false
  id: 65301f8aa9390a5ddf7dd7c4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1265c7243e5790b87b57680cdf161459.svg
      fullname: The One With No Name
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Lord-Goku
      type: user
    createdAt: '2023-10-21T03:10:02.000Z'
    data:
      edited: false
      editors:
      - Lord-Goku
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9742028117179871
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1265c7243e5790b87b57680cdf161459.svg
          fullname: The One With No Name
          isHf: false
          isPro: false
          name: Lord-Goku
          type: user
        html: '<p>I am having the same problem</p>

          '
        raw: I am having the same problem
        updatedAt: '2023-10-21T03:10:02.706Z'
      numEdits: 0
      reactions: []
    id: 6533410a091793204075b01d
    type: comment
  author: Lord-Goku
  content: I am having the same problem
  created_at: 2023-10-21 02:10:02+00:00
  edited: false
  hidden: false
  id: 6533410a091793204075b01d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
      fullname: Ravi Naik
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: RaviNaik
      type: user
    createdAt: '2023-10-28T07:43:58.000Z'
    data:
      edited: false
      editors:
      - RaviNaik
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.46041786670684814
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
          fullname: Ravi Naik
          isHf: false
          isPro: false
          name: RaviNaik
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Lord-Goku&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Lord-Goku\">@<span class=\"\
          underline\">Lord-Goku</span></a></span>\n\n\t</span></span>  Please use\
          \ <code>model.model</code> instead of just <code>model</code> for model\
          \ argument of the pipeline method.<br>Ex:</p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-keyword\">from</span> transformers <span class=\"hljs-keyword\"\
          >import</span> pipeline\n\npipe = pipeline(\n    <span class=\"hljs-string\"\
          >\"text-generation\"</span>,\n    model=model.model,\n    tokenizer=tokenizer,\n\
          \    max_new_tokens=<span class=\"hljs-number\">512</span>,\n    do_sample=<span\
          \ class=\"hljs-literal\">True</span>,\n    temperature=<span class=\"hljs-number\"\
          >0.7</span>,\n    top_p=<span class=\"hljs-number\">0.95</span>,\n    top_k=<span\
          \ class=\"hljs-number\">40</span>,\n    repetition_penalty=<span class=\"\
          hljs-number\">1.1</span>,\n)\n\n<span class=\"hljs-built_in\">print</span>(pipe(prompt)[<span\
          \ class=\"hljs-number\">0</span>][<span class=\"hljs-string\">\"generated_text\"\
          </span>])\n</code></pre>\n"
        raw: "@Lord-Goku  Please use `model.model` instead of just `model` for model\
          \ argument of the pipeline method.\nEx:\n```python\nfrom transformers import\
          \ pipeline\n\npipe = pipeline(\n    \"text-generation\",\n    model=model.model,\n\
          \    tokenizer=tokenizer,\n    max_new_tokens=512,\n    do_sample=True,\n\
          \    temperature=0.7,\n    top_p=0.95,\n    top_k=40,\n    repetition_penalty=1.1,\n\
          )\n\nprint(pipe(prompt)[0][\"generated_text\"])\n```"
        updatedAt: '2023-10-28T07:43:58.933Z'
      numEdits: 0
      reactions: []
    id: 653cbbbe78214ec5d5b3c445
    type: comment
  author: RaviNaik
  content: "@Lord-Goku  Please use `model.model` instead of just `model` for model\
    \ argument of the pipeline method.\nEx:\n```python\nfrom transformers import pipeline\n\
    \npipe = pipeline(\n    \"text-generation\",\n    model=model.model,\n    tokenizer=tokenizer,\n\
    \    max_new_tokens=512,\n    do_sample=True,\n    temperature=0.7,\n    top_p=0.95,\n\
    \    top_k=40,\n    repetition_penalty=1.1,\n)\n\nprint(pipe(prompt)[0][\"generated_text\"\
    ])\n```"
  created_at: 2023-10-28 06:43:58+00:00
  edited: false
  hidden: false
  id: 653cbbbe78214ec5d5b3c445
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-10-28T07:46:54.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.950350821018219
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: "<p>That works? Nice, thanks <span data-props=\"{&quot;user&quot;:&quot;RaviNaik&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/RaviNaik\"\
          >@<span class=\"underline\">RaviNaik</span></a></span>\n\n\t</span></span>\
          \ !</p>\n<p>Note that very soon there will be native support for AWQ in\
          \ Transformers, and then <code>pipeline</code> should work as normal without\
          \ special steps needed.</p>\n"
        raw: 'That works? Nice, thanks @RaviNaik !


          Note that very soon there will be native support for AWQ in Transformers,
          and then `pipeline` should work as normal without special steps needed.'
        updatedAt: '2023-10-28T07:46:54.258Z'
      numEdits: 0
      reactions: []
    id: 653cbc6e06a7bb4b1d5d3bed
    type: comment
  author: TheBloke
  content: 'That works? Nice, thanks @RaviNaik !


    Note that very soon there will be native support for AWQ in Transformers, and
    then `pipeline` should work as normal without special steps needed.'
  created_at: 2023-10-28 06:46:54+00:00
  edited: false
  hidden: false
  id: 653cbc6e06a7bb4b1d5d3bed
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
      fullname: Ravi Naik
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: RaviNaik
      type: user
    createdAt: '2023-10-28T08:45:51.000Z'
    data:
      edited: false
      editors:
      - RaviNaik
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8558141589164734
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6405eb79d6843690270bae40/gGrixNBsesMs13qen7GwJ.jpeg?w=200&h=200&f=face
          fullname: Ravi Naik
          isHf: false
          isPro: false
          name: RaviNaik
          type: user
        html: "<p>Yeah it works <span data-props=\"{&quot;user&quot;:&quot;TheBloke&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/TheBloke\"\
          >@<span class=\"underline\">TheBloke</span></a></span>\n\n\t</span></span>\
          \ , tested it out with <code>TheBloke/Mistral-7B-Instruct-v0.1-AWQ</code>.<br>One\
          \ more issue I noticed is that <code>AutoAWQForCausalLM.from_quantized</code>\
          \ by default loads the model into <code>cuda:0</code> or device0 and it\
          \ looks like there is no <code>device_map</code> kind of argument we can\
          \ pass to specify the device index. Hope these issues will be solved once\
          \ AWQ is natively supported in Transformers.</p>\n"
        raw: "Yeah it works @TheBloke , tested it out with `TheBloke/Mistral-7B-Instruct-v0.1-AWQ`.\
          \ \nOne more issue I noticed is that `AutoAWQForCausalLM.from_quantized`\
          \ by default loads the model into `cuda:0` or device0 and it looks like\
          \ there is no `device_map` kind of argument we can pass to specify the device\
          \ index. Hope these issues will be solved once AWQ is natively supported\
          \ in Transformers."
        updatedAt: '2023-10-28T08:45:51.788Z'
      numEdits: 0
      reactions: []
    id: 653cca3ffbe250285fdf8660
    type: comment
  author: RaviNaik
  content: "Yeah it works @TheBloke , tested it out with `TheBloke/Mistral-7B-Instruct-v0.1-AWQ`.\
    \ \nOne more issue I noticed is that `AutoAWQForCausalLM.from_quantized` by default\
    \ loads the model into `cuda:0` or device0 and it looks like there is no `device_map`\
    \ kind of argument we can pass to specify the device index. Hope these issues\
    \ will be solved once AWQ is natively supported in Transformers."
  created_at: 2023-10-28 07:45:51+00:00
  edited: false
  hidden: false
  id: 653cca3ffbe250285fdf8660
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: TheBloke/Mistral-7B-Instruct-v0.1-AWQ
repo_type: model
status: open
target_branch: null
title: AWQ models with transformer pipeline
