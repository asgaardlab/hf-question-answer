!!python/object:huggingface_hub.community.DiscussionWithDetails
author: KimiRegis
conflicting_files: null
created_at: 2024-01-22 11:57:27+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bd99630711bc8366d01d66502e9b36a5.svg
      fullname: Pengze Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: KimiRegis
      type: user
    createdAt: '2024-01-22T11:57:27.000Z'
    data:
      edited: false
      editors:
      - KimiRegis
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7581436634063721
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bd99630711bc8366d01d66502e9b36a5.svg
          fullname: Pengze Li
          isHf: false
          isPro: false
          name: KimiRegis
          type: user
        html: "<p>Hello,</p>\n<p>I recently tried running the code from your GitHub\
          \ repository PowerPaint(<a rel=\"nofollow\" href=\"https://github.com/zhuang2002/PowerPaint\"\
          >https://github.com/zhuang2002/PowerPaint</a>), but I encountered an error\
          \ on line 38. The code snippet and error are as follows:</p>\n<pre><code\
          \ class=\"language-shell\">\u201CRuntimeError                          \
          \    Traceback (most recent call last)\n&lt;ipython-input-4-7434151a2515&gt;\
          \ in &lt;cell line: 38&gt;()\n     36 from safetensors.torch import load_model\n\
          \     37 load_model(pipe.unet, \"./models/unet/unet.safetensors\")\n<span\
          \ class=\"hljs-meta prompt_\">---&gt; </span><span class=\"language-bash\"\
          >38 load_model(pipe.text_encoder, <span class=\"hljs-string\">\"./models/text_encoder/text_encoder.safetensors\"\
          </span>) <span class=\"hljs-comment\"># load_model(pipe.text_encoder, \"\
          ./models/unet/text_encoder.safetensors\")</span></span>\n     39 pipe =\
          \ pipe.to('cuda')\n     40 \n\n/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\
          \ in load_model(model, filename, strict)\n    214         if unexpected:\n\
          \    215             error += f\"\\n    Unexpected key(s) in state_dict:\
          \ {unexpected_keys}\"\n<span class=\"hljs-meta prompt_\">--&gt; </span><span\
          \ class=\"language-bash\">216         raise RuntimeError(error)</span>\n\
          \    217     return missing, unexpected\n    218 \n\nRuntimeError: Error(s)\
          \ in loading state_dict for CLIPTextModel:\n    Unexpected key(s) in state_dict:\
          \ \"text_model.embeddings.position_ids\"\u201D\n</code></pre>\n<p>It seems\
          \ that the original code on line 38 had a path issue, which I corrected.\
          \ However, after fixing the path, I still encountered the above Unexpected\
          \ key error.</p>\n<p>I'm really keen on trying out your work, and any help\
          \ or guidance you could provide to resolve this issue would be greatly appreciated.</p>\n\
          <p>Thank you!</p>\n"
        raw: "Hello,\r\n\r\nI recently tried running the code from your GitHub repository\
          \ PowerPaint(https://github.com/zhuang2002/PowerPaint), but I encountered\
          \ an error on line 38. The code snippet and error are as follows:\r\n```shell\r\
          \n\u201CRuntimeError                              Traceback (most recent\
          \ call last)\r\n<ipython-input-4-7434151a2515> in <cell line: 38>()\r\n\
          \     36 from safetensors.torch import load_model\r\n     37 load_model(pipe.unet,\
          \ \"./models/unet/unet.safetensors\")\r\n---> 38 load_model(pipe.text_encoder,\
          \ \"./models/text_encoder/text_encoder.safetensors\") # load_model(pipe.text_encoder,\
          \ \"./models/unet/text_encoder.safetensors\")\r\n     39 pipe = pipe.to('cuda')\r\
          \n     40 \r\n\r\n/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\
          \ in load_model(model, filename, strict)\r\n    214         if unexpected:\r\
          \n    215             error += f\"\\n    Unexpected key(s) in state_dict:\
          \ {unexpected_keys}\"\r\n--> 216         raise RuntimeError(error)\r\n \
          \   217     return missing, unexpected\r\n    218 \r\n\r\nRuntimeError:\
          \ Error(s) in loading state_dict for CLIPTextModel:\r\n    Unexpected key(s)\
          \ in state_dict: \"text_model.embeddings.position_ids\"\u201D\r\n```\r\n\
          It seems that the original code on line 38 had a path issue, which I corrected.\
          \ However, after fixing the path, I still encountered the above Unexpected\
          \ key error.\r\n\r\nI'm really keen on trying out your work, and any help\
          \ or guidance you could provide to resolve this issue would be greatly appreciated.\r\
          \n\r\nThank you!"
        updatedAt: '2024-01-22T11:57:27.859Z'
      numEdits: 0
      reactions: []
    id: 65ae58273db2280ecef02fc6
    type: comment
  author: KimiRegis
  content: "Hello,\r\n\r\nI recently tried running the code from your GitHub repository\
    \ PowerPaint(https://github.com/zhuang2002/PowerPaint), but I encountered an error\
    \ on line 38. The code snippet and error are as follows:\r\n```shell\r\n\u201C\
    RuntimeError                              Traceback (most recent call last)\r\n\
    <ipython-input-4-7434151a2515> in <cell line: 38>()\r\n     36 from safetensors.torch\
    \ import load_model\r\n     37 load_model(pipe.unet, \"./models/unet/unet.safetensors\"\
    )\r\n---> 38 load_model(pipe.text_encoder, \"./models/text_encoder/text_encoder.safetensors\"\
    ) # load_model(pipe.text_encoder, \"./models/unet/text_encoder.safetensors\")\r\
    \n     39 pipe = pipe.to('cuda')\r\n     40 \r\n\r\n/usr/local/lib/python3.10/dist-packages/safetensors/torch.py\
    \ in load_model(model, filename, strict)\r\n    214         if unexpected:\r\n\
    \    215             error += f\"\\n    Unexpected key(s) in state_dict: {unexpected_keys}\"\
    \r\n--> 216         raise RuntimeError(error)\r\n    217     return missing, unexpected\r\
    \n    218 \r\n\r\nRuntimeError: Error(s) in loading state_dict for CLIPTextModel:\r\
    \n    Unexpected key(s) in state_dict: \"text_model.embeddings.position_ids\"\u201D\
    \r\n```\r\nIt seems that the original code on line 38 had a path issue, which\
    \ I corrected. However, after fixing the path, I still encountered the above Unexpected\
    \ key error.\r\n\r\nI'm really keen on trying out your work, and any help or guidance\
    \ you could provide to resolve this issue would be greatly appreciated.\r\n\r\n\
    Thank you!"
  created_at: 2024-01-22 11:57:27+00:00
  edited: false
  hidden: false
  id: 65ae58273db2280ecef02fc6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/11e3c9c66d28490d6d09925f9aa47cd1.svg
      fullname: JunhaoZhuang
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: JunhaoZhuang
      type: user
    createdAt: '2024-01-22T13:20:33.000Z'
    data:
      edited: false
      editors:
      - JunhaoZhuang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9213244318962097
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/11e3c9c66d28490d6d09925f9aa47cd1.svg
          fullname: JunhaoZhuang
          isHf: false
          isPro: false
          name: JunhaoZhuang
          type: user
        html: '<p>Thank you for your interest in our repository! To address this issue,
          we recommend trying to install transformers version 4.28.0.</p>

          '
        raw: Thank you for your interest in our repository! To address this issue,
          we recommend trying to install transformers version 4.28.0.
        updatedAt: '2024-01-22T13:20:33.696Z'
      numEdits: 0
      reactions: []
    id: 65ae6ba11f418c7449c8910b
    type: comment
  author: JunhaoZhuang
  content: Thank you for your interest in our repository! To address this issue, we
    recommend trying to install transformers version 4.28.0.
  created_at: 2024-01-22 13:20:33+00:00
  edited: false
  hidden: false
  id: 65ae6ba11f418c7449c8910b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bd99630711bc8366d01d66502e9b36a5.svg
      fullname: Pengze Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: KimiRegis
      type: user
    createdAt: '2024-01-22T14:12:45.000Z'
    data:
      edited: false
      editors:
      - KimiRegis
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8621306419372559
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bd99630711bc8366d01d66502e9b36a5.svg
          fullname: Pengze Li
          isHf: false
          isPro: false
          name: KimiRegis
          type: user
        html: '<p>It works! Thank you for your prompt and helpful response.</p>

          '
        raw: It works! Thank you for your prompt and helpful response.
        updatedAt: '2024-01-22T14:12:45.378Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65ae77dd48481b399ad16852
    id: 65ae77dd48481b399ad16851
    type: comment
  author: KimiRegis
  content: It works! Thank you for your prompt and helpful response.
  created_at: 2024-01-22 14:12:45+00:00
  edited: false
  hidden: false
  id: 65ae77dd48481b399ad16851
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/bd99630711bc8366d01d66502e9b36a5.svg
      fullname: Pengze Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: KimiRegis
      type: user
    createdAt: '2024-01-22T14:12:45.000Z'
    data:
      status: closed
    id: 65ae77dd48481b399ad16852
    type: status-change
  author: KimiRegis
  created_at: 2024-01-22 14:12:45+00:00
  id: 65ae77dd48481b399ad16852
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: JunhaoZhuang/PowerPaint-v1
repo_type: model
status: closed
target_branch: null
title: Issue with Loading Model in PowerPaint Repository
