!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ArthurZ
conflicting_files:
- config.json
- generation_config.json
- model.safetensors
- pytorch_model.bin
created_at: 2023-10-09 19:25:27+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-10-09T20:25:27.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8110489845275879
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: '<p>Following the merge of <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/24310">a
          PR</a> in <code>transformers</code> it appeared that this model was not
          properly converted. This PR will fix the inference and was tested using
          the following script:</p>

          <pre><code class="language-python">

          <span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-keyword">from</span>
          transformers <span class="hljs-keyword">import</span> MarianModel, MarianMTModel

          <span class="hljs-meta">&gt;&gt;&gt; </span>tokenizer = AutoTokenizer.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

          <span class="hljs-meta">&gt;&gt;&gt; </span>inputs = tokenizer(Hey how are
          you?, return_tensors=pt, padding=<span class="hljs-literal">True</span>)

          <span class="hljs-meta">&gt;&gt;&gt; </span>model = MarianMTModel.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

          <span class="hljs-meta">&gt;&gt;&gt; </span><span class="hljs-built_in">print</span>(tokenizer.batch_decode(model.generate(**inputs)))

          [<span class="hljs-string">''&lt;pad&gt; Hey he he he he he he he he he
          he he he? he he he he he? he he he? he he? he he he?? he he?? he he?? he
          he?? he he?? he he?? he he?? he he?? he he?? Hey??? he he??? he he?? he
          he?? Hey??? he he??? he????? Hey Hey Hey Hey he??? Hey Hey he he? Hey Hey
          Hey Hey Hey Hey?????? Hey Hey Hey Hey Hey Hey Hey Hey?? Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey?? Hey Hey Hey Hey? Hey? Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey? Hey Hey Hey Hey Hey Hey? Hey? Hey Hey Hey Hey Hey? Hey Hey Hey?
          Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey? Hey? Hey Hey Hey Hey Hey?
          Hey Hey Hey Hey Hey Hey? Hey? Hey? Hey? Hey Hey Hey? Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey? Hey? Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey?
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey?
          Hey Hey Hey Hey Hey? Hey Hey? Hey Hey Hey? Hey Hey Hey? Hey? Hey? Hey Hey
          Hey Hey? Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey? Hey? Hey? Hey? Hey?
          Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey Hey? Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey&lt;/s&gt;''</span>]

          </code></pre>

          '
        raw: 'Following the merge of [a PR](https://github.com/huggingface/transformers/pull/24310)
          in `transformers` it appeared that this model was not properly converted.
          This PR will fix the inference and was tested using the following script:

          ```python


          >>> from transformers import MarianModel, MarianMTModel

          >>> tokenizer = AutoTokenizer.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

          >>> inputs = tokenizer(Hey how are you?, return_tensors=pt, padding=True)

          >>> model = MarianMTModel.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

          >>> print(tokenizer.batch_decode(model.generate(**inputs)))

          [''<pad> Hey he he he he he he he he he he he he? he he he he he? he he
          he? he he? he he he?? he he?? he he?? he he?? he he?? he he?? he he?? he
          he?? he he?? Hey??? he he??? he he?? he he?? Hey??? he he??? he????? Hey
          Hey Hey Hey he??? Hey Hey he he? Hey Hey Hey Hey Hey Hey?????? Hey Hey Hey
          Hey Hey Hey Hey Hey?? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey?? Hey
          Hey Hey Hey? Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey?
          Hey Hey Hey Hey Hey? Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey
          Hey Hey? Hey? Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey? Hey? Hey?
          Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey? Hey? Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey? Hey Hey? Hey Hey Hey?
          Hey Hey Hey? Hey? Hey? Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey Hey
          Hey Hey Hey? Hey? Hey? Hey? Hey? Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey?
          Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
          Hey Hey Hey Hey</s>'']

          ```'
        updatedAt: '2023-10-09T20:25:27.310Z'
      numEdits: 0
      reactions: []
    id: 652461b7c9607bdffb0d6d1e
    type: comment
  author: ArthurZ
  content: 'Following the merge of [a PR](https://github.com/huggingface/transformers/pull/24310)
    in `transformers` it appeared that this model was not properly converted. This
    PR will fix the inference and was tested using the following script:

    ```python


    >>> from transformers import MarianModel, MarianMTModel

    >>> tokenizer = AutoTokenizer.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

    >>> inputs = tokenizer(Hey how are you?, return_tensors=pt, padding=True)

    >>> model = MarianMTModel.from_pretrained(Helsinki-NLP/opus-mt-tc-big-gmw-gmw)

    >>> print(tokenizer.batch_decode(model.generate(**inputs)))

    [''<pad> Hey he he he he he he he he he he he he? he he he he he? he he he? he
    he? he he he?? he he?? he he?? he he?? he he?? he he?? he he?? he he?? he he??
    Hey??? he he??? he he?? he he?? Hey??? he he??? he????? Hey Hey Hey Hey he???
    Hey Hey he he? Hey Hey Hey Hey Hey Hey?????? Hey Hey Hey Hey Hey Hey Hey Hey??
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey?? Hey Hey Hey Hey? Hey? Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey? Hey Hey Hey Hey Hey Hey? Hey? Hey Hey Hey Hey Hey? Hey Hey Hey? Hey Hey
    Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey? Hey Hey Hey Hey Hey Hey Hey? Hey? Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey
    Hey? Hey? Hey? Hey? Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey? Hey? Hey? Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey? Hey Hey Hey Hey Hey? Hey Hey? Hey Hey Hey? Hey Hey Hey? Hey?
    Hey? Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey Hey Hey Hey Hey? Hey? Hey?
    Hey? Hey? Hey Hey Hey Hey? Hey Hey Hey Hey Hey Hey? Hey Hey? Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey Hey
    Hey Hey Hey Hey Hey Hey Hey</s>'']

    ```'
  created_at: 2023-10-09 19:25:27+00:00
  edited: false
  hidden: false
  id: 652461b7c9607bdffb0d6d1e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-10-09T20:25:28.000Z'
    data:
      oid: 964d80e7b9f192b391014a467c9844e3c968939e
      parents:
      - cc83778b0b44cd87a88ae7f2ff5276e7a9834049
      subject: Update checkpoint for transformers >= 4.29
    id: 652461b80000000000000000
    type: commit
  author: ArthurZ
  created_at: 2023-10-09 19:25:28+00:00
  id: 652461b80000000000000000
  oid: 964d80e7b9f192b391014a467c9844e3c968939e
  summary: Update checkpoint for transformers >= 4.29
  type: commit
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-10-09T20:30:34.000Z'
    data:
      status: closed
    id: 652462ea15f84b14661fc6b5
    type: status-change
  author: ArthurZ
  created_at: 2023-10-09 19:30:34+00:00
  id: 652462ea15f84b14661fc6b5
  new_status: closed
  type: status-change
is_pull_request: true
merge_commit_oid: null
num: 3
repo_id: Helsinki-NLP/opus-mt-tc-big-gmw-gmw
repo_type: model
status: closed
target_branch: refs/heads/main
title: Update checkpoint for transformers >= 4.29
