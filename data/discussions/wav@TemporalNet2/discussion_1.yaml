!!python/object:huggingface_hub.community.DiscussionWithDetails
author: paul-stamets
conflicting_files: null
created_at: 2023-06-25 17:28:01+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/549850a235e01e937ef16f2535815dd5.svg
      fullname: Paul Stamets
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: paul-stamets
      type: user
    createdAt: '2023-06-25T18:28:01.000Z'
    data:
      edited: false
      editors:
      - paul-stamets
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3337755799293518
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/549850a235e01e937ef16f2535815dd5.svg
          fullname: Paul Stamets
          isHf: false
          isPro: false
          name: paul-stamets
          type: user
        html: "<p>Hi there!</p>\n<p>Thanks for making this, it looks super awesome!\
          \ Unfortunately, after following your instructions, it \"Diffuses\" successfully\
          \ but then gives the following error:</p>\n<p>Diffusing...: 100%|\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588| 88/88 [02:11&lt;00:00,  1.50s/frame]<br>Traceback (most\
          \ recent call last):<br>  File \"C:\\Users\\User\\Documents\\Programming\\\
          TemporalNet2-wav\\temporalvideo_hf.py\", line 125, in <br>    write_video(out_file,\
          \ output_video.mul(255), fps=info[\"video_fps\"])<br>  File \"C:\\Users\\\
          User\\miniconda3\\envs\\bskl_tn2wav\\lib\\site-packages\\torchvision\\io\\\
          video.py\", line 134, in write_video<br>    container.mux(packet)<br>  File\
          \ \"av\\container\\output.pyx\", line 203, in av.container.output.OutputContainer.mux<br>\
          \  File \"av\\container\\output.pyx\", line 209, in av.container.output.OutputContainer.mux_one<br>\
          \  File \"av\\container\\output.pyx\", line 164, in av.container.output.OutputContainer.start_encoding<br>\
          \  File \"av\\error.pyx\", line 336, in av.error.err_check<br>av.error.ValueError:\
          \ [Errno 22] Invalid argument</p>\n"
        raw: "Hi there!\r\n\r\nThanks for making this, it looks super awesome! Unfortunately,\
          \ after following your instructions, it \"Diffuses\" successfully but then\
          \ gives the following error:\r\n\r\nDiffusing...: 100%|\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588| 88/88 [02:11<00:00,  1.50s/frame]\r\nTraceback (most recent\
          \ call last):\r\n  File \"C:\\Users\\User\\Documents\\Programming\\TemporalNet2-wav\\\
          temporalvideo_hf.py\", line 125, in <module>\r\n    write_video(out_file,\
          \ output_video.mul(255), fps=info[\"video_fps\"])\r\n  File \"C:\\Users\\\
          User\\miniconda3\\envs\\bskl_tn2wav\\lib\\site-packages\\torchvision\\io\\\
          video.py\", line 134, in write_video\r\n    container.mux(packet)\r\n  File\
          \ \"av\\container\\output.pyx\", line 203, in av.container.output.OutputContainer.mux\r\
          \n  File \"av\\container\\output.pyx\", line 209, in av.container.output.OutputContainer.mux_one\r\
          \n  File \"av\\container\\output.pyx\", line 164, in av.container.output.OutputContainer.start_encoding\r\
          \n  File \"av\\error.pyx\", line 336, in av.error.err_check\r\nav.error.ValueError:\
          \ [Errno 22] Invalid argument\r\n\r\n"
        updatedAt: '2023-06-25T18:28:01.094Z'
      numEdits: 0
      reactions: []
    id: 6498873158945ac44bcd3e6a
    type: comment
  author: paul-stamets
  content: "Hi there!\r\n\r\nThanks for making this, it looks super awesome! Unfortunately,\
    \ after following your instructions, it \"Diffuses\" successfully but then gives\
    \ the following error:\r\n\r\nDiffusing...: 100%|\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 88/88 [02:11<00:00,  1.50s/frame]\r\
    \nTraceback (most recent call last):\r\n  File \"C:\\Users\\User\\Documents\\\
    Programming\\TemporalNet2-wav\\temporalvideo_hf.py\", line 125, in <module>\r\n\
    \    write_video(out_file, output_video.mul(255), fps=info[\"video_fps\"])\r\n\
    \  File \"C:\\Users\\User\\miniconda3\\envs\\bskl_tn2wav\\lib\\site-packages\\\
    torchvision\\io\\video.py\", line 134, in write_video\r\n    container.mux(packet)\r\
    \n  File \"av\\container\\output.pyx\", line 203, in av.container.output.OutputContainer.mux\r\
    \n  File \"av\\container\\output.pyx\", line 209, in av.container.output.OutputContainer.mux_one\r\
    \n  File \"av\\container\\output.pyx\", line 164, in av.container.output.OutputContainer.start_encoding\r\
    \n  File \"av\\error.pyx\", line 336, in av.error.err_check\r\nav.error.ValueError:\
    \ [Errno 22] Invalid argument\r\n\r\n"
  created_at: 2023-06-25 17:28:01+00:00
  edited: false
  hidden: false
  id: 6498873158945ac44bcd3e6a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/549850a235e01e937ef16f2535815dd5.svg
      fullname: Paul Stamets
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: paul-stamets
      type: user
    createdAt: '2023-06-25T19:05:31.000Z'
    data:
      edited: false
      editors:
      - paul-stamets
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7471315860748291
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/549850a235e01e937ef16f2535815dd5.svg
          fullname: Paul Stamets
          isHf: false
          isPro: false
          name: paul-stamets
          type: user
        html: "<p>I managed to get around this by manually outputting each frame as\
          \ a png file. Here is the code if anyone is interested (replacing lines\
          \ 127-128):</p>\n<pre><code>import torchvision.transforms as transforms\n\
          to_pil = transforms.ToPILImage()\nfor i in range(output_video.size(0)):\n\
          \    pil_image = to_pil(output_video[i, :, :, :].permute(2, 0, 1)) \n  \
          \  pil_image.save(\"output\" + str(i) + \".jpg\")\n</code></pre>\n"
        raw: "I managed to get around this by manually outputting each frame as a\
          \ png file. Here is the code if anyone is interested (replacing lines 127-128):\n\
          \n    import torchvision.transforms as transforms\n    to_pil = transforms.ToPILImage()\n\
          \    for i in range(output_video.size(0)):\n        pil_image = to_pil(output_video[i,\
          \ :, :, :].permute(2, 0, 1)) \n        pil_image.save(\"output\" + str(i)\
          \ + \".jpg\")"
        updatedAt: '2023-06-25T19:05:31.653Z'
      numEdits: 0
      reactions: []
    id: 64988ffbdc503810829aabec
    type: comment
  author: paul-stamets
  content: "I managed to get around this by manually outputting each frame as a png\
    \ file. Here is the code if anyone is interested (replacing lines 127-128):\n\n\
    \    import torchvision.transforms as transforms\n    to_pil = transforms.ToPILImage()\n\
    \    for i in range(output_video.size(0)):\n        pil_image = to_pil(output_video[i,\
    \ :, :, :].permute(2, 0, 1)) \n        pil_image.save(\"output\" + str(i) + \"\
    .jpg\")"
  created_at: 2023-06-25 18:05:31+00:00
  edited: false
  hidden: false
  id: 64988ffbdc503810829aabec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1627119235405-noauth.png?w=200&h=200&f=face
      fullname: Hans
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: wav
      type: user
    createdAt: '2023-07-06T13:53:54.000Z'
    data:
      edited: false
      editors:
      - wav
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9371076226234436
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1627119235405-noauth.png?w=200&h=200&f=face
          fullname: Hans
          isHf: false
          isPro: false
          name: wav
          type: user
        html: '<p>I''m not sure what could cause this issue with PyAV, but your solution
          is a good workaround.</p>

          <p>Maybe you could try updating torchvision and pyav? <code>pip install
          --upgrade av torchvision</code></p>

          '
        raw: 'I''m not sure what could cause this issue with PyAV, but your solution
          is a good workaround.


          Maybe you could try updating torchvision and pyav? `pip install --upgrade
          av torchvision`'
        updatedAt: '2023-07-06T13:53:54.879Z'
      numEdits: 0
      reactions: []
    id: 64a6c772d1c79514d29a79c7
    type: comment
  author: wav
  content: 'I''m not sure what could cause this issue with PyAV, but your solution
    is a good workaround.


    Maybe you could try updating torchvision and pyav? `pip install --upgrade av torchvision`'
  created_at: 2023-07-06 12:53:54+00:00
  edited: false
  hidden: false
  id: 64a6c772d1c79514d29a79c7
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: wav/TemporalNet2
repo_type: model
status: open
target_branch: null
title: PyAV output error
