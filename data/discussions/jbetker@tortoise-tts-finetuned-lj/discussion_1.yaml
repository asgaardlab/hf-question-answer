!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ti3x
conflicting_files: null
created_at: 2022-12-12 17:55:46+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
      fullname: Tim
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ti3x
      type: user
    createdAt: '2022-12-12T17:55:46.000Z'
    data:
      edited: false
      editors:
      - ti3x
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
          fullname: Tim
          isHf: false
          isPro: false
          name: ti3x
          type: user
        html: "<p>Error: </p>\n<pre><code>tortoise-tts# python tortoise/do_tts.py\
          \ --text \"hello world.\" --voice stephanie --preset high_quality --model_dir=./tortoise-tts-finetuned-lj/models/\n\
          Traceback (most recent call last):\n  File \"tortoise/do_tts.py\", line\
          \ 27, in &lt;module&gt;\n    tts = TextToSpeech(models_dir=args.model_dir)\n\
          \  File \"/home/ubuntu/transfer-tts/tortoise-tts/tortoise/api.py\", line\
          \ 231, in __init__\n    self.autoregressive.load_state_dict(torch.load(get_model_path('autoregressive.pth',\
          \ models_dir)))\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 795, in load\n    return _legacy_load(opened_file, map_location,\
          \ pickle_module, **pickle_load_args)\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 1002, in _legacy_load\n    magic_number = pickle_module.load(f, **pickle_load_args)\n\
          _pickle.UnpicklingError: invalid load key, 'v'.\n</code></pre>\n<p>Also,\
          \ would love to learn if there are instructions on how to fine-tune the\
          \ model. Would it improve the quality? What I am looking for as improvement\
          \ is kind f whether it can produce less TTS-like clear pronunciations and\
          \ learn some special speech patterns if given more data. (Like someone may\
          \ pronounce certain words non-standard with an accent)</p>\n"
        raw: "Error: \r\n```\r\ntortoise-tts# python tortoise/do_tts.py --text \"\
          hello world.\" --voice stephanie --preset high_quality --model_dir=./tortoise-tts-finetuned-lj/models/\r\
          \nTraceback (most recent call last):\r\n  File \"tortoise/do_tts.py\", line\
          \ 27, in <module>\r\n    tts = TextToSpeech(models_dir=args.model_dir)\r\
          \n  File \"/home/ubuntu/transfer-tts/tortoise-tts/tortoise/api.py\", line\
          \ 231, in __init__\r\n    self.autoregressive.load_state_dict(torch.load(get_model_path('autoregressive.pth',\
          \ models_dir)))\r\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 795, in load\r\n    return _legacy_load(opened_file, map_location,\
          \ pickle_module, **pickle_load_args)\r\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 1002, in _legacy_load\r\n    magic_number = pickle_module.load(f,\
          \ **pickle_load_args)\r\n_pickle.UnpicklingError: invalid load key, 'v'.\r\
          \n```\r\n\r\nAlso, would love to learn if there are instructions on how\
          \ to fine-tune the model. Would it improve the quality? What I am looking\
          \ for as improvement is kind f whether it can produce less TTS-like clear\
          \ pronunciations and learn some special speech patterns if given more data.\
          \ (Like someone may pronounce certain words non-standard with an accent)"
        updatedAt: '2022-12-12T17:55:46.053Z'
      numEdits: 0
      reactions: []
    id: 63976b2208a51789e4b59647
    type: comment
  author: ti3x
  content: "Error: \r\n```\r\ntortoise-tts# python tortoise/do_tts.py --text \"hello\
    \ world.\" --voice stephanie --preset high_quality --model_dir=./tortoise-tts-finetuned-lj/models/\r\
    \nTraceback (most recent call last):\r\n  File \"tortoise/do_tts.py\", line 27,\
    \ in <module>\r\n    tts = TextToSpeech(models_dir=args.model_dir)\r\n  File \"\
    /home/ubuntu/transfer-tts/tortoise-tts/tortoise/api.py\", line 231, in __init__\r\
    \n    self.autoregressive.load_state_dict(torch.load(get_model_path('autoregressive.pth',\
    \ models_dir)))\r\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
    , line 795, in load\r\n    return _legacy_load(opened_file, map_location, pickle_module,\
    \ **pickle_load_args)\r\n  File \"/opt/conda/envs/tts/lib/python3.8/site-packages/torch/serialization.py\"\
    , line 1002, in _legacy_load\r\n    magic_number = pickle_module.load(f, **pickle_load_args)\r\
    \n_pickle.UnpicklingError: invalid load key, 'v'.\r\n```\r\n\r\nAlso, would love\
    \ to learn if there are instructions on how to fine-tune the model. Would it improve\
    \ the quality? What I am looking for as improvement is kind f whether it can produce\
    \ less TTS-like clear pronunciations and learn some special speech patterns if\
    \ given more data. (Like someone may pronounce certain words non-standard with\
    \ an accent)"
  created_at: 2022-12-12 17:55:46+00:00
  edited: false
  hidden: false
  id: 63976b2208a51789e4b59647
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
      fullname: James Betker
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: jbetker
      type: user
    createdAt: '2022-12-12T19:21:52.000Z'
    data:
      edited: false
      editors:
      - jbetker
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
          fullname: James Betker
          isHf: false
          isPro: false
          name: jbetker
          type: user
        html: '<p>Hey Tim,<br>I''ve been doing most maintenance (that I can find time
          for) on GitHub - I''d recommend you pull the code from that version. This
          repo is for storing the weights.</p>

          <p>Regarding fine-tuning - it is extremely effective with this model, to
          the point where you can almost perfectly reproduce anyones voice with ~1
          hour or so of source material. For this reason, I have withheld a few details
          you would need to do this. I do not intend to release this information,
          apologies.</p>

          '
        raw: 'Hey Tim,

          I''ve been doing most maintenance (that I can find time for) on GitHub -
          I''d recommend you pull the code from that version. This repo is for storing
          the weights.


          Regarding fine-tuning - it is extremely effective with this model, to the
          point where you can almost perfectly reproduce anyones voice with ~1 hour
          or so of source material. For this reason, I have withheld a few details
          you would need to do this. I do not intend to release this information,
          apologies.'
        updatedAt: '2022-12-12T19:21:52.337Z'
      numEdits: 0
      reactions: []
    id: 63977f506bdef80952695673
    type: comment
  author: jbetker
  content: 'Hey Tim,

    I''ve been doing most maintenance (that I can find time for) on GitHub - I''d
    recommend you pull the code from that version. This repo is for storing the weights.


    Regarding fine-tuning - it is extremely effective with this model, to the point
    where you can almost perfectly reproduce anyones voice with ~1 hour or so of source
    material. For this reason, I have withheld a few details you would need to do
    this. I do not intend to release this information, apologies.'
  created_at: 2022-12-12 19:21:52+00:00
  edited: false
  hidden: false
  id: 63977f506bdef80952695673
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
      fullname: Tim
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ti3x
      type: user
    createdAt: '2022-12-12T19:41:41.000Z'
    data:
      status: closed
    id: 639783f5c0b27f432db7edc0
    type: status-change
  author: ti3x
  created_at: 2022-12-12 19:41:41+00:00
  id: 639783f5c0b27f432db7edc0
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
      fullname: James Betker
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: jbetker
      type: user
    createdAt: '2022-12-12T20:07:34.000Z'
    data:
      edited: false
      editors:
      - jbetker
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
          fullname: James Betker
          isHf: false
          isPro: false
          name: jbetker
          type: user
        html: '<p>Ah, I apologize! I didn''t realize this was the LJ repo. This should
          work.. can you confirm you are using the code from github?</p>

          '
        raw: Ah, I apologize! I didn't realize this was the LJ repo. This should work..
          can you confirm you are using the code from github?
        updatedAt: '2022-12-12T20:07:34.294Z'
      numEdits: 0
      reactions: []
    id: 63978a06a8984199c6738248
    type: comment
  author: jbetker
  content: Ah, I apologize! I didn't realize this was the LJ repo. This should work..
    can you confirm you are using the code from github?
  created_at: 2022-12-12 20:07:34+00:00
  edited: false
  hidden: false
  id: 63978a06a8984199c6738248
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
      fullname: Tim
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ti3x
      type: user
    createdAt: '2022-12-12T20:39:11.000Z'
    data:
      edited: false
      editors:
      - ti3x
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
          fullname: Tim
          isHf: false
          isPro: false
          name: ti3x
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;jbetker&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/jbetker\">@<span class=\"\
          underline\">jbetker</span></a></span>\n\n\t</span></span> yes...I was not\
          \ able to find LJ repo on Github, latest code from the <a rel=\"nofollow\"\
          \ href=\"https://github.com/neonbjb/tortoise-tts\">https://github.com/neonbjb/tortoise-tts</a>,\
          \ and I did not change anything. My goal is just trying these released weights\
          \ and test the difference.</p>\n"
        raw: '@jbetker yes...I was not able to find LJ repo on Github, latest code
          from the https://github.com/neonbjb/tortoise-tts, and I did not change anything.
          My goal is just trying these released weights and test the difference.'
        updatedAt: '2022-12-12T20:39:11.828Z'
      numEdits: 0
      reactions: []
    id: 6397916ff47a80b79ac434a6
    type: comment
  author: ti3x
  content: '@jbetker yes...I was not able to find LJ repo on Github, latest code from
    the https://github.com/neonbjb/tortoise-tts, and I did not change anything. My
    goal is just trying these released weights and test the difference.'
  created_at: 2022-12-12 20:39:11+00:00
  edited: false
  hidden: false
  id: 6397916ff47a80b79ac434a6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
      fullname: James Betker
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: jbetker
      type: user
    createdAt: '2022-12-12T21:58:49.000Z'
    data:
      edited: false
      editors:
      - jbetker
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1650321610784-61eafd948ae3ccab3b3da96d.jpeg?w=200&h=200&f=face
          fullname: James Betker
          isHf: false
          isPro: false
          name: jbetker
          type: user
        html: '<p>Just tested these weights and they work fine on my computer. Maybe
          your download of the AR weights got corrupted somehow? An easy test is:</p>

          <pre><code>import torch

          torch.load(''autoregressive.pth'')

          </code></pre>

          <p>That should yield a dict of weight values of <code>len=470</code>.</p>

          '
        raw: 'Just tested these weights and they work fine on my computer. Maybe your
          download of the AR weights got corrupted somehow? An easy test is:


          ```

          import torch

          torch.load(''autoregressive.pth'')

          ```

          That should yield a dict of weight values of `len=470`.'
        updatedAt: '2022-12-12T21:58:49.533Z'
      numEdits: 0
      reactions: []
    id: 6397a4198376157ca9e42b05
    type: comment
  author: jbetker
  content: 'Just tested these weights and they work fine on my computer. Maybe your
    download of the AR weights got corrupted somehow? An easy test is:


    ```

    import torch

    torch.load(''autoregressive.pth'')

    ```

    That should yield a dict of weight values of `len=470`.'
  created_at: 2022-12-12 21:58:49+00:00
  edited: false
  hidden: false
  id: 6397a4198376157ca9e42b05
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
      fullname: Tim
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ti3x
      type: user
    createdAt: '2022-12-13T02:46:53.000Z'
    data:
      edited: false
      editors:
      - ti3x
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/605d399a248c65cf001b45c55e09d945.svg
          fullname: Tim
          isHf: false
          isPro: false
          name: ti3x
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;jbetker&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/jbetker\">@<span class=\"\
          underline\">jbetker</span></a></span>\n\n\t</span></span> thank you for\
          \ the quick response, data download seems to have been the issue. Thank\
          \ you again for the amazing work.</p>\n"
        raw: '@jbetker thank you for the quick response, data download seems to have
          been the issue. Thank you again for the amazing work.'
        updatedAt: '2022-12-13T02:46:53.747Z'
      numEdits: 0
      reactions: []
    id: 6397e79de8533c98cf647e48
    type: comment
  author: ti3x
  content: '@jbetker thank you for the quick response, data download seems to have
    been the issue. Thank you again for the amazing work.'
  created_at: 2022-12-13 02:46:53+00:00
  edited: false
  hidden: false
  id: 6397e79de8533c98cf647e48
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: jbetker/tortoise-tts-finetuned-lj
repo_type: model
status: closed
target_branch: null
title: unable to load the fine-tuned model
