!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Stephen2022
conflicting_files: null
created_at: 2023-08-18 05:18:21+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d6074ced7df8ec0562cd4dce5dd7d625.svg
      fullname: Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Stephen2022
      type: user
    createdAt: '2023-08-18T06:18:21.000Z'
    data:
      edited: false
      editors:
      - Stephen2022
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6323468089103699
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d6074ced7df8ec0562cd4dce5dd7d625.svg
          fullname: Lee
          isHf: false
          isPro: false
          name: Stephen2022
          type: user
        html: "<pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span>\
          \ diffusers <span class=\"hljs-keyword\">import</span> DiffusionPipeline\n\
          pipeline = DiffusionPipeline.from_pretrained(<span class=\"hljs-string\"\
          >\"digiplay/majicMIX_realistic_v6\"</span>)\n</code></pre>\n<p>\u62A5\u9519\
          \uFF1A<br>ValueError: Cannot load &lt;class 'diffusers.models.autoencoder_kl.AutoencoderKL'&gt;\
          \ from /data2/huggingface/majicMIX_realistic_v6_1/vae<br>because the following\
          \ keys are missing:<br> decoder.mid_block.attentions.0.query.weight, encoder.mid_block.attentions.0.key.weight,\
          \ decoder.mid_block.attentions.0.key.bias,<br>encoder.mid_block.attentions.0.key.bias,\
          \ encoder.mid_block.attentions.0.proj_attn.weight, encoder.mid_block.attentions.0.query.weight,<br>decoder.mid_block.attentions.0.value.weight,\
          \ decoder.mid_block.attentions.0.proj_attn.bias,<br>decoder.mid_block.attentions.0.proj_attn.weight,\
          \ encoder.mid_block.attentions.0.proj_attn.bias,<br>encoder.mid_block.attentions.0.value.bias,\
          \ decoder.mid_block.attentions.0.value.bias, encoder.mid_block.attentions.0.value.weight,<br>decoder.mid_block.attentions.0.key.weight,\
          \ decoder.mid_block.attentions.0.query.bias, encoder.mid_block.attentions.0.query.bias.<br>\
          \ Please make sure to pass <code>low_cpu_mem_usage=False</code> and <code>device_map=None</code>\
          \ if you want to randomly initialize those weights or else</p>\n"
        raw: "\r\n```python\r\nfrom diffusers import DiffusionPipeline\r\npipeline\
          \ = DiffusionPipeline.from_pretrained(\"digiplay/majicMIX_realistic_v6\"\
          )\r\n```\r\n\r\n\u62A5\u9519\uFF1A\r\nValueError: Cannot load <class 'diffusers.models.autoencoder_kl.AutoencoderKL'>\
          \ from /data2/huggingface/majicMIX_realistic_v6_1/vae\r\nbecause the following\
          \ keys are missing:\r\n decoder.mid_block.attentions.0.query.weight, encoder.mid_block.attentions.0.key.weight,\
          \ decoder.mid_block.attentions.0.key.bias,\r\nencoder.mid_block.attentions.0.key.bias,\
          \ encoder.mid_block.attentions.0.proj_attn.weight, encoder.mid_block.attentions.0.query.weight,\r\
          \ndecoder.mid_block.attentions.0.value.weight, decoder.mid_block.attentions.0.proj_attn.bias,\r\
          \ndecoder.mid_block.attentions.0.proj_attn.weight, encoder.mid_block.attentions.0.proj_attn.bias,\r\
          \nencoder.mid_block.attentions.0.value.bias, decoder.mid_block.attentions.0.value.bias,\
          \ encoder.mid_block.attentions.0.value.weight,\r\ndecoder.mid_block.attentions.0.key.weight,\
          \ decoder.mid_block.attentions.0.query.bias, encoder.mid_block.attentions.0.query.bias.\r\
          \n Please make sure to pass `low_cpu_mem_usage=False` and `device_map=None`\
          \ if you want to randomly initialize those weights or else"
        updatedAt: '2023-08-18T06:18:21.824Z'
      numEdits: 0
      reactions: []
    id: 64df0d2ded50cecb0504d042
    type: comment
  author: Stephen2022
  content: "\r\n```python\r\nfrom diffusers import DiffusionPipeline\r\npipeline =\
    \ DiffusionPipeline.from_pretrained(\"digiplay/majicMIX_realistic_v6\")\r\n```\r\
    \n\r\n\u62A5\u9519\uFF1A\r\nValueError: Cannot load <class 'diffusers.models.autoencoder_kl.AutoencoderKL'>\
    \ from /data2/huggingface/majicMIX_realistic_v6_1/vae\r\nbecause the following\
    \ keys are missing:\r\n decoder.mid_block.attentions.0.query.weight, encoder.mid_block.attentions.0.key.weight,\
    \ decoder.mid_block.attentions.0.key.bias,\r\nencoder.mid_block.attentions.0.key.bias,\
    \ encoder.mid_block.attentions.0.proj_attn.weight, encoder.mid_block.attentions.0.query.weight,\r\
    \ndecoder.mid_block.attentions.0.value.weight, decoder.mid_block.attentions.0.proj_attn.bias,\r\
    \ndecoder.mid_block.attentions.0.proj_attn.weight, encoder.mid_block.attentions.0.proj_attn.bias,\r\
    \nencoder.mid_block.attentions.0.value.bias, decoder.mid_block.attentions.0.value.bias,\
    \ encoder.mid_block.attentions.0.value.weight,\r\ndecoder.mid_block.attentions.0.key.weight,\
    \ decoder.mid_block.attentions.0.query.bias, encoder.mid_block.attentions.0.query.bias.\r\
    \n Please make sure to pass `low_cpu_mem_usage=False` and `device_map=None` if\
    \ you want to randomly initialize those weights or else"
  created_at: 2023-08-18 05:18:21+00:00
  edited: false
  hidden: false
  id: 64df0d2ded50cecb0504d042
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
      fullname: digiplay
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: digiplay
      type: user
    createdAt: '2023-08-18T13:19:21.000Z'
    data:
      edited: true
      editors:
      - digiplay
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.3016473054885864
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
          fullname: digiplay
          isHf: false
          isPro: false
          name: digiplay
          type: user
        html: "<p>\u60A8\u597D\uFF0C\u60A8\u662F\u7528Google Colab \u7684\u55CE\uFF1F\
          \u53EF\u4EE5\u7528\u4EE5\u4E0B\u7684\u7A0B\u5F0F\u78BC\u8A66\u8A66\u770B\
          </p>\n<p>!pip install diffusers==0.11.1    #\u5982\u679C\u8981\u7528\u65B0\
          \u7248 0.20.0  \u4E5F\u53EF\u4EE5  \u4F46\u6211\u89BA\u5F97\u820A\u7248\u6BD4\
          \u8F03\u4E0D\u6703\u6709\u554F\u984C<br>!pip install transformers scipy\
          \ ftfy accelerate</p>\n<p>import torch<br>from diffusers import DiffusionPipeline</p>\n\
          <p>modelid=\"digiplay/majicMIX_realistic_v6\"</p>\n<p>from diffusers.models\
          \ import AutoencoderKL</p>\n<p>#\u770B\u60A8\u9700\u6C42\u9078\u64C7\u559C\
          \u6B61\u7684VAE \u628A\u524D\u9762\u7684\u4E95\u5B57\u865F\u79FB\u6389\u5C31\
          \u53EF\u4EE5<br>#560001<br>vae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-ema\"\
          )<br>#840001<br>#vae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-mse\"\
          )</p>\n<p>pipe = DiffusionPipeline.from_pretrained(modelid,vae=vae)<br>pipe\
          \ = pipe.to(\"cuda\")</p>\n<p>#\u5EFA\u8B70\u4EE5\u4E0B\u7A0B\u5F0F\u78BC\
          \u653E\u5230\u53E6\u4E00\u500B\u5132\u5B58\u683C\uFF0C\u9019\u6A23cuda\u5C31\
          \u4E0D\u7528\u91CD\u8907\u57F7\u884C<br>#\u4F9D\u81EA\u5DF1\u7684\u9700\u6C42\
          \u6539 pro \u6216neg \u5C31\u53EF\u4EE5\uFF0C\u6B65\u6578\u4E5F\u53EF\u4EE5\
          \u4F9D\u9700\u6C42\u505A\u66F4\u6539</p>\n<p>editstep=19</p>\n<p>pro=\"\
          1girl,4k,masterpiece\"<br>neg=\"(worst quality: 1.3),(low quality: 1.3),normal\
          \ quality\"</p>\n<p>image = pipe(prompt=pro,<br>                 negative_prompt=neg,<br>\
          \                 num_inference_steps=editstep,guidance_scale=7.5,height=512,\
          \ width=512).images[0]<br>image</p>\n"
        raw: "\u60A8\u597D\uFF0C\u60A8\u662F\u7528Google Colab \u7684\u55CE\uFF1F\u53EF\
          \u4EE5\u7528\u4EE5\u4E0B\u7684\u7A0B\u5F0F\u78BC\u8A66\u8A66\u770B\n\n!pip\
          \ install diffusers==0.11.1    #\u5982\u679C\u8981\u7528\u65B0\u7248 0.20.0\
          \  \u4E5F\u53EF\u4EE5  \u4F46\u6211\u89BA\u5F97\u820A\u7248\u6BD4\u8F03\u4E0D\
          \u6703\u6709\u554F\u984C\n!pip install transformers scipy ftfy accelerate\n\
          \n\nimport torch\nfrom diffusers import DiffusionPipeline\n\nmodelid=\"\
          digiplay/majicMIX_realistic_v6\"\n\nfrom diffusers.models import AutoencoderKL\n\
          \n#\u770B\u60A8\u9700\u6C42\u9078\u64C7\u559C\u6B61\u7684VAE \u628A\u524D\
          \u9762\u7684\u4E95\u5B57\u865F\u79FB\u6389\u5C31\u53EF\u4EE5\n#560001\n\
          vae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-ema\")\n#840001\n\
          #vae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-mse\")\n\n\
          pipe = DiffusionPipeline.from_pretrained(modelid,vae=vae)\npipe = pipe.to(\"\
          cuda\")\n\n#\u5EFA\u8B70\u4EE5\u4E0B\u7A0B\u5F0F\u78BC\u653E\u5230\u53E6\
          \u4E00\u500B\u5132\u5B58\u683C\uFF0C\u9019\u6A23cuda\u5C31\u4E0D\u7528\u91CD\
          \u8907\u57F7\u884C\n#\u4F9D\u81EA\u5DF1\u7684\u9700\u6C42\u6539 pro \u6216\
          neg \u5C31\u53EF\u4EE5\uFF0C\u6B65\u6578\u4E5F\u53EF\u4EE5\u4F9D\u9700\u6C42\
          \u505A\u66F4\u6539\n\neditstep=19\n\npro=\"1girl,4k,masterpiece\"\nneg=\"\
          (worst quality: 1.3),(low quality: 1.3),normal quality\"\n\nimage = pipe(prompt=pro,\n\
          \                 negative_prompt=neg,\n                 num_inference_steps=editstep,guidance_scale=7.5,height=512,\
          \ width=512).images[0]\nimage\n\n\n\n"
        updatedAt: '2023-08-18T13:21:54.037Z'
      numEdits: 1
      reactions: []
    id: 64df6fd956731bec6241f6c1
    type: comment
  author: digiplay
  content: "\u60A8\u597D\uFF0C\u60A8\u662F\u7528Google Colab \u7684\u55CE\uFF1F\u53EF\
    \u4EE5\u7528\u4EE5\u4E0B\u7684\u7A0B\u5F0F\u78BC\u8A66\u8A66\u770B\n\n!pip install\
    \ diffusers==0.11.1    #\u5982\u679C\u8981\u7528\u65B0\u7248 0.20.0  \u4E5F\u53EF\
    \u4EE5  \u4F46\u6211\u89BA\u5F97\u820A\u7248\u6BD4\u8F03\u4E0D\u6703\u6709\u554F\
    \u984C\n!pip install transformers scipy ftfy accelerate\n\n\nimport torch\nfrom\
    \ diffusers import DiffusionPipeline\n\nmodelid=\"digiplay/majicMIX_realistic_v6\"\
    \n\nfrom diffusers.models import AutoencoderKL\n\n#\u770B\u60A8\u9700\u6C42\u9078\
    \u64C7\u559C\u6B61\u7684VAE \u628A\u524D\u9762\u7684\u4E95\u5B57\u865F\u79FB\u6389\
    \u5C31\u53EF\u4EE5\n#560001\nvae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-ema\"\
    )\n#840001\n#vae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-mse\"\
    )\n\npipe = DiffusionPipeline.from_pretrained(modelid,vae=vae)\npipe = pipe.to(\"\
    cuda\")\n\n#\u5EFA\u8B70\u4EE5\u4E0B\u7A0B\u5F0F\u78BC\u653E\u5230\u53E6\u4E00\
    \u500B\u5132\u5B58\u683C\uFF0C\u9019\u6A23cuda\u5C31\u4E0D\u7528\u91CD\u8907\u57F7\
    \u884C\n#\u4F9D\u81EA\u5DF1\u7684\u9700\u6C42\u6539 pro \u6216neg \u5C31\u53EF\
    \u4EE5\uFF0C\u6B65\u6578\u4E5F\u53EF\u4EE5\u4F9D\u9700\u6C42\u505A\u66F4\u6539\
    \n\neditstep=19\n\npro=\"1girl,4k,masterpiece\"\nneg=\"(worst quality: 1.3),(low\
    \ quality: 1.3),normal quality\"\n\nimage = pipe(prompt=pro,\n               \
    \  negative_prompt=neg,\n                 num_inference_steps=editstep,guidance_scale=7.5,height=512,\
    \ width=512).images[0]\nimage\n\n\n\n"
  created_at: 2023-08-18 12:19:21+00:00
  edited: true
  hidden: false
  id: 64df6fd956731bec6241f6c1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
      fullname: digiplay
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: digiplay
      type: user
    createdAt: '2023-08-18T13:23:00.000Z'
    data:
      edited: false
      editors:
      - digiplay
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9992342591285706
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
          fullname: digiplay
          isHf: false
          isPro: false
          name: digiplay
          type: user
        html: "<p>\uFF08\u6700\u5F8C\u4E00\u7A0B\u5F0F\u78BC\u8CBC\u904E\u53BB\u53EF\
          \u4EE5\u8981\u91CD\u65B0\u5C0D\u9F4A\u4E00\u4E0B\uFF0C \u60A8\u518D\u81EA\
          \u884C\u66F4\u6539\u5537\uFF0C<br>\u6709\u6210\u529F\u7684\u8A71\u4E5F\u53EF\
          \u4EE5\u518D\u8DDF\u6211\u8AAA\u5537 \U0001F604 \uFF09</p>\n"
        raw: "\uFF08\u6700\u5F8C\u4E00\u7A0B\u5F0F\u78BC\u8CBC\u904E\u53BB\u53EF\u4EE5\
          \u8981\u91CD\u65B0\u5C0D\u9F4A\u4E00\u4E0B\uFF0C \u60A8\u518D\u81EA\u884C\
          \u66F4\u6539\u5537\uFF0C\n\u6709\u6210\u529F\u7684\u8A71\u4E5F\u53EF\u4EE5\
          \u518D\u8DDF\u6211\u8AAA\u5537 \U0001F604 \uFF09"
        updatedAt: '2023-08-18T13:23:00.011Z'
      numEdits: 0
      reactions: []
    id: 64df70b4288ed5cc730df3d5
    type: comment
  author: digiplay
  content: "\uFF08\u6700\u5F8C\u4E00\u7A0B\u5F0F\u78BC\u8CBC\u904E\u53BB\u53EF\u4EE5\
    \u8981\u91CD\u65B0\u5C0D\u9F4A\u4E00\u4E0B\uFF0C \u60A8\u518D\u81EA\u884C\u66F4\
    \u6539\u5537\uFF0C\n\u6709\u6210\u529F\u7684\u8A71\u4E5F\u53EF\u4EE5\u518D\u8DDF\
    \u6211\u8AAA\u5537 \U0001F604 \uFF09"
  created_at: 2023-08-18 12:23:00+00:00
  edited: false
  hidden: false
  id: 64df70b4288ed5cc730df3d5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
      fullname: digiplay
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: digiplay
      type: user
    createdAt: '2023-08-18T14:41:40.000Z'
    data:
      edited: false
      editors:
      - digiplay
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9528878927230835
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/646c83c871d0c8a6e4455854/b5Act86SZ7zuUXmLOIqYj.png?w=200&h=200&f=face
          fullname: digiplay
          isHf: false
          isPro: false
          name: digiplay
          type: user
        html: "<p>\u88DC\u5145\uFF0C \u5982\u679C\u662F\u6703\u8DF3\u51FA\u9ED1\u8272\
          \u6846\u7684\u5B89\u5168\u8B66\u544A\uFF0C \u662F\u52A0\u5165\u4EE5\u4E0B\
          \u9019\u6BB5\u57F7\u884C\u5C31\u53EF\u4EE5\uFF1A<br>\uFF08\u53EA\u9700\u8981\
          \u57F7\u884C\u4E00\u6B21\uFF0C\u53EF\u4EE5\u653E\u5728cuda\u4E4B\u5F8C\u57F7\
          \u884C\uFF09</p>\n<p>pipe.safety_checker = None<br>pipe.requires_safety_checker\
          \ = False</p>\n"
        raw: "\u88DC\u5145\uFF0C \u5982\u679C\u662F\u6703\u8DF3\u51FA\u9ED1\u8272\u6846\
          \u7684\u5B89\u5168\u8B66\u544A\uFF0C \u662F\u52A0\u5165\u4EE5\u4E0B\u9019\
          \u6BB5\u57F7\u884C\u5C31\u53EF\u4EE5\uFF1A\n\uFF08\u53EA\u9700\u8981\u57F7\
          \u884C\u4E00\u6B21\uFF0C\u53EF\u4EE5\u653E\u5728cuda\u4E4B\u5F8C\u57F7\u884C\
          \uFF09\n\npipe.safety_checker = None\npipe.requires_safety_checker = False"
        updatedAt: '2023-08-18T14:41:40.934Z'
      numEdits: 0
      reactions: []
    id: 64df832492f3bd9786871341
    type: comment
  author: digiplay
  content: "\u88DC\u5145\uFF0C \u5982\u679C\u662F\u6703\u8DF3\u51FA\u9ED1\u8272\u6846\
    \u7684\u5B89\u5168\u8B66\u544A\uFF0C \u662F\u52A0\u5165\u4EE5\u4E0B\u9019\u6BB5\
    \u57F7\u884C\u5C31\u53EF\u4EE5\uFF1A\n\uFF08\u53EA\u9700\u8981\u57F7\u884C\u4E00\
    \u6B21\uFF0C\u53EF\u4EE5\u653E\u5728cuda\u4E4B\u5F8C\u57F7\u884C\uFF09\n\npipe.safety_checker\
    \ = None\npipe.requires_safety_checker = False"
  created_at: 2023-08-18 13:41:40+00:00
  edited: false
  hidden: false
  id: 64df832492f3bd9786871341
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: digiplay/majicMIX_realistic_v6
repo_type: model
status: open
target_branch: null
title: "\u8BF7\u95EE\u6211\u7528\u548C\u8FD9\u4E2A\u4EE3\u7801\u8FD0\u884C\uFF0C\u62A5\
  \u9519\u5982\u4E0B\uFF0C\u662F\u4EC0\u4E48\u95EE\u9898\u5462\uFF1FValueError: Cannot\
  \ load <class 'diffusers.models.autoencoder_kl.AutoencoderKL'>"
