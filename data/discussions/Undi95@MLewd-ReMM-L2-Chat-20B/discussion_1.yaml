!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Cheuwambel
conflicting_files: null
created_at: 2023-09-23 03:15:40+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b77b8509ae23a48807ede2fb622690b8.svg
      fullname: Cheuwambel
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cheuwambel
      type: user
    createdAt: '2023-09-23T04:15:40.000Z'
    data:
      edited: true
      editors:
      - Cheuwambel
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5593770146369934
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b77b8509ae23a48807ede2fb622690b8.svg
          fullname: Cheuwambel
          isHf: false
          isPro: false
          name: Cheuwambel
          type: user
        html: "<p>I'm having trouble loading the model files downloaded from this\
          \ repo. As a very basic test, using pytorch 2.0.1:</p>\n<pre><code>&gt;&gt;&gt;\
          \ import torch\n&gt;&gt;&gt; torch.load('pytorch_model-00001-of-00005.bin')\n\
          Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in\
          \ &lt;module&gt;\n  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 815, in load\n    return _legacy_load(opened_file, map_location,\
          \ pickle_module, **pickle_load_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
          \  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\", line\
          \ 1033, in _legacy_load\n    magic_number = pickle_module.load(f, **pickle_load_args)\n\
          \                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_pickle.UnpicklingError:\
          \ invalid load key, '\\x00'.\n</code></pre>\n<p>None of the shards load\
          \ correctly, mostly invalid load keys but one <code>_pickle.UnpicklingError:\
          \ unpickling stack underflow</code>. I checked, and all of my sha256sums\
          \ match the ones on HuggingFace. Perhaps there was some kind of line endings\
          \ conversion or other incorrect postprocessing that happened when the files\
          \ were added to git?</p>\n"
        raw: "I'm having trouble loading the model files downloaded from this repo.\
          \ As a very basic test, using pytorch 2.0.1:\n```\n>>> import torch\n>>>\
          \ torch.load('pytorch_model-00001-of-00005.bin')\nTraceback (most recent\
          \ call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 815, in load\n    return _legacy_load(opened_file, map_location,\
          \ pickle_module, **pickle_load_args)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
          \  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\", line\
          \ 1033, in _legacy_load\n    magic_number = pickle_module.load(f, **pickle_load_args)\n\
          \                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_pickle.UnpicklingError:\
          \ invalid load key, '\\x00'.\n```\nNone of the shards load correctly, mostly\
          \ invalid load keys but one `_pickle.UnpicklingError: unpickling stack underflow`.\
          \ I checked, and all of my sha256sums match the ones on HuggingFace. Perhaps\
          \ there was some kind of line endings conversion or other incorrect postprocessing\
          \ that happened when the files were added to git?"
        updatedAt: '2023-09-23T04:15:52.000Z'
      numEdits: 1
      reactions: []
    id: 650e666c55dc1e84173d9728
    type: comment
  author: Cheuwambel
  content: "I'm having trouble loading the model files downloaded from this repo.\
    \ As a very basic test, using pytorch 2.0.1:\n```\n>>> import torch\n>>> torch.load('pytorch_model-00001-of-00005.bin')\n\
    Traceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n\
    \  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\", line 815,\
    \ in load\n    return _legacy_load(opened_file, map_location, pickle_module, **pickle_load_args)\n\
    \           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
    \  File \"/usr/lib/python3.11/site-packages/torch/serialization.py\", line 1033,\
    \ in _legacy_load\n    magic_number = pickle_module.load(f, **pickle_load_args)\n\
    \                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n_pickle.UnpicklingError:\
    \ invalid load key, '\\x00'.\n```\nNone of the shards load correctly, mostly invalid\
    \ load keys but one `_pickle.UnpicklingError: unpickling stack underflow`. I checked,\
    \ and all of my sha256sums match the ones on HuggingFace. Perhaps there was some\
    \ kind of line endings conversion or other incorrect postprocessing that happened\
    \ when the files were added to git?"
  created_at: 2023-09-23 03:15:40+00:00
  edited: true
  hidden: false
  id: 650e666c55dc1e84173d9728
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
      fullname: Undi
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Undi95
      type: user
    createdAt: '2023-09-23T10:36:17.000Z'
    data:
      edited: true
      editors:
      - Undi95
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9627888202667236
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
          fullname: Undi
          isHf: false
          isPro: false
          name: Undi95
          type: user
        html: '<p>They are .Safetensors file I have to rename in .bin<br>All my 20B
          models have this problem because the tools I used was not renaming/taking
          name correctly, but it''s fixed now, so you don''t need to do that anymore
          for my future work.</p>

          <p>Just change the extention from "bin" to "safetensors". </p>

          '
        raw: 'They are .Safetensors file I have to rename in .bin

          All my 20B models have this problem because the tools I used was not renaming/taking
          name correctly, but it''s fixed now, so you don''t need to do that anymore
          for my future work.


          Just change the extention from "bin" to "safetensors". '
        updatedAt: '2023-09-23T10:36:45.121Z'
      numEdits: 1
      reactions: []
    id: 650ebfa1dc509ae7d7b8809f
    type: comment
  author: Undi95
  content: 'They are .Safetensors file I have to rename in .bin

    All my 20B models have this problem because the tools I used was not renaming/taking
    name correctly, but it''s fixed now, so you don''t need to do that anymore for
    my future work.


    Just change the extention from "bin" to "safetensors". '
  created_at: 2023-09-23 09:36:17+00:00
  edited: true
  hidden: false
  id: 650ebfa1dc509ae7d7b8809f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
      fullname: Undi
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Undi95
      type: user
    createdAt: '2023-09-23T16:28:58.000Z'
    data:
      edited: true
      editors:
      - Undi95
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9672636389732361
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
          fullname: Undi
          isHf: false
          isPro: false
          name: Undi95
          type: user
        html: '<p>Update: I fixed all my 20B model naming, should work now.<br>If
          it worked, please close the issue, and enjoy!</p>

          '
        raw: 'Update: I fixed all my 20B model naming, should work now.

          If it worked, please close the issue, and enjoy!'
        updatedAt: '2023-09-23T16:29:45.544Z'
      numEdits: 1
      reactions: []
    id: 650f124af26dbb8827bd4bcc
    type: comment
  author: Undi95
  content: 'Update: I fixed all my 20B model naming, should work now.

    If it worked, please close the issue, and enjoy!'
  created_at: 2023-09-23 15:28:58+00:00
  edited: true
  hidden: false
  id: 650f124af26dbb8827bd4bcc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c0d31da851fa970f2e63e0abc7b1f28a.svg
      fullname: xabxa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Agtian
      type: user
    createdAt: '2023-09-25T15:52:13.000Z'
    data:
      edited: false
      editors:
      - Agtian
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7656171917915344
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c0d31da851fa970f2e63e0abc7b1f28a.svg
          fullname: xabxa
          isHf: false
          isPro: false
          name: Agtian
          type: user
        html: '<p>OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a
          file named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.</p>

          '
        raw: 'OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a file
          named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.'
        updatedAt: '2023-09-25T15:52:13.240Z'
      numEdits: 0
      reactions: []
    id: 6511acad301678dc97b7d0b2
    type: comment
  author: Agtian
  content: 'OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a file
    named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.'
  created_at: 2023-09-25 14:52:13+00:00
  edited: false
  hidden: false
  id: 6511acad301678dc97b7d0b2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
      fullname: Undi
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Undi95
      type: user
    createdAt: '2023-09-25T17:48:44.000Z'
    data:
      edited: true
      editors:
      - Undi95
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8301771879196167
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
          fullname: Undi
          isHf: false
          isPro: false
          name: Undi95
          type: user
        html: '<blockquote>

          <p>OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a file
          named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.</p>

          </blockquote>

          <p>I''m clueless.<br>Rename Model_... by Pytorch_model...<br>Tell me if
          it work!</p>

          '
        raw: '> OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a file
          named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.


          I''m clueless.

          Rename Model_... by Pytorch_model...

          Tell me if it work!'
        updatedAt: '2023-09-25T19:16:57.527Z'
      numEdits: 2
      reactions: []
    id: 6511c7fc353a60593b00baeb
    type: comment
  author: Undi95
  content: '> OSError: Undi95/MLewd-ReMM-L2-Chat-20B does not appear to have a file
    named pytorch_model.bin, tf_model.h5, model.ckpt or flax_model.msgpack.


    I''m clueless.

    Rename Model_... by Pytorch_model...

    Tell me if it work!'
  created_at: 2023-09-25 16:48:44+00:00
  edited: true
  hidden: false
  id: 6511c7fc353a60593b00baeb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b77b8509ae23a48807ede2fb622690b8.svg
      fullname: Cheuwambel
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cheuwambel
      type: user
    createdAt: '2023-09-26T00:28:08.000Z'
    data:
      edited: true
      editors:
      - Cheuwambel
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6475638747215271
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b77b8509ae23a48807ede2fb622690b8.svg
          fullname: Cheuwambel
          isHf: false
          isPro: false
          name: Cheuwambel
          type: user
        html: '<p>My version of HF transformers looks for model.safetensors.index.json,
          not model.bin.index.json.</p>

          '
        raw: My version of HF transformers looks for model.safetensors.index.json,
          not model.bin.index.json.
        updatedAt: '2023-09-26T00:29:16.331Z'
      numEdits: 2
      reactions: []
    id: 65122598734af2ca4de072d8
    type: comment
  author: Cheuwambel
  content: My version of HF transformers looks for model.safetensors.index.json, not
    model.bin.index.json.
  created_at: 2023-09-25 23:28:08+00:00
  edited: true
  hidden: false
  id: 65122598734af2ca4de072d8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
      fullname: Undi
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Undi95
      type: user
    createdAt: '2023-09-26T00:37:39.000Z'
    data:
      edited: false
      editors:
      - Undi95
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6467617154121399
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
          fullname: Undi
          isHf: false
          isPro: false
          name: Undi95
          type: user
        html: '<blockquote>

          <p>My version of HF transformers looks for model.safetensors.index.json,
          not model.bin.index.json.</p>

          </blockquote>

          <p>Fixed!</p>

          '
        raw: '> My version of HF transformers looks for model.safetensors.index.json,
          not model.bin.index.json.


          Fixed!'
        updatedAt: '2023-09-26T00:37:39.476Z'
      numEdits: 0
      reactions: []
    id: 651227d313f72a4e0968f315
    type: comment
  author: Undi95
  content: '> My version of HF transformers looks for model.safetensors.index.json,
    not model.bin.index.json.


    Fixed!'
  created_at: 2023-09-25 23:37:39+00:00
  edited: false
  hidden: false
  id: 651227d313f72a4e0968f315
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Undi95/MLewd-ReMM-L2-Chat-20B
repo_type: model
status: open
target_branch: null
title: Cannot load model files with pytorch 2.0.1
