!!python/object:huggingface_hub.community.DiscussionWithDetails
author: adymaharana
conflicting_files: null
created_at: 2023-09-06 19:30:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1663166686696-631b5e5c824f2502e35161e7.jpeg?w=200&h=200&f=face
      fullname: Adyasha Maharana
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: adymaharana
      type: user
    createdAt: '2023-09-06T20:30:33.000Z'
    data:
      edited: false
      editors:
      - adymaharana
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.28693822026252747
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1663166686696-631b5e5c824f2502e35161e7.jpeg?w=200&h=200&f=face
          fullname: Adyasha Maharana
          isHf: false
          isPro: false
          name: adymaharana
          type: user
        html: "<p>Is there a way to get likelihoods from the model for a pre-defined\
          \ answer? Something like this:</p>\n<pre><code>inputs = processor(text=prompt,\
          \ images=image, return_tensors=\"pt\")\ntargets = processor(text=answer,\
          \ return_tensors=\"pt\")\noutput = model(\n    pixel_values=inputs[\"pixel_values\"\
          ],\n    input_ids=inputs[\"input_ids\"][:, :-1],\n    attention_mask=inputs[\"\
          attention_mask\"][:, :-1],\n    img_features=None,\n    img_attn_mask=inputs[\"\
          img_attn_mask\"][:, :-1],\n    use_cache=False,\n    labels=targets\n)\n\
          nll_loss = output[0]\n</code></pre>\n"
        raw: "Is there a way to get likelihoods from the model for a pre-defined answer?\
          \ Something like this:\r\n\r\n```\r\ninputs = processor(text=prompt, images=image,\
          \ return_tensors=\"pt\")\r\ntargets = processor(text=answer, return_tensors=\"\
          pt\")\r\noutput = model(\r\n    pixel_values=inputs[\"pixel_values\"],\r\
          \n    input_ids=inputs[\"input_ids\"][:, :-1],\r\n    attention_mask=inputs[\"\
          attention_mask\"][:, :-1],\r\n    img_features=None,\r\n    img_attn_mask=inputs[\"\
          img_attn_mask\"][:, :-1],\r\n    use_cache=False,\r\n    labels=targets\r\
          \n)\r\nnll_loss = output[0]\r\n```"
        updatedAt: '2023-09-06T20:30:33.403Z'
      numEdits: 0
      reactions: []
    id: 64f8e16983807928d264d317
    type: comment
  author: adymaharana
  content: "Is there a way to get likelihoods from the model for a pre-defined answer?\
    \ Something like this:\r\n\r\n```\r\ninputs = processor(text=prompt, images=image,\
    \ return_tensors=\"pt\")\r\ntargets = processor(text=answer, return_tensors=\"\
    pt\")\r\noutput = model(\r\n    pixel_values=inputs[\"pixel_values\"],\r\n   \
    \ input_ids=inputs[\"input_ids\"][:, :-1],\r\n    attention_mask=inputs[\"attention_mask\"\
    ][:, :-1],\r\n    img_features=None,\r\n    img_attn_mask=inputs[\"img_attn_mask\"\
    ][:, :-1],\r\n    use_cache=False,\r\n    labels=targets\r\n)\r\nnll_loss = output[0]\r\
    \n```"
  created_at: 2023-09-06 19:30:33+00:00
  edited: false
  hidden: false
  id: 64f8e16983807928d264d317
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
      fullname: Yih-Dar SHIEH
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ydshieh
      type: user
    createdAt: '2023-09-08T06:47:20.000Z'
    data:
      edited: false
      editors:
      - ydshieh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9580737948417664
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
          fullname: Yih-Dar SHIEH
          isHf: true
          isPro: false
          name: ydshieh
          type: user
        html: '<p>Hi, the implementation (should) have the <code>labels</code> argument
          already. But I didn''t try it myself. I would suggest to wait for the official
          port, see <a rel="nofollow" href="https://github.com/huggingface/transformers/pull/24709">https://github.com/huggingface/transformers/pull/24709</a></p>

          '
        raw: 'Hi, the implementation (should) have the `labels` argument already.
          But I didn''t try it myself. I would suggest to wait for the official port,
          see https://github.com/huggingface/transformers/pull/24709

          '
        updatedAt: '2023-09-08T06:47:20.900Z'
      numEdits: 0
      reactions: []
    id: 64fac378c7f04f7cee663d6b
    type: comment
  author: ydshieh
  content: 'Hi, the implementation (should) have the `labels` argument already. But
    I didn''t try it myself. I would suggest to wait for the official port, see https://github.com/huggingface/transformers/pull/24709

    '
  created_at: 2023-09-08 05:47:20+00:00
  edited: false
  hidden: false
  id: 64fac378c7f04f7cee663d6b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1625150194719-6058c8cbcbe9c7542f3501ff.png?w=200&h=200&f=face
      fullname: Yih-Dar SHIEH
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: ydshieh
      type: user
    createdAt: '2023-10-20T18:12:10.000Z'
    data:
      status: closed
    id: 6532c2fad34e9f02b97ad07b
    type: status-change
  author: ydshieh
  created_at: 2023-10-20 17:12:10+00:00
  id: 6532c2fad34e9f02b97ad07b
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 16
repo_id: ydshieh/kosmos-2-patch14-224
repo_type: model
status: closed
target_branch: null
title: Getting likelihoods for a given target
