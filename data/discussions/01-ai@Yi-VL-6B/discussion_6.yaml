!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Yin-Xie
conflicting_files: null
created_at: 2024-01-24 11:20:10+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a3a3d74a8ad4d4583f6afb2a05a6190a.svg
      fullname: Yin Xie
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Yin-Xie
      type: user
    createdAt: '2024-01-24T11:20:10.000Z'
    data:
      edited: false
      editors:
      - Yin-Xie
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.49916189908981323
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a3a3d74a8ad4d4583f6afb2a05a6190a.svg
          fullname: Yin Xie
          isHf: false
          isPro: false
          name: Yin-Xie
          type: user
        html: '<p>Traceback (most recent call last):<br>  File "/mnt2/yinxie/code/Yi/VL/single_inference.py",
          line 110, in <br>    single_infer(args)<br>  File "/mnt2/yinxie/code/Yi/VL/single_inference.py",
          line 32, in single_infer<br>    tokenizer, model, image_processor, context_len
          = load_pretrained_model(model_path)<br>  File "/mnt2/yinxie/code/Yi/VL/llava/mm_utils.py",
          line 78, in load_pretrained_model<br>    tokenizer = AutoTokenizer.from_pretrained(model_path,
          use_fast=False)<br>  File "/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/models/auto/tokenization_auto.py",
          line 702, in from_pretrained<br>    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,
          *inputs, **kwargs)<br>  File "/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py",
          line 1841, in from_pretrained<br>    return cls._from_pretrained(<br>  File
          "/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py",
          line 2060, in _from_pretrained<br>    raise ValueError(<br>ValueError: Non-consecutive
          added token '''' found. Should have index 64000 but has index 0 in saved
          vocabulary.</p>

          '
        raw: "Traceback (most recent call last):\r\n  File \"/mnt2/yinxie/code/Yi/VL/single_inference.py\"\
          , line 110, in <module>\r\n    single_infer(args)\r\n  File \"/mnt2/yinxie/code/Yi/VL/single_inference.py\"\
          , line 32, in single_infer\r\n    tokenizer, model, image_processor, context_len\
          \ = load_pretrained_model(model_path)\r\n  File \"/mnt2/yinxie/code/Yi/VL/llava/mm_utils.py\"\
          , line 78, in load_pretrained_model\r\n    tokenizer = AutoTokenizer.from_pretrained(model_path,\
          \ use_fast=False)\r\n  File \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/models/auto/tokenization_auto.py\"\
          , line 702, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,\
          \ *inputs, **kwargs)\r\n  File \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
          , line 1841, in from_pretrained\r\n    return cls._from_pretrained(\r\n\
          \  File \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
          , line 2060, in _from_pretrained\r\n    raise ValueError(\r\nValueError:\
          \ Non-consecutive added token '<unk>' found. Should have index 64000 but\
          \ has index 0 in saved vocabulary."
        updatedAt: '2024-01-24T11:20:10.312Z'
      numEdits: 0
      reactions: []
    id: 65b0f26a9205404b1a99c1b9
    type: comment
  author: Yin-Xie
  content: "Traceback (most recent call last):\r\n  File \"/mnt2/yinxie/code/Yi/VL/single_inference.py\"\
    , line 110, in <module>\r\n    single_infer(args)\r\n  File \"/mnt2/yinxie/code/Yi/VL/single_inference.py\"\
    , line 32, in single_infer\r\n    tokenizer, model, image_processor, context_len\
    \ = load_pretrained_model(model_path)\r\n  File \"/mnt2/yinxie/code/Yi/VL/llava/mm_utils.py\"\
    , line 78, in load_pretrained_model\r\n    tokenizer = AutoTokenizer.from_pretrained(model_path,\
    \ use_fast=False)\r\n  File \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/models/auto/tokenization_auto.py\"\
    , line 702, in from_pretrained\r\n    return tokenizer_class.from_pretrained(pretrained_model_name_or_path,\
    \ *inputs, **kwargs)\r\n  File \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
    , line 1841, in from_pretrained\r\n    return cls._from_pretrained(\r\n  File\
    \ \"/root/miniconda3/envs/llava_xy/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
    , line 2060, in _from_pretrained\r\n    raise ValueError(\r\nValueError: Non-consecutive\
    \ added token '<unk>' found. Should have index 64000 but has index 0 in saved\
    \ vocabulary."
  created_at: 2024-01-24 11:20:10+00:00
  edited: false
  hidden: false
  id: 65b0f26a9205404b1a99c1b9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: 01-ai/Yi-VL-6B
repo_type: model
status: open
target_branch: null
title: load pretrained model error
