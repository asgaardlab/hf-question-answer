!!python/object:huggingface_hub.community.DiscussionWithDetails
author: andykoko
conflicting_files: null
created_at: 2023-04-28 12:59:01+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T13:59:01.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>I see that the torch packaged by GuernikaModelConverter is an x86_64
          arch, which runs quite slowly on Apple M1.<br>Can you release an arm64 version?</p>

          '
        raw: "I see that the torch packaged by GuernikaModelConverter is an x86_64\
          \ arch, which runs quite slowly on Apple M1.\r\nCan you release an arm64\
          \ version?"
        updatedAt: '2023-04-28T13:59:01.013Z'
      numEdits: 0
      reactions: []
    id: 644bd1252a64aa9dd8fae708
    type: comment
  author: andykoko
  content: "I see that the torch packaged by GuernikaModelConverter is an x86_64 arch,\
    \ which runs quite slowly on Apple M1.\r\nCan you release an arm64 version?"
  created_at: 2023-04-28 12:59:01+00:00
  edited: false
  hidden: false
  id: 644bd1252a64aa9dd8fae708
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T14:38:11.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;andykoko&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/andykoko\">@<span class=\"\
          underline\">andykoko</span></a></span>\n\n\t</span></span> where can you\
          \ see that?</p>\n"
        raw: '@andykoko where can you see that?'
        updatedAt: '2023-04-28T14:38:11.362Z'
      numEdits: 0
      reactions: []
    id: 644bda53ed08a4fdf4d71c0a
    type: comment
  author: GuiyeC
  content: '@andykoko where can you see that?'
  created_at: 2023-04-28 13:38:11+00:00
  edited: false
  hidden: false
  id: 644bda53ed08a4fdf4d71c0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T15:46:28.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p><code>/private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/</code><br>Under
          a similar system cache folder, the python environment you packaged will
          be released here.</p>

          '
        raw: '```/private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/```

          Under a similar system cache folder, the python environment you packaged
          will be released here.'
        updatedAt: '2023-04-28T15:46:28.765Z'
      numEdits: 0
      reactions: []
    id: 644bea54194e124dacb4ef27
    type: comment
  author: andykoko
  content: '```/private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/```

    Under a similar system cache folder, the python environment you packaged will
    be released here.'
  created_at: 2023-04-28 14:46:28+00:00
  edited: false
  hidden: false
  id: 644bea54194e124dacb4ef27
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T15:48:59.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: '<p>How can you know it''s x86_64? I am running on Apple Silicon too
          so it should be using the correct torch.</p>

          '
        raw: How can you know it's x86_64? I am running on Apple Silicon too so it
          should be using the correct torch.
        updatedAt: '2023-04-28T15:48:59.033Z'
      numEdits: 0
      reactions: []
    id: 644beaeb45e79023c7d86977
    type: comment
  author: GuiyeC
  content: How can you know it's x86_64? I am running on Apple Silicon too so it should
    be using the correct torch.
  created_at: 2023-04-28 14:48:59+00:00
  edited: false
  hidden: false
  id: 644beaeb45e79023c7d86977
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T16:00:19.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>I use macos <code>file</code> tool<br><code>&gt; file /private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/T/_MEIO2Vuko/torch/lib/libtorch_cpu.dylib</code><br><code>&gt;
          Mach-O 64-bit dynamically linked shared library x86_64</code><br>All dynamic
          library files released are x86_64.<br>I used GuernikaModelConverter on an
          old intel cpu mac, and the conversion speed is 2-3 times faster than on
          M1.</p>

          '
        raw: 'I use macos `file` tool

          `> file /private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/T/_MEIO2Vuko/torch/lib/libtorch_cpu.dylib`

          `> Mach-O 64-bit dynamically linked shared library x86_64`

          All dynamic library files released are x86_64.

          I used GuernikaModelConverter on an old intel cpu mac, and the conversion
          speed is 2-3 times faster than on M1.'
        updatedAt: '2023-04-28T16:00:19.659Z'
      numEdits: 0
      reactions: []
    id: 644bed93194e124dacb5690d
    type: comment
  author: andykoko
  content: 'I use macos `file` tool

    `> file /private/var/folders/rz/mv09yyqj2zs340l11vl_1m080000gn/T/_MEIO2Vuko/torch/lib/libtorch_cpu.dylib`

    `> Mach-O 64-bit dynamically linked shared library x86_64`

    All dynamic library files released are x86_64.

    I used GuernikaModelConverter on an old intel cpu mac, and the conversion speed
    is 2-3 times faster than on M1.'
  created_at: 2023-04-28 15:00:19+00:00
  edited: false
  hidden: false
  id: 644bed93194e124dacb5690d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T16:14:56.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: '<p>That is correct, those do seem to be x86_64, I will take a look
          at this but I am able to use MPS which, if I''m not mistaken, should not
          be available on the Intel release, if you have any instructions on how to
          install arm64 PyTorch it would probably save me some time.</p>

          '
        raw: That is correct, those do seem to be x86_64, I will take a look at this
          but I am able to use MPS which, if I'm not mistaken, should not be available
          on the Intel release, if you have any instructions on how to install arm64
          PyTorch it would probably save me some time.
        updatedAt: '2023-04-28T16:14:56.704Z'
      numEdits: 0
      reactions: []
    id: 644bf100ed08a4fdf4da0752
    type: comment
  author: GuiyeC
  content: That is correct, those do seem to be x86_64, I will take a look at this
    but I am able to use MPS which, if I'm not mistaken, should not be available on
    the Intel release, if you have any instructions on how to install arm64 PyTorch
    it would probably save me some time.
  created_at: 2023-04-28 15:14:56+00:00
  edited: false
  hidden: false
  id: 644bf100ed08a4fdf4da0752
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T16:24:07.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>pip should be install arm64 pytorch automatically, Maybe you have
          enabled Rosetta for Terminal.app, and all command line operations will treat
          your system architecture as x86_64.</p>

          '
        raw: pip should be install arm64 pytorch automatically, Maybe you have enabled
          Rosetta for Terminal.app, and all command line operations will treat your
          system architecture as x86_64.
        updatedAt: '2023-04-28T16:24:07.646Z'
      numEdits: 0
      reactions: []
    id: 644bf327194e124dacb61c24
    type: comment
  author: andykoko
  content: pip should be install arm64 pytorch automatically, Maybe you have enabled
    Rosetta for Terminal.app, and all command line operations will treat your system
    architecture as x86_64.
  created_at: 2023-04-28 15:24:07+00:00
  edited: false
  hidden: false
  id: 644bf327194e124dacb61c24
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T16:28:23.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: '<p>That''s not it, do you have torch installed and those libraries
          are arm64?</p>

          '
        raw: That's not it, do you have torch installed and those libraries are arm64?
        updatedAt: '2023-04-28T16:28:23.999Z'
      numEdits: 0
      reactions: []
    id: 644bf427194e124dacb63d09
    type: comment
  author: GuiyeC
  content: That's not it, do you have torch installed and those libraries are arm64?
  created_at: 2023-04-28 15:28:23+00:00
  edited: false
  hidden: false
  id: 644bf427194e124dacb63d09
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T16:36:24.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: "<p>I checked my torch v2.0.0, it's arm64, and the libtorch_cpu.dylib\
          \ file size only 169\u2006MB.</p>\n"
        raw: "I checked my torch v2.0.0, it's arm64, and the libtorch_cpu.dylib file\
          \ size only 169\u2006MB."
        updatedAt: '2023-04-28T16:36:24.640Z'
      numEdits: 0
      reactions: []
    id: 644bf60845e79023c7d9e987
    type: comment
  author: andykoko
  content: "I checked my torch v2.0.0, it's arm64, and the libtorch_cpu.dylib file\
    \ size only 169\u2006MB."
  created_at: 2023-04-28 15:36:24+00:00
  edited: false
  hidden: false
  id: 644bf60845e79023c7d9e987
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T16:45:38.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: '<p>Okay, found it! It was my conda version all this time, I think you
          just saved me a loooot of time, I will try cleaning this up, getting this
          working again and generating a new version. Thank you for bringing this
          up!</p>

          '
        raw: Okay, found it! It was my conda version all this time, I think you just
          saved me a loooot of time, I will try cleaning this up, getting this working
          again and generating a new version. Thank you for bringing this up!
        updatedAt: '2023-04-28T16:45:38.717Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F92F"
        users:
        - Gomeo
    id: 644bf832194e124dacb6d8fd
    type: comment
  author: GuiyeC
  content: Okay, found it! It was my conda version all this time, I think you just
    saved me a loooot of time, I will try cleaning this up, getting this working again
    and generating a new version. Thank you for bringing this up!
  created_at: 2023-04-28 15:45:38+00:00
  edited: false
  hidden: false
  id: 644bf832194e124dacb6d8fd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T17:06:20.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>There seems to be a small problem on GuernikaModelConverter.<br>A
          512x768 model was selected in Guernika.app. The picture box on the left
          is wrong horizontal, and it returns to vertical when the model is loaded.<br>This
          model use GuernikaModelConverter to convert from safetensors to coreml,<br>However,
          there is no such problem in convert a model from diffusers to coreml.</p>

          '
        raw: 'There seems to be a small problem on GuernikaModelConverter.

          A 512x768 model was selected in Guernika.app. The picture box on the left
          is wrong horizontal, and it returns to vertical when the model is loaded.

          This model use GuernikaModelConverter to convert from safetensors to coreml,

          However, there is no such problem in convert a model from diffusers to coreml.'
        updatedAt: '2023-04-28T17:06:20.923Z'
      numEdits: 0
      reactions: []
    id: 644bfd0c194e124dacb798ee
    type: comment
  author: andykoko
  content: 'There seems to be a small problem on GuernikaModelConverter.

    A 512x768 model was selected in Guernika.app. The picture box on the left is wrong
    horizontal, and it returns to vertical when the model is loaded.

    This model use GuernikaModelConverter to convert from safetensors to coreml,

    However, there is no such problem in convert a model from diffusers to coreml.'
  created_at: 2023-04-28 16:06:20+00:00
  edited: false
  hidden: false
  id: 644bfd0c194e124dacb798ee
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-28T17:46:22.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;andykoko&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/andykoko\">@<span class=\"\
          underline\">andykoko</span></a></span>\n\n\t</span></span> could you test\
          \ <a href=\"https://huggingface.co/Guernika/CoreMLStableDiffusion/blob/main/GuernikaModelConverter_arm.dmg\"\
          >this</a> version and let me know if it's working?</p>\n<p>Also, did you\
          \ set a custom size when converting or was it the default size of the model?\
          \ It shouldn't be doing anything different if loading from safetensors or\
          \ not.</p>\n"
        raw: '@andykoko could you test [this](https://huggingface.co/Guernika/CoreMLStableDiffusion/blob/main/GuernikaModelConverter_arm.dmg)
          version and let me know if it''s working?


          Also, did you set a custom size when converting or was it the default size
          of the model? It shouldn''t be doing anything different if loading from
          safetensors or not.'
        updatedAt: '2023-04-28T17:46:22.364Z'
      numEdits: 0
      reactions: []
    id: 644c066e45e79023c7dcc190
    type: comment
  author: GuiyeC
  content: '@andykoko could you test [this](https://huggingface.co/Guernika/CoreMLStableDiffusion/blob/main/GuernikaModelConverter_arm.dmg)
    version and let me know if it''s working?


    Also, did you set a custom size when converting or was it the default size of
    the model? It shouldn''t be doing anything different if loading from safetensors
    or not.'
  created_at: 2023-04-28 16:46:22+00:00
  edited: false
  hidden: false
  id: 644c066e45e79023c7dcc190
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-28T18:29:01.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>I just tested the latest GuernikaModelConverter_arm,<br>I converted
          a safetensors model, use custom size 768x512,<br>It only takes 11 minutes
          to complete on M1,  And the correct scale picture box is displayed in Guernika.app.<br>The
          old x86_64 version takes about 1 hour to convert.<br>Thank you GuiyeC</p>

          '
        raw: "I just tested the latest GuernikaModelConverter_arm,\nI converted a\
          \ safetensors model, use custom size 768x512, \nIt only takes 11 minutes\
          \ to complete on M1,  And the correct scale picture box is displayed in\
          \ Guernika.app.\nThe old x86_64 version takes about 1 hour to convert.\n\
          Thank you GuiyeC"
        updatedAt: '2023-04-28T18:29:01.802Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F917"
        users:
        - Gomeo
        - ZProphete
      - count: 1
        reaction: "\U0001F91D"
        users:
        - Gomeo
    id: 644c106d194e124dacbaa3ae
    type: comment
  author: andykoko
  content: "I just tested the latest GuernikaModelConverter_arm,\nI converted a safetensors\
    \ model, use custom size 768x512, \nIt only takes 11 minutes to complete on M1,\
    \  And the correct scale picture box is displayed in Guernika.app.\nThe old x86_64\
    \ version takes about 1 hour to convert.\nThank you GuiyeC"
  created_at: 2023-04-28 17:29:01+00:00
  edited: false
  hidden: false
  id: 644c106d194e124dacbaa3ae
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-30T12:05:11.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>Bug report:<br>The ControlNet model converted from diffusers and
          checkpoint cannot be recognized by Guernika.app.<br>I found that the reason
          is that the guernika.json file lacks key: "method",<br>Manually add <code>"method":
          "depth",</code> and then  recognized by Guernika.app.</p>

          '
        raw: 'Bug report:

          The ControlNet model converted from diffusers and checkpoint cannot be recognized
          by Guernika.app.

          I found that the reason is that the guernika.json file lacks key: "method",

          Manually add `"method": "depth",` and then  recognized by Guernika.app.'
        updatedAt: '2023-04-30T12:05:11.932Z'
      numEdits: 0
      reactions: []
    id: 644e5977bf9683cba45da0e8
    type: comment
  author: andykoko
  content: 'Bug report:

    The ControlNet model converted from diffusers and checkpoint cannot be recognized
    by Guernika.app.

    I found that the reason is that the guernika.json file lacks key: "method",

    Manually add `"method": "depth",` and then  recognized by Guernika.app.'
  created_at: 2023-04-30 11:05:11+00:00
  edited: false
  hidden: false
  id: 644e5977bf9683cba45da0e8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-04-30T12:43:51.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;andykoko&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/andykoko\">@<span class=\"\
          underline\">andykoko</span></a></span>\n\n\t</span></span> What do you mean\
          \ it cannot be recognized? It should still work but unless the \"method\"\
          \ is set to \"depth\" it won't do the preprocessing of generating the depth\
          \ map.</p>\n<p>The method is recognized based on the name of the ControlNet\
          \ (diffusers folder or checkpoint file), it has to have \"depth\" on its\
          \ name. Can you share what checkpoint ere you trying to convert?</p>\n"
        raw: '@andykoko What do you mean it cannot be recognized? It should still
          work but unless the "method" is set to "depth" it won''t do the preprocessing
          of generating the depth map.


          The method is recognized based on the name of the ControlNet (diffusers
          folder or checkpoint file), it has to have "depth" on its name. Can you
          share what checkpoint ere you trying to convert?'
        updatedAt: '2023-04-30T12:43:51.919Z'
      numEdits: 0
      reactions: []
    id: 644e6287ddf20748b0554ed8
    type: comment
  author: GuiyeC
  content: '@andykoko What do you mean it cannot be recognized? It should still work
    but unless the "method" is set to "depth" it won''t do the preprocessing of generating
    the depth map.


    The method is recognized based on the name of the ControlNet (diffusers folder
    or checkpoint file), it has to have "depth" on its name. Can you share what checkpoint
    ere you trying to convert?'
  created_at: 2023-04-30 11:43:51+00:00
  edited: false
  hidden: false
  id: 644e6287ddf20748b0554ed8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-04-30T14:31:15.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>Since you only provide controlnet 512x512, it was downloaded from
          lllyasviel/sd-controlnet-canny.<br>I don''t know that you check the type
          according to the name of the folder. I used to do it like this:<br>For example,
          I named the diffusers folder to "Canny", Includ config.json and diffusion_pytorch_model.bin.<br>
          and there is no "method": "canny" in guernika.json after conversion.</p>

          <p>Is the Preprocess function incompatible with 512x768 or 768x512 scale?<br>The
          model is 512x768. After opening Preprocess, the picture will be automatically
          cropped to 1:1.<br>Is Preprocess a must? After I turn it off, it seems to
          work normally.</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/Nw8EzJIpdo7tyXwarix8f.png"><img
          alt="22.png" src="https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/Nw8EzJIpdo7tyXwarix8f.png"></a></p>

          '
        raw: "Since you only provide controlnet 512x512, it was downloaded from lllyasviel/sd-controlnet-canny.\n\
          I don't know that you check the type according to the name of the folder.\
          \ I used to do it like this:\nFor example, I named the diffusers folder\
          \ to \"Canny\", Includ config.json and diffusion_pytorch_model.bin.\n and\
          \ there is no \"method\": \"canny\" in guernika.json after conversion.\n\
          \n\nIs the Preprocess function incompatible with 512x768 or 768x512 scale?\n\
          The model is 512x768. After opening Preprocess, the picture will be automatically\
          \ cropped to 1:1.\nIs Preprocess a must? After I turn it off, it seems to\
          \ work normally.\n\n![22.png](https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/Nw8EzJIpdo7tyXwarix8f.png)"
        updatedAt: '2023-04-30T14:31:15.209Z'
      numEdits: 0
      reactions: []
    id: 644e7bb3cf72e60a5b7a9bb2
    type: comment
  author: andykoko
  content: "Since you only provide controlnet 512x512, it was downloaded from lllyasviel/sd-controlnet-canny.\n\
    I don't know that you check the type according to the name of the folder. I used\
    \ to do it like this:\nFor example, I named the diffusers folder to \"Canny\"\
    , Includ config.json and diffusion_pytorch_model.bin.\n and there is no \"method\"\
    : \"canny\" in guernika.json after conversion.\n\n\nIs the Preprocess function\
    \ incompatible with 512x768 or 768x512 scale?\nThe model is 512x768. After opening\
    \ Preprocess, the picture will be automatically cropped to 1:1.\nIs Preprocess\
    \ a must? After I turn it off, it seems to work normally.\n\n![22.png](https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/Nw8EzJIpdo7tyXwarix8f.png)"
  created_at: 2023-04-30 13:31:15+00:00
  edited: false
  hidden: false
  id: 644e7bb3cf72e60a5b7a9bb2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-06-09T19:26:30.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9698288440704346
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;andykoko&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/andykoko\">@<span class=\"\
          underline\">andykoko</span></a></span>\n\n\t</span></span> sorry for the\
          \ late response, I was working on updating the core to allow loading on\
          \ demand, improve memory management, support for multiple ControlNets at\
          \ the same time...<br>I did also notice a bug where the image was not being\
          \ preprocessed correctly, that's why it may seem that it's not doing anything\
          \ different, that should be working now with support for other aspect ratios\
          \ in the latest version of Guernika 5.0.0.</p>\n<p>About the method being\
          \ recognized, I could add a selector in the Guernika Model Converter, I\
          \ have to check because I've been working with more ControlNets now and\
          \ there are a lot more now, so I might have to think something different\
          \ or try to preprocess other methods too.</p>\n"
        raw: '@andykoko sorry for the late response, I was working on updating the
          core to allow loading on demand, improve memory management, support for
          multiple ControlNets at the same time...

          I did also notice a bug where the image was not being preprocessed correctly,
          that''s why it may seem that it''s not doing anything different, that should
          be working now with support for other aspect ratios in the latest version
          of Guernika 5.0.0.


          About the method being recognized, I could add a selector in the Guernika
          Model Converter, I have to check because I''ve been working with more ControlNets
          now and there are a lot more now, so I might have to think something different
          or try to preprocess other methods too.'
        updatedAt: '2023-06-09T19:26:30.729Z'
      numEdits: 0
      reactions: []
    id: 64837ce6ce0704c450fa9bf6
    type: comment
  author: GuiyeC
  content: '@andykoko sorry for the late response, I was working on updating the core
    to allow loading on demand, improve memory management, support for multiple ControlNets
    at the same time...

    I did also notice a bug where the image was not being preprocessed correctly,
    that''s why it may seem that it''s not doing anything different, that should be
    working now with support for other aspect ratios in the latest version of Guernika
    5.0.0.


    About the method being recognized, I could add a selector in the Guernika Model
    Converter, I have to check because I''ve been working with more ControlNets now
    and there are a lot more now, so I might have to think something different or
    try to preprocess other methods too.'
  created_at: 2023-06-09 18:26:30+00:00
  edited: false
  hidden: false
  id: 64837ce6ce0704c450fa9bf6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-06-09T20:14:51.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9132997393608093
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;GuiyeC&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/GuiyeC\">@<span class=\"\
          underline\">GuiyeC</span></a></span>\n\n\t</span></span>  Thanks, I have\
          \ seen the results of your fix in Guernika 5.0. The design of automatic\
          \ screening and model matching ControlNet is great.<br>However, it seems\
          \ that the program often crashes, mainly when clicking to switch between\
          \ different pictures, and the model is not running at this time.</p>\n<p>In\
          \ addition, GuernikaModelConverter does not  to be able to convert the inpainting\
          \ model in safetensors format. the reason is the diffusers package cannot\
          \ be recognized. I use the py script to add the \"--original_config_file\
          \ ./v1-inpainting-inference.yaml\" parameter, convert the safetensors to\
          \ diffusers, Then GuernikaModelConverter can convert the inpainting model.</p>\n"
        raw: '@GuiyeC  Thanks, I have seen the results of your fix in Guernika 5.0.
          The design of automatic screening and model matching ControlNet is great.

          However, it seems that the program often crashes, mainly when clicking to
          switch between different pictures, and the model is not running at this
          time.


          In addition, GuernikaModelConverter does not  to be able to convert the
          inpainting model in safetensors format. the reason is the diffusers package
          cannot be recognized. I use the py script to add the "--original_config_file
          ./v1-inpainting-inference.yaml" parameter, convert the safetensors to diffusers,
          Then GuernikaModelConverter can convert the inpainting model.'
        updatedAt: '2023-06-09T20:14:51.685Z'
      numEdits: 0
      reactions: []
    id: 6483883bf1cd4e357aee8d6d
    type: comment
  author: andykoko
  content: '@GuiyeC  Thanks, I have seen the results of your fix in Guernika 5.0.
    The design of automatic screening and model matching ControlNet is great.

    However, it seems that the program often crashes, mainly when clicking to switch
    between different pictures, and the model is not running at this time.


    In addition, GuernikaModelConverter does not  to be able to convert the inpainting
    model in safetensors format. the reason is the diffusers package cannot be recognized.
    I use the py script to add the "--original_config_file ./v1-inpainting-inference.yaml"
    parameter, convert the safetensors to diffusers, Then GuernikaModelConverter can
    convert the inpainting model.'
  created_at: 2023-06-09 19:14:51+00:00
  edited: false
  hidden: false
  id: 6483883bf1cd4e357aee8d6d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
      fullname: Guillermo Cique
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: GuiyeC
      type: user
    createdAt: '2023-06-09T20:18:19.000Z'
    data:
      edited: false
      editors:
      - GuiyeC
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8439661264419556
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672782907557-6313af200b24eab4746e7d34.jpeg?w=200&h=200&f=face
          fullname: Guillermo Cique
          isHf: false
          isPro: false
          name: GuiyeC
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;andykoko&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/andykoko\">@<span class=\"\
          underline\">andykoko</span></a></span>\n\n\t</span></span> what do you mean\
          \ it crashes when switching different pictures? the input of the ControlNet?\
          \ if you give me steps to reproduce it I might be able to fix it \U0001F64F\
          </p>\n<p>As for the GuernikaModelConverter, if you give the yaml file the\
          \ same name as the safetensors I believe it should recognize the correct\
          \ configuration, for example:</p>\n<p>InpaintingModel.safetensors<br>InapintingModel.yaml</p>\n\
          <p>They both have to be together in the same folder.</p>\n"
        raw: "@andykoko what do you mean it crashes when switching different pictures?\
          \ the input of the ControlNet? if you give me steps to reproduce it I might\
          \ be able to fix it \U0001F64F\n\nAs for the GuernikaModelConverter, if\
          \ you give the yaml file the same name as the safetensors I believe it should\
          \ recognize the correct configuration, for example:\n\nInpaintingModel.safetensors\n\
          InapintingModel.yaml\n\nThey both have to be together in the same folder."
        updatedAt: '2023-06-09T20:18:19.453Z'
      numEdits: 0
      reactions: []
    id: 6483890bc7b71dcf8aaffcb9
    type: comment
  author: GuiyeC
  content: "@andykoko what do you mean it crashes when switching different pictures?\
    \ the input of the ControlNet? if you give me steps to reproduce it I might be\
    \ able to fix it \U0001F64F\n\nAs for the GuernikaModelConverter, if you give\
    \ the yaml file the same name as the safetensors I believe it should recognize\
    \ the correct configuration, for example:\n\nInpaintingModel.safetensors\nInapintingModel.yaml\n\
    \nThey both have to be together in the same folder."
  created_at: 2023-06-09 19:18:19+00:00
  edited: false
  hidden: false
  id: 6483890bc7b71dcf8aaffcb9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
      fullname: andykoko
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: andykoko
      type: user
    createdAt: '2023-06-09T20:43:12.000Z'
    data:
      edited: false
      editors:
      - andykoko
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8946999311447144
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/321ed23b7cfeeed08c2b408b6a6898c9.svg
          fullname: andykoko
          isHf: false
          isPro: false
          name: andykoko
          type: user
        html: '<p>Sorry, I haven''t been able to reproduce the crash for the time
          being. I uploaded the operation video. Sometimes it will get stuck for 3-5
          seconds when switching pictures, and sometimes it will crash.</p>

          <p><video class="!max-w-full" controls="" src="https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/iXUbsokJUQk9mID6YfoDz.qt"></video></p>'
        raw: 'Sorry, I haven''t been able to reproduce the crash for the time being.
          I uploaded the operation video. Sometimes it will get stuck for 3-5 seconds
          when switching pictures, and sometimes it will crash.

          https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/iXUbsokJUQk9mID6YfoDz.qt'
        updatedAt: '2023-06-09T20:43:12.292Z'
      numEdits: 0
      reactions: []
    id: 64838ee0f1cd4e357af1028c
    type: comment
  author: andykoko
  content: 'Sorry, I haven''t been able to reproduce the crash for the time being.
    I uploaded the operation video. Sometimes it will get stuck for 3-5 seconds when
    switching pictures, and sometimes it will crash.

    https://cdn-uploads.huggingface.co/production/uploads/63f75705bd28622c9b97653a/iXUbsokJUQk9mID6YfoDz.qt'
  created_at: 2023-06-09 19:43:12+00:00
  edited: false
  hidden: false
  id: 64838ee0f1cd4e357af1028c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 18
repo_id: Guernika/CoreMLStableDiffusion
repo_type: model
status: open
target_branch: null
title: GuernikaModelConverter for arm64 please
