!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Vinno97
conflicting_files: []
created_at: 2023-08-14 08:32:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/75286684bd78f4baf4aa79bc9cc1e765.svg
      fullname: Vincent Brouwers
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vinno97
      type: user
    createdAt: '2023-08-14T09:32:39.000Z'
    data:
      edited: false
      editors:
      - Vinno97
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7068089246749878
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/75286684bd78f4baf4aa79bc9cc1e765.svg
          fullname: Vincent Brouwers
          isHf: false
          isPro: false
          name: Vinno97
          type: user
        html: "<p>CodeGen25Tokenizer correctly implements the <code>_decode</code>\
          \ interface from <code>PreTrainedTokenizer</code> with the following signature</p>\n\
          <pre><code class=\"language-py\"><span class=\"hljs-keyword\">def</span>\
          \ <span class=\"hljs-title function_\">_decode</span>(<span class=\"hljs-params\"\
          >self, token_ids: <span class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\"\
          >int</span>], ...,</span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n\
          \   ...\n</code></pre>\n<p><code>PreTrainedTokenizer</code>, however,  incorrectly\
          \ shadows the <code>_decode</code> function of its base class <code>PreTrainedTokenizerBase</code>,\
          \ which is defined like this:</p>\n<pre><code class=\"language-py\"><span\
          \ class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\"\
          >_decode</span>(<span class=\"hljs-params\">self, token_ids: <span class=\"\
          hljs-type\">Union</span>[<span class=\"hljs-built_in\">int</span>, <span\
          \ class=\"hljs-type\">List</span>[<span class=\"hljs-built_in\">int</span>]],\
          \ ...,</span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n   ...\n\
          </code></pre>\n<p>As a result, CodeGen25Tokenizer  cannot be used as a drop-in\
          \ tokenizer in some codebases (like <a rel=\"nofollow\" href=\"https://github.com/huggingface/text-generation-inference\"\
          >TGI</a>). This fix doesn't break any previous behaviour, but simply allows\
          \ <code>decode</code> to also accept plain <code>int</code> values instead\
          \ of only <code>list[int]</code>.</p>\n"
        raw: "CodeGen25Tokenizer correctly implements the `_decode` interface from\
          \ `PreTrainedTokenizer` with the following signature\n\n```py\ndef _decode(self,\
          \ token_ids: List[int], ...,) -> str:\n   ...\n```\n\n`PreTrainedTokenizer`,\
          \ however,  incorrectly shadows the `_decode` function of its base class\
          \ `PreTrainedTokenizerBase`, which is defined like this:\n\n```py\ndef _decode(self,\
          \ token_ids: Union[int, List[int]], ...,) -> str:\n   ...\n```\n\nAs a result,\
          \ CodeGen25Tokenizer  cannot be used as a drop-in tokenizer in some codebases\
          \ (like [TGI](https://github.com/huggingface/text-generation-inference)).\
          \ This fix doesn't break any previous behaviour, but simply allows `decode`\
          \ to also accept plain `int` values instead of only `list[int]`."
        updatedAt: '2023-08-14T09:32:39.263Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - Narsil
        - lanking
    id: 64d9f4b7d1a2566da4c23c40
    type: comment
  author: Vinno97
  content: "CodeGen25Tokenizer correctly implements the `_decode` interface from `PreTrainedTokenizer`\
    \ with the following signature\n\n```py\ndef _decode(self, token_ids: List[int],\
    \ ...,) -> str:\n   ...\n```\n\n`PreTrainedTokenizer`, however,  incorrectly shadows\
    \ the `_decode` function of its base class `PreTrainedTokenizerBase`, which is\
    \ defined like this:\n\n```py\ndef _decode(self, token_ids: Union[int, List[int]],\
    \ ...,) -> str:\n   ...\n```\n\nAs a result, CodeGen25Tokenizer  cannot be used\
    \ as a drop-in tokenizer in some codebases (like [TGI](https://github.com/huggingface/text-generation-inference)).\
    \ This fix doesn't break any previous behaviour, but simply allows `decode` to\
    \ also accept plain `int` values instead of only `list[int]`."
  created_at: 2023-08-14 08:32:39+00:00
  edited: false
  hidden: false
  id: 64d9f4b7d1a2566da4c23c40
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/75286684bd78f4baf4aa79bc9cc1e765.svg
      fullname: Vincent Brouwers
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vinno97
      type: user
    createdAt: '2023-08-14T09:32:40.000Z'
    data:
      oid: 1d07fb39189bd0bb45500bca7dfce4107eda74fb
      parents:
      - 08bd09d67169e0eeb6f290479fa382bbfa05b01f
      subject: Make _decode compatible with PreTrainedTokenizerBase
    id: 64d9f4b80000000000000000
    type: commit
  author: Vinno97
  created_at: 2023-08-14 08:32:40+00:00
  id: 64d9f4b80000000000000000
  oid: 1d07fb39189bd0bb45500bca7dfce4107eda74fb
  summary: Make _decode compatible with PreTrainedTokenizerBase
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648750941188-619aa4e2198a95c9b962252e.jpeg?w=200&h=200&f=face
      fullname: Hiroaki Hayashi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: rooa
      type: user
    createdAt: '2023-08-18T22:58:46.000Z'
    data:
      edited: false
      editors:
      - rooa
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6997447609901428
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648750941188-619aa4e2198a95c9b962252e.jpeg?w=200&h=200&f=face
          fullname: Hiroaki Hayashi
          isHf: false
          isPro: false
          name: rooa
          type: user
        html: "<p>Great catch and solution. Thank you <span data-props=\"{&quot;user&quot;:&quot;Vinno97&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Vinno97\"\
          >@<span class=\"underline\">Vinno97</span></a></span>\n\n\t</span></span>\
          \ </p>\n"
        raw: 'Great catch and solution. Thank you @Vinno97 '
        updatedAt: '2023-08-18T22:58:46.061Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64dff7a6bfcad47efd7dfca0
    id: 64dff7a6bfcad47efd7dfc9b
    type: comment
  author: rooa
  content: 'Great catch and solution. Thank you @Vinno97 '
  created_at: 2023-08-18 21:58:46+00:00
  edited: false
  hidden: false
  id: 64dff7a6bfcad47efd7dfc9b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648750941188-619aa4e2198a95c9b962252e.jpeg?w=200&h=200&f=face
      fullname: Hiroaki Hayashi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: rooa
      type: user
    createdAt: '2023-08-18T22:58:46.000Z'
    data:
      status: merged
    id: 64dff7a6bfcad47efd7dfca0
    type: status-change
  author: rooa
  created_at: 2023-08-18 21:58:46+00:00
  id: 64dff7a6bfcad47efd7dfca0
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: d4dc9dd90e8b23d5411e6d970e3a11e88dc5c2bc
num: 8
repo_id: Salesforce/codegen25-7b-multi
repo_type: model
status: merged
target_branch: refs/heads/main
title: Make _decode compatible with PreTrainedTokenizerBase
