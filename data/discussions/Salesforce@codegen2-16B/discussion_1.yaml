!!python/object:huggingface_hub.community.DiscussionWithDetails
author: nickhugs
conflicting_files: null
created_at: 2023-05-05 12:36:03+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/02a70c7e57d742b06b4508616c5bfc72.svg
      fullname: Nick Hill
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nickhugs
      type: user
    createdAt: '2023-05-05T13:36:03.000Z'
    data:
      edited: false
      editors:
      - nickhugs
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/02a70c7e57d742b06b4508616c5bfc72.svg
          fullname: Nick Hill
          isHf: false
          isPro: false
          name: nickhugs
          type: user
        html: "<p>The <code>modeling_codegen.py</code> and <code>configuration_codegen.py</code>\
          \ in this repo appear to just be older versions of those files from the\
          \ transformers library. In particular they don't include recent fixes to\
          \ <code>position_ids</code> support (for handling variable left-padding\
          \ properly).</p>\n<p>Can this section be removed from <code>config.json</code>\
          \ (and the py files can then be removed too)?</p>\n<pre><code class=\"language-json\"\
          >  <span class=\"hljs-attr\">\"auto_map\"</span><span class=\"hljs-punctuation\"\
          >:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"\
          hljs-attr\">\"AutoConfig\"</span><span class=\"hljs-punctuation\">:</span>\
          \ <span class=\"hljs-string\">\"configuration_codegen.CodeGenConfig\"</span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          AutoModel\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"\
          hljs-string\">\"modeling_codegen.CodeGenModel\"</span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"AutoModelForCausalLM\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"modeling_codegen.CodeGenForCausalLM\"\
          </span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\"\
          >,</span>\n</code></pre>\n"
        raw: "The `modeling_codegen.py` and `configuration_codegen.py` in this repo\
          \ appear to just be older versions of those files from the transformers\
          \ library. In particular they don't include recent fixes to `position_ids`\
          \ support (for handling variable left-padding properly).\r\n\r\nCan this\
          \ section be removed from `config.json` (and the py files can then be removed\
          \ too)?\r\n```json\r\n  \"auto_map\": {\r\n    \"AutoConfig\": \"configuration_codegen.CodeGenConfig\"\
          ,\r\n    \"AutoModel\": \"modeling_codegen.CodeGenModel\",\r\n    \"AutoModelForCausalLM\"\
          : \"modeling_codegen.CodeGenForCausalLM\"\r\n  },\r\n```"
        updatedAt: '2023-05-05T13:36:03.406Z'
      numEdits: 0
      reactions: []
    id: 64550643fbe00f9e73bf4456
    type: comment
  author: nickhugs
  content: "The `modeling_codegen.py` and `configuration_codegen.py` in this repo\
    \ appear to just be older versions of those files from the transformers library.\
    \ In particular they don't include recent fixes to `position_ids` support (for\
    \ handling variable left-padding properly).\r\n\r\nCan this section be removed\
    \ from `config.json` (and the py files can then be removed too)?\r\n```json\r\n\
    \  \"auto_map\": {\r\n    \"AutoConfig\": \"configuration_codegen.CodeGenConfig\"\
    ,\r\n    \"AutoModel\": \"modeling_codegen.CodeGenModel\",\r\n    \"AutoModelForCausalLM\"\
    : \"modeling_codegen.CodeGenForCausalLM\"\r\n  },\r\n```"
  created_at: 2023-05-05 12:36:03+00:00
  edited: false
  hidden: false
  id: 64550643fbe00f9e73bf4456
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/644fac0ce1d7a97f3b653ab1/fottSAPFrJdKeMW2UJv_l.jpeg?w=200&h=200&f=face
      fullname: Michael
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: michaelfeil
      type: user
    createdAt: '2023-05-20T15:35:01.000Z'
    data:
      edited: false
      editors:
      - michaelfeil
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/644fac0ce1d7a97f3b653ab1/fottSAPFrJdKeMW2UJv_l.jpeg?w=200&h=200&f=face
          fullname: Michael
          isHf: false
          isPro: false
          name: michaelfeil
          type: user
        html: '<p>I saw some difference in <code>mp_num = 4</code>, but the provision
          of the custom code is confusing too me as well.</p>

          '
        raw: I saw some difference in ```mp_num = 4```, but the provision of the custom
          code is confusing too me as well.
        updatedAt: '2023-05-20T15:35:01.699Z'
      numEdits: 0
      reactions: []
    id: 6468e8a5511e5cdeb0e8a72f
    type: comment
  author: michaelfeil
  content: I saw some difference in ```mp_num = 4```, but the provision of the custom
    code is confusing too me as well.
  created_at: 2023-05-20 14:35:01+00:00
  edited: false
  hidden: false
  id: 6468e8a5511e5cdeb0e8a72f
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Salesforce/codegen2-16B
repo_type: model
status: open
target_branch: null
title: Why custom modeling code?
