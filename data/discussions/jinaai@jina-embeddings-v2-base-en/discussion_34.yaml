!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ggioetto
conflicting_files: null
created_at: 2023-12-13 10:42:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/sz--sZSRqGX0hLqPB75k2.jpeg?w=200&h=200&f=face
      fullname: Gabriele Gioetto
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ggioetto
      type: user
    createdAt: '2023-12-13T10:42:38.000Z'
    data:
      edited: false
      editors:
      - ggioetto
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8400095701217651
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/sz--sZSRqGX0hLqPB75k2.jpeg?w=200&h=200&f=face
          fullname: Gabriele Gioetto
          isHf: false
          isPro: false
          name: ggioetto
          type: user
        html: "<p>Hello,<br>I want first to thank you for the amazing project and\
          \ for releasing the weights of the model.<br>I have a doubt</p>\n<p>If I\
          \ try to run the example code</p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-keyword\">from</span> transformers <span class=\"hljs-keyword\"\
          >import</span> AutoModel\n\nmodel = AutoModel.from_pretrained(\n    <span\
          \ class=\"hljs-string\">\"jinaai/jina-embeddings-v2-base-en\"</span>, trust_remote_code=<span\
          \ class=\"hljs-literal\">True</span>\n)  <span class=\"hljs-comment\">#\
          \ trust_remote_code is needed to use the encode method</span>\nembeddings\
          \ = model.encode(\n    [<span class=\"hljs-string\">\"How is the weather\
          \ today?\"</span>, <span class=\"hljs-string\">\"What is the current weather\
          \ like today?\"</span>]\n)\n\n<span class=\"hljs-built_in\">print</span>(embeddings.shape)\n\
          </code></pre>\n<p>I get an output with shape <code>(2, 768)</code>, while\
          \ on the <a href=\"https://huggingface.co/spaces/mteb/leaderboard\">MTEB\
          \ leaderboard</a> the <code>embeddings dimension</code> is 512.<br>Connected\
          \ with this, is there a reason why the pooling layer size is different from\
          \ the hidden size of the model?</p>\n<p>Thanks in advance for the help</p>\n"
        raw: "Hello,\r\nI want first to thank you for the amazing project and for\
          \ releasing the weights of the model.\r\nI have a doubt\r\n\r\nIf I try\
          \ to run the example code\r\n```python\r\nfrom transformers import AutoModel\r\
          \n\r\nmodel = AutoModel.from_pretrained(\r\n    \"jinaai/jina-embeddings-v2-base-en\"\
          , trust_remote_code=True\r\n)  # trust_remote_code is needed to use the\
          \ encode method\r\nembeddings = model.encode(\r\n    [\"How is the weather\
          \ today?\", \"What is the current weather like today?\"]\r\n)\r\n\r\nprint(embeddings.shape)\r\
          \n```\r\n\r\nI get an output with shape `(2, 768)`, while on the [MTEB leaderboard](https://huggingface.co/spaces/mteb/leaderboard)\
          \ the `embeddings dimension` is 512.\r\nConnected with this, is there a\
          \ reason why the pooling layer size is different from the hidden size of\
          \ the model?\r\n\r\nThanks in advance for the help"
        updatedAt: '2023-12-13T10:42:38.520Z'
      numEdits: 0
      reactions: []
    id: 65798a9ec8423342f8979fdd
    type: comment
  author: ggioetto
  content: "Hello,\r\nI want first to thank you for the amazing project and for releasing\
    \ the weights of the model.\r\nI have a doubt\r\n\r\nIf I try to run the example\
    \ code\r\n```python\r\nfrom transformers import AutoModel\r\n\r\nmodel = AutoModel.from_pretrained(\r\
    \n    \"jinaai/jina-embeddings-v2-base-en\", trust_remote_code=True\r\n)  # trust_remote_code\
    \ is needed to use the encode method\r\nembeddings = model.encode(\r\n    [\"\
    How is the weather today?\", \"What is the current weather like today?\"]\r\n\
    )\r\n\r\nprint(embeddings.shape)\r\n```\r\n\r\nI get an output with shape `(2,\
    \ 768)`, while on the [MTEB leaderboard](https://huggingface.co/spaces/mteb/leaderboard)\
    \ the `embeddings dimension` is 512.\r\nConnected with this, is there a reason\
    \ why the pooling layer size is different from the hidden size of the model?\r\
    \n\r\nThanks in advance for the help"
  created_at: 2023-12-13 10:42:38+00:00
  edited: false
  hidden: false
  id: 65798a9ec8423342f8979fdd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
      fullname: Bo Wang
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: bwang0911
      type: user
    createdAt: '2023-12-13T15:57:54.000Z'
    data:
      edited: false
      editors:
      - bwang0911
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8465786576271057
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
          fullname: Bo Wang
          isHf: false
          isPro: false
          name: bwang0911
          type: user
        html: "<p>hi <span data-props=\"{&quot;user&quot;:&quot;ggioetto&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ggioetto\"\
          >@<span class=\"underline\">ggioetto</span></a></span>\n\n\t</span></span>\
          \ thanks good catrch! Ill look into this, it is wired, the dimension should\
          \ be 768, not sure how it is 512 on MTEB.</p>\n<p>Our small outputs dim\
          \ of 512, while base, due to larger model size, produce 768.</p>\n"
        raw: 'hi @ggioetto thanks good catrch! Ill look into this, it is wired, the
          dimension should be 768, not sure how it is 512 on MTEB.


          Our small outputs dim of 512, while base, due to larger model size, produce
          768.'
        updatedAt: '2023-12-13T15:57:54.192Z'
      numEdits: 0
      reactions: []
    id: 6579d482b90b4221ec014335
    type: comment
  author: bwang0911
  content: 'hi @ggioetto thanks good catrch! Ill look into this, it is wired, the
    dimension should be 768, not sure how it is 512 on MTEB.


    Our small outputs dim of 512, while base, due to larger model size, produce 768.'
  created_at: 2023-12-13 15:57:54+00:00
  edited: false
  hidden: false
  id: 6579d482b90b4221ec014335
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64399cb9d45e8db3e28877c4/qtmSVmgH86jDkPBYVZ7B-.jpeg?w=200&h=200&f=face
      fullname: Thorold Tronrud
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ttronrud
      type: user
    createdAt: '2023-12-20T22:05:48.000Z'
    data:
      edited: false
      editors:
      - ttronrud
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9129890203475952
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64399cb9d45e8db3e28877c4/qtmSVmgH86jDkPBYVZ7B-.jpeg?w=200&h=200&f=face
          fullname: Thorold Tronrud
          isHf: false
          isPro: false
          name: ttronrud
          type: user
        html: '<p>It''s because your pooling config claims a word_embedding_dimension
          of 512. I''m not sure why, it doesn''t appear to actually <em>make</em>
          the output 512, but it does seem to affect whatever automated system records
          model info.</p>

          '
        raw: It's because your pooling config claims a word_embedding_dimension of
          512. I'm not sure why, it doesn't appear to actually *make* the output 512,
          but it does seem to affect whatever automated system records model info.
        updatedAt: '2023-12-20T22:05:48.928Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - Jackmin108
        - bwang0911
    id: 6583653c072be4f21cf21aaa
    type: comment
  author: ttronrud
  content: It's because your pooling config claims a word_embedding_dimension of 512.
    I'm not sure why, it doesn't appear to actually *make* the output 512, but it
    does seem to affect whatever automated system records model info.
  created_at: 2023-12-20 22:05:48+00:00
  edited: false
  hidden: false
  id: 6583653c072be4f21cf21aaa
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/634e2b60a00c472888747e4c/FGqQ1qcfN0pXZ9GgdRrBB.png?w=200&h=200&f=face
      fullname: Jack Min Ong
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jackmin108
      type: user
    createdAt: '2023-12-21T08:59:24.000Z'
    data:
      edited: false
      editors:
      - Jackmin108
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6264941096305847
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/634e2b60a00c472888747e4c/FGqQ1qcfN0pXZ9GgdRrBB.png?w=200&h=200&f=face
          fullname: Jack Min Ong
          isHf: false
          isPro: false
          name: Jackmin108
          type: user
        html: "<p>Thanks for pointing that out <span data-props=\"{&quot;user&quot;:&quot;ttronrud&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ttronrud\"\
          >@<span class=\"underline\">ttronrud</span></a></span>\n\n\t</span></span>\
          \ :)<br>Should be fixed by:<br><a href=\"https://huggingface.co/jinaai/jina-embeddings-v2-base-en/commit/7aef14b0840b7dded6c7e4ce28ff87f16071284d\"\
          >https://huggingface.co/jinaai/jina-embeddings-v2-base-en/commit/7aef14b0840b7dded6c7e4ce28ff87f16071284d</a></p>\n"
        raw: 'Thanks for pointing that out @ttronrud :)

          Should be fixed by:

          https://huggingface.co/jinaai/jina-embeddings-v2-base-en/commit/7aef14b0840b7dded6c7e4ce28ff87f16071284d'
        updatedAt: '2023-12-21T08:59:24.295Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - bwang0911
        - ttronrud
    id: 6583fe6ca4f176a57fab1be4
    type: comment
  author: Jackmin108
  content: 'Thanks for pointing that out @ttronrud :)

    Should be fixed by:

    https://huggingface.co/jinaai/jina-embeddings-v2-base-en/commit/7aef14b0840b7dded6c7e4ce28ff87f16071284d'
  created_at: 2023-12-21 08:59:24+00:00
  edited: false
  hidden: false
  id: 6583fe6ca4f176a57fab1be4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
      fullname: Bo Wang
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: bwang0911
      type: user
    createdAt: '2023-12-22T11:52:01.000Z'
    data:
      status: closed
    id: 65857861dde0b8de9ea306aa
    type: status-change
  author: bwang0911
  created_at: 2023-12-22 11:52:01+00:00
  id: 65857861dde0b8de9ea306aa
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 34
repo_id: jinaai/jina-embeddings-v2-base-en
repo_type: model
status: closed
target_branch: null
title: Embeddings dimension
