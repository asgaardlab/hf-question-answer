!!python/object:huggingface_hub.community.DiscussionWithDetails
author: herMaster
conflicting_files: null
created_at: 2023-11-08 10:11:43+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5a0dc02e135efdb1eec6523e067d532b.svg
      fullname: Devang Dinesh Pagare
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: herMaster
      type: user
    createdAt: '2023-11-08T10:11:43.000Z'
    data:
      edited: false
      editors:
      - herMaster
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.40401890873908997
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5a0dc02e135efdb1eec6523e067d532b.svg
          fullname: Devang Dinesh Pagare
          isHf: false
          isPro: false
          name: herMaster
          type: user
        html: '<p>I used the proper wrapper to download the model, but now I am getting
          the embedding_function error in Chromadb. I did -</p>

          <h2 id="loaded-the-jina-model--">loaded the jina model -</h2>

          <p>from langchain.embeddings import HuggingFaceEmbeddings</p>

          <p>model_name = "jinaai/jina-embeddings-v2-base-en"<br>model_kwargs = {''device'':
          ''cuda''}<br>encode_kwargs = {''normalize_embeddings'': True}<br>model =
          HuggingFaceEmbeddings(<br>model_name=model_name,<br>model_kwargs=model_kwargs,<br>encode_kwargs=encode_kwargs<br>)</p>

          <h2 id="chroma-settings--">chroma settings -</h2>

          <p>from chromadb.config import Settings</p>

          <p>CHROMA_SETTINGS = Settings(<br>anonymized_telemetry=False,<br>is_persistent=True,<br>)</p>

          <h2 id="creating-the-persist-directory--">Creating the persist directory
          -</h2>

          <p>persist_directory = ''db''<br>embedding = model</p>

          <p>vectordb = Chroma.from_documents(documents=texts,<br>embedding=embedding,<br>persist_directory=persist_directory,<br>client_settings=CHROMA_SETTINGS)</p>

          <h2 id="error-in-above-step--">error in above step -</h2>

          <p>Expected EmbeddingFunction.call to have the following signature: odict_keys([''self'',
          ''input'']), got odict_keys([''self'', ''args'', ''kwargs''])</p>

          '
        raw: "I used the proper wrapper to download the model, but now I am getting\
          \ the embedding_function error in Chromadb. I did -\r\n\r\n## loaded the\
          \ jina model -\r\nfrom langchain.embeddings import HuggingFaceEmbeddings\r\
          \n\r\nmodel_name = \"jinaai/jina-embeddings-v2-base-en\"\r\nmodel_kwargs\
          \ = {'device': 'cuda'}\r\nencode_kwargs = {'normalize_embeddings': True}\r\
          \nmodel = HuggingFaceEmbeddings(\r\nmodel_name=model_name,\r\nmodel_kwargs=model_kwargs,\r\
          \nencode_kwargs=encode_kwargs\r\n)\r\n\r\n## chroma settings -\r\nfrom chromadb.config\
          \ import Settings\r\n\r\nCHROMA_SETTINGS = Settings(\r\nanonymized_telemetry=False,\r\
          \nis_persistent=True,\r\n)\r\n\r\n## Creating the persist directory -\r\n\
          persist_directory = 'db'\r\nembedding = model\r\n\r\nvectordb = Chroma.from_documents(documents=texts,\r\
          \nembedding=embedding,\r\npersist_directory=persist_directory,\r\nclient_settings=CHROMA_SETTINGS)\r\
          \n\r\n## error in above step -\r\nExpected EmbeddingFunction.call to have\
          \ the following signature: odict_keys(['self', 'input']), got odict_keys(['self',\
          \ 'args', 'kwargs'])"
        updatedAt: '2023-11-08T10:11:43.846Z'
      numEdits: 0
      reactions: []
    id: 654b5edf8e2d35b3e94cd881
    type: comment
  author: herMaster
  content: "I used the proper wrapper to download the model, but now I am getting\
    \ the embedding_function error in Chromadb. I did -\r\n\r\n## loaded the jina\
    \ model -\r\nfrom langchain.embeddings import HuggingFaceEmbeddings\r\n\r\nmodel_name\
    \ = \"jinaai/jina-embeddings-v2-base-en\"\r\nmodel_kwargs = {'device': 'cuda'}\r\
    \nencode_kwargs = {'normalize_embeddings': True}\r\nmodel = HuggingFaceEmbeddings(\r\
    \nmodel_name=model_name,\r\nmodel_kwargs=model_kwargs,\r\nencode_kwargs=encode_kwargs\r\
    \n)\r\n\r\n## chroma settings -\r\nfrom chromadb.config import Settings\r\n\r\n\
    CHROMA_SETTINGS = Settings(\r\nanonymized_telemetry=False,\r\nis_persistent=True,\r\
    \n)\r\n\r\n## Creating the persist directory -\r\npersist_directory = 'db'\r\n\
    embedding = model\r\n\r\nvectordb = Chroma.from_documents(documents=texts,\r\n\
    embedding=embedding,\r\npersist_directory=persist_directory,\r\nclient_settings=CHROMA_SETTINGS)\r\
    \n\r\n## error in above step -\r\nExpected EmbeddingFunction.call to have the\
    \ following signature: odict_keys(['self', 'input']), got odict_keys(['self',\
    \ 'args', 'kwargs'])"
  created_at: 2023-11-08 10:11:43+00:00
  edited: false
  hidden: false
  id: 654b5edf8e2d35b3e94cd881
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64c23f6d569648a60737eddb/iZq7bp-yYaGl5VBVoN5Dg.jpeg?w=200&h=200&f=face
      fullname: Saba Sturua
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jupyterjazz
      type: user
    createdAt: '2023-11-09T11:01:53.000Z'
    data:
      edited: false
      editors:
      - jupyterjazz
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8963215947151184
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64c23f6d569648a60737eddb/iZq7bp-yYaGl5VBVoN5Dg.jpeg?w=200&h=200&f=face
          fullname: Saba Sturua
          isHf: false
          isPro: false
          name: jupyterjazz
          type: user
        html: '<p>closing this as it''s already discussed in <a href="https://huggingface.co/jinaai/jina-embeddings-v2-base-en/discussions/22">https://huggingface.co/jinaai/jina-embeddings-v2-base-en/discussions/22</a></p>

          '
        raw: closing this as it's already discussed in https://huggingface.co/jinaai/jina-embeddings-v2-base-en/discussions/22
        updatedAt: '2023-11-09T11:01:53.131Z'
      numEdits: 0
      reactions: []
      relatedEventId: 654cbc213faac39b29fbe3ac
    id: 654cbc213faac39b29fbe3ab
    type: comment
  author: jupyterjazz
  content: closing this as it's already discussed in https://huggingface.co/jinaai/jina-embeddings-v2-base-en/discussions/22
  created_at: 2023-11-09 11:01:53+00:00
  edited: false
  hidden: false
  id: 654cbc213faac39b29fbe3ab
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64c23f6d569648a60737eddb/iZq7bp-yYaGl5VBVoN5Dg.jpeg?w=200&h=200&f=face
      fullname: Saba Sturua
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jupyterjazz
      type: user
    createdAt: '2023-11-09T11:01:53.000Z'
    data:
      status: closed
    id: 654cbc213faac39b29fbe3ac
    type: status-change
  author: jupyterjazz
  created_at: 2023-11-09 11:01:53+00:00
  id: 654cbc213faac39b29fbe3ac
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 23
repo_id: jinaai/jina-embeddings-v2-base-en
repo_type: model
status: closed
target_branch: null
title: 'Expected EmbeddingFunction.__call__ to have the following signature: odict_keys([''self'',
  ''input'']), got odict_keys([''self'', ''args'', ''kwargs''])'
