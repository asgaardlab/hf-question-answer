!!python/object:huggingface_hub.community.DiscussionWithDetails
author: sugarExcess
conflicting_files: null
created_at: 2023-12-05 11:22:10+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf14b9051a02b035acfbc42a84be0b3.svg
      fullname: Mirko Tratturi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sugarExcess
      type: user
    createdAt: '2023-12-05T11:22:10.000Z'
    data:
      edited: true
      editors:
      - sugarExcess
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.756301999092102
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf14b9051a02b035acfbc42a84be0b3.svg
          fullname: Mirko Tratturi
          isHf: false
          isPro: false
          name: sugarExcess
          type: user
        html: '<p>The <code>last_hidden_state</code> of the model outputs arrays of
          shape <code>(batch_size, sequence_length, hidden_dim)</code>.<br>The <code>sequence_length</code>
          is 50 but from my understanding of the ViT paper it should be equal to the
          number of patches <code>224*224 / 16*16 = 196</code>.<br><a rel="nofollow"
          href="https://cdn-uploads.huggingface.co/production/uploads/656714d3890c3786d7e8633e/E-1ZvVcLrfjTg9Wejo4Nl.png"><img
          alt="Screenshot_20231205_121919.png" src="https://cdn-uploads.huggingface.co/production/uploads/656714d3890c3786d7e8633e/E-1ZvVcLrfjTg9Wejo4Nl.png"></a><br>I
          checked the <a rel="nofollow" href="https://github.com/facebookresearch/mae">original
          model</a> and there the <code>sequence_length</code> is indeed 196.<br>What
          am I missing?</p>

          '
        raw: "The `last_hidden_state` of the model outputs arrays of shape `(batch_size,\
          \ sequence_length, hidden_dim)`.\nThe `sequence_length` is 50 but from my\
          \ understanding of the ViT paper it should be equal to the number of patches\
          \ `224*224 / 16*16 = 196`.\n![Screenshot_20231205_121919.png](https://cdn-uploads.huggingface.co/production/uploads/656714d3890c3786d7e8633e/E-1ZvVcLrfjTg9Wejo4Nl.png)\
          \ \nI checked the [original model](https://github.com/facebookresearch/mae)\
          \ and there the `sequence_length` is indeed 196. \nWhat am I missing?"
        updatedAt: '2023-12-05T14:09:18.743Z'
      numEdits: 8
      reactions: []
    id: 656f07e22cd7a3e34815fc45
    type: comment
  author: sugarExcess
  content: "The `last_hidden_state` of the model outputs arrays of shape `(batch_size,\
    \ sequence_length, hidden_dim)`.\nThe `sequence_length` is 50 but from my understanding\
    \ of the ViT paper it should be equal to the number of patches `224*224 / 16*16\
    \ = 196`.\n![Screenshot_20231205_121919.png](https://cdn-uploads.huggingface.co/production/uploads/656714d3890c3786d7e8633e/E-1ZvVcLrfjTg9Wejo4Nl.png)\
    \ \nI checked the [original model](https://github.com/facebookresearch/mae) and\
    \ there the `sequence_length` is indeed 196. \nWhat am I missing?"
  created_at: 2023-12-05 11:22:10+00:00
  edited: true
  hidden: false
  id: 656f07e22cd7a3e34815fc45
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/w9jf0iSzRUrElgNWhr7Ug.png?w=200&h=200&f=face
      fullname: robin grapin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: perlis
      type: user
    createdAt: '2023-12-26T14:04:00.000Z'
    data:
      edited: false
      editors:
      - perlis
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8466690182685852
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/w9jf0iSzRUrElgNWhr7Ug.png?w=200&h=200&f=face
          fullname: robin grapin
          isHf: false
          isPro: false
          name: perlis
          type: user
        html: '<p>Hello, using the example furnished in the model card, I get :<br>print(outputs[''logits''].shape)</p>

          <blockquote>

          <blockquote>

          <blockquote>

          <p>torch.Size([1, 196, 768])<br>You may have been modifying the configuration
          or the input shape of your image is lower than the one expected, giving
          less patches than with 224*224</p>

          </blockquote>

          </blockquote>

          </blockquote>

          '
        raw: 'Hello, using the example furnished in the model card, I get :

          print(outputs[''logits''].shape)

          >>> torch.Size([1, 196, 768])

          You may have been modifying the configuration or the input shape of your
          image is lower than the one expected, giving less patches than with 224*224'
        updatedAt: '2023-12-26T14:04:00.085Z'
      numEdits: 0
      reactions: []
    id: 658add508ea79e4df4e63344
    type: comment
  author: perlis
  content: 'Hello, using the example furnished in the model card, I get :

    print(outputs[''logits''].shape)

    >>> torch.Size([1, 196, 768])

    You may have been modifying the configuration or the input shape of your image
    is lower than the one expected, giving less patches than with 224*224'
  created_at: 2023-12-26 14:04:00+00:00
  edited: false
  hidden: false
  id: 658add508ea79e4df4e63344
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
      fullname: Niels Rogge
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nielsr
      type: user
    createdAt: '2024-01-23T21:32:14.000Z'
    data:
      edited: false
      editors:
      - nielsr
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6620700359344482
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608042047613-5f1158120c833276f61f1a84.jpeg?w=200&h=200&f=face
          fullname: Niels Rogge
          isHf: true
          isPro: false
          name: nielsr
          type: user
        html: '<p>Hi,</p>

          <p>This is explained here: <a rel="nofollow" href="https://discuss.huggingface.co/t/size-of-last-hidden-state-and-mask-in-vitmae/70297/3?u=nielsr">https://discuss.huggingface.co/t/size-of-last-hidden-state-and-mask-in-vitmae/70297/3?u=nielsr</a></p>

          '
        raw: 'Hi,


          This is explained here: https://discuss.huggingface.co/t/size-of-last-hidden-state-and-mask-in-vitmae/70297/3?u=nielsr'
        updatedAt: '2024-01-23T21:32:14.478Z'
      numEdits: 0
      reactions: []
    id: 65b0305e1dbd85fd0cf2e084
    type: comment
  author: nielsr
  content: 'Hi,


    This is explained here: https://discuss.huggingface.co/t/size-of-last-hidden-state-and-mask-in-vitmae/70297/3?u=nielsr'
  created_at: 2024-01-23 21:32:14+00:00
  edited: false
  hidden: false
  id: 65b0305e1dbd85fd0cf2e084
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2cf14b9051a02b035acfbc42a84be0b3.svg
      fullname: Mirko Tratturi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sugarExcess
      type: user
    createdAt: '2024-01-24T12:55:29.000Z'
    data:
      edited: false
      editors:
      - sugarExcess
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8212087154388428
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2cf14b9051a02b035acfbc42a84be0b3.svg
          fullname: Mirko Tratturi
          isHf: false
          isPro: false
          name: sugarExcess
          type: user
        html: '<p>Thank you for the response!</p>

          '
        raw: Thank you for the response!
        updatedAt: '2024-01-24T12:55:29.058Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65b108c17febbcc2af065874
    id: 65b108c17febbcc2af06586f
    type: comment
  author: sugarExcess
  content: Thank you for the response!
  created_at: 2024-01-24 12:55:29+00:00
  edited: false
  hidden: false
  id: 65b108c17febbcc2af06586f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/2cf14b9051a02b035acfbc42a84be0b3.svg
      fullname: Mirko Tratturi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sugarExcess
      type: user
    createdAt: '2024-01-24T12:55:29.000Z'
    data:
      status: closed
    id: 65b108c17febbcc2af065874
    type: status-change
  author: sugarExcess
  created_at: 2024-01-24 12:55:29+00:00
  id: 65b108c17febbcc2af065874
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: facebook/vit-mae-base
repo_type: model
status: closed
target_branch: null
title: Why the sequence length is not the equal to the number of patches?
