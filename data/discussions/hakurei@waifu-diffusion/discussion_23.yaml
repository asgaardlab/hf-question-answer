!!python/object:huggingface_hub.community.DiscussionWithDetails
author: hmillerbakewell
conflicting_files: null
created_at: 2022-10-10 17:38:47+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af7d5edbb62e3357de36fe18dedb89eb.svg
      fullname: Hector Miller-Bakewell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hmillerbakewell
      type: user
    createdAt: '2022-10-10T18:38:47.000Z'
    data:
      edited: false
      editors:
      - hmillerbakewell
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af7d5edbb62e3357de36fe18dedb89eb.svg
          fullname: Hector Miller-Bakewell
          isHf: false
          isPro: false
          name: hmillerbakewell
          type: user
        html: "<h1 id=\"expected-behaviour\">Expected behaviour</h1>\n<p>The following\
          \ code should set up a diffusion pipeline</p>\n<pre><code class=\"language-python\"\
          ><span class=\"hljs-keyword\">import</span> diffusers <span class=\"hljs-comment\"\
          ># diffusers==0.4.1</span>\npipe = diffusers.StableDiffusionPipeline.from_pretrained(\n\
          \    <span class=\"hljs-string\">\"hakurei/waifu-diffusion\"</span>, \n\
          \    use_auth_token=<span class=\"hljs-literal\">True</span>)\n</code></pre>\n\
          <p>(Note that the README doesn't include the \"hakurei\" part of the repo\
          \ identifier, which is a separate issue.)</p>\n<h1 id=\"observed-behaviour\"\
          >Observed behaviour</h1>\n<p>Instead I get the error</p>\n<pre><code>File\
          \ /mnt/g/experiments/stable-diffusion/.venv/lib/python3.8/site-packages/diffusers/pipeline_utils.py:457,\
          \ in DiffusionPipeline.from_pretrained(cls, pretrained_model_name_or_path,\
          \ **kwargs)\n    454     if issubclass(class_obj, class_candidate):\n  \
          \  455         load_method_name = importable_classes[class_name][1]\n--&gt;\
          \ 457 load_method = getattr(class_obj, load_method_name)\n    459 loading_kwargs\
          \ = {}\n    460 if issubclass(class_obj, torch.nn.Module):\n\nTypeError:\
          \ getattr(): attribute name must be string\n</code></pre>\n<h1 id=\"last-worked\"\
          >Last worked</h1>\n<p>Since this code used to work I checked the recent\
          \ revisions:</p>\n<pre><code class=\"language-python\"><span class=\"hljs-keyword\"\
          >import</span> diffusers <span class=\"hljs-comment\"># diffusers==0.4.1</span>\n\
          pipe = diffusers.StableDiffusionPipeline.from_pretrained(\n    <span class=\"\
          hljs-string\">\"hakurei/waifu-diffusion\"</span>, revision=<span class=\"\
          hljs-string\">\"d135a7f19e2d1480428b1d92057f723811466ebb\"</span>, \n  \
          \  use_auth_token=<span class=\"hljs-literal\">True</span>)\n</code></pre>\n\
          <p>Which works as expected, but changing to revision <code><a href=\"/hakurei/waifu-diffusion/commit/2dff9dab944d77470b545a1bbe86fffb08d54912\"\
          >2dff9dab944d77470b545a1bbe86fffb08d54912</a></code> gives the error reported\
          \ above.</p>\n"
        raw: "# Expected behaviour\r\n\r\nThe following code should set up a diffusion\
          \ pipeline\r\n\r\n```python\r\nimport diffusers # diffusers==0.4.1\r\npipe\
          \ = diffusers.StableDiffusionPipeline.from_pretrained(\r\n\t\"hakurei/waifu-diffusion\"\
          , \r\n\tuse_auth_token=True)\r\n```\r\n\r\n(Note that the README doesn't\
          \ include the \"hakurei\" part of the repo identifier, which is a separate\
          \ issue.)\r\n\r\n# Observed behaviour\r\n\r\nInstead I get the error\r\n\
          \r\n```\r\nFile /mnt/g/experiments/stable-diffusion/.venv/lib/python3.8/site-packages/diffusers/pipeline_utils.py:457,\
          \ in DiffusionPipeline.from_pretrained(cls, pretrained_model_name_or_path,\
          \ **kwargs)\r\n    454     if issubclass(class_obj, class_candidate):\r\n\
          \    455         load_method_name = importable_classes[class_name][1]\r\n\
          --> 457 load_method = getattr(class_obj, load_method_name)\r\n    459 loading_kwargs\
          \ = {}\r\n    460 if issubclass(class_obj, torch.nn.Module):\r\n\r\nTypeError:\
          \ getattr(): attribute name must be string\r\n```\r\n\r\n# Last worked\r\
          \n\r\nSince this code used to work I checked the recent revisions:\r\n\r\
          \n\r\n```python\r\nimport diffusers # diffusers==0.4.1\r\npipe = diffusers.StableDiffusionPipeline.from_pretrained(\r\
          \n\t\"hakurei/waifu-diffusion\", revision=\"d135a7f19e2d1480428b1d92057f723811466ebb\"\
          , \r\n\tuse_auth_token=True)\r\n```\r\n\r\nWhich works as expected, but\
          \ changing to revision `2dff9dab944d77470b545a1bbe86fffb08d54912` gives\
          \ the error reported above."
        updatedAt: '2022-10-10T18:38:47.844Z'
      numEdits: 0
      reactions: []
    id: 634466b76e988c6a792c57ae
    type: comment
  author: hmillerbakewell
  content: "# Expected behaviour\r\n\r\nThe following code should set up a diffusion\
    \ pipeline\r\n\r\n```python\r\nimport diffusers # diffusers==0.4.1\r\npipe = diffusers.StableDiffusionPipeline.from_pretrained(\r\
    \n\t\"hakurei/waifu-diffusion\", \r\n\tuse_auth_token=True)\r\n```\r\n\r\n(Note\
    \ that the README doesn't include the \"hakurei\" part of the repo identifier,\
    \ which is a separate issue.)\r\n\r\n# Observed behaviour\r\n\r\nInstead I get\
    \ the error\r\n\r\n```\r\nFile /mnt/g/experiments/stable-diffusion/.venv/lib/python3.8/site-packages/diffusers/pipeline_utils.py:457,\
    \ in DiffusionPipeline.from_pretrained(cls, pretrained_model_name_or_path, **kwargs)\r\
    \n    454     if issubclass(class_obj, class_candidate):\r\n    455         load_method_name\
    \ = importable_classes[class_name][1]\r\n--> 457 load_method = getattr(class_obj,\
    \ load_method_name)\r\n    459 loading_kwargs = {}\r\n    460 if issubclass(class_obj,\
    \ torch.nn.Module):\r\n\r\nTypeError: getattr(): attribute name must be string\r\
    \n```\r\n\r\n# Last worked\r\n\r\nSince this code used to work I checked the recent\
    \ revisions:\r\n\r\n\r\n```python\r\nimport diffusers # diffusers==0.4.1\r\npipe\
    \ = diffusers.StableDiffusionPipeline.from_pretrained(\r\n\t\"hakurei/waifu-diffusion\"\
    , revision=\"d135a7f19e2d1480428b1d92057f723811466ebb\", \r\n\tuse_auth_token=True)\r\
    \n```\r\n\r\nWhich works as expected, but changing to revision `2dff9dab944d77470b545a1bbe86fffb08d54912`\
    \ gives the error reported above."
  created_at: 2022-10-10 17:38:47+00:00
  edited: false
  hidden: false
  id: 634466b76e988c6a792c57ae
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645138575893-606918bb3959960e820cb47d.jpeg?w=200&h=200&f=face
      fullname: Reimu Hakurei
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: hakurei
      type: user
    createdAt: '2022-10-10T22:39:19.000Z'
    data:
      edited: false
      editors:
      - hakurei
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645138575893-606918bb3959960e820cb47d.jpeg?w=200&h=200&f=face
          fullname: Reimu Hakurei
          isHf: false
          isPro: false
          name: hakurei
          type: user
        html: '<p>Do you have <code>scipy</code> installed?</p>

          '
        raw: Do you have ``scipy`` installed?
        updatedAt: '2022-10-10T22:39:19.942Z'
      numEdits: 0
      reactions: []
    id: 63449f17ba3e1a1973d7a263
    type: comment
  author: hakurei
  content: Do you have ``scipy`` installed?
  created_at: 2022-10-10 21:39:19+00:00
  edited: false
  hidden: false
  id: 63449f17ba3e1a1973d7a263
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af7d5edbb62e3357de36fe18dedb89eb.svg
      fullname: Hector Miller-Bakewell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hmillerbakewell
      type: user
    createdAt: '2022-10-11T06:46:17.000Z'
    data:
      edited: false
      editors:
      - hmillerbakewell
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af7d5edbb62e3357de36fe18dedb89eb.svg
          fullname: Hector Miller-Bakewell
          isHf: false
          isPro: false
          name: hmillerbakewell
          type: user
        html: '<p>Thank you - I was indeed missing <code>scipy</code> and this has
          fixed my problem</p>

          '
        raw: Thank you - I was indeed missing `scipy` and this has fixed my problem
        updatedAt: '2022-10-11T06:46:17.975Z'
      numEdits: 0
      reactions: []
      relatedEventId: 634511393d0a0db1a08d3ada
    id: 634511393d0a0db1a08d3ad9
    type: comment
  author: hmillerbakewell
  content: Thank you - I was indeed missing `scipy` and this has fixed my problem
  created_at: 2022-10-11 05:46:17+00:00
  edited: false
  hidden: false
  id: 634511393d0a0db1a08d3ad9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/af7d5edbb62e3357de36fe18dedb89eb.svg
      fullname: Hector Miller-Bakewell
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hmillerbakewell
      type: user
    createdAt: '2022-10-11T06:46:17.000Z'
    data:
      status: closed
    id: 634511393d0a0db1a08d3ada
    type: status-change
  author: hmillerbakewell
  created_at: 2022-10-11 05:46:17+00:00
  id: 634511393d0a0db1a08d3ada
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 23
repo_id: hakurei/waifu-diffusion
repo_type: model
status: closed
target_branch: null
title: Commit 2dff9da no longer constructs a diffusers pipeline using from_pretrained
