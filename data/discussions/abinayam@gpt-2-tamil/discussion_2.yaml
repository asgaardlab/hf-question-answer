!!python/object:huggingface_hub.community.DiscussionWithDetails
author: JohnPatrickPhilip
conflicting_files: null
created_at: 2023-03-15 13:12:50+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/26fd09c0bd13f80af4808e38a928ac16.svg
      fullname: John Patrick Philip
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JohnPatrickPhilip
      type: user
    createdAt: '2023-03-15T14:12:50.000Z'
    data:
      edited: false
      editors:
      - JohnPatrickPhilip
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/26fd09c0bd13f80af4808e38a928ac16.svg
          fullname: John Patrick Philip
          isHf: false
          isPro: false
          name: JohnPatrickPhilip
          type: user
        html: '<p>python3 src/convert_flax_to_pytorch.py<br>/usr/local/lib/python3.10/site-packages/flax/core/frozen_dict.py:169:
          FutureWarning: jax.tree_util.register_keypaths is deprecated, and will be
          removed in a future release. Please use <code>register_pytree_with_keys()</code>
          instead.<br>  jax.tree_util.register_keypaths(<br>Traceback (most recent
          call last):<br>  File "/Users/johnpatrick/JohnData/Projects/gpt-2-tamil/src/convert_flax_to_pytorch.py",
          line 4, in <br>    model = GPT2LMHeadModel.from_pretrained("../gpt-2-tamil",
          from_flax=True)<br>  File "/usr/local/lib/python3.10/site-packages/transformers/modeling_utils.py",
          line 2457, in from_pretrained<br>    model = load_flax_checkpoint_in_pytorch_model(model,
          resolved_archive_file)<br>  File "/usr/local/lib/python3.10/site-packages/transformers/modeling_flax_pytorch_utils.py",
          line 235, in load_flax_checkpoint_in_pytorch_model<br>    flax_state_dict
          = from_bytes(flax_cls, state_f.read())<br>  File "/usr/local/lib/python3.10/site-packages/flax/serialization.py",
          line 425, in from_bytes<br>    state_dict = msgpack_restore(encoded_bytes)<br>  File
          "/usr/local/lib/python3.10/site-packages/flax/serialization.py", line 407,
          in msgpack_restore<br>    state_dict = msgpack.unpackb(<br>  File "msgpack/_unpacker.pyx",
          line 201, in msgpack._cmsgpack.unpackb<br>msgpack.exceptions.ExtraData:
          unpack(b) received extra data.</p>

          '
        raw: "python3 src/convert_flax_to_pytorch.py\r\n/usr/local/lib/python3.10/site-packages/flax/core/frozen_dict.py:169:\
          \ FutureWarning: jax.tree_util.register_keypaths is deprecated, and will\
          \ be removed in a future release. Please use `register_pytree_with_keys()`\
          \ instead.\r\n  jax.tree_util.register_keypaths(\r\nTraceback (most recent\
          \ call last):\r\n  File \"/Users/johnpatrick/JohnData/Projects/gpt-2-tamil/src/convert_flax_to_pytorch.py\"\
          , line 4, in <module>\r\n    model = GPT2LMHeadModel.from_pretrained(\"\
          ../gpt-2-tamil\", from_flax=True)\r\n  File \"/usr/local/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
          , line 2457, in from_pretrained\r\n    model = load_flax_checkpoint_in_pytorch_model(model,\
          \ resolved_archive_file)\r\n  File \"/usr/local/lib/python3.10/site-packages/transformers/modeling_flax_pytorch_utils.py\"\
          , line 235, in load_flax_checkpoint_in_pytorch_model\r\n    flax_state_dict\
          \ = from_bytes(flax_cls, state_f.read())\r\n  File \"/usr/local/lib/python3.10/site-packages/flax/serialization.py\"\
          , line 425, in from_bytes\r\n    state_dict = msgpack_restore(encoded_bytes)\r\
          \n  File \"/usr/local/lib/python3.10/site-packages/flax/serialization.py\"\
          , line 407, in msgpack_restore\r\n    state_dict = msgpack.unpackb(\r\n\
          \  File \"msgpack/_unpacker.pyx\", line 201, in msgpack._cmsgpack.unpackb\r\
          \nmsgpack.exceptions.ExtraData: unpack(b) received extra data."
        updatedAt: '2023-03-15T14:12:50.254Z'
      numEdits: 0
      reactions: []
    id: 6411d2622d274f52e1cd1f63
    type: comment
  author: JohnPatrickPhilip
  content: "python3 src/convert_flax_to_pytorch.py\r\n/usr/local/lib/python3.10/site-packages/flax/core/frozen_dict.py:169:\
    \ FutureWarning: jax.tree_util.register_keypaths is deprecated, and will be removed\
    \ in a future release. Please use `register_pytree_with_keys()` instead.\r\n \
    \ jax.tree_util.register_keypaths(\r\nTraceback (most recent call last):\r\n \
    \ File \"/Users/johnpatrick/JohnData/Projects/gpt-2-tamil/src/convert_flax_to_pytorch.py\"\
    , line 4, in <module>\r\n    model = GPT2LMHeadModel.from_pretrained(\"../gpt-2-tamil\"\
    , from_flax=True)\r\n  File \"/usr/local/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
    , line 2457, in from_pretrained\r\n    model = load_flax_checkpoint_in_pytorch_model(model,\
    \ resolved_archive_file)\r\n  File \"/usr/local/lib/python3.10/site-packages/transformers/modeling_flax_pytorch_utils.py\"\
    , line 235, in load_flax_checkpoint_in_pytorch_model\r\n    flax_state_dict =\
    \ from_bytes(flax_cls, state_f.read())\r\n  File \"/usr/local/lib/python3.10/site-packages/flax/serialization.py\"\
    , line 425, in from_bytes\r\n    state_dict = msgpack_restore(encoded_bytes)\r\
    \n  File \"/usr/local/lib/python3.10/site-packages/flax/serialization.py\", line\
    \ 407, in msgpack_restore\r\n    state_dict = msgpack.unpackb(\r\n  File \"msgpack/_unpacker.pyx\"\
    , line 201, in msgpack._cmsgpack.unpackb\r\nmsgpack.exceptions.ExtraData: unpack(b)\
    \ received extra data."
  created_at: 2023-03-15 13:12:50+00:00
  edited: false
  hidden: false
  id: 6411d2622d274f52e1cd1f63
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: abinayam/gpt-2-tamil
repo_type: model
status: open
target_branch: null
title: getting unpackb error - "msgpack/_unpacker.pyx", line 201, in msgpack._cmsgpack.unpackb
