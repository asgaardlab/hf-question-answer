!!python/object:huggingface_hub.community.DiscussionWithDetails
author: shanekong
conflicting_files: null
created_at: 2023-02-01 08:30:38+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
      fullname: shanekong
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: shanekong
      type: user
    createdAt: '2023-02-01T08:30:38.000Z'
    data:
      edited: false
      editors:
      - shanekong
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
          fullname: shanekong
          isHf: false
          isPro: false
          name: shanekong
          type: user
        html: '<p>I have tried cat checkpoint_best_part_1.pt checkpoint_best_part_2.pt
          checkpoint_best_part_3.pt &gt;checkpoint_best.pt<br>but when i load the
          model, one error arised: </p>

          <p>Traceback (most recent call last):<br>  File "main.py", line 9, in <br>    inference
          = Inference(model_path, data_path, eet_batch_size)<br>  File "/root/workspace/inference.py",
          line 81, in <strong>init</strong><br>    state = torch.load(args.path, map_location=torch.device("cpu"))<br>  File
          "/opt/conda/lib/python3.8/site-packages/torch/serialization.py", line 771,
          in load<br>    with _open_file_like(f, ''rb'') as opened_file:<br>  File
          "/opt/conda/lib/python3.8/site-packages/torch/serialization.py", line 270,
          in _open_file_like<br>    return _open_file(name_or_buffer, mode)<br>  File
          "/opt/conda/lib/python3.8/site-packages/torch/serialization.py", line 251,
          in <strong>init</strong><br>    super(_open_file, self).<strong>init</strong>(open(name,
          mode))<br>FileNotFoundError: [Errno 2] No such file or directory: ''transformer_lm_gpt2_xxl_dialogue/checkpoint_best_part*.pt''</p>

          <p>then how should i merge these sub part files? </p>

          '
        raw: "I have tried cat checkpoint_best_part_1.pt checkpoint_best_part_2.pt\
          \ checkpoint_best_part_3.pt >checkpoint_best.pt\r\nbut when i load the model,\
          \ one error arised: \r\n\r\nTraceback (most recent call last):\r\n  File\
          \ \"main.py\", line 9, in <module>\r\n    inference = Inference(model_path,\
          \ data_path, eet_batch_size)\r\n  File \"/root/workspace/inference.py\"\
          , line 81, in __init__\r\n    state = torch.load(args.path, map_location=torch.device(\"\
          cpu\"))\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 771, in load\r\n    with _open_file_like(f, 'rb') as opened_file:\r\
          \n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 270, in _open_file_like\r\n    return _open_file(name_or_buffer,\
          \ mode)\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 251, in __init__\r\n    super(_open_file, self).__init__(open(name,\
          \ mode))\r\nFileNotFoundError: [Errno 2] No such file or directory: 'transformer_lm_gpt2_xxl_dialogue/checkpoint_best_part*.pt'\r\
          \n\r\nthen how should i merge these sub part files? "
        updatedAt: '2023-02-01T08:30:38.309Z'
      numEdits: 0
      reactions: []
    id: 63da232e1ab35adf09f23a8c
    type: comment
  author: shanekong
  content: "I have tried cat checkpoint_best_part_1.pt checkpoint_best_part_2.pt checkpoint_best_part_3.pt\
    \ >checkpoint_best.pt\r\nbut when i load the model, one error arised: \r\n\r\n\
    Traceback (most recent call last):\r\n  File \"main.py\", line 9, in <module>\r\
    \n    inference = Inference(model_path, data_path, eet_batch_size)\r\n  File \"\
    /root/workspace/inference.py\", line 81, in __init__\r\n    state = torch.load(args.path,\
    \ map_location=torch.device(\"cpu\"))\r\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
    , line 771, in load\r\n    with _open_file_like(f, 'rb') as opened_file:\r\n \
    \ File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line\
    \ 270, in _open_file_like\r\n    return _open_file(name_or_buffer, mode)\r\n \
    \ File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line\
    \ 251, in __init__\r\n    super(_open_file, self).__init__(open(name, mode))\r\
    \nFileNotFoundError: [Errno 2] No such file or directory: 'transformer_lm_gpt2_xxl_dialogue/checkpoint_best_part*.pt'\r\
    \n\r\nthen how should i merge these sub part files? "
  created_at: 2023-02-01 08:30:38+00:00
  edited: false
  hidden: false
  id: 63da232e1ab35adf09f23a8c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
      fullname: yadong xi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: clouridge
      type: user
    createdAt: '2023-02-01T08:42:13.000Z'
    data:
      edited: true
      editors:
      - clouridge
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
          fullname: yadong xi
          isHf: false
          isPro: false
          name: clouridge
          type: user
        html: '<p>Thank you for your concern.<br>I will check it, and give you a response
          as soon as possible.</p>

          '
        raw: 'Thank you for your concern.

          I will check it, and give you a response as soon as possible.'
        updatedAt: '2023-02-01T08:44:49.140Z'
      numEdits: 1
      reactions: []
    id: 63da25e500be420aaa3e2bd0
    type: comment
  author: clouridge
  content: 'Thank you for your concern.

    I will check it, and give you a response as soon as possible.'
  created_at: 2023-02-01 08:42:13+00:00
  edited: true
  hidden: false
  id: 63da25e500be420aaa3e2bd0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
      fullname: shanekong
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: shanekong
      type: user
    createdAt: '2023-02-01T11:01:40.000Z'
    data:
      edited: false
      editors:
      - shanekong
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
          fullname: shanekong
          isHf: false
          isPro: false
          name: shanekong
          type: user
        html: '<p>Thank you for your reply.<br>em... i pasted a wrong error info,  the
          corresponding  error info is:</p>

          <p>Traceback (most recent call last):<br>  File "main.py", line 9, in <br>    inference
          = Inference(model_path, data_path, eet_batch_size)<br>  File "/root/workspace/inference.py",
          line 81, in <strong>init</strong><br>    state = torch.load(args.path, map_location=torch.device("cpu"))<br>  File
          "/opt/conda/lib/python3.8/site-packages/torch/serialization.py", line 777,
          in load<br>    with _open_zipfile_reader(opened_file) as opened_zipfile:<br>  File
          "/opt/conda/lib/python3.8/site-packages/torch/serialization.py", line 282,
          in <strong>init</strong><br>    super(_open_zipfile_reader, self).<strong>init</strong>(torch._C.PyTorchFileReader(name_or_buffer))<br>RuntimeError:
          PytorchStreamReader failed reading zip archive: invalid header or archive
          is corrupted</p>

          '
        raw: "Thank you for your reply.\nem... i pasted a wrong error info,  the corresponding\
          \  error info is:\n\nTraceback (most recent call last):\n  File \"main.py\"\
          , line 9, in <module>\n    inference = Inference(model_path, data_path,\
          \ eet_batch_size)\n  File \"/root/workspace/inference.py\", line 81, in\
          \ __init__\n    state = torch.load(args.path, map_location=torch.device(\"\
          cpu\"))\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 777, in load\n    with _open_zipfile_reader(opened_file) as opened_zipfile:\n\
          \  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
          , line 282, in __init__\n    super(_open_zipfile_reader, self).__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
          RuntimeError: PytorchStreamReader failed reading zip archive: invalid header\
          \ or archive is corrupted"
        updatedAt: '2023-02-01T11:01:40.046Z'
      numEdits: 0
      reactions: []
    id: 63da469400be420aaa4218d2
    type: comment
  author: shanekong
  content: "Thank you for your reply.\nem... i pasted a wrong error info,  the corresponding\
    \  error info is:\n\nTraceback (most recent call last):\n  File \"main.py\", line\
    \ 9, in <module>\n    inference = Inference(model_path, data_path, eet_batch_size)\n\
    \  File \"/root/workspace/inference.py\", line 81, in __init__\n    state = torch.load(args.path,\
    \ map_location=torch.device(\"cpu\"))\n  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\"\
    , line 777, in load\n    with _open_zipfile_reader(opened_file) as opened_zipfile:\n\
    \  File \"/opt/conda/lib/python3.8/site-packages/torch/serialization.py\", line\
    \ 282, in __init__\n    super(_open_zipfile_reader, self).__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
    RuntimeError: PytorchStreamReader failed reading zip archive: invalid header or\
    \ archive is corrupted"
  created_at: 2023-02-01 11:01:40+00:00
  edited: false
  hidden: false
  id: 63da469400be420aaa4218d2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
      fullname: yadong xi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: clouridge
      type: user
    createdAt: '2023-02-02T03:05:03.000Z'
    data:
      edited: true
      editors:
      - clouridge
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
          fullname: yadong xi
          isHf: false
          isPro: false
          name: clouridge
          type: user
        html: '<p>The former version missed the codes for parts merging. We have fix
          the mistake and test the code. You can try it again.<br>The merging code
          is simple, from line 81 to line 85 of inference.py<br> If you meet new questions,
          please feel free to contact me.</p>

          '
        raw: "The former version missed the codes for parts merging. We have fix the\
          \ mistake and test the code. You can try it again.\nThe merging code is\
          \ simple, from line 81 to line 85 of inference.py\n If you meet new questions,\
          \ please feel free to contact me."
        updatedAt: '2023-02-02T03:06:37.479Z'
      numEdits: 1
      reactions: []
    id: 63db285f54fa80c534be5cf1
    type: comment
  author: clouridge
  content: "The former version missed the codes for parts merging. We have fix the\
    \ mistake and test the code. You can try it again.\nThe merging code is simple,\
    \ from line 81 to line 85 of inference.py\n If you meet new questions, please\
    \ feel free to contact me."
  created_at: 2023-02-02 03:05:03+00:00
  edited: true
  hidden: false
  id: 63db285f54fa80c534be5cf1
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: FUXI/yuyan-dialogue
repo_type: model
status: open
target_branch: null
title: "how to merge mutiple parts pt file to one pt file\uFF1F"
