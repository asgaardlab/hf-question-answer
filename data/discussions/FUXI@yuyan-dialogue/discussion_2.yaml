!!python/object:huggingface_hub.community.DiscussionWithDetails
author: shanekong
conflicting_files: null
created_at: 2023-03-07 07:21:55+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
      fullname: shanekong
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: shanekong
      type: user
    createdAt: '2023-03-07T07:21:55.000Z'
    data:
      edited: false
      editors:
      - shanekong
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ef697f3a1a667ac9321fa3d475987f25.svg
          fullname: shanekong
          isHf: false
          isPro: false
          name: shanekong
          type: user
        html: '<p>i hope to stop generating when the eos token appears;  i add two
          lines code in inference.py <strong>call</strong>() method,<br>self.generator.eos
          = self.eos_index<br>self.generator.real_eos = self.eos_index<br>but it generates
          unfluent sentence when it is called in batch.<br>text = inference.request([inp]
          * 5, append_right_eos=False)</p>

          '
        raw: "i hope to stop generating when the eos token appears;  i add two lines\
          \ code in inference.py __call__() method, \r\nself.generator.eos = self.eos_index\r\
          \nself.generator.real_eos = self.eos_index\r\nbut it generates unfluent\
          \ sentence when it is called in batch.\r\ntext = inference.request([inp]\
          \ * 5, append_right_eos=False)\r\n\r\n"
        updatedAt: '2023-03-07T07:21:55.897Z'
      numEdits: 0
      reactions: []
    id: 6406e6132e309e65451cce2a
    type: comment
  author: shanekong
  content: "i hope to stop generating when the eos token appears;  i add two lines\
    \ code in inference.py __call__() method, \r\nself.generator.eos = self.eos_index\r\
    \nself.generator.real_eos = self.eos_index\r\nbut it generates unfluent sentence\
    \ when it is called in batch.\r\ntext = inference.request([inp] * 5, append_right_eos=False)\r\
    \n\r\n"
  created_at: 2023-03-07 07:21:55+00:00
  edited: false
  hidden: false
  id: 6406e6132e309e65451cce2a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
      fullname: yadong xi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: clouridge
      type: user
    createdAt: '2023-03-07T07:31:23.000Z'
    data:
      edited: false
      editors:
      - clouridge
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f67b7f0a0320da65de6beea699b84eae.svg
          fullname: yadong xi
          isHf: false
          isPro: false
          name: clouridge
          type: user
        html: '<p>ok, I will test your case in my environment and give you a response
          later.</p>

          '
        raw: ok, I will test your case in my environment and give you a response later.
        updatedAt: '2023-03-07T07:31:23.187Z'
      numEdits: 0
      reactions: []
    id: 6406e84be9e4f5a82bb50d8f
    type: comment
  author: clouridge
  content: ok, I will test your case in my environment and give you a response later.
  created_at: 2023-03-07 07:31:23+00:00
  edited: false
  hidden: false
  id: 6406e84be9e4f5a82bb50d8f
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: FUXI/yuyan-dialogue
repo_type: model
status: open
target_branch: null
title: how to stop generating when eos token appears?
