!!python/object:huggingface_hub.community.DiscussionWithDetails
author: AnOtterDeveloper
conflicting_files: null
created_at: 2023-10-02 07:21:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8f32890ca4d1edcd8d620fd1db98eb82.svg
      fullname: Thomas Pesneau
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AnOtterDeveloper
      type: user
    createdAt: '2023-10-02T08:21:39.000Z'
    data:
      edited: false
      editors:
      - AnOtterDeveloper
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9429692625999451
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8f32890ca4d1edcd8d620fd1db98eb82.svg
          fullname: Thomas Pesneau
          isHf: false
          isPro: false
          name: AnOtterDeveloper
          type: user
        html: '<p>I get the following error when I try to deploy the model on Sagemaker:</p>

          <pre><code>Could not convert model weights to safetensors: Error while trying
          to find names to remove to save state dict, but found no suitable name to
          keep for saving amongst: {''model.norm.weight''}. None is covering the entire
          storage.Refusing to save/load the model since you could be storing much
          more memory than needed. Please refer to https://huggingface.co/docs/safetensors/torch_shared_tensors
          for more information. Or open an issue.

          </code></pre>

          <p>Apparently this is because of shared tensors not being supported in safetensors<br>Is
          there any way around it ?<br>Thanks</p>

          '
        raw: "I get the following error when I try to deploy the model on Sagemaker:\r\
          \n```\r\nCould not convert model weights to safetensors: Error while trying\
          \ to find names to remove to save state dict, but found no suitable name\
          \ to keep for saving amongst: {'model.norm.weight'}. None is covering the\
          \ entire storage.Refusing to save/load the model since you could be storing\
          \ much more memory than needed. Please refer to https://huggingface.co/docs/safetensors/torch_shared_tensors\
          \ for more information. Or open an issue.\r\n```\r\nApparently this is because\
          \ of shared tensors not being supported in safetensors\r\nIs there any way\
          \ around it ?\r\nThanks"
        updatedAt: '2023-10-02T08:21:39.316Z'
      numEdits: 0
      reactions: []
    id: 651a7d93404da51aa06a6806
    type: comment
  author: AnOtterDeveloper
  content: "I get the following error when I try to deploy the model on Sagemaker:\r\
    \n```\r\nCould not convert model weights to safetensors: Error while trying to\
    \ find names to remove to save state dict, but found no suitable name to keep\
    \ for saving amongst: {'model.norm.weight'}. None is covering the entire storage.Refusing\
    \ to save/load the model since you could be storing much more memory than needed.\
    \ Please refer to https://huggingface.co/docs/safetensors/torch_shared_tensors\
    \ for more information. Or open an issue.\r\n```\r\nApparently this is because\
    \ of shared tensors not being supported in safetensors\r\nIs there any way around\
    \ it ?\r\nThanks"
  created_at: 2023-10-02 07:21:39+00:00
  edited: false
  hidden: false
  id: 651a7d93404da51aa06a6806
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/16e29ca67c3163a305894980f421164f.svg
      fullname: Jay Smith
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AISec
      type: user
    createdAt: '2023-10-06T18:44:51.000Z'
    data:
      edited: true
      editors:
      - AISec
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9954646229743958
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/16e29ca67c3163a305894980f421164f.svg
          fullname: Jay Smith
          isHf: false
          isPro: false
          name: AISec
          type: user
        html: '<p>I am also having this issue. Anyone able to solve this?</p>

          <p>Edit 1: I found this link saying that it does not work with TGI 1.0.3
          - <a rel="nofollow" href="https://discuss.huggingface.co/t/mistral-ai-sagemaker-deployment-failing/57379/2">https://discuss.huggingface.co/t/mistral-ai-sagemaker-deployment-failing/57379/2</a></p>

          <p>Edit 2: Updating to 1.1.0 worked. If you are using the AWS public ECR,
          they have 1.1.0 on there. (e.g. 763104351884.dkr.ecr.eu-west-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.0.1-tgi1.1.0-gpu-py39-cu118-ubuntu20.04)</p>

          '
        raw: 'I am also having this issue. Anyone able to solve this?


          Edit 1: I found this link saying that it does not work with TGI 1.0.3 -
          https://discuss.huggingface.co/t/mistral-ai-sagemaker-deployment-failing/57379/2


          Edit 2: Updating to 1.1.0 worked. If you are using the AWS public ECR, they
          have 1.1.0 on there. (e.g. 763104351884.dkr.ecr.eu-west-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.0.1-tgi1.1.0-gpu-py39-cu118-ubuntu20.04)'
        updatedAt: '2023-10-06T19:03:06.149Z'
      numEdits: 3
      reactions: []
    id: 652055a3706c75514865d910
    type: comment
  author: AISec
  content: 'I am also having this issue. Anyone able to solve this?


    Edit 1: I found this link saying that it does not work with TGI 1.0.3 - https://discuss.huggingface.co/t/mistral-ai-sagemaker-deployment-failing/57379/2


    Edit 2: Updating to 1.1.0 worked. If you are using the AWS public ECR, they have
    1.1.0 on there. (e.g. 763104351884.dkr.ecr.eu-west-1.amazonaws.com/huggingface-pytorch-tgi-inference:2.0.1-tgi1.1.0-gpu-py39-cu118-ubuntu20.04)'
  created_at: 2023-10-06 17:44:51+00:00
  edited: true
  hidden: false
  id: 652055a3706c75514865d910
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 30
repo_id: mistralai/Mistral-7B-Instruct-v0.1
repo_type: model
status: open
target_branch: null
title: Deployment on Sagemaker endpoint with text generation inference container does
  not work
