!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Rohith1016
conflicting_files: null
created_at: 2023-11-17 05:01:12+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/214f490ef5705cde7a1f68df55d65388.svg
      fullname: RohithVaddeti
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rohith1016
      type: user
    createdAt: '2023-11-17T05:01:12.000Z'
    data:
      edited: false
      editors:
      - Rohith1016
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3311246633529663
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/214f490ef5705cde7a1f68df55d65388.svg
          fullname: RohithVaddeti
          isHf: false
          isPro: false
          name: Rohith1016
          type: user
        html: '<p>Getting This error while using specific GPU<br>{eg [input_ids =
          tokenizer(prompt_template, return_tensors=''pt'').to(''cuda:3'']}<br>but
          when using multiple GPU it is Working Fine<br>{input_ids = tokenizer(prompt_template,
          return_tensors=''pt'').input_ids.cuda()}</p>

          <p>ERROR:<br>Traceback (most recent call last):<br>File "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py",
          line 266, in getattr<br>return self.data[item]<br>KeyError: ''shape''</p>

          <p>During handling of the above exception, another exception occurred:</p>

          <p>Traceback (most recent call last):<br>File "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py",
          line 1455, in wsgi_app<br>response = self.full_dispatch_request()<br>File
          "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py",
          line 869, in full_dispatch_request<br>rv = self.handle_user_exception(e)<br>File
          "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py",
          line 867, in full_dispatch_request<br>rv = self.dispatch_request()<br>File
          "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py",
          line 852, in dispatch_request<br>return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)<br>File
          "/home2/asgtestdrive2023/Text2SQL/sql_api.py", line 16, in chat<br>return
          jsonify({''response'' : get_data(query)})<br>File "/home2/asgtestdrive2023/Text2SQL/sql_api.py",
          line 20, in get_data<br>return text2sql(input)<br>File "/home2/asgtestdrive2023/Text2SQL/pipeline_v3.py",
          line 205, in text2sql<br>output = model.generate(inputs=input_ids, temperature=0.3,
          do_sample=True, top_p=0.95, top_k=1, max_new_tokens=512)<br>File "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/torch/utils/_contextlib.py",
          line 115, in decorate_context<br>return func(*args, **kwargs)<br>File "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/generation/utils.py",
          line 1459, in generate<br>batch_size = inputs_tensor.shape[0]<br>File "/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py",
          line 268, in getattr<br>raise AttributeError<br>AttributeError</p>

          '
        raw: "Getting This error while using specific GPU\r\n{eg [input_ids = tokenizer(prompt_template,\
          \ return_tensors='pt').to('cuda:3']}\r\nbut when using multiple GPU it is\
          \ Working Fine \r\n{input_ids = tokenizer(prompt_template, return_tensors='pt').input_ids.cuda()}\r\
          \n\r\nERROR:\r\nTraceback (most recent call last):\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
          , line 266, in getattr\r\nreturn self.data[item]\r\nKeyError: 'shape'\r\n\
          \r\nDuring handling of the above exception, another exception occurred:\r\
          \n\r\nTraceback (most recent call last):\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
          , line 1455, in wsgi_app\r\nresponse = self.full_dispatch_request()\r\n\
          File \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
          , line 869, in full_dispatch_request\r\nrv = self.handle_user_exception(e)\r\
          \nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
          , line 867, in full_dispatch_request\r\nrv = self.dispatch_request()\r\n\
          File \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
          , line 852, in dispatch_request\r\nreturn self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)\r\
          \nFile \"/home2/asgtestdrive2023/Text2SQL/sql_api.py\", line 16, in chat\r\
          \nreturn jsonify({'response' : get_data(query)})\r\nFile \"/home2/asgtestdrive2023/Text2SQL/sql_api.py\"\
          , line 20, in get_data\r\nreturn text2sql(input)\r\nFile \"/home2/asgtestdrive2023/Text2SQL/pipeline_v3.py\"\
          , line 205, in text2sql\r\noutput = model.generate(inputs=input_ids, temperature=0.3,\
          \ do_sample=True, top_p=0.95, top_k=1, max_new_tokens=512)\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/torch/utils/_contextlib.py\"\
          , line 115, in decorate_context\r\nreturn func(*args, **kwargs)\r\nFile\
          \ \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/generation/utils.py\"\
          , line 1459, in generate\r\nbatch_size = inputs_tensor.shape[0]\r\nFile\
          \ \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
          , line 268, in getattr\r\nraise AttributeError\r\nAttributeError"
        updatedAt: '2023-11-17T05:01:12.239Z'
      numEdits: 0
      reactions: []
    id: 6556f39882457f75dda73b0b
    type: comment
  author: Rohith1016
  content: "Getting This error while using specific GPU\r\n{eg [input_ids = tokenizer(prompt_template,\
    \ return_tensors='pt').to('cuda:3']}\r\nbut when using multiple GPU it is Working\
    \ Fine \r\n{input_ids = tokenizer(prompt_template, return_tensors='pt').input_ids.cuda()}\r\
    \n\r\nERROR:\r\nTraceback (most recent call last):\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
    , line 266, in getattr\r\nreturn self.data[item]\r\nKeyError: 'shape'\r\n\r\n\
    During handling of the above exception, another exception occurred:\r\n\r\nTraceback\
    \ (most recent call last):\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
    , line 1455, in wsgi_app\r\nresponse = self.full_dispatch_request()\r\nFile \"\
    /home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
    , line 869, in full_dispatch_request\r\nrv = self.handle_user_exception(e)\r\n\
    File \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
    , line 867, in full_dispatch_request\r\nrv = self.dispatch_request()\r\nFile \"\
    /home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/flask/app.py\"\
    , line 852, in dispatch_request\r\nreturn self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)\r\
    \nFile \"/home2/asgtestdrive2023/Text2SQL/sql_api.py\", line 16, in chat\r\nreturn\
    \ jsonify({'response' : get_data(query)})\r\nFile \"/home2/asgtestdrive2023/Text2SQL/sql_api.py\"\
    , line 20, in get_data\r\nreturn text2sql(input)\r\nFile \"/home2/asgtestdrive2023/Text2SQL/pipeline_v3.py\"\
    , line 205, in text2sql\r\noutput = model.generate(inputs=input_ids, temperature=0.3,\
    \ do_sample=True, top_p=0.95, top_k=1, max_new_tokens=512)\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/torch/utils/_contextlib.py\"\
    , line 115, in decorate_context\r\nreturn func(*args, **kwargs)\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/generation/utils.py\"\
    , line 1459, in generate\r\nbatch_size = inputs_tensor.shape[0]\r\nFile \"/home2/asgtestdrive2023/Text2SQL/testvenv/lib/python3.10/site-packages/transformers/tokenization_utils_base.py\"\
    , line 268, in getattr\r\nraise AttributeError\r\nAttributeError"
  created_at: 2023-11-17 05:01:12+00:00
  edited: false
  hidden: false
  id: 6556f39882457f75dda73b0b
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 75
repo_id: mistralai/Mistral-7B-Instruct-v0.1
repo_type: model
status: open
target_branch: null
title: AttributeError, When using Specific GPU
