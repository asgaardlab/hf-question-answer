!!python/object:huggingface_hub.community.DiscussionWithDetails
author: sahumson
conflicting_files: null
created_at: 2023-06-06 14:26:51+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/199fd9a765630c98e31e2dd62c789083.svg
      fullname: sricharan amarnath
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sahumson
      type: user
    createdAt: '2023-06-06T15:26:51.000Z'
    data:
      edited: false
      editors:
      - sahumson
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4932432770729065
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/199fd9a765630c98e31e2dd62c789083.svg
          fullname: sricharan amarnath
          isHf: false
          isPro: false
          name: sahumson
          type: user
        html: '<p>How do we get the confidence score of the predictions for pix2struct
          model as mentioned below  code in pred[0], how do we get the prediction
          scores?<br>{<br>FILENAME = "XXX.pdf"<br>PAGE_NO = 1<br>DEVICE = "cuda" if
          torch.cuda.is_available() else "cpu"</p>

          <p>model = psg.from_pretrained("google/pix2struct-docvqa-base").to(DEVICE)<br>processor
          = psp.from_pretrained("google/pix2struct-docvqa-large")</p>

          <p>def convert_pdf_to_image(filename, page_no):<br>    return convert_from_path(filename)[page_no-1]</p>

          <p>image = convert_pdf_to_image(FILENAME, PAGE_NO)</p>

          <p>inputs = processor(images=[image for _ in range(len(questions))], text=questions,
          return_tensors="pt").to(DEVICE)</p>

          <p>pred=model.generate(**inputs)<br>print(processor.decode(pred[0],skip_special_tokens=True))<br>}</p>

          '
        raw: "How do we get the confidence score of the predictions for pix2struct\
          \ model as mentioned below  code in pred[0], how do we get the prediction\
          \ scores? \r\n{\r\nFILENAME = \"XXX.pdf\"\r\nPAGE_NO = 1\r\nDEVICE = \"\
          cuda\" if torch.cuda.is_available() else \"cpu\"\r\n\r\nmodel = psg.from_pretrained(\"\
          google/pix2struct-docvqa-base\").to(DEVICE)\r\nprocessor = psp.from_pretrained(\"\
          google/pix2struct-docvqa-large\")\r\n\r\ndef convert_pdf_to_image(filename,\
          \ page_no):\r\n    return convert_from_path(filename)[page_no-1]\r\n\r\n\
          image = convert_pdf_to_image(FILENAME, PAGE_NO)\r\n\r\ninputs = processor(images=[image\
          \ for _ in range(len(questions))], text=questions, return_tensors=\"pt\"\
          ).to(DEVICE)\r\n\r\npred=model.generate(**inputs)\r\nprint(processor.decode(pred[0],skip_special_tokens=True))\r\
          \n}"
        updatedAt: '2023-06-06T15:26:51.768Z'
      numEdits: 0
      reactions: []
    id: 647f503b0633ff4de45c7646
    type: comment
  author: sahumson
  content: "How do we get the confidence score of the predictions for pix2struct model\
    \ as mentioned below  code in pred[0], how do we get the prediction scores? \r\
    \n{\r\nFILENAME = \"XXX.pdf\"\r\nPAGE_NO = 1\r\nDEVICE = \"cuda\" if torch.cuda.is_available()\
    \ else \"cpu\"\r\n\r\nmodel = psg.from_pretrained(\"google/pix2struct-docvqa-base\"\
    ).to(DEVICE)\r\nprocessor = psp.from_pretrained(\"google/pix2struct-docvqa-large\"\
    )\r\n\r\ndef convert_pdf_to_image(filename, page_no):\r\n    return convert_from_path(filename)[page_no-1]\r\
    \n\r\nimage = convert_pdf_to_image(FILENAME, PAGE_NO)\r\n\r\ninputs = processor(images=[image\
    \ for _ in range(len(questions))], text=questions, return_tensors=\"pt\").to(DEVICE)\r\
    \n\r\npred=model.generate(**inputs)\r\nprint(processor.decode(pred[0],skip_special_tokens=True))\r\
    \n}"
  created_at: 2023-06-06 14:26:51+00:00
  edited: false
  hidden: false
  id: 647f503b0633ff4de45c7646
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: google/pix2struct-screen2words-base
repo_type: model
status: open
target_branch: null
title: 'Confidence score or probability score of Pix2struct VQA model '
