!!python/object:huggingface_hub.community.DiscussionWithDetails
author: cay89
conflicting_files: null
created_at: 2023-11-16 09:13:59+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bcb991e185ef376d014e7d414ea3b6de.svg
      fullname: "K\xE9ri Csaba"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cay89
      type: user
    createdAt: '2023-11-16T09:13:59.000Z'
    data:
      edited: false
      editors:
      - cay89
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8723659515380859
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bcb991e185ef376d014e7d414ea3b6de.svg
          fullname: "K\xE9ri Csaba"
          isHf: false
          isPro: false
          name: cay89
          type: user
        html: '<p>I tried to clone this repository during the Docker image building
          process, but I don''t understand why the size of the package is twice as
          big in the image as it is in the repository.</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/cLTJCrywzdzY8ozHpEaOH.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/cLTJCrywzdzY8ozHpEaOH.png"></a></p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/rR-LZdWY_iWXHknTtoK5b.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/rR-LZdWY_iWXHknTtoK5b.png"></a></p>

          '
        raw: "I tried to clone this repository during the Docker image building process,\
          \ but I don't understand why the size of the package is twice as big in\
          \ the image as it is in the repository.\r\n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/cLTJCrywzdzY8ozHpEaOH.png)\r\
          \n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/rR-LZdWY_iWXHknTtoK5b.png)\r\
          \n\r\n"
        updatedAt: '2023-11-16T09:13:59.084Z'
      numEdits: 0
      reactions: []
    id: 6555dd57e0169cf32cf5b0ad
    type: comment
  author: cay89
  content: "I tried to clone this repository during the Docker image building process,\
    \ but I don't understand why the size of the package is twice as big in the image\
    \ as it is in the repository.\r\n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/cLTJCrywzdzY8ozHpEaOH.png)\r\
    \n\r\n\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/65525d24c1a2e6c88d46f5e7/rR-LZdWY_iWXHknTtoK5b.png)\r\
    \n\r\n"
  created_at: 2023-11-16 09:13:59+00:00
  edited: false
  hidden: false
  id: 6555dd57e0169cf32cf5b0ad
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
      fullname: Tom Jobbins
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: TheBloke
      type: user
    createdAt: '2023-11-16T10:10:52.000Z'
    data:
      edited: false
      editors:
      - TheBloke
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.776765763759613
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/tvPikpAzKTKGN5wrpadOJ.jpeg?w=200&h=200&f=face
          fullname: Tom Jobbins
          isHf: false
          isPro: true
          name: TheBloke
          type: user
        html: "<p>Did you <code>git clone</code> it?  If so, then it will use double\
          \ disk space. That's because Git stores the files twice - once normally,\
          \ and once as checksums.</p>\n<p>For this reason I strongly recommend not\
          \ to use Git for cloning models. My more recent GPTQ READMEs have this note\
          \ about that:</p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/rNJdGAYcHfPNRVN_uAX4d.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/rNJdGAYcHfPNRVN_uAX4d.png\"\
          ></a></p>\n<p>I've not gone back and updated this older GPTQ release to\
          \ use the new README template. That's something I plan to do soon.</p>\n\
          <p>Please see below for my up-to-date instructions for cloning a repo. I'd\
          \ recommend you use <code>huggingface-cli</code> to download the files instead;\
          \ you can add a line to your Dockerfile that does this.  This will not only\
          \ be faster, it will also only store the files once, with no extra disk\
          \ space used.  (Note, I copied these instructions from a different GPTQ\
          \ README, so the model name is not correct; change that to <code>TheBloke/Llama-2-7B-Chat-GPTQ</code>\
          \ before running) :</p>\n<h2 id=\"how-to-download-including-from-branches\"\
          >How to download, including from branches</h2>\n<h3 id=\"from-the-command-line\"\
          >From the command line</h3>\n<p>I recommend using the <code>huggingface-hub</code>\
          \ Python library:</p>\n<pre><code class=\"language-shell\">pip3 install\
          \ huggingface-hub\n</code></pre>\n<p>To download the <code>main</code> branch\
          \ to a folder called <code>MoMo-70B-V1.1-GPTQ</code>:</p>\n<pre><code class=\"\
          language-shell\">mkdir MoMo-70B-V1.1-GPTQ\nhuggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ\
          \ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks False\n</code></pre>\n\
          <p>To download from a different branch, add the <code>--revision</code>\
          \ parameter:</p>\n<pre><code class=\"language-shell\">mkdir MoMo-70B-V1.1-GPTQ\n\
          huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ --revision gptq-4bit-128g-actorder_True\
          \ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks False\n</code></pre>\n\
          <details>\n  <summary>More advanced huggingface-cli download usage (click\
          \ to expand)</summary>\n\n<p>If you remove the <code>--local-dir-use-symlinks\
          \ False</code> parameter, the files will instead be stored in the central\
          \ Hugging Face cache directory (default location on Linux is: <code>~/.cache/huggingface</code>),\
          \ and symlinks will be added to the specified <code>--local-dir</code>,\
          \ pointing to their real location in the cache. This allows for interrupted\
          \ downloads to be resumed, and allows you to quickly clone the repo to multiple\
          \ places on disk without triggering a download again. The downside, and\
          \ the reason why I don't list that as the default option, is that the files\
          \ are then hidden away in a cache folder and it's harder to know where your\
          \ disk space is being used, and to clear it up if/when you want to remove\
          \ a download model.</p>\n<p>The cache location can be changed with the <code>HF_HOME</code>\
          \ environment variable, and/or the <code>--cache-dir</code> parameter to\
          \ <code>huggingface-cli</code>.</p>\n<p>For more documentation on downloading\
          \ with <code>huggingface-cli</code>, please see: <a href=\"https://huggingface.co/docs/huggingface_hub/guides/download#download-from-the-cli\"\
          >HF -&gt; Hub Python Library -&gt; Download files -&gt; Download from the\
          \ CLI</a>.</p>\n<p>To accelerate downloads on fast connections (1Gbit/s\
          \ or higher), install <code>hf_transfer</code>:</p>\n<pre><code class=\"\
          language-shell\">pip3 install hf_transfer\n</code></pre>\n<p>And set environment\
          \ variable <code>HF_HUB_ENABLE_HF_TRANSFER</code> to <code>1</code>:</p>\n\
          <pre><code class=\"language-shell\">mkdir MoMo-70B-V1.1-GPTQ\nHF_HUB_ENABLE_HF_TRANSFER=1\
          \ huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ --local-dir MoMo-70B-V1.1-GPTQ\
          \ --local-dir-use-symlinks False\n</code></pre>\n<p>Windows Command Line\
          \ users: You can set the environment variable by running <code>set HF_HUB_ENABLE_HF_TRANSFER=1</code>\
          \ before the download command.</p>\n</details>\n"
        raw: "Did you `git clone` it?  If so, then it will use double disk space.\
          \ That's because Git stores the files twice - once normally, and once as\
          \ checksums.\n\nFor this reason I strongly recommend not to use Git for\
          \ cloning models. My more recent GPTQ READMEs have this note about that:\n\
          \n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/rNJdGAYcHfPNRVN_uAX4d.png)\n\
          \nI've not gone back and updated this older GPTQ release to use the new\
          \ README template. That's something I plan to do soon.\n\nPlease see below\
          \ for my up-to-date instructions for cloning a repo. I'd recommend you use\
          \ `huggingface-cli` to download the files instead; you can add a line to\
          \ your Dockerfile that does this.  This will not only be faster, it will\
          \ also only store the files once, with no extra disk space used.  (Note,\
          \ I copied these instructions from a different GPTQ README, so the model\
          \ name is not correct; change that to `TheBloke/Llama-2-7B-Chat-GPTQ` before\
          \ running) :\n\n## How to download, including from branches\n\n### From\
          \ the command line\n\nI recommend using the `huggingface-hub` Python library:\n\
          \n```shell\npip3 install huggingface-hub\n```\n\nTo download the `main`\
          \ branch to a folder called `MoMo-70B-V1.1-GPTQ`:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\n\
          huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ --local-dir MoMo-70B-V1.1-GPTQ\
          \ --local-dir-use-symlinks False\n```\n\nTo download from a different branch,\
          \ add the `--revision` parameter:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\n\
          huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ --revision gptq-4bit-128g-actorder_True\
          \ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks False\n```\n\n\
          <details>\n  <summary>More advanced huggingface-cli download usage (click\
          \ to expand)</summary>\n\nIf you remove the `--local-dir-use-symlinks False`\
          \ parameter, the files will instead be stored in the central Hugging Face\
          \ cache directory (default location on Linux is: `~/.cache/huggingface`),\
          \ and symlinks will be added to the specified `--local-dir`, pointing to\
          \ their real location in the cache. This allows for interrupted downloads\
          \ to be resumed, and allows you to quickly clone the repo to multiple places\
          \ on disk without triggering a download again. The downside, and the reason\
          \ why I don't list that as the default option, is that the files are then\
          \ hidden away in a cache folder and it's harder to know where your disk\
          \ space is being used, and to clear it up if/when you want to remove a download\
          \ model.\n\nThe cache location can be changed with the `HF_HOME` environment\
          \ variable, and/or the `--cache-dir` parameter to `huggingface-cli`.\n\n\
          For more documentation on downloading with `huggingface-cli`, please see:\
          \ [HF -> Hub Python Library -> Download files -> Download from the CLI](https://huggingface.co/docs/huggingface_hub/guides/download#download-from-the-cli).\n\
          \nTo accelerate downloads on fast connections (1Gbit/s or higher), install\
          \ `hf_transfer`:\n\n```shell\npip3 install hf_transfer\n```\n\nAnd set environment\
          \ variable `HF_HUB_ENABLE_HF_TRANSFER` to `1`:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\n\
          HF_HUB_ENABLE_HF_TRANSFER=1 huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ\
          \ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks False\n```\n\n\
          Windows Command Line users: You can set the environment variable by running\
          \ `set HF_HUB_ENABLE_HF_TRANSFER=1` before the download command.\n</details>\n"
        updatedAt: '2023-11-16T10:10:52.165Z'
      numEdits: 0
      reactions: []
    id: 6555eaacdcf410fd07566ddb
    type: comment
  author: TheBloke
  content: "Did you `git clone` it?  If so, then it will use double disk space. That's\
    \ because Git stores the files twice - once normally, and once as checksums.\n\
    \nFor this reason I strongly recommend not to use Git for cloning models. My more\
    \ recent GPTQ READMEs have this note about that:\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6426d3f3a7723d62b53c259b/rNJdGAYcHfPNRVN_uAX4d.png)\n\
    \nI've not gone back and updated this older GPTQ release to use the new README\
    \ template. That's something I plan to do soon.\n\nPlease see below for my up-to-date\
    \ instructions for cloning a repo. I'd recommend you use `huggingface-cli` to\
    \ download the files instead; you can add a line to your Dockerfile that does\
    \ this.  This will not only be faster, it will also only store the files once,\
    \ with no extra disk space used.  (Note, I copied these instructions from a different\
    \ GPTQ README, so the model name is not correct; change that to `TheBloke/Llama-2-7B-Chat-GPTQ`\
    \ before running) :\n\n## How to download, including from branches\n\n### From\
    \ the command line\n\nI recommend using the `huggingface-hub` Python library:\n\
    \n```shell\npip3 install huggingface-hub\n```\n\nTo download the `main` branch\
    \ to a folder called `MoMo-70B-V1.1-GPTQ`:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\n\
    huggingface-cli download TheBloke/MoMo-70B-V1.1-GPTQ --local-dir MoMo-70B-V1.1-GPTQ\
    \ --local-dir-use-symlinks False\n```\n\nTo download from a different branch,\
    \ add the `--revision` parameter:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\nhuggingface-cli\
    \ download TheBloke/MoMo-70B-V1.1-GPTQ --revision gptq-4bit-128g-actorder_True\
    \ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks False\n```\n\n<details>\n\
    \  <summary>More advanced huggingface-cli download usage (click to expand)</summary>\n\
    \nIf you remove the `--local-dir-use-symlinks False` parameter, the files will\
    \ instead be stored in the central Hugging Face cache directory (default location\
    \ on Linux is: `~/.cache/huggingface`), and symlinks will be added to the specified\
    \ `--local-dir`, pointing to their real location in the cache. This allows for\
    \ interrupted downloads to be resumed, and allows you to quickly clone the repo\
    \ to multiple places on disk without triggering a download again. The downside,\
    \ and the reason why I don't list that as the default option, is that the files\
    \ are then hidden away in a cache folder and it's harder to know where your disk\
    \ space is being used, and to clear it up if/when you want to remove a download\
    \ model.\n\nThe cache location can be changed with the `HF_HOME` environment variable,\
    \ and/or the `--cache-dir` parameter to `huggingface-cli`.\n\nFor more documentation\
    \ on downloading with `huggingface-cli`, please see: [HF -> Hub Python Library\
    \ -> Download files -> Download from the CLI](https://huggingface.co/docs/huggingface_hub/guides/download#download-from-the-cli).\n\
    \nTo accelerate downloads on fast connections (1Gbit/s or higher), install `hf_transfer`:\n\
    \n```shell\npip3 install hf_transfer\n```\n\nAnd set environment variable `HF_HUB_ENABLE_HF_TRANSFER`\
    \ to `1`:\n\n```shell\nmkdir MoMo-70B-V1.1-GPTQ\nHF_HUB_ENABLE_HF_TRANSFER=1 huggingface-cli\
    \ download TheBloke/MoMo-70B-V1.1-GPTQ --local-dir MoMo-70B-V1.1-GPTQ --local-dir-use-symlinks\
    \ False\n```\n\nWindows Command Line users: You can set the environment variable\
    \ by running `set HF_HUB_ENABLE_HF_TRANSFER=1` before the download command.\n\
    </details>\n"
  created_at: 2023-11-16 10:10:52+00:00
  edited: false
  hidden: false
  id: 6555eaacdcf410fd07566ddb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bcb991e185ef376d014e7d414ea3b6de.svg
      fullname: "K\xE9ri Csaba"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cay89
      type: user
    createdAt: '2023-11-16T11:17:38.000Z'
    data:
      edited: true
      editors:
      - cay89
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9712992906570435
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bcb991e185ef376d014e7d414ea3b6de.svg
          fullname: "K\xE9ri Csaba"
          isHf: false
          isPro: false
          name: cay89
          type: user
        html: '<p>Thanks, it works pretty well! I''m new here, and I''ve searched
          for an alternative solution instead of <code>git lfs</code>, but I couldn''t
          find one.</p>

          '
        raw: Thanks, it works pretty well! I'm new here, and I've searched for an
          alternative solution instead of `git lfs`, but I couldn't find one.
        updatedAt: '2023-11-16T11:18:16.398Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - TheBloke
      relatedEventId: 6555fa52ef6e96329fd6a4b2
    id: 6555fa52ef6e96329fd6a4ad
    type: comment
  author: cay89
  content: Thanks, it works pretty well! I'm new here, and I've searched for an alternative
    solution instead of `git lfs`, but I couldn't find one.
  created_at: 2023-11-16 11:17:38+00:00
  edited: true
  hidden: false
  id: 6555fa52ef6e96329fd6a4ad
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/bcb991e185ef376d014e7d414ea3b6de.svg
      fullname: "K\xE9ri Csaba"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cay89
      type: user
    createdAt: '2023-11-16T11:17:38.000Z'
    data:
      status: closed
    id: 6555fa52ef6e96329fd6a4b2
    type: status-change
  author: cay89
  created_at: 2023-11-16 11:17:38+00:00
  id: 6555fa52ef6e96329fd6a4b2
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 27
repo_id: TheBloke/Llama-2-7B-Chat-GPTQ
repo_type: model
status: closed
target_branch: null
title: Double size repository in docker image
