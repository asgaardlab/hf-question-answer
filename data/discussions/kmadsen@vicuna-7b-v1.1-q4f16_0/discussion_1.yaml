!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Cloud-Strife
conflicting_files: null
created_at: 2023-07-19 00:14:16+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1763083e837983da059a96c8831daf3a.svg
      fullname: Cloud-Strife
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cloud-Strife
      type: user
    createdAt: '2023-07-19T01:14:16.000Z'
    data:
      edited: false
      editors:
      - Cloud-Strife
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6486490964889526
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1763083e837983da059a96c8831daf3a.svg
          fullname: Cloud-Strife
          isHf: false
          isPro: false
          name: Cloud-Strife
          type: user
        html: '<p>Hi Kmadsen,</p>

          <p>I checked my params is totally same with yours, but can''t run with default
          APK,  can you run with it ?<br>It will have no response after input some
          words and press send button.<br>I renamed the params and pushed  to this
          dir<br>/storage/emulated/0/Android/data/ai.mlc.mlcchat/files/vicuna-v1-7b-q4f16_0
          # ls -l<br>total 3707480<br>-rw-rw---- 1 root ext_data_rw      395 2022-02-23
          12:09 mlc-chat-config.json<br>-rw-rw---- 1 root ext_data_rw   200823 2022-02-23
          12:09 ndarray-cache.json<br>-rw-rw---- 1 root ext_data_rw 65536000 2022-02-23
          12:09 params_shard_0.bin<br>-rw-rw---- 1 root ext_data_rw 27066368 2022-02-23
          12:09 params_shard_1.bin<br>...</p>

          <p>Thanks,<br>Qing</p>

          '
        raw: "Hi Kmadsen,\r\n\r\nI checked my params is totally same with yours, but\
          \ can't run with default APK,  can you run with it ? \r\nIt will have no\
          \ response after input some words and press send button.\r\nI renamed the\
          \ params and pushed  to this dir \r\n/storage/emulated/0/Android/data/ai.mlc.mlcchat/files/vicuna-v1-7b-q4f16_0\
          \ # ls -l\r\ntotal 3707480\r\n-rw-rw---- 1 root ext_data_rw      395 2022-02-23\
          \ 12:09 mlc-chat-config.json\r\n-rw-rw---- 1 root ext_data_rw   200823 2022-02-23\
          \ 12:09 ndarray-cache.json\r\n-rw-rw---- 1 root ext_data_rw 65536000 2022-02-23\
          \ 12:09 params_shard_0.bin\r\n-rw-rw---- 1 root ext_data_rw 27066368 2022-02-23\
          \ 12:09 params_shard_1.bin\r\n...\r\n\r\nThanks,\r\nQing"
        updatedAt: '2023-07-19T01:14:16.865Z'
      numEdits: 0
      reactions: []
    id: 64b738e86c169983c97f5ece
    type: comment
  author: Cloud-Strife
  content: "Hi Kmadsen,\r\n\r\nI checked my params is totally same with yours, but\
    \ can't run with default APK,  can you run with it ? \r\nIt will have no response\
    \ after input some words and press send button.\r\nI renamed the params and pushed\
    \  to this dir \r\n/storage/emulated/0/Android/data/ai.mlc.mlcchat/files/vicuna-v1-7b-q4f16_0\
    \ # ls -l\r\ntotal 3707480\r\n-rw-rw---- 1 root ext_data_rw      395 2022-02-23\
    \ 12:09 mlc-chat-config.json\r\n-rw-rw---- 1 root ext_data_rw   200823 2022-02-23\
    \ 12:09 ndarray-cache.json\r\n-rw-rw---- 1 root ext_data_rw 65536000 2022-02-23\
    \ 12:09 params_shard_0.bin\r\n-rw-rw---- 1 root ext_data_rw 27066368 2022-02-23\
    \ 12:09 params_shard_1.bin\r\n...\r\n\r\nThanks,\r\nQing"
  created_at: 2023-07-19 00:14:16+00:00
  edited: false
  hidden: false
  id: 64b738e86c169983c97f5ece
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/27e23479f4617aea6c3df7288bce5b13.svg
      fullname: Kyle
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: kmadsen
      type: user
    createdAt: '2023-07-19T14:30:06.000Z'
    data:
      edited: false
      editors:
      - kmadsen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6123279333114624
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/27e23479f4617aea6c3df7288bce5b13.svg
          fullname: Kyle
          isHf: false
          isPro: false
          name: kmadsen
          type: user
        html: "<p>Hi Qing</p>\n<p>I made a edit to the MLCChat application so that\
          \ our fork will accept unaltered model directories from huggingface. This\
          \ is what the configuration looks like, notice the added <code>model_url_directory</code>.\
          \ </p>\n<pre><code>{\n  \"model_libs\": [\n    \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\"\
          ,\n    \"vicuna-7b-v1.1-q4f16_0\"\n  ],\n  \"model_list\": [\n    {\n  \
          \    \"model_url\": \"https://huggingface.co/mlc-ai/mlc-chat-RedPajama-INCITE-Chat-3B-v1-q4f16_0/\"\
          ,\n      \"local_id\": \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\"\n    },\n\
          \    {\n      \"model_url\": \"https://huggingface.co/kmadsen/vicuna-7b-v1.1-q4f16_0/\"\
          ,\n      \"model_url_directory\": \"params/\",\n      \"local_id\": \"vicuna-7b-v1.1-q4f16_0\"\
          \n    }\n  ],\n  \"add_model_samples\": [\n  ]\n}\n</code></pre>\n"
        raw: "Hi Qing\n\nI made a edit to the MLCChat application so that our fork\
          \ will accept unaltered model directories from huggingface. This is what\
          \ the configuration looks like, notice the added `model_url_directory`.\
          \ \n\n```\n{\n  \"model_libs\": [\n    \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\"\
          ,\n    \"vicuna-7b-v1.1-q4f16_0\"\n  ],\n  \"model_list\": [\n    {\n  \
          \    \"model_url\": \"https://huggingface.co/mlc-ai/mlc-chat-RedPajama-INCITE-Chat-3B-v1-q4f16_0/\"\
          ,\n      \"local_id\": \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\"\n    },\n\
          \    {\n      \"model_url\": \"https://huggingface.co/kmadsen/vicuna-7b-v1.1-q4f16_0/\"\
          ,\n      \"model_url_directory\": \"params/\",\n      \"local_id\": \"vicuna-7b-v1.1-q4f16_0\"\
          \n    }\n  ],\n  \"add_model_samples\": [\n  ]\n}\n```"
        updatedAt: '2023-07-19T14:30:06.010Z'
      numEdits: 0
      reactions: []
    id: 64b7f36e8c632fbca954bc84
    type: comment
  author: kmadsen
  content: "Hi Qing\n\nI made a edit to the MLCChat application so that our fork will\
    \ accept unaltered model directories from huggingface. This is what the configuration\
    \ looks like, notice the added `model_url_directory`. \n\n```\n{\n  \"model_libs\"\
    : [\n    \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\",\n    \"vicuna-7b-v1.1-q4f16_0\"\
    \n  ],\n  \"model_list\": [\n    {\n      \"model_url\": \"https://huggingface.co/mlc-ai/mlc-chat-RedPajama-INCITE-Chat-3B-v1-q4f16_0/\"\
    ,\n      \"local_id\": \"RedPajama-INCITE-Chat-3B-v1-q4f16_0\"\n    },\n    {\n\
    \      \"model_url\": \"https://huggingface.co/kmadsen/vicuna-7b-v1.1-q4f16_0/\"\
    ,\n      \"model_url_directory\": \"params/\",\n      \"local_id\": \"vicuna-7b-v1.1-q4f16_0\"\
    \n    }\n  ],\n  \"add_model_samples\": [\n  ]\n}\n```"
  created_at: 2023-07-19 13:30:06+00:00
  edited: false
  hidden: false
  id: 64b7f36e8c632fbca954bc84
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1763083e837983da059a96c8831daf3a.svg
      fullname: Cloud-Strife
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Cloud-Strife
      type: user
    createdAt: '2023-07-20T08:08:12.000Z'
    data:
      edited: false
      editors:
      - Cloud-Strife
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6941328644752502
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1763083e837983da059a96c8831daf3a.svg
          fullname: Cloud-Strife
          isHf: false
          isPro: false
          name: Cloud-Strife
          type: user
        html: '<p>Ok,  thanks for your comment. But my issues not related with name,   I
          directly change name from  vicuna-7b-v1.1-q4f16_0 to vicuna-v1-7b-q4f16_0
          is also ok.</p>

          <p>I checked ndarray-cache.json with default ndarray-cache.json  seems a
          little different,   my ndarray-cache.json first param as below:<br>            "dataPath":
          "params_shard_0.bin",<br>            "format": "raw-shard",<br>            "nbytes":
          65536000,<br>            "records": [<br>                {<br>                    "name":
          "param_0",</p>

          <p>But default is :<br>            "dataPath": "params_shard_0.bin",<br>            "format":
          "raw-shard",<br>            "nbytes": 65536000,<br>            "records":
          [<br>                {<br>                    "name": "param_67",</p>

          <p>Default can work,  but my generated params not work,   will check further.<br>Thanks
          again for your comment.</p>

          <p>Thanks,<br>Qing</p>

          '
        raw: "Ok,  thanks for your comment. But my issues not related with name, \
          \  I directly change name from  vicuna-7b-v1.1-q4f16_0 to vicuna-v1-7b-q4f16_0\
          \ is also ok.\n\nI checked ndarray-cache.json with default ndarray-cache.json\
          \  seems a little different,   my ndarray-cache.json first param as below:\n\
          \            \"dataPath\": \"params_shard_0.bin\",\n            \"format\"\
          : \"raw-shard\",\n            \"nbytes\": 65536000,\n            \"records\"\
          : [\n                {\n                    \"name\": \"param_0\",\n\nBut\
          \ default is :\n            \"dataPath\": \"params_shard_0.bin\",\n    \
          \        \"format\": \"raw-shard\",\n            \"nbytes\": 65536000,\n\
          \            \"records\": [\n                {\n                    \"name\"\
          : \"param_67\",\n\nDefault can work,  but my generated params not work,\
          \   will check further.  \nThanks again for your comment.\n\nThanks,\nQing"
        updatedAt: '2023-07-20T08:08:12.892Z'
      numEdits: 0
      reactions: []
    id: 64b8eb6c047fa3db9426b2c8
    type: comment
  author: Cloud-Strife
  content: "Ok,  thanks for your comment. But my issues not related with name,   I\
    \ directly change name from  vicuna-7b-v1.1-q4f16_0 to vicuna-v1-7b-q4f16_0 is\
    \ also ok.\n\nI checked ndarray-cache.json with default ndarray-cache.json  seems\
    \ a little different,   my ndarray-cache.json first param as below:\n        \
    \    \"dataPath\": \"params_shard_0.bin\",\n            \"format\": \"raw-shard\"\
    ,\n            \"nbytes\": 65536000,\n            \"records\": [\n           \
    \     {\n                    \"name\": \"param_0\",\n\nBut default is :\n    \
    \        \"dataPath\": \"params_shard_0.bin\",\n            \"format\": \"raw-shard\"\
    ,\n            \"nbytes\": 65536000,\n            \"records\": [\n           \
    \     {\n                    \"name\": \"param_67\",\n\nDefault can work,  but\
    \ my generated params not work,   will check further.  \nThanks again for your\
    \ comment.\n\nThanks,\nQing"
  created_at: 2023-07-20 07:08:12+00:00
  edited: false
  hidden: false
  id: 64b8eb6c047fa3db9426b2c8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/27e23479f4617aea6c3df7288bce5b13.svg
      fullname: Kyle
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: kmadsen
      type: user
    createdAt: '2023-07-22T18:03:57.000Z'
    data:
      edited: true
      editors:
      - kmadsen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.960861086845398
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/27e23479f4617aea6c3df7288bce5b13.svg
          fullname: Kyle
          isHf: false
          isPro: false
          name: kmadsen
          type: user
        html: '<p>The reason I uploaded this was to keep track of <code>vicuna-7b-v1.1-q4f16_0-android.tar</code>.
          For some reason it''s not uploaded to <a rel="nofollow" href="https://github.com/mlc-ai/binary-mlc-llm-libs">https://github.com/mlc-ai/binary-mlc-llm-libs</a></p>

          <p>I was facing similar issues as you except it was when using the pre-builds
          in <a href="https://huggingface.co/mlc-ai">https://huggingface.co/mlc-ai</a>.
          This upload allows us to build the android app and load the params from
          a single place.</p>

          <p>Am considering this model all temporary, but if you''re looking to customize
          an android app for testing; then this model will allow you to skip the custom
          TVM+OpenCL. But you''ll still need to <code>prepare_libs.sh</code>.</p>

          '
        raw: 'The reason I uploaded this was to keep track of `vicuna-7b-v1.1-q4f16_0-android.tar`.
          For some reason it''s not uploaded to https://github.com/mlc-ai/binary-mlc-llm-libs


          I was facing similar issues as you except it was when using the pre-builds
          in https://huggingface.co/mlc-ai. This upload allows us to build the android
          app and load the params from a single place.


          Am considering this model all temporary, but if you''re looking to customize
          an android app for testing; then this model will allow you to skip the custom
          TVM+OpenCL. But you''ll still need to `prepare_libs.sh`.'
        updatedAt: '2023-07-22T20:36:38.139Z'
      numEdits: 1
      reactions: []
    id: 64bc1a0d1a62149c5e512ba4
    type: comment
  author: kmadsen
  content: 'The reason I uploaded this was to keep track of `vicuna-7b-v1.1-q4f16_0-android.tar`.
    For some reason it''s not uploaded to https://github.com/mlc-ai/binary-mlc-llm-libs


    I was facing similar issues as you except it was when using the pre-builds in
    https://huggingface.co/mlc-ai. This upload allows us to build the android app
    and load the params from a single place.


    Am considering this model all temporary, but if you''re looking to customize an
    android app for testing; then this model will allow you to skip the custom TVM+OpenCL.
    But you''ll still need to `prepare_libs.sh`.'
  created_at: 2023-07-22 17:03:57+00:00
  edited: true
  hidden: false
  id: 64bc1a0d1a62149c5e512ba4
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: kmadsen/vicuna-7b-v1.1-q4f16_0
repo_type: model
status: open
target_branch: null
title: Is your params can run with default APK ?
