!!python/object:huggingface_hub.community.DiscussionWithDetails
author: osman
conflicting_files: null
created_at: 2023-12-12 23:47:41+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
      fullname: Osman Tursun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: osman
      type: user
    createdAt: '2023-12-12T23:47:41.000Z'
    data:
      edited: false
      editors:
      - osman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3573584258556366
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
          fullname: Osman Tursun
          isHf: false
          isPro: false
          name: osman
          type: user
        html: "<p>Hi, thanks for providing this nice repo. I have tested your model\
          \ which is working very well. Great work.</p>\n<p>I also tried to train\
          \ the model on CV_15. However, WER was about 1.0 after 20 hours of training.\
          \ Here is my bash script</p>\n<pre><code>python xls-r-uyghur-cv15/run_speech_recognition_ctc.py\
          \ \\\n        --dataset_name=\"mozilla-foundation/common_voice_15_0\" \\\
          \n        --model_name_or_path=\"facebook/wav2vec2-xls-r-300m\" \\\n   \
          \     --dataset_config_name=\"ug\" \\\n    --train_split_name=\"train+validation\"\
          \ \\\n    --eval_split_name=\"test\" \\\n        --output_dir=\"./xls-r-uyghur-cv15\"\
          \ \\\n        --overwrite_output_dir \\\n        --num_train_epochs=\"100\"\
          \ \\\n        --per_device_train_batch_size=\"16\" \\\n        --per_device_eval_batch_size=\"\
          8\" \\\n        --gradient_accumulation_steps=\"4\" \\\n        --learning_rate=\"\
          1e-4\" \\\n        --warmup_steps=\"2000\" \\\n        --length_column_name=\"\
          input_length\" \\\n        --evaluation_strategy=\"steps\" \\\n        --text_column_name=\"\
          sentence\" \\\n        --chars_to_ignore , ? . ! \\- \\; \\: \\\\ _ \\|\
          \ \u2012 \u263A \u2642 \xA9 \xAB \xAC \xBB \\\" \u201E \u201C % \u201D \uFFFD\
          \  \u2014 \u2019 \u060C \u061B \u061F \u2039 \u203A \u2212 \u2026 \u2013\
          \ \\\n        --eval_metrics=\"wer\" \\\n        --save_steps=\"500\" \\\
          \n        --eval_steps=\"500\" \\\n        --logging_steps=\"100\" \\\n\
          \        --min_duration_in_seconds=\"0.2\" \\\n        --layerdrop=\"0.0\"\
          \ \\\n        --activation_dropout=\"0.1\" \\\n        --save_total_limit=\"\
          3\" \\\n        --freeze_feature_encoder \\\n        --feat_proj_dropout=\"\
          0.0\" \\\n        --mask_time_prob=\"0.75\" \\\n        --mask_time_length=\"\
          10\" \\\n        --mask_feature_prob=\"0.25\" \\\n        --mask_feature_length=\"\
          64\" \\\n        --gradient_checkpointing \\\n        --use_auth_token \\\
          \n        --fp16 \\\n        --group_by_length \\\n        --do_train --do_eval\
          \ \\\n#       --push_to_hub\n</code></pre>\n<p>How can I improve the training?\
          \ Thanks.</p>\n"
        raw: "Hi, thanks for providing this nice repo. I have tested your model which\
          \ is working very well. Great work.\r\n\r\nI also tried to train the model\
          \ on CV_15. However, WER was about 1.0 after 20 hours of training. Here\
          \ is my bash script\r\n\r\n```\r\npython xls-r-uyghur-cv15/run_speech_recognition_ctc.py\
          \ \\\r\n        --dataset_name=\"mozilla-foundation/common_voice_15_0\"\
          \ \\\r\n        --model_name_or_path=\"facebook/wav2vec2-xls-r-300m\" \\\
          \r\n        --dataset_config_name=\"ug\" \\\r\n    --train_split_name=\"\
          train+validation\" \\\r\n    --eval_split_name=\"test\" \\\r\n        --output_dir=\"\
          ./xls-r-uyghur-cv15\" \\\r\n        --overwrite_output_dir \\\r\n      \
          \  --num_train_epochs=\"100\" \\\r\n        --per_device_train_batch_size=\"\
          16\" \\\r\n        --per_device_eval_batch_size=\"8\" \\\r\n        --gradient_accumulation_steps=\"\
          4\" \\\r\n        --learning_rate=\"1e-4\" \\\r\n        --warmup_steps=\"\
          2000\" \\\r\n        --length_column_name=\"input_length\" \\\r\n      \
          \  --evaluation_strategy=\"steps\" \\\r\n        --text_column_name=\"sentence\"\
          \ \\\r\n        --chars_to_ignore , ? . ! \\- \\; \\: \\\\ _ \\| \u2012\
          \ \u263A \u2642 \xA9 \xAB \xAC \xBB \\\" \u201E \u201C % \u201D \uFFFD \
          \ \u2014 \u2019 \u060C \u061B \u061F \u2039 \u203A \u2212 \u2026 \u2013\
          \ \\\r\n        --eval_metrics=\"wer\" \\\r\n        --save_steps=\"500\"\
          \ \\\r\n        --eval_steps=\"500\" \\\r\n        --logging_steps=\"100\"\
          \ \\\r\n        --min_duration_in_seconds=\"0.2\" \\\r\n        --layerdrop=\"\
          0.0\" \\\r\n        --activation_dropout=\"0.1\" \\\r\n        --save_total_limit=\"\
          3\" \\\r\n        --freeze_feature_encoder \\\r\n        --feat_proj_dropout=\"\
          0.0\" \\\r\n        --mask_time_prob=\"0.75\" \\\r\n        --mask_time_length=\"\
          10\" \\\r\n        --mask_feature_prob=\"0.25\" \\\r\n        --mask_feature_length=\"\
          64\" \\\r\n        --gradient_checkpointing \\\r\n        --use_auth_token\
          \ \\\r\n        --fp16 \\\r\n        --group_by_length \\\r\n        --do_train\
          \ --do_eval \\\r\n#       --push_to_hub\r\n```\r\n\r\nHow can I improve\
          \ the training? Thanks."
        updatedAt: '2023-12-12T23:47:41.782Z'
      numEdits: 0
      reactions: []
    id: 6578f11dab3436f5adbe454e
    type: comment
  author: osman
  content: "Hi, thanks for providing this nice repo. I have tested your model which\
    \ is working very well. Great work.\r\n\r\nI also tried to train the model on\
    \ CV_15. However, WER was about 1.0 after 20 hours of training. Here is my bash\
    \ script\r\n\r\n```\r\npython xls-r-uyghur-cv15/run_speech_recognition_ctc.py\
    \ \\\r\n        --dataset_name=\"mozilla-foundation/common_voice_15_0\" \\\r\n\
    \        --model_name_or_path=\"facebook/wav2vec2-xls-r-300m\" \\\r\n        --dataset_config_name=\"\
    ug\" \\\r\n    --train_split_name=\"train+validation\" \\\r\n    --eval_split_name=\"\
    test\" \\\r\n        --output_dir=\"./xls-r-uyghur-cv15\" \\\r\n        --overwrite_output_dir\
    \ \\\r\n        --num_train_epochs=\"100\" \\\r\n        --per_device_train_batch_size=\"\
    16\" \\\r\n        --per_device_eval_batch_size=\"8\" \\\r\n        --gradient_accumulation_steps=\"\
    4\" \\\r\n        --learning_rate=\"1e-4\" \\\r\n        --warmup_steps=\"2000\"\
    \ \\\r\n        --length_column_name=\"input_length\" \\\r\n        --evaluation_strategy=\"\
    steps\" \\\r\n        --text_column_name=\"sentence\" \\\r\n        --chars_to_ignore\
    \ , ? . ! \\- \\; \\: \\\\ _ \\| \u2012 \u263A \u2642 \xA9 \xAB \xAC \xBB \\\"\
    \ \u201E \u201C % \u201D \uFFFD  \u2014 \u2019 \u060C \u061B \u061F \u2039 \u203A\
    \ \u2212 \u2026 \u2013 \\\r\n        --eval_metrics=\"wer\" \\\r\n        --save_steps=\"\
    500\" \\\r\n        --eval_steps=\"500\" \\\r\n        --logging_steps=\"100\"\
    \ \\\r\n        --min_duration_in_seconds=\"0.2\" \\\r\n        --layerdrop=\"\
    0.0\" \\\r\n        --activation_dropout=\"0.1\" \\\r\n        --save_total_limit=\"\
    3\" \\\r\n        --freeze_feature_encoder \\\r\n        --feat_proj_dropout=\"\
    0.0\" \\\r\n        --mask_time_prob=\"0.75\" \\\r\n        --mask_time_length=\"\
    10\" \\\r\n        --mask_feature_prob=\"0.25\" \\\r\n        --mask_feature_length=\"\
    64\" \\\r\n        --gradient_checkpointing \\\r\n        --use_auth_token \\\r\
    \n        --fp16 \\\r\n        --group_by_length \\\r\n        --do_train --do_eval\
    \ \\\r\n#       --push_to_hub\r\n```\r\n\r\nHow can I improve the training? Thanks."
  created_at: 2023-12-12 23:47:41+00:00
  edited: false
  hidden: false
  id: 6578f11dab3436f5adbe454e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d1869cf139b0b0122c5efd53292423d9.svg
      fullname: Lucien Carroll
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: lucio
      type: user
    createdAt: '2023-12-13T04:51:33.000Z'
    data:
      edited: false
      editors:
      - lucio
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9582008719444275
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d1869cf139b0b0122c5efd53292423d9.svg
          fullname: Lucien Carroll
          isHf: false
          isPro: false
          name: lucio
          type: user
        html: '<p>Not sure what it could be, but here are some things to try:</p>

          <ol>

          <li>Does the existing script still work correctly with cv8? It may be that
          some different version of a dependency is installed in your environment,
          which may prevent correct training</li>

          <li>Does it train with using just "validation" as train? Does it quickly
          overtrain if you use "validation" as both train and test? There may be some
          data quality issue in newer data, or a change in formatting contrary to
          the assumptions of this script.</li>

          </ol>

          '
        raw: 'Not sure what it could be, but here are some things to try:

          1. Does the existing script still work correctly with cv8? It may be that
          some different version of a dependency is installed in your environment,
          which may prevent correct training

          2. Does it train with using just "validation" as train? Does it quickly
          overtrain if you use "validation" as both train and test? There may be some
          data quality issue in newer data, or a change in formatting contrary to
          the assumptions of this script.'
        updatedAt: '2023-12-13T04:51:33.084Z'
      numEdits: 0
      reactions: []
    id: 65793855eb02736add9c01a6
    type: comment
  author: lucio
  content: 'Not sure what it could be, but here are some things to try:

    1. Does the existing script still work correctly with cv8? It may be that some
    different version of a dependency is installed in your environment, which may
    prevent correct training

    2. Does it train with using just "validation" as train? Does it quickly overtrain
    if you use "validation" as both train and test? There may be some data quality
    issue in newer data, or a change in formatting contrary to the assumptions of
    this script.'
  created_at: 2023-12-13 04:51:33+00:00
  edited: false
  hidden: false
  id: 65793855eb02736add9c01a6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
      fullname: Osman Tursun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: osman
      type: user
    createdAt: '2023-12-13T11:30:09.000Z'
    data:
      edited: false
      editors:
      - osman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9747823476791382
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
          fullname: Osman Tursun
          isHf: false
          isPro: false
          name: osman
          type: user
        html: '<p>Thanks for your reply. I have not tried it with CV8. I will test
          the code with CV8.  </p>

          <p>FYI, I have trained the whisper--small-v2 with CV15,  and the WER is
          27. However, I have used the Uzbek tokeniser and Uyghur Latin Script, as
          Uyghur is included in the tokeniser.  </p>

          '
        raw: "Thanks for your reply. I have not tried it with CV8. I will test the\
          \ code with CV8.  \n\nFYI, I have trained the whisper--small-v2 with CV15,\
          \  and the WER is 27. However, I have used the Uzbek tokeniser and Uyghur\
          \ Latin Script, as Uyghur is included in the tokeniser.  "
        updatedAt: '2023-12-13T11:30:09.642Z'
      numEdits: 0
      reactions: []
    id: 657995c121a8b318364cde50
    type: comment
  author: osman
  content: "Thanks for your reply. I have not tried it with CV8. I will test the code\
    \ with CV8.  \n\nFYI, I have trained the whisper--small-v2 with CV15,  and the\
    \ WER is 27. However, I have used the Uzbek tokeniser and Uyghur Latin Script,\
    \ as Uyghur is included in the tokeniser.  "
  created_at: 2023-12-13 11:30:09+00:00
  edited: false
  hidden: false
  id: 657995c121a8b318364cde50
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
      fullname: Osman Tursun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: osman
      type: user
    createdAt: '2023-12-18T00:48:37.000Z'
    data:
      edited: false
      editors:
      - osman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9133949875831604
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
          fullname: Osman Tursun
          isHf: false
          isPro: false
          name: osman
          type: user
        html: '<p>After tuning some hyperparameters, the model is trainable on the
          model with the CV15 UG dataset. However,  it is hard to find the best hyper-parameters.
          </p>

          '
        raw: 'After tuning some hyperparameters, the model is trainable on the model
          with the CV15 UG dataset. However,  it is hard to find the best hyper-parameters. '
        updatedAt: '2023-12-18T00:48:37.015Z'
      numEdits: 0
      reactions: []
      relatedEventId: 657f96e583543a061b8bf6ad
    id: 657f96e583543a061b8bf6a8
    type: comment
  author: osman
  content: 'After tuning some hyperparameters, the model is trainable on the model
    with the CV15 UG dataset. However,  it is hard to find the best hyper-parameters. '
  created_at: 2023-12-18 00:48:37+00:00
  edited: false
  hidden: false
  id: 657f96e583543a061b8bf6a8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
      fullname: Osman Tursun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: osman
      type: user
    createdAt: '2023-12-18T00:48:37.000Z'
    data:
      status: closed
    id: 657f96e583543a061b8bf6ad
    type: status-change
  author: osman
  created_at: 2023-12-18 00:48:37+00:00
  id: 657f96e583543a061b8bf6ad
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/79597a7ffe8f07b846398c57382a81f6.svg
      fullname: Kai Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kli017
      type: user
    createdAt: '2024-01-19T07:25:52.000Z'
    data:
      edited: false
      editors:
      - kli017
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9398676753044128
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/79597a7ffe8f07b846398c57382a81f6.svg
          fullname: Kai Li
          isHf: false
          isPro: false
          name: kli017
          type: user
        html: '<p>hello, osman I also met this problem with cv13 and cv16 on ug dataset.
          could you give me some suggestion about hyper-parameters?</p>

          '
        raw: 'hello, osman I also met this problem with cv13 and cv16 on ug dataset.
          could you give me some suggestion about hyper-parameters?

          '
        updatedAt: '2024-01-19T07:25:52.153Z'
      numEdits: 0
      reactions: []
    id: 65aa2400bdd1530d18c6b735
    type: comment
  author: kli017
  content: 'hello, osman I also met this problem with cv13 and cv16 on ug dataset.
    could you give me some suggestion about hyper-parameters?

    '
  created_at: 2024-01-19 07:25:52+00:00
  edited: false
  hidden: false
  id: 65aa2400bdd1530d18c6b735
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
      fullname: Osman Tursun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: osman
      type: user
    createdAt: '2024-01-22T01:45:29.000Z'
    data:
      edited: false
      editors:
      - osman
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9785234332084656
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60c80803dfbd57a384a01122/rqRCbHRiENFldowJTdfRO.jpeg?w=200&h=200&f=face
          fullname: Osman Tursun
          isHf: false
          isPro: false
          name: osman
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;kli017&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/kli017\">@<span class=\"\
          underline\">kli017</span></a></span>\n\n\t</span></span> Hi, you can play\
          \ with the learning rate and warmup _steps. However, I don't know the exact\
          \ values. I moved to whisper after several attempts. Good luck with fine-tuning,\
          \ if you find a good one please sharing with us. Thanks. </p>\n"
        raw: '@kli017 Hi, you can play with the learning rate and warmup _steps. However,
          I don''t know the exact values. I moved to whisper after several attempts.
          Good luck with fine-tuning, if you find a good one please sharing with us.
          Thanks. '
        updatedAt: '2024-01-22T01:45:29.832Z'
      numEdits: 0
      reactions: []
    id: 65adc8b9c3fa44c7109f5610
    type: comment
  author: osman
  content: '@kli017 Hi, you can play with the learning rate and warmup _steps. However,
    I don''t know the exact values. I moved to whisper after several attempts. Good
    luck with fine-tuning, if you find a good one please sharing with us. Thanks. '
  created_at: 2024-01-22 01:45:29+00:00
  edited: false
  hidden: false
  id: 65adc8b9c3fa44c7109f5610
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: lucio/xls-r-uyghur-cv8
repo_type: model
status: closed
target_branch: null
title: Poor WER results on CV_15
