!!python/object:huggingface_hub.community.DiscussionWithDetails
author: leons05
conflicting_files: null
created_at: 2023-10-30 13:23:32+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
      fullname: Schmitt
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: leons05
      type: user
    createdAt: '2023-10-30T14:23:32.000Z'
    data:
      edited: false
      editors:
      - leons05
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9650976061820984
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
          fullname: Schmitt
          isHf: false
          isPro: false
          name: leons05
          type: user
        html: '<p>I want to thank you for your work. The model works really well!</p>

          <p>However, I have a problem with RAG with memory.<br>Could you send me
          a prompt template with RAG + Memory ?<br>If I just put the chat history
          into the RAG template it doesn''t work.</p>

          <p>Thanks in advance</p>

          '
        raw: "I want to thank you for your work. The model works really well!\r\n\r\
          \nHowever, I have a problem with RAG with memory.\r\nCould you send me a\
          \ prompt template with RAG + Memory ? \r\nIf I just put the chat history\
          \ into the RAG template it doesn't work.\r\n\r\nThanks in advance"
        updatedAt: '2023-10-30T14:23:32.172Z'
      numEdits: 0
      reactions: []
    id: 653fbc64bfd89080546345a5
    type: comment
  author: leons05
  content: "I want to thank you for your work. The model works really well!\r\n\r\n\
    However, I have a problem with RAG with memory.\r\nCould you send me a prompt\
    \ template with RAG + Memory ? \r\nIf I just put the chat history into the RAG\
    \ template it doesn't work.\r\n\r\nThanks in advance"
  created_at: 2023-10-30 13:23:32+00:00
  edited: false
  hidden: false
  id: 653fbc64bfd89080546345a5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/1gCpz_Og6-LyCBXDmuOd1.jpeg?w=200&h=200&f=face
      fullname: Jan Philipp Harries
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: jphme
      type: user
    createdAt: '2023-10-31T16:09:11.000Z'
    data:
      edited: false
      editors:
      - jphme
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9365248084068298
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/1gCpz_Og6-LyCBXDmuOd1.jpeg?w=200&h=200&f=face
          fullname: Jan Philipp Harries
          isHf: false
          isPro: false
          name: jphme
          type: user
        html: '<blockquote>

          <p>I want to thank you for your work. The model works really well!</p>

          <p>However, I have a problem with RAG with memory.<br>Could you send me
          a prompt template with RAG + Memory ?<br>If I just put the chat history
          into the RAG template it doesn''t work.</p>

          <p>Thanks in advance</p>

          </blockquote>

          <p>Could you share an example? Due to the prompt format, you cant use "USER:"
          or "ASSISTANT:" in your prompts without the model getting confused (probably
          I will also switch to ChatML for the next version).</p>

          '
        raw: "> I want to thank you for your work. The model works really well!\n\
          > \n> However, I have a problem with RAG with memory.\n> Could you send\
          \ me a prompt template with RAG + Memory ? \n> If I just put the chat history\
          \ into the RAG template it doesn't work.\n> \n> Thanks in advance\n\nCould\
          \ you share an example? Due to the prompt format, you cant use \"USER:\"\
          \ or \"ASSISTANT:\" in your prompts without the model getting confused (probably\
          \ I will also switch to ChatML for the next version)."
        updatedAt: '2023-10-31T16:09:11.947Z'
      numEdits: 0
      reactions: []
    id: 654126a7deee4716f1dcd0cd
    type: comment
  author: jphme
  content: "> I want to thank you for your work. The model works really well!\n> \n\
    > However, I have a problem with RAG with memory.\n> Could you send me a prompt\
    \ template with RAG + Memory ? \n> If I just put the chat history into the RAG\
    \ template it doesn't work.\n> \n> Thanks in advance\n\nCould you share an example?\
    \ Due to the prompt format, you cant use \"USER:\" or \"ASSISTANT:\" in your prompts\
    \ without the model getting confused (probably I will also switch to ChatML for\
    \ the next version)."
  created_at: 2023-10-31 15:09:11+00:00
  edited: false
  hidden: false
  id: 654126a7deee4716f1dcd0cd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
      fullname: Schmitt
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: leons05
      type: user
    createdAt: '2023-11-01T19:24:05.000Z'
    data:
      edited: false
      editors:
      - leons05
      hidden: false
      identifiedLanguage:
        language: de
        probability: 0.96595698595047
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
          fullname: Schmitt
          isHf: false
          isPro: false
          name: leons05
          type: user
        html: "<p>I have used something like this:</p>\n<p>Du bist ein hilfreicher\
          \ Assistent. F\xFCr die folgende Aufgabe stehen dir zwischen den tags BEGININPUT\
          \ und ENDINPUT mehrere Quellen zur Verf\xFCgung. Metadaten zu den einzelnen\
          \ Quellen wie Autor, URL o.\xE4. sind zwischen BEGINCONTEXT und ENDCONTEXT\
          \ zu finden, danach folgt der Text der Quelle. Die eigentliche Aufgabe oder\
          \ Frage ist zwischen BEGININSTRUCTION und ENDINCSTRUCTION zu finden. Beantworte\
          \ diese wortw\xF6rtlich mit einem Zitat aus den Quellen. Sollten diese keine\
          \ Antwort enthalten, antworte, dass auf Basis der gegebenen Informationen\
          \ keine Antwort m\xF6glich ist! USER: BEGININPUT<br>BEGINCONTEXT<br>ENDCONTEXT<br>Chat\
          \ History: {chat history}<br>Context: {context}<br>ENDINPUT<br>BEGININSTRUCTION\
          \ {question} ENDINSTRUCTION ASSISTANT:</p>\n<p>I have tried to use it without\
          \ any sources.</p>\n"
        raw: "I have used something like this:\n\nDu bist ein hilfreicher Assistent.\
          \ F\xFCr die folgende Aufgabe stehen dir zwischen den tags BEGININPUT und\
          \ ENDINPUT mehrere Quellen zur Verf\xFCgung. Metadaten zu den einzelnen\
          \ Quellen wie Autor, URL o.\xE4. sind zwischen BEGINCONTEXT und ENDCONTEXT\
          \ zu finden, danach folgt der Text der Quelle. Die eigentliche Aufgabe oder\
          \ Frage ist zwischen BEGININSTRUCTION und ENDINCSTRUCTION zu finden. Beantworte\
          \ diese wortw\xF6rtlich mit einem Zitat aus den Quellen. Sollten diese keine\
          \ Antwort enthalten, antworte, dass auf Basis der gegebenen Informationen\
          \ keine Antwort m\xF6glich ist! USER: BEGININPUT\nBEGINCONTEXT\nENDCONTEXT\
          \ \nChat History: {chat history}\nContext: {context}\nENDINPUT\nBEGININSTRUCTION\
          \ {question} ENDINSTRUCTION ASSISTANT:\n\nI have tried to use it without\
          \ any sources."
        updatedAt: '2023-11-01T19:24:05.881Z'
      numEdits: 0
      reactions: []
    id: 6542a5d5e68a93e51e57db2b
    type: comment
  author: leons05
  content: "I have used something like this:\n\nDu bist ein hilfreicher Assistent.\
    \ F\xFCr die folgende Aufgabe stehen dir zwischen den tags BEGININPUT und ENDINPUT\
    \ mehrere Quellen zur Verf\xFCgung. Metadaten zu den einzelnen Quellen wie Autor,\
    \ URL o.\xE4. sind zwischen BEGINCONTEXT und ENDCONTEXT zu finden, danach folgt\
    \ der Text der Quelle. Die eigentliche Aufgabe oder Frage ist zwischen BEGININSTRUCTION\
    \ und ENDINCSTRUCTION zu finden. Beantworte diese wortw\xF6rtlich mit einem Zitat\
    \ aus den Quellen. Sollten diese keine Antwort enthalten, antworte, dass auf Basis\
    \ der gegebenen Informationen keine Antwort m\xF6glich ist! USER: BEGININPUT\n\
    BEGINCONTEXT\nENDCONTEXT \nChat History: {chat history}\nContext: {context}\n\
    ENDINPUT\nBEGININSTRUCTION {question} ENDINSTRUCTION ASSISTANT:\n\nI have tried\
    \ to use it without any sources."
  created_at: 2023-11-01 18:24:05+00:00
  edited: false
  hidden: false
  id: 6542a5d5e68a93e51e57db2b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/1gCpz_Og6-LyCBXDmuOd1.jpeg?w=200&h=200&f=face
      fullname: Jan Philipp Harries
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: jphme
      type: user
    createdAt: '2023-11-02T10:57:16.000Z'
    data:
      edited: false
      editors:
      - jphme
      hidden: false
      identifiedLanguage:
        language: de
        probability: 0.6175175309181213
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/1gCpz_Og6-LyCBXDmuOd1.jpeg?w=200&h=200&f=face
          fullname: Jan Philipp Harries
          isHf: false
          isPro: false
          name: jphme
          type: user
        html: "<blockquote>\n<p>I have used something like this:</p>\n<p>Du bist ein\
          \ hilfreicher Assistent. F\xFCr die folgende Aufgabe stehen dir zwischen\
          \ den tags BEGININPUT und ENDINPUT mehrere Quellen zur Verf\xFCgung. Metadaten\
          \ zu den einzelnen Quellen wie Autor, URL o.\xE4. sind zwischen BEGINCONTEXT\
          \ und ENDCONTEXT zu finden, danach folgt der Text der Quelle. Die eigentliche\
          \ Aufgabe oder Frage ist zwischen BEGININSTRUCTION und ENDINCSTRUCTION zu\
          \ finden. Beantworte diese wortw\xF6rtlich mit einem Zitat aus den Quellen.\
          \ Sollten diese keine Antwort enthalten, antworte, dass auf Basis der gegebenen\
          \ Informationen keine Antwort m\xF6glich ist! USER: BEGININPUT<br>BEGINCONTEXT<br>ENDCONTEXT<br>Chat\
          \ History: {chat history}<br>Context: {context}<br>ENDINPUT<br>BEGININSTRUCTION\
          \ {question} ENDINSTRUCTION ASSISTANT:</p>\n<p>I have tried to use it without\
          \ any sources.</p>\n</blockquote>\n<p>I am not surprised the model is confused\
          \ by this. The training dataset didn't contain any examples of multi-turn\
          \ conversations with the special RAG template, but generally I would recommend\
          \ to just prepend the  Chat history like normal (USER:  .... ASSISTANT:\
          \ ..... USER: .... ASSISTANT: ....) or (if its an unrelated chat history)\
          \ try converting it into a format thats very different from the main template\
          \ (e.g. JSON).<br>If you would describe your use case in more detail, that\
          \ would be helpful to add training data for this scenario/use case for future\
          \ model versions... </p>\n"
        raw: "> I have used something like this:\n> \n> Du bist ein hilfreicher Assistent.\
          \ F\xFCr die folgende Aufgabe stehen dir zwischen den tags BEGININPUT und\
          \ ENDINPUT mehrere Quellen zur Verf\xFCgung. Metadaten zu den einzelnen\
          \ Quellen wie Autor, URL o.\xE4. sind zwischen BEGINCONTEXT und ENDCONTEXT\
          \ zu finden, danach folgt der Text der Quelle. Die eigentliche Aufgabe oder\
          \ Frage ist zwischen BEGININSTRUCTION und ENDINCSTRUCTION zu finden. Beantworte\
          \ diese wortw\xF6rtlich mit einem Zitat aus den Quellen. Sollten diese keine\
          \ Antwort enthalten, antworte, dass auf Basis der gegebenen Informationen\
          \ keine Antwort m\xF6glich ist! USER: BEGININPUT\n> BEGINCONTEXT\n> ENDCONTEXT\
          \ \n> Chat History: {chat history}\n> Context: {context}\n> ENDINPUT\n>\
          \ BEGININSTRUCTION {question} ENDINSTRUCTION ASSISTANT:\n> \n> I have tried\
          \ to use it without any sources.\n\nI am not surprised the model is confused\
          \ by this. The training dataset didn't contain any examples of multi-turn\
          \ conversations with the special RAG template, but generally I would recommend\
          \ to just prepend the  Chat history like normal (USER:  .... ASSISTANT:\
          \ ..... USER: .... ASSISTANT: ....) or (if its an unrelated chat history)\
          \ try converting it into a format thats very different from the main template\
          \ (e.g. JSON).\nIf you would describe your use case in more detail, that\
          \ would be helpful to add training data for this scenario/use case for future\
          \ model versions... "
        updatedAt: '2023-11-02T10:57:16.311Z'
      numEdits: 0
      reactions: []
    id: 6543808c91a22f5a119172db
    type: comment
  author: jphme
  content: "> I have used something like this:\n> \n> Du bist ein hilfreicher Assistent.\
    \ F\xFCr die folgende Aufgabe stehen dir zwischen den tags BEGININPUT und ENDINPUT\
    \ mehrere Quellen zur Verf\xFCgung. Metadaten zu den einzelnen Quellen wie Autor,\
    \ URL o.\xE4. sind zwischen BEGINCONTEXT und ENDCONTEXT zu finden, danach folgt\
    \ der Text der Quelle. Die eigentliche Aufgabe oder Frage ist zwischen BEGININSTRUCTION\
    \ und ENDINCSTRUCTION zu finden. Beantworte diese wortw\xF6rtlich mit einem Zitat\
    \ aus den Quellen. Sollten diese keine Antwort enthalten, antworte, dass auf Basis\
    \ der gegebenen Informationen keine Antwort m\xF6glich ist! USER: BEGININPUT\n\
    > BEGINCONTEXT\n> ENDCONTEXT \n> Chat History: {chat history}\n> Context: {context}\n\
    > ENDINPUT\n> BEGININSTRUCTION {question} ENDINSTRUCTION ASSISTANT:\n> \n> I have\
    \ tried to use it without any sources.\n\nI am not surprised the model is confused\
    \ by this. The training dataset didn't contain any examples of multi-turn conversations\
    \ with the special RAG template, but generally I would recommend to just prepend\
    \ the  Chat history like normal (USER:  .... ASSISTANT: ..... USER: .... ASSISTANT:\
    \ ....) or (if its an unrelated chat history) try converting it into a format\
    \ thats very different from the main template (e.g. JSON).\nIf you would describe\
    \ your use case in more detail, that would be helpful to add training data for\
    \ this scenario/use case for future model versions... "
  created_at: 2023-11-02 09:57:16+00:00
  edited: false
  hidden: false
  id: 6543808c91a22f5a119172db
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
      fullname: Schmitt
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: leons05
      type: user
    createdAt: '2023-11-02T13:44:33.000Z'
    data:
      edited: false
      editors:
      - leons05
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.92952960729599
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/247c1a394f18f8cf7311f9bcca8101c5.svg
          fullname: Schmitt
          isHf: false
          isPro: false
          name: leons05
          type: user
        html: '<p>Okay thanks, I will check, if I can improve my results. I will get
          back to you afterwards.</p>

          '
        raw: Okay thanks, I will check, if I can improve my results. I will get back
          to you afterwards.
        updatedAt: '2023-11-02T13:44:33.779Z'
      numEdits: 0
      reactions: []
    id: 6543a7c18d58dc713f06bd8b
    type: comment
  author: leons05
  content: Okay thanks, I will check, if I can improve my results. I will get back
    to you afterwards.
  created_at: 2023-11-02 12:44:33+00:00
  edited: false
  hidden: false
  id: 6543a7c18d58dc713f06bd8b
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: jphme/em_german_13b_v01
repo_type: model
status: open
target_branch: null
title: Prompt Format for RAG with Memory
