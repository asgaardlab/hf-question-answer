!!python/object:huggingface_hub.community.DiscussionWithDetails
author: natolambert
conflicting_files: null
created_at: 2023-01-05 17:42:14+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653497705818-noauth.png?w=200&h=200&f=face
      fullname: Nathan Lambert
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: natolambert
      type: user
    createdAt: '2023-01-05T17:42:14.000Z'
    data:
      edited: false
      editors:
      - natolambert
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653497705818-noauth.png?w=200&h=200&f=face
          fullname: Nathan Lambert
          isHf: false
          isPro: false
          name: natolambert
          type: user
        html: '<p>Do the authors know if everything is set up correctly for the inference
          API. Playing with some questions, it seems to not remember any past discussions
          and output totally random stuff?</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1672940495895-628e5f90a9a3c754c1f7c88f.png"><img
          alt="image (19).png" src="https://cdn-uploads.huggingface.co/production/uploads/1672940495895-628e5f90a9a3c754c1f7c88f.png"></a></p>

          '
        raw: "Do the authors know if everything is set up correctly for the inference\
          \ API. Playing with some questions, it seems to not remember any past discussions\
          \ and output totally random stuff?\r\n\r\n![image (19).png](https://cdn-uploads.huggingface.co/production/uploads/1672940495895-628e5f90a9a3c754c1f7c88f.png)\r\
          \n"
        updatedAt: '2023-01-05T17:42:14.855Z'
      numEdits: 0
      reactions: []
    id: 63b70bf652c02ae8acbbd33c
    type: comment
  author: natolambert
  content: "Do the authors know if everything is set up correctly for the inference\
    \ API. Playing with some questions, it seems to not remember any past discussions\
    \ and output totally random stuff?\r\n\r\n![image (19).png](https://cdn-uploads.huggingface.co/production/uploads/1672940495895-628e5f90a9a3c754c1f7c88f.png)\r\
    \n"
  created_at: 2023-01-05 17:42:14+00:00
  edited: false
  hidden: false
  id: 63b70bf652c02ae8acbbd33c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
      fullname: Justlearn
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Justlearn
      type: user
    createdAt: '2023-01-05T19:04:04.000Z'
    data:
      edited: false
      editors:
      - Justlearn
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
          fullname: Justlearn
          isHf: false
          isPro: false
          name: Justlearn
          type: user
        html: '<p>It works fine, when I run on my local pc using transformers</p>

          '
        raw: It works fine, when I run on my local pc using transformers
        updatedAt: '2023-01-05T19:04:04.779Z'
      numEdits: 0
      reactions: []
    id: 63b71f24ec5c995fdecf84c9
    type: comment
  author: Justlearn
  content: It works fine, when I run on my local pc using transformers
  created_at: 2023-01-05 19:04:04+00:00
  edited: false
  hidden: false
  id: 63b71f24ec5c995fdecf84c9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
      fullname: Justlearn
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Justlearn
      type: user
    createdAt: '2023-01-05T19:04:30.000Z'
    data:
      edited: false
      editors:
      - Justlearn
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
          fullname: Justlearn
          isHf: false
          isPro: false
          name: Justlearn
          type: user
        html: '<p>Do you know how to setup chat history properly?<br>I write<br>dialogue
          = [<br>    "Jakob said. I have a black dog.",<br>    "Philip said. My name
          is Philip",<br>    "Jakob said. Cool!",<br>    "Philip said. My dog''s name
          is Andi"<br>]</p>

          '
        raw: "Do you know how to setup chat history properly?\nI write\ndialogue =\
          \ [\n    \"Jakob said. I have a black dog.\",\n    \"Philip said. My name\
          \ is Philip\",\n    \"Jakob said. Cool!\",\n    \"Philip said. My dog's\
          \ name is Andi\"\n]"
        updatedAt: '2023-01-05T19:04:30.439Z'
      numEdits: 0
      reactions: []
    id: 63b71f3e1b10e5b4493c64e5
    type: comment
  author: Justlearn
  content: "Do you know how to setup chat history properly?\nI write\ndialogue = [\n\
    \    \"Jakob said. I have a black dog.\",\n    \"Philip said. My name is Philip\"\
    ,\n    \"Jakob said. Cool!\",\n    \"Philip said. My dog's name is Andi\"\n]"
  created_at: 2023-01-05 19:04:30+00:00
  edited: false
  hidden: false
  id: 63b71f3e1b10e5b4493c64e5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666754635237-627a8c1793d0b645835e65f0.jpeg?w=200&h=200&f=face
      fullname: Hyunwoo Kim
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: heanu
      type: user
    createdAt: '2023-01-06T02:43:29.000Z'
    data:
      edited: false
      editors:
      - heanu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666754635237-627a8c1793d0b645835e65f0.jpeg?w=200&h=200&f=face
          fullname: Hyunwoo Kim
          isHf: false
          isPro: false
          name: heanu
          type: user
        html: "<p>I'm not sure how the Inference API works, but Cosmo uses the special\
          \ token  to separate the utterances in the dialogue history.<br>The dialogue\
          \ history should be given in a string format as the following:<br><code>utterance1\
          \ &lt;TURN&gt; utterance2 &lt;TURN&gt; ... &lt;TURN&gt; last utterance</code><br>Please\
          \ follow the \"<b>How to use</b>\" section in the model card :)</p>\n<p>The\
          \ utterances don't have to be prepended with \"Jakob said.\" or \"David\
          \ said.\"<br>You can simply prompt Cosmo with a role instruction.</p>\n\
          <p>Below is an example according to the \"How to use\" section:</p>\n<pre><code\
          \ class=\"language-python\">situation = <span class=\"hljs-string\">\"\"\
          </span>  <span class=\"hljs-comment\"># You can put some situation description</span>\n\
          instruction = <span class=\"hljs-string\">\"You are Jakob and you are talking\
          \ with Philip.\"</span>\ndialogue = [\n    <span class=\"hljs-string\">\"\
          I have a black dog.\"</span>,\n   <span class=\"hljs-string\">\"My name\
          \ is Philip.\"</span>,\n   <span class=\"hljs-string\">\"Cool!\"</span>,\n\
          \   <span class=\"hljs-string\">\"My dog's name is Andi\"</span>\n]\n\n\
          response = generate(situation, instruction, dialogue)\n<span class=\"hljs-built_in\"\
          >print</span>(response)\n</code></pre>\n"
        raw: "I'm not sure how the Inference API works, but Cosmo uses the special\
          \ token <TURN> to separate the utterances in the dialogue history.\nThe\
          \ dialogue history should be given in a string format as the following:\n\
          `utterance1 <TURN> utterance2 <TURN> ... <TURN> last utterance`\nPlease\
          \ follow the \"<b>How to use</b>\" section in the model card :)\n\nThe utterances\
          \ don't have to be prepended with \"Jakob said.\" or \"David said.\"\nYou\
          \ can simply prompt Cosmo with a role instruction.\n\nBelow is an example\
          \ according to the \"How to use\" section:\n```python\nsituation = \"\"\
          \  # You can put some situation description\ninstruction = \"You are Jakob\
          \ and you are talking with Philip.\"\ndialogue = [\n    \"I have a black\
          \ dog.\",\n   \"My name is Philip.\",\n   \"Cool!\",\n   \"My dog's name\
          \ is Andi\"\n]\n\nresponse = generate(situation, instruction, dialogue)\n\
          print(response)\n```"
        updatedAt: '2023-01-06T02:43:29.139Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - Justlearn
    id: 63b78ad17d28b0beae78f1a4
    type: comment
  author: heanu
  content: "I'm not sure how the Inference API works, but Cosmo uses the special token\
    \ <TURN> to separate the utterances in the dialogue history.\nThe dialogue history\
    \ should be given in a string format as the following:\n`utterance1 <TURN> utterance2\
    \ <TURN> ... <TURN> last utterance`\nPlease follow the \"<b>How to use</b>\" section\
    \ in the model card :)\n\nThe utterances don't have to be prepended with \"Jakob\
    \ said.\" or \"David said.\"\nYou can simply prompt Cosmo with a role instruction.\n\
    \nBelow is an example according to the \"How to use\" section:\n```python\nsituation\
    \ = \"\"  # You can put some situation description\ninstruction = \"You are Jakob\
    \ and you are talking with Philip.\"\ndialogue = [\n    \"I have a black dog.\"\
    ,\n   \"My name is Philip.\",\n   \"Cool!\",\n   \"My dog's name is Andi\"\n]\n\
    \nresponse = generate(situation, instruction, dialogue)\nprint(response)\n```"
  created_at: 2023-01-06 02:43:29+00:00
  edited: false
  hidden: false
  id: 63b78ad17d28b0beae78f1a4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
      fullname: Justlearn
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Justlearn
      type: user
    createdAt: '2023-01-06T08:23:56.000Z'
    data:
      edited: false
      editors:
      - Justlearn
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1654268089989-noauth.png?w=200&h=200&f=face
          fullname: Justlearn
          isHf: false
          isPro: false
          name: Justlearn
          type: user
        html: '<p>How does Cosmo know what Jakob and Philip said. Philip and Jakob
          can send many messages at the same time.</p>

          <p>instruction = "You are Jakob and you are talking with Philip."<br>dialogue
          = [<br>     "Philip: I have a black rat.",<br>     "Jakob: I have a black
          bird.",<br>    "Jakob: I have a black cat.",<br>    "Jakob: I have a black
          dog.",<br>   "Philip: My name is Philip.",<br>   "Jakob: Cool!",<br>   "Philip:
          What animals do you have?"<br>]</p>

          <p>VS</p>

          <p>instruction = "You are Jakob and you are talking with Philip."<br>dialogue
          = [<br>     "I have a black rat.",<br>     "I have a black bird.",<br>    "I
          have a black cat.",<br>    "I have a black dog.",<br>   "My name is Philip.",<br>   "Cool!",<br>   "What
          animals do you have?"<br>]</p>

          <p>VS<br>(Or do you suggest to combine the many messages?)<br>instruction
          = "You are Jakob and you are talking with Philip."<br>dialogue = [<br>    "I
          have a black rat.",<br>    "I have a black bird. I have a black cat. I have
          a black dog.",<br>   "My name is Philip.",<br>   "Cool!",<br>   "What animals
          do you have?"<br>]</p>

          '
        raw: "How does Cosmo know what Jakob and Philip said. Philip and Jakob can\
          \ send many messages at the same time.\n\ninstruction = \"You are Jakob\
          \ and you are talking with Philip.\"\ndialogue = [\n     \"Philip: I have\
          \ a black rat.\",\n     \"Jakob: I have a black bird.\",\n    \"Jakob: I\
          \ have a black cat.\",\n    \"Jakob: I have a black dog.\",\n   \"Philip:\
          \ My name is Philip.\",\n   \"Jakob: Cool!\",\n   \"Philip: What animals\
          \ do you have?\"\n]\n\nVS\n\ninstruction = \"You are Jakob and you are talking\
          \ with Philip.\"\ndialogue = [\n     \"I have a black rat.\",\n     \"I\
          \ have a black bird.\",\n    \"I have a black cat.\",\n    \"I have a black\
          \ dog.\",\n   \"My name is Philip.\",\n   \"Cool!\",\n   \"What animals\
          \ do you have?\"\n]\n\nVS\n(Or do you suggest to combine the many messages?)\n\
          instruction = \"You are Jakob and you are talking with Philip.\"\ndialogue\
          \ = [\n    \"I have a black rat.\",\n    \"I have a black bird. I have a\
          \ black cat. I have a black dog.\",\n   \"My name is Philip.\",\n   \"Cool!\"\
          ,\n   \"What animals do you have?\"\n]"
        updatedAt: '2023-01-06T08:23:56.651Z'
      numEdits: 0
      reactions: []
    id: 63b7da9cc48390f07de786dd
    type: comment
  author: Justlearn
  content: "How does Cosmo know what Jakob and Philip said. Philip and Jakob can send\
    \ many messages at the same time.\n\ninstruction = \"You are Jakob and you are\
    \ talking with Philip.\"\ndialogue = [\n     \"Philip: I have a black rat.\",\n\
    \     \"Jakob: I have a black bird.\",\n    \"Jakob: I have a black cat.\",\n\
    \    \"Jakob: I have a black dog.\",\n   \"Philip: My name is Philip.\",\n   \"\
    Jakob: Cool!\",\n   \"Philip: What animals do you have?\"\n]\n\nVS\n\ninstruction\
    \ = \"You are Jakob and you are talking with Philip.\"\ndialogue = [\n     \"\
    I have a black rat.\",\n     \"I have a black bird.\",\n    \"I have a black cat.\"\
    ,\n    \"I have a black dog.\",\n   \"My name is Philip.\",\n   \"Cool!\",\n \
    \  \"What animals do you have?\"\n]\n\nVS\n(Or do you suggest to combine the many\
    \ messages?)\ninstruction = \"You are Jakob and you are talking with Philip.\"\
    \ndialogue = [\n    \"I have a black rat.\",\n    \"I have a black bird. I have\
    \ a black cat. I have a black dog.\",\n   \"My name is Philip.\",\n   \"Cool!\"\
    ,\n   \"What animals do you have?\"\n]"
  created_at: 2023-01-06 08:23:56+00:00
  edited: false
  hidden: false
  id: 63b7da9cc48390f07de786dd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641390233716-60bccec062080d33f875cd0c.png?w=200&h=200&f=face
      fullname: Peter Szemraj
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: pszemraj
      type: user
    createdAt: '2023-01-06T11:47:08.000Z'
    data:
      edited: true
      editors:
      - pszemraj
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641390233716-60bccec062080d33f875cd0c.png?w=200&h=200&f=face
          fullname: Peter Szemraj
          isHf: false
          isPro: false
          name: pszemraj
          type: user
        html: '<p>same here. if the inference requires special tokens etc, perhaps
          better to set the <code>pipeline_tag</code> as <code>text-to-text generation</code>
          ?</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1673005597614-60bccec062080d33f875cd0c.jpeg"><img
          alt="part one" src="https://cdn-uploads.huggingface.co/production/uploads/1673005597614-60bccec062080d33f875cd0c.jpeg"></a></p>

          <hr>

          <p><a rel="nofollow" href="https://i.imgur.com/8grIG9Y.png"><img alt="part
          two" src="https://i.imgur.com/8grIG9Y.png"></a></p>

          '
        raw: 'same here. if the inference requires special tokens etc, perhaps better
          to set the `pipeline_tag` as `text-to-text generation` ?



          ![part one](https://cdn-uploads.huggingface.co/production/uploads/1673005597614-60bccec062080d33f875cd0c.jpeg)


          ---

          ![part two](https://i.imgur.com/8grIG9Y.png)'
        updatedAt: '2023-01-06T11:48:06.807Z'
      numEdits: 1
      reactions: []
    id: 63b80a3c0d814c2001a2314f
    type: comment
  author: pszemraj
  content: 'same here. if the inference requires special tokens etc, perhaps better
    to set the `pipeline_tag` as `text-to-text generation` ?



    ![part one](https://cdn-uploads.huggingface.co/production/uploads/1673005597614-60bccec062080d33f875cd0c.jpeg)


    ---

    ![part two](https://i.imgur.com/8grIG9Y.png)'
  created_at: 2023-01-06 11:47:08+00:00
  edited: true
  hidden: false
  id: 63b80a3c0d814c2001a2314f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666754635237-627a8c1793d0b645835e65f0.jpeg?w=200&h=200&f=face
      fullname: Hyunwoo Kim
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: heanu
      type: user
    createdAt: '2023-01-08T07:04:23.000Z'
    data:
      edited: false
      editors:
      - heanu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666754635237-627a8c1793d0b645835e65f0.jpeg?w=200&h=200&f=face
          fullname: Hyunwoo Kim
          isHf: false
          isPro: false
          name: heanu
          type: user
        html: '<p>Yes, the inference API for Cosmo is not working correctly :(<br>We
          added a simple demo code for having a chat with Cosmo in our <a rel="nofollow"
          href="https://hyunw.kim/sodaverse">official repository</a>, please try it
          out! </p>

          '
        raw: 'Yes, the inference API for Cosmo is not working correctly :(

          We added a simple demo code for having a chat with Cosmo in our [official
          repository](https://hyunw.kim/sodaverse), please try it out! '
        updatedAt: '2023-01-08T07:04:23.375Z'
      numEdits: 0
      reactions: []
      relatedEventId: 63ba6af74fd510c66fd36ea0
    id: 63ba6af74fd510c66fd36e9f
    type: comment
  author: heanu
  content: 'Yes, the inference API for Cosmo is not working correctly :(

    We added a simple demo code for having a chat with Cosmo in our [official repository](https://hyunw.kim/sodaverse),
    please try it out! '
  created_at: 2023-01-08 07:04:23+00:00
  edited: false
  hidden: false
  id: 63ba6af74fd510c66fd36e9f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666754635237-627a8c1793d0b645835e65f0.jpeg?w=200&h=200&f=face
      fullname: Hyunwoo Kim
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: heanu
      type: user
    createdAt: '2023-01-08T07:04:23.000Z'
    data:
      status: closed
    id: 63ba6af74fd510c66fd36ea0
    type: status-change
  author: heanu
  created_at: 2023-01-08 07:04:23+00:00
  id: 63ba6af74fd510c66fd36ea0
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: allenai/cosmo-xl
repo_type: model
status: closed
target_branch: null
title: Weird model outputs in the inference API
