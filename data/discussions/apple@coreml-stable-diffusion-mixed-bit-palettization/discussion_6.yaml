!!python/object:huggingface_hub.community.DiscussionWithDetails
author: zothcorp
conflicting_files: null
created_at: 2023-10-05 16:27:24+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
      fullname: KP Kaiser
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zothcorp
      type: user
    createdAt: '2023-10-05T17:27:24.000Z'
    data:
      edited: false
      editors:
      - zothcorp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.88707035779953
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
          fullname: KP Kaiser
          isHf: false
          isPro: false
          name: zothcorp
          type: user
        html: '<p>Thanks for the work on the model.</p>

          <p>On both this repo and the <code>coreml-stable-diffusion-xl-base</code>there
          are wrong / no instructions for how to load and use the model with <code>diffusers</code>.
          </p>

          <p>In fact, the <code>coreml-stable-difusion-xl-base</code> README currently
          says to use <code>cuda</code>, which certainly won''t work.</p>

          <p>Any chance we can add an example Python script that works for either
          / both?</p>

          '
        raw: "Thanks for the work on the model.\r\n\r\nOn both this repo and the `coreml-stable-diffusion-xl-base`there\
          \ are wrong / no instructions for how to load and use the model with `diffusers`.\
          \ \r\n\r\nIn fact, the `coreml-stable-difusion-xl-base` README currently\
          \ says to use `cuda`, which certainly won't work.\r\n\r\nAny chance we can\
          \ add an example Python script that works for either / both?\r\n"
        updatedAt: '2023-10-05T17:27:24.288Z'
      numEdits: 0
      reactions: []
    id: 651ef1fc4376ae05d612da5a
    type: comment
  author: zothcorp
  content: "Thanks for the work on the model.\r\n\r\nOn both this repo and the `coreml-stable-diffusion-xl-base`there\
    \ are wrong / no instructions for how to load and use the model with `diffusers`.\
    \ \r\n\r\nIn fact, the `coreml-stable-difusion-xl-base` README currently says\
    \ to use `cuda`, which certainly won't work.\r\n\r\nAny chance we can add an example\
    \ Python script that works for either / both?\r\n"
  created_at: 2023-10-05 16:27:24+00:00
  edited: false
  hidden: false
  id: 651ef1fc4376ae05d612da5a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
      fullname: KP Kaiser
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zothcorp
      type: user
    createdAt: '2023-10-05T20:59:56.000Z'
    data:
      edited: false
      editors:
      - zothcorp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8036976456642151
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
          fullname: KP Kaiser
          isHf: false
          isPro: false
          name: zothcorp
          type: user
        html: '<p>Ah, for those who are looking for an example using <code>diffusers</code>,
          you can just look here:</p>

          <p><a rel="nofollow" href="https://github.com/apple/ml-stable-diffusion">https://github.com/apple/ml-stable-diffusion</a></p>

          <p>In there, there''s a Python library that <em>uses</em> <code>diffusers</code>.
          It''s not very straightforward, but you''ll need to install that library
          using a:</p>

          <pre><code>$ pip install git+https://github.com/apple/ml-stable-diffusion

          </code></pre>

          <p>From there you''ll be able to do a :</p>

          <pre><code>from python_coreml_stable_diffusion.pipeline import  get_coreml_pipe

          </code></pre>

          <p>If you look at the source code for the <code>pipeline.py</code> file,
          you''ll see the process for loading and running SD on one of the models:</p>

          <p><a rel="nofollow" href="https://github.com/apple/ml-stable-diffusion/blob/main/python_coreml_stable_diffusion/pipeline.py#L694">https://github.com/apple/ml-stable-diffusion/blob/main/python_coreml_stable_diffusion/pipeline.py#L694</a></p>

          <p>Once I get it up and running I''ll write a blog post.</p>

          '
        raw: 'Ah, for those who are looking for an example using `diffusers`, you
          can just look here:


          https://github.com/apple/ml-stable-diffusion


          In there, there''s a Python library that _uses_ `diffusers`. It''s not very
          straightforward, but you''ll need to install that library using a:


          ```

          $ pip install git+https://github.com/apple/ml-stable-diffusion

          ```


          From there you''ll be able to do a :


          ```

          from python_coreml_stable_diffusion.pipeline import  get_coreml_pipe

          ```


          If you look at the source code for the `pipeline.py` file, you''ll see the
          process for loading and running SD on one of the models:


          https://github.com/apple/ml-stable-diffusion/blob/main/python_coreml_stable_diffusion/pipeline.py#L694


          Once I get it up and running I''ll write a blog post.'
        updatedAt: '2023-10-05T20:59:56.719Z'
      numEdits: 0
      reactions: []
    id: 651f23cc755e92f7f1318343
    type: comment
  author: zothcorp
  content: 'Ah, for those who are looking for an example using `diffusers`, you can
    just look here:


    https://github.com/apple/ml-stable-diffusion


    In there, there''s a Python library that _uses_ `diffusers`. It''s not very straightforward,
    but you''ll need to install that library using a:


    ```

    $ pip install git+https://github.com/apple/ml-stable-diffusion

    ```


    From there you''ll be able to do a :


    ```

    from python_coreml_stable_diffusion.pipeline import  get_coreml_pipe

    ```


    If you look at the source code for the `pipeline.py` file, you''ll see the process
    for loading and running SD on one of the models:


    https://github.com/apple/ml-stable-diffusion/blob/main/python_coreml_stable_diffusion/pipeline.py#L694


    Once I get it up and running I''ll write a blog post.'
  created_at: 2023-10-05 19:59:56+00:00
  edited: false
  hidden: false
  id: 651f23cc755e92f7f1318343
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
      fullname: KP Kaiser
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zothcorp
      type: user
    createdAt: '2023-10-06T15:59:15.000Z'
    data:
      edited: false
      editors:
      - zothcorp
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9349483847618103
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/72e0ded7ea553d7b58ed2e2483431655.svg
          fullname: KP Kaiser
          isHf: false
          isPro: false
          name: zothcorp
          type: user
        html: '<p>Hmm after trying this with the models I''m not sure it actually
          works. </p>

          <p>Despite the models being compiled, when I run for the first time, the
          compilation happens all over again. In the case of UNet, it ended up taking
          10s of minutes. (I unzipped the compiled <code>.mlmodelc</code> files in
          my directory.)</p>

          <p>Once I got the models compiled, when Stable Diffusion begins the pipeline,
          I get a "Error computing NN outputs.". It seems it''s happening when the
          text_encoder is running.</p>

          '
        raw: "Hmm after trying this with the models I'm not sure it actually works.\
          \ \n\nDespite the models being compiled, when I run for the first time,\
          \ the compilation happens all over again. In the case of UNet, it ended\
          \ up taking 10s of minutes. (I unzipped the compiled `.mlmodelc` files in\
          \ my directory.)\n\nOnce I got the models compiled, when Stable Diffusion\
          \ begins the pipeline, I get a \"Error computing NN outputs.\". It seems\
          \ it's happening when the text_encoder is running."
        updatedAt: '2023-10-06T15:59:15.707Z'
      numEdits: 0
      reactions: []
    id: 65202ed354967a3a4979a858
    type: comment
  author: zothcorp
  content: "Hmm after trying this with the models I'm not sure it actually works.\
    \ \n\nDespite the models being compiled, when I run for the first time, the compilation\
    \ happens all over again. In the case of UNet, it ended up taking 10s of minutes.\
    \ (I unzipped the compiled `.mlmodelc` files in my directory.)\n\nOnce I got the\
    \ models compiled, when Stable Diffusion begins the pipeline, I get a \"Error\
    \ computing NN outputs.\". It seems it's happening when the text_encoder is running."
  created_at: 2023-10-06 14:59:15+00:00
  edited: false
  hidden: false
  id: 65202ed354967a3a4979a858
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: apple/coreml-stable-diffusion-mixed-bit-palettization
repo_type: model
status: open
target_branch: null
title: Add example use case in the README.md
