!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ardacik
conflicting_files: null
created_at: 2023-01-25 07:52:15+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c8daf9f4742e9c2c906b2b612f20a3b0.svg
      fullname: arda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ardacik
      type: user
    createdAt: '2023-01-25T07:52:15.000Z'
    data:
      edited: false
      editors:
      - ardacik
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c8daf9f4742e9c2c906b2b612f20a3b0.svg
          fullname: arda
          isHf: false
          isPro: false
          name: ardacik
          type: user
        html: "<p>When i try to use StableDiffusionImg2ImgPipeline it's throws this\
          \ error:</p>\n<pre><code class=\"language-python\">Traceback (most recent\
          \ call last):\n  File <span class=\"hljs-string\">\"D:\\Projeler\\animeMaker\\\
          ai\\generate.py\"</span>, line <span class=\"hljs-number\">74</span>, <span\
          \ class=\"hljs-keyword\">in</span> &lt;module&gt;\n    pipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\n\
          \  File <span class=\"hljs-string\">\"C:\\Users\\arda_\\AppData\\Local\\\
          Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\LocalCache\\\
          local-packages\\Python310\\site-packages\\diffusers\\pipeline_utils.py\"\
          </span>, line <span class=\"hljs-number\">724</span>, <span class=\"hljs-keyword\"\
          >in</span> from_pretrained\n    <span class=\"hljs-keyword\">raise</span>\
          \ ValueError(\nValueError: Pipeline &lt;<span class=\"hljs-keyword\">class</span>\
          \ <span class=\"hljs-string\">'diffusers.pipelines.stable_diffusion.pipeline_stable_diffusion_img2img.StableDiffusionImg2ImgPipeline'</span>&gt;\
          \ expected {<span class=\"hljs-string\">'feature_extractor'</span>, <span\
          \ class=\"hljs-string\">'scheduler'</span>, <span class=\"hljs-string\"\
          >'tokenizer'</span>, <span class=\"hljs-string\">'safety_checker'</span>,\
          \ <span class=\"hljs-string\">'text_encoder'</span>, <span class=\"hljs-string\"\
          >'unet'</span>, <span class=\"hljs-string\">'vae'</span>}, but only {<span\
          \ class=\"hljs-string\">'scheduler'</span>, <span class=\"hljs-string\"\
          >'tokenizer'</span>, <span class=\"hljs-string\">'text_encoder'</span>,\
          \ <span class=\"hljs-string\">'unet'</span>, <span class=\"hljs-string\"\
          >'vae'</span>} were passed.\n</code></pre>\n"
        raw: "When i try to use StableDiffusionImg2ImgPipeline it's throws this error:\r\
          \n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"D:\\Projeler\\\
          animeMaker\\ai\\generate.py\", line 74, in <module>\r\n    pipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\r\
          \n  File \"C:\\Users\\arda_\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\\
          LocalCache\\local-packages\\Python310\\site-packages\\diffusers\\pipeline_utils.py\"\
          , line 724, in from_pretrained\r\n    raise ValueError(\r\nValueError: Pipeline\
          \ <class 'diffusers.pipelines.stable_diffusion.pipeline_stable_diffusion_img2img.StableDiffusionImg2ImgPipeline'>\
          \ expected {'feature_extractor', 'scheduler', 'tokenizer', 'safety_checker',\
          \ 'text_encoder', 'unet', 'vae'}, but only {'scheduler', 'tokenizer', 'text_encoder',\
          \ 'unet', 'vae'} were passed.\r\n```"
        updatedAt: '2023-01-25T07:52:15.090Z'
      numEdits: 0
      reactions: []
    id: 63d0dfaff7f31a66a2c9b2fc
    type: comment
  author: ardacik
  content: "When i try to use StableDiffusionImg2ImgPipeline it's throws this error:\r\
    \n\r\n```python\r\nTraceback (most recent call last):\r\n  File \"D:\\Projeler\\\
    animeMaker\\ai\\generate.py\", line 74, in <module>\r\n    pipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\r\
    \n  File \"C:\\Users\\arda_\\AppData\\Local\\Packages\\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\\\
    LocalCache\\local-packages\\Python310\\site-packages\\diffusers\\pipeline_utils.py\"\
    , line 724, in from_pretrained\r\n    raise ValueError(\r\nValueError: Pipeline\
    \ <class 'diffusers.pipelines.stable_diffusion.pipeline_stable_diffusion_img2img.StableDiffusionImg2ImgPipeline'>\
    \ expected {'feature_extractor', 'scheduler', 'tokenizer', 'safety_checker', 'text_encoder',\
    \ 'unet', 'vae'}, but only {'scheduler', 'tokenizer', 'text_encoder', 'unet',\
    \ 'vae'} were passed.\r\n```"
  created_at: 2023-01-25 07:52:15+00:00
  edited: false
  hidden: false
  id: 63d0dfaff7f31a66a2c9b2fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5f95a2666e4548cc5c6579b71cfd9444.svg
      fullname: not_someone
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: not-someone
      type: user
    createdAt: '2023-01-25T13:07:52.000Z'
    data:
      edited: false
      editors:
      - not-someone
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5f95a2666e4548cc5c6579b71cfd9444.svg
          fullname: not_someone
          isHf: false
          isPro: false
          name: not-someone
          type: user
        html: '<p>Set requires_safety_checker to false I guess. The model works, there''s
          something wrong with your code</p>

          '
        raw: Set requires_safety_checker to false I guess. The model works, there's
          something wrong with your code
        updatedAt: '2023-01-25T13:07:52.049Z'
      numEdits: 0
      reactions: []
      relatedEventId: 63d129a81d49cad8aba5dd39
    id: 63d129a81d49cad8aba5dd38
    type: comment
  author: not-someone
  content: Set requires_safety_checker to false I guess. The model works, there's
    something wrong with your code
  created_at: 2023-01-25 13:07:52+00:00
  edited: false
  hidden: false
  id: 63d129a81d49cad8aba5dd38
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/5f95a2666e4548cc5c6579b71cfd9444.svg
      fullname: not_someone
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: not-someone
      type: user
    createdAt: '2023-01-25T13:07:52.000Z'
    data:
      status: closed
    id: 63d129a81d49cad8aba5dd39
    type: status-change
  author: not-someone
  created_at: 2023-01-25 13:07:52+00:00
  id: 63d129a81d49cad8aba5dd39
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c8daf9f4742e9c2c906b2b612f20a3b0.svg
      fullname: arda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ardacik
      type: user
    createdAt: '2023-01-25T13:37:00.000Z'
    data:
      edited: true
      editors:
      - ardacik
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c8daf9f4742e9c2c906b2b612f20a3b0.svg
          fullname: arda
          isHf: false
          isPro: false
          name: ardacik
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;not-someone&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/not-someone\"\
          >@<span class=\"underline\">not-someone</span></a></span>\n\n\t</span></span>,\
          \ it didn't work, I tried a different model with the same code, and its\
          \ work, I'm using 4 different model and all of them are fine except this</p>\n\
          <p>My code :</p>\n<pre><code class=\"language-python\">pipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\n\
          \        torch_dtype= torch.float16,\n        requires_safety_checker= <span\
          \ class=\"hljs-literal\">False</span>\n        ).to(<span class=\"hljs-string\"\
          >'cuda'</span>)\n    pipeline.enable_xformers_memory_efficient_attention()\n\
          \    pipeline.enable_attention_slicing(<span class=\"hljs-string\">\"max\"\
          </span>)\n    pipeline.scheduler = EulerDiscreteScheduler.from_config(pipeline.scheduler.config)\n\
          \    pipeline.unet.to(memory_format=torch.channels_last)\n    <span class=\"\
          hljs-keyword\">with</span> autocast(<span class=\"hljs-string\">\"cuda\"\
          </span>):\n        images = pipeline(prompt,\n        image=[im] * perImg,\n\
          \        negative_prompt = negative_prompt,\n        num_images_per_prompt=perImg,\n\
          \        num_inference_steps=<span class=\"hljs-number\">185</span>,\n \
          \       guidance_scale=scale).images\n</code></pre>\n"
        raw: "Hi @not-someone, it didn't work, I tried a different model with the\
          \ same code, and its work, I'm using 4 different model and all of them are\
          \ fine except this\n\nMy code :\n```python\npipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\n\
          \        torch_dtype= torch.float16,\n        requires_safety_checker= False\n\
          \        ).to('cuda')\n    pipeline.enable_xformers_memory_efficient_attention()\n\
          \    pipeline.enable_attention_slicing(\"max\")\n    pipeline.scheduler\
          \ = EulerDiscreteScheduler.from_config(pipeline.scheduler.config)\n    pipeline.unet.to(memory_format=torch.channels_last)\n\
          \    with autocast(\"cuda\"):\n        images = pipeline(prompt,\n     \
          \   image=[im] * perImg,\n        negative_prompt = negative_prompt,\n \
          \       num_images_per_prompt=perImg,\n        num_inference_steps=185,\n\
          \        guidance_scale=scale).images\n```"
        updatedAt: '2023-01-25T13:37:29.141Z'
      numEdits: 1
      reactions: []
    id: 63d1307cdae2635f219e24b9
    type: comment
  author: ardacik
  content: "Hi @not-someone, it didn't work, I tried a different model with the same\
    \ code, and its work, I'm using 4 different model and all of them are fine except\
    \ this\n\nMy code :\n```python\npipeline = StableDiffusionImg2ImgPipeline.from_pretrained(modelId,\n\
    \        torch_dtype= torch.float16,\n        requires_safety_checker= False\n\
    \        ).to('cuda')\n    pipeline.enable_xformers_memory_efficient_attention()\n\
    \    pipeline.enable_attention_slicing(\"max\")\n    pipeline.scheduler = EulerDiscreteScheduler.from_config(pipeline.scheduler.config)\n\
    \    pipeline.unet.to(memory_format=torch.channels_last)\n    with autocast(\"\
    cuda\"):\n        images = pipeline(prompt,\n        image=[im] * perImg,\n  \
    \      negative_prompt = negative_prompt,\n        num_images_per_prompt=perImg,\n\
    \        num_inference_steps=185,\n        guidance_scale=scale).images\n```"
  created_at: 2023-01-25 13:37:00+00:00
  edited: true
  hidden: false
  id: 63d1307cdae2635f219e24b9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 8
repo_id: dreamlike-art/dreamlike-photoreal-2.0
repo_type: model
status: closed
target_branch: null
title: I cant use with StableDiffusionImg2ImgPipeline
