!!python/object:huggingface_hub.community.DiscussionWithDetails
author: HectorL
conflicting_files: null
created_at: 2023-03-24 21:54:53+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/56a8158b228595ed056737b9fda0660c.svg
      fullname: Hector Lopez Hernandez
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: HectorL
      type: user
    createdAt: '2023-03-24T22:54:53.000Z'
    data:
      edited: false
      editors:
      - HectorL
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/56a8158b228595ed056737b9fda0660c.svg
          fullname: Hector Lopez Hernandez
          isHf: false
          isPro: false
          name: HectorL
          type: user
        html: '<p>the config JSON for pooling includes arguments that are not valid
          for the Pooling function.<br>The following are in the config (not in this
          order):</p>

          <p>"word_embedding_dimension": 768,<br>  "pooling_mode_cls_token": false,<br>  "pooling_mode_mean_tokens":
          true,<br>  "pooling_mode_max_tokens": false,<br>  "pooling_mode_mean_sqrt_len_tokens":
          false,</p>

          <p> "pooling_mode_weightedmean_tokens": false,<br>  "pooling_mode_lasttoken":
          false</p>

          <p>The Pooling function only accepts the top 5 arguments.<br>Model will
          not instantiate without removing the bottom two keys from the config.</p>

          <p>I''m cloning the repo and using:<br>model = SentenceTranformer("local_path")</p>

          '
        raw: "the config JSON for pooling includes arguments that are not valid for\
          \ the Pooling function.\r\nThe following are in the config (not in this\
          \ order):\r\n\r\n\"word_embedding_dimension\": 768,\r\n  \"pooling_mode_cls_token\"\
          : false,\r\n  \"pooling_mode_mean_tokens\": true,\r\n  \"pooling_mode_max_tokens\"\
          : false,\r\n  \"pooling_mode_mean_sqrt_len_tokens\": false,\r\n\r\n \"pooling_mode_weightedmean_tokens\"\
          : false,\r\n  \"pooling_mode_lasttoken\": false\r\n\r\nThe Pooling function\
          \ only accepts the top 5 arguments.\r\nModel will not instantiate without\
          \ removing the bottom two keys from the config.\r\n\r\nI'm cloning the repo\
          \ and using:\r\nmodel = SentenceTranformer(\"local_path\")"
        updatedAt: '2023-03-24T22:54:53.619Z'
      numEdits: 0
      reactions: []
    id: 641e2a3d921e9c5d84818102
    type: comment
  author: HectorL
  content: "the config JSON for pooling includes arguments that are not valid for\
    \ the Pooling function.\r\nThe following are in the config (not in this order):\r\
    \n\r\n\"word_embedding_dimension\": 768,\r\n  \"pooling_mode_cls_token\": false,\r\
    \n  \"pooling_mode_mean_tokens\": true,\r\n  \"pooling_mode_max_tokens\": false,\r\
    \n  \"pooling_mode_mean_sqrt_len_tokens\": false,\r\n\r\n \"pooling_mode_weightedmean_tokens\"\
    : false,\r\n  \"pooling_mode_lasttoken\": false\r\n\r\nThe Pooling function only\
    \ accepts the top 5 arguments.\r\nModel will not instantiate without removing\
    \ the bottom two keys from the config.\r\n\r\nI'm cloning the repo and using:\r\
    \nmodel = SentenceTranformer(\"local_path\")"
  created_at: 2023-03-24 21:54:53+00:00
  edited: false
  hidden: false
  id: 641e2a3d921e9c5d84818102
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-03-27T02:53:41.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>Hi, Thanks a lot for your interest in INSTRUCTOR!</p>

          <p>As we have overwritten several classes of sentence transformer library,
          you may need to install the InstructorEmbedding package following instructions
          at <a rel="nofollow" href="https://github.com/HKUNLP/instructor-embedding#installation">https://github.com/HKUNLP/instructor-embedding#installation</a>.</p>

          <p>After that, you can use our INSTRUCTOR model as </p>

          <pre><code>from InstructorEmbedding import INSTRUCTOR

          model = INSTRUCTOR(''hkunlp/instructor-large'')

          </code></pre>

          <p>Feel free to add any further questions or comments!</p>

          '
        raw: "Hi, Thanks a lot for your interest in INSTRUCTOR!\n\nAs we have overwritten\
          \ several classes of sentence transformer library, you may need to install\
          \ the InstructorEmbedding package following instructions at https://github.com/HKUNLP/instructor-embedding#installation.\n\
          \nAfter that, you can use our INSTRUCTOR model as \n```\nfrom InstructorEmbedding\
          \ import INSTRUCTOR\nmodel = INSTRUCTOR('hkunlp/instructor-large')\n```\n\
          \nFeel free to add any further questions or comments!"
        updatedAt: '2023-03-27T02:53:41.749Z'
      numEdits: 0
      reactions: []
    id: 64210535328527d316e4700e
    type: comment
  author: multi-train
  content: "Hi, Thanks a lot for your interest in INSTRUCTOR!\n\nAs we have overwritten\
    \ several classes of sentence transformer library, you may need to install the\
    \ InstructorEmbedding package following instructions at https://github.com/HKUNLP/instructor-embedding#installation.\n\
    \nAfter that, you can use our INSTRUCTOR model as \n```\nfrom InstructorEmbedding\
    \ import INSTRUCTOR\nmodel = INSTRUCTOR('hkunlp/instructor-large')\n```\n\nFeel\
    \ free to add any further questions or comments!"
  created_at: 2023-03-27 01:53:41+00:00
  edited: false
  hidden: false
  id: 64210535328527d316e4700e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/56a8158b228595ed056737b9fda0660c.svg
      fullname: Hector Lopez Hernandez
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: HectorL
      type: user
    createdAt: '2023-03-27T18:19:32.000Z'
    data:
      edited: false
      editors:
      - HectorL
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/56a8158b228595ed056737b9fda0660c.svg
          fullname: Hector Lopez Hernandez
          isHf: false
          isPro: false
          name: HectorL
          type: user
        html: '<p>No issues using your recommended method. I was also able to get
          the cloning method to work by removing the unaccepted keys. Are there any
          negative consequences to removing  the following keys from the config? </p>

          <p>"pooling_mode_weightedmean_tokens": false,<br>"pooling_mode_lasttoken":
          false</p>

          <p>Its working great for my embedding task. Just curious about this.</p>

          '
        raw: "No issues using your recommended method. I was also able to get the\
          \ cloning method to work by removing the unaccepted keys. Are there any\
          \ negative consequences to removing  the following keys from the config?\
          \ \n\n\"pooling_mode_weightedmean_tokens\": false,\n\"pooling_mode_lasttoken\"\
          : false\n\nIts working great for my embedding task. Just curious about this."
        updatedAt: '2023-03-27T18:19:32.442Z'
      numEdits: 0
      reactions: []
    id: 6421de34ec91bf6c97946720
    type: comment
  author: HectorL
  content: "No issues using your recommended method. I was also able to get the cloning\
    \ method to work by removing the unaccepted keys. Are there any negative consequences\
    \ to removing  the following keys from the config? \n\n\"pooling_mode_weightedmean_tokens\"\
    : false,\n\"pooling_mode_lasttoken\": false\n\nIts working great for my embedding\
    \ task. Just curious about this."
  created_at: 2023-03-27 17:19:32+00:00
  edited: false
  hidden: false
  id: 6421de34ec91bf6c97946720
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-03-28T01:15:01.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>Hi, thanks a lot for your comments!</p>

          <p>By removing unnecessary keys and using the SentenceTranformer library,
          it seems that you will not be able to add instructions for embedding calculation.</p>

          '
        raw: 'Hi, thanks a lot for your comments!


          By removing unnecessary keys and using the SentenceTranformer library, it
          seems that you will not be able to add instructions for embedding calculation.'
        updatedAt: '2023-03-28T01:15:01.137Z'
      numEdits: 0
      reactions: []
    id: 64223f953f204ac24e1b96cd
    type: comment
  author: multi-train
  content: 'Hi, thanks a lot for your comments!


    By removing unnecessary keys and using the SentenceTranformer library, it seems
    that you will not be able to add instructions for embedding calculation.'
  created_at: 2023-03-28 00:15:01+00:00
  edited: false
  hidden: false
  id: 64223f953f204ac24e1b96cd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/56a8158b228595ed056737b9fda0660c.svg
      fullname: Hector Lopez Hernandez
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: HectorL
      type: user
    createdAt: '2023-03-28T18:24:22.000Z'
    data:
      status: closed
    id: 642330d67c55aeb6f72d9d01
    type: status-change
  author: HectorL
  created_at: 2023-03-28 17:24:22+00:00
  id: 642330d67c55aeb6f72d9d01
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: hkunlp/instructor-xl
repo_type: model
status: closed
target_branch: null
title: config.json for pooling is incorrect
