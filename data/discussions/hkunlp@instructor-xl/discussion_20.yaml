!!python/object:huggingface_hub.community.DiscussionWithDetails
author: LukeHero
conflicting_files: null
created_at: 2023-06-23 09:27:11+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8961e6e6297877d39e2317782f8af3c6.svg
      fullname: Luke
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LukeHero
      type: user
    createdAt: '2023-06-23T10:27:11.000Z'
    data:
      edited: true
      editors:
      - LukeHero
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9627516865730286
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8961e6e6297877d39e2317782f8af3c6.svg
          fullname: Luke
          isHf: false
          isPro: false
          name: LukeHero
          type: user
        html: '<p>Has anyone done it successfully via real-time inference?</p>

          <p>I have the model deployed with the repo as a model.tar.gz file in S3
          but all my test inferences sending JSON data in SageMaker Studio fail.<br>I
          am seeing the following errors:</p>

          <p>With PyTorch 1.12 the following:<br>"metadata.json file not found in
          artifacts" as the repo does not have this file.<br>"AttributeError: type
          object ''Callable'' has no attribute ''_abc_registry''"</p>

          <p>With PyTorch 1.8 no errors nothing happens.</p>

          <p>There is no option for 1.9 as per what is used in the repo.</p>

          <p>Also tried deploying via the HF Hub but sentence-similarity is not supported
          as a HF_TASK.</p>

          <p>If anyone has got sentence similarity working via real-time inference
          on SageMaker I would greatly appreciate some info on how you did it!</p>

          '
        raw: 'Has anyone done it successfully via real-time inference?


          I have the model deployed with the repo as a model.tar.gz file in S3 but
          all my test inferences sending JSON data in SageMaker Studio fail.

          I am seeing the following errors:


          With PyTorch 1.12 the following:

          "metadata.json file not found in artifacts" as the repo does not have this
          file.

          "AttributeError: type object ''Callable'' has no attribute ''_abc_registry''"


          With PyTorch 1.8 no errors nothing happens.


          There is no option for 1.9 as per what is used in the repo.


          Also tried deploying via the HF Hub but sentence-similarity is not supported
          as a HF_TASK.


          If anyone has got sentence similarity working via real-time inference on
          SageMaker I would greatly appreciate some info on how you did it!'
        updatedAt: '2023-06-23T13:24:01.982Z'
      numEdits: 3
      reactions: []
    id: 6495737f45b2cf0bf022c9de
    type: comment
  author: LukeHero
  content: 'Has anyone done it successfully via real-time inference?


    I have the model deployed with the repo as a model.tar.gz file in S3 but all my
    test inferences sending JSON data in SageMaker Studio fail.

    I am seeing the following errors:


    With PyTorch 1.12 the following:

    "metadata.json file not found in artifacts" as the repo does not have this file.

    "AttributeError: type object ''Callable'' has no attribute ''_abc_registry''"


    With PyTorch 1.8 no errors nothing happens.


    There is no option for 1.9 as per what is used in the repo.


    Also tried deploying via the HF Hub but sentence-similarity is not supported as
    a HF_TASK.


    If anyone has got sentence similarity working via real-time inference on SageMaker
    I would greatly appreciate some info on how you did it!'
  created_at: 2023-06-23 09:27:11+00:00
  edited: true
  hidden: false
  id: 6495737f45b2cf0bf022c9de
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2fd7bd23254678f7f46ecff823fff1ce.svg
      fullname: Michael Conrad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: michael-newsrx-com
      type: user
    createdAt: '2023-07-11T13:45:01.000Z'
    data:
      edited: false
      editors:
      - michael-newsrx-com
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8559691905975342
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2fd7bd23254678f7f46ecff823fff1ce.svg
          fullname: Michael Conrad
          isHf: false
          isPro: false
          name: michael-newsrx-com
          type: user
        html: '<p>Make any progress on this?</p>

          '
        raw: Make any progress on this?
        updatedAt: '2023-07-11T13:45:01.583Z'
      numEdits: 0
      reactions: []
    id: 64ad5cdd692be9d12f781c3c
    type: comment
  author: michael-newsrx-com
  content: Make any progress on this?
  created_at: 2023-07-11 12:45:01+00:00
  edited: false
  hidden: false
  id: 64ad5cdd692be9d12f781c3c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6378f193438c92a3c1286f6a/BPhTGwkyKtp1wUcqKsfqT.jpeg?w=200&h=200&f=face
      fullname: Somesh Mukherjee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: someshmukherjee
      type: user
    createdAt: '2023-07-13T02:36:25.000Z'
    data:
      edited: false
      editors:
      - someshmukherjee
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9323909878730774
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6378f193438c92a3c1286f6a/BPhTGwkyKtp1wUcqKsfqT.jpeg?w=200&h=200&f=face
          fullname: Somesh Mukherjee
          isHf: false
          isPro: false
          name: someshmukherjee
          type: user
        html: '<p>I was able to host the model on Sagemaker by using the Hugging Face
          Inference Toolkit and by overriding the default methods of the HuggingFaceHandlerService.</p>

          '
        raw: I was able to host the model on Sagemaker by using the Hugging Face Inference
          Toolkit and by overriding the default methods of the HuggingFaceHandlerService.
        updatedAt: '2023-07-13T02:36:25.383Z'
      numEdits: 0
      reactions: []
    id: 64af6329cf1f3ba4958eaf27
    type: comment
  author: someshmukherjee
  content: I was able to host the model on Sagemaker by using the Hugging Face Inference
    Toolkit and by overriding the default methods of the HuggingFaceHandlerService.
  created_at: 2023-07-13 01:36:25+00:00
  edited: false
  hidden: false
  id: 64af6329cf1f3ba4958eaf27
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8961e6e6297877d39e2317782f8af3c6.svg
      fullname: Luke
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LukeHero
      type: user
    createdAt: '2023-07-13T07:54:59.000Z'
    data:
      edited: false
      editors:
      - LukeHero
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9406074285507202
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8961e6e6297877d39e2317782f8af3c6.svg
          fullname: Luke
          isHf: false
          isPro: false
          name: LukeHero
          type: user
        html: '<blockquote>

          <p>I was able to host the model on Sagemaker by using the Hugging Face Inference
          Toolkit and by overriding the default methods of the HuggingFaceHandlerService.</p>

          </blockquote>

          <p>Mind sharing some detail on how you got it working?</p>

          '
        raw: '> I was able to host the model on Sagemaker by using the Hugging Face
          Inference Toolkit and by overriding the default methods of the HuggingFaceHandlerService.


          Mind sharing some detail on how you got it working?'
        updatedAt: '2023-07-13T07:54:59.996Z'
      numEdits: 0
      reactions: []
    id: 64afadd33fdadfc96ac6a1ee
    type: comment
  author: LukeHero
  content: '> I was able to host the model on Sagemaker by using the Hugging Face
    Inference Toolkit and by overriding the default methods of the HuggingFaceHandlerService.


    Mind sharing some detail on how you got it working?'
  created_at: 2023-07-13 06:54:59+00:00
  edited: false
  hidden: false
  id: 64afadd33fdadfc96ac6a1ee
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/74208f8c5f7df84a7087e48231678c08.svg
      fullname: Ganesh Raj
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ganesh9900
      type: user
    createdAt: '2023-11-30T08:35:48.000Z'
    data:
      edited: false
      editors:
      - Ganesh9900
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.34664681553840637
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/74208f8c5f7df84a7087e48231678c08.svg
          fullname: Ganesh Raj
          isHf: false
          isPro: false
          name: Ganesh9900
          type: user
        html: '<p>2023-11-30T07:09:08,403 [INFO ] W-hkunlp__instructor-xl-1-stdout
          </p>

          <p>PredictionException: "Unknown task sentence-similarity, </p>

          <p>available tasks are</p>

          <p> [''audio-classification'', ''automatic-speech-recognition'', ''conversational'',
          ''depth-estimation'', ''document-question-answering'', ''feature-extraction'',
          ''fill-mask'', ''image-classification'', ''image-segmentation'', ''image-to-text'',
          ''ner'', ''object-detection'', ''question-answering'', ''sentiment-analysis'',
          ''summarization'', ''table-question-answering'', ''text-classification'',
          ''text-generation'', ''text2text-generation'', ''token-classification'',
          ''translation'', ''video-classification'', ''visual-question-answering'',
          ''vqa'', ''zero-shot-classification'', ''zero-shot-image-classification'',
          ''zero-shot-object-detection'', ''translation_XX_to_YY'']" : 400</p>

          '
        raw: "2023-11-30T07:09:08,403 [INFO ] W-hkunlp__instructor-xl-1-stdout \n\n\
          PredictionException: \"Unknown task sentence-similarity, \n\navailable tasks\
          \ are\n\n ['audio-classification', 'automatic-speech-recognition', 'conversational',\
          \ 'depth-estimation', 'document-question-answering', 'feature-extraction',\
          \ 'fill-mask', 'image-classification', 'image-segmentation', 'image-to-text',\
          \ 'ner', 'object-detection', 'question-answering', 'sentiment-analysis',\
          \ 'summarization', 'table-question-answering', 'text-classification', 'text-generation',\
          \ 'text2text-generation', 'token-classification', 'translation', 'video-classification',\
          \ 'visual-question-answering', 'vqa', 'zero-shot-classification', 'zero-shot-image-classification',\
          \ 'zero-shot-object-detection', 'translation_XX_to_YY']\" : 400"
        updatedAt: '2023-11-30T08:35:48.228Z'
      numEdits: 0
      reactions: []
    id: 6568496439af0998760483e7
    type: comment
  author: Ganesh9900
  content: "2023-11-30T07:09:08,403 [INFO ] W-hkunlp__instructor-xl-1-stdout \n\n\
    PredictionException: \"Unknown task sentence-similarity, \n\navailable tasks are\n\
    \n ['audio-classification', 'automatic-speech-recognition', 'conversational',\
    \ 'depth-estimation', 'document-question-answering', 'feature-extraction', 'fill-mask',\
    \ 'image-classification', 'image-segmentation', 'image-to-text', 'ner', 'object-detection',\
    \ 'question-answering', 'sentiment-analysis', 'summarization', 'table-question-answering',\
    \ 'text-classification', 'text-generation', 'text2text-generation', 'token-classification',\
    \ 'translation', 'video-classification', 'visual-question-answering', 'vqa', 'zero-shot-classification',\
    \ 'zero-shot-image-classification', 'zero-shot-object-detection', 'translation_XX_to_YY']\"\
    \ : 400"
  created_at: 2023-11-30 08:35:48+00:00
  edited: false
  hidden: false
  id: 6568496439af0998760483e7
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 20
repo_id: hkunlp/instructor-xl
repo_type: model
status: open
target_branch: null
title: Deployment to AWS SageMaker Real-time inference
