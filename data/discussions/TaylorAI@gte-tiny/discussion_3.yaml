!!python/object:huggingface_hub.community.DiscussionWithDetails
author: simonw
conflicting_files: null
created_at: 2023-10-06 17:15:59+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/de99266e9eaac8b6946541f8661afbd8.svg
      fullname: Simon Willison
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: simonw
      type: user
    createdAt: '2023-10-06T18:15:59.000Z'
    data:
      edited: false
      editors:
      - simonw
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7748666405677795
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/de99266e9eaac8b6946541f8661afbd8.svg
          fullname: Simon Willison
          isHf: false
          isPro: false
          name: simonw
          type: user
        html: '<p>This is a really cool model!</p>

          <p>I''m using this with SentenceTransformers and it downloaded 314M of files.
          The big ones were:</p>

          <p>model.safetensors 43M<br>pytorch_model.bin 43M<br>onnx/model.onnx 86M<br>onnx/model_optimized.onnx
          86M<br>onnx/model_quantized.onnx 22M</p>

          <p>Is there a way to use this with SentenceTransformers that only downloads
          the model file that I need?</p>

          '
        raw: "This is a really cool model!\r\n\r\nI'm using this with SentenceTransformers\
          \ and it downloaded 314M of files. The big ones were:\r\n\r\nmodel.safetensors\
          \ 43M\r\npytorch_model.bin 43M\r\nonnx/model.onnx 86M\r\nonnx/model_optimized.onnx\
          \ 86M\r\nonnx/model_quantized.onnx 22M\r\n\r\nIs there a way to use this\
          \ with SentenceTransformers that only downloads the model file that I need?"
        updatedAt: '2023-10-06T18:15:59.190Z'
      numEdits: 0
      reactions: []
    id: 65204edf0415e1b734a22855
    type: comment
  author: simonw
  content: "This is a really cool model!\r\n\r\nI'm using this with SentenceTransformers\
    \ and it downloaded 314M of files. The big ones were:\r\n\r\nmodel.safetensors\
    \ 43M\r\npytorch_model.bin 43M\r\nonnx/model.onnx 86M\r\nonnx/model_optimized.onnx\
    \ 86M\r\nonnx/model_quantized.onnx 22M\r\n\r\nIs there a way to use this with\
    \ SentenceTransformers that only downloads the model file that I need?"
  created_at: 2023-10-06 17:15:59+00:00
  edited: false
  hidden: false
  id: 65204edf0415e1b734a22855
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
      fullname: "Radam\xE9s Ajna"
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: radames
      type: user
    createdAt: '2023-10-06T20:04:18.000Z'
    data:
      edited: false
      editors:
      - radames
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6651695370674133
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
          fullname: "Radam\xE9s Ajna"
          isHf: true
          isPro: false
          name: radames
          type: user
        html: "<p>hi <span data-props=\"{&quot;user&quot;:&quot;simonw&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/simonw\">@<span class=\"\
          underline\">simonw</span></a></span>\n\n\t</span></span> ,</p>\n<p>You can\
          \ use <code>huggingface_hub</code> and snapshot only the needed files and\
          \ pass the folder to the <code>SentenceTransformer</code> constructor </p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span>\
          \ sentence_transformers <span class=\"hljs-keyword\">import</span> SentenceTransformer\n\
          <span class=\"hljs-keyword\">from</span> huggingface_hub <span class=\"\
          hljs-keyword\">import</span> snapshot_download\n\nsentences = [<span class=\"\
          hljs-string\">\"This is an example sentence\"</span>, <span class=\"hljs-string\"\
          >\"Each sentence is converted\"</span>]\nmodel_path = snapshot_download(\n\
          \    repo_id=<span class=\"hljs-string\">\"TaylorAI/gte-tiny\"</span>, allow_patterns=[<span\
          \ class=\"hljs-string\">\"*.json\"</span>, <span class=\"hljs-string\">\"\
          pytorch_model.bin\"</span>]\n)\n\nmodel = SentenceTransformer(model_path)\n\
          embeddings = model.encode(sentences)\n<span class=\"hljs-built_in\">print</span>(embeddings)\n\
          </code></pre>\n"
        raw: "hi @simonw ,\n\nYou can use `huggingface_hub` and snapshot only the\
          \ needed files and pass the folder to the `SentenceTransformer` constructor\
          \ \n\n```python\nfrom sentence_transformers import SentenceTransformer\n\
          from huggingface_hub import snapshot_download\n\nsentences = [\"This is\
          \ an example sentence\", \"Each sentence is converted\"]\nmodel_path = snapshot_download(\n\
          \    repo_id=\"TaylorAI/gte-tiny\", allow_patterns=[\"*.json\", \"pytorch_model.bin\"\
          ]\n)\n\nmodel = SentenceTransformer(model_path)\nembeddings = model.encode(sentences)\n\
          print(embeddings)\n```"
        updatedAt: '2023-10-06T20:04:18.156Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\u2764\uFE0F"
        users:
        - clem
        - julien-c
        - alonsosilva
    id: 652068420ceb71f01125a461
    type: comment
  author: radames
  content: "hi @simonw ,\n\nYou can use `huggingface_hub` and snapshot only the needed\
    \ files and pass the folder to the `SentenceTransformer` constructor \n\n```python\n\
    from sentence_transformers import SentenceTransformer\nfrom huggingface_hub import\
    \ snapshot_download\n\nsentences = [\"This is an example sentence\", \"Each sentence\
    \ is converted\"]\nmodel_path = snapshot_download(\n    repo_id=\"TaylorAI/gte-tiny\"\
    , allow_patterns=[\"*.json\", \"pytorch_model.bin\"]\n)\n\nmodel = SentenceTransformer(model_path)\n\
    embeddings = model.encode(sentences)\nprint(embeddings)\n```"
  created_at: 2023-10-06 19:04:18+00:00
  edited: false
  hidden: false
  id: 652068420ceb71f01125a461
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
      fullname: "Radam\xE9s Ajna"
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: radames
      type: user
    createdAt: '2023-10-06T20:06:33.000Z'
    data:
      edited: false
      editors:
      - radames
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7223230004310608
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
          fullname: "Radam\xE9s Ajna"
          isHf: true
          isPro: false
          name: radames
          type: user
        html: "<p>I'd also recommend the use of <code>model.safetensors</code> </p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">from</span>\
          \ sentence_transformers <span class=\"hljs-keyword\">import</span> SentenceTransformer\n\
          <span class=\"hljs-keyword\">from</span> huggingface_hub <span class=\"\
          hljs-keyword\">import</span> snapshot_download\n\nsentences = [<span class=\"\
          hljs-string\">\"This is an example sentence\"</span>, <span class=\"hljs-string\"\
          >\"Each sentence is converted\"</span>]\nmodel_path = snapshot_download(\n\
          \    repo_id=<span class=\"hljs-string\">\"TaylorAI/gte-tiny\"</span>, allow_patterns=[<span\
          \ class=\"hljs-string\">\"*.json\"</span>, <span class=\"hljs-string\">\"\
          model.safetensors\"</span>]\n)\n\nmodel = SentenceTransformer(model_path)\n\
          embeddings = model.encode(sentences)\n<span class=\"hljs-built_in\">print</span>(embeddings)\n\
          </code></pre>\n"
        raw: "I'd also recommend the use of `model.safetensors` \n\n```python\nfrom\
          \ sentence_transformers import SentenceTransformer\nfrom huggingface_hub\
          \ import snapshot_download\n\nsentences = [\"This is an example sentence\"\
          , \"Each sentence is converted\"]\nmodel_path = snapshot_download(\n   \
          \ repo_id=\"TaylorAI/gte-tiny\", allow_patterns=[\"*.json\", \"model.safetensors\"\
          ]\n)\n\nmodel = SentenceTransformer(model_path)\nembeddings = model.encode(sentences)\n\
          print(embeddings)\n```"
        updatedAt: '2023-10-06T20:06:33.220Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - clem
        - julien-c
    id: 652068c9aab6fd558534b585
    type: comment
  author: radames
  content: "I'd also recommend the use of `model.safetensors` \n\n```python\nfrom\
    \ sentence_transformers import SentenceTransformer\nfrom huggingface_hub import\
    \ snapshot_download\n\nsentences = [\"This is an example sentence\", \"Each sentence\
    \ is converted\"]\nmodel_path = snapshot_download(\n    repo_id=\"TaylorAI/gte-tiny\"\
    , allow_patterns=[\"*.json\", \"model.safetensors\"]\n)\n\nmodel = SentenceTransformer(model_path)\n\
    embeddings = model.encode(sentences)\nprint(embeddings)\n```"
  created_at: 2023-10-06 19:06:33+00:00
  edited: false
  hidden: false
  id: 652068c9aab6fd558534b585
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/fbdc193a07ef87e2e3388180b5eee723.svg
      fullname: Benjamin Anderson
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: andersonbcdefg
      type: user
    createdAt: '2023-10-07T16:29:03.000Z'
    data:
      edited: false
      editors:
      - andersonbcdefg
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9248974919319153
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/fbdc193a07ef87e2e3388180b5eee723.svg
          fullname: Benjamin Anderson
          isHf: false
          isPro: false
          name: andersonbcdefg
          type: user
        html: '<p>I can also release another minimal version without the onnx weights
          for SentenceTransformers. </p>

          '
        raw: 'I can also release another minimal version without the onnx weights
          for SentenceTransformers. '
        updatedAt: '2023-10-07T16:29:03.942Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - clem
    id: 6521874fef81ce01a456c01d
    type: comment
  author: andersonbcdefg
  content: 'I can also release another minimal version without the onnx weights for
    SentenceTransformers. '
  created_at: 2023-10-07 15:29:03+00:00
  edited: false
  hidden: false
  id: 6521874fef81ce01a456c01d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1591114977477-noauth.png?w=200&h=200&f=face
      fullname: David Mezzetti
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: davidmezzetti
      type: user
    createdAt: '2023-10-09T16:57:56.000Z'
    data:
      edited: false
      editors:
      - davidmezzetti
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7003212571144104
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1591114977477-noauth.png?w=200&h=200&f=face
          fullname: David Mezzetti
          isHf: false
          isPro: false
          name: davidmezzetti
          type: user
        html: '<p>txtai has built-in logic for mean/cls pooling using Transformers,
          which only downloads the files it needs.</p>

          <p>For example:</p>

          <pre><code class="language-python"><span class="hljs-keyword">import</span>
          txtai


          embeddings = txtai.Embeddings(path=<span class="hljs-string">"TaylorAI/gte-tiny"</span>)

          embeddings.batchtransform([<span class="hljs-string">"text1"</span>, <span
          class="hljs-string">"text2"</span>])

          </code></pre>

          '
        raw: 'txtai has built-in logic for mean/cls pooling using Transformers, which
          only downloads the files it needs.


          For example:


          ```python

          import txtai


          embeddings = txtai.Embeddings(path="TaylorAI/gte-tiny")

          embeddings.batchtransform(["text1", "text2"])

          ```'
        updatedAt: '2023-10-09T16:57:56.416Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - radames
        - clem
    id: 6524311406e839c55400186b
    type: comment
  author: davidmezzetti
  content: 'txtai has built-in logic for mean/cls pooling using Transformers, which
    only downloads the files it needs.


    For example:


    ```python

    import txtai


    embeddings = txtai.Embeddings(path="TaylorAI/gte-tiny")

    embeddings.batchtransform(["text1", "text2"])

    ```'
  created_at: 2023-10-09 15:57:56+00:00
  edited: false
  hidden: false
  id: 6524311406e839c55400186b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
      fullname: "Radam\xE9s Ajna"
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: radames
      type: user
    createdAt: '2023-10-09T19:41:47.000Z'
    data:
      edited: false
      editors:
      - radames
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.48748356103897095
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648966381588-6064e095abd8d3692e3e2ed6.jpeg?w=200&h=200&f=face
          fullname: "Radam\xE9s Ajna"
          isHf: true
          isPro: false
          name: radames
          type: user
        html: "<p>very cool <span data-props=\"{&quot;user&quot;:&quot;davidmezzetti&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/davidmezzetti\"\
          >@<span class=\"underline\">davidmezzetti</span></a></span>\n\n\t</span></span>,\
          \ just test it<br><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/6064e095abd8d3692e3e2ed6/LwVT-TzyaWYqu_Pe46xdI.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/6064e095abd8d3692e3e2ed6/LwVT-TzyaWYqu_Pe46xdI.png\"\
          ></a></p>\n"
        raw: "very cool @davidmezzetti, just test it \n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6064e095abd8d3692e3e2ed6/LwVT-TzyaWYqu_Pe46xdI.png)\n"
        updatedAt: '2023-10-09T19:41:47.769Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - davidmezzetti
        - julien-c
    id: 6524577bd4b61d080783eadb
    type: comment
  author: radames
  content: "very cool @davidmezzetti, just test it \n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6064e095abd8d3692e3e2ed6/LwVT-TzyaWYqu_Pe46xdI.png)\n"
  created_at: 2023-10-09 18:41:47+00:00
  edited: false
  hidden: false
  id: 6524577bd4b61d080783eadb
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: TaylorAI/gte-tiny
repo_type: model
status: open
target_branch: null
title: Any guidance on how to use this with sentence-transformers without downloading
  a bunch of extra stuff?
