!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mamachang
conflicting_files: null
created_at: 2023-08-25 16:40:32+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b8d45780b100a9a88b326557c97ae306.svg
      fullname: Chelsy
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mamachang
      type: user
    createdAt: '2023-08-25T17:40:32.000Z'
    data:
      edited: false
      editors:
      - mamachang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9556960463523865
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b8d45780b100a9a88b326557c97ae306.svg
          fullname: Chelsy
          isHf: false
          isPro: false
          name: mamachang
          type: user
        html: '<p>The script of deploying on sagemaker doesn''t work</p>

          '
        raw: The script of deploying on sagemaker doesn't work
        updatedAt: '2023-08-25T17:40:32.941Z'
      numEdits: 0
      reactions: []
    id: 64e8e7902800cf7e9c65d13b
    type: comment
  author: mamachang
  content: The script of deploying on sagemaker doesn't work
  created_at: 2023-08-25 16:40:32+00:00
  edited: false
  hidden: false
  id: 64e8e7902800cf7e9c65d13b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7fad110c6ea608d97eb551e764afaff2.svg
      fullname: akanshu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Akanshu
      type: user
    createdAt: '2023-08-28T11:03:36.000Z'
    data:
      edited: false
      editors:
      - Akanshu
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9678208827972412
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7fad110c6ea608d97eb551e764afaff2.svg
          fullname: akanshu
          isHf: false
          isPro: false
          name: Akanshu
          type: user
        html: '<p>Did you found any way to make it run.?</p>

          '
        raw: Did you found any way to make it run.?
        updatedAt: '2023-08-28T11:03:36.891Z'
      numEdits: 0
      reactions: []
    id: 64ec7f08240d8343f03b7f7a
    type: comment
  author: Akanshu
  content: Did you found any way to make it run.?
  created_at: 2023-08-28 10:03:36+00:00
  edited: false
  hidden: false
  id: 64ec7f08240d8343f03b7f7a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
      fullname: Bonservizzi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasbonservizzi
      type: user
    createdAt: '2023-08-28T20:42:06.000Z'
    data:
      edited: false
      editors:
      - lucasbonservizzi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9101806879043579
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
          fullname: Bonservizzi
          isHf: false
          isPro: false
          name: lucasbonservizzi
          type: user
        html: '<p>While trying to host in sagemaker, I get the following error message:</p>

          <p>"""<br>The tokenizer class you load from this checkpoint is ''CodeLlamaTokenizer''.<br>The
          class this function is called from is ''LlamaTokenizer''.<br>"""</p>

          <p>I believe it probably has to do with this disclaimer in the "Model usage":<br>To
          use this model, please make sure to install transformers from main until
          the next version is released:<br>pip install git+<a rel="nofollow" href="https://github.com/huggingface/transformers.git@main">https://github.com/huggingface/transformers.git@main</a>
          accelerate</p>

          <p>Since the scripts gets aHugging Face Deep Learning Container image from
          here:<br>get_huggingface_llm_image_uri("huggingface",version="0.9.3")</p>

          <p>Hugging face team probably has to update this version to include new
          transformers class.<br>I could be totally wrong anyway.</p>

          '
        raw: 'While trying to host in sagemaker, I get the following error message:


          """

          The tokenizer class you load from this checkpoint is ''CodeLlamaTokenizer''.

          The class this function is called from is ''LlamaTokenizer''.

          """


          I believe it probably has to do with this disclaimer in the "Model usage":

          To use this model, please make sure to install transformers from main until
          the next version is released:

          pip install git+https://github.com/huggingface/transformers.git@main accelerate


          Since the scripts gets aHugging Face Deep Learning Container image from
          here:

          get_huggingface_llm_image_uri("huggingface",version="0.9.3")


          Hugging face team probably has to update this version to include new transformers
          class.

          I could be totally wrong anyway.'
        updatedAt: '2023-08-28T20:42:06.582Z'
      numEdits: 0
      reactions: []
    id: 64ed069ec571d65496fa2245
    type: comment
  author: lucasbonservizzi
  content: 'While trying to host in sagemaker, I get the following error message:


    """

    The tokenizer class you load from this checkpoint is ''CodeLlamaTokenizer''.

    The class this function is called from is ''LlamaTokenizer''.

    """


    I believe it probably has to do with this disclaimer in the "Model usage":

    To use this model, please make sure to install transformers from main until the
    next version is released:

    pip install git+https://github.com/huggingface/transformers.git@main accelerate


    Since the scripts gets aHugging Face Deep Learning Container image from here:

    get_huggingface_llm_image_uri("huggingface",version="0.9.3")


    Hugging face team probably has to update this version to include new transformers
    class.

    I could be totally wrong anyway.'
  created_at: 2023-08-28 19:42:06+00:00
  edited: false
  hidden: false
  id: 64ed069ec571d65496fa2245
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-08-29T06:53:31.000Z'
    data:
      edited: false
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8911014199256897
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lucasbonservizzi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lucasbonservizzi\"\
          >@<span class=\"underline\">lucasbonservizzi</span></a></span>\n\n\t</span></span>\
          \ is right. Code Llama just landed in Transformers main branch. There is\
          \ not yet even a release so there is no sagemaker container available. </p>\n"
        raw: '@lucasbonservizzi is right. Code Llama just landed in Transformers main
          branch. There is not yet even a release so there is no sagemaker container
          available. '
        updatedAt: '2023-08-29T06:53:31.468Z'
      numEdits: 0
      reactions: []
    id: 64ed95eb7ce1ccaf669ce3e6
    type: comment
  author: philschmid
  content: '@lucasbonservizzi is right. Code Llama just landed in Transformers main
    branch. There is not yet even a release so there is no sagemaker container available. '
  created_at: 2023-08-29 05:53:31+00:00
  edited: false
  hidden: false
  id: 64ed95eb7ce1ccaf669ce3e6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
      fullname: Bonservizzi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasbonservizzi
      type: user
    createdAt: '2023-08-29T08:49:34.000Z'
    data:
      edited: false
      editors:
      - lucasbonservizzi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8978081941604614
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
          fullname: Bonservizzi
          isHf: false
          isPro: false
          name: lucasbonservizzi
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"\
          underline\">philschmid</span></a></span>\n\n\t</span></span> Do you have\
          \ any instructions on how would I be able to create my own container with\
          \ TGI and the new transformers branch in order to try Code llama on SageMaker?\
          \ </p>\n"
        raw: '@philschmid Do you have any instructions on how would I be able to create
          my own container with TGI and the new transformers branch in order to try
          Code llama on SageMaker? '
        updatedAt: '2023-08-29T08:49:34.247Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\U0001F44D"
        users:
        - jackkwok
        - mamachang
        - hfkfabo
    id: 64edb11eb5b93ea8bd133daf
    type: comment
  author: lucasbonservizzi
  content: '@philschmid Do you have any instructions on how would I be able to create
    my own container with TGI and the new transformers branch in order to try Code
    llama on SageMaker? '
  created_at: 2023-08-29 07:49:34+00:00
  edited: false
  hidden: false
  id: 64edb11eb5b93ea8bd133daf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/43cc3ba63c36c3596dc1d11615bb6dce.svg
      fullname: Xan Huang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: xanhuang
      type: user
    createdAt: '2023-08-30T13:21:15.000Z'
    data:
      edited: false
      editors:
      - xanhuang
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9265256524085999
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/43cc3ba63c36c3596dc1d11615bb6dce.svg
          fullname: Xan Huang
          isHf: false
          isPro: false
          name: xanhuang
          type: user
        html: '<p>I got this error : You are using a model of type llama to instantiate
          a model of type . This is not supported for all configurations of models
          and can yield errors.</p>

          <p>Is it related to the same issue, and is there any ETA on the release
          please?</p>

          '
        raw: 'I got this error : You are using a model of type llama to instantiate
          a model of type . This is not supported for all configurations of models
          and can yield errors.


          Is it related to the same issue, and is there any ETA on the release please?'
        updatedAt: '2023-08-30T13:21:15.053Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - iam-sud
        - hfkfabo
    id: 64ef424b66f36326b3ea6327
    type: comment
  author: xanhuang
  content: 'I got this error : You are using a model of type llama to instantiate
    a model of type . This is not supported for all configurations of models and can
    yield errors.


    Is it related to the same issue, and is there any ETA on the release please?'
  created_at: 2023-08-30 12:21:15+00:00
  edited: false
  hidden: false
  id: 64ef424b66f36326b3ea6327
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c9ce0a9d4b1b73063b1b119eb94df264.svg
      fullname: Arcel F.
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hfkfabo
      type: user
    createdAt: '2023-09-11T19:59:25.000Z'
    data:
      edited: true
      editors:
      - hfkfabo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5240722298622131
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c9ce0a9d4b1b73063b1b119eb94df264.svg
          fullname: Arcel F.
          isHf: false
          isPro: false
          name: hfkfabo
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ArthurZ&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ArthurZ\">@<span class=\"\
          underline\">ArthurZ</span></a></span>\n\n\t</span></span> <span data-props=\"\
          {&quot;user&quot;:&quot;philschmid&quot;}\" data-target=\"UserMention\"\
          \ class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"\
          ><span class=\"contents\"><a href=\"/philschmid\">@<span class=\"underline\"\
          >philschmid</span></a></span>\n\n\t</span></span> any ETA for a new sagemaker\
          \ container release to fix this bug please ? </p>\n"
        raw: "@ArthurZ @philschmid any ETA for a new sagemaker container release to\
          \ fix this bug please ? \n"
        updatedAt: '2023-09-11T20:10:05.921Z'
      numEdits: 1
      reactions: []
    id: 64ff719da5c11e3a9add1ca6
    type: comment
  author: hfkfabo
  content: "@ArthurZ @philschmid any ETA for a new sagemaker container release to\
    \ fix this bug please ? \n"
  created_at: 2023-09-11 18:59:25+00:00
  edited: true
  hidden: false
  id: 64ff719da5c11e3a9add1ca6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/77fd99337f556e226a1e20cdbdb9eb80.svg
      fullname: Rajath Jain
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Rajath-jain
      type: user
    createdAt: '2023-09-18T14:51:09.000Z'
    data:
      edited: false
      editors:
      - Rajath-jain
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8003487586975098
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/77fd99337f556e226a1e20cdbdb9eb80.svg
          fullname: Rajath Jain
          isHf: false
          isPro: false
          name: Rajath-jain
          type: user
        html: '<p>Try changing the huggingface version to 0.8.2 in the deployment
          script</p>

          '
        raw: Try changing the huggingface version to 0.8.2 in the deployment script
        updatedAt: '2023-09-18T14:51:09.421Z'
      numEdits: 0
      reactions: []
    id: 650863dd0761d34d28191c54
    type: comment
  author: Rajath-jain
  content: Try changing the huggingface version to 0.8.2 in the deployment script
  created_at: 2023-09-18 13:51:09+00:00
  edited: false
  hidden: false
  id: 650863dd0761d34d28191c54
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
      fullname: Bonservizzi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasbonservizzi
      type: user
    createdAt: '2023-09-18T18:42:06.000Z'
    data:
      edited: false
      editors:
      - lucasbonservizzi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9667978286743164
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fc0f8916279b9159451120e0c23ca1d.svg
          fullname: Bonservizzi
          isHf: false
          isPro: false
          name: lucasbonservizzi
          type: user
        html: '<blockquote>

          <p>Try changing the huggingface version to 0.8.2 in the deployment script</p>

          </blockquote>

          <p>I haven''t tried your suggestion yet. However, it seems awkward that
          version 0.8.2 works and 0.9.3 doesn''t.<br>As I previously commented, the
          error seems to be that CodeLlama models seems to be using a brand new class
          of tokenizer (CodeLlamaTokenizer), which has not been implemented on the
          newest TGI version (0.9.3) let alone an older version like 0.8.2. Anyway,
          I could be mistaken and downgrading might work.<br>In addition, if anyone
          has any tutorials on how to build your own TGI container it would be nice
          to learn. I haven''t found out any tutorials on how to do it.</p>

          '
        raw: "> Try changing the huggingface version to 0.8.2 in the deployment script\n\
          \nI haven't tried your suggestion yet. However, it seems awkward that version\
          \ 0.8.2 works and 0.9.3 doesn't. \nAs I previously commented, the error\
          \ seems to be that CodeLlama models seems to be using a brand new class\
          \ of tokenizer (CodeLlamaTokenizer), which has not been implemented on the\
          \ newest TGI version (0.9.3) let alone an older version like 0.8.2. Anyway,\
          \ I could be mistaken and downgrading might work. \nIn addition, if anyone\
          \ has any tutorials on how to build your own TGI container it would be nice\
          \ to learn. I haven't found out any tutorials on how to do it."
        updatedAt: '2023-09-18T18:42:06.038Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - hfkfabo
    id: 650899fe2e4bbde418e0fa90
    type: comment
  author: lucasbonservizzi
  content: "> Try changing the huggingface version to 0.8.2 in the deployment script\n\
    \nI haven't tried your suggestion yet. However, it seems awkward that version\
    \ 0.8.2 works and 0.9.3 doesn't. \nAs I previously commented, the error seems\
    \ to be that CodeLlama models seems to be using a brand new class of tokenizer\
    \ (CodeLlamaTokenizer), which has not been implemented on the newest TGI version\
    \ (0.9.3) let alone an older version like 0.8.2. Anyway, I could be mistaken and\
    \ downgrading might work. \nIn addition, if anyone has any tutorials on how to\
    \ build your own TGI container it would be nice to learn. I haven't found out\
    \ any tutorials on how to do it."
  created_at: 2023-09-18 17:42:06+00:00
  edited: false
  hidden: false
  id: 650899fe2e4bbde418e0fa90
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c9ce0a9d4b1b73063b1b119eb94df264.svg
      fullname: Arcel F.
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hfkfabo
      type: user
    createdAt: '2023-09-18T18:47:13.000Z'
    data:
      edited: false
      editors:
      - hfkfabo
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9314221143722534
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c9ce0a9d4b1b73063b1b119eb94df264.svg
          fullname: Arcel F.
          isHf: false
          isPro: false
          name: hfkfabo
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lucasbonservizzi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lucasbonservizzi\"\
          >@<span class=\"underline\">lucasbonservizzi</span></a></span>\n\n\t</span></span>\
          \ I tested the new TGI release (1.0.3) and it seems to work pretty well.<br><a\
          \ rel=\"nofollow\" href=\"https://github.com/aws/deep-learning-containers/pull/3286\"\
          >https://github.com/aws/deep-learning-containers/pull/3286</a></p>\n"
        raw: '@lucasbonservizzi I tested the new TGI release (1.0.3) and it seems
          to work pretty well.

          https://github.com/aws/deep-learning-containers/pull/3286'
        updatedAt: '2023-09-18T18:47:13.175Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - philschmid
    id: 65089b31623330a3a5fed39b
    type: comment
  author: hfkfabo
  content: '@lucasbonservizzi I tested the new TGI release (1.0.3) and it seems to
    work pretty well.

    https://github.com/aws/deep-learning-containers/pull/3286'
  created_at: 2023-09-18 17:47:13+00:00
  edited: false
  hidden: false
  id: 65089b31623330a3a5fed39b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-09-19T07:21:03.000Z'
    data:
      edited: false
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9902105331420898
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: '<p>The code snippet you get from "deploy" is updated as well. </p>

          '
        raw: 'The code snippet you get from "deploy" is updated as well. '
        updatedAt: '2023-09-19T07:21:03.091Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - hfkfabo
    id: 65094bdf61c4bb4636efc806
    type: comment
  author: philschmid
  content: 'The code snippet you get from "deploy" is updated as well. '
  created_at: 2023-09-19 06:21:03+00:00
  edited: false
  hidden: false
  id: 65094bdf61c4bb4636efc806
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: codellama/CodeLlama-7b-Instruct-hf
repo_type: model
status: open
target_branch: null
title: SageMaker deployment script doesn't work
