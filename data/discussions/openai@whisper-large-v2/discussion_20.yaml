!!python/object:huggingface_hub.community.DiscussionWithDetails
author: canu
conflicting_files: null
created_at: 2023-02-01 15:13:41+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675259658639-noauth.jpeg?w=200&h=200&f=face
      fullname: can nuhoglu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: canu
      type: user
    createdAt: '2023-02-01T15:13:41.000Z'
    data:
      edited: true
      editors:
      - canu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675259658639-noauth.jpeg?w=200&h=200&f=face
          fullname: can nuhoglu
          isHf: false
          isPro: false
          name: canu
          type: user
        html: '<p>Hello everyone, we have started using whisper API and curretnly
          testing it for various languages. We have experienced a problem with the
          returned data.</p>

          <p>When we speak English, French or Spanish the returned data comes in English,
          French or Spanish as  it should. But we we speak Turkish, the returned data
          is in English. This is only happening when we send a request to API.</p>

          <p>However, when we try this in local we are not experiencing this problem.
          Unfortunately we couldn''t find something relatable in the documentation
          for this problem.</p>

          <p>Anyone have an an idea what is the cuase of this?</p>

          '
        raw: 'Hello everyone, we have started using whisper API and curretnly testing
          it for various languages. We have experienced a problem with the returned
          data.


          When we speak English, French or Spanish the returned data comes in English,
          French or Spanish as  it should. But we we speak Turkish, the returned data
          is in English. This is only happening when we send a request to API.


          However, when we try this in local we are not experiencing this problem.
          Unfortunately we couldn''t find something relatable in the documentation
          for this problem.


          Anyone have an an idea what is the cuase of this?'
        updatedAt: '2023-02-01T16:31:22.751Z'
      numEdits: 1
      reactions: []
    id: 63da81a58658cbc1cc4a920c
    type: comment
  author: canu
  content: 'Hello everyone, we have started using whisper API and curretnly testing
    it for various languages. We have experienced a problem with the returned data.


    When we speak English, French or Spanish the returned data comes in English, French
    or Spanish as  it should. But we we speak Turkish, the returned data is in English.
    This is only happening when we send a request to API.


    However, when we try this in local we are not experiencing this problem. Unfortunately
    we couldn''t find something relatable in the documentation for this problem.


    Anyone have an an idea what is the cuase of this?'
  created_at: 2023-02-01 15:13:41+00:00
  edited: true
  hidden: false
  id: 63da81a58658cbc1cc4a920c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-02-02T10:06:17.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;canu&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/canu\">@<span class=\"\
          underline\">canu</span></a></span>\n\n\t</span></span>! I've had a quick\
          \ scan through this blog post: <a rel=\"nofollow\" href=\"https://www.philschmid.de/whisper-inference-endpoints\"\
          >https://www.philschmid.de/whisper-inference-endpoints</a></p>\n<p>It mentions\
          \ the following:</p>\n<blockquote>\n<p>Note: By default, Inference Endpoint\
          \ will use \u201CEnglish\u201D as the language for transcription, if you\
          \ want to use Whisper for non-English speech recognition you would need\
          \ to create a <a href=\"https://huggingface.co/docs/inference-endpoints/guides/custom_handler\"\
          >custom handler</a> and adjust <a href=\"https://huggingface.co/spaces/whisper-event/whisper-demo/blob/main/app.py#L19\"\
          >decoder prompt</a>.</p>\n</blockquote>\n<p>Would adding a custom handler\
          \ and changing the decoder prompt ids work here?</p>\n"
        raw: "Hey @canu! I've had a quick scan through this blog post: https://www.philschmid.de/whisper-inference-endpoints\n\
          \nIt mentions the following:\n\n> Note: By default, Inference Endpoint will\
          \ use \u201CEnglish\u201D as the language for transcription, if you want\
          \ to use Whisper for non-English speech recognition you would need to create\
          \ a [custom handler](https://huggingface.co/docs/inference-endpoints/guides/custom_handler)\
          \ and adjust [decoder prompt](https://huggingface.co/spaces/whisper-event/whisper-demo/blob/main/app.py#L19).\n\
          \nWould adding a custom handler and changing the decoder prompt ids work\
          \ here?"
        updatedAt: '2023-02-02T10:06:17.547Z'
      numEdits: 0
      reactions: []
    id: 63db8b19ef6ecf800eca6611
    type: comment
  author: sanchit-gandhi
  content: "Hey @canu! I've had a quick scan through this blog post: https://www.philschmid.de/whisper-inference-endpoints\n\
    \nIt mentions the following:\n\n> Note: By default, Inference Endpoint will use\
    \ \u201CEnglish\u201D as the language for transcription, if you want to use Whisper\
    \ for non-English speech recognition you would need to create a [custom handler](https://huggingface.co/docs/inference-endpoints/guides/custom_handler)\
    \ and adjust [decoder prompt](https://huggingface.co/spaces/whisper-event/whisper-demo/blob/main/app.py#L19).\n\
    \nWould adding a custom handler and changing the decoder prompt ids work here?"
  created_at: 2023-02-02 10:06:17+00:00
  edited: false
  hidden: false
  id: 63db8b19ef6ecf800eca6611
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675259658639-noauth.jpeg?w=200&h=200&f=face
      fullname: can nuhoglu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: canu
      type: user
    createdAt: '2023-02-02T23:33:43.000Z'
    data:
      edited: false
      editors:
      - canu
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675259658639-noauth.jpeg?w=200&h=200&f=face
          fullname: can nuhoglu
          isHf: false
          isPro: false
          name: canu
          type: user
        html: "<p>Thank you very much <span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>...</p>\n\
          <p>The link was very helpful as a guideline. We are actullay planning to\
          \ run this locally with decoders. Yes it would work that way definetely.\
          \ Although we may not be using inference endpoints.</p>\n"
        raw: 'Thank you very much @sanchit-gandhi...


          The link was very helpful as a guideline. We are actullay planning to run
          this locally with decoders. Yes it would work that way definetely. Although
          we may not be using inference endpoints.'
        updatedAt: '2023-02-02T23:33:43.821Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - ArthurZ
    id: 63dc48572a0239d2210ecacb
    type: comment
  author: canu
  content: 'Thank you very much @sanchit-gandhi...


    The link was very helpful as a guideline. We are actullay planning to run this
    locally with decoders. Yes it would work that way definetely. Although we may
    not be using inference endpoints.'
  created_at: 2023-02-02 23:33:43+00:00
  edited: false
  hidden: false
  id: 63dc48572a0239d2210ecacb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-02-10T12:58:47.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: '<p>Awesome, glad to hear it! Let me know if you experience any difficulties
          - happy to help here!</p>

          '
        raw: Awesome, glad to hear it! Let me know if you experience any difficulties
          - happy to help here!
        updatedAt: '2023-02-10T12:58:47.284Z'
      numEdits: 0
      reactions: []
    id: 63e63f8770fa0ed02a5003d6
    type: comment
  author: sanchit-gandhi
  content: Awesome, glad to hear it! Let me know if you experience any difficulties
    - happy to help here!
  created_at: 2023-02-10 12:58:47+00:00
  edited: false
  hidden: false
  id: 63e63f8770fa0ed02a5003d6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e700a4110bdf3b8044c1e5c44e53648f.svg
      fullname: Koen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bonen
      type: user
    createdAt: '2023-02-25T11:27:49.000Z'
    data:
      edited: false
      editors:
      - bonen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e700a4110bdf3b8044c1e5c44e53648f.svg
          fullname: Koen
          isHf: false
          isPro: false
          name: bonen
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ I have the same question. I am new to Hugging face, pipelines and handler\
          \ so I have no idea how to create a custom handler for this Whisper Inference\
          \ point and where to adjust the decoder prompt. Could you point me in the\
          \ right direction? Can I make language a variable that I add when calling\
          \ my endpoint or will I be only able to hardcode the language?</p>\n<p>Thanks\
          \ a lot for your help!</p>\n"
        raw: '@sanchit-gandhi I have the same question. I am new to Hugging face,
          pipelines and handler so I have no idea how to create a custom handler for
          this Whisper Inference point and where to adjust the decoder prompt. Could
          you point me in the right direction? Can I make language a variable that
          I add when calling my endpoint or will I be only able to hardcode the language?


          Thanks a lot for your help!'
        updatedAt: '2023-02-25T11:27:49.213Z'
      numEdits: 0
      reactions: []
    id: 63f9f0b59fa66a34ee7f5aa3
    type: comment
  author: bonen
  content: '@sanchit-gandhi I have the same question. I am new to Hugging face, pipelines
    and handler so I have no idea how to create a custom handler for this Whisper
    Inference point and where to adjust the decoder prompt. Could you point me in
    the right direction? Can I make language a variable that I add when calling my
    endpoint or will I be only able to hardcode the language?


    Thanks a lot for your help!'
  created_at: 2023-02-25 11:27:49+00:00
  edited: false
  hidden: false
  id: 63f9f0b59fa66a34ee7f5aa3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-03-03T16:11:32.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;bonen&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/bonen\">@<span class=\"\
          underline\">bonen</span></a></span>\n\n\t</span></span>! There's a guide\
          \ here that might help: <a href=\"https://huggingface.co/docs/inference-endpoints/guides/custom_handler\"\
          >https://huggingface.co/docs/inference-endpoints/guides/custom_handler</a></p>\n\
          <p>We need to set the correct forced ids in the config and generation config.\
          \ The code for this looks as follows:</p>\n<pre><code class=\"language-python\"\
          >self.pipeline.model.config.forced_decoder_ids = self.pipeline.model.processor.get_decoder_prompt_ids(language=<span\
          \ class=\"hljs-string\">\"Spanish\"</span>, task=<span class=\"hljs-string\"\
          >\"transcribe\"</span>)\nself.pipeline.model.generation_config.forced_decoder_ids\
          \ = self.pipeline.model.config.forced_decoder_ids  <span class=\"hljs-comment\"\
          ># just to be sure!</span>\n</code></pre>\n<p>Maybe you can add this to\
          \ the <code>__init__</code> method?</p>\n"
        raw: 'Hey @bonen! There''s a guide here that might help: https://huggingface.co/docs/inference-endpoints/guides/custom_handler


          We need to set the correct forced ids in the config and generation config.
          The code for this looks as follows:

          ```python

          self.pipeline.model.config.forced_decoder_ids = self.pipeline.model.processor.get_decoder_prompt_ids(language="Spanish",
          task="transcribe")

          self.pipeline.model.generation_config.forced_decoder_ids = self.pipeline.model.config.forced_decoder_ids  #
          just to be sure!

          ```

          Maybe you can add this to the `__init__` method?'
        updatedAt: '2023-03-03T16:11:32.763Z'
      numEdits: 0
      reactions: []
    id: 64021c34fc948f5b169bfebc
    type: comment
  author: sanchit-gandhi
  content: 'Hey @bonen! There''s a guide here that might help: https://huggingface.co/docs/inference-endpoints/guides/custom_handler


    We need to set the correct forced ids in the config and generation config. The
    code for this looks as follows:

    ```python

    self.pipeline.model.config.forced_decoder_ids = self.pipeline.model.processor.get_decoder_prompt_ids(language="Spanish",
    task="transcribe")

    self.pipeline.model.generation_config.forced_decoder_ids = self.pipeline.model.config.forced_decoder_ids  #
    just to be sure!

    ```

    Maybe you can add this to the `__init__` method?'
  created_at: 2023-03-03 16:11:32+00:00
  edited: false
  hidden: false
  id: 64021c34fc948f5b169bfebc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/41b532ed5323a3d18f388e7f916d4b0e.svg
      fullname: Leslie Jones
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lesliejd
      type: user
    createdAt: '2023-03-13T18:36:50.000Z'
    data:
      edited: false
      editors:
      - lesliejd
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/41b532ed5323a3d18f388e7f916d4b0e.svg
          fullname: Leslie Jones
          isHf: false
          isPro: false
          name: lesliejd
          type: user
        html: "<p>Has anyone managed to get translation working? I am currently using\
          \ the pipeline method and am finding that regardless of task=\"translate\"\
          \ and the language I define, I always get a transcript of the file, with\
          \ the language spoken in the file. </p>\n<p>My exact code is the following\
          \ for a portuguese file:</p>\n<p>In the <code>__init__ </code> method</p>\n\
          <pre><code>self.pipe = pipeline(\n            task=\"automatic-speech-recognition\"\
          ,\n            model=path,\n            chunk_length_s=30,\n           \
          \ device=device,\n        )\n\n        self.pipe.model.config.forced_decoder_ids\
          \ = self.pipe.tokenizer.get_decoder_prompt_ids(language=\"portuguese\",\
          \ task=\"translate\")\n        self.pipe.model.generation_config.forced_decoder_ids\
          \ = self.pipe.model.config.forced_decoder_ids\n</code></pre>\n<p>then in\
          \ the <code>__call__</code> method</p>\n<pre><code>        inputs = data.pop(\"\
          inputs\",data)\n        prediction = self.pipe(inputs, return_timestamps=True)\n\
          \        return prediction\n</code></pre>\n<p>This pretty much matches the\
          \ samples and code suggestion in this thread, yet I have not succeed in\
          \ accomplishing actual translation. This code works to produce a transcript.</p>\n"
        raw: "Has anyone managed to get translation working? I am currently using\
          \ the pipeline method and am finding that regardless of task=\"translate\"\
          \ and the language I define, I always get a transcript of the file, with\
          \ the language spoken in the file. \n\nMy exact code is the following for\
          \ a portuguese file:\n\nIn the ```__init__ ``` method\n\n```\nself.pipe\
          \ = pipeline(\n            task=\"automatic-speech-recognition\",\n    \
          \        model=path,\n            chunk_length_s=30,\n            device=device,\n\
          \        )\n\n        self.pipe.model.config.forced_decoder_ids = self.pipe.tokenizer.get_decoder_prompt_ids(language=\"\
          portuguese\", task=\"translate\")\n        self.pipe.model.generation_config.forced_decoder_ids\
          \ = self.pipe.model.config.forced_decoder_ids\n```\n\nthen in the ```__call__```\
          \ method\n\n```\n        inputs = data.pop(\"inputs\",data)\n        prediction\
          \ = self.pipe(inputs, return_timestamps=True)\n        return prediction\n\
          ```\n\nThis pretty much matches the samples and code suggestion in this\
          \ thread, yet I have not succeed in accomplishing actual translation. This\
          \ code works to produce a transcript."
        updatedAt: '2023-03-13T18:36:50.052Z'
      numEdits: 0
      reactions: []
    id: 640f6d422ec22527ea445d1a
    type: comment
  author: lesliejd
  content: "Has anyone managed to get translation working? I am currently using the\
    \ pipeline method and am finding that regardless of task=\"translate\" and the\
    \ language I define, I always get a transcript of the file, with the language\
    \ spoken in the file. \n\nMy exact code is the following for a portuguese file:\n\
    \nIn the ```__init__ ``` method\n\n```\nself.pipe = pipeline(\n            task=\"\
    automatic-speech-recognition\",\n            model=path,\n            chunk_length_s=30,\n\
    \            device=device,\n        )\n\n        self.pipe.model.config.forced_decoder_ids\
    \ = self.pipe.tokenizer.get_decoder_prompt_ids(language=\"portuguese\", task=\"\
    translate\")\n        self.pipe.model.generation_config.forced_decoder_ids = self.pipe.model.config.forced_decoder_ids\n\
    ```\n\nthen in the ```__call__``` method\n\n```\n        inputs = data.pop(\"\
    inputs\",data)\n        prediction = self.pipe(inputs, return_timestamps=True)\n\
    \        return prediction\n```\n\nThis pretty much matches the samples and code\
    \ suggestion in this thread, yet I have not succeed in accomplishing actual translation.\
    \ This code works to produce a transcript."
  created_at: 2023-03-13 17:36:50+00:00
  edited: false
  hidden: false
  id: 640f6d422ec22527ea445d1a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e700a4110bdf3b8044c1e5c44e53648f.svg
      fullname: Koen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bonen
      type: user
    createdAt: '2023-03-15T17:36:22.000Z'
    data:
      edited: false
      editors:
      - bonen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e700a4110bdf3b8044c1e5c44e53648f.svg
          fullname: Koen
          isHf: false
          isPro: false
          name: bonen
          type: user
        html: "<p>Thanks a lot <span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ &amp; <span data-props=\"{&quot;user&quot;:&quot;lesliejd&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lesliejd\">@<span class=\"\
          underline\">lesliejd</span></a></span>\n\n\t</span></span> !</p>\n"
        raw: Thanks a lot @sanchit-gandhi & @lesliejd !
        updatedAt: '2023-03-15T17:36:22.227Z'
      numEdits: 0
      reactions: []
    id: 641202162643b35d1f5bf2b9
    type: comment
  author: bonen
  content: Thanks a lot @sanchit-gandhi & @lesliejd !
  created_at: 2023-03-15 16:36:22+00:00
  edited: false
  hidden: false
  id: 641202162643b35d1f5bf2b9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-03-17T16:58:19.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;lesliejd&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/lesliejd\"\
          >@<span class=\"underline\">lesliejd</span></a></span>\n\n\t</span></span>!\
          \  Updating to the latest version should fix these issues and make this\
          \ code work hitch-free:</p>\n<pre><code>pip install --upgrade transformers\n\
          </code></pre>\n<p>There's also the option of passing the task/language to\
          \ the pipe at inference time. If you know the language a-priori, you can\
          \ pass it as follows:</p>\n<pre><code class=\"language-python\">pipe(audio,\
          \ return_timestamps=<span class=\"hljs-literal\">True</span>, generate_kwargs={<span\
          \ class=\"hljs-string\">\"language\"</span>: <span class=\"hljs-string\"\
          >\"french\"</span>}\n</code></pre>\n<p>Likewise, you can specify the task\
          \ as <code>translate</code>/<code>transcribe</code>:</p>\n<pre><code class=\"\
          language-python\">pipe(audio, return_timestamps=<span class=\"hljs-literal\"\
          >True</span>, generate_kwargs={<span class=\"hljs-string\">\"language\"\
          </span>: <span class=\"hljs-string\">\"french\"</span>, <span class=\"hljs-string\"\
          >\"task\"</span>: <span class=\"hljs-string\">\"transcribe\"</span>}\n</code></pre>\n\
          <p>Let us know if you have any other questions, more than happy to help!</p>\n"
        raw: 'Hey @lesliejd!  Updating to the latest version should fix these issues
          and make this code work hitch-free:

          ```

          pip install --upgrade transformers

          ```


          There''s also the option of passing the task/language to the pipe at inference
          time. If you know the language a-priori, you can pass it as follows:

          ```python

          pipe(audio, return_timestamps=True, generate_kwargs={"language": "french"}

          ```


          Likewise, you can specify the task as `translate`/`transcribe`:

          ```python

          pipe(audio, return_timestamps=True, generate_kwargs={"language": "french",
          "task": "transcribe"}

          ```


          Let us know if you have any other questions, more than happy to help!'
        updatedAt: '2023-03-17T16:58:19.635Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\U0001F917"
        users:
        - lesliejd
        - leomeow33
        - jonfv
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - jonfv
      - count: 1
        reaction: "\U0001F44D"
        users:
        - jonfv
      - count: 1
        reaction: "\U0001F91D"
        users:
        - jonfv
      - count: 1
        reaction: "\U0001F92F"
        users:
        - jonfv
    id: 64149c2b839116b7ffa082e1
    type: comment
  author: sanchit-gandhi
  content: 'Hey @lesliejd!  Updating to the latest version should fix these issues
    and make this code work hitch-free:

    ```

    pip install --upgrade transformers

    ```


    There''s also the option of passing the task/language to the pipe at inference
    time. If you know the language a-priori, you can pass it as follows:

    ```python

    pipe(audio, return_timestamps=True, generate_kwargs={"language": "french"}

    ```


    Likewise, you can specify the task as `translate`/`transcribe`:

    ```python

    pipe(audio, return_timestamps=True, generate_kwargs={"language": "french", "task":
    "transcribe"}

    ```


    Let us know if you have any other questions, more than happy to help!'
  created_at: 2023-03-17 15:58:19+00:00
  edited: false
  hidden: false
  id: 64149c2b839116b7ffa082e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/3ea52ad187f952d7fafdf4f5f6292124.svg
      fullname: Martin Jurkovic
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: martinjurkovic
      type: user
    createdAt: '2023-03-25T10:39:47.000Z'
    data:
      edited: false
      editors:
      - martinjurkovic
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/3ea52ad187f952d7fafdf4f5f6292124.svg
          fullname: Martin Jurkovic
          isHf: false
          isPro: false
          name: martinjurkovic
          type: user
        html: '<p>Hi! Thanks for all your responses until now.</p>

          <p>As I am a beginner I still don''t understand how I could pass the language
          parameter when calling the api with curl for transcription?<br>What I would
          like to do is get the language in the <code>__call__</code> method and pass
          it to:<br><code>pipe(audio, return_timestamps=True, generate_kwargs={"language":
          language, "task": "transcribe"}</code></p>

          '
        raw: 'Hi! Thanks for all your responses until now.


          As I am a beginner I still don''t understand how I could pass the language
          parameter when calling the api with curl for transcription?

          What I would like to do is get the language in the `__call__` method and
          pass it to:

          ```pipe(audio, return_timestamps=True, generate_kwargs={"language": language,
          "task": "transcribe"}```'
        updatedAt: '2023-03-25T10:39:47.378Z'
      numEdits: 0
      reactions: []
    id: 641ecf73485c37e54d68a7a1
    type: comment
  author: martinjurkovic
  content: 'Hi! Thanks for all your responses until now.


    As I am a beginner I still don''t understand how I could pass the language parameter
    when calling the api with curl for transcription?

    What I would like to do is get the language in the `__call__` method and pass
    it to:

    ```pipe(audio, return_timestamps=True, generate_kwargs={"language": language,
    "task": "transcribe"}```'
  created_at: 2023-03-25 09:39:47+00:00
  edited: false
  hidden: false
  id: 641ecf73485c37e54d68a7a1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-04-04T16:45:27.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;martinjurkovic&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/martinjurkovic\"\
          >@<span class=\"underline\">martinjurkovic</span></a></span>\n\n\t</span></span>!\
          \ You would need to create a custom handler for this, see <a href=\"https://huggingface.co/openai/whisper-large-v2/discussions/20#63db8b19ef6ecf800eca6611\"\
          >https://huggingface.co/openai/whisper-large-v2/discussions/20#63db8b19ef6ecf800eca6611</a></p>\n"
        raw: Hey @martinjurkovic! You would need to create a custom handler for this,
          see https://huggingface.co/openai/whisper-large-v2/discussions/20#63db8b19ef6ecf800eca6611
        updatedAt: '2023-04-04T16:45:27.441Z'
      numEdits: 0
      reactions: []
    id: 642c54279efab84585eb1917
    type: comment
  author: sanchit-gandhi
  content: Hey @martinjurkovic! You would need to create a custom handler for this,
    see https://huggingface.co/openai/whisper-large-v2/discussions/20#63db8b19ef6ecf800eca6611
  created_at: 2023-04-04 15:45:27+00:00
  edited: false
  hidden: false
  id: 642c54279efab84585eb1917
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 20
repo_id: openai/whisper-large-v2
repo_type: model
status: open
target_branch: null
title: Language Problem
