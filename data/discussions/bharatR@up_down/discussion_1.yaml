!!python/object:huggingface_hub.community.DiscussionWithDetails
author: saravanankk57
conflicting_files: null
created_at: 2023-05-02 05:57:36+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/59ab691d262b5296364d3303f8aa29fe.svg
      fullname: saravanan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: saravanankk57
      type: user
    createdAt: '2023-05-02T06:57:36.000Z'
    data:
      edited: false
      editors:
      - saravanankk57
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/59ab691d262b5296364d3303f8aa29fe.svg
          fullname: saravanan
          isHf: false
          isPro: false
          name: saravanankk57
          type: user
        html: '<p>AttributeError: ''DataFrame'' object has no attribute ''column_names''</p>

          <p>when i try to load an exel file and try to train facing this blocker,</p>

          <p>code:<br>from datasets import Dataset, load_dataset<br>from sentence_transformers.losses
          import CosineSimilarityLoss</p>

          <p>from setfit import SetFitModel, SetFitTrainer, sample_dataset<br>import
          pandas as pd</p>

          <h1 id="load-the-dataset-from-an-excel-file">Load the dataset from an Excel
          file</h1>

          <p>xl_file = pd.read_excel("/content/asoc3_ap27.xlsx")<br>dataset = Dataset.from_pandas(xl_file)</p>

          <h1 id="simulate-the-few-shot-regime-by-sampling-8-examples-per-class">Simulate
          the few-shot regime by sampling 8 examples per class</h1>

          <p>train_dataset = sample_dataset(dataset, label_column="Intent", num_samples=8)<br>eval_dataset
          = dataset</p>

          <h1 id="load-a-setfit-model-from-hub">Load a SetFit model from Hub</h1>

          <p>model = SetFitModel.from_pretrained("sentence-transformers/paraphrase-mpnet-base-v2")</p>

          <h1 id="create-trainer">Create trainer</h1>

          <p>trainer = SetFitTrainer(<br>    model=model,<br>    train_dataset=train_dataset,<br>    eval_dataset=eval_dataset,<br>    loss_class=CosineSimilarityLoss,<br>    metric="accuracy",<br>    batch_size=16,<br>    num_iterations=20,
          # The number of text pairs to generate for contrastive learning<br>    num_epochs=1,
          # The number of epochs to use for contrastive learning</p>

          <p>)</p>

          <h1 id="train-and-evaluate">Train and evaluate</h1>

          <p>trainer.train()<br>metrics = trainer.evaluate()</p>

          <h1 id="push-model-to-the-hub">Push model to the Hub</h1>

          <p>trainer.push_to_hub("my-awesome-setfit-model")</p>

          <h1 id="download-from-hub-and-run-inference">Download from Hub and run inference</h1>

          <p>model = SetFitModel.from_pretrained</p>

          '
        raw: "AttributeError: 'DataFrame' object has no attribute 'column_names'\r\
          \n\r\nwhen i try to load an exel file and try to train facing this blocker,\r\
          \n\r\ncode:\r\nfrom datasets import Dataset, load_dataset\r\nfrom sentence_transformers.losses\
          \ import CosineSimilarityLoss\r\n\r\nfrom setfit import SetFitModel, SetFitTrainer,\
          \ sample_dataset\r\nimport pandas as pd\r\n\r\n# Load the dataset from an\
          \ Excel file\r\nxl_file = pd.read_excel(\"/content/asoc3_ap27.xlsx\")\r\n\
          dataset = Dataset.from_pandas(xl_file)\r\n\r\n# Simulate the few-shot regime\
          \ by sampling 8 examples per class\r\ntrain_dataset = sample_dataset(dataset,\
          \ label_column=\"Intent\", num_samples=8)\r\neval_dataset = dataset\r\n\r\
          \n# Load a SetFit model from Hub\r\nmodel = SetFitModel.from_pretrained(\"\
          sentence-transformers/paraphrase-mpnet-base-v2\")\r\n\r\n# Create trainer\r\
          \ntrainer = SetFitTrainer(\r\n    model=model,\r\n    train_dataset=train_dataset,\r\
          \n    eval_dataset=eval_dataset,\r\n    loss_class=CosineSimilarityLoss,\r\
          \n    metric=\"accuracy\",\r\n    batch_size=16,\r\n    num_iterations=20,\
          \ # The number of text pairs to generate for contrastive learning\r\n  \
          \  num_epochs=1, # The number of epochs to use for contrastive learning\r\
          \n \r\n \r\n)\r\n\r\n# Train and evaluate\r\ntrainer.train()\r\nmetrics\
          \ = trainer.evaluate()\r\n\r\n# Push model to the Hub\r\ntrainer.push_to_hub(\"\
          my-awesome-setfit-model\")\r\n\r\n# Download from Hub and run inference\r\
          \nmodel = SetFitModel.from_pretrained"
        updatedAt: '2023-05-02T06:57:36.942Z'
      numEdits: 0
      reactions: []
    id: 6450b460b92cebc6b7ec7003
    type: comment
  author: saravanankk57
  content: "AttributeError: 'DataFrame' object has no attribute 'column_names'\r\n\
    \r\nwhen i try to load an exel file and try to train facing this blocker,\r\n\r\
    \ncode:\r\nfrom datasets import Dataset, load_dataset\r\nfrom sentence_transformers.losses\
    \ import CosineSimilarityLoss\r\n\r\nfrom setfit import SetFitModel, SetFitTrainer,\
    \ sample_dataset\r\nimport pandas as pd\r\n\r\n# Load the dataset from an Excel\
    \ file\r\nxl_file = pd.read_excel(\"/content/asoc3_ap27.xlsx\")\r\ndataset = Dataset.from_pandas(xl_file)\r\
    \n\r\n# Simulate the few-shot regime by sampling 8 examples per class\r\ntrain_dataset\
    \ = sample_dataset(dataset, label_column=\"Intent\", num_samples=8)\r\neval_dataset\
    \ = dataset\r\n\r\n# Load a SetFit model from Hub\r\nmodel = SetFitModel.from_pretrained(\"\
    sentence-transformers/paraphrase-mpnet-base-v2\")\r\n\r\n# Create trainer\r\n\
    trainer = SetFitTrainer(\r\n    model=model,\r\n    train_dataset=train_dataset,\r\
    \n    eval_dataset=eval_dataset,\r\n    loss_class=CosineSimilarityLoss,\r\n \
    \   metric=\"accuracy\",\r\n    batch_size=16,\r\n    num_iterations=20, # The\
    \ number of text pairs to generate for contrastive learning\r\n    num_epochs=1,\
    \ # The number of epochs to use for contrastive learning\r\n \r\n \r\n)\r\n\r\n\
    # Train and evaluate\r\ntrainer.train()\r\nmetrics = trainer.evaluate()\r\n\r\n\
    # Push model to the Hub\r\ntrainer.push_to_hub(\"my-awesome-setfit-model\")\r\n\
    \r\n# Download from Hub and run inference\r\nmodel = SetFitModel.from_pretrained"
  created_at: 2023-05-02 05:57:36+00:00
  edited: false
  hidden: false
  id: 6450b460b92cebc6b7ec7003
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: bharatR/up_down
repo_type: model
status: open
target_branch: null
title: 'AttributeError: ''DataFrame'' object has no attribute ''column_names'''
