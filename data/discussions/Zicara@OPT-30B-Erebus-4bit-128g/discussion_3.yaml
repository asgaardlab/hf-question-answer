!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Jakxx
conflicting_files: null
created_at: 2023-04-17 05:57:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
      fullname: Jak xx
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jakxx
      type: user
    createdAt: '2023-04-17T06:57:20.000Z'
    data:
      edited: true
      editors:
      - Jakxx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
          fullname: Jak xx
          isHf: false
          isPro: false
          name: Jakxx
          type: user
        html: '<p>The model seems to load fine, but trying to generate text with it
          just throws me "RuntimeError: expected scalar type Float but found Half"</p>

          <p>Any idea what this could be? I loaded the model as bfloat16.</p>

          <p>Edit: my bad. I loaded the model as OPT instead of GPTJ into Oogabooga.
          &gt;_&lt;</p>

          '
        raw: 'The model seems to load fine, but trying to generate text with it just
          throws me "RuntimeError: expected scalar type Float but found Half"


          Any idea what this could be? I loaded the model as bfloat16.


          Edit: my bad. I loaded the model as OPT instead of GPTJ into Oogabooga.
          >_<'
        updatedAt: '2023-04-17T07:00:17.504Z'
      numEdits: 1
      reactions: []
    id: 643cedd0b561f17fa4675b89
    type: comment
  author: Jakxx
  content: 'The model seems to load fine, but trying to generate text with it just
    throws me "RuntimeError: expected scalar type Float but found Half"


    Any idea what this could be? I loaded the model as bfloat16.


    Edit: my bad. I loaded the model as OPT instead of GPTJ into Oogabooga. >_<'
  created_at: 2023-04-17 05:57:20+00:00
  edited: true
  hidden: false
  id: 643cedd0b561f17fa4675b89
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
      fullname: Glenn Wehmeyer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: djstraylight
      type: user
    createdAt: '2023-04-17T11:42:26.000Z'
    data:
      edited: false
      editors:
      - djstraylight
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
          fullname: Glenn Wehmeyer
          isHf: false
          isPro: false
          name: djstraylight
          type: user
        html: '<p>Has anybody gotten this model to load in oogabooga?  I''m also getting
          the "RuntimeError: expected scalar type Float but found Half"</p>

          <p>Using --wbits 4 --groupsize 128   (no model_type given)</p>

          <p>I''ve seen other people use model_type as gptj but it performs slow as
          hell.</p>

          <p>I''m having no problem loading MetaIX/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors
          with just --wbits 4 --groupsize 128.</p>

          '
        raw: 'Has anybody gotten this model to load in oogabooga?  I''m also getting
          the "RuntimeError: expected scalar type Float but found Half"


          Using --wbits 4 --groupsize 128   (no model_type given)


          I''ve seen other people use model_type as gptj but it performs slow as hell.


          I''m having no problem loading MetaIX/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors
          with just --wbits 4 --groupsize 128.'
        updatedAt: '2023-04-17T11:42:26.568Z'
      numEdits: 0
      reactions: []
    id: 643d30a2455be6574c832bb1
    type: comment
  author: djstraylight
  content: 'Has anybody gotten this model to load in oogabooga?  I''m also getting
    the "RuntimeError: expected scalar type Float but found Half"


    Using --wbits 4 --groupsize 128   (no model_type given)


    I''ve seen other people use model_type as gptj but it performs slow as hell.


    I''m having no problem loading MetaIX/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors
    with just --wbits 4 --groupsize 128.'
  created_at: 2023-04-17 10:42:26+00:00
  edited: false
  hidden: false
  id: 643d30a2455be6574c832bb1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
      fullname: Jak xx
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jakxx
      type: user
    createdAt: '2023-04-17T17:20:25.000Z'
    data:
      edited: false
      editors:
      - Jakxx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
          fullname: Jak xx
          isHf: false
          isPro: false
          name: Jakxx
          type: user
        html: '<p>I think that is just what you have to deal with. 30 Billion parameters
          are a LOT of data. I am running this on a 4090 and I get around 0.4 tokens/s,
          while a 13B model gives me more like 9 tokens/s.</p>

          '
        raw: I think that is just what you have to deal with. 30 Billion parameters
          are a LOT of data. I am running this on a 4090 and I get around 0.4 tokens/s,
          while a 13B model gives me more like 9 tokens/s.
        updatedAt: '2023-04-17T17:20:25.779Z'
      numEdits: 0
      reactions: []
    id: 643d7fd98f6f0a64135545e6
    type: comment
  author: Jakxx
  content: I think that is just what you have to deal with. 30 Billion parameters
    are a LOT of data. I am running this on a 4090 and I get around 0.4 tokens/s,
    while a 13B model gives me more like 9 tokens/s.
  created_at: 2023-04-17 16:20:25+00:00
  edited: false
  hidden: false
  id: 643d7fd98f6f0a64135545e6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
      fullname: Glenn Wehmeyer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: djstraylight
      type: user
    createdAt: '2023-04-17T19:12:51.000Z'
    data:
      edited: false
      editors:
      - djstraylight
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
          fullname: Glenn Wehmeyer
          isHf: false
          isPro: false
          name: djstraylight
          type: user
        html: '<p>Jakxx.. the only problem is that my other 30 Billion parameter model
          performs ok on a 3090:</p>

          <p>Found the following quantized model: models/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors<br>Loading
          model ...<br>Done.<br>Loaded the model in 18.39 seconds.<br>Output generated
          in 9.74 seconds (6.26 tokens/s, 61 tokens, context 218, seed 3259645)</p>

          <p>Try MetaIX/GPT4-X-Alpaca-30B-Int4 on your 4090.</p>

          '
        raw: 'Jakxx.. the only problem is that my other 30 Billion parameter model
          performs ok on a 3090:


          Found the following quantized model: models/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors

          Loading model ...

          Done.

          Loaded the model in 18.39 seconds.

          Output generated in 9.74 seconds (6.26 tokens/s, 61 tokens, context 218,
          seed 3259645)


          Try MetaIX/GPT4-X-Alpaca-30B-Int4 on your 4090.'
        updatedAt: '2023-04-17T19:12:51.803Z'
      numEdits: 0
      reactions: []
    id: 643d9a33d4dcedc31869db93
    type: comment
  author: djstraylight
  content: 'Jakxx.. the only problem is that my other 30 Billion parameter model performs
    ok on a 3090:


    Found the following quantized model: models/GPT4-X-Alpaca-30B-Int4/gpt4-x-alpaca-30b-128g-4bit.safetensors

    Loading model ...

    Done.

    Loaded the model in 18.39 seconds.

    Output generated in 9.74 seconds (6.26 tokens/s, 61 tokens, context 218, seed
    3259645)


    Try MetaIX/GPT4-X-Alpaca-30B-Int4 on your 4090.'
  created_at: 2023-04-17 18:12:51+00:00
  edited: false
  hidden: false
  id: 643d9a33d4dcedc31869db93
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
      fullname: Glenn Wehmeyer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: djstraylight
      type: user
    createdAt: '2023-04-17T19:58:45.000Z'
    data:
      edited: false
      editors:
      - djstraylight
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6fd5bd55d8a3a6490e5874c0ba4842c8.svg
          fullname: Glenn Wehmeyer
          isHf: false
          isPro: false
          name: djstraylight
          type: user
        html: '<p>I believe this model was quantized with a funny branch of GPTQ-for-LLaMa.  Most
          people are using the standard GPTQ-for-LLaMa with text-generation-webui.  Hopefully,
          we''ll see another version of this model quantized.</p>

          '
        raw: I believe this model was quantized with a funny branch of GPTQ-for-LLaMa.  Most
          people are using the standard GPTQ-for-LLaMa with text-generation-webui.  Hopefully,
          we'll see another version of this model quantized.
        updatedAt: '2023-04-17T19:58:45.284Z'
      numEdits: 0
      reactions: []
    id: 643da4f546c2cebe83baf5c6
    type: comment
  author: djstraylight
  content: I believe this model was quantized with a funny branch of GPTQ-for-LLaMa.  Most
    people are using the standard GPTQ-for-LLaMa with text-generation-webui.  Hopefully,
    we'll see another version of this model quantized.
  created_at: 2023-04-17 18:58:45+00:00
  edited: false
  hidden: false
  id: 643da4f546c2cebe83baf5c6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
      fullname: Jak xx
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Jakxx
      type: user
    createdAt: '2023-04-18T17:37:07.000Z'
    data:
      edited: false
      editors:
      - Jakxx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9f52f8c94d6a9aefd28c35c31e112d1e.svg
          fullname: Jak xx
          isHf: false
          isPro: false
          name: Jakxx
          type: user
        html: '<p>Aah well here''s to hoping.</p>

          '
        raw: Aah well here's to hoping.
        updatedAt: '2023-04-18T17:37:07.286Z'
      numEdits: 0
      reactions: []
    id: 643ed5434c5309c244959e86
    type: comment
  author: Jakxx
  content: Aah well here's to hoping.
  created_at: 2023-04-18 16:37:07+00:00
  edited: false
  hidden: false
  id: 643ed5434c5309c244959e86
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: Zicara/OPT-30B-Erebus-4bit-128g
repo_type: model
status: open
target_branch: null
title: 'RuntimeError: expected scalar type Float but found Half'
