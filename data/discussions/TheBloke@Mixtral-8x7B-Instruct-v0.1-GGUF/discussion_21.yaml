!!python/object:huggingface_hub.community.DiscussionWithDetails
author: csanchez-aureum
conflicting_files: null
created_at: 2024-01-23 13:51:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/64109a032493936635c2e4722630d2d2.svg
      fullname: Claudio Sanchez
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: csanchez-aureum
      type: user
    createdAt: '2024-01-23T13:51:33.000Z'
    data:
      edited: false
      editors:
      - csanchez-aureum
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.647820770740509
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/64109a032493936635c2e4722630d2d2.svg
          fullname: Claudio Sanchez
          isHf: false
          isPro: false
          name: csanchez-aureum
          type: user
        html: "<p>Hi, I'm getting a download error when trying to deploy to SageMaker\
          \ using the script that is in Deploy -&gt; Amazon SageMaker.<br>Here are\
          \ the script and the error log.</p>\n<p><strong>Deploy Script:</strong></p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-comment\"># Hub\
          \ Model configuration. https://huggingface.co/models</span>\nhub = {\n \
          \   <span class=\"hljs-string\">'HF_MODEL_ID'</span>:<span class=\"hljs-string\"\
          >'TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF'</span>,\n    <span class=\"\
          hljs-string\">'SM_NUM_GPUS'</span>: json.dumps(<span class=\"hljs-number\"\
          >1</span>)\n}\n\n<span class=\"hljs-comment\"># create Hugging Face Model\
          \ Class</span>\nhuggingface_model = HuggingFaceModel(\n    image_uri=get_huggingface_llm_image_uri(<span\
          \ class=\"hljs-string\">\"huggingface\"</span>,version=<span class=\"hljs-string\"\
          >\"1.1.0\"</span>),\n    env=hub,\n    role=role, \n)\n\n<span class=\"\
          hljs-comment\"># deploy model to SageMaker Inference</span>\npredictor =\
          \ huggingface_model.deploy(\n    initial_instance_count=<span class=\"hljs-number\"\
          >1</span>,\n    instance_type=<span class=\"hljs-string\">\"ml.g5.2xlarge\"\
          </span>,\n    container_startup_health_check_timeout=<span class=\"hljs-number\"\
          >300</span>,\n  )\n</code></pre>\n<p><strong>Error Log:</strong></p>\n<pre><code>[huggingface_hub.utils._errors.EntryNotFoundError:\
          \ No .bin weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF\
          \ and revision None.\nand](Error: DownloadError\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 96, in weight_files\n    filenames = weight_hub_files(model_id, revision,\
          \ extension)\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 37, in weight_hub_files\n    raise EntryNotFoundError()\n\nhuggingface_hub.utils._errors.EntryNotFoundError:\
          \ No .safetensors weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF\
          \ and revision None.\n\nDuring handling of the above exception, another\
          \ exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/conda/bin/text-generation-server\"\
          , line 8, in &lt;module&gt;\n    sys.exit(app())\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
          , line 115, in download_weights\n    utils.weight_files(model_id, revision,\
          \ extension)\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 101, in weight_files\n    pt_filenames = weight_hub_files(model_id,\
          \ revision, extension=\".bin\")\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 37, in weight_hub_files\n    raise EntryNotFoundError(\n\nhuggingface_hub.utils._errors.EntryNotFoundError:\
          \ No .bin weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF\
          \ and revision None.\n</code></pre>\n<p>Is that script expected to work?</p>\n"
        raw: "Hi, I'm getting a download error when trying to deploy to SageMaker\
          \ using the script that is in Deploy -> Amazon SageMaker.\r\nHere are the\
          \ script and the error log.\r\n\r\n**Deploy Script:**\r\n```python\r\n#\
          \ Hub Model configuration. https://huggingface.co/models\r\nhub = {\r\n\t\
          'HF_MODEL_ID':'TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF',\r\n\t'SM_NUM_GPUS':\
          \ json.dumps(1)\r\n}\r\n\r\n# create Hugging Face Model Class\r\nhuggingface_model\
          \ = HuggingFaceModel(\r\n\timage_uri=get_huggingface_llm_image_uri(\"huggingface\"\
          ,version=\"1.1.0\"),\r\n\tenv=hub,\r\n\trole=role, \r\n)\r\n\r\n# deploy\
          \ model to SageMaker Inference\r\npredictor = huggingface_model.deploy(\r\
          \n\tinitial_instance_count=1,\r\n\tinstance_type=\"ml.g5.2xlarge\",\r\n\t\
          container_startup_health_check_timeout=300,\r\n  )\r\n```\r\n\r\n**Error\
          \ Log:**\r\n```\r\n[huggingface_hub.utils._errors.EntryNotFoundError: No\
          \ .bin weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF\
          \ and revision None.\r\nand](Error: DownloadError\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 96, in weight_files\r\n    filenames = weight_hub_files(model_id,\
          \ revision, extension)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 37, in weight_hub_files\r\n    raise EntryNotFoundError()\r\n\r\n\
          huggingface_hub.utils._errors.EntryNotFoundError: No .safetensors weights\
          \ found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF and revision\
          \ None.\r\n\r\nDuring handling of the above exception, another exception\
          \ occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/text-generation-server\"\
          , line 8, in <module>\r\n    sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
          , line 115, in download_weights\r\n    utils.weight_files(model_id, revision,\
          \ extension)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 101, in weight_files\r\n    pt_filenames = weight_hub_files(model_id,\
          \ revision, extension=\".bin\")\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
          , line 37, in weight_hub_files\r\n    raise EntryNotFoundError(\r\n\r\n\
          huggingface_hub.utils._errors.EntryNotFoundError: No .bin weights found\
          \ for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF and revision None.\r\
          \n```\r\n\r\nIs that script expected to work?"
        updatedAt: '2024-01-23T13:51:33.351Z'
      numEdits: 0
      reactions: []
    id: 65afc465fd56b86c9cf3776d
    type: comment
  author: csanchez-aureum
  content: "Hi, I'm getting a download error when trying to deploy to SageMaker using\
    \ the script that is in Deploy -> Amazon SageMaker.\r\nHere are the script and\
    \ the error log.\r\n\r\n**Deploy Script:**\r\n```python\r\n# Hub Model configuration.\
    \ https://huggingface.co/models\r\nhub = {\r\n\t'HF_MODEL_ID':'TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF',\r\
    \n\t'SM_NUM_GPUS': json.dumps(1)\r\n}\r\n\r\n# create Hugging Face Model Class\r\
    \nhuggingface_model = HuggingFaceModel(\r\n\timage_uri=get_huggingface_llm_image_uri(\"\
    huggingface\",version=\"1.1.0\"),\r\n\tenv=hub,\r\n\trole=role, \r\n)\r\n\r\n\
    # deploy model to SageMaker Inference\r\npredictor = huggingface_model.deploy(\r\
    \n\tinitial_instance_count=1,\r\n\tinstance_type=\"ml.g5.2xlarge\",\r\n\tcontainer_startup_health_check_timeout=300,\r\
    \n  )\r\n```\r\n\r\n**Error Log:**\r\n```\r\n[huggingface_hub.utils._errors.EntryNotFoundError:\
    \ No .bin weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF and\
    \ revision None.\r\nand](Error: DownloadError\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 96, in weight_files\r\n    filenames = weight_hub_files(model_id, revision,\
    \ extension)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 37, in weight_hub_files\r\n    raise EntryNotFoundError()\r\n\r\nhuggingface_hub.utils._errors.EntryNotFoundError:\
    \ No .safetensors weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF\
    \ and revision None.\r\n\r\nDuring handling of the above exception, another exception\
    \ occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/bin/text-generation-server\"\
    , line 8, in <module>\r\n    sys.exit(app())\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/cli.py\"\
    , line 115, in download_weights\r\n    utils.weight_files(model_id, revision,\
    \ extension)\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 101, in weight_files\r\n    pt_filenames = weight_hub_files(model_id, revision,\
    \ extension=\".bin\")\r\n  File \"/opt/conda/lib/python3.9/site-packages/text_generation_server/utils/hub.py\"\
    , line 37, in weight_hub_files\r\n    raise EntryNotFoundError(\r\n\r\nhuggingface_hub.utils._errors.EntryNotFoundError:\
    \ No .bin weights found for model TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF and\
    \ revision None.\r\n```\r\n\r\nIs that script expected to work?"
  created_at: 2024-01-23 13:51:33+00:00
  edited: false
  hidden: false
  id: 65afc465fd56b86c9cf3776d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/357a384f1658347044b287b87c6d6b28.svg
      fullname: qk
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: qkai
      type: user
    createdAt: '2024-01-25T02:49:09.000Z'
    data:
      edited: false
      editors:
      - qkai
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5459136366844177
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/357a384f1658347044b287b87c6d6b28.svg
          fullname: qk
          isHf: false
          isPro: false
          name: qkai
          type: user
        html: '<p>got the same error when deploy on sagemaker</p>

          '
        raw: got the same error when deploy on sagemaker
        updatedAt: '2024-01-25T02:49:09.631Z'
      numEdits: 0
      reactions: []
    id: 65b1cc25ade89bc3fa644cc0
    type: comment
  author: qkai
  content: got the same error when deploy on sagemaker
  created_at: 2024-01-25 02:49:09+00:00
  edited: false
  hidden: false
  id: 65b1cc25ade89bc3fa644cc0
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 21
repo_id: TheBloke/Mixtral-8x7B-Instruct-v0.1-GGUF
repo_type: model
status: open
target_branch: null
title: Download Error when deploying to SageMaker
