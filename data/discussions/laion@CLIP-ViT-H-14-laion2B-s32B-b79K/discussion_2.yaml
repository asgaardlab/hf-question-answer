!!python/object:huggingface_hub.community.DiscussionWithDetails
author: fischcheng
conflicting_files: null
created_at: 2022-11-18 22:38:32+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/13004771d4e1906e22f1b1d053ae1c21.svg
      fullname: Yu Cheng
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: fischcheng
      type: user
    createdAt: '2022-11-18T22:38:32.000Z'
    data:
      edited: true
      editors:
      - fischcheng
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/13004771d4e1906e22f1b1d053ae1c21.svg
          fullname: Yu Cheng
          isHf: false
          isPro: false
          name: fischcheng
          type: user
        html: '<p>New to HF and total beginner with any language models. Not sure
          if this is a feature or a bug tho. Hope this might help.<br>I bumped into
          an issue that calling</p>

          <pre><code>clip_model_name: str = "laion/CLIP-ViT-H-14-laion2B-s32B-b79K"

          clip_model = CLIPModel.from_pretrained(clip_model_name, local_files_only=True)

          clip_tokenizer = AutoTokenizer.from_pretrained(clip_model_name)

          </code></pre>

          <p>often returns errors of tensor shape not matching,  when calling <code>clip_tokenizer</code>.
          This isn''t an issue for other Openai/CLIP models. As they all have <code>model_max_length:
          77</code> in the <code>tokenizer_config.json</code>. </p>

          <p>my temporary workaround:<br><code> token_features = clip_tokenizer([something],
          return_tensors="pt", truncation=True, max_length=77)</code></p>

          '
        raw: "New to HF and total beginner with any language models. Not sure if this\
          \ is a feature or a bug tho. Hope this might help.\nI bumped into an issue\
          \ that calling\n```\nclip_model_name: str = \"laion/CLIP-ViT-H-14-laion2B-s32B-b79K\"\
          \nclip_model = CLIPModel.from_pretrained(clip_model_name, local_files_only=True)\n\
          clip_tokenizer = AutoTokenizer.from_pretrained(clip_model_name)\n```\noften\
          \ returns errors of tensor shape not matching,  when calling `clip_tokenizer`.\
          \ This isn't an issue for other Openai/CLIP models. As they all have `model_max_length:\
          \ 77` in the `tokenizer_config.json`. \n\nmy temporary workaround:\n```\
          \ token_features = clip_tokenizer([something], return_tensors=\"pt\", truncation=True,\
          \ max_length=77)```"
        updatedAt: '2022-11-18T22:52:12.795Z'
      numEdits: 1
      reactions: []
    id: 63780968e9718266c3a3a6ae
    type: comment
  author: fischcheng
  content: "New to HF and total beginner with any language models. Not sure if this\
    \ is a feature or a bug tho. Hope this might help.\nI bumped into an issue that\
    \ calling\n```\nclip_model_name: str = \"laion/CLIP-ViT-H-14-laion2B-s32B-b79K\"\
    \nclip_model = CLIPModel.from_pretrained(clip_model_name, local_files_only=True)\n\
    clip_tokenizer = AutoTokenizer.from_pretrained(clip_model_name)\n```\noften returns\
    \ errors of tensor shape not matching,  when calling `clip_tokenizer`. This isn't\
    \ an issue for other Openai/CLIP models. As they all have `model_max_length: 77`\
    \ in the `tokenizer_config.json`. \n\nmy temporary workaround:\n``` token_features\
    \ = clip_tokenizer([something], return_tensors=\"pt\", truncation=True, max_length=77)```"
  created_at: 2022-11-18 22:38:32+00:00
  edited: true
  hidden: false
  id: 63780968e9718266c3a3a6ae
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cfed2197ec8d538e9ebb0977b21b7aa4.svg
      fullname: Romain Beaumont
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: rom1504
      type: user
    createdAt: '2022-11-18T22:41:36.000Z'
    data:
      edited: false
      editors:
      - rom1504
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cfed2197ec8d538e9ebb0977b21b7aa4.svg
          fullname: Romain Beaumont
          isHf: false
          isPro: false
          name: rom1504
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;rwightman&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/rwightman\">@<span class=\"\
          underline\">rwightman</span></a></span>\n\n\t</span></span> would you know\
          \ how to fix this ?</p>\n"
        raw: '@rwightman would you know how to fix this ?'
        updatedAt: '2022-11-18T22:41:36.037Z'
      numEdits: 0
      reactions: []
    id: 63780a2084318944acd17d19
    type: comment
  author: rom1504
  content: '@rwightman would you know how to fix this ?'
  created_at: 2022-11-18 22:41:36+00:00
  edited: false
  hidden: false
  id: 63780a2084318944acd17d19
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/13004771d4e1906e22f1b1d053ae1c21.svg
      fullname: Yu Cheng
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: fischcheng
      type: user
    createdAt: '2022-11-18T22:51:54.000Z'
    data:
      from: max_length might be missing from the `tokenizer_config.json`
      to: '`model_max_length` might be missing from the `tokenizer_config.json`'
    id: 63780c8a114d1c8fa39c4c59
    type: title-change
  author: fischcheng
  created_at: 2022-11-18 22:51:54+00:00
  id: 63780c8a114d1c8fa39c4c59
  new_title: '`model_max_length` might be missing from the `tokenizer_config.json`'
  old_title: max_length might be missing from the `tokenizer_config.json`
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667002643224-604a5184dca2c7ac7508b849.jpeg?w=200&h=200&f=face
      fullname: Ross Wightman
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: rwightman
      type: user
    createdAt: '2022-11-24T05:53:31.000Z'
    data:
      edited: false
      editors:
      - rwightman
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667002643224-604a5184dca2c7ac7508b849.jpeg?w=200&h=200&f=face
          fullname: Ross Wightman
          isHf: true
          isPro: false
          name: rwightman
          type: user
        html: '<p>The tokenizer config was taken from <a href="https://huggingface.co/openai/clip-vit-base-patch32/blob/main/tokenizer_config.json">https://huggingface.co/openai/clip-vit-base-patch32/blob/main/tokenizer_config.json</a>
          ... so suprised that one works and this one doesn''t, perhaps that specific
          OpenAI CLIP model was missing the max length... will look closer</p>

          '
        raw: The tokenizer config was taken from https://huggingface.co/openai/clip-vit-base-patch32/blob/main/tokenizer_config.json
          ... so suprised that one works and this one doesn't, perhaps that specific
          OpenAI CLIP model was missing the max length... will look closer
        updatedAt: '2022-11-24T05:53:31.398Z'
      numEdits: 0
      reactions: []
    id: 637f06db6df7e8f7df78a2de
    type: comment
  author: rwightman
  content: The tokenizer config was taken from https://huggingface.co/openai/clip-vit-base-patch32/blob/main/tokenizer_config.json
    ... so suprised that one works and this one doesn't, perhaps that specific OpenAI
    CLIP model was missing the max length... will look closer
  created_at: 2022-11-24 05:53:31+00:00
  edited: false
  hidden: false
  id: 637f06db6df7e8f7df78a2de
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: laion/CLIP-ViT-H-14-laion2B-s32B-b79K
repo_type: model
status: open
target_branch: null
title: '`model_max_length` might be missing from the `tokenizer_config.json`'
