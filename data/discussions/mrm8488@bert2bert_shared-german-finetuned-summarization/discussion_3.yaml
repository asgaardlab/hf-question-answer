!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Sergej
conflicting_files: null
created_at: 2022-08-05 11:35:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
      fullname: Stoppel
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sergej
      type: user
    createdAt: '2022-08-05T12:35:57.000Z'
    data:
      edited: false
      editors:
      - Sergej
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
          fullname: Stoppel
          isHf: false
          isPro: false
          name: Sergej
          type: user
        html: "<p>When testing the model I noticed that the output  seems to be truncated\
          \ in some cases.<br>For example the text:<br>\"Die deutsche Auswahl fand\
          \ auch Mitte der ersten H\xE4lfte kein Mittel gegen den forschen Auftritt\
          \ des EM-Halbfinalisten von 2017. Das aggressive Pressing der \xD6sterreicherinnen\
          \ schmeckte den Deutschen gar nicht. Das zweite Turniertor Magulls nach\
          \ starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem Nichts. Auch\
          \ der F\xFChrungstreffer beruhigte die Nerven nicht Doch selbst der Treffer\
          \ gab der DFB-Elf keinen R\xFCckenwind, auch nach einer halben Stunde lief\
          \ in der Offensive nicht viel zusammen. Immerhin die Abwehr stand in dieser\
          \ Phase besser. Die F\xFChrung zur Pause war trotz der M\xF6glichkeit von\
          \ Svenja Huth (43.) schmeichelhaft. Nur 16 Sekunden nach dem Wiederbeginn\
          \ h\xE4tte Giulia Gwinn die Nerven beruhigen k\xF6nnen, die Au\xDFenverteidigerin\
          \ traf aber nur den Pfosten. Auf der Gegenseite landete der Distanzschuss\
          \ von Barbara Dunst an der Latte (53.). Nur vier Minuten sp\xE4ter schepperte\
          \ es wieder am deutschen Geh\xE4use. Sarah Puntigam traf den Pfosten. In\
          \ der 64. Minute ging die angeschlagene Torsch\xFCtzin Magull vom Platz.\
          \ F\xFCnf Minuten sp\xE4ter vergab die eingewechselte Linda Dallmann bei\
          \ einem Konter die Chance auf das zweite deutsche Tor. B\xFChl traf mit\
          \ einem satten Distanzschuss die Latte (78. ), wenig sp\xE4ter vergab sie\
          \ aus wenigen Metern kl\xE4glich die Entscheidung (82.). F\xFCr diese sorgte\
          \ dann Popp.\"</p>\n<p>Results in:<br>\"Die deutsche Mannschaft fand auch\
          \ Mitte der ersten H\xE4lfte kein Mittel gegen den forschen Auftritt des\
          \ EM - Halbfinalisten von 2017. Das aggressive Pressing der \xD6sterreicherinnen\
          \ schmeckte den Deutschen gar nicht. Das zweite Turniertor Magulls nach\
          \ starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem\"</p>\n<p>Any\
          \ ideas why this is happening?</p>\n"
        raw: "When testing the model I noticed that the output  seems to be truncated\
          \ in some cases.\r\nFor example the text:\r\n\"Die deutsche Auswahl fand\
          \ auch Mitte der ersten H\xE4lfte kein Mittel gegen den forschen Auftritt\
          \ des EM-Halbfinalisten von 2017. Das aggressive Pressing der \xD6sterreicherinnen\
          \ schmeckte den Deutschen gar nicht. Das zweite Turniertor Magulls nach\
          \ starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem Nichts. Auch\
          \ der F\xFChrungstreffer beruhigte die Nerven nicht Doch selbst der Treffer\
          \ gab der DFB-Elf keinen R\xFCckenwind, auch nach einer halben Stunde lief\
          \ in der Offensive nicht viel zusammen. Immerhin die Abwehr stand in dieser\
          \ Phase besser. Die F\xFChrung zur Pause war trotz der M\xF6glichkeit von\
          \ Svenja Huth (43.) schmeichelhaft. Nur 16 Sekunden nach dem Wiederbeginn\
          \ h\xE4tte Giulia Gwinn die Nerven beruhigen k\xF6nnen, die Au\xDFenverteidigerin\
          \ traf aber nur den Pfosten. Auf der Gegenseite landete der Distanzschuss\
          \ von Barbara Dunst an der Latte (53.). Nur vier Minuten sp\xE4ter schepperte\
          \ es wieder am deutschen Geh\xE4use. Sarah Puntigam traf den Pfosten. In\
          \ der 64. Minute ging die angeschlagene Torsch\xFCtzin Magull vom Platz.\
          \ F\xFCnf Minuten sp\xE4ter vergab die eingewechselte Linda Dallmann bei\
          \ einem Konter die Chance auf das zweite deutsche Tor. B\xFChl traf mit\
          \ einem satten Distanzschuss die Latte (78. ), wenig sp\xE4ter vergab sie\
          \ aus wenigen Metern kl\xE4glich die Entscheidung (82.). F\xFCr diese sorgte\
          \ dann Popp.\"\r\n\r\nResults in:\r\n\"Die deutsche Mannschaft fand auch\
          \ Mitte der ersten H\xE4lfte kein Mittel gegen den forschen Auftritt des\
          \ EM - Halbfinalisten von 2017. Das aggressive Pressing der \xD6sterreicherinnen\
          \ schmeckte den Deutschen gar nicht. Das zweite Turniertor Magulls nach\
          \ starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem\"\r\n\r\nAny\
          \ ideas why this is happening?"
        updatedAt: '2022-08-05T12:35:57.098Z'
      numEdits: 0
      reactions: []
    id: 62ed0ead9e4def64f1cf63a5
    type: comment
  author: Sergej
  content: "When testing the model I noticed that the output  seems to be truncated\
    \ in some cases.\r\nFor example the text:\r\n\"Die deutsche Auswahl fand auch\
    \ Mitte der ersten H\xE4lfte kein Mittel gegen den forschen Auftritt des EM-Halbfinalisten\
    \ von 2017. Das aggressive Pressing der \xD6sterreicherinnen schmeckte den Deutschen\
    \ gar nicht. Das zweite Turniertor Magulls nach starker Vorarbeit von Klara B\xFC\
    hl und Popp fiel aus dem Nichts. Auch der F\xFChrungstreffer beruhigte die Nerven\
    \ nicht Doch selbst der Treffer gab der DFB-Elf keinen R\xFCckenwind, auch nach\
    \ einer halben Stunde lief in der Offensive nicht viel zusammen. Immerhin die\
    \ Abwehr stand in dieser Phase besser. Die F\xFChrung zur Pause war trotz der\
    \ M\xF6glichkeit von Svenja Huth (43.) schmeichelhaft. Nur 16 Sekunden nach dem\
    \ Wiederbeginn h\xE4tte Giulia Gwinn die Nerven beruhigen k\xF6nnen, die Au\xDF\
    enverteidigerin traf aber nur den Pfosten. Auf der Gegenseite landete der Distanzschuss\
    \ von Barbara Dunst an der Latte (53.). Nur vier Minuten sp\xE4ter schepperte\
    \ es wieder am deutschen Geh\xE4use. Sarah Puntigam traf den Pfosten. In der 64.\
    \ Minute ging die angeschlagene Torsch\xFCtzin Magull vom Platz. F\xFCnf Minuten\
    \ sp\xE4ter vergab die eingewechselte Linda Dallmann bei einem Konter die Chance\
    \ auf das zweite deutsche Tor. B\xFChl traf mit einem satten Distanzschuss die\
    \ Latte (78. ), wenig sp\xE4ter vergab sie aus wenigen Metern kl\xE4glich die\
    \ Entscheidung (82.). F\xFCr diese sorgte dann Popp.\"\r\n\r\nResults in:\r\n\"\
    Die deutsche Mannschaft fand auch Mitte der ersten H\xE4lfte kein Mittel gegen\
    \ den forschen Auftritt des EM - Halbfinalisten von 2017. Das aggressive Pressing\
    \ der \xD6sterreicherinnen schmeckte den Deutschen gar nicht. Das zweite Turniertor\
    \ Magulls nach starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem\"\r\n\
    \r\nAny ideas why this is happening?"
  created_at: 2022-08-05 11:35:57+00:00
  edited: false
  hidden: false
  id: 62ed0ead9e4def64f1cf63a5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5e4318d616b09a31220980d6/24rMJ_vPh3gW9ZEmj64xr.png?w=200&h=200&f=face
      fullname: Manuel Romero
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: mrm8488
      type: user
    createdAt: '2022-08-06T10:21:20.000Z'
    data:
      edited: false
      editors:
      - mrm8488
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5e4318d616b09a31220980d6/24rMJ_vPh3gW9ZEmj64xr.png?w=200&h=200&f=face
          fullname: Manuel Romero
          isHf: false
          isPro: true
          name: mrm8488
          type: user
        html: "<p>Hi, <span data-props=\"{&quot;user&quot;:&quot;Sergej&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Sergej\">@<span class=\"\
          underline\">Sergej</span></a></span>\n\n\t</span></span>. Could you send\
          \ me your generation params?</p>\n"
        raw: Hi, @Sergej. Could you send me your generation params?
        updatedAt: '2022-08-06T10:21:20.502Z'
      numEdits: 0
      reactions: []
    id: 62ee40a09f7c69a014c64b06
    type: comment
  author: mrm8488
  content: Hi, @Sergej. Could you send me your generation params?
  created_at: 2022-08-06 09:21:20+00:00
  edited: false
  hidden: false
  id: 62ee40a09f7c69a014c64b06
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
      fullname: Stoppel
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sergej
      type: user
    createdAt: '2022-08-08T07:17:39.000Z'
    data:
      edited: true
      editors:
      - Sergej
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
          fullname: Stoppel
          isHf: false
          isPro: false
          name: Sergej
          type: user
        html: "<p>Hello Manuel </p>\n<p>Thanks for the quick reply! This happens directly\
          \ on the model card or with the default settings. That means using the code\
          \ of the model card with the text above results in a truncation as well.</p>\n\
          <p>For a quick sanity check you can use this code:</p>\n<pre><code>import\
          \ torch\nfrom transformers import BertTokenizerFast, EncoderDecoderModel\n\
          device = 'cuda' if torch.cuda.is_available() else 'cpu'\nckpt = 'mrm8488/bert2bert_shared-german-finetuned-summarization'\n\
          tokenizer = BertTokenizerFast.from_pretrained(ckpt)\nmodel = EncoderDecoderModel.from_pretrained(ckpt).to(device)\n\
          def generate_summary(text):\n   inputs = tokenizer([text], padding=\"max_length\"\
          , truncation=True, max_length=512, return_tensors=\"pt\")\n   input_ids\
          \ = inputs.input_ids.to(device)\n   attention_mask = inputs.attention_mask.to(device)\n\
          \   output = model.generate(input_ids, attention_mask=attention_mask)\n\
          \   return tokenizer.decode(output[0], skip_special_tokens=True)\n\ntext\
          \ = \"Die deutsche Auswahl fand auch Mitte der ersten H\xE4lfte kein Mittel\
          \ gegen den forschen Auftritt des EM-Halbfinalisten von 2017. Das aggressive\
          \ Pressing der \xD6sterreicherinnen schmeckte den Deutschen gar nicht. Das\
          \ zweite Turniertor Magulls nach starker Vorarbeit von Klara B\xFChl und\
          \ Popp fiel aus dem Nichts. Auch der F\xFChrungstreffer beruhigte die Nerven\
          \ nicht Doch selbst der Treffer gab der DFB-Elf keinen R\xFCckenwind, auch\
          \ nach einer halben Stunde lief in der Offensive nicht viel zusammen. Immerhin\
          \ die Abwehr stand in dieser Phase besser. Die F\xFChrung zur Pause war\
          \ trotz der M\xF6glichkeit von Svenja Huth (43.) schmeichelhaft. Nur 16\
          \ Sekunden nach dem Wiederbeginn h\xE4tte Giulia Gwinn die Nerven beruhigen\
          \ k\xF6nnen, die Au\xDFenverteidigerin traf aber nur den Pfosten. Auf der\
          \ Gegenseite landete der Distanzschuss von Barbara Dunst an der Latte (53.).\
          \ Nur vier Minuten sp\xE4ter schepperte es wieder am deutschen Geh\xE4use.\
          \ Sarah Puntigam traf den Pfosten. In der 64. Minute ging die angeschlagene\
          \ Torsch\xFCtzin Magull vom Platz. F\xFCnf Minuten sp\xE4ter vergab die\
          \ eingewechselte Linda Dallmann bei einem Konter die Chance auf das zweite\
          \ deutsche Tor. B\xFChl traf mit einem satten Distanzschuss die Latte (78.\
          \ ), wenig sp\xE4ter vergab sie aus wenigen Metern kl\xE4glich die Entscheidung\
          \ (82.). F\xFCr diese sorgte dann Popp.\"\n\nprint(generate_summary(text))\n\
          </code></pre>\n"
        raw: "Hello Manuel \n\nThanks for the quick reply! This happens directly on\
          \ the model card or with the default settings. That means using the code\
          \ of the model card with the text above results in a truncation as well.\n\
          \nFor a quick sanity check you can use this code:\n```\nimport torch\nfrom\
          \ transformers import BertTokenizerFast, EncoderDecoderModel\ndevice = 'cuda'\
          \ if torch.cuda.is_available() else 'cpu'\nckpt = 'mrm8488/bert2bert_shared-german-finetuned-summarization'\n\
          tokenizer = BertTokenizerFast.from_pretrained(ckpt)\nmodel = EncoderDecoderModel.from_pretrained(ckpt).to(device)\n\
          def generate_summary(text):\n   inputs = tokenizer([text], padding=\"max_length\"\
          , truncation=True, max_length=512, return_tensors=\"pt\")\n   input_ids\
          \ = inputs.input_ids.to(device)\n   attention_mask = inputs.attention_mask.to(device)\n\
          \   output = model.generate(input_ids, attention_mask=attention_mask)\n\
          \   return tokenizer.decode(output[0], skip_special_tokens=True)\n\ntext\
          \ = \"Die deutsche Auswahl fand auch Mitte der ersten H\xE4lfte kein Mittel\
          \ gegen den forschen Auftritt des EM-Halbfinalisten von 2017. Das aggressive\
          \ Pressing der \xD6sterreicherinnen schmeckte den Deutschen gar nicht. Das\
          \ zweite Turniertor Magulls nach starker Vorarbeit von Klara B\xFChl und\
          \ Popp fiel aus dem Nichts. Auch der F\xFChrungstreffer beruhigte die Nerven\
          \ nicht Doch selbst der Treffer gab der DFB-Elf keinen R\xFCckenwind, auch\
          \ nach einer halben Stunde lief in der Offensive nicht viel zusammen. Immerhin\
          \ die Abwehr stand in dieser Phase besser. Die F\xFChrung zur Pause war\
          \ trotz der M\xF6glichkeit von Svenja Huth (43.) schmeichelhaft. Nur 16\
          \ Sekunden nach dem Wiederbeginn h\xE4tte Giulia Gwinn die Nerven beruhigen\
          \ k\xF6nnen, die Au\xDFenverteidigerin traf aber nur den Pfosten. Auf der\
          \ Gegenseite landete der Distanzschuss von Barbara Dunst an der Latte (53.).\
          \ Nur vier Minuten sp\xE4ter schepperte es wieder am deutschen Geh\xE4use.\
          \ Sarah Puntigam traf den Pfosten. In der 64. Minute ging die angeschlagene\
          \ Torsch\xFCtzin Magull vom Platz. F\xFCnf Minuten sp\xE4ter vergab die\
          \ eingewechselte Linda Dallmann bei einem Konter die Chance auf das zweite\
          \ deutsche Tor. B\xFChl traf mit einem satten Distanzschuss die Latte (78.\
          \ ), wenig sp\xE4ter vergab sie aus wenigen Metern kl\xE4glich die Entscheidung\
          \ (82.). F\xFCr diese sorgte dann Popp.\"\n\nprint(generate_summary(text))\n\
          ```"
        updatedAt: '2022-08-08T07:19:00.731Z'
      numEdits: 1
      reactions: []
    id: 62f0b893bea2ac8f70e4f7a0
    type: comment
  author: Sergej
  content: "Hello Manuel \n\nThanks for the quick reply! This happens directly on\
    \ the model card or with the default settings. That means using the code of the\
    \ model card with the text above results in a truncation as well.\n\nFor a quick\
    \ sanity check you can use this code:\n```\nimport torch\nfrom transformers import\
    \ BertTokenizerFast, EncoderDecoderModel\ndevice = 'cuda' if torch.cuda.is_available()\
    \ else 'cpu'\nckpt = 'mrm8488/bert2bert_shared-german-finetuned-summarization'\n\
    tokenizer = BertTokenizerFast.from_pretrained(ckpt)\nmodel = EncoderDecoderModel.from_pretrained(ckpt).to(device)\n\
    def generate_summary(text):\n   inputs = tokenizer([text], padding=\"max_length\"\
    , truncation=True, max_length=512, return_tensors=\"pt\")\n   input_ids = inputs.input_ids.to(device)\n\
    \   attention_mask = inputs.attention_mask.to(device)\n   output = model.generate(input_ids,\
    \ attention_mask=attention_mask)\n   return tokenizer.decode(output[0], skip_special_tokens=True)\n\
    \ntext = \"Die deutsche Auswahl fand auch Mitte der ersten H\xE4lfte kein Mittel\
    \ gegen den forschen Auftritt des EM-Halbfinalisten von 2017. Das aggressive Pressing\
    \ der \xD6sterreicherinnen schmeckte den Deutschen gar nicht. Das zweite Turniertor\
    \ Magulls nach starker Vorarbeit von Klara B\xFChl und Popp fiel aus dem Nichts.\
    \ Auch der F\xFChrungstreffer beruhigte die Nerven nicht Doch selbst der Treffer\
    \ gab der DFB-Elf keinen R\xFCckenwind, auch nach einer halben Stunde lief in\
    \ der Offensive nicht viel zusammen. Immerhin die Abwehr stand in dieser Phase\
    \ besser. Die F\xFChrung zur Pause war trotz der M\xF6glichkeit von Svenja Huth\
    \ (43.) schmeichelhaft. Nur 16 Sekunden nach dem Wiederbeginn h\xE4tte Giulia\
    \ Gwinn die Nerven beruhigen k\xF6nnen, die Au\xDFenverteidigerin traf aber nur\
    \ den Pfosten. Auf der Gegenseite landete der Distanzschuss von Barbara Dunst\
    \ an der Latte (53.). Nur vier Minuten sp\xE4ter schepperte es wieder am deutschen\
    \ Geh\xE4use. Sarah Puntigam traf den Pfosten. In der 64. Minute ging die angeschlagene\
    \ Torsch\xFCtzin Magull vom Platz. F\xFCnf Minuten sp\xE4ter vergab die eingewechselte\
    \ Linda Dallmann bei einem Konter die Chance auf das zweite deutsche Tor. B\xFC\
    hl traf mit einem satten Distanzschuss die Latte (78. ), wenig sp\xE4ter vergab\
    \ sie aus wenigen Metern kl\xE4glich die Entscheidung (82.). F\xFCr diese sorgte\
    \ dann Popp.\"\n\nprint(generate_summary(text))\n```"
  created_at: 2022-08-08 06:17:39+00:00
  edited: true
  hidden: false
  id: 62f0b893bea2ac8f70e4f7a0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5e4318d616b09a31220980d6/24rMJ_vPh3gW9ZEmj64xr.png?w=200&h=200&f=face
      fullname: Manuel Romero
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: mrm8488
      type: user
    createdAt: '2022-08-08T07:30:16.000Z'
    data:
      edited: false
      editors:
      - mrm8488
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5e4318d616b09a31220980d6/24rMJ_vPh3gW9ZEmj64xr.png?w=200&h=200&f=face
          fullname: Manuel Romero
          isHf: false
          isPro: true
          name: mrm8488
          type: user
        html: '<p>I will check it out. In the meantime you can check the <code>generate</code>
          API and play with min and max length parameters</p>

          '
        raw: I will check it out. In the meantime you can check the `generate` API
          and play with min and max length parameters
        updatedAt: '2022-08-08T07:30:16.730Z'
      numEdits: 0
      reactions: []
    id: 62f0bb88bea2ac8f70e50bf7
    type: comment
  author: mrm8488
  content: I will check it out. In the meantime you can check the `generate` API and
    play with min and max length parameters
  created_at: 2022-08-08 06:30:16+00:00
  edited: false
  hidden: false
  id: 62f0bb88bea2ac8f70e50bf7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
      fullname: Stoppel
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sergej
      type: user
    createdAt: '2022-08-08T07:52:27.000Z'
    data:
      edited: false
      editors:
      - Sergej
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0fbd17c8dc6088426d42e7b5a4ee6555.svg
          fullname: Stoppel
          isHf: false
          isPro: false
          name: Sergej
          type: user
        html: '<p>Thanks I appreciate that. I was just curious about this because
          I noticed similar behaviour in other models as well, for example the ones
          that are based on MT5.</p>

          '
        raw: Thanks I appreciate that. I was just curious about this because I noticed
          similar behaviour in other models as well, for example the ones that are
          based on MT5.
        updatedAt: '2022-08-08T07:52:27.531Z'
      numEdits: 0
      reactions: []
    id: 62f0c0bb671fc964b505ed15
    type: comment
  author: Sergej
  content: Thanks I appreciate that. I was just curious about this because I noticed
    similar behaviour in other models as well, for example the ones that are based
    on MT5.
  created_at: 2022-08-08 06:52:27+00:00
  edited: false
  hidden: false
  id: 62f0c0bb671fc964b505ed15
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: mrm8488/bert2bert_shared-german-finetuned-summarization
repo_type: model
status: open
target_branch: null
title: Truncated results on some text
