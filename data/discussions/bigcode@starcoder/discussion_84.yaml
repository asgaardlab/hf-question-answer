!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Brendan
conflicting_files: null
created_at: 2023-08-21 18:51:37+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
      fullname: Brendan King
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Brendan
      type: user
    createdAt: '2023-08-21T19:51:37.000Z'
    data:
      edited: false
      editors:
      - Brendan
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9265645742416382
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
          fullname: Brendan King
          isHf: false
          isPro: false
          name: Brendan
          type: user
        html: '<p>Hi all, I saw the <a href="https://huggingface.co/spaces/bigcode/starcoder-search">starcoder
          search</a> space has been removed. I was interested in reconstructing the
          search index on my own using the <a href="https://huggingface.co/datasets/bigcode/starcoderdata">starcoderdata
          repo</a>. Is there code available somewhere for replicating this, and a
          rough estimate of the compute requirements for the elastic search index?
          I would not be serving the index to outside requestors but would want to
          be able to complete a few hundred to a few thousand searches in an hour.
          I''ve used the elastic search index utilities in HF datasets before but
          didn''t know how that particular index was created, or if there would be
          any necessary configuration to get things running efficiently </p>

          '
        raw: 'Hi all, I saw the [starcoder search](https://huggingface.co/spaces/bigcode/starcoder-search)
          space has been removed. I was interested in reconstructing the search index
          on my own using the [starcoderdata repo](https://huggingface.co/datasets/bigcode/starcoderdata).
          Is there code available somewhere for replicating this, and a rough estimate
          of the compute requirements for the elastic search index? I would not be
          serving the index to outside requestors but would want to be able to complete
          a few hundred to a few thousand searches in an hour. I''ve used the elastic
          search index utilities in HF datasets before but didn''t know how that particular
          index was created, or if there would be any necessary configuration to get
          things running efficiently '
        updatedAt: '2023-08-21T19:51:37.472Z'
      numEdits: 0
      reactions: []
    id: 64e3c049a7db302647fec40c
    type: comment
  author: Brendan
  content: 'Hi all, I saw the [starcoder search](https://huggingface.co/spaces/bigcode/starcoder-search)
    space has been removed. I was interested in reconstructing the search index on
    my own using the [starcoderdata repo](https://huggingface.co/datasets/bigcode/starcoderdata).
    Is there code available somewhere for replicating this, and a rough estimate of
    the compute requirements for the elastic search index? I would not be serving
    the index to outside requestors but would want to be able to complete a few hundred
    to a few thousand searches in an hour. I''ve used the elastic search index utilities
    in HF datasets before but didn''t know how that particular index was created,
    or if there would be any necessary configuration to get things running efficiently '
  created_at: 2023-08-21 18:51:37+00:00
  edited: false
  hidden: false
  id: 64e3c049a7db302647fec40c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2023-08-22T20:48:59.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8767011761665344
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>Hi Brendan! The search space actually lives here: <a href="https://huggingface.co/spaces/bigcode/search">https://huggingface.co/spaces/bigcode/search</a>
          (We''re currently migrating the backend, so search isn''t currently available
          but it will be again very soon.)</p>

          <p>If you''re pressed for time, the indexing code lives <a rel="nofollow"
          href="https://github.com/bigcode-project/search/blob/main/index.py">here</a>,
          but is not yet really optimized, and you''d most likely need to tweak things
          to fit your needs. </p>

          <p>Most pressing hardware requirement would be disk space (the index needs
          to fit on disk), and then after that deciding how to shard the data, and
          whether to tune for indexing or search:</p>

          <ul>

          <li><a rel="nofollow" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html</a></li>

          <li><a rel="nofollow" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html</a></li>

          <li><a rel="nofollow" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html</a></li>

          </ul>

          <p>PS: Where did you find the <a href="https://huggingface.co/spaces/bigcode/starcoder-search">space
          link</a> you mentioned? Is it displayed somewhere?</p>

          '
        raw: "Hi Brendan! The search space actually lives here: https://huggingface.co/spaces/bigcode/search\
          \ (We're currently migrating the backend, so search isn't currently available\
          \ but it will be again very soon.)\n\nIf you're pressed for time, the indexing\
          \ code lives [here](https://github.com/bigcode-project/search/blob/main/index.py),\
          \ but is not yet really optimized, and you'd most likely need to tweak things\
          \ to fit your needs. \n\nMost pressing hardware requirement would be disk\
          \ space (the index needs to fit on disk), and then after that deciding how\
          \ to shard the data, and whether to tune for indexing or search:\n\n- https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html\n\
          - https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html\n\
          - https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html\n\
          \nPS: Where did you find the [space link](https://huggingface.co/spaces/bigcode/starcoder-search)\
          \ you mentioned? Is it displayed somewhere?"
        updatedAt: '2023-08-22T20:48:59.426Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Brendan
    id: 64e51f3b1bb263f4d2c8e2a3
    type: comment
  author: cakiki
  content: "Hi Brendan! The search space actually lives here: https://huggingface.co/spaces/bigcode/search\
    \ (We're currently migrating the backend, so search isn't currently available\
    \ but it will be again very soon.)\n\nIf you're pressed for time, the indexing\
    \ code lives [here](https://github.com/bigcode-project/search/blob/main/index.py),\
    \ but is not yet really optimized, and you'd most likely need to tweak things\
    \ to fit your needs. \n\nMost pressing hardware requirement would be disk space\
    \ (the index needs to fit on disk), and then after that deciding how to shard\
    \ the data, and whether to tune for indexing or search:\n\n- https://www.elastic.co/guide/en/elasticsearch/reference/current/size-your-shards.html\n\
    - https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-search-speed.html\n\
    - https://www.elastic.co/guide/en/elasticsearch/reference/current/tune-for-indexing-speed.html\n\
    \nPS: Where did you find the [space link](https://huggingface.co/spaces/bigcode/starcoder-search)\
    \ you mentioned? Is it displayed somewhere?"
  created_at: 2023-08-22 19:48:59+00:00
  edited: false
  hidden: false
  id: 64e51f3b1bb263f4d2c8e2a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
      fullname: Brendan King
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Brendan
      type: user
    createdAt: '2023-08-23T15:27:08.000Z'
    data:
      edited: false
      editors:
      - Brendan
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9637678861618042
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
          fullname: Brendan King
          isHf: false
          isPro: false
          name: Brendan
          type: user
        html: '<p>Ah I see, thanks for the help, these are great!</p>

          '
        raw: Ah I see, thanks for the help, these are great!
        updatedAt: '2023-08-23T15:27:08.235Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64e6254cc5d101d654aff4ce
    id: 64e6254cc5d101d654aff4cc
    type: comment
  author: Brendan
  content: Ah I see, thanks for the help, these are great!
  created_at: 2023-08-23 14:27:08+00:00
  edited: false
  hidden: false
  id: 64e6254cc5d101d654aff4cc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
      fullname: Brendan King
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Brendan
      type: user
    createdAt: '2023-08-23T15:27:08.000Z'
    data:
      status: closed
    id: 64e6254cc5d101d654aff4ce
    type: status-change
  author: Brendan
  created_at: 2023-08-23 14:27:08+00:00
  id: 64e6254cc5d101d654aff4ce
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
      fullname: Brendan King
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Brendan
      type: user
    createdAt: '2023-08-23T15:32:47.000Z'
    data:
      edited: false
      editors:
      - Brendan
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9231791496276855
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1635211360068-614a8b805ff360e089b13935.jpeg?w=200&h=200&f=face
          fullname: Brendan King
          isHf: false
          isPro: false
          name: Brendan
          type: user
        html: '<p>Ah sorry I had missed your question, It was on this page: <a href="https://huggingface.co/bigcode/starcoder#attribution--other-requirements">https://huggingface.co/bigcode/starcoder#attribution--other-requirements</a></p>

          '
        raw: 'Ah sorry I had missed your question, It was on this page: https://huggingface.co/bigcode/starcoder#attribution--other-requirements'
        updatedAt: '2023-08-23T15:32:47.001Z'
      numEdits: 0
      reactions: []
    id: 64e6269fe1f0c3842121aead
    type: comment
  author: Brendan
  content: 'Ah sorry I had missed your question, It was on this page: https://huggingface.co/bigcode/starcoder#attribution--other-requirements'
  created_at: 2023-08-23 14:32:47+00:00
  edited: false
  hidden: false
  id: 64e6269fe1f0c3842121aead
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 84
repo_id: bigcode/starcoder
repo_type: model
status: closed
target_branch: null
title: Replicating StarCoder Search Index
