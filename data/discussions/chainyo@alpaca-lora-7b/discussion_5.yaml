!!python/object:huggingface_hub.community.DiscussionWithDetails
author: renyanda
conflicting_files: null
created_at: 2023-04-20 07:23:34+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/30a4d59261f83589e0f2a9126a7f3eee.svg
      fullname: renyanda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: renyanda
      type: user
    createdAt: '2023-04-20T08:23:34.000Z'
    data:
      edited: false
      editors:
      - renyanda
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/30a4d59261f83589e0f2a9126a7f3eee.svg
          fullname: renyanda
          isHf: false
          isPro: false
          name: renyanda
          type: user
        html: "<p>Hi, there. Does anyone have problem with loading this model:<br>the\
          \ code:</p>\n<pre><code>import torch\nfrom transformers import GenerationConfig,\
          \ LlamaTokenizer, LlamaForCausalLM\n\ntokenizer = LlamaTokenizer.from_pretrained(\"\
          chainyo/alpaca-lora-7b\")\nmodel = LlamaForCausalLM.from_pretrained(\n \
          \   \"chainyo/alpaca-lora-7b\",\n    load_in_8bit=True,\n    torch_dtype=torch.float16,\n\
          \    device_map=\"sequential\",\n)\n</code></pre>\n<p>the console logs:</p>\n\
          <pre><code>CUDA SETUP: Highest compute capability among GPUs detected: 7.5\n\
          CUDA SETUP: Detected CUDA version 117\nCUDA SETUP: Loading binary /mnt/data/renyanda/code/starwhale/example/LLM/alpaca7b/venv/lib/python3.10/site-packages/bitsandbytes/libbitsandbytes_cpu.so...\n\
          </code></pre>\n"
        raw: "Hi, there. Does anyone have problem with loading this model:\r\nthe\
          \ code:\r\n```\r\nimport torch\r\nfrom transformers import GenerationConfig,\
          \ LlamaTokenizer, LlamaForCausalLM\r\n\r\ntokenizer = LlamaTokenizer.from_pretrained(\"\
          chainyo/alpaca-lora-7b\")\r\nmodel = LlamaForCausalLM.from_pretrained(\r\
          \n    \"chainyo/alpaca-lora-7b\",\r\n    load_in_8bit=True,\r\n    torch_dtype=torch.float16,\r\
          \n    device_map=\"sequential\",\r\n)\r\n```\r\nthe console logs:\r\n```\r\
          \nCUDA SETUP: Highest compute capability among GPUs detected: 7.5\r\nCUDA\
          \ SETUP: Detected CUDA version 117\r\nCUDA SETUP: Loading binary /mnt/data/renyanda/code/starwhale/example/LLM/alpaca7b/venv/lib/python3.10/site-packages/bitsandbytes/libbitsandbytes_cpu.so...\r\
          \n```"
        updatedAt: '2023-04-20T08:23:34.627Z'
      numEdits: 0
      reactions: []
    id: 6440f686ad24e9b2cfba273a
    type: comment
  author: renyanda
  content: "Hi, there. Does anyone have problem with loading this model:\r\nthe code:\r\
    \n```\r\nimport torch\r\nfrom transformers import GenerationConfig, LlamaTokenizer,\
    \ LlamaForCausalLM\r\n\r\ntokenizer = LlamaTokenizer.from_pretrained(\"chainyo/alpaca-lora-7b\"\
    )\r\nmodel = LlamaForCausalLM.from_pretrained(\r\n    \"chainyo/alpaca-lora-7b\"\
    ,\r\n    load_in_8bit=True,\r\n    torch_dtype=torch.float16,\r\n    device_map=\"\
    sequential\",\r\n)\r\n```\r\nthe console logs:\r\n```\r\nCUDA SETUP: Highest compute\
    \ capability among GPUs detected: 7.5\r\nCUDA SETUP: Detected CUDA version 117\r\
    \nCUDA SETUP: Loading binary /mnt/data/renyanda/code/starwhale/example/LLM/alpaca7b/venv/lib/python3.10/site-packages/bitsandbytes/libbitsandbytes_cpu.so...\r\
    \n```"
  created_at: 2023-04-20 07:23:34+00:00
  edited: false
  hidden: false
  id: 6440f686ad24e9b2cfba273a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675273618630-6162dbe0d928851b47350ae2.jpeg?w=200&h=200&f=face
      fullname: Thomas Chaigneau
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: chainyo
      type: user
    createdAt: '2023-04-20T09:03:50.000Z'
    data:
      edited: true
      editors:
      - chainyo
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1675273618630-6162dbe0d928851b47350ae2.jpeg?w=200&h=200&f=face
          fullname: Thomas Chaigneau
          isHf: false
          isPro: false
          name: chainyo
          type: user
        html: '<p>Could you try to reinstall PyTorch in your working environment?</p>

          <p>Something like:</p>

          <p><code>pip install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118</code></p>

          <p>I think I faced this problem when PyTorch wasn''t installed with CUDA,
          or I didn''t have PyTorch in my environment.</p>

          '
        raw: 'Could you try to reinstall PyTorch in your working environment?


          Something like:


          `pip install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118`


          I think I faced this problem when PyTorch wasn''t installed with CUDA, or
          I didn''t have PyTorch in my environment.'
        updatedAt: '2023-04-20T09:04:41.693Z'
      numEdits: 1
      reactions: []
    id: 6440fff6e46e14ed55839cca
    type: comment
  author: chainyo
  content: 'Could you try to reinstall PyTorch in your working environment?


    Something like:


    `pip install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118`


    I think I faced this problem when PyTorch wasn''t installed with CUDA, or I didn''t
    have PyTorch in my environment.'
  created_at: 2023-04-20 08:03:50+00:00
  edited: true
  hidden: false
  id: 6440fff6e46e14ed55839cca
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/30a4d59261f83589e0f2a9126a7f3eee.svg
      fullname: renyanda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: renyanda
      type: user
    createdAt: '2023-04-21T03:38:52.000Z'
    data:
      edited: false
      editors:
      - renyanda
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/30a4d59261f83589e0f2a9126a7f3eee.svg
          fullname: renyanda
          isHf: false
          isPro: false
          name: renyanda
          type: user
        html: '<blockquote>

          <p>Could you try to reinstall PyTorch in your working environment?</p>

          <p>Something like:</p>

          <p><code>pip install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118</code></p>

          <p>I think I faced this problem when PyTorch wasn''t installed with CUDA,
          or I didn''t have PyTorch in my environment.</p>

          </blockquote>

          <p>Thank you for the answer!<br><code>pip install --force-reinstall --index-url
          https://download.pytorch.org/whl/nightly/cu118</code> couldn''t solve this
          problem in my case.<br>I finally managed to solve this problem by changing
          my python environment from venv to conda. And install cudatoolkit in conda.<br>The
          reason why it happens maybe that <code>bitsandbytes</code> could not find
          <code>libcudart.so</code>, so it chooses <code>libbitsandbytes_cpu.so</code>
          rather than <code>libbitsandbytes_cudaxxx.so</code>. <code>libcudart.so</code>
          could not be found in venv bin path while <code>cudatoolkit</code> could
          make it visiable in conda bin path.</p>

          '
        raw: "> Could you try to reinstall PyTorch in your working environment?\n\
          > \n> Something like:\n> \n> `pip install --force-reinstall --index-url\
          \ https://download.pytorch.org/whl/nightly/cu118`\n> \n> I think I faced\
          \ this problem when PyTorch wasn't installed with CUDA, or I didn't have\
          \ PyTorch in my environment.\n\nThank you for the answer!\n`pip install\
          \ --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118`\
          \ couldn't solve this problem in my case. \nI finally managed to solve this\
          \ problem by changing my python environment from venv to conda. And install\
          \ cudatoolkit in conda.\nThe reason why it happens maybe that `bitsandbytes`\
          \ could not find `libcudart.so`, so it chooses `libbitsandbytes_cpu.so`\
          \ rather than `libbitsandbytes_cudaxxx.so`. `libcudart.so` could not be\
          \ found in venv bin path while `cudatoolkit` could make it visiable in conda\
          \ bin path."
        updatedAt: '2023-04-21T03:38:52.437Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6442054c94de4da2585fac93
    id: 6442054c94de4da2585fac92
    type: comment
  author: renyanda
  content: "> Could you try to reinstall PyTorch in your working environment?\n> \n\
    > Something like:\n> \n> `pip install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118`\n\
    > \n> I think I faced this problem when PyTorch wasn't installed with CUDA, or\
    \ I didn't have PyTorch in my environment.\n\nThank you for the answer!\n`pip\
    \ install --force-reinstall --index-url https://download.pytorch.org/whl/nightly/cu118`\
    \ couldn't solve this problem in my case. \nI finally managed to solve this problem\
    \ by changing my python environment from venv to conda. And install cudatoolkit\
    \ in conda.\nThe reason why it happens maybe that `bitsandbytes` could not find\
    \ `libcudart.so`, so it chooses `libbitsandbytes_cpu.so` rather than `libbitsandbytes_cudaxxx.so`.\
    \ `libcudart.so` could not be found in venv bin path while `cudatoolkit` could\
    \ make it visiable in conda bin path."
  created_at: 2023-04-21 02:38:52+00:00
  edited: false
  hidden: false
  id: 6442054c94de4da2585fac92
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/30a4d59261f83589e0f2a9126a7f3eee.svg
      fullname: renyanda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: renyanda
      type: user
    createdAt: '2023-04-21T03:38:52.000Z'
    data:
      status: closed
    id: 6442054c94de4da2585fac93
    type: status-change
  author: renyanda
  created_at: 2023-04-21 02:38:52+00:00
  id: 6442054c94de4da2585fac93
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: chainyo/alpaca-lora-7b
repo_type: model
status: closed
target_branch: null
title: 'libbitsandbytes_cpu.so undefined symbol: cget_col_row_stats'
