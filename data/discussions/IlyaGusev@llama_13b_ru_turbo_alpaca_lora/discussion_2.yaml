!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Stavatar
conflicting_files: null
created_at: 2023-06-02 20:42:51+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/75b38e3d061dfb47515784cf652199a1.svg
      fullname: "\u0421\u0442\u0435\u043F\u0430\u043D "
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Stavatar
      type: user
    createdAt: '2023-06-02T21:42:51.000Z'
    data:
      edited: false
      editors:
      - Stavatar
      hidden: false
      identifiedLanguage:
        language: ru
        probability: 0.1753423810005188
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/75b38e3d061dfb47515784cf652199a1.svg
          fullname: "\u0421\u0442\u0435\u043F\u0430\u043D "
          isHf: false
          isPro: false
          name: Stavatar
          type: user
        html: "<p>\u0414\u043E\u0431\u0440\u044B\u0439 \u0434\u0435\u043D\u044C! \u0418\
          \u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B \u044D\u0442\
          \u043E\u0442 \u043A\u043E\u0434 \u0434\u043B\u044F \u0437\u0430\u043F\u0443\
          \u0441\u043A\u0430 \u043C\u043E\u0434\u0435\u043B\u0438:</p>\n<p>import\
          \ torch<br>from peft import PeftModel, PeftConfig<br>from transformers import\
          \ AutoModelForCausalLM, AutoTokenizer, GenerationConfig</p>\n<p>MODEL_NAME\
          \ = \"IlyaGusev/llama_13b_ru_turbo_alpaca_lora\"</p>\n<p>config = PeftConfig.from_pretrained(MODEL_NAME)<br>model\
          \ = AutoModelForCausalLM.from_pretrained(<br>    config.base_model_name_or_path,<br>\
          \    load_in_8bit=True,<br>    torch_dtype=torch.float16,<br>    device_map=\"\
          auto\"<br>)<br>model = PeftModel.from_pretrained(model, MODEL_NAME, torch_dtype=torch.float16)<br>tokenizer\
          \ = AutoTokenizer.from_pretrained(MODEL_NAME)<br>model.eval()</p>\n<p>generation_config\
          \ = GenerationConfig.from_pretrained(MODEL_NAME)<br>data = tokenizer([\"\
          ### \u0417\u0430\u0434\u0430\u043D\u0438\u0435: \u041F\u043E\u0447\u0435\
          \u043C\u0443 \u0442\u0440\u0430\u0432\u0430 \u0437\u0435\u043B\u0435\u043D\
          \u0430\u044F?\\n### \u041E\u0442\u0432\u0435\u0442: \"], return_tensors=\"\
          pt\")<br>data = {k: v.to(model.device) for k, v in data.items() if k in\
          \ (\"input_ids\", \"attention_mask\")}<br>output_ids = model.generate(**data,\
          \ generation_config=generation_config)[0]<br>print(tokenizer.decode(output_ids,\
          \ skip_special_tokens=True))</p>\n<p>\u0412\u043E\u0437\u043D\u0438\u043A\
          \u043B\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0430\u044F \u043E\
          \u0448\u0438\u0431\u043A\u0430. \u0423 \u043C\u0435\u043D\u044F 64-\u0431\
          \u0438\u0442\u043D\u0430\u044F Windows 10<br><a rel=\"nofollow\" href=\"\
          https://cdn-uploads.huggingface.co/production/uploads/647a618c732a0cd866eb7505/2RfvgU3LxllvV76rX3knm.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/647a618c732a0cd866eb7505/2RfvgU3LxllvV76rX3knm.png\"\
          ></a></p>\n"
        raw: "\u0414\u043E\u0431\u0440\u044B\u0439 \u0434\u0435\u043D\u044C! \u0418\
          \u0441\u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B \u044D\u0442\
          \u043E\u0442 \u043A\u043E\u0434 \u0434\u043B\u044F \u0437\u0430\u043F\u0443\
          \u0441\u043A\u0430 \u043C\u043E\u0434\u0435\u043B\u0438:\r\n\r\nimport torch\r\
          \nfrom peft import PeftModel, PeftConfig\r\nfrom transformers import AutoModelForCausalLM,\
          \ AutoTokenizer, GenerationConfig\r\n\r\nMODEL_NAME = \"IlyaGusev/llama_13b_ru_turbo_alpaca_lora\"\
          \r\n\r\nconfig = PeftConfig.from_pretrained(MODEL_NAME)\r\nmodel = AutoModelForCausalLM.from_pretrained(\r\
          \n    config.base_model_name_or_path,\r\n    load_in_8bit=True,\r\n    torch_dtype=torch.float16,\r\
          \n    device_map=\"auto\"\r\n)\r\nmodel = PeftModel.from_pretrained(model,\
          \ MODEL_NAME, torch_dtype=torch.float16)\r\ntokenizer = AutoTokenizer.from_pretrained(MODEL_NAME)\r\
          \nmodel.eval()\r\n\r\ngeneration_config = GenerationConfig.from_pretrained(MODEL_NAME)\r\
          \ndata = tokenizer([\"### \u0417\u0430\u0434\u0430\u043D\u0438\u0435: \u041F\
          \u043E\u0447\u0435\u043C\u0443 \u0442\u0440\u0430\u0432\u0430 \u0437\u0435\
          \u043B\u0435\u043D\u0430\u044F?\\n### \u041E\u0442\u0432\u0435\u0442: \"\
          ], return_tensors=\"pt\")\r\ndata = {k: v.to(model.device) for k, v in data.items()\
          \ if k in (\"input_ids\", \"attention_mask\")}\r\noutput_ids = model.generate(**data,\
          \ generation_config=generation_config)[0]\r\nprint(tokenizer.decode(output_ids,\
          \ skip_special_tokens=True))\r\n\r\n\r\n\u0412\u043E\u0437\u043D\u0438\u043A\
          \u043B\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0430\u044F \u043E\
          \u0448\u0438\u0431\u043A\u0430. \u0423 \u043C\u0435\u043D\u044F 64-\u0431\
          \u0438\u0442\u043D\u0430\u044F Windows 10\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647a618c732a0cd866eb7505/2RfvgU3LxllvV76rX3knm.png)\r\
          \n"
        updatedAt: '2023-06-02T21:42:51.133Z'
      numEdits: 0
      reactions: []
    id: 647a625b686ecd7bf3f06432
    type: comment
  author: Stavatar
  content: "\u0414\u043E\u0431\u0440\u044B\u0439 \u0434\u0435\u043D\u044C! \u0418\u0441\
    \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u043B \u044D\u0442\u043E\u0442\
    \ \u043A\u043E\u0434 \u0434\u043B\u044F \u0437\u0430\u043F\u0443\u0441\u043A\u0430\
    \ \u043C\u043E\u0434\u0435\u043B\u0438:\r\n\r\nimport torch\r\nfrom peft import\
    \ PeftModel, PeftConfig\r\nfrom transformers import AutoModelForCausalLM, AutoTokenizer,\
    \ GenerationConfig\r\n\r\nMODEL_NAME = \"IlyaGusev/llama_13b_ru_turbo_alpaca_lora\"\
    \r\n\r\nconfig = PeftConfig.from_pretrained(MODEL_NAME)\r\nmodel = AutoModelForCausalLM.from_pretrained(\r\
    \n    config.base_model_name_or_path,\r\n    load_in_8bit=True,\r\n    torch_dtype=torch.float16,\r\
    \n    device_map=\"auto\"\r\n)\r\nmodel = PeftModel.from_pretrained(model, MODEL_NAME,\
    \ torch_dtype=torch.float16)\r\ntokenizer = AutoTokenizer.from_pretrained(MODEL_NAME)\r\
    \nmodel.eval()\r\n\r\ngeneration_config = GenerationConfig.from_pretrained(MODEL_NAME)\r\
    \ndata = tokenizer([\"### \u0417\u0430\u0434\u0430\u043D\u0438\u0435: \u041F\u043E\
    \u0447\u0435\u043C\u0443 \u0442\u0440\u0430\u0432\u0430 \u0437\u0435\u043B\u0435\
    \u043D\u0430\u044F?\\n### \u041E\u0442\u0432\u0435\u0442: \"], return_tensors=\"\
    pt\")\r\ndata = {k: v.to(model.device) for k, v in data.items() if k in (\"input_ids\"\
    , \"attention_mask\")}\r\noutput_ids = model.generate(**data, generation_config=generation_config)[0]\r\
    \nprint(tokenizer.decode(output_ids, skip_special_tokens=True))\r\n\r\n\r\n\u0412\
    \u043E\u0437\u043D\u0438\u043A\u043B\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\
    \u0449\u0430\u044F \u043E\u0448\u0438\u0431\u043A\u0430. \u0423 \u043C\u0435\u043D\
    \u044F 64-\u0431\u0438\u0442\u043D\u0430\u044F Windows 10\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/647a618c732a0cd866eb7505/2RfvgU3LxllvV76rX3knm.png)\r\
    \n"
  created_at: 2023-06-02 20:42:51+00:00
  edited: false
  hidden: false
  id: 647a625b686ecd7bf3f06432
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1612371927570-5fc2346dea82dd667bb0ffbc.jpeg?w=200&h=200&f=face
      fullname: Ilya Gusev
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: IlyaGusev
      type: user
    createdAt: '2023-06-02T21:47:00.000Z'
    data:
      edited: false
      editors:
      - IlyaGusev
      hidden: false
      identifiedLanguage:
        language: ru
        probability: 0.9979895949363708
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1612371927570-5fc2346dea82dd667bb0ffbc.jpeg?w=200&h=200&f=face
          fullname: Ilya Gusev
          isHf: false
          isPro: true
          name: IlyaGusev
          type: user
        html: "<p>\u0422\u0430\u043A \u0442\u0430\u043C \u0436\u0435 \u043D\u0430\u043F\
          \u0438\u0441\u0430\u043D\u043E, \u0447\u0442\u043E \u043D\u0435 \u0445\u0432\
          \u0430\u0442\u0430\u0435\u0442 \u043F\u0430\u043C\u044F\u0442\u0438 \u0443\
          \ \u0432\u0438\u0434\u0435\u043E\u043A\u0430\u0440\u0442\u044B, \u0430 \u0432\
          \u044B\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 CPU \u0441 8-bit\
          \ \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u043E\u0439 \u043F\u0440\u043E\
          \u0441\u0442\u043E \u0442\u0430\u043A \u043D\u0435 \u0440\u0430\u0431\u043E\
          \u0442\u0430\u0435\u0442.</p>\n"
        raw: "\u0422\u0430\u043A \u0442\u0430\u043C \u0436\u0435 \u043D\u0430\u043F\
          \u0438\u0441\u0430\u043D\u043E, \u0447\u0442\u043E \u043D\u0435 \u0445\u0432\
          \u0430\u0442\u0430\u0435\u0442 \u043F\u0430\u043C\u044F\u0442\u0438 \u0443\
          \ \u0432\u0438\u0434\u0435\u043E\u043A\u0430\u0440\u0442\u044B, \u0430 \u0432\
          \u044B\u0433\u0440\u0443\u0437\u043A\u0430 \u043D\u0430 CPU \u0441 8-bit\
          \ \u0437\u0430\u0433\u0440\u0443\u0437\u043A\u043E\u0439 \u043F\u0440\u043E\
          \u0441\u0442\u043E \u0442\u0430\u043A \u043D\u0435 \u0440\u0430\u0431\u043E\
          \u0442\u0430\u0435\u0442."
        updatedAt: '2023-06-02T21:47:00.278Z'
      numEdits: 0
      reactions: []
    id: 647a635444b6a3ae9d250862
    type: comment
  author: IlyaGusev
  content: "\u0422\u0430\u043A \u0442\u0430\u043C \u0436\u0435 \u043D\u0430\u043F\u0438\
    \u0441\u0430\u043D\u043E, \u0447\u0442\u043E \u043D\u0435 \u0445\u0432\u0430\u0442\
    \u0430\u0435\u0442 \u043F\u0430\u043C\u044F\u0442\u0438 \u0443 \u0432\u0438\u0434\
    \u0435\u043E\u043A\u0430\u0440\u0442\u044B, \u0430 \u0432\u044B\u0433\u0440\u0443\
    \u0437\u043A\u0430 \u043D\u0430 CPU \u0441 8-bit \u0437\u0430\u0433\u0440\u0443\
    \u0437\u043A\u043E\u0439 \u043F\u0440\u043E\u0441\u0442\u043E \u0442\u0430\u043A\
    \ \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442."
  created_at: 2023-06-02 20:47:00+00:00
  edited: false
  hidden: false
  id: 647a635444b6a3ae9d250862
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/75b38e3d061dfb47515784cf652199a1.svg
      fullname: "\u0421\u0442\u0435\u043F\u0430\u043D "
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Stavatar
      type: user
    createdAt: '2023-06-02T22:04:16.000Z'
    data:
      edited: false
      editors:
      - Stavatar
      hidden: false
      identifiedLanguage:
        language: ru
        probability: 0.9996259808540344
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/75b38e3d061dfb47515784cf652199a1.svg
          fullname: "\u0421\u0442\u0435\u043F\u0430\u043D "
          isHf: false
          isPro: false
          name: Stavatar
          type: user
        html: "<p>\u0422\u043E \u0435\u0441\u0442\u044C \u043F\u043E\u043B\u0443\u0447\
          \u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u043C\u043E\u0435\u0439 \u043C\
          \u0430\u0448\u0438\u043D\u0435 \u044D\u0442\u0443 \u043C\u043E\u0434\u0435\
          \u043B\u044C \u043D\u0438\u043A\u0430\u043A \u043D\u0435 \u0437\u0430\u043F\
          \u0443\u0441\u0442\u0438\u0442\u044C?</p>\n"
        raw: "\u0422\u043E \u0435\u0441\u0442\u044C \u043F\u043E\u043B\u0443\u0447\
          \u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u043C\u043E\u0435\u0439 \u043C\
          \u0430\u0448\u0438\u043D\u0435 \u044D\u0442\u0443 \u043C\u043E\u0434\u0435\
          \u043B\u044C \u043D\u0438\u043A\u0430\u043A \u043D\u0435 \u0437\u0430\u043F\
          \u0443\u0441\u0442\u0438\u0442\u044C?"
        updatedAt: '2023-06-02T22:04:16.447Z'
      numEdits: 0
      reactions: []
    id: 647a6760c7367455fd9e68ad
    type: comment
  author: Stavatar
  content: "\u0422\u043E \u0435\u0441\u0442\u044C \u043F\u043E\u043B\u0443\u0447\u0430\
    \u0435\u0442\u0441\u044F \u043D\u0430 \u043C\u043E\u0435\u0439 \u043C\u0430\u0448\
    \u0438\u043D\u0435 \u044D\u0442\u0443 \u043C\u043E\u0434\u0435\u043B\u044C \u043D\
    \u0438\u043A\u0430\u043A \u043D\u0435 \u0437\u0430\u043F\u0443\u0441\u0442\u0438\
    \u0442\u044C?"
  created_at: 2023-06-02 21:04:16+00:00
  edited: false
  hidden: false
  id: 647a6760c7367455fd9e68ad
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1612371927570-5fc2346dea82dd667bb0ffbc.jpeg?w=200&h=200&f=face
      fullname: Ilya Gusev
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: true
      name: IlyaGusev
      type: user
    createdAt: '2023-06-02T23:43:50.000Z'
    data:
      edited: false
      editors:
      - IlyaGusev
      hidden: false
      identifiedLanguage:
        language: ru
        probability: 0.7507287859916687
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1612371927570-5fc2346dea82dd667bb0ffbc.jpeg?w=200&h=200&f=face
          fullname: Ilya Gusev
          isHf: false
          isPro: true
          name: IlyaGusev
          type: user
        html: "<p>\u0434\u0430 \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0441\
          \u0442\u043E \u043D\u0430 cpu \u0432\u043E\u0442 \u044D\u0442\u0443 \u043C\
          \u043E\u0434\u0435\u043B\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\
          \u0442\u044C: <a href=\"https://huggingface.co/IlyaGusev/saiga_13b_lora_llamacpp\"\
          >https://huggingface.co/IlyaGusev/saiga_13b_lora_llamacpp</a><br>\u0438\u043B\
          \u0438 cpp \u0430\u043D\u0430\u043B\u043E\u0433 \u043F\u0440\u044F\u043C\
          \ \u044D\u0442\u043E\u0439 \u043C\u043E\u0434\u0435\u043B\u0438, <a href=\"\
          https://huggingface.co/IlyaGusev/llama_13b_ru_turbo_alpaca_lora_llamacpp\"\
          >https://huggingface.co/IlyaGusev/llama_13b_ru_turbo_alpaca_lora_llamacpp</a>,\
          \ \u043D\u043E \u043E\u043D\u0430 \u0432 \u0441\u0442\u0430\u0440\u043E\u043C\
          \ \u0444\u043E\u0440\u043C\u0430\u0442\u0435</p>\n"
        raw: "\u0434\u0430 \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0441\
          \u0442\u043E \u043D\u0430 cpu \u0432\u043E\u0442 \u044D\u0442\u0443 \u043C\
          \u043E\u0434\u0435\u043B\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\
          \u0442\u044C: https://huggingface.co/IlyaGusev/saiga_13b_lora_llamacpp\n\
          \u0438\u043B\u0438 cpp \u0430\u043D\u0430\u043B\u043E\u0433 \u043F\u0440\
          \u044F\u043C \u044D\u0442\u043E\u0439 \u043C\u043E\u0434\u0435\u043B\u0438\
          , https://huggingface.co/IlyaGusev/llama_13b_ru_turbo_alpaca_lora_llamacpp,\
          \ \u043D\u043E \u043E\u043D\u0430 \u0432 \u0441\u0442\u0430\u0440\u043E\u043C\
          \ \u0444\u043E\u0440\u043C\u0430\u0442\u0435"
        updatedAt: '2023-06-02T23:43:50.072Z'
      numEdits: 0
      reactions: []
    id: 647a7eb642abe27747609b85
    type: comment
  author: IlyaGusev
  content: "\u0434\u0430 \u043C\u043E\u0436\u043D\u043E \u043F\u0440\u043E\u0441\u0442\
    \u043E \u043D\u0430 cpu \u0432\u043E\u0442 \u044D\u0442\u0443 \u043C\u043E\u0434\
    \u0435\u043B\u044C \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C: https://huggingface.co/IlyaGusev/saiga_13b_lora_llamacpp\n\
    \u0438\u043B\u0438 cpp \u0430\u043D\u0430\u043B\u043E\u0433 \u043F\u0440\u044F\
    \u043C \u044D\u0442\u043E\u0439 \u043C\u043E\u0434\u0435\u043B\u0438, https://huggingface.co/IlyaGusev/llama_13b_ru_turbo_alpaca_lora_llamacpp,\
    \ \u043D\u043E \u043E\u043D\u0430 \u0432 \u0441\u0442\u0430\u0440\u043E\u043C\
    \ \u0444\u043E\u0440\u043C\u0430\u0442\u0435"
  created_at: 2023-06-02 22:43:50+00:00
  edited: false
  hidden: false
  id: 647a7eb642abe27747609b85
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: IlyaGusev/llama_13b_ru_turbo_alpaca_lora
repo_type: model
status: open
target_branch: null
title: "\u0412\u043E\u0437\u043D\u0438\u043A\u0430\u0435\u0442 \u043E\u0448\u0438\u0431\
  \u043A\u0430 \u043F\u0440\u0438 \u043F\u043E\u043F\u044B\u0442\u043A\u0435 \u0437\
  \u0430\u043F\u0443\u0441\u0442\u0438\u0442\u044C"
