!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jc-me
conflicting_files: null
created_at: 2022-06-22 19:34:51+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9bd9ab357a35f47c082e7628d2a457a3.svg
      fullname: jcolliinet-m
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jc-me
      type: user
    createdAt: '2022-06-22T20:34:51.000Z'
    data:
      edited: false
      editors:
      - jc-me
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9bd9ab357a35f47c082e7628d2a457a3.svg
          fullname: jcolliinet-m
          isHf: false
          isPro: false
          name: jc-me
          type: user
        html: "<p>The demo in the web page failse with error:</p>\n<pre><code>The\
          \ model_type 'longt5' is not recognized. It could be a bleeding edge model,\
          \ or incorrect\n</code></pre>\n<p>And the code:</p>\n<pre><code>from transformers\
          \ import AutoTokenizer, AutoModelForSeq2SeqLM\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"\
          google/long-t5-local-base\")\n</code></pre>\n<p>Fails with the error:</p>\n\
          <pre><code>---------------------------------------------------------------------------\n\
          RuntimeError                              Traceback (most recent call last)\n\
          /usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py in\
          \ load_state_dict(checkpoint_file)\n    460     try:\n--&gt; 461       \
          \  return torch.load(checkpoint_file, map_location=\"cpu\")\n    462   \
          \  except Exception as e:\n\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
          \ in load(f, map_location, pickle_module, **pickle_load_args)\n    526 \
          \        if _is_zipfile(opened_file):\n--&gt; 527             with _open_zipfile_reader(f)\
          \ as opened_zipfile:\n    528                 return _load(opened_zipfile,\
          \ map_location, pickle_module, **pickle_load_args)\n\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
          \ in __init__(self, name_or_buffer)\n    223     def __init__(self, name_or_buffer):\n\
          --&gt; 224         super(_open_zipfile_reader, self).__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
          \    225 \n\nRuntimeError: version_ &lt;= kMaxSupportedFileFormatVersion\
          \ INTERNAL ASSERT FAILED at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132,\
          \ please report a bug to PyTorch. Attempted to read a PyTorch file with\
          \ version 3, but the maximum supported version for reading is 2. Your PyTorch\
          \ installation may be too old. (init at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132)\n\
          frame #0: c10::Error::Error(c10::SourceLocation, std::string const&amp;)\
          \ + 0x47 (0x7f293a4ad627 in /usr/local/lib/python3.7/site-packages/torch/lib/libc10.so)\n\
          frame <a href=\"/google/long-t5-local-large/discussions/1\">#1</a>: caffe2::serialize::PyTorchStreamReader::init()\
          \ + 0x1f5b (0x7f2943fdb9ab in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\n\
          frame <a href=\"/google/long-t5-local-large/discussions/2\">#2</a>: caffe2::serialize::PyTorchStreamReader::PyTorchStreamReader(std::string\
          \ const&amp;) + 0x64 (0x7f2943fdcbc4 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\n\
          frame #3: &lt;unknown function&gt; + 0x6d2146 (0x7f2971b9c146 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\n\
          frame #4: &lt;unknown function&gt; + 0x28ba06 (0x7f2971755a06 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\n\
          frame #5: _PyMethodDef_RawFastCallDict + 0x264 (0x564316c5c3f4 in /usr/local/bin/python)\n\
          frame #6: _PyObject_FastCallDict + 0x6e (0x564316c2d2ee in /usr/local/bin/python)\n\
          frame #7: &lt;unknown function&gt; + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\n\
          frame #8: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\n\
          frame #9: &lt;unknown function&gt; + 0xbdf94 (0x564316bd0f94 in /usr/local/bin/python)\n\
          frame #10: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\n\
          frame #11: &lt;unknown function&gt; + 0x17fbd1 (0x564316c92bd1 in /usr/local/bin/python)\n\
          frame #12: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\n\
          frame #13: _PyEval_EvalCodeWithName + 0x7cd (0x564316c2c3fd in /usr/local/bin/python)\n\
          frame #14: _PyObject_FastCallDict + 0x312 (0x564316c2d592 in /usr/local/bin/python)\n\
          frame #15: &lt;unknown function&gt; + 0x1860ff (0x564316c990ff in /usr/local/bin/python)\n\
          frame #16: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\n\
          frame #17: _PyEval_EvalFrameDefault + 0x4715 (0x564316cda6b5 in /usr/local/bin/python)\n\
          frame #18: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #19: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\n\
          frame #20: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #21: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\n\
          frame #22: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\n\
          frame #23: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\n\
          frame #24: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #25: _PyObject_FastCallDict + 0x5be (0x564316c2d83e in /usr/local/bin/python)\n\
          frame #26: &lt;unknown function&gt; + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\n\
          frame #27: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\n\
          frame #28: _PyEval_EvalFrameDefault + 0x1cb8 (0x564316cd7c58 in /usr/local/bin/python)\n\
          frame #29: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #30: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\n\
          frame #31: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #32: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\n\
          frame #33: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #34: &lt;unknown function&gt; + 0x1d7d8e (0x564316cead8e in /usr/local/bin/python)\n\
          frame #35: _PyMethodDef_RawFastCallKeywords + 0xe9 (0x564316c5c639 in /usr/local/bin/python)\n\
          frame #36: _PyEval_EvalFrameDefault + 0x4428 (0x564316cda3c8 in /usr/local/bin/python)\n\
          frame #37: &lt;unknown function&gt; + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\n\
          frame #38: _PyEval_EvalFrameDefault + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\n\
          frame #39: &lt;unknown function&gt; + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\n\
          frame #40: _PyEval_EvalFrameDefault + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\n\
          frame #41: &lt;unknown function&gt; + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\n\
          frame #42: _PyMethodDescr_FastCallKeywords + 0xdb (0x564316c91d4b in /usr/local/bin/python)\n\
          frame #43: &lt;unknown function&gt; + 0x17faae (0x564316c92aae in /usr/local/bin/python)\n\
          frame #44: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\n\
          frame #45: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\n\
          frame #46: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\n\
          frame #47: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\n\
          frame #48: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #49: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\n\
          frame #50: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #51: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\n\
          frame #52: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #53: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\n\
          frame #54: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #55: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\n\
          frame #56: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #57: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\n\
          frame #58: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\n\
          frame #59: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\n\
          frame #60: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          frame #61: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\n\
          frame #62: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\n\
          frame #63: &lt;unknown function&gt; + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\n\
          \n\nDuring handling of the above exception, another exception occurred:\n\
          \nUnicodeDecodeError                        Traceback (most recent call\
          \ last)\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in load_state_dict(checkpoint_file)\n    464             with open(checkpoint_file)\
          \ as f:\n--&gt; 465                 if f.read().startswith(\"version\"):\n\
          \    466                     raise OSError(\n\n/usr/local/lib/python3.7/codecs.py\
          \ in decode(self, input, final)\n    321         data = self.buffer + input\n\
          --&gt; 322         (result, consumed) = self._buffer_decode(data, self.errors,\
          \ final)\n    323         # keep undecoded input until the next call\n\n\
          UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 64:\
          \ invalid start byte\n\nDuring handling of the above exception, another\
          \ exception occurred:\n\nOSError                                   Traceback\
          \ (most recent call last)\n&lt;ipython-input-1-2e6ed4a6affd&gt; in &lt;module&gt;\n\
          \      3 tokenizer = AutoTokenizer.from_pretrained(\"google/long-t5-local-base\"\
          )\n      4 \n----&gt; 5 model = AutoModelForSeq2SeqLM.from_pretrained(\"\
          google/long-t5-local-base\")\n\n/usr/local/lib/python3.7/site-packages/transformers/models/auto/auto_factory.py\
          \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\n\
          \    444         elif type(config) in cls._model_mapping.keys():\n    445\
          \             model_class = _get_model_class(config, cls._model_mapping)\n\
          --&gt; 446             return model_class.from_pretrained(pretrained_model_name_or_path,\
          \ *model_args, config=config, **kwargs)\n    447         raise ValueError(\n\
          \    448             f\"Unrecognized configuration class {config.__class__}\
          \ for this kind of AutoModel: {cls.__name__}.\\n\"\n\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\n\
          \   2130             if not is_sharded and state_dict is None:\n   2131\
          \                 # Time to load the checkpoint\n-&gt; 2132            \
          \     state_dict = load_state_dict(resolved_archive_file)\n   2133 \n  \
          \ 2134             # set dtype to instantiate the model under:\n\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in load_state_dict(checkpoint_file)\n    476         except (UnicodeDecodeError,\
          \ ValueError):\n    477             raise OSError(\n--&gt; 478         \
          \        f\"Unable to load weights from pytorch checkpoint file for '{checkpoint_file}'\
          \ \"\n    479                 f\"at '{checkpoint_file}'. \"\n    480   \
          \              \"If you tried to load a PyTorch model from a TF 2.0 checkpoint,\
          \ please set from_tf=True.\"\n\nOSError: Unable to load weights from pytorch\
          \ checkpoint file for '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'\
          \ at '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'.\
          \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please\
          \ set from_tf=True.\n</code></pre>\n"
        raw: "The demo in the web page failse with error:\r\n```\r\nThe model_type\
          \ 'longt5' is not recognized. It could be a bleeding edge model, or incorrect\r\
          \n```\r\n\r\nAnd the code:\r\n```\r\nfrom transformers import AutoTokenizer,\
          \ AutoModelForSeq2SeqLM\r\nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"\
          google/long-t5-local-base\")\r\n```\r\n\r\nFails with the error:\r\n```\r\
          \n---------------------------------------------------------------------------\r\
          \nRuntimeError                              Traceback (most recent call\
          \ last)\r\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in load_state_dict(checkpoint_file)\r\n    460     try:\r\n--> 461   \
          \      return torch.load(checkpoint_file, map_location=\"cpu\")\r\n    462\
          \     except Exception as e:\r\n\r\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
          \ in load(f, map_location, pickle_module, **pickle_load_args)\r\n    526\
          \         if _is_zipfile(opened_file):\r\n--> 527             with _open_zipfile_reader(f)\
          \ as opened_zipfile:\r\n    528                 return _load(opened_zipfile,\
          \ map_location, pickle_module, **pickle_load_args)\r\n\r\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
          \ in __init__(self, name_or_buffer)\r\n    223     def __init__(self, name_or_buffer):\r\
          \n--> 224         super(_open_zipfile_reader, self).__init__(torch._C.PyTorchFileReader(name_or_buffer))\r\
          \n    225 \r\n\r\nRuntimeError: version_ <= kMaxSupportedFileFormatVersion\
          \ INTERNAL ASSERT FAILED at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132,\
          \ please report a bug to PyTorch. Attempted to read a PyTorch file with\
          \ version 3, but the maximum supported version for reading is 2. Your PyTorch\
          \ installation may be too old. (init at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132)\r\
          \nframe #0: c10::Error::Error(c10::SourceLocation, std::string const&) +\
          \ 0x47 (0x7f293a4ad627 in /usr/local/lib/python3.7/site-packages/torch/lib/libc10.so)\r\
          \nframe #1: caffe2::serialize::PyTorchStreamReader::init() + 0x1f5b (0x7f2943fdb9ab\
          \ in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\r\nframe\
          \ #2: caffe2::serialize::PyTorchStreamReader::PyTorchStreamReader(std::string\
          \ const&) + 0x64 (0x7f2943fdcbc4 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\r\
          \nframe #3: <unknown function> + 0x6d2146 (0x7f2971b9c146 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\r\
          \nframe #4: <unknown function> + 0x28ba06 (0x7f2971755a06 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\r\
          \nframe #5: _PyMethodDef_RawFastCallDict + 0x264 (0x564316c5c3f4 in /usr/local/bin/python)\r\
          \nframe #6: _PyObject_FastCallDict + 0x6e (0x564316c2d2ee in /usr/local/bin/python)\r\
          \nframe #7: <unknown function> + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\r\
          \nframe #8: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\r\
          \nframe #9: <unknown function> + 0xbdf94 (0x564316bd0f94 in /usr/local/bin/python)\r\
          \nframe #10: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\r\
          \nframe #11: <unknown function> + 0x17fbd1 (0x564316c92bd1 in /usr/local/bin/python)\r\
          \nframe #12: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\r\
          \nframe #13: _PyEval_EvalCodeWithName + 0x7cd (0x564316c2c3fd in /usr/local/bin/python)\r\
          \nframe #14: _PyObject_FastCallDict + 0x312 (0x564316c2d592 in /usr/local/bin/python)\r\
          \nframe #15: <unknown function> + 0x1860ff (0x564316c990ff in /usr/local/bin/python)\r\
          \nframe #16: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\r\
          \nframe #17: _PyEval_EvalFrameDefault + 0x4715 (0x564316cda6b5 in /usr/local/bin/python)\r\
          \nframe #18: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #19: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
          \nframe #20: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #21: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\r\
          \nframe #22: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
          \nframe #23: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\r\
          \nframe #24: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #25: _PyObject_FastCallDict + 0x5be (0x564316c2d83e in /usr/local/bin/python)\r\
          \nframe #26: <unknown function> + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\r\
          \nframe #27: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\r\
          \nframe #28: _PyEval_EvalFrameDefault + 0x1cb8 (0x564316cd7c58 in /usr/local/bin/python)\r\
          \nframe #29: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #30: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
          \nframe #31: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #32: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\r\
          \nframe #33: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #34: <unknown function> + 0x1d7d8e (0x564316cead8e in /usr/local/bin/python)\r\
          \nframe #35: _PyMethodDef_RawFastCallKeywords + 0xe9 (0x564316c5c639 in\
          \ /usr/local/bin/python)\r\nframe #36: _PyEval_EvalFrameDefault + 0x4428\
          \ (0x564316cda3c8 in /usr/local/bin/python)\r\nframe #37: <unknown function>\
          \ + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\nframe #38: _PyEval_EvalFrameDefault\
          \ + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\r\nframe #39: <unknown\
          \ function> + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\nframe\
          \ #40: _PyEval_EvalFrameDefault + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\r\
          \nframe #41: <unknown function> + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\
          \nframe #42: _PyMethodDescr_FastCallKeywords + 0xdb (0x564316c91d4b in /usr/local/bin/python)\r\
          \nframe #43: <unknown function> + 0x17faae (0x564316c92aae in /usr/local/bin/python)\r\
          \nframe #44: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
          \nframe #45: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
          \nframe #46: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\r\
          \nframe #47: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
          \nframe #48: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #49: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
          \nframe #50: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #51: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
          \nframe #52: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #53: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\r\
          \nframe #54: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #55: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\r\
          \nframe #56: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #57: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
          \nframe #58: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
          \nframe #59: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\r\
          \nframe #60: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \nframe #61: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
          \nframe #62: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
          \nframe #63: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
          \n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\
          \n\r\nUnicodeDecodeError                        Traceback (most recent call\
          \ last)\r\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in load_state_dict(checkpoint_file)\r\n    464             with open(checkpoint_file)\
          \ as f:\r\n--> 465                 if f.read().startswith(\"version\"):\r\
          \n    466                     raise OSError(\r\n\r\n/usr/local/lib/python3.7/codecs.py\
          \ in decode(self, input, final)\r\n    321         data = self.buffer +\
          \ input\r\n--> 322         (result, consumed) = self._buffer_decode(data,\
          \ self.errors, final)\r\n    323         # keep undecoded input until the\
          \ next call\r\n\r\nUnicodeDecodeError: 'utf-8' codec can't decode byte 0x80\
          \ in position 64: invalid start byte\r\n\r\nDuring handling of the above\
          \ exception, another exception occurred:\r\n\r\nOSError                \
          \                   Traceback (most recent call last)\r\n<ipython-input-1-2e6ed4a6affd>\
          \ in <module>\r\n      3 tokenizer = AutoTokenizer.from_pretrained(\"google/long-t5-local-base\"\
          )\r\n      4 \r\n----> 5 model = AutoModelForSeq2SeqLM.from_pretrained(\"\
          google/long-t5-local-base\")\r\n\r\n/usr/local/lib/python3.7/site-packages/transformers/models/auto/auto_factory.py\
          \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\r\
          \n    444         elif type(config) in cls._model_mapping.keys():\r\n  \
          \  445             model_class = _get_model_class(config, cls._model_mapping)\r\
          \n--> 446             return model_class.from_pretrained(pretrained_model_name_or_path,\
          \ *model_args, config=config, **kwargs)\r\n    447         raise ValueError(\r\
          \n    448             f\"Unrecognized configuration class {config.__class__}\
          \ for this kind of AutoModel: {cls.__name__}.\\n\"\r\n\r\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
          \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\r\
          \n   2130             if not is_sharded and state_dict is None:\r\n   2131\
          \                 # Time to load the checkpoint\r\n-> 2132             \
          \    state_dict = load_state_dict(resolved_archive_file)\r\n   2133 \r\n\
          \   2134             # set dtype to instantiate the model under:\r\n\r\n\
          /usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py in\
          \ load_state_dict(checkpoint_file)\r\n    476         except (UnicodeDecodeError,\
          \ ValueError):\r\n    477             raise OSError(\r\n--> 478        \
          \         f\"Unable to load weights from pytorch checkpoint file for '{checkpoint_file}'\
          \ \"\r\n    479                 f\"at '{checkpoint_file}'. \"\r\n    480\
          \                 \"If you tried to load a PyTorch model from a TF 2.0 checkpoint,\
          \ please set from_tf=True.\"\r\n\r\nOSError: Unable to load weights from\
          \ pytorch checkpoint file for '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'\
          \ at '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'.\
          \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please\
          \ set from_tf=True.\r\n```"
        updatedAt: '2022-06-22T20:34:51.429Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - amitport
    id: 62b37ceb4ea3eff279df1a77
    type: comment
  author: jc-me
  content: "The demo in the web page failse with error:\r\n```\r\nThe model_type 'longt5'\
    \ is not recognized. It could be a bleeding edge model, or incorrect\r\n```\r\n\
    \r\nAnd the code:\r\n```\r\nfrom transformers import AutoTokenizer, AutoModelForSeq2SeqLM\r\
    \nmodel = AutoModelForSeq2SeqLM.from_pretrained(\"google/long-t5-local-base\"\
    )\r\n```\r\n\r\nFails with the error:\r\n```\r\n---------------------------------------------------------------------------\r\
    \nRuntimeError                              Traceback (most recent call last)\r\
    \n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py in load_state_dict(checkpoint_file)\r\
    \n    460     try:\r\n--> 461         return torch.load(checkpoint_file, map_location=\"\
    cpu\")\r\n    462     except Exception as e:\r\n\r\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
    \ in load(f, map_location, pickle_module, **pickle_load_args)\r\n    526     \
    \    if _is_zipfile(opened_file):\r\n--> 527             with _open_zipfile_reader(f)\
    \ as opened_zipfile:\r\n    528                 return _load(opened_zipfile, map_location,\
    \ pickle_module, **pickle_load_args)\r\n\r\n/usr/local/lib/python3.7/site-packages/torch/serialization.py\
    \ in __init__(self, name_or_buffer)\r\n    223     def __init__(self, name_or_buffer):\r\
    \n--> 224         super(_open_zipfile_reader, self).__init__(torch._C.PyTorchFileReader(name_or_buffer))\r\
    \n    225 \r\n\r\nRuntimeError: version_ <= kMaxSupportedFileFormatVersion INTERNAL\
    \ ASSERT FAILED at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132,\
    \ please report a bug to PyTorch. Attempted to read a PyTorch file with version\
    \ 3, but the maximum supported version for reading is 2. Your PyTorch installation\
    \ may be too old. (init at /opt/conda/conda-bld/pytorch_1579022060824/work/caffe2/serialize/inline_container.cc:132)\r\
    \nframe #0: c10::Error::Error(c10::SourceLocation, std::string const&) + 0x47\
    \ (0x7f293a4ad627 in /usr/local/lib/python3.7/site-packages/torch/lib/libc10.so)\r\
    \nframe #1: caffe2::serialize::PyTorchStreamReader::init() + 0x1f5b (0x7f2943fdb9ab\
    \ in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\r\nframe #2:\
    \ caffe2::serialize::PyTorchStreamReader::PyTorchStreamReader(std::string const&)\
    \ + 0x64 (0x7f2943fdcbc4 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch.so)\r\
    \nframe #3: <unknown function> + 0x6d2146 (0x7f2971b9c146 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\r\
    \nframe #4: <unknown function> + 0x28ba06 (0x7f2971755a06 in /usr/local/lib/python3.7/site-packages/torch/lib/libtorch_python.so)\r\
    \nframe #5: _PyMethodDef_RawFastCallDict + 0x264 (0x564316c5c3f4 in /usr/local/bin/python)\r\
    \nframe #6: _PyObject_FastCallDict + 0x6e (0x564316c2d2ee in /usr/local/bin/python)\r\
    \nframe #7: <unknown function> + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\r\
    \nframe #8: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\r\n\
    frame #9: <unknown function> + 0xbdf94 (0x564316bd0f94 in /usr/local/bin/python)\r\
    \nframe #10: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\r\
    \nframe #11: <unknown function> + 0x17fbd1 (0x564316c92bd1 in /usr/local/bin/python)\r\
    \nframe #12: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\r\
    \nframe #13: _PyEval_EvalCodeWithName + 0x7cd (0x564316c2c3fd in /usr/local/bin/python)\r\
    \nframe #14: _PyObject_FastCallDict + 0x312 (0x564316c2d592 in /usr/local/bin/python)\r\
    \nframe #15: <unknown function> + 0x1860ff (0x564316c990ff in /usr/local/bin/python)\r\
    \nframe #16: _PyObject_FastCallKeywords + 0x3ec (0x564316c923fc in /usr/local/bin/python)\r\
    \nframe #17: _PyEval_EvalFrameDefault + 0x4715 (0x564316cda6b5 in /usr/local/bin/python)\r\
    \nframe #18: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #19: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
    \nframe #20: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #21: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\r\
    \nframe #22: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
    \nframe #23: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\r\
    \nframe #24: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #25: _PyObject_FastCallDict + 0x5be (0x564316c2d83e in /usr/local/bin/python)\r\
    \nframe #26: <unknown function> + 0x12f141 (0x564316c42141 in /usr/local/bin/python)\r\
    \nframe #27: PyObject_Call + 0xb4 (0x564316c2db94 in /usr/local/bin/python)\r\n\
    frame #28: _PyEval_EvalFrameDefault + 0x1cb8 (0x564316cd7c58 in /usr/local/bin/python)\r\
    \nframe #29: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #30: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
    \nframe #31: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #32: _PyEval_EvalFrameDefault + 0x4762 (0x564316cda702 in /usr/local/bin/python)\r\
    \nframe #33: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #34: <unknown function> + 0x1d7d8e (0x564316cead8e in /usr/local/bin/python)\r\
    \nframe #35: _PyMethodDef_RawFastCallKeywords + 0xe9 (0x564316c5c639 in /usr/local/bin/python)\r\
    \nframe #36: _PyEval_EvalFrameDefault + 0x4428 (0x564316cda3c8 in /usr/local/bin/python)\r\
    \nframe #37: <unknown function> + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\
    \nframe #38: _PyEval_EvalFrameDefault + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\r\
    \nframe #39: <unknown function> + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\
    \nframe #40: _PyEval_EvalFrameDefault + 0x1998 (0x564316cd7938 in /usr/local/bin/python)\r\
    \nframe #41: <unknown function> + 0x17e9b4 (0x564316c919b4 in /usr/local/bin/python)\r\
    \nframe #42: _PyMethodDescr_FastCallKeywords + 0xdb (0x564316c91d4b in /usr/local/bin/python)\r\
    \nframe #43: <unknown function> + 0x17faae (0x564316c92aae in /usr/local/bin/python)\r\
    \nframe #44: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
    \nframe #45: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
    \nframe #46: _PyEval_EvalFrameDefault + 0x3f5 (0x564316cd6395 in /usr/local/bin/python)\r\
    \nframe #47: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
    \nframe #48: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #49: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
    \nframe #50: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #51: _PyFunction_FastCallKeywords + 0x583 (0x564316c4bcd3 in /usr/local/bin/python)\r\
    \nframe #52: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #53: _PyEval_EvalFrameDefault + 0x1401 (0x564316cd73a1 in /usr/local/bin/python)\r\
    \nframe #54: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #55: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\r\
    \nframe #56: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #57: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
    \nframe #58: _PyEval_EvalCodeWithName + 0x255 (0x564316c2be85 in /usr/local/bin/python)\r\
    \nframe #59: _PyFunction_FastCallKeywords + 0x521 (0x564316c4bc71 in /usr/local/bin/python)\r\
    \nframe #60: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \nframe #61: _PyEval_EvalFrameDefault + 0x661 (0x564316cd6601 in /usr/local/bin/python)\r\
    \nframe #62: _PyFunction_FastCallKeywords + 0x187 (0x564316c4b8d7 in /usr/local/bin/python)\r\
    \nframe #63: <unknown function> + 0x17f9c5 (0x564316c929c5 in /usr/local/bin/python)\r\
    \n\r\n\r\nDuring handling of the above exception, another exception occurred:\r\
    \n\r\nUnicodeDecodeError                        Traceback (most recent call last)\r\
    \n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py in load_state_dict(checkpoint_file)\r\
    \n    464             with open(checkpoint_file) as f:\r\n--> 465            \
    \     if f.read().startswith(\"version\"):\r\n    466                     raise\
    \ OSError(\r\n\r\n/usr/local/lib/python3.7/codecs.py in decode(self, input, final)\r\
    \n    321         data = self.buffer + input\r\n--> 322         (result, consumed)\
    \ = self._buffer_decode(data, self.errors, final)\r\n    323         # keep undecoded\
    \ input until the next call\r\n\r\nUnicodeDecodeError: 'utf-8' codec can't decode\
    \ byte 0x80 in position 64: invalid start byte\r\n\r\nDuring handling of the above\
    \ exception, another exception occurred:\r\n\r\nOSError                      \
    \             Traceback (most recent call last)\r\n<ipython-input-1-2e6ed4a6affd>\
    \ in <module>\r\n      3 tokenizer = AutoTokenizer.from_pretrained(\"google/long-t5-local-base\"\
    )\r\n      4 \r\n----> 5 model = AutoModelForSeq2SeqLM.from_pretrained(\"google/long-t5-local-base\"\
    )\r\n\r\n/usr/local/lib/python3.7/site-packages/transformers/models/auto/auto_factory.py\
    \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\r\
    \n    444         elif type(config) in cls._model_mapping.keys():\r\n    445 \
    \            model_class = _get_model_class(config, cls._model_mapping)\r\n-->\
    \ 446             return model_class.from_pretrained(pretrained_model_name_or_path,\
    \ *model_args, config=config, **kwargs)\r\n    447         raise ValueError(\r\
    \n    448             f\"Unrecognized configuration class {config.__class__} for\
    \ this kind of AutoModel: {cls.__name__}.\\n\"\r\n\r\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
    \ in from_pretrained(cls, pretrained_model_name_or_path, *model_args, **kwargs)\r\
    \n   2130             if not is_sharded and state_dict is None:\r\n   2131   \
    \              # Time to load the checkpoint\r\n-> 2132                 state_dict\
    \ = load_state_dict(resolved_archive_file)\r\n   2133 \r\n   2134            \
    \ # set dtype to instantiate the model under:\r\n\r\n/usr/local/lib/python3.7/site-packages/transformers/modeling_utils.py\
    \ in load_state_dict(checkpoint_file)\r\n    476         except (UnicodeDecodeError,\
    \ ValueError):\r\n    477             raise OSError(\r\n--> 478              \
    \   f\"Unable to load weights from pytorch checkpoint file for '{checkpoint_file}'\
    \ \"\r\n    479                 f\"at '{checkpoint_file}'. \"\r\n    480     \
    \            \"If you tried to load a PyTorch model from a TF 2.0 checkpoint,\
    \ please set from_tf=True.\"\r\n\r\nOSError: Unable to load weights from pytorch\
    \ checkpoint file for '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'\
    \ at '/root/.cache/huggingface/transformers/05fe519c85783b0e52c8ed98fc1c86e8d4dddfa5ea8ec367eff8808f92aac202.c643626750356473eb791cf6f8fe83d84c54c6db3f0d055cd2b76701669c841b'.\
    \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please set from_tf=True.\r\
    \n```"
  created_at: 2022-06-22 19:34:51+00:00
  edited: false
  hidden: false
  id: 62b37ceb4ea3eff279df1a77
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-06-25T15:56:24.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: "<p>cc <span data-props=\"{&quot;user&quot;:&quot;valhalla&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/valhalla\"\
          >@<span class=\"underline\">valhalla</span></a></span>\n\n\t</span></span></p>\n"
        raw: cc @valhalla
        updatedAt: '2022-06-25T15:56:24.603Z'
      numEdits: 0
      reactions: []
    id: 62b7302847c203febf82f3c6
    type: comment
  author: patrickvonplaten
  content: cc @valhalla
  created_at: 2022-06-25 14:56:24+00:00
  edited: false
  hidden: false
  id: 62b7302847c203febf82f3c6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/3071b14bc873a24fe240060049a45381.svg
      fullname: Alvyn
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: alvynabranches
      type: user
    createdAt: '2023-08-03T20:55:17.000Z'
    data:
      edited: false
      editors:
      - alvynabranches
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.42646536231040955
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/3071b14bc873a24fe240060049a45381.svg
          fullname: Alvyn
          isHf: false
          isPro: false
          name: alvynabranches
          type: user
        html: '<p>pip install torch</p>

          '
        raw: pip install torch
        updatedAt: '2023-08-03T20:55:17.308Z'
      numEdits: 0
      reactions: []
    id: 64cc1435214a472dd84fb9b2
    type: comment
  author: alvynabranches
  content: pip install torch
  created_at: 2023-08-03 19:55:17+00:00
  edited: false
  hidden: false
  id: 64cc1435214a472dd84fb9b2
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: google/long-t5-local-large
repo_type: model
status: open
target_branch: null
title: Model fails to run
