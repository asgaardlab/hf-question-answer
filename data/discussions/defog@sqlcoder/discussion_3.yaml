!!python/object:huggingface_hub.community.DiscussionWithDetails
author: nobitha
conflicting_files: null
created_at: 2023-08-23 05:14:11+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/16b6cef3995753c1c131e419fde2fd1c.svg
      fullname: 'prameela reddi '
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nobitha
      type: user
    createdAt: '2023-08-23T06:14:11.000Z'
    data:
      edited: false
      editors:
      - nobitha
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8646380305290222
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/16b6cef3995753c1c131e419fde2fd1c.svg
          fullname: 'prameela reddi '
          isHf: false
          isPro: false
          name: nobitha
          type: user
        html: '<p>Thank you for your model.<br>I have tested the model but the model
          sometimes did not consider the database schema when I gave the entire database
          , giving the inaccurate queries...<br>and<br>I got the below warning<br>warnings.
          warn(<br>Setting <code>pad_token_id</code> to <code>eos_token_id</code>:0
          for open-end generation.</p>

          <p>anyone can explain the above warning </p>

          '
        raw: "Thank you for your model.\r\nI have tested the model but the model sometimes\
          \ did not consider the database schema when I gave the entire database ,\
          \ giving the inaccurate queries...\r\nand \r\nI got the below warning \r\
          \nwarnings. warn(\r\nSetting `pad_token_id` to `eos_token_id`:0 for open-end\
          \ generation.\r\n\r\nanyone can explain the above warning "
        updatedAt: '2023-08-23T06:14:11.045Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - rishdotblog
        - qazwsxhhh
    id: 64e5a3b3398134c2af9b2966
    type: comment
  author: nobitha
  content: "Thank you for your model.\r\nI have tested the model but the model sometimes\
    \ did not consider the database schema when I gave the entire database , giving\
    \ the inaccurate queries...\r\nand \r\nI got the below warning \r\nwarnings. warn(\r\
    \nSetting `pad_token_id` to `eos_token_id`:0 for open-end generation.\r\n\r\n\
    anyone can explain the above warning "
  created_at: 2023-08-23 05:14:11+00:00
  edited: false
  hidden: false
  id: 64e5a3b3398134c2af9b2966
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1629781294865-603bbad3fd770a9997b57cb6.jpeg?w=200&h=200&f=face
      fullname: Rishabh
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: rishdotblog
      type: user
    createdAt: '2023-08-23T08:12:55.000Z'
    data:
      edited: false
      editors:
      - rishdotblog
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.728518009185791
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1629781294865-603bbad3fd770a9997b57cb6.jpeg?w=200&h=200&f=face
          fullname: Rishabh
          isHf: false
          isPro: false
          name: rishdotblog
          type: user
        html: "<p>Hi there! Thanks for trying out the model, and for your feedback.</p>\n\
          <p>Could you share the schema you shared with the model? For large databases,\
          \ we typically use a pruning function, like the one <a rel=\"nofollow\"\
          \ href=\"https://github.com/defog-ai/sql-eval/blob/main/utils/pruning.py\"\
          >here</a> for the model to focus its attention better. We will release documentation\
          \ for this pruning function tomorrow.</p>\n<p>Are you using our colab notebook\
          \ for inference? <a rel=\"nofollow\" href=\"https://colab.research.google.com/drive/1z4rmOEiFkxkMiecAWeTUlPl0OmKgfEu7\"\
          >https://colab.research.google.com/drive/1z4rmOEiFkxkMiecAWeTUlPl0OmKgfEu7</a>\
          \ You shouldn't get any warning messages with the following code:</p>\n\
          <pre><code class=\"language-python\">eos_token_id = tokenizer.convert_tokens_to_ids([<span\
          \ class=\"hljs-string\">\"```\"</span>])[<span class=\"hljs-number\">0</span>]\n\
          inputs = tokenizer(prompt, return_tensors=<span class=\"hljs-string\">\"\
          pt\"</span>).to(<span class=\"hljs-string\">\"cuda\"</span>)\ngenerated_ids\
          \ = model.generate(\n    **inputs,\n    num_return_sequences=<span class=\"\
          hljs-number\">1</span>,\n    eos_token_id=eos_token_id,\n    pad_token_id=eos_token_id,\n\
          \    max_new_tokens=<span class=\"hljs-number\">400</span>,\n    do_sample=<span\
          \ class=\"hljs-literal\">False</span>,\n    num_beams=<span class=\"hljs-number\"\
          >5</span>\n)\n</code></pre>\n"
        raw: "Hi there! Thanks for trying out the model, and for your feedback.\n\n\
          Could you share the schema you shared with the model? For large databases,\
          \ we typically use a pruning function, like the one [here](https://github.com/defog-ai/sql-eval/blob/main/utils/pruning.py)\
          \ for the model to focus its attention better. We will release documentation\
          \ for this pruning function tomorrow.\n\nAre you using our colab notebook\
          \ for inference? https://colab.research.google.com/drive/1z4rmOEiFkxkMiecAWeTUlPl0OmKgfEu7\
          \ You shouldn't get any warning messages with the following code:\n\n```python\n\
          eos_token_id = tokenizer.convert_tokens_to_ids([\"```\"])[0]\ninputs = tokenizer(prompt,\
          \ return_tensors=\"pt\").to(\"cuda\")\ngenerated_ids = model.generate(\n\
          \    **inputs,\n    num_return_sequences=1,\n    eos_token_id=eos_token_id,\n\
          \    pad_token_id=eos_token_id,\n    max_new_tokens=400,\n    do_sample=False,\n\
          \    num_beams=5\n)\n```"
        updatedAt: '2023-08-23T08:12:55.492Z'
      numEdits: 0
      reactions: []
    id: 64e5bf871ba234c1e5c5687e
    type: comment
  author: rishdotblog
  content: "Hi there! Thanks for trying out the model, and for your feedback.\n\n\
    Could you share the schema you shared with the model? For large databases, we\
    \ typically use a pruning function, like the one [here](https://github.com/defog-ai/sql-eval/blob/main/utils/pruning.py)\
    \ for the model to focus its attention better. We will release documentation for\
    \ this pruning function tomorrow.\n\nAre you using our colab notebook for inference?\
    \ https://colab.research.google.com/drive/1z4rmOEiFkxkMiecAWeTUlPl0OmKgfEu7 You\
    \ shouldn't get any warning messages with the following code:\n\n```python\neos_token_id\
    \ = tokenizer.convert_tokens_to_ids([\"```\"])[0]\ninputs = tokenizer(prompt,\
    \ return_tensors=\"pt\").to(\"cuda\")\ngenerated_ids = model.generate(\n    **inputs,\n\
    \    num_return_sequences=1,\n    eos_token_id=eos_token_id,\n    pad_token_id=eos_token_id,\n\
    \    max_new_tokens=400,\n    do_sample=False,\n    num_beams=5\n)\n```"
  created_at: 2023-08-23 07:12:55+00:00
  edited: false
  hidden: false
  id: 64e5bf871ba234c1e5c5687e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d6be3692267465b38c0240c7ffd8a876.svg
      fullname: lenovo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: username098
      type: user
    createdAt: '2023-08-23T11:41:58.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/d6be3692267465b38c0240c7ffd8a876.svg
          fullname: lenovo
          isHf: false
          isPro: false
          name: username098
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-08-23T11:43:44.294Z'
      numEdits: 0
      reactions: []
    id: 64e5f086576c221034a3746c
    type: comment
  author: username098
  content: This comment has been hidden
  created_at: 2023-08-23 10:41:58+00:00
  edited: true
  hidden: true
  id: 64e5f086576c221034a3746c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/16b6cef3995753c1c131e419fde2fd1c.svg
      fullname: 'prameela reddi '
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nobitha
      type: user
    createdAt: '2023-08-23T11:51:39.000Z'
    data:
      edited: false
      editors:
      - nobitha
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8189592957496643
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/16b6cef3995753c1c131e419fde2fd1c.svg
          fullname: 'prameela reddi '
          isHf: false
          isPro: false
          name: nobitha
          type: user
        html: '<p>Hey Hi !   Thank you for your response..</p>

          <p>I have tried your colab it is good. Thank you for that but I have connected
          the entire database not only schema because i need both sql_query and results
          based on my database.<br>when I tried with a small-size database it gave
          a query and answer but when I used a large-size database it got below error.</p>

          <p>RuntimeError: The size of tensor a (8192) must match the size of tensor
          b (28769) at non-singleton dimension 2</p>

          <p>Is there any limitation for model ?</p>

          <p>please consider the screenshots for both large and small databases. </p>

          <p>Thanks !!!!</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/b7A44Vf8_qptEmlHx8DSU.png"><img
          alt="Screenshot from 2023-08-23 17-08-39.png" src="https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/b7A44Vf8_qptEmlHx8DSU.png"></a></p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/vbuNKPC2Rj1LSyr2wAyRN.png"><img
          alt="Screenshot from 2023-08-23 17-21-16.png" src="https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/vbuNKPC2Rj1LSyr2wAyRN.png"></a></p>

          '
        raw: "Hey Hi !   Thank you for your response..\n\nI have tried your colab\
          \ it is good. Thank you for that but I have connected the entire database\
          \ not only schema because i need both sql_query and results based on my\
          \ database.\nwhen I tried with a small-size database it gave a query and\
          \ answer but when I used a large-size database it got below error.\n\nRuntimeError:\
          \ The size of tensor a (8192) must match the size of tensor b (28769) at\
          \ non-singleton dimension 2\n\nIs there any limitation for model ?\n\nplease\
          \ consider the screenshots for both large and small databases. \n\nThanks\
          \ !!!!\n\n\n![Screenshot from 2023-08-23 17-08-39.png](https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/b7A44Vf8_qptEmlHx8DSU.png)\n\
          \n\n![Screenshot from 2023-08-23 17-21-16.png](https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/vbuNKPC2Rj1LSyr2wAyRN.png)\n"
        updatedAt: '2023-08-23T11:51:39.231Z'
      numEdits: 0
      reactions: []
    id: 64e5f2cb5c2a6eff436ec863
    type: comment
  author: nobitha
  content: "Hey Hi !   Thank you for your response..\n\nI have tried your colab it\
    \ is good. Thank you for that but I have connected the entire database not only\
    \ schema because i need both sql_query and results based on my database.\nwhen\
    \ I tried with a small-size database it gave a query and answer but when I used\
    \ a large-size database it got below error.\n\nRuntimeError: The size of tensor\
    \ a (8192) must match the size of tensor b (28769) at non-singleton dimension\
    \ 2\n\nIs there any limitation for model ?\n\nplease consider the screenshots\
    \ for both large and small databases. \n\nThanks !!!!\n\n\n![Screenshot from 2023-08-23\
    \ 17-08-39.png](https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/b7A44Vf8_qptEmlHx8DSU.png)\n\
    \n\n![Screenshot from 2023-08-23 17-21-16.png](https://cdn-uploads.huggingface.co/production/uploads/647f000b35bc6d6aa5f970ed/vbuNKPC2Rj1LSyr2wAyRN.png)\n"
  created_at: 2023-08-23 10:51:39+00:00
  edited: false
  hidden: false
  id: 64e5f2cb5c2a6eff436ec863
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: defog/sqlcoder
repo_type: model
status: open
target_branch: null
title: schema consideration and warnings
