!!python/object:huggingface_hub.community.DiscussionWithDetails
author: uriii3
conflicting_files: null
created_at: 2022-11-30 12:15:26+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
      fullname: Oriol Ricart
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: uriii3
      type: user
    createdAt: '2022-11-30T12:15:26.000Z'
    data:
      edited: false
      editors:
      - uriii3
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
          fullname: Oriol Ricart
          isHf: false
          isPro: false
          name: uriii3
          type: user
        html: '<p>I have been transcribing some audios (30 second long) and for some
          of them the output is just the first word (something like: '' the''). I
          have change the script and tried with different models (whisper-medium)
          and with that one seems to work...<br>When it works it is just perfect but
          sometimes it doesn''t transcribe anything for me.<br>Any thoughts on how
          to solve or overcome this?</p>

          '
        raw: "I have been transcribing some audios (30 second long) and for some of\
          \ them the output is just the first word (something like: ' the'). I have\
          \ change the script and tried with different models (whisper-medium) and\
          \ with that one seems to work...\r\nWhen it works it is just perfect but\
          \ sometimes it doesn't transcribe anything for me.\r\nAny thoughts on how\
          \ to solve or overcome this?"
        updatedAt: '2022-11-30T12:15:26.241Z'
      numEdits: 0
      reactions: []
    id: 6387495eaaee5cd69dc228f3
    type: comment
  author: uriii3
  content: "I have been transcribing some audios (30 second long) and for some of\
    \ them the output is just the first word (something like: ' the'). I have change\
    \ the script and tried with different models (whisper-medium) and with that one\
    \ seems to work...\r\nWhen it works it is just perfect but sometimes it doesn't\
    \ transcribe anything for me.\r\nAny thoughts on how to solve or overcome this?"
  created_at: 2022-11-30 12:15:26+00:00
  edited: false
  hidden: false
  id: 6387495eaaee5cd69dc228f3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2022-12-01T15:55:01.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;uriii3&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/uriii3\">@<span class=\"\
          underline\">uriii3</span></a></span>\n\n\t</span></span>! Cool to see that\
          \ you're using the Whisper medium/large checkpoints for ASR!</p>\n<p>Have\
          \ you got a script we that we can use to reproduce?</p>\n"
        raw: 'Hey @uriii3! Cool to see that you''re using the Whisper medium/large
          checkpoints for ASR!


          Have you got a script we that we can use to reproduce?'
        updatedAt: '2022-12-01T15:55:01.415Z'
      numEdits: 0
      reactions: []
    id: 6388ce55863e8c5b0f43650d
    type: comment
  author: sanchit-gandhi
  content: 'Hey @uriii3! Cool to see that you''re using the Whisper medium/large checkpoints
    for ASR!


    Have you got a script we that we can use to reproduce?'
  created_at: 2022-12-01 15:55:01+00:00
  edited: false
  hidden: false
  id: 6388ce55863e8c5b0f43650d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
      fullname: Oriol Ricart
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: uriii3
      type: user
    createdAt: '2022-12-01T17:09:35.000Z'
    data:
      edited: false
      editors:
      - uriii3
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
          fullname: Oriol Ricart
          isHf: false
          isPro: false
          name: uriii3
          type: user
        html: "<p>Yees! I'm using the straight method of \"pipeline\". The only \"\
          thing\" is that I'm cutting the audio in 30 second batches and transferring\
          \ directly to the model. I can share the code but not the audios (for confidentiality),\
          \ sorry. </p>\n<pre><code class=\"language-python\"><span class=\"hljs-keyword\"\
          >for</span> file <span class=\"hljs-keyword\">in</span> os.listdir(folder_path):\n\
          \  <span class=\"hljs-keyword\">if</span> file.endswith(<span class=\"hljs-string\"\
          >\".wav\"</span>): <span class=\"hljs-comment\">#if file is an audio</span>\n\
          \    txt_path = output_folder + file[:-<span class=\"hljs-number\">4</span>]+\
          \ <span class=\"hljs-string\">'.txt'</span>\n    <span class=\"hljs-built_in\"\
          >print</span>(<span class=\"hljs-string\">\"Starting document: \"</span>,\
          \ file)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\"\
          >not</span> os.path.exists(txt_path): <span class=\"hljs-comment\"># do\
          \ not make the same file more than once (if re-running or something like\
          \ that) # Transcribing the audio file</span>\n      transcription = pipe(folder_path\
          \ + file) <span class=\"hljs-comment\"># defined before as: pipe = pipeline(model=openai/whisper-large)</span>\n\
          \      <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\"\
          >open</span>(txt_path, <span class=\"hljs-string\">'w'</span>) <span class=\"\
          hljs-keyword\">as</span> f:\n          f.write(transcription[<span class=\"\
          hljs-string\">'text'</span>].lower())\n      <span class=\"hljs-built_in\"\
          >print</span>(<span class=\"hljs-string\">\"Document \"</span>, file, <span\
          \ class=\"hljs-string\">\" ready!\"</span>)\n</code></pre>\n<p>The code\
          \ is not anything unusual or strange: the only \"strange\" thing is that\
          \ the audios I'm transcribing are 30 second segments, cut with <code>ffmpeg</code>\
          \ previously by me, from 10 minute longer audios. When I join the transcriptions\
          \ of all the segments, some have worked perfectly and others haven't been\
          \ even transcribed.</p>\n"
        raw: "Yees! I'm using the straight method of \"pipeline\". The only \"thing\"\
          \ is that I'm cutting the audio in 30 second batches and transferring directly\
          \ to the model. I can share the code but not the audios (for confidentiality),\
          \ sorry. \n\n```python\nfor file in os.listdir(folder_path):\n  if file.endswith(\"\
          .wav\"): #if file is an audio\n    txt_path = output_folder + file[:-4]+\
          \ '.txt'\n    print(\"Starting document: \", file)\n    if not os.path.exists(txt_path):\
          \ # do not make the same file more than once (if re-running or something\
          \ like that) # Transcribing the audio file\n      transcription = pipe(folder_path\
          \ + file) # defined before as: pipe = pipeline(model=openai/whisper-large)\n\
          \      with open(txt_path, 'w') as f:\n          f.write(transcription['text'].lower())\n\
          \      print(\"Document \", file, \" ready!\")\n```\n\nThe code is not anything\
          \ unusual or strange: the only \"strange\" thing is that the audios I'm\
          \ transcribing are 30 second segments, cut with `ffmpeg` previously by me,\
          \ from 10 minute longer audios. When I join the transcriptions of all the\
          \ segments, some have worked perfectly and others haven't been even transcribed."
        updatedAt: '2022-12-01T17:09:35.913Z'
      numEdits: 0
      reactions: []
    id: 6388dfcf8a5dbe2f3dc7f4b2
    type: comment
  author: uriii3
  content: "Yees! I'm using the straight method of \"pipeline\". The only \"thing\"\
    \ is that I'm cutting the audio in 30 second batches and transferring directly\
    \ to the model. I can share the code but not the audios (for confidentiality),\
    \ sorry. \n\n```python\nfor file in os.listdir(folder_path):\n  if file.endswith(\"\
    .wav\"): #if file is an audio\n    txt_path = output_folder + file[:-4]+ '.txt'\n\
    \    print(\"Starting document: \", file)\n    if not os.path.exists(txt_path):\
    \ # do not make the same file more than once (if re-running or something like\
    \ that) # Transcribing the audio file\n      transcription = pipe(folder_path\
    \ + file) # defined before as: pipe = pipeline(model=openai/whisper-large)\n \
    \     with open(txt_path, 'w') as f:\n          f.write(transcription['text'].lower())\n\
    \      print(\"Document \", file, \" ready!\")\n```\n\nThe code is not anything\
    \ unusual or strange: the only \"strange\" thing is that the audios I'm transcribing\
    \ are 30 second segments, cut with `ffmpeg` previously by me, from 10 minute longer\
    \ audios. When I join the transcriptions of all the segments, some have worked\
    \ perfectly and others haven't been even transcribed."
  created_at: 2022-12-01 17:09:35+00:00
  edited: false
  hidden: false
  id: 6388dfcf8a5dbe2f3dc7f4b2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2022-12-02T16:51:10.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>If the model detects silence within one of these 30s segments the\
          \ transcription will be terminated for that segment, hence why some are\
          \ probably cut short.</p>\n<p>You can also try using the Whisper model to\
          \ generate transcription for the 10 mins clips:</p>\n<pre><code class=\"\
          language-python\">pipe = pipeline(\n    task=<span class=\"hljs-string\"\
          >\"automatic-speech-recognition\"</span>,\n    model=<span class=\"hljs-string\"\
          >\"openai/whisper-small\"</span>,\n    framework=<span class=\"hljs-string\"\
          >\"pt\"</span>,\n    batch_size=<span class=\"hljs-number\">1</span>,\n\
          \    device=<span class=\"hljs-number\">0</span>,\n    chunk_length_s=<span\
          \ class=\"hljs-number\">30</span>,  <span class=\"hljs-comment\"># this\
          \ will chunk audios to 30s</span>\n)\n</code></pre>\n"
        raw: "If the model detects silence within one of these 30s segments the transcription\
          \ will be terminated for that segment, hence why some are probably cut short.\n\
          \nYou can also try using the Whisper model to generate transcription for\
          \ the 10 mins clips:\n\n```python\npipe = pipeline(\n    task=\"automatic-speech-recognition\"\
          ,\n    model=\"openai/whisper-small\",\n    framework=\"pt\",\n    batch_size=1,\n\
          \    device=0,\n    chunk_length_s=30,  # this will chunk audios to 30s\n\
          )\n```"
        updatedAt: '2022-12-02T16:51:10.658Z'
      numEdits: 0
      reactions: []
    id: 638a2cfe3b6a74c1a020646e
    type: comment
  author: sanchit-gandhi
  content: "If the model detects silence within one of these 30s segments the transcription\
    \ will be terminated for that segment, hence why some are probably cut short.\n\
    \nYou can also try using the Whisper model to generate transcription for the 10\
    \ mins clips:\n\n```python\npipe = pipeline(\n    task=\"automatic-speech-recognition\"\
    ,\n    model=\"openai/whisper-small\",\n    framework=\"pt\",\n    batch_size=1,\n\
    \    device=0,\n    chunk_length_s=30,  # this will chunk audios to 30s\n)\n```"
  created_at: 2022-12-02 16:51:10+00:00
  edited: false
  hidden: false
  id: 638a2cfe3b6a74c1a020646e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
      fullname: Oriol Ricart
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: uriii3
      type: user
    createdAt: '2022-12-03T10:32:19.000Z'
    data:
      edited: false
      editors:
      - uriii3
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
          fullname: Oriol Ricart
          isHf: false
          isPro: false
          name: uriii3
          type: user
        html: '<p>Is this a new feature? I looked a few weeks ago and it didn''t have
          this method! </p>

          <p>Thank you very much, I''ll try it right away.</p>

          '
        raw: "Is this a new feature? I looked a few weeks ago and it didn't have this\
          \ method! \n\nThank you very much, I'll try it right away."
        updatedAt: '2022-12-03T10:32:19.214Z'
      numEdits: 0
      reactions: []
    id: 638b25b3daa4cd1d6b3dc4df
    type: comment
  author: uriii3
  content: "Is this a new feature? I looked a few weeks ago and it didn't have this\
    \ method! \n\nThank you very much, I'll try it right away."
  created_at: 2022-12-03 10:32:19+00:00
  edited: false
  hidden: false
  id: 638b25b3daa4cd1d6b3dc4df
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
      fullname: Oriol Ricart
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: uriii3
      type: user
    createdAt: '2022-12-07T10:22:28.000Z'
    data:
      edited: false
      editors:
      - uriii3
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d724794b017cc573d7525b30638d3fd8.svg
          fullname: Oriol Ricart
          isHf: false
          isPro: false
          name: uriii3
          type: user
        html: '<p>Heey, I''m coming back to you. I tried the method you suggested
          and the output looks fairly similar... some parts of the transcription are
          perfect and some other have whole phrases and spaces left blank...</p>

          <p>i''ll try to combine some other chunk_length and/or stride length, but
          the problems looks to be still there. </p>

          <p>Thanks for the help anyway!</p>

          '
        raw: "Heey, I'm coming back to you. I tried the method you suggested and the\
          \ output looks fairly similar... some parts of the transcription are perfect\
          \ and some other have whole phrases and spaces left blank...\n\ni'll try\
          \ to combine some other chunk_length and/or stride length, but the problems\
          \ looks to be still there. \n\nThanks for the help anyway!"
        updatedAt: '2022-12-07T10:22:28.725Z'
      numEdits: 0
      reactions: []
    id: 63906964cd3cf0bc004492f5
    type: comment
  author: uriii3
  content: "Heey, I'm coming back to you. I tried the method you suggested and the\
    \ output looks fairly similar... some parts of the transcription are perfect and\
    \ some other have whole phrases and spaces left blank...\n\ni'll try to combine\
    \ some other chunk_length and/or stride length, but the problems looks to be still\
    \ there. \n\nThanks for the help anyway!"
  created_at: 2022-12-07 10:22:28+00:00
  edited: false
  hidden: false
  id: 63906964cd3cf0bc004492f5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2022-12-07T16:40:04.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: '<p>It sounds like it''s related to the data in that case! You can try
          chunking your data based on where there are large periods of silence and
          see if that helps!</p>

          '
        raw: It sounds like it's related to the data in that case! You can try chunking
          your data based on where there are large periods of silence and see if that
          helps!
        updatedAt: '2022-12-07T16:40:04.540Z'
      numEdits: 0
      reactions: []
    id: 6390c1e422a248a47f27903e
    type: comment
  author: sanchit-gandhi
  content: It sounds like it's related to the data in that case! You can try chunking
    your data based on where there are large periods of silence and see if that helps!
  created_at: 2022-12-07 16:40:04+00:00
  edited: false
  hidden: false
  id: 6390c1e422a248a47f27903e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c1de01cbd0749f1d55ff266223e1b4af.svg
      fullname: sanchit
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: chitversion
      type: user
    createdAt: '2023-06-05T11:21:35.000Z'
    data:
      edited: false
      editors:
      - chitversion
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9461232423782349
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c1de01cbd0749f1d55ff266223e1b4af.svg
          fullname: sanchit
          isHf: false
          isPro: false
          name: chitversion
          type: user
        html: '<p>please help in this matter. When I try to make a transcription of
          an utterance of 30 sec in mandarin it gives output:</p>

          <p>" This kind of serious illegal act, trampling on Hong Kong''s rule of
          law, undermining Hong Kong''s social order, and harming Hong Kong''s fundamental
          interests, is a blatant challenge to the bottom line of one country, two
          systems. We strongly condemn this."</p>

          <p>when i make a segment of this 30 second audio by slicing from 1 sec (2,3,4,
          upto 6 sec) to 29 sec the output is :</p>

          <p>" This serious illegal act of trampling on Hong Kong''s rule of law,
          undermining Hong Kong''s social order, and harming Hong Kong''s fundamental
          interests is a blatant challenge to the bottom line of one country, two
          systems. We strongly condemn this. The spokesperson said, the central government
          firmly supports the Hong Kong Special Administrative Region government and
          police to fulfill their duties according to the law, and supports the criminal
          criminal cases of Hong Kong Special Administrative Region-related agencies
          to pursue violent criminals according to the law, and restore social order
          as soon as possible to ensure the safety of citizens, personal and property."</p>

          <p>but for the segment from 8th second to 29th second is passed to the model
          the output is just:<br>'' the''</p>

          <p>and from 6th second to 29th:<br> '' the''</p>

          <p>this is very weird. I''m unable to understand what is going wrong.</p>

          '
        raw: "please help in this matter. When I try to make a transcription of an\
          \ utterance of 30 sec in mandarin it gives output:\n\n\" This kind of serious\
          \ illegal act, trampling on Hong Kong's rule of law, undermining Hong Kong's\
          \ social order, and harming Hong Kong's fundamental interests, is a blatant\
          \ challenge to the bottom line of one country, two systems. We strongly\
          \ condemn this.\"\n\nwhen i make a segment of this 30 second audio by slicing\
          \ from 1 sec (2,3,4, upto 6 sec) to 29 sec the output is :\n\n\" This serious\
          \ illegal act of trampling on Hong Kong's rule of law, undermining Hong\
          \ Kong's social order, and harming Hong Kong's fundamental interests is\
          \ a blatant challenge to the bottom line of one country, two systems. We\
          \ strongly condemn this. The spokesperson said, the central government firmly\
          \ supports the Hong Kong Special Administrative Region government and police\
          \ to fulfill their duties according to the law, and supports the criminal\
          \ criminal cases of Hong Kong Special Administrative Region-related agencies\
          \ to pursue violent criminals according to the law, and restore social order\
          \ as soon as possible to ensure the safety of citizens, personal and property.\"\
          \n\nbut for the segment from 8th second to 29th second is passed to the\
          \ model the output is just:\n' the'\n\nand from 6th second to 29th:\n '\
          \ the'\n\nthis is very weird. I'm unable to understand what is going wrong."
        updatedAt: '2023-06-05T11:21:35.210Z'
      numEdits: 0
      reactions: []
    id: 647dc53f32c471a7fa8676c9
    type: comment
  author: chitversion
  content: "please help in this matter. When I try to make a transcription of an utterance\
    \ of 30 sec in mandarin it gives output:\n\n\" This kind of serious illegal act,\
    \ trampling on Hong Kong's rule of law, undermining Hong Kong's social order,\
    \ and harming Hong Kong's fundamental interests, is a blatant challenge to the\
    \ bottom line of one country, two systems. We strongly condemn this.\"\n\nwhen\
    \ i make a segment of this 30 second audio by slicing from 1 sec (2,3,4, upto\
    \ 6 sec) to 29 sec the output is :\n\n\" This serious illegal act of trampling\
    \ on Hong Kong's rule of law, undermining Hong Kong's social order, and harming\
    \ Hong Kong's fundamental interests is a blatant challenge to the bottom line\
    \ of one country, two systems. We strongly condemn this. The spokesperson said,\
    \ the central government firmly supports the Hong Kong Special Administrative\
    \ Region government and police to fulfill their duties according to the law, and\
    \ supports the criminal criminal cases of Hong Kong Special Administrative Region-related\
    \ agencies to pursue violent criminals according to the law, and restore social\
    \ order as soon as possible to ensure the safety of citizens, personal and property.\"\
    \n\nbut for the segment from 8th second to 29th second is passed to the model\
    \ the output is just:\n' the'\n\nand from 6th second to 29th:\n ' the'\n\nthis\
    \ is very weird. I'm unable to understand what is going wrong."
  created_at: 2023-06-05 10:21:35+00:00
  edited: false
  hidden: false
  id: 647dc53f32c471a7fa8676c9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: openai/whisper-large
repo_type: model
status: open
target_branch: null
title: Not transcribing the audio into text (for some audios)
