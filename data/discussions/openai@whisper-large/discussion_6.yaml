!!python/object:huggingface_hub.community.DiscussionWithDetails
author: tyatabe
conflicting_files: null
created_at: 2022-10-12 18:38:22+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/09d9b5f2765aff85ba9b0da16294e013.svg
      fullname: Tada Yatabe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tyatabe
      type: user
    createdAt: '2022-10-12T19:38:22.000Z'
    data:
      edited: false
      editors:
      - tyatabe
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/09d9b5f2765aff85ba9b0da16294e013.svg
          fullname: Tada Yatabe
          isHf: false
          isPro: false
          name: tyatabe
          type: user
        html: '<p>Hey, I''m trying to run the French to French example posted in the
          model card (see below) on a google colab free tier gpu<br>...</p>

          <h1 id="load-dummy-dataset-and-read-soundfiles">load dummy dataset and read
          soundfiles</h1>

          <p><code>ds = load_dataset("common_voice", "fr", split="test", streaming=True)</code><br><code>ds
          = ds.cast_column("audio", datasets.Audio(sampling_rate=16_000))</code><br><code>input_speech
          = next(iter(ds))["audio"]["array"]</code><br>It fails at the last step,
          giving me the error below<br><code>RuntimeError: Decoding of ''mp3'' failed,
          probably because of streaming mode (</code>librosa<code> cannot decode ''mp3''
          file-like objects, only path-like)</code><br>Has anybody seen this? am I
          missing a dependency or something?</p>

          <p>Thank you</p>

          '
        raw: "Hey, I'm trying to run the French to French example posted in the model\
          \ card (see below) on a google colab free tier gpu\r\n...\r\n# load dummy\
          \ dataset and read soundfiles\r\n`ds = load_dataset(\"common_voice\", \"\
          fr\", split=\"test\", streaming=True)`\r\n`ds = ds.cast_column(\"audio\"\
          , datasets.Audio(sampling_rate=16_000))`\r\n`input_speech = next(iter(ds))[\"\
          audio\"][\"array\"]`\r\nIt fails at the last step, giving me the error below\r\
          \n`RuntimeError: Decoding of 'mp3' failed, probably because of streaming\
          \ mode (`librosa` cannot decode 'mp3' file-like objects, only path-like)`\r\
          \nHas anybody seen this? am I missing a dependency or something?\r\n\r\n\
          Thank you"
        updatedAt: '2022-10-12T19:38:22.164Z'
      numEdits: 0
      reactions: []
    id: 634717aedbe3f8b009e035ee
    type: comment
  author: tyatabe
  content: "Hey, I'm trying to run the French to French example posted in the model\
    \ card (see below) on a google colab free tier gpu\r\n...\r\n# load dummy dataset\
    \ and read soundfiles\r\n`ds = load_dataset(\"common_voice\", \"fr\", split=\"\
    test\", streaming=True)`\r\n`ds = ds.cast_column(\"audio\", datasets.Audio(sampling_rate=16_000))`\r\
    \n`input_speech = next(iter(ds))[\"audio\"][\"array\"]`\r\nIt fails at the last\
    \ step, giving me the error below\r\n`RuntimeError: Decoding of 'mp3' failed,\
    \ probably because of streaming mode (`librosa` cannot decode 'mp3' file-like\
    \ objects, only path-like)`\r\nHas anybody seen this? am I missing a dependency\
    \ or something?\r\n\r\nThank you"
  created_at: 2022-10-12 18:38:22+00:00
  edited: false
  hidden: false
  id: 634717aedbe3f8b009e035ee
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2022-10-13T15:42:11.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: '<p>Hey! Not really sure why, but I think it is related to librosa.
          I just tried on a local computer and it works properly. But I had this bug
          on colab ....</p>

          '
        raw: Hey! Not really sure why, but I think it is related to librosa. I just
          tried on a local computer and it works properly. But I had this bug on colab
          ....
        updatedAt: '2022-10-13T15:42:11.982Z'
      numEdits: 0
      reactions: []
    id: 634831d322bc15d2636d8087
    type: comment
  author: ArthurZ
  content: Hey! Not really sure why, but I think it is related to librosa. I just
    tried on a local computer and it works properly. But I had this bug on colab ....
  created_at: 2022-10-13 14:42:11+00:00
  edited: false
  hidden: false
  id: 634831d322bc15d2636d8087
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f56030c417e3f768c2585819bb543606.svg
      fullname: kim yi jun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: trueorfalse441
      type: user
    createdAt: '2023-04-12T03:02:32.000Z'
    data:
      edited: true
      editors:
      - trueorfalse441
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f56030c417e3f768c2585819bb543606.svg
          fullname: kim yi jun
          isHf: false
          isPro: false
          name: trueorfalse441
          type: user
        html: '<p>I found the cause, the mp3 files corrupted. you should make validator
          mp3 files and seperated it.</p>

          '
        raw: I found the cause, the mp3 files corrupted. you should make validator
          mp3 files and seperated it.
        updatedAt: '2023-04-14T06:35:13.472Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - trueorfalse441
    id: 64361f4887604914ba39b38a
    type: comment
  author: trueorfalse441
  content: I found the cause, the mp3 files corrupted. you should make validator mp3
    files and seperated it.
  created_at: 2023-04-12 02:02:32+00:00
  edited: true
  hidden: false
  id: 64361f4887604914ba39b38a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-04-21T14:33:12.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: '<p>Datasets got a big update to only use soundfile + librosa now, regardless
          of the file type: <a rel="nofollow" href="https://github.com/huggingface/datasets/pull/5573">https://github.com/huggingface/datasets/pull/5573</a></p>

          <p>There should be a better error message from <code>soundfile.read</code></p>

          '
        raw: 'Datasets got a big update to only use soundfile + librosa now, regardless
          of the file type: https://github.com/huggingface/datasets/pull/5573


          There should be a better error message from `soundfile.read`'
        updatedAt: '2023-04-21T14:33:12.260Z'
      numEdits: 0
      reactions: []
    id: 64429ea8dad68e008d0606ce
    type: comment
  author: sanchit-gandhi
  content: 'Datasets got a big update to only use soundfile + librosa now, regardless
    of the file type: https://github.com/huggingface/datasets/pull/5573


    There should be a better error message from `soundfile.read`'
  created_at: 2023-04-21 13:33:12+00:00
  edited: false
  hidden: false
  id: 64429ea8dad68e008d0606ce
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: openai/whisper-large
repo_type: model
status: open
target_branch: null
title: Decoding of 'mp3' failed
