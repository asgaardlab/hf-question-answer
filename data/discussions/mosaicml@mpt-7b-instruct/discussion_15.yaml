!!python/object:huggingface_hub.community.DiscussionWithDetails
author: narenzen
conflicting_files: null
created_at: 2023-05-11 08:18:35+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/11401350689b77a10d2f4d72fc216e93.svg
      fullname: Naren Babu R
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: narenzen
      type: user
    createdAt: '2023-05-11T09:18:35.000Z'
    data:
      edited: false
      editors:
      - narenzen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/11401350689b77a10d2f4d72fc216e93.svg
          fullname: Naren Babu R
          isHf: false
          isPro: false
          name: narenzen
          type: user
        html: '<p>I need to generate shorter sentences.<br>I''m using mpt-instruct
          for creating titles.</p>

          <p>I need to restrict the length of the sentences.<br>what options are available?</p>

          <ol>

          <li>I tried<br>length_penalty = -0.9 (but didn''t work). Any suggested value
          for generating shorter sentences</li>

          <li>Should i control the length using max_tokens or max_length.</li>

          </ol>

          <p>I need to generate shorter sentences which will be used for creating
          titles/ headings</p>

          '
        raw: "I need to generate shorter sentences.\r\nI'm using mpt-instruct for\
          \ creating titles.\r\n\r\nI need to restrict the length of the sentences.\r\
          \nwhat options are available?\r\n\r\n1. I tried\r\nlength_penalty = -0.9\
          \ (but didn't work). Any suggested value for generating shorter sentences\r\
          \n2. Should i control the length using max_tokens or max_length.\r\n\r\n\
          I need to generate shorter sentences which will be used for creating titles/\
          \ headings"
        updatedAt: '2023-05-11T09:18:35.535Z'
      numEdits: 0
      reactions: []
    id: 645cb2eb01f4eaab2a05a8ce
    type: comment
  author: narenzen
  content: "I need to generate shorter sentences.\r\nI'm using mpt-instruct for creating\
    \ titles.\r\n\r\nI need to restrict the length of the sentences.\r\nwhat options\
    \ are available?\r\n\r\n1. I tried\r\nlength_penalty = -0.9 (but didn't work).\
    \ Any suggested value for generating shorter sentences\r\n2. Should i control\
    \ the length using max_tokens or max_length.\r\n\r\nI need to generate shorter\
    \ sentences which will be used for creating titles/ headings"
  created_at: 2023-05-11 08:18:35+00:00
  edited: false
  hidden: false
  id: 645cb2eb01f4eaab2a05a8ce
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/11401350689b77a10d2f4d72fc216e93.svg
      fullname: Naren Babu R
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: narenzen
      type: user
    createdAt: '2023-05-11T09:21:16.000Z'
    data:
      from: create shorter sentences
      to: Generate shorter sentences
    id: 645cb38cafa77201e2f7ce0e
    type: title-change
  author: narenzen
  created_at: 2023-05-11 08:21:16+00:00
  id: 645cb38cafa77201e2f7ce0e
  new_title: Generate shorter sentences
  old_title: create shorter sentences
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ff5fc4fe6383d50b29052e/Vk9R5rKqG-Z_ou-55J9x-.jpeg?w=200&h=200&f=face
      fullname: AayushShah
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AayushShah
      type: user
    createdAt: '2023-05-15T06:09:30.000Z'
    data:
      edited: true
      editors:
      - AayushShah
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ff5fc4fe6383d50b29052e/Vk9R5rKqG-Z_ou-55J9x-.jpeg?w=200&h=200&f=face
          fullname: AayushShah
          isHf: false
          isPro: false
          name: AayushShah
          type: user
        html: '<p><code>max_new_tokens</code> and <code>max_length</code> should not
          be used to treat this problem because they will simply cut the sentence
          in between.<br>For generating shorter sequences you have a couple of options,
          well this is trial and error but it will work:</p>

          <p><u>Options:</u></p>

          <ol>

          <li><p><strong>Few shots</strong>: Since this is the instruct model it will
          understand what you want to achieve by giving 3-6 examples in the prompt
          of "what short title" means. I assume you want to give the title for the
          given paragraph, so give the paragraph followed by the title. Repeat this
          for the other 3-4 examples and the model has context on what it needs to
          do.</p>

          </li>

          <li><p><strong><code>length_penalty</code></strong>: Instead of giving the
          penalty in negative as you did <code>-0.9</code>, provide in positive. And
          it should be more than 1. It is trial and error mate!</p>

          </li>

          <li><p><strong><code>penalty_alpha</code></strong>: This is something to
          take care of, it is advisable to use it between 0 and 1 range. This will
          too shorten the sequence but from my experiments, when given the long prompt,
          using this parameter causes OOM errors. So, when you have a long prompt,
          don''t use this...</p>

          </li>

          <li><p><strong>Fine-tune</strong>: Gather examples in pairs of paragraphs
          and titles. Fine-tune this model on that and this will work.</p>

          </li>

          <li><p><strong>Prompt engineer</strong>: Try instructing the model to generate
          the short sentence within 10 words.</p>

          </li>

          </ol>

          <p>Let me know if any of these helps.</p>

          '
        raw: "`max_new_tokens` and `max_length` should not be used to treat this problem\
          \ because they will simply cut the sentence in between.\nFor generating\
          \ shorter sequences you have a couple of options, well this is trial and\
          \ error but it will work:\n\n<u>Options:</u>\n1. **Few shots**: Since this\
          \ is the instruct model it will understand what you want to achieve by giving\
          \ 3-6 examples in the prompt of \"what short title\" means. I assume you\
          \ want to give the title for the given paragraph, so give the paragraph\
          \ followed by the title. Repeat this for the other 3-4 examples and the\
          \ model has context on what it needs to do.\n\n2. **`length_penalty`**:\
          \ Instead of giving the penalty in negative as you did `-0.9`, provide in\
          \ positive. And it should be more than 1. It is trial and error mate!\n\n\
          3. **`penalty_alpha`**: This is something to take care of, it is advisable\
          \ to use it between 0 and 1 range. This will too shorten the sequence but\
          \ from my experiments, when given the long prompt, using this parameter\
          \ causes OOM errors. So, when you have a long prompt, don't use this...\n\
          \n4. **Fine-tune**: Gather examples in pairs of paragraphs and titles. Fine-tune\
          \ this model on that and this will work.\n\n5. **Prompt engineer**: Try\
          \ instructing the model to generate the short sentence within 10 words.\
          \ \n\nLet me know if any of these helps."
        updatedAt: '2023-05-15T06:10:03.369Z'
      numEdits: 2
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sam-mosaic
    id: 6461cc9ae7de30225da93510
    type: comment
  author: AayushShah
  content: "`max_new_tokens` and `max_length` should not be used to treat this problem\
    \ because they will simply cut the sentence in between.\nFor generating shorter\
    \ sequences you have a couple of options, well this is trial and error but it\
    \ will work:\n\n<u>Options:</u>\n1. **Few shots**: Since this is the instruct\
    \ model it will understand what you want to achieve by giving 3-6 examples in\
    \ the prompt of \"what short title\" means. I assume you want to give the title\
    \ for the given paragraph, so give the paragraph followed by the title. Repeat\
    \ this for the other 3-4 examples and the model has context on what it needs to\
    \ do.\n\n2. **`length_penalty`**: Instead of giving the penalty in negative as\
    \ you did `-0.9`, provide in positive. And it should be more than 1. It is trial\
    \ and error mate!\n\n3. **`penalty_alpha`**: This is something to take care of,\
    \ it is advisable to use it between 0 and 1 range. This will too shorten the sequence\
    \ but from my experiments, when given the long prompt, using this parameter causes\
    \ OOM errors. So, when you have a long prompt, don't use this...\n\n4. **Fine-tune**:\
    \ Gather examples in pairs of paragraphs and titles. Fine-tune this model on that\
    \ and this will work.\n\n5. **Prompt engineer**: Try instructing the model to\
    \ generate the short sentence within 10 words. \n\nLet me know if any of these\
    \ helps."
  created_at: 2023-05-15 05:09:30+00:00
  edited: true
  hidden: false
  id: 6461cc9ae7de30225da93510
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ff5fc4fe6383d50b29052e/Vk9R5rKqG-Z_ou-55J9x-.jpeg?w=200&h=200&f=face
      fullname: AayushShah
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AayushShah
      type: user
    createdAt: '2023-05-15T06:18:37.000Z'
    data:
      edited: false
      editors:
      - AayushShah
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ff5fc4fe6383d50b29052e/Vk9R5rKqG-Z_ou-55J9x-.jpeg?w=200&h=200&f=face
          fullname: AayushShah
          isHf: false
          isPro: false
          name: AayushShah
          type: user
        html: "<p>Have a look, without using any other options I described above,\
          \ I just given a prompt that works for the title generation:</p>\n<h3 id=\"\
          ptompt\">Ptompt:</h3>\n<pre><code>The following is the paragraph on which\
          \ you need to generate a short title:\n\nThe first Italy international football\
          \ player to score a hat-trick was Pietro Lana, who scored three times in\
          \ a 6\u20132 victory against France on 15 May 1910. The highest individual\
          \ score in a single match is four goals, which has been achieved by six\
          \ players: Carlo Biagi, Francesco Pernigo, Omar S\xEDvori, Alberto Orlando,\
          \ Gigi Riva, and Roberto Bettega. Five players have scored a hat-trick more\
          \ than once: Giuseppe Meazza, Angelo Schiavio, Silvio Piola, Riva and Paolo\
          \ Rossi (pictured). The highest number of Italy hat-tricks in a single match\
          \ is three, which occurred during the third-place match at the 1928 Summer\
          \ Olympics, an 11\u20133 victory over Egypt in which Angelo Schiavio, Elvio\
          \ Banchero and Mario Magnozzi each scored three goals. In the 1982 FIFA\
          \ World Cup second group-stage match, Italy won 3\u20132 against Brazil;\
          \ Rossi scored a hat-trick in the match that allowed Italy to progress to\
          \ the semi-finals.\n\nGenerate a single and short title for the paragraph\
          \ above within 5 words.\nTitle: \n</code></pre>\n<h3 id=\"generation\">Generation:</h3>\n\
          <pre><code>Here are some possible titles generated from this text:\n\n-\
          \ \u201CItaly\u2019s greatest footballers\u201D\n- \u201CFive Italian legends\
          \ with multiple \u2018hat tricks\u2019\u201D\n- \u201CThree Italians scored\
          \ hat trick thrice - here they are!\"\n</code></pre>\n<p>See! I could even\
          \ use something else that would generate a single title instead of multiple.\
          \ You just need to understand how the model works. Then you are good to\
          \ go.</p>\n"
        raw: "Have a look, without using any other options I described above, I just\
          \ given a prompt that works for the title generation:\n\n### Ptompt:\n```\n\
          The following is the paragraph on which you need to generate a short title:\n\
          \nThe first Italy international football player to score a hat-trick was\
          \ Pietro Lana, who scored three times in a 6\u20132 victory against France\
          \ on 15 May 1910. The highest individual score in a single match is four\
          \ goals, which has been achieved by six players: Carlo Biagi, Francesco\
          \ Pernigo, Omar S\xEDvori, Alberto Orlando, Gigi Riva, and Roberto Bettega.\
          \ Five players have scored a hat-trick more than once: Giuseppe Meazza,\
          \ Angelo Schiavio, Silvio Piola, Riva and Paolo Rossi (pictured). The highest\
          \ number of Italy hat-tricks in a single match is three, which occurred\
          \ during the third-place match at the 1928 Summer Olympics, an 11\u2013\
          3 victory over Egypt in which Angelo Schiavio, Elvio Banchero and Mario\
          \ Magnozzi each scored three goals. In the 1982 FIFA World Cup second group-stage\
          \ match, Italy won 3\u20132 against Brazil; Rossi scored a hat-trick in\
          \ the match that allowed Italy to progress to the semi-finals.\n\nGenerate\
          \ a single and short title for the paragraph above within 5 words.\nTitle:\
          \ \n```\n\n### Generation:\n```\nHere are some possible titles generated\
          \ from this text:\n\n- \u201CItaly\u2019s greatest footballers\u201D\n-\
          \ \u201CFive Italian legends with multiple \u2018hat tricks\u2019\u201D\n\
          - \u201CThree Italians scored hat trick thrice - here they are!\"\n```\n\
          \nSee! I could even use something else that would generate a single title\
          \ instead of multiple. You just need to understand how the model works.\
          \ Then you are good to go."
        updatedAt: '2023-05-15T06:18:37.683Z'
      numEdits: 0
      reactions: []
    id: 6461cebd805bf4012703f7a4
    type: comment
  author: AayushShah
  content: "Have a look, without using any other options I described above, I just\
    \ given a prompt that works for the title generation:\n\n### Ptompt:\n```\nThe\
    \ following is the paragraph on which you need to generate a short title:\n\n\
    The first Italy international football player to score a hat-trick was Pietro\
    \ Lana, who scored three times in a 6\u20132 victory against France on 15 May\
    \ 1910. The highest individual score in a single match is four goals, which has\
    \ been achieved by six players: Carlo Biagi, Francesco Pernigo, Omar S\xEDvori,\
    \ Alberto Orlando, Gigi Riva, and Roberto Bettega. Five players have scored a\
    \ hat-trick more than once: Giuseppe Meazza, Angelo Schiavio, Silvio Piola, Riva\
    \ and Paolo Rossi (pictured). The highest number of Italy hat-tricks in a single\
    \ match is three, which occurred during the third-place match at the 1928 Summer\
    \ Olympics, an 11\u20133 victory over Egypt in which Angelo Schiavio, Elvio Banchero\
    \ and Mario Magnozzi each scored three goals. In the 1982 FIFA World Cup second\
    \ group-stage match, Italy won 3\u20132 against Brazil; Rossi scored a hat-trick\
    \ in the match that allowed Italy to progress to the semi-finals.\n\nGenerate\
    \ a single and short title for the paragraph above within 5 words.\nTitle: \n\
    ```\n\n### Generation:\n```\nHere are some possible titles generated from this\
    \ text:\n\n- \u201CItaly\u2019s greatest footballers\u201D\n- \u201CFive Italian\
    \ legends with multiple \u2018hat tricks\u2019\u201D\n- \u201CThree Italians scored\
    \ hat trick thrice - here they are!\"\n```\n\nSee! I could even use something\
    \ else that would generate a single title instead of multiple. You just need to\
    \ understand how the model works. Then you are good to go."
  created_at: 2023-05-15 05:18:37+00:00
  edited: false
  hidden: false
  id: 6461cebd805bf4012703f7a4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/11401350689b77a10d2f4d72fc216e93.svg
      fullname: Naren Babu R
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: narenzen
      type: user
    createdAt: '2023-05-15T10:21:07.000Z'
    data:
      edited: false
      editors:
      - narenzen
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/11401350689b77a10d2f4d72fc216e93.svg
          fullname: Naren Babu R
          isHf: false
          isPro: false
          name: narenzen
          type: user
        html: "<p>thanks <span data-props=\"{&quot;user&quot;:&quot;AayushShah&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/AayushShah\"\
          >@<span class=\"underline\">AayushShah</span></a></span>\n\n\t</span></span></p>\n"
        raw: thanks @AayushShah
        updatedAt: '2023-05-15T10:21:07.909Z'
      numEdits: 0
      reactions: []
    id: 64620793c7a7faf84dffcaec
    type: comment
  author: narenzen
  content: thanks @AayushShah
  created_at: 2023-05-15 09:21:07+00:00
  edited: false
  hidden: false
  id: 64620793c7a7faf84dffcaec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
      fullname: Sam Havens
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sam-mosaic
      type: user
    createdAt: '2023-05-24T00:19:29.000Z'
    data:
      edited: false
      editors:
      - sam-mosaic
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
          fullname: Sam Havens
          isHf: false
          isPro: false
          name: sam-mosaic
          type: user
        html: "<p>Thanks for the great explanation <span data-props=\"{&quot;user&quot;:&quot;AayushShah&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/AayushShah\"\
          >@<span class=\"underline\">AayushShah</span></a></span>\n\n\t</span></span>\
          \ !</p>\n"
        raw: Thanks for the great explanation @AayushShah !
        updatedAt: '2023-05-24T00:19:29.028Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - AayushShah
      relatedEventId: 646d5811e0c5e395735d2c81
    id: 646d5811e0c5e395735d2c80
    type: comment
  author: sam-mosaic
  content: Thanks for the great explanation @AayushShah !
  created_at: 2023-05-23 23:19:29+00:00
  edited: false
  hidden: false
  id: 646d5811e0c5e395735d2c80
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
      fullname: Sam Havens
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sam-mosaic
      type: user
    createdAt: '2023-05-24T00:19:29.000Z'
    data:
      status: closed
    id: 646d5811e0c5e395735d2c81
    type: status-change
  author: sam-mosaic
  created_at: 2023-05-23 23:19:29+00:00
  id: 646d5811e0c5e395735d2c81
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 15
repo_id: mosaicml/mpt-7b-instruct
repo_type: model
status: closed
target_branch: null
title: Generate shorter sentences
