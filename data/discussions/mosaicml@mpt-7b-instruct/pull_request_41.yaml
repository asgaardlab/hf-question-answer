!!python/object:huggingface_hub.community.DiscussionWithDetails
author: abhi-mosaic
conflicting_files: []
created_at: 2023-06-02 22:50:23+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-02T23:50:23.000Z'
    data:
      edited: true
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.11044929921627045
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>** Duplicate of <a href="https://huggingface.co/mosaicml/mpt-7b/discussions/47">https://huggingface.co/mosaicml/mpt-7b/discussions/47</a>
          **</p>

          <p>This PR adds updates from the LLM Foundry repo as of 06/01/2023.</p>

          <p>These include:</p>

          <ul>

          <li><code>device_map</code> support for multiple GPUs</li>

          <li>faster inference thanks to a refactor of the KV cacheing</li>

          <li>bugfix for returning the last hidden_state</li>

          <li>support for <code>output_attentions</code> when using <code>attn_impl:
          torch</code></li>

          <li>a <code>requirements.txt</code> file to make it easier to know what
          you need to install for MPT</li>

          <li>updated README instructions for fast GPU initialization</li>

          </ul>

          '
        raw: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
          **


          This PR adds updates from the LLM Foundry repo as of 06/01/2023.


          These include:


          * `device_map` support for multiple GPUs

          * faster inference thanks to a refactor of the KV cacheing

          * bugfix for returning the last hidden_state

          * support for `output_attentions` when using `attn_impl: torch`

          * a `requirements.txt` file to make it easier to know what you need to install
          for MPT

          * updated README instructions for fast GPU initialization'
        updatedAt: '2023-06-03T00:04:01.434Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - AayushShah
    id: 647a803f822b7e8ccbdc24a3
    type: comment
  author: abhi-mosaic
  content: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
    **


    This PR adds updates from the LLM Foundry repo as of 06/01/2023.


    These include:


    * `device_map` support for multiple GPUs

    * faster inference thanks to a refactor of the KV cacheing

    * bugfix for returning the last hidden_state

    * support for `output_attentions` when using `attn_impl: torch`

    * a `requirements.txt` file to make it easier to know what you need to install
    for MPT

    * updated README instructions for fast GPU initialization'
  created_at: 2023-06-02 22:50:23+00:00
  edited: true
  hidden: false
  id: 647a803f822b7e8ccbdc24a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-02T23:50:38.000Z'
    data:
      oid: 1df4d76c49e7088f68e27000e8d7290bf34be431
      parents:
      - 27ef1788015424ca98f4538e9fb8d6c6536cd5e9
      subject: wip
    id: 647a804e0000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 22:50:38+00:00
  id: 647a804e0000000000000000
  oid: 1df4d76c49e7088f68e27000e8d7290bf34be431
  summary: wip
  type: commit
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-02T23:54:11.000Z'
    data:
      oid: 82d0c1a095ae40699c7a63be8ffcec6b6b866b1a
      parents:
      - 1df4d76c49e7088f68e27000e8d7290bf34be431
      subject: update README.md
    id: 647a81230000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 22:54:11+00:00
  id: 647a81230000000000000000
  oid: 82d0c1a095ae40699c7a63be8ffcec6b6b866b1a
  summary: update README.md
  type: commit
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-02T23:54:25.000Z'
    data:
      status: open
    id: 647a8131822b7e8ccbdc45f9
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 22:54:25+00:00
  id: 647a8131822b7e8ccbdc45f9
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:00:00.000Z'
    data:
      edited: false
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.585135817527771
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>Tested with LLM Foundry with <code>python scripts/inference/hf_generate.py
          -n mosaicml/mpt-7b-instruct --revision pr/41 --device_map auto</code></p>

          '
        raw: Tested with LLM Foundry with `python scripts/inference/hf_generate.py
          -n mosaicml/mpt-7b-instruct --revision pr/41 --device_map auto`
        updatedAt: '2023-06-03T00:00:00.198Z'
      numEdits: 0
      reactions: []
      relatedEventId: 647a828042abe27747611882
    id: 647a828042abe2774761187f
    type: comment
  author: abhi-mosaic
  content: Tested with LLM Foundry with `python scripts/inference/hf_generate.py -n
    mosaicml/mpt-7b-instruct --revision pr/41 --device_map auto`
  created_at: 2023-06-02 23:00:00+00:00
  edited: false
  hidden: false
  id: 647a828042abe2774761187f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:00:00.000Z'
    data:
      status: merged
    id: 647a828042abe27747611882
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 23:00:00+00:00
  id: 647a828042abe27747611882
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: ff5f3989b2585668930aeba501e83dfb306fc78d
num: 41
repo_id: mosaicml/mpt-7b-instruct
repo_type: model
status: merged
target_branch: refs/heads/main
title: LLM Foundry Updates 06-01-2023
