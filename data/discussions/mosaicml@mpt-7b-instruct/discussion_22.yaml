!!python/object:huggingface_hub.community.DiscussionWithDetails
author: MakerMotion
conflicting_files: null
created_at: 2023-05-17 12:14:00+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2c3c52a1061c50551003517fed4eff9.svg
      fullname: 'Murat Can '
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MakerMotion
      type: user
    createdAt: '2023-05-17T13:14:00.000Z'
    data:
      edited: false
      editors:
      - MakerMotion
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2c3c52a1061c50551003517fed4eff9.svg
          fullname: 'Murat Can '
          isHf: false
          isPro: false
          name: MakerMotion
          type: user
        html: '<p>Can anyone provide a example fine-tuning notebook with custom data
          using hf transformers. Specifically I wonder if ''labels'' are shifted automatically
          like GPT2 model or how do I provide the ''labels'' to the model on training
          time.</p>

          '
        raw: Can anyone provide a example fine-tuning notebook with custom data using
          hf transformers. Specifically I wonder if 'labels' are shifted automatically
          like GPT2 model or how do I provide the 'labels' to the model on training
          time.
        updatedAt: '2023-05-17T13:14:00.078Z'
      numEdits: 0
      reactions:
      - count: 7
        reaction: "\U0001F44D"
        users:
        - gourneau
        - tjohnson
        - informationsage
        - puneet-jain159
        - zachblank
        - SamuelAzran
        - tirthajyoti
    id: 6464d31880c7f0b43bf0fb5e
    type: comment
  author: MakerMotion
  content: Can anyone provide a example fine-tuning notebook with custom data using
    hf transformers. Specifically I wonder if 'labels' are shifted automatically like
    GPT2 model or how do I provide the 'labels' to the model on training time.
  created_at: 2023-05-17 12:14:00+00:00
  edited: false
  hidden: false
  id: 6464d31880c7f0b43bf0fb5e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e27b045966c7971a609e496f2ad4c1e4.svg
      fullname: Zach Blank
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zachblank
      type: user
    createdAt: '2023-05-23T01:55:01.000Z'
    data:
      edited: false
      editors:
      - zachblank
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e27b045966c7971a609e496f2ad4c1e4.svg
          fullname: Zach Blank
          isHf: false
          isPro: false
          name: zachblank
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;MakerMotion&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/MakerMotion\"\
          >@<span class=\"underline\">MakerMotion</span></a></span>\n\n\t</span></span>\
          \ Did you find an answer to this?</p>\n"
        raw: '@MakerMotion Did you find an answer to this?'
        updatedAt: '2023-05-23T01:55:01.857Z'
      numEdits: 0
      reactions: []
    id: 646c1cf5ed22827213451e0b
    type: comment
  author: zachblank
  content: '@MakerMotion Did you find an answer to this?'
  created_at: 2023-05-23 00:55:01+00:00
  edited: false
  hidden: false
  id: 646c1cf5ed22827213451e0b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e2c3c52a1061c50551003517fed4eff9.svg
      fullname: 'Murat Can '
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MakerMotion
      type: user
    createdAt: '2023-05-23T09:21:47.000Z'
    data:
      edited: false
      editors:
      - MakerMotion
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e2c3c52a1061c50551003517fed4eff9.svg
          fullname: 'Murat Can '
          isHf: false
          isPro: false
          name: MakerMotion
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;zachblank&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/zachblank\">@<span class=\"\
          underline\">zachblank</span></a></span>\n\n\t</span></span> I think so.\
          \ Because MPT is not fully implemented on this version of HF, I took a look\
          \ at their model repo and in this file <a href=\"https://huggingface.co/mosaicml/mpt-7b-instruct/blob/main/modeling_mpt.py\"\
          >https://huggingface.co/mosaicml/mpt-7b-instruct/blob/main/modeling_mpt.py</a>\
          \  on forward() function; it seems like if you provide a labels argument\
          \ it shifts automatically. [line 244]</p>\n"
        raw: '@zachblank I think so. Because MPT is not fully implemented on this
          version of HF, I took a look at their model repo and in this file https://huggingface.co/mosaicml/mpt-7b-instruct/blob/main/modeling_mpt.py  on
          forward() function; it seems like if you provide a labels argument it shifts
          automatically. [line 244]'
        updatedAt: '2023-05-23T09:21:47.380Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - zachblank
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sam-mosaic
    id: 646c85abe30444638e0c1d66
    type: comment
  author: MakerMotion
  content: '@zachblank I think so. Because MPT is not fully implemented on this version
    of HF, I took a look at their model repo and in this file https://huggingface.co/mosaicml/mpt-7b-instruct/blob/main/modeling_mpt.py  on
    forward() function; it seems like if you provide a labels argument it shifts automatically.
    [line 244]'
  created_at: 2023-05-23 08:21:47+00:00
  edited: false
  hidden: false
  id: 646c85abe30444638e0c1d66
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e27b045966c7971a609e496f2ad4c1e4.svg
      fullname: Zach Blank
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zachblank
      type: user
    createdAt: '2023-05-23T14:33:05.000Z'
    data:
      edited: false
      editors:
      - zachblank
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e27b045966c7971a609e496f2ad4c1e4.svg
          fullname: Zach Blank
          isHf: false
          isPro: false
          name: zachblank
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;MakerMotion&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/MakerMotion\"\
          >@<span class=\"underline\">MakerMotion</span></a></span>\n\n\t</span></span>\
          \ Thanks! Do you have an example notebook you could share? I'm new at this\
          \ and still trying to wrap my head around it. Thanks!</p>\n"
        raw: '@MakerMotion Thanks! Do you have an example notebook you could share?
          I''m new at this and still trying to wrap my head around it. Thanks!'
        updatedAt: '2023-05-23T14:33:05.430Z'
      numEdits: 0
      reactions: []
    id: 646ccea1b4eefa7c3699c49e
    type: comment
  author: zachblank
  content: '@MakerMotion Thanks! Do you have an example notebook you could share?
    I''m new at this and still trying to wrap my head around it. Thanks!'
  created_at: 2023-05-23 13:33:05+00:00
  edited: false
  hidden: false
  id: 646ccea1b4eefa7c3699c49e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
      fullname: Sam Havens
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sam-mosaic
      type: user
    createdAt: '2023-05-23T21:29:31.000Z'
    data:
      edited: false
      editors:
      - sam-mosaic
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
          fullname: Sam Havens
          isHf: false
          isPro: false
          name: sam-mosaic
          type: user
        html: "<p>Yes you are correct <span data-props=\"{&quot;user&quot;:&quot;MakerMotion&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/MakerMotion\"\
          >@<span class=\"underline\">MakerMotion</span></a></span>\n\n\t</span></span>\
          \ </p>\n<p>What are you looking for in particular <span data-props=\"{&quot;user&quot;:&quot;zachblank&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/zachblank\"\
          >@<span class=\"underline\">zachblank</span></a></span>\n\n\t</span></span>\
          \ . Does this help? <a rel=\"nofollow\" href=\"https://github.com/mosaicml/llm-foundry/blob/main/scripts/train/finetune_example/README.md\"\
          >https://github.com/mosaicml/llm-foundry/blob/main/scripts/train/finetune_example/README.md</a></p>\n"
        raw: "Yes you are correct @MakerMotion \n\nWhat are you looking for in particular\
          \ @zachblank . Does this help? https://github.com/mosaicml/llm-foundry/blob/main/scripts/train/finetune_example/README.md"
        updatedAt: '2023-05-23T21:29:31.018Z'
      numEdits: 0
      reactions: []
    id: 646d303be0c5e39573577d2b
    type: comment
  author: sam-mosaic
  content: "Yes you are correct @MakerMotion \n\nWhat are you looking for in particular\
    \ @zachblank . Does this help? https://github.com/mosaicml/llm-foundry/blob/main/scripts/train/finetune_example/README.md"
  created_at: 2023-05-23 20:29:31+00:00
  edited: false
  hidden: false
  id: 646d303be0c5e39573577d2b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T01:02:12.000Z'
    data:
      edited: false
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9936800599098206
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>Closing as stale</p>

          '
        raw: Closing as stale
        updatedAt: '2023-06-03T01:02:12.680Z'
      numEdits: 0
      reactions: []
      relatedEventId: 647a9114c7367455fda3a1e7
    id: 647a9114c7367455fda3a1e4
    type: comment
  author: abhi-mosaic
  content: Closing as stale
  created_at: 2023-06-03 00:02:12+00:00
  edited: false
  hidden: false
  id: 647a9114c7367455fda3a1e4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T01:02:12.000Z'
    data:
      status: closed
    id: 647a9114c7367455fda3a1e7
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-03 00:02:12+00:00
  id: 647a9114c7367455fda3a1e7
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a8e1dfba1f19b3085d7e653f85bcdff5.svg
      fullname: TIRTHAJYOTI SARKAR
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tirthajyoti
      type: user
    createdAt: '2023-06-19T03:41:16.000Z'
    data:
      edited: false
      editors:
      - tirthajyoti
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8708389401435852
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a8e1dfba1f19b3085d7e653f85bcdff5.svg
          fullname: TIRTHAJYOTI SARKAR
          isHf: false
          isPro: false
          name: tirthajyoti
          type: user
        html: '<p>Is there a concrete Notebook example of taking the MPT-7B-Instruct
          model and fine-tuning it with an HF dataset for example <code>multi_news</code>
          dataset for news summarization?</p>

          <ul>

          <li>How to prepare the dataset/ prompt</li>

          <li>How to freeze layers and have a small number of trainable parameters
          (given that you don''t have LoRA support yet)</li>

          </ul>

          '
        raw: 'Is there a concrete Notebook example of taking the MPT-7B-Instruct model
          and fine-tuning it with an HF dataset for example `multi_news` dataset for
          news summarization?


          - How to prepare the dataset/ prompt

          - How to freeze layers and have a small number of trainable parameters (given
          that you don''t have LoRA support yet)'
        updatedAt: '2023-06-19T03:41:16.684Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - tirthajyoti
    id: 648fce5c008c2e032ecd2fe4
    type: comment
  author: tirthajyoti
  content: 'Is there a concrete Notebook example of taking the MPT-7B-Instruct model
    and fine-tuning it with an HF dataset for example `multi_news` dataset for news
    summarization?


    - How to prepare the dataset/ prompt

    - How to freeze layers and have a small number of trainable parameters (given
    that you don''t have LoRA support yet)'
  created_at: 2023-06-19 02:41:16+00:00
  edited: false
  hidden: false
  id: 648fce5c008c2e032ecd2fe4
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 22
repo_id: mosaicml/mpt-7b-instruct
repo_type: model
status: closed
target_branch: null
title: Provide fine-tuning example notebook using hf transformers
