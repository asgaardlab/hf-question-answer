!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jon-tow
conflicting_files: null
created_at: 2022-12-06 18:13:41+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665261042648-61b2bf4f5b1f7cad1799cfbb.png?w=200&h=200&f=face
      fullname: Jonathan Tow
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jon-tow
      type: user
    createdAt: '2022-12-06T18:13:41.000Z'
    data:
      edited: false
      editors:
      - jon-tow
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665261042648-61b2bf4f5b1f7cad1799cfbb.png?w=200&h=200&f=face
          fullname: Jonathan Tow
          isHf: false
          isPro: false
          name: jon-tow
          type: user
        html: "<p>The tokenizer return dict for <code>EleutherAI/pythia-1.3b-deduped</code>\
          \ contains a <code>token_type_ids</code> attribute unlike any other models\
          \ in the Pythia suite. Is this intended behavior?</p>\n<p>It leads to irregular\
          \ errors in places like <code>generate</code> calls with tracebacks such\
          \ as:</p>\n<pre><code>      5 inputs = tokenizer(text, return_tensors=\"\
          pt\")\n----&gt; 6 model.generate(**inputs)\n\n2 frames\n/usr/local/lib/python3.8/dist-packages/transformers/generation/utils.py\
          \ in _validate_model_kwargs(self, model_kwargs)\n    991 \n    992     \
          \    if unused_model_args:\n--&gt; 993             raise ValueError(\n \
          \   994                 f\"The following `model_kwargs` are not used by\
          \ the model: {unused_model_args} (note: typos in the\"\n    995        \
          \         \" generate arguments will also show up in this list)\"\n\nValueError:\
          \ The following `model_kwargs` are not used by the model: ['token_type_ids']\
          \ (note: typos in the generate arguments will also show up in this list)\n\
          </code></pre>\n<p><strong>repro</strong>: <a rel=\"nofollow\" href=\"https://colab.research.google.com/drive/1Ow_UjVEmsOKP8LBn4GGZtYv1RVNuRzx0?usp=sharing\"\
          >https://colab.research.google.com/drive/1Ow_UjVEmsOKP8LBn4GGZtYv1RVNuRzx0?usp=sharing</a></p>\n"
        raw: "The tokenizer return dict for `EleutherAI/pythia-1.3b-deduped` contains\
          \ a `token_type_ids` attribute unlike any other models in the Pythia suite.\
          \ Is this intended behavior?\r\n\r\nIt leads to irregular errors in places\
          \ like `generate` calls with tracebacks such as:\r\n\r\n```\r\n      5 inputs\
          \ = tokenizer(text, return_tensors=\"pt\")\r\n----> 6 model.generate(**inputs)\r\
          \n\r\n2 frames\r\n/usr/local/lib/python3.8/dist-packages/transformers/generation/utils.py\
          \ in _validate_model_kwargs(self, model_kwargs)\r\n    991 \r\n    992 \
          \        if unused_model_args:\r\n--> 993             raise ValueError(\r\
          \n    994                 f\"The following `model_kwargs` are not used by\
          \ the model: {unused_model_args} (note: typos in the\"\r\n    995      \
          \           \" generate arguments will also show up in this list)\"\r\n\r\
          \nValueError: The following `model_kwargs` are not used by the model: ['token_type_ids']\
          \ (note: typos in the generate arguments will also show up in this list)\r\
          \n```\r\n\r\n**repro**: https://colab.research.google.com/drive/1Ow_UjVEmsOKP8LBn4GGZtYv1RVNuRzx0?usp=sharing"
        updatedAt: '2022-12-06T18:13:41.655Z'
      numEdits: 0
      reactions: []
    id: 638f8655dd47b2ac3d715f65
    type: comment
  author: jon-tow
  content: "The tokenizer return dict for `EleutherAI/pythia-1.3b-deduped` contains\
    \ a `token_type_ids` attribute unlike any other models in the Pythia suite. Is\
    \ this intended behavior?\r\n\r\nIt leads to irregular errors in places like `generate`\
    \ calls with tracebacks such as:\r\n\r\n```\r\n      5 inputs = tokenizer(text,\
    \ return_tensors=\"pt\")\r\n----> 6 model.generate(**inputs)\r\n\r\n2 frames\r\
    \n/usr/local/lib/python3.8/dist-packages/transformers/generation/utils.py in _validate_model_kwargs(self,\
    \ model_kwargs)\r\n    991 \r\n    992         if unused_model_args:\r\n--> 993\
    \             raise ValueError(\r\n    994                 f\"The following `model_kwargs`\
    \ are not used by the model: {unused_model_args} (note: typos in the\"\r\n   \
    \ 995                 \" generate arguments will also show up in this list)\"\r\
    \n\r\nValueError: The following `model_kwargs` are not used by the model: ['token_type_ids']\
    \ (note: typos in the generate arguments will also show up in this list)\r\n```\r\
    \n\r\n**repro**: https://colab.research.google.com/drive/1Ow_UjVEmsOKP8LBn4GGZtYv1RVNuRzx0?usp=sharing"
  created_at: 2022-12-06 18:13:41+00:00
  edited: false
  hidden: false
  id: 638f8655dd47b2ac3d715f65
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665261042648-61b2bf4f5b1f7cad1799cfbb.png?w=200&h=200&f=face
      fullname: Jonathan Tow
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jon-tow
      type: user
    createdAt: '2022-12-06T18:14:05.000Z'
    data:
      from: Tokenizer output differs from `EleutherAI/pythia-1.3b-deduped`
      to: Tokenizer output differs from `EleutherAI/pythia-1.3b`
    id: 638f866d6c25af407104ac06
    type: title-change
  author: jon-tow
  created_at: 2022-12-06 18:14:05+00:00
  id: 638f866d6c25af407104ac06
  new_title: Tokenizer output differs from `EleutherAI/pythia-1.3b`
  old_title: Tokenizer output differs from `EleutherAI/pythia-1.3b-deduped`
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60347d3660e3dd96631c9093/B3fuZer5N04tZIAYrLnz4.jpeg?w=200&h=200&f=face
      fullname: Stella Biderman
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: stellaathena
      type: user
    createdAt: '2022-12-08T01:36:05.000Z'
    data:
      edited: false
      editors:
      - stellaathena
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/60347d3660e3dd96631c9093/B3fuZer5N04tZIAYrLnz4.jpeg?w=200&h=200&f=face
          fullname: Stella Biderman
          isHf: false
          isPro: false
          name: stellaathena
          type: user
        html: "<p>This is surprising to me. <span data-props=\"{&quot;user&quot;:&quot;hails&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/hails\"\
          >@<span class=\"underline\">hails</span></a></span>\n\n\t</span></span>,\
          \ are you aware of this?</p>\n"
        raw: This is surprising to me. @hails, are you aware of this?
        updatedAt: '2022-12-08T01:36:05.650Z'
      numEdits: 0
      reactions: []
    id: 63913f852e1b430e96cdf9b7
    type: comment
  author: stellaathena
  content: This is surprising to me. @hails, are you aware of this?
  created_at: 2022-12-08 01:36:05+00:00
  edited: false
  hidden: false
  id: 63913f852e1b430e96cdf9b7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1669665010552-62895a0215aeee85756062c4.jpeg?w=200&h=200&f=face
      fullname: Hailey Schoelkopf
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: hails
      type: user
    createdAt: '2022-12-08T01:46:14.000Z'
    data:
      edited: false
      editors:
      - hails
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1669665010552-62895a0215aeee85756062c4.jpeg?w=200&h=200&f=face
          fullname: Hailey Schoelkopf
          isHf: false
          isPro: false
          name: hails
          type: user
        html: '<p>That''s very strange, I don''t know what''s up with this! Looking
          at it I see that this model hasn''t had the <code>special_tokens_map.json</code>
          file filled out, so I must have not pushed the GPT-NeoX-20b tokenizer (just
          the NeoX tokenizer from the json file we have internally, which doesn''t
          keep all this info like special tokens for some reason when you save it
          as a <code>PretrainedTokenizer</code>). Will push the additional files when
          I add the rest of the checkpoints tmrw!</p>

          <p>There have been a couple weird behaviors with the tokenizer saving/uploading
          from JSON files/from HF. <code>merges.txt</code> also wasn''t added to any
          of these repos, though it exists for NeoX-20b''s tokenizer.</p>

          <p>If the <code>pythia-1.3b</code> model doesn''t give this error, then
          the above will fix it!</p>

          '
        raw: 'That''s very strange, I don''t know what''s up with this! Looking at
          it I see that this model hasn''t had the `special_tokens_map.json` file
          filled out, so I must have not pushed the GPT-NeoX-20b tokenizer (just the
          NeoX tokenizer from the json file we have internally, which doesn''t keep
          all this info like special tokens for some reason when you save it as a
          `PretrainedTokenizer`). Will push the additional files when I add the rest
          of the checkpoints tmrw!


          There have been a couple weird behaviors with the tokenizer saving/uploading
          from JSON files/from HF. `merges.txt` also wasn''t added to any of these
          repos, though it exists for NeoX-20b''s tokenizer.


          If the `pythia-1.3b` model doesn''t give this error, then the above will
          fix it!'
        updatedAt: '2022-12-08T01:46:14.382Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - jon-tow
    id: 639141e60cf6b11c487d3c46
    type: comment
  author: hails
  content: 'That''s very strange, I don''t know what''s up with this! Looking at it
    I see that this model hasn''t had the `special_tokens_map.json` file filled out,
    so I must have not pushed the GPT-NeoX-20b tokenizer (just the NeoX tokenizer
    from the json file we have internally, which doesn''t keep all this info like
    special tokens for some reason when you save it as a `PretrainedTokenizer`). Will
    push the additional files when I add the rest of the checkpoints tmrw!


    There have been a couple weird behaviors with the tokenizer saving/uploading from
    JSON files/from HF. `merges.txt` also wasn''t added to any of these repos, though
    it exists for NeoX-20b''s tokenizer.


    If the `pythia-1.3b` model doesn''t give this error, then the above will fix it!'
  created_at: 2022-12-08 01:46:14+00:00
  edited: false
  hidden: false
  id: 639141e60cf6b11c487d3c46
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1669665010552-62895a0215aeee85756062c4.jpeg?w=200&h=200&f=face
      fullname: Hailey Schoelkopf
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: hails
      type: user
    createdAt: '2022-12-13T16:43:26.000Z'
    data:
      edited: false
      editors:
      - hails
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1669665010552-62895a0215aeee85756062c4.jpeg?w=200&h=200&f=face
          fullname: Hailey Schoelkopf
          isHf: false
          isPro: false
          name: hails
          type: user
        html: '<p>Resolved!</p>

          '
        raw: Resolved!
        updatedAt: '2022-12-13T16:43:26.812Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6398abae0eda569799c1b8f0
    id: 6398abae0eda569799c1b8ef
    type: comment
  author: hails
  content: Resolved!
  created_at: 2022-12-13 16:43:26+00:00
  edited: false
  hidden: false
  id: 6398abae0eda569799c1b8ef
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1669665010552-62895a0215aeee85756062c4.jpeg?w=200&h=200&f=face
      fullname: Hailey Schoelkopf
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: hails
      type: user
    createdAt: '2022-12-13T16:43:26.000Z'
    data:
      status: closed
    id: 6398abae0eda569799c1b8f0
    type: status-change
  author: hails
  created_at: 2022-12-13 16:43:26+00:00
  id: 6398abae0eda569799c1b8f0
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: EleutherAI/pythia-1.4b-deduped-v0
repo_type: model
status: closed
target_branch: null
title: Tokenizer output differs from `EleutherAI/pythia-1.3b`
