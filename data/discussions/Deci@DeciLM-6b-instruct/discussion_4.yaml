!!python/object:huggingface_hub.community.DiscussionWithDetails
author: michael-newsrx-com
conflicting_files: null
created_at: 2023-09-20 18:48:56+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2fd7bd23254678f7f46ecff823fff1ce.svg
      fullname: Michael Conrad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: michael-newsrx-com
      type: user
    createdAt: '2023-09-20T19:48:56.000Z'
    data:
      edited: true
      editors:
      - michael-newsrx-com
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7968440055847168
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2fd7bd23254678f7f46ecff823fff1ce.svg
          fullname: Michael Conrad
          isHf: false
          isPro: false
          name: michael-newsrx-com
          type: user
        html: '<p>When calling pipeline with a batch_size &gt; 1 the process fails
          with:</p>

          <pre><code>ValueError: For support of custom attention masks please set
          naive_attention_prefill to True in the config

          </code></pre>

          <p>Everything works fine with a batch_size=1 or batch_size not specified.</p>

          <p>Is there a padding setting for the tokenizer/model that needs to be set?</p>

          '
        raw: 'When calling pipeline with a batch_size > 1 the process fails with:


          ```

          ValueError: For support of custom attention masks please set naive_attention_prefill
          to True in the config

          ```


          Everything works fine with a batch_size=1 or batch_size not specified.


          Is there a padding setting for the tokenizer/model that needs to be set?'
        updatedAt: '2023-09-20T19:49:32.965Z'
      numEdits: 1
      reactions: []
    id: 650b4ca80f4a84a5db44ca19
    type: comment
  author: michael-newsrx-com
  content: 'When calling pipeline with a batch_size > 1 the process fails with:


    ```

    ValueError: For support of custom attention masks please set naive_attention_prefill
    to True in the config

    ```


    Everything works fine with a batch_size=1 or batch_size not specified.


    Is there a padding setting for the tokenizer/model that needs to be set?'
  created_at: 2023-09-20 18:48:56+00:00
  edited: true
  hidden: false
  id: 650b4ca80f4a84a5db44ca19
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: Deci/DeciLM-6b-instruct
repo_type: model
status: open
target_branch: null
title: pipeline("text-generation") + batch_size > 1 results in `For support of custom
  attention masks`...
