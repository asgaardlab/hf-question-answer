!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Alfred-Duncan
conflicting_files: null
created_at: 2022-11-03 11:07:06+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/241fe5abaaca3662465b671fe8de916d.svg
      fullname: Alfred-Duncan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Alfred-Duncan
      type: user
    createdAt: '2022-11-03T12:07:06.000Z'
    data:
      edited: false
      editors:
      - Alfred-Duncan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/241fe5abaaca3662465b671fe8de916d.svg
          fullname: Alfred-Duncan
          isHf: false
          isPro: false
          name: Alfred-Duncan
          type: user
        html: '<p>Really gooood job,but i wanna kown how to make whole of it to SD
          ckpt,that i can use it in the auto1 webui.......tks</p>

          '
        raw: Really gooood job,but i wanna kown how to make whole of it to SD ckpt,that
          i can use it in the auto1 webui.......tks
        updatedAt: '2022-11-03T12:07:06.607Z'
      numEdits: 0
      reactions: []
    id: 6363aeea5a8b39563ac6c9dc
    type: comment
  author: Alfred-Duncan
  content: Really gooood job,but i wanna kown how to make whole of it to SD ckpt,that
    i can use it in the auto1 webui.......tks
  created_at: 2022-11-03 11:07:06+00:00
  edited: false
  hidden: false
  id: 6363aeea5a8b39563ac6c9dc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/241fe5abaaca3662465b671fe8de916d.svg
      fullname: Alfred-Duncan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Alfred-Duncan
      type: user
    createdAt: '2022-11-03T12:18:34.000Z'
    data:
      edited: false
      editors:
      - Alfred-Duncan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/241fe5abaaca3662465b671fe8de916d.svg
          fullname: Alfred-Duncan
          isHf: false
          isPro: false
          name: Alfred-Duncan
          type: user
        html: '<p>I use the<br>"<a rel="nofollow" href="https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py&quot;">https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py"</a><br>such
          like this<br>"python convert_diffusers_to_original_stable_diffusion.py --model_path
          \Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path \Taiyi-Stable-Diffusion-1B-Chinese-v0.1\model.ckpt"<br>And
          I get a ckpt, but when I using it in my auto111 webui,I get a error like
          this:</p>

          <p>raise RuntimeError(''Error(s) in loading state_dict for {}:\n\t{}''.format(<br>RuntimeError:
          Error(s) in loading state_dict for LatentDiffusion:<br>        size mismatch
          for cond_stage_model.transformer.text_model.embeddings.position_ids: copying
          a param with shape torch.Size([1, 512]) from checkpoint, the shape in current
          model is torch.Size([1, 77]).</p>

          <p>I can know a little reason about it,but I dont''s know how to deal it...</p>

          '
        raw: "I use the \n\"https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py\"\
          \nsuch like this\n\"python convert_diffusers_to_original_stable_diffusion.py\
          \ --model_path \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path\
          \ \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1\\model.ckpt\"\nAnd I get a ckpt,\
          \ but when I using it in my auto111 webui,I get a error like this:\n\nraise\
          \ RuntimeError('Error(s) in loading state_dict for {}:\\n\\t{}'.format(\n\
          RuntimeError: Error(s) in loading state_dict for LatentDiffusion:\n    \
          \    size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
          \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape\
          \ in current model is torch.Size([1, 77]).\n\nI can know a little reason\
          \ about it,but I dont's know how to deal it..."
        updatedAt: '2022-11-03T12:18:34.879Z'
      numEdits: 0
      reactions: []
    id: 6363b19a0b978eb296ea0b84
    type: comment
  author: Alfred-Duncan
  content: "I use the \n\"https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py\"\
    \nsuch like this\n\"python convert_diffusers_to_original_stable_diffusion.py --model_path\
    \ \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1\\\
    model.ckpt\"\nAnd I get a ckpt, but when I using it in my auto111 webui,I get\
    \ a error like this:\n\nraise RuntimeError('Error(s) in loading state_dict for\
    \ {}:\\n\\t{}'.format(\nRuntimeError: Error(s) in loading state_dict for LatentDiffusion:\n\
    \        size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
    \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape in\
    \ current model is torch.Size([1, 77]).\n\nI can know a little reason about it,but\
    \ I dont's know how to deal it..."
  created_at: 2022-11-03 11:18:34+00:00
  edited: false
  hidden: false
  id: 6363b19a0b978eb296ea0b84
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
      fullname: ganruyi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: roygan
      type: user
    createdAt: '2022-11-03T13:21:27.000Z'
    data:
      edited: false
      editors:
      - roygan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
          fullname: ganruyi
          isHf: false
          isPro: false
          name: roygan
          type: user
        html: '<p>It looks like the text encoder seq length is not match, I will try
          it.</p>

          '
        raw: It looks like the text encoder seq length is not match, I will try it.
        updatedAt: '2022-11-03T13:21:27.305Z'
      numEdits: 0
      reactions: []
    id: 6363c057287b5ce02ed234e4
    type: comment
  author: roygan
  content: It looks like the text encoder seq length is not match, I will try it.
  created_at: 2022-11-03 12:21:27+00:00
  edited: false
  hidden: false
  id: 6363c057287b5ce02ed234e4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62a7fc03ac97233f161c2433/CO3JDQVBZCnQxsgmnQHc1.jpeg?w=200&h=200&f=face
      fullname: weifeng
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: wf-genius
      type: user
    createdAt: '2022-11-03T14:03:28.000Z'
    data:
      edited: false
      editors:
      - wf-genius
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62a7fc03ac97233f161c2433/CO3JDQVBZCnQxsgmnQHc1.jpeg?w=200&h=200&f=face
          fullname: weifeng
          isHf: false
          isPro: false
          name: wf-genius
          type: user
        html: '<blockquote>

          <p>I use the<br>"<a rel="nofollow" href="https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py&quot;">https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py"</a><br>such
          like this<br>"python convert_diffusers_to_original_stable_diffusion.py --model_path
          \Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path \Taiyi-Stable-Diffusion-1B-Chinese-v0.1\model.ckpt"<br>And
          I get a ckpt, but when I using it in my auto111 webui,I get a error like
          this:</p>

          <p>raise RuntimeError(''Error(s) in loading state_dict for {}:\n\t{}''.format(<br>RuntimeError:
          Error(s) in loading state_dict for LatentDiffusion:<br>        size mismatch
          for cond_stage_model.transformer.text_model.embeddings.position_ids: copying
          a param with shape torch.Size([1, 512]) from checkpoint, the shape in current
          model is torch.Size([1, 77]).</p>

          <p>I can know a little reason about it,but I dont''s know how to deal it...</p>

          </blockquote>

          <p>The text model is a roberta, not the same as CLIPTextModel. So you can
          not convert it directly.<br>Maybe a fast way to deal with it is to change
          the way of model loading of the WebUI. We will try it later, It would be
          good it you can try it and contribute to the open source community.</p>

          '
        raw: "> I use the \n> \"https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py\"\
          \n> such like this\n> \"python convert_diffusers_to_original_stable_diffusion.py\
          \ --model_path \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path\
          \ \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1\\model.ckpt\"\n> And I get a\
          \ ckpt, but when I using it in my auto111 webui,I get a error like this:\n\
          > \n> raise RuntimeError('Error(s) in loading state_dict for {}:\\n\\t{}'.format(\n\
          > RuntimeError: Error(s) in loading state_dict for LatentDiffusion:\n> \
          \        size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
          \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape\
          \ in current model is torch.Size([1, 77]).\n> \n> I can know a little reason\
          \ about it,but I dont's know how to deal it...\n\nThe text model is a roberta,\
          \ not the same as CLIPTextModel. So you can not convert it directly.  \n\
          Maybe a fast way to deal with it is to change the way of model loading of\
          \ the WebUI. We will try it later, It would be good it you can try it and\
          \ contribute to the open source community."
        updatedAt: '2022-11-03T14:03:28.270Z'
      numEdits: 0
      reactions: []
    id: 6363ca300b978eb296eafe57
    type: comment
  author: wf-genius
  content: "> I use the \n> \"https://github.com/huggingface/diffusers/tree/main/scripts/convert_diffusers_to_original_stable_diffusion.py\"\
    \n> such like this\n> \"python convert_diffusers_to_original_stable_diffusion.py\
    \ --model_path \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1 --checkpoint_path \\Taiyi-Stable-Diffusion-1B-Chinese-v0.1\\\
    model.ckpt\"\n> And I get a ckpt, but when I using it in my auto111 webui,I get\
    \ a error like this:\n> \n> raise RuntimeError('Error(s) in loading state_dict\
    \ for {}:\\n\\t{}'.format(\n> RuntimeError: Error(s) in loading state_dict for\
    \ LatentDiffusion:\n>         size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
    \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape in\
    \ current model is torch.Size([1, 77]).\n> \n> I can know a little reason about\
    \ it,but I dont's know how to deal it...\n\nThe text model is a roberta, not the\
    \ same as CLIPTextModel. So you can not convert it directly.  \nMaybe a fast way\
    \ to deal with it is to change the way of model loading of the WebUI. We will\
    \ try it later, It would be good it you can try it and contribute to the open\
    \ source community."
  created_at: 2022-11-03 13:03:28+00:00
  edited: false
  hidden: false
  id: 6363ca300b978eb296eafe57
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/00934c0f8a6477a53630adcdb4f8f3e1.svg
      fullname: lastpanda
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lastpanda
      type: user
    createdAt: '2022-11-05T11:33:56.000Z'
    data:
      edited: false
      editors:
      - lastpanda
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/00934c0f8a6477a53630adcdb4f8f3e1.svg
          fullname: lastpanda
          isHf: false
          isPro: false
          name: lastpanda
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;wf-genius&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/wf-genius\">@<span class=\"\
          underline\">wf-genius</span></a></span>\n\n\t</span></span>  any good  news\
          \ for WebUI,thanks</p>\n"
        raw: '@wf-genius  any good  news for WebUI,thanks'
        updatedAt: '2022-11-05T11:33:56.387Z'
      numEdits: 0
      reactions: []
    id: 63664a24a2abcdf2fd640000
    type: comment
  author: lastpanda
  content: '@wf-genius  any good  news for WebUI,thanks'
  created_at: 2022-11-05 10:33:56+00:00
  edited: false
  hidden: false
  id: 63664a24a2abcdf2fd640000
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1664348687884-noauth.jpeg?w=200&h=200&f=face
      fullname: Michael Jiao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jkyeah
      type: user
    createdAt: '2022-11-07T04:14:17.000Z'
    data:
      edited: false
      editors:
      - jkyeah
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1664348687884-noauth.jpeg?w=200&h=200&f=face
          fullname: Michael Jiao
          isHf: false
          isPro: false
          name: jkyeah
          type: user
        html: "<p>\u540C\u95EE\uFF1A\u5982\u4F55\u5E94\u7528\u5728AUTOMATIC1111 webui\u4E0A\
          \uFF1F\u8C22\u8C22</p>\n"
        raw: "\u540C\u95EE\uFF1A\u5982\u4F55\u5E94\u7528\u5728AUTOMATIC1111 webui\u4E0A\
          \uFF1F\u8C22\u8C22"
        updatedAt: '2022-11-07T04:14:17.907Z'
      numEdits: 0
      reactions: []
    id: 6368861944e19ccad21664fb
    type: comment
  author: jkyeah
  content: "\u540C\u95EE\uFF1A\u5982\u4F55\u5E94\u7528\u5728AUTOMATIC1111 webui\u4E0A\
    \uFF1F\u8C22\u8C22"
  created_at: 2022-11-07 04:14:17+00:00
  edited: false
  hidden: false
  id: 6368861944e19ccad21664fb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
      fullname: ganruyi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: roygan
      type: user
    createdAt: '2022-11-07T05:02:57.000Z'
    data:
      edited: false
      editors:
      - roygan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
          fullname: ganruyi
          isHf: false
          isPro: false
          name: roygan
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;jkyeah&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/jkyeah\">@<span class=\"\
          underline\">jkyeah</span></a></span>\n\n\t</span></span> <span data-props=\"\
          {&quot;user&quot;:&quot;lastpanda&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/lastpanda\">@<span class=\"underline\">lastpanda</span></a></span>\n\
          \n\t</span></span> <span data-props=\"{&quot;user&quot;:&quot;Alfred-Duncan&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Alfred-Duncan\"\
          >@<span class=\"underline\">Alfred-Duncan</span></a></span>\n\n\t</span></span>\
          \ you can refer to <a rel=\"nofollow\" href=\"https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186\"\
          >https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186</a></p>\n"
        raw: '@jkyeah @lastpanda @Alfred-Duncan you can refer to https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186'
        updatedAt: '2022-11-07T05:02:57.838Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\U0001F44D"
        users:
        - wf-genius
        - Alfred-Duncan
        - jkyeah
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - lastpanda
    id: 636891814e7a848a1890426f
    type: comment
  author: roygan
  content: '@jkyeah @lastpanda @Alfred-Duncan you can refer to https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186'
  created_at: 2022-11-07 05:02:57+00:00
  edited: false
  hidden: false
  id: 636891814e7a848a1890426f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1664348687884-noauth.jpeg?w=200&h=200&f=face
      fullname: Michael Jiao
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jkyeah
      type: user
    createdAt: '2022-11-16T03:07:49.000Z'
    data:
      edited: false
      editors:
      - jkyeah
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1664348687884-noauth.jpeg?w=200&h=200&f=face
          fullname: Michael Jiao
          isHf: false
          isPro: false
          name: jkyeah
          type: user
        html: "<blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;jkyeah&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/jkyeah\"\
          >@<span class=\"underline\">jkyeah</span></a></span>\n\n\t</span></span>\
          \ <span data-props=\"{&quot;user&quot;:&quot;lastpanda&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lastpanda\">@<span class=\"\
          underline\">lastpanda</span></a></span>\n\n\t</span></span> <span data-props=\"\
          {&quot;user&quot;:&quot;Alfred-Duncan&quot;}\" data-target=\"UserMention\"\
          \ class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"\
          ><span class=\"contents\"><a href=\"/Alfred-Duncan\">@<span class=\"underline\"\
          >Alfred-Duncan</span></a></span>\n\n\t</span></span> you can refer to <a\
          \ rel=\"nofollow\" href=\"https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186\"\
          >https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186</a></p>\n</blockquote>\n\
          <p>\u592A\u597D\u4E86\uFF0C\u975E\u5E38\u611F\u8C22</p>\n"
        raw: "> @jkyeah @lastpanda @Alfred-Duncan you can refer to https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186\n\
          \n\u592A\u597D\u4E86\uFF0C\u975E\u5E38\u611F\u8C22"
        updatedAt: '2022-11-16T03:07:49.533Z'
      numEdits: 0
      reactions: []
    id: 637454053e965003688cd585
    type: comment
  author: jkyeah
  content: "> @jkyeah @lastpanda @Alfred-Duncan you can refer to https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186\n\
    \n\u592A\u597D\u4E86\uFF0C\u975E\u5E38\u611F\u8C22"
  created_at: 2022-11-16 03:07:49+00:00
  edited: false
  hidden: false
  id: 637454053e965003688cd585
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
      fullname: ganruyi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: roygan
      type: user
    createdAt: '2022-11-16T06:08:54.000Z'
    data:
      status: closed
    id: 63747e760938c0754240fc19
    type: status-change
  author: roygan
  created_at: 2022-11-16 06:08:54+00:00
  id: 63747e760938c0754240fc19
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-v0.1
repo_type: model
status: closed
target_branch: null
title: can u plz make it to ckpt that  can used in auto1
