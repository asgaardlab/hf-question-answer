!!python/object:huggingface_hub.community.DiscussionWithDetails
author: piespe
conflicting_files: null
created_at: 2022-11-08 12:56:21+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667834963604-63655761e7a78348d81f002b.png?w=200&h=200&f=face
      fullname: Pietro Speroni di Fenizio
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: piespe
      type: user
    createdAt: '2022-11-08T12:56:21.000Z'
    data:
      edited: false
      editors:
      - piespe
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667834963604-63655761e7a78348d81f002b.png?w=200&h=200&f=face
          fullname: Pietro Speroni di Fenizio
          isHf: false
          isPro: false
          name: piespe
          type: user
        html: '<p>I got this error:<br>Loading weights [e2e75020] from D:\stable diffusion\stable-diffusion-webui\models\Stable-diffusion\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt<br>Traceback
          (most recent call last):<br>  File "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\gradio\routes.py",
          line 284, in run_predict<br>    output = await app.blocks.process_api(<br>  File
          "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\gradio\blocks.py",
          line 982, in process_api<br>    result = await self.call_function(fn_index,
          inputs, iterator)<br>  File "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\gradio\blocks.py",
          line 824, in call_function<br>    prediction = await anyio.to_thread.run_sync(<br>  File
          "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\anyio\to_thread.py",
          line 31, in run_sync<br>    return await get_asynclib().run_sync_in_worker_thread(<br>  File
          "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\anyio_backends_asyncio.py",
          line 937, in run_sync_in_worker_thread<br>    return await future<br>  File
          "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\anyio_backends_asyncio.py",
          line 867, in run    result = context.run(func, *args)<br>  File "D:\stable
          diffusion\stable-diffusion-webui\modules\ui.py", line 1640, in <br>    fn=lambda
          value, k=k: run_settings_single(value, key=k),<br>  File "D:\stable diffusion\stable-diffusion-webui\modules\ui.py",
          line 1482, in run_settings_single<br>    opts.data_labels[key].onchange()<br>  File
          "D:\stable diffusion\stable-diffusion-webui\webui.py", line 41, in f<br>    res
          = func(*args, **kwargs)<br>  File "D:\stable diffusion\stable-diffusion-webui\webui.py",
          line 83, in <br>    shared.opts.onchange("sd_model_checkpoint", wrap_queued_call(lambda:
          modules.sd_models.reload_model_weights()))<br>  File "D:\stable diffusion\stable-diffusion-webui\modules\sd_models.py",
          line 288, in reload_model_weights<br>    load_model_weights(sd_model, checkpoint_info)<br>  File
          "D:\stable diffusion\stable-diffusion-webui\modules\sd_models.py", line
          181, in load_model_weights<br>    model.load_state_dict(sd, strict=False)<br>  File
          "D:\stable diffusion\stable-diffusion-webui\venv\lib\site-packages\torch\nn\modules\module.py",
          line 1604, in load_state_dict<br>    raise RuntimeError(''Error(s) in loading
          state_dict for {}:\n\t{}''.format(<br>RuntimeError: Error(s) in loading
          state_dict for LatentDiffusion:<br>        size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:
          copying a param with shape torch.Size([1, 512]) from checkpoint, the shape
          in current model is torch.Size([1, 77]).</p>

          <p>I am not sure why.</p>

          '
        raw: "I got this error:\r\nLoading weights [e2e75020] from D:\\stable diffusion\\\
          stable-diffusion-webui\\models\\Stable-diffusion\\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt\r\
          \nTraceback (most recent call last):\r\n  File \"D:\\stable diffusion\\\
          stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\routes.py\", line\
          \ 284, in run_predict\r\n    output = await app.blocks.process_api(\r\n\
          \  File \"D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\\
          gradio\\blocks.py\", line 982, in process_api\r\n    result = await self.call_function(fn_index,\
          \ inputs, iterator)\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
          venv\\lib\\site-packages\\gradio\\blocks.py\", line 824, in call_function\r\
          \n    prediction = await anyio.to_thread.run_sync(\r\n  File \"D:\\stable\
          \ diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\anyio\\to_thread.py\"\
          , line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\
          \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\\
          anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\
          \n    return await future\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
          venv\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in\
          \ run    result = context.run(func, *args)\r\n  File \"D:\\stable diffusion\\\
          stable-diffusion-webui\\modules\\ui.py\", line 1640, in <lambda>\r\n   \
          \ fn=lambda value, k=k: run_settings_single(value, key=k),\r\n  File \"\
          D:\\stable diffusion\\stable-diffusion-webui\\modules\\ui.py\", line 1482,\
          \ in run_settings_single\r\n    opts.data_labels[key].onchange()\r\n  File\
          \ \"D:\\stable diffusion\\stable-diffusion-webui\\webui.py\", line 41, in\
          \ f\r\n    res = func(*args, **kwargs)\r\n  File \"D:\\stable diffusion\\\
          stable-diffusion-webui\\webui.py\", line 83, in <lambda>\r\n    shared.opts.onchange(\"\
          sd_model_checkpoint\", wrap_queued_call(lambda: modules.sd_models.reload_model_weights()))\r\
          \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\modules\\sd_models.py\"\
          , line 288, in reload_model_weights\r\n    load_model_weights(sd_model,\
          \ checkpoint_info)\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
          modules\\sd_models.py\", line 181, in load_model_weights\r\n    model.load_state_dict(sd,\
          \ strict=False)\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
          venv\\lib\\site-packages\\torch\\nn\\modules\\module.py\", line 1604, in\
          \ load_state_dict\r\n    raise RuntimeError('Error(s) in loading state_dict\
          \ for {}:\\n\\t{}'.format(\r\nRuntimeError: Error(s) in loading state_dict\
          \ for LatentDiffusion:\r\n        size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
          \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape\
          \ in current model is torch.Size([1, 77]).\r\n\r\nI am not sure why."
        updatedAt: '2022-11-08T12:56:21.725Z'
      numEdits: 0
      reactions: []
    id: 636a51f58d250800ca70699a
    type: comment
  author: piespe
  content: "I got this error:\r\nLoading weights [e2e75020] from D:\\stable diffusion\\\
    stable-diffusion-webui\\models\\Stable-diffusion\\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt\r\
    \nTraceback (most recent call last):\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
    venv\\lib\\site-packages\\gradio\\routes.py\", line 284, in run_predict\r\n  \
    \  output = await app.blocks.process_api(\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
    venv\\lib\\site-packages\\gradio\\blocks.py\", line 982, in process_api\r\n  \
    \  result = await self.call_function(fn_index, inputs, iterator)\r\n  File \"\
    D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\gradio\\\
    blocks.py\", line 824, in call_function\r\n    prediction = await anyio.to_thread.run_sync(\r\
    \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\\
    anyio\\to_thread.py\", line 31, in run_sync\r\n    return await get_asynclib().run_sync_in_worker_thread(\r\
    \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\\
    anyio\\_backends\\_asyncio.py\", line 937, in run_sync_in_worker_thread\r\n  \
    \  return await future\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
    venv\\lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 867, in run  \
    \  result = context.run(func, *args)\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
    modules\\ui.py\", line 1640, in <lambda>\r\n    fn=lambda value, k=k: run_settings_single(value,\
    \ key=k),\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\modules\\\
    ui.py\", line 1482, in run_settings_single\r\n    opts.data_labels[key].onchange()\r\
    \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\webui.py\", line 41,\
    \ in f\r\n    res = func(*args, **kwargs)\r\n  File \"D:\\stable diffusion\\stable-diffusion-webui\\\
    webui.py\", line 83, in <lambda>\r\n    shared.opts.onchange(\"sd_model_checkpoint\"\
    , wrap_queued_call(lambda: modules.sd_models.reload_model_weights()))\r\n  File\
    \ \"D:\\stable diffusion\\stable-diffusion-webui\\modules\\sd_models.py\", line\
    \ 288, in reload_model_weights\r\n    load_model_weights(sd_model, checkpoint_info)\r\
    \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\modules\\sd_models.py\"\
    , line 181, in load_model_weights\r\n    model.load_state_dict(sd, strict=False)\r\
    \n  File \"D:\\stable diffusion\\stable-diffusion-webui\\venv\\lib\\site-packages\\\
    torch\\nn\\modules\\module.py\", line 1604, in load_state_dict\r\n    raise RuntimeError('Error(s)\
    \ in loading state_dict for {}:\\n\\t{}'.format(\r\nRuntimeError: Error(s) in\
    \ loading state_dict for LatentDiffusion:\r\n        size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
    \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape in\
    \ current model is torch.Size([1, 77]).\r\n\r\nI am not sure why."
  created_at: 2022-11-08 12:56:21+00:00
  edited: false
  hidden: false
  id: 636a51f58d250800ca70699a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
      fullname: ganruyi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: roygan
      type: user
    createdAt: '2022-11-08T14:58:54.000Z'
    data:
      edited: false
      editors:
      - roygan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
          fullname: ganruyi
          isHf: false
          isPro: false
          name: roygan
          type: user
        html: '<p>you can refer <a rel="nofollow" href="https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186">https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186</a></p>

          '
        raw: you can refer https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186
        updatedAt: '2022-11-08T14:58:54.905Z'
      numEdits: 0
      reactions: []
    id: 636a6eae0d7b46535de14c42
    type: comment
  author: roygan
  content: you can refer https://github.com/IDEA-CCNL/Fengshenbang-LM/issues/186
  created_at: 2022-11-08 14:58:54+00:00
  edited: false
  hidden: false
  id: 636a6eae0d7b46535de14c42
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667834963604-63655761e7a78348d81f002b.png?w=200&h=200&f=face
      fullname: Pietro Speroni di Fenizio
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: piespe
      type: user
    createdAt: '2022-11-09T08:25:50.000Z'
    data:
      edited: false
      editors:
      - piespe
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667834963604-63655761e7a78348d81f002b.png?w=200&h=200&f=face
          fullname: Pietro Speroni di Fenizio
          isHf: false
          isPro: false
          name: piespe
          type: user
        html: '<p>Thank you very much. Let me get this right, the problem is that
          this model works in chinese (language) and not just with chinese (images).
          And webui does not handle the chinese language correctly? So a person must
          re-install the whole system. I shall probably wait then. Especially since
          I do not, unfortunately, speak Chinese. It would be great if there was a
          version of this model in English.</p>

          '
        raw: Thank you very much. Let me get this right, the problem is that this
          model works in chinese (language) and not just with chinese (images). And
          webui does not handle the chinese language correctly? So a person must re-install
          the whole system. I shall probably wait then. Especially since I do not,
          unfortunately, speak Chinese. It would be great if there was a version of
          this model in English.
        updatedAt: '2022-11-09T08:25:50.715Z'
      numEdits: 0
      reactions: []
    id: 636b640ed524b220830eea06
    type: comment
  author: piespe
  content: Thank you very much. Let me get this right, the problem is that this model
    works in chinese (language) and not just with chinese (images). And webui does
    not handle the chinese language correctly? So a person must re-install the whole
    system. I shall probably wait then. Especially since I do not, unfortunately,
    speak Chinese. It would be great if there was a version of this model in English.
  created_at: 2022-11-09 08:25:50+00:00
  edited: false
  hidden: false
  id: 636b640ed524b220830eea06
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
      fullname: ganruyi
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: roygan
      type: user
    createdAt: '2022-11-11T10:37:26.000Z'
    data:
      edited: false
      editors:
      - roygan
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1637806723246-612300897d70fa0063f38731.jpeg?w=200&h=200&f=face
          fullname: ganruyi
          isHf: false
          isPro: false
          name: roygan
          type: user
        html: '<blockquote>

          <p>Thank you very much. Let me get this right, the problem is that this
          model works in chinese (language) and not just with chinese (images). And
          webui does not handle the chinese language correctly? So a person must re-install
          the whole system. I shall probably wait then. Especially since I do not,
          unfortunately, speak Chinese. It would be great if there was a version of
          this model in English.</p>

          </blockquote>

          <p>If you have problem with webui, you can refer to <a rel="nofollow" href="https://github.com/IDEA-CCNL/stable-diffusion-webui/blob/master/README.md">https://github.com/IDEA-CCNL/stable-diffusion-webui/blob/master/README.md</a>.<br>If
          you need a model in english, you can refer to our english&amp;chinese model
          IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-EN-v0.1</p>

          '
        raw: "> Thank you very much. Let me get this right, the problem is that this\
          \ model works in chinese (language) and not just with chinese (images).\
          \ And webui does not handle the chinese language correctly? So a person\
          \ must re-install the whole system. I shall probably wait then. Especially\
          \ since I do not, unfortunately, speak Chinese. It would be great if there\
          \ was a version of this model in English.\n\nIf you have problem with webui,\
          \ you can refer to https://github.com/IDEA-CCNL/stable-diffusion-webui/blob/master/README.md.\
          \ \nIf you need a model in english, you can refer to our english&chinese\
          \ model IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-EN-v0.1"
        updatedAt: '2022-11-11T10:37:26.581Z'
      numEdits: 0
      reactions: []
    id: 636e25e69b61600b6298b6e5
    type: comment
  author: roygan
  content: "> Thank you very much. Let me get this right, the problem is that this\
    \ model works in chinese (language) and not just with chinese (images). And webui\
    \ does not handle the chinese language correctly? So a person must re-install\
    \ the whole system. I shall probably wait then. Especially since I do not, unfortunately,\
    \ speak Chinese. It would be great if there was a version of this model in English.\n\
    \nIf you have problem with webui, you can refer to https://github.com/IDEA-CCNL/stable-diffusion-webui/blob/master/README.md.\
    \ \nIf you need a model in english, you can refer to our english&chinese model\
    \ IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-EN-v0.1"
  created_at: 2022-11-11 10:37:26+00:00
  edited: false
  hidden: false
  id: 636e25e69b61600b6298b6e5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667442736294-6352637d0f9bdb641c44e52d.jpeg?w=200&h=200&f=face
      fullname: wuxiaojun
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: wuxiaojun
      type: user
    createdAt: '2023-06-13T02:30:43.000Z'
    data:
      edited: false
      editors:
      - wuxiaojun
      hidden: false
      identifiedLanguage:
        language: fr
        probability: 0.47986844182014465
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667442736294-6352637d0f9bdb641c44e52d.jpeg?w=200&h=200&f=face
          fullname: wuxiaojun
          isHf: false
          isPro: false
          name: wuxiaojun
          type: user
        html: "<p>\u8BF7\u5347\u7EA7\u6700\u65B0\u7684stable diffusion webui\u5305\
          \uFF0C\u7136\u540E\u53C2\u8003</p>\n<pre><code>https://github.com/IDEA-CCNL/stable-diffusion-webui-taiyi-scripts/\n\
          </code></pre>\n<p>\u8BA9stable diffusion webui\u652F\u6301taiyi diffusion\u6A21\
          \u578B</p>\n"
        raw: "\u8BF7\u5347\u7EA7\u6700\u65B0\u7684stable diffusion webui\u5305\uFF0C\
          \u7136\u540E\u53C2\u8003\n```\nhttps://github.com/IDEA-CCNL/stable-diffusion-webui-taiyi-scripts/\n\
          ```\n\u8BA9stable diffusion webui\u652F\u6301taiyi diffusion\u6A21\u578B"
        updatedAt: '2023-06-13T02:30:43.621Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6487d4d35d164d8c7f8eb247
    id: 6487d4d35d164d8c7f8eb245
    type: comment
  author: wuxiaojun
  content: "\u8BF7\u5347\u7EA7\u6700\u65B0\u7684stable diffusion webui\u5305\uFF0C\
    \u7136\u540E\u53C2\u8003\n```\nhttps://github.com/IDEA-CCNL/stable-diffusion-webui-taiyi-scripts/\n\
    ```\n\u8BA9stable diffusion webui\u652F\u6301taiyi diffusion\u6A21\u578B"
  created_at: 2023-06-13 01:30:43+00:00
  edited: false
  hidden: false
  id: 6487d4d35d164d8c7f8eb245
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1667442736294-6352637d0f9bdb641c44e52d.jpeg?w=200&h=200&f=face
      fullname: wuxiaojun
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: wuxiaojun
      type: user
    createdAt: '2023-06-13T02:30:43.000Z'
    data:
      status: closed
    id: 6487d4d35d164d8c7f8eb247
    type: status-change
  author: wuxiaojun
  created_at: 2023-06-13 01:30:43+00:00
  id: 6487d4d35d164d8c7f8eb247
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 7
repo_id: IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-v0.1
repo_type: model
status: closed
target_branch: null
title: found an error using the ckpt
