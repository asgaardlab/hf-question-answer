!!python/object:huggingface_hub.community.DiscussionWithDetails
author: donnychou
conflicting_files: null
created_at: 2023-09-25 04:12:06+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cdf25008d389ebfac3b84bdcbb5b4769.svg
      fullname: chou donny
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: donnychou
      type: user
    createdAt: '2023-09-25T05:12:06.000Z'
    data:
      edited: false
      editors:
      - donnychou
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.25175872445106506
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cdf25008d389ebfac3b84bdcbb5b4769.svg
          fullname: chou donny
          isHf: false
          isPro: false
          name: donnychou
          type: user
        html: "<p>\u6211\u4F7F\u7528sd v2.3\u8F7D\u5165\u8BE5\u6A21\u578B,\u4F7F\u7528\
          webui\u542F\u52A8\u5668\u542F\u52A8\u540E\u70B9\u51FB\u5927\u6A21\u578B\
          \ \u62A5\u9519\u5982\u4E0B\uFF1A</p>\n<p>Loading VAE weights specified in\
          \ settings: C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\models\\VAE\\animevae.pt<br>Applying xformers cross attention\
          \ optimization.<br>VAE weights loaded.<br>Loading weights [f68b37e71f] from\
          \ C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          models\\Stable-diffusion\\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt<br>Failed\
          \ to load checkpoint, restoring previous<br>Loading weights [7f96a1a9ca]\
          \ from C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          models\\Stable-diffusion\\anything-v5-PrtRE.safetensors<br>Loading VAE weights\
          \ specified in settings: C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\models\\VAE\\animevae.pt<br>Applying xformers cross attention\
          \ optimization.<br>changing setting sd_model_checkpoint to Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt:\
          \ RuntimeError<br>Traceback (most recent call last):<br>  File \"C:\\BaiduNetdiskDownload\\\
          sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\shared.py\"\
          , line 516, in set<br>    self.data_labels[key].onchange()<br>  File \"\
          C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          modules\\call_queue.py\", line 15, in f<br>    res = func(*args, **kwargs)<br>\
          \  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          webui.py\", line 199, in <br>    shared.opts.onchange(\"sd_model_checkpoint\"\
          , wrap_queued_call(lambda: modules.sd_models.reload_model_weights()), call=False)<br>\
          \  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          modules\\sd_models.py\", line 546, in reload_model_weights<br>    load_model_weights(sd_model,\
          \ checkpoint_info, state_dict, timer)<br>  File \"C:\\BaiduNetdiskDownload\\\
          sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\sd_models.py\"\
          , line 288, in load_model_weights<br>    model.load_state_dict(state_dict,\
          \ strict=False)<br>  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\python\\lib\\site-packages\\torch\\nn\\modules\\module.py\"\
          , line 2041, in load_state_dict<br>    raise RuntimeError('Error(s) in loading\
          \ state_dict for {}:\\n\\t{}'.format(<br>RuntimeError: Error(s) in loading\
          \ state_dict for LatentDiffusion:<br>\u63D0\u793A\uFF1APython \u8FD0\u884C\
          \u65F6\u629B\u51FA\u4E86\u4E00\u4E2A\u5F02\u5E38\u3002\u8BF7\u68C0\u67E5\
          \u7591\u96BE\u89E3\u7B54\u9875\u9762\u3002<br>    size mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
          \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape\
          \ in current model is torch.Size([1, 77]).</p>\n"
        raw: "\u6211\u4F7F\u7528sd v2.3\u8F7D\u5165\u8BE5\u6A21\u578B,\u4F7F\u7528\
          webui\u542F\u52A8\u5668\u542F\u52A8\u540E\u70B9\u51FB\u5927\u6A21\u578B\
          \ \u62A5\u9519\u5982\u4E0B\uFF1A\r\n\r\nLoading VAE weights specified in\
          \ settings: C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\models\\VAE\\animevae.pt\r\nApplying xformers cross attention\
          \ optimization.\r\nVAE weights loaded.\r\nLoading weights [f68b37e71f] from\
          \ C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          models\\Stable-diffusion\\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt\r\n\
          Failed to load checkpoint, restoring previous\r\nLoading weights [7f96a1a9ca]\
          \ from C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          models\\Stable-diffusion\\anything-v5-PrtRE.safetensors\r\nLoading VAE weights\
          \ specified in settings: C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\models\\VAE\\animevae.pt\r\nApplying xformers cross attention\
          \ optimization.\r\nchanging setting sd_model_checkpoint to Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt:\
          \ RuntimeError\r\nTraceback (most recent call last):\r\n  File \"C:\\BaiduNetdiskDownload\\\
          sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\shared.py\"\
          , line 516, in set\r\n    self.data_labels[key].onchange()\r\n  File \"\
          C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          modules\\call_queue.py\", line 15, in f\r\n    res = func(*args, **kwargs)\r\
          \n  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          webui.py\", line 199, in <lambda>\r\n    shared.opts.onchange(\"sd_model_checkpoint\"\
          , wrap_queued_call(lambda: modules.sd_models.reload_model_weights()), call=False)\r\
          \n  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
          modules\\sd_models.py\", line 546, in reload_model_weights\r\n    load_model_weights(sd_model,\
          \ checkpoint_info, state_dict, timer)\r\n  File \"C:\\BaiduNetdiskDownload\\\
          sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\sd_models.py\"\
          , line 288, in load_model_weights\r\n    model.load_state_dict(state_dict,\
          \ strict=False)\r\n  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
          sd-webui-aki-v4.1\\python\\lib\\site-packages\\torch\\nn\\modules\\module.py\"\
          , line 2041, in load_state_dict\r\n    raise RuntimeError('Error(s) in loading\
          \ state_dict for {}:\\n\\t{}'.format(\r\nRuntimeError: Error(s) in loading\
          \ state_dict for LatentDiffusion:\r\n\u63D0\u793A\uFF1APython \u8FD0\u884C\
          \u65F6\u629B\u51FA\u4E86\u4E00\u4E2A\u5F02\u5E38\u3002\u8BF7\u68C0\u67E5\
          \u7591\u96BE\u89E3\u7B54\u9875\u9762\u3002\r\n\tsize mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
          \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape\
          \ in current model is torch.Size([1, 77]).\r\n\r\n"
        updatedAt: '2023-09-25T05:12:06.484Z'
      numEdits: 0
      reactions: []
    id: 651116a66620b0c57e6e1c27
    type: comment
  author: donnychou
  content: "\u6211\u4F7F\u7528sd v2.3\u8F7D\u5165\u8BE5\u6A21\u578B,\u4F7F\u7528webui\u542F\
    \u52A8\u5668\u542F\u52A8\u540E\u70B9\u51FB\u5927\u6A21\u578B \u62A5\u9519\u5982\
    \u4E0B\uFF1A\r\n\r\nLoading VAE weights specified in settings: C:\\BaiduNetdiskDownload\\\
    sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\models\\VAE\\animevae.pt\r\
    \nApplying xformers cross attention optimization.\r\nVAE weights loaded.\r\nLoading\
    \ weights [f68b37e71f] from C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
    sd-webui-aki-v4.1\\models\\Stable-diffusion\\Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt\r\
    \nFailed to load checkpoint, restoring previous\r\nLoading weights [7f96a1a9ca]\
    \ from C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
    models\\Stable-diffusion\\anything-v5-PrtRE.safetensors\r\nLoading VAE weights\
    \ specified in settings: C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
    sd-webui-aki-v4.1\\models\\VAE\\animevae.pt\r\nApplying xformers cross attention\
    \ optimization.\r\nchanging setting sd_model_checkpoint to Taiyi-Stable-Diffusion-1B-Chinese-v0.1.ckpt:\
    \ RuntimeError\r\nTraceback (most recent call last):\r\n  File \"C:\\BaiduNetdiskDownload\\\
    sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\shared.py\", line\
    \ 516, in set\r\n    self.data_labels[key].onchange()\r\n  File \"C:\\BaiduNetdiskDownload\\\
    sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\modules\\call_queue.py\",\
    \ line 15, in f\r\n    res = func(*args, **kwargs)\r\n  File \"C:\\BaiduNetdiskDownload\\\
    sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\webui.py\", line 199, in <lambda>\r\
    \n    shared.opts.onchange(\"sd_model_checkpoint\", wrap_queued_call(lambda: modules.sd_models.reload_model_weights()),\
    \ call=False)\r\n  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
    sd-webui-aki-v4.1\\modules\\sd_models.py\", line 546, in reload_model_weights\r\
    \n    load_model_weights(sd_model, checkpoint_info, state_dict, timer)\r\n  File\
    \ \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\sd-webui-aki-v4.1\\\
    modules\\sd_models.py\", line 288, in load_model_weights\r\n    model.load_state_dict(state_dict,\
    \ strict=False)\r\n  File \"C:\\BaiduNetdiskDownload\\sd-webui-aki\\sd-webui-aki-v4.1\\\
    sd-webui-aki-v4.1\\python\\lib\\site-packages\\torch\\nn\\modules\\module.py\"\
    , line 2041, in load_state_dict\r\n    raise RuntimeError('Error(s) in loading\
    \ state_dict for {}:\\n\\t{}'.format(\r\nRuntimeError: Error(s) in loading state_dict\
    \ for LatentDiffusion:\r\n\u63D0\u793A\uFF1APython \u8FD0\u884C\u65F6\u629B\u51FA\
    \u4E86\u4E00\u4E2A\u5F02\u5E38\u3002\u8BF7\u68C0\u67E5\u7591\u96BE\u89E3\u7B54\
    \u9875\u9762\u3002\r\n\tsize mismatch for cond_stage_model.transformer.text_model.embeddings.position_ids:\
    \ copying a param with shape torch.Size([1, 512]) from checkpoint, the shape in\
    \ current model is torch.Size([1, 77]).\r\n\r\n"
  created_at: 2023-09-25 04:12:06+00:00
  edited: false
  hidden: false
  id: 651116a66620b0c57e6e1c27
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 35
repo_id: IDEA-CCNL/Taiyi-Stable-Diffusion-1B-Chinese-v0.1
repo_type: model
status: open
target_branch: null
title: 'raise RuntimeError(''Error(s) in loading state_dict for {}:\n\t{}''.format(
  RuntimeError: Error(s) in loading state_dict for LatentDiffusion:'
