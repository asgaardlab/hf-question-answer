!!python/object:huggingface_hub.community.DiscussionWithDetails
author: jmif
conflicting_files: null
created_at: 2023-08-29 20:40:00+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4fc0e8a449b41ee25424f6e29e12de15.svg
      fullname: Joe Mifsud
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jmif
      type: user
    createdAt: '2023-08-29T21:40:00.000Z'
    data:
      edited: false
      editors:
      - jmif
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9077324271202087
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4fc0e8a449b41ee25424f6e29e12de15.svg
          fullname: Joe Mifsud
          isHf: false
          isPro: false
          name: jmif
          type: user
        html: '<p>I''m attempting to fine tune with FSDP but I''m getting `ValueError:
          FlatParameter requires uniform requires_grad''.  Looking at the code it
          seems the AlibiPositionEmbeddingLayer sets no grad on its slopes param and
          get_mup_param_groups filters on requires_grad, but not exactly sure how
          these interact.  Wondering if we could allow gradients on the slopes and
          if that would resolve the error.</p>

          <p>Thanks!</p>

          '
        raw: "I'm attempting to fine tune with FSDP but I'm getting `ValueError: FlatParameter\
          \ requires uniform requires_grad'.  Looking at the code it seems the AlibiPositionEmbeddingLayer\
          \ sets no grad on its slopes param and get_mup_param_groups filters on requires_grad,\
          \ but not exactly sure how these interact.  Wondering if we could allow\
          \ gradients on the slopes and if that would resolve the error.\r\n\r\nThanks!"
        updatedAt: '2023-08-29T21:40:00.546Z'
      numEdits: 0
      reactions: []
    id: 64ee65b0f3ef4a52e2aa9d90
    type: comment
  author: jmif
  content: "I'm attempting to fine tune with FSDP but I'm getting `ValueError: FlatParameter\
    \ requires uniform requires_grad'.  Looking at the code it seems the AlibiPositionEmbeddingLayer\
    \ sets no grad on its slopes param and get_mup_param_groups filters on requires_grad,\
    \ but not exactly sure how these interact.  Wondering if we could allow gradients\
    \ on the slopes and if that would resolve the error.\r\n\r\nThanks!"
  created_at: 2023-08-29 20:40:00+00:00
  edited: false
  hidden: false
  id: 64ee65b0f3ef4a52e2aa9d90
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4fc0e8a449b41ee25424f6e29e12de15.svg
      fullname: Joe Mifsud
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jmif
      type: user
    createdAt: '2023-08-29T22:43:32.000Z'
    data:
      edited: false
      editors:
      - jmif
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9295112490653992
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4fc0e8a449b41ee25424f6e29e12de15.svg
          fullname: Joe Mifsud
          isHf: false
          isPro: false
          name: jmif
          type: user
        html: '<p>I was able to explicitly wrap AlibiPositionEmbeddingLayer in a FSDP
          module and that fixed it!</p>

          '
        raw: I was able to explicitly wrap AlibiPositionEmbeddingLayer in a FSDP module
          and that fixed it!
        updatedAt: '2023-08-29T22:43:32.026Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64ee74941bd9f65ad4668f19
    id: 64ee74941bd9f65ad4668f17
    type: comment
  author: jmif
  content: I was able to explicitly wrap AlibiPositionEmbeddingLayer in a FSDP module
    and that fixed it!
  created_at: 2023-08-29 21:43:32+00:00
  edited: false
  hidden: false
  id: 64ee74941bd9f65ad4668f17
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/4fc0e8a449b41ee25424f6e29e12de15.svg
      fullname: Joe Mifsud
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jmif
      type: user
    createdAt: '2023-08-29T22:43:32.000Z'
    data:
      status: closed
    id: 64ee74941bd9f65ad4668f19
    type: status-change
  author: jmif
  created_at: 2023-08-29 21:43:32+00:00
  id: 64ee74941bd9f65ad4668f19
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 22
repo_id: cerebras/btlm-3b-8k-base
repo_type: model
status: closed
target_branch: null
title: Does the model support FSDP?
