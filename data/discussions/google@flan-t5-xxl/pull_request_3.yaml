!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ankrgyl
conflicting_files: []
created_at: 2022-10-22 14:43:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2022-10-22T15:43:33.000Z'
    data:
      edited: false
      editors:
      - ankrgyl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
          fullname: Ankur Goyal
          isHf: false
          isPro: false
          name: ankrgyl
          type: user
        html: "<p>Without the <code>decoder_start_token_id</code> parameter, you get\
          \ the following <code>ValueError</code> while using the model:</p>\n<pre><code>\
          \    561 elif (\n    562     hasattr(self.config, \"decoder\")\n    563\
          \     and hasattr(self.config.decoder, \"bos_token_id\")\n    564     and\
          \ self.config.decoder.bos_token_id is not None\n    565 ):\n    566    \
          \ return self.config.decoder.bos_token_id\n--&gt; 567 raise ValueError(\n\
          \    568     \"`decoder_start_token_id` or `bos_token_id` has to be defined\
          \ for encoder-decoder generation.\"\n    569 )\n\nValueError: `decoder_start_token_id`\
          \ or `bos_token_id` has to be defined for encoder-decoder generation.\n\
          </code></pre>\n<p>I checked <a href=\"https://huggingface.co/google/flan-t5-large/blob/main/config.json\"\
          >https://huggingface.co/google/flan-t5-large/blob/main/config.json</a> and\
          \ noticed that <code>output_past</code> is also different.</p>\n"
        raw: "Without the `decoder_start_token_id` parameter, you get the following\
          \ `ValueError` while using the model:\n\n```\n    561 elif (\n    562  \
          \   hasattr(self.config, \"decoder\")\n    563     and hasattr(self.config.decoder,\
          \ \"bos_token_id\")\n    564     and self.config.decoder.bos_token_id is\
          \ not None\n    565 ):\n    566     return self.config.decoder.bos_token_id\n\
          --> 567 raise ValueError(\n    568     \"`decoder_start_token_id` or `bos_token_id`\
          \ has to be defined for encoder-decoder generation.\"\n    569 )\n\nValueError:\
          \ `decoder_start_token_id` or `bos_token_id` has to be defined for encoder-decoder\
          \ generation.\n```\n\nI checked https://huggingface.co/google/flan-t5-large/blob/main/config.json\
          \ and noticed that `output_past` is also different."
        updatedAt: '2022-10-22T15:43:33.794Z'
      numEdits: 0
      reactions: []
    id: 63540fa574026d8c3af9830d
    type: comment
  author: ankrgyl
  content: "Without the `decoder_start_token_id` parameter, you get the following\
    \ `ValueError` while using the model:\n\n```\n    561 elif (\n    562     hasattr(self.config,\
    \ \"decoder\")\n    563     and hasattr(self.config.decoder, \"bos_token_id\"\
    )\n    564     and self.config.decoder.bos_token_id is not None\n    565 ):\n\
    \    566     return self.config.decoder.bos_token_id\n--> 567 raise ValueError(\n\
    \    568     \"`decoder_start_token_id` or `bos_token_id` has to be defined for\
    \ encoder-decoder generation.\"\n    569 )\n\nValueError: `decoder_start_token_id`\
    \ or `bos_token_id` has to be defined for encoder-decoder generation.\n```\n\n\
    I checked https://huggingface.co/google/flan-t5-large/blob/main/config.json and\
    \ noticed that `output_past` is also different."
  created_at: 2022-10-22 14:43:33+00:00
  edited: false
  hidden: false
  id: 63540fa574026d8c3af9830d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2022-10-22T15:43:34.000Z'
    data:
      oid: 12cb4a2c05148f23dd53f69a26ec805936dc5d94
      parents:
      - 0657afd8b3a7d9f58f6f142b0f3c7883cf0892bf
      subject: Set decoder_start_token_id and output_past in config
    id: 63540fa60000000000000000
    type: commit
  author: ankrgyl
  created_at: 2022-10-22 14:43:34+00:00
  id: 63540fa60000000000000000
  oid: 12cb4a2c05148f23dd53f69a26ec805936dc5d94
  summary: Set decoder_start_token_id and output_past in config
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2022-10-22T15:44:03.000Z'
    data:
      edited: false
      editors:
      - ankrgyl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
          fullname: Ankur Goyal
          isHf: false
          isPro: false
          name: ankrgyl
          type: user
        html: '<p>I believe this fixes <a href="https://huggingface.co/google/flan-t5-xxl/discussions/2">https://huggingface.co/google/flan-t5-xxl/discussions/2</a></p>

          '
        raw: I believe this fixes https://huggingface.co/google/flan-t5-xxl/discussions/2
        updatedAt: '2022-10-22T15:44:03.194Z'
      numEdits: 0
      reactions: []
    id: 63540fc343577a0f542416d6
    type: comment
  author: ankrgyl
  content: I believe this fixes https://huggingface.co/google/flan-t5-xxl/discussions/2
  created_at: 2022-10-22 14:44:03+00:00
  edited: false
  hidden: false
  id: 63540fc343577a0f542416d6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2022-10-22T19:52:10.000Z'
    data:
      edited: false
      editors:
      - ybelkada
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
          fullname: Younes Belkada
          isHf: true
          isPro: false
          name: ybelkada
          type: user
        html: '<p>This definitely fixes the issue, yes! Great catch! Thanks for spotting
          it - indeed we forgot to add it when porting the model :-) </p>

          '
        raw: "This definitely fixes the issue, yes! Great catch! Thanks for spotting\
          \ it - indeed we forgot to add it when porting the model :-) \n"
        updatedAt: '2022-10-22T19:52:10.732Z'
      numEdits: 0
      reactions: []
      relatedEventId: 635449eab8aa3b0b3ebd843b
    id: 635449eab8aa3b0b3ebd843a
    type: comment
  author: ybelkada
  content: "This definitely fixes the issue, yes! Great catch! Thanks for spotting\
    \ it - indeed we forgot to add it when porting the model :-) \n"
  created_at: 2022-10-22 18:52:10+00:00
  edited: false
  hidden: false
  id: 635449eab8aa3b0b3ebd843a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2022-10-22T19:52:10.000Z'
    data:
      status: merged
    id: 635449eab8aa3b0b3ebd843b
    type: status-change
  author: ybelkada
  created_at: 2022-10-22 18:52:10+00:00
  id: 635449eab8aa3b0b3ebd843b
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: 9186b742b0e8a43a42889a5f61da880b073a0502
num: 3
repo_id: google/flan-t5-xxl
repo_type: model
status: merged
target_branch: refs/heads/main
title: Set decoder_start_token_id and output_past in config
