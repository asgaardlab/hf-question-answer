!!python/object:huggingface_hub.community.DiscussionWithDetails
author: kapil1611
conflicting_files: null
created_at: 2023-10-02 19:00:22+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0c386b219276353b0df6825da473e129.svg
      fullname: kumar
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kapil1611
      type: user
    createdAt: '2023-10-02T20:00:22.000Z'
    data:
      edited: false
      editors:
      - kapil1611
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.45618775486946106
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0c386b219276353b0df6825da473e129.svg
          fullname: kumar
          isHf: false
          isPro: false
          name: kapil1611
          type: user
        html: '<p>I am wrapping my head around</p>

          <p>Trying to understand Why A is faster than B</p>

          <p>A.<br>tokenizer_large = AutoTokenizer.from_pretrained(f"google/flan-t5-large")<br>model_large
          = AutoModelForSeq2SeqLM.from_pretrained(f"google/flan-t5-large", torch_dtype=torch.float16,
          device_map="auto")<br>IS FASTER THEN</p>

          <p>B.<br>model_id = "google/flan-t5-large"<br>quantization_config = BitsAndBytesConfig(<br>load_in_4bit=True,<br>bnb_4bit_use_double_quant=False<br>)<br>model_large
          = AutoModelForSeq2SeqLM.from_pretrained(model_id, quantization_config=quantization_config)<br>tokenizer_large
          = AutoTokenizer.from_pretrained(model_id) (edited)</p>

          '
        raw: "I am wrapping my head around\r\n\r\nTrying to understand Why A is faster\
          \ than B\r\n\r\nA.\r\ntokenizer_large = AutoTokenizer.from_pretrained(f\"\
          google/flan-t5-large\")\r\nmodel_large = AutoModelForSeq2SeqLM.from_pretrained(f\"\
          google/flan-t5-large\", torch_dtype=torch.float16, device_map=\"auto\")\r\
          \nIS FASTER THEN\r\n\r\nB.\r\nmodel_id = \"google/flan-t5-large\"\r\nquantization_config\
          \ = BitsAndBytesConfig(\r\nload_in_4bit=True,\r\nbnb_4bit_use_double_quant=False\r\
          \n)\r\nmodel_large = AutoModelForSeq2SeqLM.from_pretrained(model_id, quantization_config=quantization_config)\r\
          \ntokenizer_large = AutoTokenizer.from_pretrained(model_id) (edited)"
        updatedAt: '2023-10-02T20:00:22.132Z'
      numEdits: 0
      reactions: []
    id: 651b2156cd08536ba4d56fd0
    type: comment
  author: kapil1611
  content: "I am wrapping my head around\r\n\r\nTrying to understand Why A is faster\
    \ than B\r\n\r\nA.\r\ntokenizer_large = AutoTokenizer.from_pretrained(f\"google/flan-t5-large\"\
    )\r\nmodel_large = AutoModelForSeq2SeqLM.from_pretrained(f\"google/flan-t5-large\"\
    , torch_dtype=torch.float16, device_map=\"auto\")\r\nIS FASTER THEN\r\n\r\nB.\r\
    \nmodel_id = \"google/flan-t5-large\"\r\nquantization_config = BitsAndBytesConfig(\r\
    \nload_in_4bit=True,\r\nbnb_4bit_use_double_quant=False\r\n)\r\nmodel_large =\
    \ AutoModelForSeq2SeqLM.from_pretrained(model_id, quantization_config=quantization_config)\r\
    \ntokenizer_large = AutoTokenizer.from_pretrained(model_id) (edited)"
  created_at: 2023-10-02 19:00:22+00:00
  edited: false
  hidden: false
  id: 651b2156cd08536ba4d56fd0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
      fullname: Lysandre
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lysandre
      type: user
    createdAt: '2023-10-03T09:12:47.000Z'
    data:
      edited: false
      editors:
      - lysandre
      hidden: false
      identifiedLanguage:
        language: tr
        probability: 0.10496710985898972
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1618450692745-5e3aec01f55e2b62848a5217.jpeg?w=200&h=200&f=face
          fullname: Lysandre
          isHf: true
          isPro: false
          name: lysandre
          type: user
        html: "<p>cc <span data-props=\"{&quot;user&quot;:&quot;ybelkada&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/ybelkada\"\
          >@<span class=\"underline\">ybelkada</span></a></span>\n\n\t</span></span>\
          \ </p>\n"
        raw: 'cc @ybelkada '
        updatedAt: '2023-10-03T09:12:47.764Z'
      numEdits: 0
      reactions: []
    id: 651bdb0feaca3dab74f38895
    type: comment
  author: lysandre
  content: 'cc @ybelkada '
  created_at: 2023-10-03 08:12:47+00:00
  edited: false
  hidden: false
  id: 651bdb0feaca3dab74f38895
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2023-10-09T16:21:31.000Z'
    data:
      edited: false
      editors:
      - ybelkada
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.895514190196991
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
          fullname: Younes Belkada
          isHf: true
          isPro: false
          name: ybelkada
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;kapil1611&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/kapil1611\"\
          >@<span class=\"underline\">kapil1611</span></a></span>\n\n\t</span></span><br>Please\
          \ have a look at my comment here that details everthing: <a href=\"https://huggingface.co/google/flan-t5-large/discussions/17#6524249ca9a710554b0d3723\"\
          >https://huggingface.co/google/flan-t5-large/discussions/17#6524249ca9a710554b0d3723</a><br>Closing\
          \ it as it is a duplicate of that issue</p>\n"
        raw: "Hi @kapil1611 \nPlease have a look at my comment here that details everthing:\
          \ https://huggingface.co/google/flan-t5-large/discussions/17#6524249ca9a710554b0d3723\n\
          Closing it as it is a duplicate of that issue"
        updatedAt: '2023-10-09T16:21:31.257Z'
      numEdits: 0
      reactions: []
      relatedEventId: 6524288be6e5f6b10337d94c
    id: 6524288be6e5f6b10337d949
    type: comment
  author: ybelkada
  content: "Hi @kapil1611 \nPlease have a look at my comment here that details everthing:\
    \ https://huggingface.co/google/flan-t5-large/discussions/17#6524249ca9a710554b0d3723\n\
    Closing it as it is a duplicate of that issue"
  created_at: 2023-10-09 15:21:31+00:00
  edited: false
  hidden: false
  id: 6524288be6e5f6b10337d949
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1648631057413-noauth.png?w=200&h=200&f=face
      fullname: Younes Belkada
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ybelkada
      type: user
    createdAt: '2023-10-09T16:21:31.000Z'
    data:
      status: closed
    id: 6524288be6e5f6b10337d94c
    type: status-change
  author: ybelkada
  created_at: 2023-10-09 15:21:31+00:00
  id: 6524288be6e5f6b10337d94c
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 63
repo_id: google/flan-t5-xxl
repo_type: model
status: closed
target_branch: null
title: Why 4bit quantised is slower than fp16
