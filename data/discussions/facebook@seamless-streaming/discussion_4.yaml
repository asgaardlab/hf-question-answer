!!python/object:huggingface_hub.community.DiscussionWithDetails
author: lvfengchun
conflicting_files: null
created_at: 2023-12-13 01:46:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a0a757e4f65e749fbb6cc079544fad56.svg
      fullname: lvfengchun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lvfengchun
      type: user
    createdAt: '2023-12-13T01:46:33.000Z'
    data:
      edited: false
      editors:
      - lvfengchun
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6099270582199097
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a0a757e4f65e749fbb6cc079544fad56.svg
          fullname: lvfengchun
          isHf: false
          isPro: false
          name: lvfengchun
          type: user
        html: '<p>[2023-12-13 01:28:09,333][ERROR][app_pubsub]: [app_pubsub] Caught
          exception in ''incoming_audio'' event handler:</p>

          <p>apply_effects_tensor requires sox extension which is not available. Please
          refer to the stacktrace above for how to resolve this.<br>Traceback (most
          recent call last):<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 207, in wrapped<br>    _init_sox()<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 70, in _init_sox<br>    _load_lib("libtorchaudio_sox")<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 64, in _load_lib<br>    torch.ops.load_library(path)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py",
          line 852, in load_library<br>    ctypes.CDLL(path)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/ctypes/<strong>init</strong>.py",
          line 373, in <strong>init</strong><br>    self._handle = _dlopen(self._name,
          mode)<br>OSError: libsox.so: cannot open shared object file: No such file
          or directory</p>

          <p>The above exception was the direct cause of the following exception:</p>

          <p>Traceback (most recent call last):<br>  File "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 171, in catch_exception_wrapper<br>    return await func(*args, **kwargs)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 745, in incoming_audio<br>    member.transcoder.process_incoming_bytes(<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 205, in process_incoming_bytes<br>    segment, sr = self._preprocess_wav(incoming_bytes)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 290, in _preprocess_wav<br>    segment, new_sample_rate = self.convert_waveform(<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 265, in convert_waveform<br>    converted, converted_sample_rate =
          ta_sox.apply_effects_tensor(<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 209, in wrapped<br>    raise RuntimeError(<br>RuntimeError: apply_effects_tensor
          requires sox extension which is not available. Please refer to the stacktrace
          above for how to resolve this.<br>Stack (most recent call last):<br>  File
          "/opt/conda/envs/smlss_server/bin/uvicorn", line 8, in <br>    sys.exit(main())<br>  File
          "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py",
          line 1157, in <strong>call</strong><br>    return self.main(*args, **kwargs)<br>  File
          "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py",
          line 1078, in main<br>    rv = self.invoke(ctx)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py",
          line 1434, in invoke<br>    return ctx.invoke(self.callback, **ctx.params)<br>  File
          "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py",
          line 783, in invoke<br>    return __callback(*args, **kwargs)<br>  File
          "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py",
          line 416, in main<br>    run(<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py",
          line 587, in run<br>    server.run()<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/server.py",
          line 61, in run<br>    return asyncio.run(self.serve(sockets=sockets))<br>  File
          "/opt/conda/envs/smlss_server/lib/python3.8/asyncio/runners.py", line 44,
          in run<br>    return loop.run_until_complete(main)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py",
          line 515, in _handle_event_internal<br>    r = await server._trigger_event(data[0],
          namespace, sid, *data[1:])<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py",
          line 549, in _trigger_event<br>    ret = await handler(*args)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 174, in catch_exception_wrapper<br>    logger.exception(message, stack_info=True)<br>2023-12-13
          01:28:09,334 ERROR -- asyncio: Task exception was never retrieved<br>future:
          &lt;Task finished name=''Task-163'' coro=&lt;AsyncServer._handle_event_internal()
          done, defined at /opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py:513&gt;
          exception=RuntimeError(''apply_effects_tensor requires sox extension which
          is not available. Please refer to the stacktrace above for how to resolve
          this.'')&gt;<br>Traceback (most recent call last):<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 207, in wrapped<br>    _init_sox()<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 70, in _init_sox<br>    _load_lib("libtorchaudio_sox")<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 64, in _load_lib<br>    torch.ops.load_library(path)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py",
          line 852, in load_library<br>    ctypes.CDLL(path)<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/ctypes/<strong>init</strong>.py",
          line 373, in <strong>init</strong><br>    self._handle = _dlopen(self._name,
          mode)<br>OSError: libsox.so: cannot open shared object file: No such file
          or directory</p>

          <p>The above exception was the direct cause of the following exception:</p>

          <p>Traceback (most recent call last):<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py",
          line 515, in _handle_event_internal<br>    r = await server._trigger_event(data[0],
          namespace, sid, *data[1:])<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py",
          line 549, in _trigger_event<br>    ret = await handler(*args)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 209, in catch_exception_wrapper<br>    raise e<br>  File "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 171, in catch_exception_wrapper<br>    return await func(*args, **kwargs)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py",
          line 745, in incoming_audio<br>    member.transcoder.process_incoming_bytes(<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 205, in process_incoming_bytes<br>    segment, sr = self._preprocess_wav(incoming_bytes)<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 290, in _preprocess_wav<br>    segment, new_sample_rate = self.convert_waveform(<br>  File
          "/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py",
          line 265, in convert_waveform<br>    converted, converted_sample_rate =
          ta_sox.apply_effects_tensor(<br>  File "/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py",
          line 209, in wrapped<br>    raise RuntimeError(<br>RuntimeError: apply_effects_tensor
          requires sox extension which is not available. Please refer to the stacktrace
          above for how to resolve this.</p>

          '
        raw: "[2023-12-13 01:28:09,333][ERROR][app_pubsub]: [app_pubsub] Caught exception\
          \ in 'incoming_audio' event handler:\r\n\r\napply_effects_tensor requires\
          \ sox extension which is not available. Please refer to the stacktrace above\
          \ for how to resolve this.\r\nTraceback (most recent call last):\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 207, in wrapped\r\n    _init_sox()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 70, in _init_sox\r\n    _load_lib(\"libtorchaudio_sox\")\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 64, in _load_lib\r\n    torch.ops.load_library(path)\r\n  File \"\
          /opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py\"\
          , line 852, in load_library\r\n    ctypes.CDLL(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/ctypes/__init__.py\"\
          , line 373, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\
          \nOSError: libsox.so: cannot open shared object file: No such file or directory\r\
          \n\r\nThe above exception was the direct cause of the following exception:\r\
          \n\r\nTraceback (most recent call last):\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 171, in catch_exception_wrapper\r\n    return await func(*args, **kwargs)\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 745, in incoming_audio\r\n    member.transcoder.process_incoming_bytes(\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 205, in process_incoming_bytes\r\n    segment, sr = self._preprocess_wav(incoming_bytes)\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 290, in _preprocess_wav\r\n    segment, new_sample_rate = self.convert_waveform(\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 265, in convert_waveform\r\n    converted, converted_sample_rate\
          \ = ta_sox.apply_effects_tensor(\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 209, in wrapped\r\n    raise RuntimeError(\r\nRuntimeError: apply_effects_tensor\
          \ requires sox extension which is not available. Please refer to the stacktrace\
          \ above for how to resolve this.\r\nStack (most recent call last):\r\n \
          \ File \"/opt/conda/envs/smlss_server/bin/uvicorn\", line 8, in <module>\r\
          \n    sys.exit(main())\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
          , line 1157, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
          , line 1078, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
          , line 1434, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\
          \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
          , line 783, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py\"\
          , line 416, in main\r\n    run(\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py\"\
          , line 587, in run\r\n    server.run()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/server.py\"\
          , line 61, in run\r\n    return asyncio.run(self.serve(sockets=sockets))\r\
          \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/asyncio/runners.py\"\
          , line 44, in run\r\n    return loop.run_until_complete(main)\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
          , line 515, in _handle_event_internal\r\n    r = await server._trigger_event(data[0],\
          \ namespace, sid, *data[1:])\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
          , line 549, in _trigger_event\r\n    ret = await handler(*args)\r\n  File\
          \ \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 174, in catch_exception_wrapper\r\n    logger.exception(message,\
          \ stack_info=True)\r\n2023-12-13 01:28:09,334 ERROR -- asyncio: Task exception\
          \ was never retrieved\r\nfuture: <Task finished name='Task-163' coro=<AsyncServer._handle_event_internal()\
          \ done, defined at /opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py:513>\
          \ exception=RuntimeError('apply_effects_tensor requires sox extension which\
          \ is not available. Please refer to the stacktrace above for how to resolve\
          \ this.')>\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 207, in wrapped\r\n    _init_sox()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 70, in _init_sox\r\n    _load_lib(\"libtorchaudio_sox\")\r\n  File\
          \ \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 64, in _load_lib\r\n    torch.ops.load_library(path)\r\n  File \"\
          /opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py\"\
          , line 852, in load_library\r\n    ctypes.CDLL(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/ctypes/__init__.py\"\
          , line 373, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\
          \nOSError: libsox.so: cannot open shared object file: No such file or directory\r\
          \n\r\nThe above exception was the direct cause of the following exception:\r\
          \n\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
          , line 515, in _handle_event_internal\r\n    r = await server._trigger_event(data[0],\
          \ namespace, sid, *data[1:])\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
          , line 549, in _trigger_event\r\n    ret = await handler(*args)\r\n  File\
          \ \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 209, in catch_exception_wrapper\r\n    raise e\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 171, in catch_exception_wrapper\r\n    return await func(*args, **kwargs)\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
          , line 745, in incoming_audio\r\n    member.transcoder.process_incoming_bytes(\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 205, in process_incoming_bytes\r\n    segment, sr = self._preprocess_wav(incoming_bytes)\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 290, in _preprocess_wav\r\n    segment, new_sample_rate = self.convert_waveform(\r\
          \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
          , line 265, in convert_waveform\r\n    converted, converted_sample_rate\
          \ = ta_sox.apply_effects_tensor(\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
          , line 209, in wrapped\r\n    raise RuntimeError(\r\nRuntimeError: apply_effects_tensor\
          \ requires sox extension which is not available. Please refer to the stacktrace\
          \ above for how to resolve this.\r\n"
        updatedAt: '2023-12-13T01:46:33.834Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - LT9019
    id: 65790cf917166d821e3c6ed1
    type: comment
  author: lvfengchun
  content: "[2023-12-13 01:28:09,333][ERROR][app_pubsub]: [app_pubsub] Caught exception\
    \ in 'incoming_audio' event handler:\r\n\r\napply_effects_tensor requires sox\
    \ extension which is not available. Please refer to the stacktrace above for how\
    \ to resolve this.\r\nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 207, in wrapped\r\n    _init_sox()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 70, in _init_sox\r\n    _load_lib(\"libtorchaudio_sox\")\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 64, in _load_lib\r\n    torch.ops.load_library(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py\"\
    , line 852, in load_library\r\n    ctypes.CDLL(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/ctypes/__init__.py\"\
    , line 373, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\nOSError:\
    \ libsox.so: cannot open shared object file: No such file or directory\r\n\r\n\
    The above exception was the direct cause of the following exception:\r\n\r\nTraceback\
    \ (most recent call last):\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 171, in catch_exception_wrapper\r\n    return await func(*args, **kwargs)\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 745, in incoming_audio\r\n    member.transcoder.process_incoming_bytes(\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 205, in process_incoming_bytes\r\n    segment, sr = self._preprocess_wav(incoming_bytes)\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 290, in _preprocess_wav\r\n    segment, new_sample_rate = self.convert_waveform(\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 265, in convert_waveform\r\n    converted, converted_sample_rate = ta_sox.apply_effects_tensor(\r\
    \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 209, in wrapped\r\n    raise RuntimeError(\r\nRuntimeError: apply_effects_tensor\
    \ requires sox extension which is not available. Please refer to the stacktrace\
    \ above for how to resolve this.\r\nStack (most recent call last):\r\n  File \"\
    /opt/conda/envs/smlss_server/bin/uvicorn\", line 8, in <module>\r\n    sys.exit(main())\r\
    \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
    , line 1157, in __call__\r\n    return self.main(*args, **kwargs)\r\n  File \"\
    /opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\", line\
    \ 1078, in main\r\n    rv = self.invoke(ctx)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
    , line 1434, in invoke\r\n    return ctx.invoke(self.callback, **ctx.params)\r\
    \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/click/core.py\"\
    , line 783, in invoke\r\n    return __callback(*args, **kwargs)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py\"\
    , line 416, in main\r\n    run(\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/main.py\"\
    , line 587, in run\r\n    server.run()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/uvicorn/server.py\"\
    , line 61, in run\r\n    return asyncio.run(self.serve(sockets=sockets))\r\n \
    \ File \"/opt/conda/envs/smlss_server/lib/python3.8/asyncio/runners.py\", line\
    \ 44, in run\r\n    return loop.run_until_complete(main)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
    , line 515, in _handle_event_internal\r\n    r = await server._trigger_event(data[0],\
    \ namespace, sid, *data[1:])\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
    , line 549, in _trigger_event\r\n    ret = await handler(*args)\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 174, in catch_exception_wrapper\r\n    logger.exception(message, stack_info=True)\r\
    \n2023-12-13 01:28:09,334 ERROR -- asyncio: Task exception was never retrieved\r\
    \nfuture: <Task finished name='Task-163' coro=<AsyncServer._handle_event_internal()\
    \ done, defined at /opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py:513>\
    \ exception=RuntimeError('apply_effects_tensor requires sox extension which is\
    \ not available. Please refer to the stacktrace above for how to resolve this.')>\r\
    \nTraceback (most recent call last):\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 207, in wrapped\r\n    _init_sox()\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 70, in _init_sox\r\n    _load_lib(\"libtorchaudio_sox\")\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 64, in _load_lib\r\n    torch.ops.load_library(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torch/_ops.py\"\
    , line 852, in load_library\r\n    ctypes.CDLL(path)\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/ctypes/__init__.py\"\
    , line 373, in __init__\r\n    self._handle = _dlopen(self._name, mode)\r\nOSError:\
    \ libsox.so: cannot open shared object file: No such file or directory\r\n\r\n\
    The above exception was the direct cause of the following exception:\r\n\r\nTraceback\
    \ (most recent call last):\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
    , line 515, in _handle_event_internal\r\n    r = await server._trigger_event(data[0],\
    \ namespace, sid, *data[1:])\r\n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/socketio/asyncio_server.py\"\
    , line 549, in _trigger_event\r\n    ret = await handler(*args)\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 209, in catch_exception_wrapper\r\n    raise e\r\n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 171, in catch_exception_wrapper\r\n    return await func(*args, **kwargs)\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/app_pubsub.py\"\
    , line 745, in incoming_audio\r\n    member.transcoder.process_incoming_bytes(\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 205, in process_incoming_bytes\r\n    segment, sr = self._preprocess_wav(incoming_bytes)\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 290, in _preprocess_wav\r\n    segment, new_sample_rate = self.convert_waveform(\r\
    \n  File \"/home/ec2-user/workspace/seamless_communication/demo/seamless-streaming/seamless_server/src/simuleval_transcoder.py\"\
    , line 265, in convert_waveform\r\n    converted, converted_sample_rate = ta_sox.apply_effects_tensor(\r\
    \n  File \"/opt/conda/envs/smlss_server/lib/python3.8/site-packages/torchaudio/_extension/utils.py\"\
    , line 209, in wrapped\r\n    raise RuntimeError(\r\nRuntimeError: apply_effects_tensor\
    \ requires sox extension which is not available. Please refer to the stacktrace\
    \ above for how to resolve this.\r\n"
  created_at: 2023-12-13 01:46:33+00:00
  edited: false
  hidden: false
  id: 65790cf917166d821e3c6ed1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0a4da146d285a6dc1209e8ff67e71d03.svg
      fullname: Tao Liu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LT9019
      type: user
    createdAt: '2024-01-08T03:36:24.000Z'
    data:
      edited: false
      editors:
      - LT9019
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9994460940361023
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0a4da146d285a6dc1209e8ff67e71d03.svg
          fullname: Tao Liu
          isHf: false
          isPro: false
          name: LT9019
          type: user
        html: '<p>have you solved it?</p>

          '
        raw: have you solved it?
        updatedAt: '2024-01-08T03:36:24.125Z'
      numEdits: 0
      reactions: []
    id: 659b6db8e6df49a09d4ab225
    type: comment
  author: LT9019
  content: have you solved it?
  created_at: 2024-01-08 03:36:24+00:00
  edited: false
  hidden: false
  id: 659b6db8e6df49a09d4ab225
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: facebook/seamless-streaming
repo_type: model
status: open
target_branch: null
title: I encountered an error about Sox when deploying seamless-streaming on Amazon's
  ec2 server.
