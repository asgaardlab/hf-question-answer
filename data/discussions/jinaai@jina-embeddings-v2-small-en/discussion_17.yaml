!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Sidh4rth7
conflicting_files: null
created_at: 2023-12-22 10:12:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/deb315dd77275456a7a56ad7e846c2eb.svg
      fullname: Sidharth
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sidh4rth7
      type: user
    createdAt: '2023-12-22T10:12:39.000Z'
    data:
      edited: false
      editors:
      - Sidh4rth7
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7481606602668762
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/deb315dd77275456a7a56ad7e846c2eb.svg
          fullname: Sidharth
          isHf: false
          isPro: false
          name: Sidh4rth7
          type: user
        html: '<p>This is my code:<br>embeddings = HuggingFaceHubEmbeddings(<br>                repo_id
          = "jinaai/jina-embeddings-v2-small-en",<br>                task="feature-extraction",<br>                huggingfacehub_api_token="my_api_key",<br>            )</p>

          <p>And this is the error I get:<br>Bad request:<br>Loading /data/jinaai_jina-embeddings-v2-small-en/
          requires you to execute the modeling file in that repo on your local machine.
          Make sure you have read the code there to avoid malicious use, then set
          the option <code>trust_remote_code=True</code> to remove this error.</p>

          <p>Any help is much appreciated!</p>

          '
        raw: "This is my code:\r\nembeddings = HuggingFaceHubEmbeddings(\r\n     \
          \           repo_id = \"jinaai/jina-embeddings-v2-small-en\",\r\n      \
          \          task=\"feature-extraction\",\r\n                huggingfacehub_api_token=\"\
          my_api_key\",\r\n            )\r\n\r\nAnd this is the error I get:\r\nBad\
          \ request:\r\nLoading /data/jinaai_jina-embeddings-v2-small-en/ requires\
          \ you to execute the modeling file in that repo on your local machine. Make\
          \ sure you have read the code there to avoid malicious use, then set the\
          \ option `trust_remote_code=True` to remove this error.\r\n\r\nAny help\
          \ is much appreciated!"
        updatedAt: '2023-12-22T10:12:39.311Z'
      numEdits: 0
      reactions: []
    id: 658561173c10387164b0e0cb
    type: comment
  author: Sidh4rth7
  content: "This is my code:\r\nembeddings = HuggingFaceHubEmbeddings(\r\n       \
    \         repo_id = \"jinaai/jina-embeddings-v2-small-en\",\r\n              \
    \  task=\"feature-extraction\",\r\n                huggingfacehub_api_token=\"\
    my_api_key\",\r\n            )\r\n\r\nAnd this is the error I get:\r\nBad request:\r\
    \nLoading /data/jinaai_jina-embeddings-v2-small-en/ requires you to execute the\
    \ modeling file in that repo on your local machine. Make sure you have read the\
    \ code there to avoid malicious use, then set the option `trust_remote_code=True`\
    \ to remove this error.\r\n\r\nAny help is much appreciated!"
  created_at: 2023-12-22 10:12:39+00:00
  edited: false
  hidden: false
  id: 658561173c10387164b0e0cb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
      fullname: Bo Wang
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: bwang0911
      type: user
    createdAt: '2023-12-22T12:05:01.000Z'
    data:
      edited: false
      editors:
      - bwang0911
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7352080345153809
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
          fullname: Bo Wang
          isHf: false
          isPro: false
          name: bwang0911
          type: user
        html: "<p>hi <span data-props=\"{&quot;user&quot;:&quot;Sidh4rth7&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Sidh4rth7\"\
          >@<span class=\"underline\">Sidh4rth7</span></a></span>\n\n\t</span></span>\
          \ do i understand correctly you're using Langchain? this is because, i believe,\
          \ langchain , didn't implement the <code>trust_remote_code=True</code>.\
          \ </p>\n<p>i just looked at the source of <code>InferenceClient</code>,\
          \ this <code>InferenceClient</code> is being used by <code>HuggingfaceHubEmbeddings</code>:\
          \ </p>\n<p><a rel=\"nofollow\" href=\"https://github.com/huggingface/huggingface_hub/blob/v0.19.3/src/huggingface_hub/inference/_client.py#L516\"\
          >https://github.com/huggingface/huggingface_hub/blob/v0.19.3/src/huggingface_hub/inference/_client.py#L516</a></p>\n\
          <pre><code class=\"language-python\">        response = self.post(json={<span\
          \ class=\"hljs-string\">\"inputs\"</span>: text}, model=model, task=<span\
          \ class=\"hljs-string\">\"feature-extraction\"</span>)\n</code></pre>\n\
          <p>i believe in <code>huggingface_hub</code> or their backend, didn't allow\
          \ pass <code>trust_remote_code=True</code>.</p>\n<p>2 solutions:</p>\n<ol>\n\
          <li>replace your HuggingfaceHubEmbedding with open source usage like this:\
          \ <a href=\"https://huggingface.co/jinaai/jina-embeddings-v2-small-en#usage\"\
          >https://huggingface.co/jinaai/jina-embeddings-v2-small-en#usage</a> </li>\n\
          <li>use jina embeddings api to get embeddings, while it is not free: <a\
          \ rel=\"nofollow\" href=\"https://jina.ai/embeddings/\">https://jina.ai/embeddings/</a></li>\n\
          </ol>\n"
        raw: "hi @Sidh4rth7 do i understand correctly you're using Langchain? this\
          \ is because, i believe, langchain , didn't implement the `trust_remote_code=True`.\
          \ \n\ni just looked at the source of `InferenceClient`, this `InferenceClient`\
          \ is being used by `HuggingfaceHubEmbeddings`: \n\nhttps://github.com/huggingface/huggingface_hub/blob/v0.19.3/src/huggingface_hub/inference/_client.py#L516\n\
          \n```python\n        response = self.post(json={\"inputs\": text}, model=model,\
          \ task=\"feature-extraction\")\n```\n\ni believe in `huggingface_hub` or\
          \ their backend, didn't allow pass `trust_remote_code=True`.\n\n2 solutions:\n\
          \n1. replace your HuggingfaceHubEmbedding with open source usage like this:\
          \ https://huggingface.co/jinaai/jina-embeddings-v2-small-en#usage \n2. use\
          \ jina embeddings api to get embeddings, while it is not free: https://jina.ai/embeddings/\n\
          \n\n\n"
        updatedAt: '2023-12-22T12:05:01.652Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - Sidh4rth7
    id: 65857b6db0b0e7e38a40becd
    type: comment
  author: bwang0911
  content: "hi @Sidh4rth7 do i understand correctly you're using Langchain? this is\
    \ because, i believe, langchain , didn't implement the `trust_remote_code=True`.\
    \ \n\ni just looked at the source of `InferenceClient`, this `InferenceClient`\
    \ is being used by `HuggingfaceHubEmbeddings`: \n\nhttps://github.com/huggingface/huggingface_hub/blob/v0.19.3/src/huggingface_hub/inference/_client.py#L516\n\
    \n```python\n        response = self.post(json={\"inputs\": text}, model=model,\
    \ task=\"feature-extraction\")\n```\n\ni believe in `huggingface_hub` or their\
    \ backend, didn't allow pass `trust_remote_code=True`.\n\n2 solutions:\n\n1. replace\
    \ your HuggingfaceHubEmbedding with open source usage like this: https://huggingface.co/jinaai/jina-embeddings-v2-small-en#usage\
    \ \n2. use jina embeddings api to get embeddings, while it is not free: https://jina.ai/embeddings/\n\
    \n\n\n"
  created_at: 2023-12-22 12:05:01+00:00
  edited: false
  hidden: false
  id: 65857b6db0b0e7e38a40becd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/deb315dd77275456a7a56ad7e846c2eb.svg
      fullname: Sidharth
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sidh4rth7
      type: user
    createdAt: '2024-01-12T05:35:50.000Z'
    data:
      edited: false
      editors:
      - Sidh4rth7
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.959937572479248
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/deb315dd77275456a7a56ad7e846c2eb.svg
          fullname: Sidharth
          isHf: false
          isPro: false
          name: Sidh4rth7
          type: user
        html: '<p>Thank you for your timely response! The first solution worked perfectly,
          since im doing research right now it was really helpful and jina actually
          works better than other embeddings for my use case.</p>

          '
        raw: Thank you for your timely response! The first solution worked perfectly,
          since im doing research right now it was really helpful and jina actually
          works better than other embeddings for my use case.
        updatedAt: '2024-01-12T05:35:50.614Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - bwang0911
    id: 65a0cfb6074bfce8025c4f2b
    type: comment
  author: Sidh4rth7
  content: Thank you for your timely response! The first solution worked perfectly,
    since im doing research right now it was really helpful and jina actually works
    better than other embeddings for my use case.
  created_at: 2024-01-12 05:35:50+00:00
  edited: false
  hidden: false
  id: 65a0cfb6074bfce8025c4f2b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/deb315dd77275456a7a56ad7e846c2eb.svg
      fullname: Sidharth
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sidh4rth7
      type: user
    createdAt: '2024-01-12T05:35:53.000Z'
    data:
      status: closed
    id: 65a0cfb95dfd8b9b1f3cd7a8
    type: status-change
  author: Sidh4rth7
  created_at: 2024-01-12 05:35:53+00:00
  id: 65a0cfb95dfd8b9b1f3cd7a8
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
      fullname: Bo Wang
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: bwang0911
      type: user
    createdAt: '2024-01-16T15:19:41.000Z'
    data:
      edited: false
      editors:
      - bwang0911
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.94949871301651
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63491dc83d8dc83a55cb749c/IoqJrOIaEnYO_S7si4KGp.jpeg?w=200&h=200&f=face
          fullname: Bo Wang
          isHf: false
          isPro: false
          name: bwang0911
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Sidh4rth7&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Sidh4rth7\">@<span class=\"\
          underline\">Sidh4rth7</span></a></span>\n\n\t</span></span> thanks for let\
          \ us know, i'm very happy to hear that!</p>\n"
        raw: '@Sidh4rth7 thanks for let us know, i''m very happy to hear that!'
        updatedAt: '2024-01-16T15:19:41.917Z'
      numEdits: 0
      reactions: []
    id: 65a69e8da3496c4fa4bd2664
    type: comment
  author: bwang0911
  content: '@Sidh4rth7 thanks for let us know, i''m very happy to hear that!'
  created_at: 2024-01-16 15:19:41+00:00
  edited: false
  hidden: false
  id: 65a69e8da3496c4fa4bd2664
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 17
repo_id: jinaai/jina-embeddings-v2-small-en
repo_type: model
status: closed
target_branch: null
title: Im facing this error while trying to use "jinaai/jina-embeddings-v2-small-en".
