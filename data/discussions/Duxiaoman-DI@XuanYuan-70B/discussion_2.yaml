!!python/object:huggingface_hub.community.DiscussionWithDetails
author: cc-01
conflicting_files: null
created_at: 2023-11-25 03:21:48+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c5ec3ea7ab7795054ab2d55844ed97ea.svg
      fullname: zhang c
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: cc-01
      type: user
    createdAt: '2023-11-25T03:21:48.000Z'
    data:
      edited: false
      editors:
      - cc-01
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.29703834652900696
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c5ec3ea7ab7795054ab2d55844ed97ea.svg
          fullname: zhang c
          isHf: false
          isPro: false
          name: cc-01
          type: user
        html: "<p>\u6267\u884C<br>import torch<br>from transformers import LlamaForCausalLM,\
          \ LlamaTokenizer</p>\n<p>model_name_or_path = \"XuanYuan-70B\"<br>tokenizer\
          \ = LlamaTokenizer.from_pretrained(model_name_or_path, use_fast=False, legacy=True)<br>model\
          \ = LlamaForCausalLM.from_pretrained(model_name_or_path, torch_dtype=torch.bfloat16,device_map=\"\
          auto\")<br>model.eval()<br>inputs = tokenizer(\"\u95EE\u9898\uFF1A\u674E\
          \u65F6\u73CD\u662F\u54EA\u4E00\u4E2A\u671D\u4EE3\u7684\u4EBA\uFF1F\u56DE\
          \u7B54\uFF1A\", return_tensors=\"pt\").to(\"cuda\")<br>outputs = model.generate(**inputs,\
          \ max_new_tokens=64, repetition_penalty=1.1)<br>outputs = tokenizer.decode(outputs.cpu()[0][len(inputs.input_ids[0]):],\
          \ skip_special_tokens=True)<br>print(outputs)<br>\u62A5\u9519\u3002</p>\n\
          <p>\u73AF\u5883\u4FE1\u606F\uFF1A<br>pytorch 2.1.1<br>python 3.9</p>\n"
        raw: "\r\n\u6267\u884C\r\nimport torch\r\nfrom transformers import LlamaForCausalLM,\
          \ LlamaTokenizer\r\n\r\nmodel_name_or_path = \"XuanYuan-70B\"\r\ntokenizer\
          \ = LlamaTokenizer.from_pretrained(model_name_or_path, use_fast=False, legacy=True)\r\
          \nmodel = LlamaForCausalLM.from_pretrained(model_name_or_path, torch_dtype=torch.bfloat16,device_map=\"\
          auto\")\r\nmodel.eval()\r\ninputs = tokenizer(\"\u95EE\u9898\uFF1A\u674E\
          \u65F6\u73CD\u662F\u54EA\u4E00\u4E2A\u671D\u4EE3\u7684\u4EBA\uFF1F\u56DE\
          \u7B54\uFF1A\", return_tensors=\"pt\").to(\"cuda\")\r\noutputs = model.generate(**inputs,\
          \ max_new_tokens=64, repetition_penalty=1.1)\r\noutputs = tokenizer.decode(outputs.cpu()[0][len(inputs.input_ids[0]):],\
          \ skip_special_tokens=True)\r\nprint(outputs)\r\n\u62A5\u9519\u3002\r\n\r\
          \n\u73AF\u5883\u4FE1\u606F\uFF1A\r\npytorch 2.1.1\r\npython 3.9\r\n"
        updatedAt: '2023-11-25T03:21:48.194Z'
      numEdits: 0
      reactions: []
    id: 6561684c2324e4d25ca134f3
    type: comment
  author: cc-01
  content: "\r\n\u6267\u884C\r\nimport torch\r\nfrom transformers import LlamaForCausalLM,\
    \ LlamaTokenizer\r\n\r\nmodel_name_or_path = \"XuanYuan-70B\"\r\ntokenizer = LlamaTokenizer.from_pretrained(model_name_or_path,\
    \ use_fast=False, legacy=True)\r\nmodel = LlamaForCausalLM.from_pretrained(model_name_or_path,\
    \ torch_dtype=torch.bfloat16,device_map=\"auto\")\r\nmodel.eval()\r\ninputs =\
    \ tokenizer(\"\u95EE\u9898\uFF1A\u674E\u65F6\u73CD\u662F\u54EA\u4E00\u4E2A\u671D\
    \u4EE3\u7684\u4EBA\uFF1F\u56DE\u7B54\uFF1A\", return_tensors=\"pt\").to(\"cuda\"\
    )\r\noutputs = model.generate(**inputs, max_new_tokens=64, repetition_penalty=1.1)\r\
    \noutputs = tokenizer.decode(outputs.cpu()[0][len(inputs.input_ids[0]):], skip_special_tokens=True)\r\
    \nprint(outputs)\r\n\u62A5\u9519\u3002\r\n\r\n\u73AF\u5883\u4FE1\u606F\uFF1A\r\
    \npytorch 2.1.1\r\npython 3.9\r\n"
  created_at: 2023-11-25 03:21:48+00:00
  edited: false
  hidden: false
  id: 6561684c2324e4d25ca134f3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/499f3086e09d52ef5b12bde843c0db34.svg
      fullname: Hongtao Liu
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: htliu
      type: user
    createdAt: '2023-11-25T03:46:32.000Z'
    data:
      edited: false
      editors:
      - htliu
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9527794122695923
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/499f3086e09d52ef5b12bde843c0db34.svg
          fullname: Hongtao Liu
          isHf: false
          isPro: false
          name: htliu
          type: user
        html: "<p>\u4F60\u597D\uFF0C\u8BE5\u95EE\u9898\u53EF\u80FD\u662F\u6A21\u578B\
          \u6743\u91CD\u672A\u4E0B\u8F7D\u5B8C\u6574\u5BFC\u81F4\u3002 \u8BF7\u68C0\
          \u67E5\u4E0B\u6BCF\u4E2Asafetensors\u6587\u4EF6\u7684sha256sum\u503C\uFF0C\
          \u662F\u5426\u4E0Ehuggingface \u4E0A\u4E00\u81F4\u3002 \u5982\u4E0D\u4E00\
          \u81F4\uFF0C\u9700\u8981\u91CD\u65B0\u4E0B\u8F7D</p>\n"
        raw: "\u4F60\u597D\uFF0C\u8BE5\u95EE\u9898\u53EF\u80FD\u662F\u6A21\u578B\u6743\
          \u91CD\u672A\u4E0B\u8F7D\u5B8C\u6574\u5BFC\u81F4\u3002 \u8BF7\u68C0\u67E5\
          \u4E0B\u6BCF\u4E2Asafetensors\u6587\u4EF6\u7684sha256sum\u503C\uFF0C\u662F\
          \u5426\u4E0Ehuggingface \u4E0A\u4E00\u81F4\u3002 \u5982\u4E0D\u4E00\u81F4\
          \uFF0C\u9700\u8981\u91CD\u65B0\u4E0B\u8F7D"
        updatedAt: '2023-11-25T03:46:32.999Z'
      numEdits: 0
      reactions: []
    id: 65616e186ef2a1d0f93511b8
    type: comment
  author: htliu
  content: "\u4F60\u597D\uFF0C\u8BE5\u95EE\u9898\u53EF\u80FD\u662F\u6A21\u578B\u6743\
    \u91CD\u672A\u4E0B\u8F7D\u5B8C\u6574\u5BFC\u81F4\u3002 \u8BF7\u68C0\u67E5\u4E0B\
    \u6BCF\u4E2Asafetensors\u6587\u4EF6\u7684sha256sum\u503C\uFF0C\u662F\u5426\u4E0E\
    huggingface \u4E0A\u4E00\u81F4\u3002 \u5982\u4E0D\u4E00\u81F4\uFF0C\u9700\u8981\
    \u91CD\u65B0\u4E0B\u8F7D"
  created_at: 2023-11-25 03:46:32+00:00
  edited: false
  hidden: false
  id: 65616e186ef2a1d0f93511b8
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: Duxiaoman-DI/XuanYuan-70B
repo_type: model
status: open
target_branch: null
title: 'SafetensorError: Error while deserializing header: MetadataIncompleteBuffer'
