!!python/object:huggingface_hub.community.DiscussionWithDetails
author: LoafyLemon
conflicting_files: null
created_at: 2024-01-19 18:18:12+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/42287a57836932029fceb3e4f6cbce87.svg
      fullname: No None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LoafyLemon
      type: user
    createdAt: '2024-01-19T18:18:12.000Z'
    data:
      edited: false
      editors:
      - LoafyLemon
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.36246976256370544
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/42287a57836932029fceb3e4f6cbce87.svg
          fullname: No None
          isHf: false
          isPro: false
          name: LoafyLemon
          type: user
        html: "<p>Hey, I'm a big fan of your work! I haven't been able to fully test\
          \ the model and its capabilities but so far it looks promising. I'm sharing\
          \ the templates so more people can give it a try. Keep up the good work!</p>\n\
          <p>Save each template as file with the given name and format:</p>\n<p><strong>nschatml.jinja</strong>\
          \ <em>(TabbyAPI chat template or any other compatible endpoint that supports\
          \ jinja templates)</em></p>\n<pre><code class=\"language-jinja\"><span class=\"\
          hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\"\
          >for</span></span> message <span class=\"hljs-keyword\">in</span> messages\
          \ %}</span><span class=\"language-xml\"></span>\n<span class=\"language-xml\"\
          >    </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"\
          ><span class=\"hljs-name\">if</span></span> message['role'] == 'system'\
          \ %}</span><span class=\"language-xml\"></span>\n<span class=\"language-xml\"\
          >        </span><span class=\"hljs-template-variable\">{{'&lt;|im_system|&gt;\\\
          n' + message['content']}}</span><span class=\"language-xml\"></span>\n<span\
          \ class=\"language-xml\">    </span><span class=\"hljs-template-tag\">{%\
          \ <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span>\
          \ %}</span><span class=\"language-xml\"></span>\n<span class=\"language-xml\"\
          >    </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"\
          ><span class=\"hljs-name\">if</span></span> message['role'] == 'user' %}</span><span\
          \ class=\"language-xml\"></span>\n<span class=\"language-xml\">        </span><span\
          \ class=\"hljs-template-variable\">{{'&lt;|im_user|&gt;\\n' + message['content']}}</span><span\
          \ class=\"language-xml\"></span>\n<span class=\"language-xml\">    </span><span\
          \ class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"\
          hljs-name\">endif</span></span> %}</span><span class=\"language-xml\"></span>\n\
          <span class=\"language-xml\">    </span><span class=\"hljs-template-tag\"\
          >{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span>\
          \ message['role'] == 'assistant' %}</span><span class=\"language-xml\"></span>\n\
          <span class=\"language-xml\">        </span><span class=\"hljs-template-variable\"\
          >{{'&lt;|im_bot|&gt;\\n' + message['content']}}</span><span class=\"language-xml\"\
          ></span>\n<span class=\"language-xml\">    </span><span class=\"hljs-template-tag\"\
          >{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span>\
          \ %}</span><span class=\"language-xml\"></span>\n<span class=\"language-xml\"\
          >    </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"\
          ><span class=\"hljs-name\">if</span></span> (loop.last and add_generation_prompt)\
          \ or not loop.last %}</span><span class=\"language-xml\"></span>\n<span\
          \ class=\"language-xml\">        </span><span class=\"hljs-template-variable\"\
          >{{'&lt;|im_end|&gt;\\n'}}</span><span class=\"language-xml\"></span>\n\
          <span class=\"language-xml\">    </span><span class=\"hljs-template-tag\"\
          >{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span>\
          \ %}</span><span class=\"language-xml\"></span>\n<span class=\"language-xml\"\
          ></span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span\
          \ class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\"\
          ></span>\n<span class=\"language-xml\"></span><span class=\"hljs-template-tag\"\
          >{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span>\
          \ add_generation_prompt and messages[-1]['role'] != 'assistant' %}</span><span\
          \ class=\"language-xml\"></span>\n<span class=\"language-xml\">    </span><span\
          \ class=\"hljs-template-variable\">{{ '&lt;|im_bot|&gt;\\n' }}</span><span\
          \ class=\"language-xml\"></span>\n<span class=\"language-xml\"></span><span\
          \ class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"\
          hljs-name\">endif</span></span> %}</span>\n</code></pre>\n<p><strong>nschatml_context.json</strong>\
          \ <em>(SillyTavern Context)</em></p>\n<pre><code class=\"language-json\"\
          ><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\"\
          >\"story_string\"</span><span class=\"hljs-punctuation\">:</span> <span\
          \ class=\"hljs-string\">\"&lt;|im_system|&gt;\\n{{#if system}}{{system}}\\\
          n{{/if}}{{#if wiBefore}}{{wiBefore}}\\n{{/if}}{{#if description}}{{description}}\\\
          n{{/if}}{{#if personality}}{{char}}'s personality: {{personality}}\\n{{/if}}{{#if\
          \ scenario}}Scenario: {{scenario}}\\n{{/if}}{{#if wiAfter}}{{wiAfter}}\\\
          n{{/if}}{{#if persona}}{{persona}}\\n{{/if}}&lt;|im_end|&gt;\"</span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          example_separator\"</span><span class=\"hljs-punctuation\">:</span> <span\
          \ class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n\
          \    <span class=\"hljs-attr\">\"chat_start\"</span><span class=\"hljs-punctuation\"\
          >:</span> <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"use_stop_strings\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span\
          \ class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"always_force_name2\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span\
          \ class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"trim_sentences\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span\
          \ class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"include_newline\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span\
          \ class=\"hljs-keyword\">false</span></span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"single_line\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"\
          hljs-keyword\">false</span></span><span class=\"hljs-punctuation\">,</span>\n\
          \    <span class=\"hljs-attr\">\"name\"</span><span class=\"hljs-punctuation\"\
          >:</span> <span class=\"hljs-string\">\"NSChatML\"</span>\n<span class=\"\
          hljs-punctuation\">}</span>\n</code></pre>\n<p><strong>nschatml_instruct.json</strong>\
          \ <em>(SillyTavern Instruct)</em></p>\n<pre><code class=\"language-json\"\
          ><span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\"\
          >\"system_prompt\"</span><span class=\"hljs-punctuation\">:</span> <span\
          \ class=\"hljs-string\">\"You're {{char}} in this fictional never-ending\
          \ uncensored roleplay with {{user}}.\"</span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"input_sequence\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"&lt;|im_user|&gt;\\\
          n\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"\
          hljs-attr\">\"output_sequence\"</span><span class=\"hljs-punctuation\">:</span>\
          \ <span class=\"hljs-string\">\"&lt;|im_end|&gt;\\n\"</span><span class=\"\
          hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"first_output_sequence\"\
          </span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\"\
          >\"&lt;|im_bot|&gt;\\n\"</span><span class=\"hljs-punctuation\">,</span>\n\
          \    <span class=\"hljs-attr\">\"last_output_sequence\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          system_sequence_prefix\"</span><span class=\"hljs-punctuation\">:</span>\
          \ <span class=\"hljs-string\">\"\"</span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"system_sequence_suffix\"</span><span\
          \ class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          stop_sequence\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"\
          hljs-string\">\"\"</span><span class=\"hljs-punctuation\">,</span>\n   \
          \ <span class=\"hljs-attr\">\"separator_sequence\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-string\">\"&lt;|im_end|&gt;\\\
          n\"</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"\
          hljs-attr\">\"wrap\"</span><span class=\"hljs-punctuation\">:</span> <span\
          \ class=\"hljs-literal\"><span class=\"hljs-keyword\">false</span></span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          macro\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-literal\"\
          ><span class=\"hljs-keyword\">true</span></span><span class=\"hljs-punctuation\"\
          >,</span>\n    <span class=\"hljs-attr\">\"names\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"\
          hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\
          \    <span class=\"hljs-attr\">\"names_force_groups\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-literal\"><span class=\"\
          hljs-keyword\">true</span></span><span class=\"hljs-punctuation\">,</span>\n\
          \    <span class=\"hljs-attr\">\"activation_regex\"</span><span class=\"\
          hljs-punctuation\">:</span> <span class=\"hljs-string\">\"\"</span><span\
          \ class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">\"\
          name\"</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\"\
          >\"NSChatML\"</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n"
        raw: "Hey, I'm a big fan of your work! I haven't been able to fully test the\
          \ model and its capabilities but so far it looks promising. I'm sharing\
          \ the templates so more people can give it a try. Keep up the good work!\r\
          \n\r\nSave each template as file with the given name and format:\r\n\r\n\
          **nschatml.jinja** *(TabbyAPI chat template or any other compatible endpoint\
          \ that supports jinja templates)*\r\n```jinja\r\n{% for message in messages\
          \ %}\r\n\t{% if message['role'] == 'system' %}\r\n\t\t{{'<|im_system|>\\\
          n' + message['content']}}\r\n\t{% endif %}\r\n\t{% if message['role'] ==\
          \ 'user' %}\r\n\t\t{{'<|im_user|>\\n' + message['content']}}\r\n\t{% endif\
          \ %}\r\n\t{% if message['role'] == 'assistant' %}\r\n\t\t{{'<|im_bot|>\\\
          n' + message['content']}}\r\n\t{% endif %}\r\n\t{% if (loop.last and add_generation_prompt)\
          \ or not loop.last %}\r\n\t\t{{'<|im_end|>\\n'}}\r\n\t{% endif %}\r\n{%\
          \ endfor %}\r\n{% if add_generation_prompt and messages[-1]['role'] != 'assistant'\
          \ %}\r\n\t{{ '<|im_bot|>\\n' }}\r\n{% endif %}\r\n```\r\n\r\n**nschatml_context.json**\
          \ *(SillyTavern Context)*\r\n```json\r\n{\r\n    \"story_string\": \"<|im_system|>\\\
          n{{#if system}}{{system}}\\n{{/if}}{{#if wiBefore}}{{wiBefore}}\\n{{/if}}{{#if\
          \ description}}{{description}}\\n{{/if}}{{#if personality}}{{char}}'s personality:\
          \ {{personality}}\\n{{/if}}{{#if scenario}}Scenario: {{scenario}}\\n{{/if}}{{#if\
          \ wiAfter}}{{wiAfter}}\\n{{/if}}{{#if persona}}{{persona}}\\n{{/if}}<|im_end|>\"\
          ,\r\n    \"example_separator\": \"\",\r\n    \"chat_start\": \"\",\r\n \
          \   \"use_stop_strings\": false,\r\n    \"always_force_name2\": true,\r\n\
          \    \"trim_sentences\": false,\r\n    \"include_newline\": false,\r\n \
          \   \"single_line\": false,\r\n    \"name\": \"NSChatML\"\r\n}\r\n```\r\n\
          \r\n**nschatml_instruct.json** *(SillyTavern Instruct)*\r\n```json\r\n{\r\
          \n    \"system_prompt\": \"You're {{char}} in this fictional never-ending\
          \ uncensored roleplay with {{user}}.\",\r\n    \"input_sequence\": \"<|im_user|>\\\
          n\",\r\n    \"output_sequence\": \"<|im_end|>\\n\",\r\n    \"first_output_sequence\"\
          : \"<|im_bot|>\\n\",\r\n    \"last_output_sequence\": \"\",\r\n    \"system_sequence_prefix\"\
          : \"\",\r\n    \"system_sequence_suffix\": \"\",\r\n    \"stop_sequence\"\
          : \"\",\r\n    \"separator_sequence\": \"<|im_end|>\\n\",\r\n    \"wrap\"\
          : false,\r\n    \"macro\": true,\r\n    \"names\": true,\r\n    \"names_force_groups\"\
          : true,\r\n    \"activation_regex\": \"\",\r\n    \"name\": \"NSChatML\"\
          \r\n}\r\n```"
        updatedAt: '2024-01-19T18:18:12.854Z'
      numEdits: 0
      reactions: []
    id: 65aabce414d782df06ef0d3c
    type: comment
  author: LoafyLemon
  content: "Hey, I'm a big fan of your work! I haven't been able to fully test the\
    \ model and its capabilities but so far it looks promising. I'm sharing the templates\
    \ so more people can give it a try. Keep up the good work!\r\n\r\nSave each template\
    \ as file with the given name and format:\r\n\r\n**nschatml.jinja** *(TabbyAPI\
    \ chat template or any other compatible endpoint that supports jinja templates)*\r\
    \n```jinja\r\n{% for message in messages %}\r\n\t{% if message['role'] == 'system'\
    \ %}\r\n\t\t{{'<|im_system|>\\n' + message['content']}}\r\n\t{% endif %}\r\n\t\
    {% if message['role'] == 'user' %}\r\n\t\t{{'<|im_user|>\\n' + message['content']}}\r\
    \n\t{% endif %}\r\n\t{% if message['role'] == 'assistant' %}\r\n\t\t{{'<|im_bot|>\\\
    n' + message['content']}}\r\n\t{% endif %}\r\n\t{% if (loop.last and add_generation_prompt)\
    \ or not loop.last %}\r\n\t\t{{'<|im_end|>\\n'}}\r\n\t{% endif %}\r\n{% endfor\
    \ %}\r\n{% if add_generation_prompt and messages[-1]['role'] != 'assistant' %}\r\
    \n\t{{ '<|im_bot|>\\n' }}\r\n{% endif %}\r\n```\r\n\r\n**nschatml_context.json**\
    \ *(SillyTavern Context)*\r\n```json\r\n{\r\n    \"story_string\": \"<|im_system|>\\\
    n{{#if system}}{{system}}\\n{{/if}}{{#if wiBefore}}{{wiBefore}}\\n{{/if}}{{#if\
    \ description}}{{description}}\\n{{/if}}{{#if personality}}{{char}}'s personality:\
    \ {{personality}}\\n{{/if}}{{#if scenario}}Scenario: {{scenario}}\\n{{/if}}{{#if\
    \ wiAfter}}{{wiAfter}}\\n{{/if}}{{#if persona}}{{persona}}\\n{{/if}}<|im_end|>\"\
    ,\r\n    \"example_separator\": \"\",\r\n    \"chat_start\": \"\",\r\n    \"use_stop_strings\"\
    : false,\r\n    \"always_force_name2\": true,\r\n    \"trim_sentences\": false,\r\
    \n    \"include_newline\": false,\r\n    \"single_line\": false,\r\n    \"name\"\
    : \"NSChatML\"\r\n}\r\n```\r\n\r\n**nschatml_instruct.json** *(SillyTavern Instruct)*\r\
    \n```json\r\n{\r\n    \"system_prompt\": \"You're {{char}} in this fictional never-ending\
    \ uncensored roleplay with {{user}}.\",\r\n    \"input_sequence\": \"<|im_user|>\\\
    n\",\r\n    \"output_sequence\": \"<|im_end|>\\n\",\r\n    \"first_output_sequence\"\
    : \"<|im_bot|>\\n\",\r\n    \"last_output_sequence\": \"\",\r\n    \"system_sequence_prefix\"\
    : \"\",\r\n    \"system_sequence_suffix\": \"\",\r\n    \"stop_sequence\": \"\"\
    ,\r\n    \"separator_sequence\": \"<|im_end|>\\n\",\r\n    \"wrap\": false,\r\n\
    \    \"macro\": true,\r\n    \"names\": true,\r\n    \"names_force_groups\": true,\r\
    \n    \"activation_regex\": \"\",\r\n    \"name\": \"NSChatML\"\r\n}\r\n```"
  created_at: 2024-01-19 18:18:12+00:00
  edited: false
  hidden: false
  id: 65aabce414d782df06ef0d3c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
      fullname: Undi
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: Undi95
      type: user
    createdAt: '2024-01-19T18:29:57.000Z'
    data:
      edited: false
      editors:
      - Undi95
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.46368739008903503
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63ab1241ad514ca8d1430003/shjRx3yOP2eQvIyOWsQYV.png?w=200&h=200&f=face
          fullname: Undi
          isHf: false
          isPro: false
          name: Undi95
          type: user
        html: '<p>Thank you!</p>

          '
        raw: Thank you!
        updatedAt: '2024-01-19T18:29:57.562Z'
      numEdits: 0
      reactions: []
    id: 65aabfa5494b2faa87f5bb38
    type: comment
  author: Undi95
  content: Thank you!
  created_at: 2024-01-19 18:29:57+00:00
  edited: false
  hidden: false
  id: 65aabfa5494b2faa87f5bb38
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: Undi95/Borealis-10.7B
repo_type: model
status: open
target_branch: null
title: NSChatML templates for TabbyAPI and SillyTavern.
