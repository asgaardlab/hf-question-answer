!!python/object:huggingface_hub.community.DiscussionWithDetails
author: matatonic
conflicting_files: null
created_at: 2023-11-08 03:25:32+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0de1193bdf4be2366a54a1d71fc2da4f.svg
      fullname: matatonic
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: matatonic
      type: user
    createdAt: '2023-11-08T03:25:32.000Z'
    data:
      edited: false
      editors:
      - matatonic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9775177836418152
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0de1193bdf4be2366a54a1d71fc2da4f.svg
          fullname: matatonic
          isHf: false
          isPro: false
          name: matatonic
          type: user
        html: '<p>Any chance you could also upload a safetensors version?</p>

          '
        raw: Any chance you could also upload a safetensors version?
        updatedAt: '2023-11-08T03:25:32.816Z'
      numEdits: 0
      reactions: []
    id: 654affac589f50f1b1bcf955
    type: comment
  author: matatonic
  content: Any chance you could also upload a safetensors version?
  created_at: 2023-11-08 03:25:32+00:00
  edited: false
  hidden: false
  id: 654affac589f50f1b1bcf955
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-11-30T08:20:49.000Z'
    data:
      edited: false
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6163133978843689
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: "<p>* Use the following script to convert your local pytorch_model bin\
          \ files to float16 (you can also choose bfloat16) + safetensors all in one\
          \ go:</p>\n<ul>\n<li><a rel=\"nofollow\" href=\"https://github.com/oobabooga/text-generation-webui/blob/main/convert-to-safetensors.py\"\
          >https://github.com/oobabooga/text-generation-webui/blob/main/convert-to-safetensors.py</a><br>\
          \ (best for sharding and float16/FP16 or bfloat16/BF16 conversion)</li>\n\
          </ul>\n<p>Example to convert <a href=\"https://huggingface.co/WizardLM/WizardLM-70B-V1.0\"\
          >WizardLM 70B V1.0</a> directly to float16 safetensors in 10GB shards:</p>\n\
          <pre><code>python convert-to-safetensors.py ~/original/WizardLM-70B-V1.0\
          \ --output ~/float16_safetensored/WizardLM-70B-V1.0 --max-shard-size 10GB\n\
          </code></pre>\n<p>Use <code>--bf16</code> if you'd like to try bfloat16\
          \ instead, but note that there are concerns about quantization quality \u2013\
          \ <a rel=\"nofollow\" href=\"https://github.com/turboderp/exllamav2/issues/30#issuecomment-1719009289\"\
          >https://github.com/turboderp/exllamav2/issues/30#issuecomment-1719009289</a></p>\n\
          <p>** Use any one of the following scripts to convert your local pytorch_model\
          \ bin files to safetensors:</p>\n<ul>\n<li><a rel=\"nofollow\" href=\"https://github.com/turboderp/exllamav2/blob/master/util/convert_safetensors.py\"\
          >https://github.com/turboderp/exllamav2/blob/master/util/convert_safetensors.py</a>\
          \ (official ExLlamaV2)</li>\n<li><a href=\"https://huggingface.co/Panchovix/airoboros-l2-70b-gpt4-1.4.1-safetensors/blob/main/bin2safetensors/convert.py\"\
          >https://huggingface.co/Panchovix/airoboros-l2-70b-gpt4-1.4.1-safetensors/blob/main/bin2safetensors/convert.py</a>\
          \ (recommended)</li>\n<li><a rel=\"nofollow\" href=\"https://gist.github.com/epicfilemcnulty/1f55fd96b08f8d4d6693293e37b4c55e#file-2safetensors-py\"\
          >https://gist.github.com/epicfilemcnulty/1f55fd96b08f8d4d6693293e37b4c55e#file-2safetensors-py</a></li>\n\
          </ul>\n"
        raw: "\\* Use the following script to convert your local pytorch_model bin\
          \ files to float16 (you can also choose bfloat16) + safetensors all in one\
          \ go:\n\n- https://github.com/oobabooga/text-generation-webui/blob/main/convert-to-safetensors.py\n\
          \ (best for sharding and float16/FP16 or bfloat16/BF16 conversion)\n\nExample\
          \ to convert [WizardLM 70B V1.0](https://huggingface.co/WizardLM/WizardLM-70B-V1.0)\
          \ directly to float16 safetensors in 10GB shards:\n\n```\npython convert-to-safetensors.py\
          \ ~/original/WizardLM-70B-V1.0 --output ~/float16_safetensored/WizardLM-70B-V1.0\
          \ --max-shard-size 10GB\n```\n\nUse `--bf16` if you'd like to try bfloat16\
          \ instead, but note that there are concerns about quantization quality \u2013\
          \ https://github.com/turboderp/exllamav2/issues/30#issuecomment-1719009289\n\
          \n\\*\\* Use any one of the following scripts to convert your local pytorch_model\
          \ bin files to safetensors:\n\n- https://github.com/turboderp/exllamav2/blob/master/util/convert_safetensors.py\
          \ (official ExLlamaV2)\n- https://huggingface.co/Panchovix/airoboros-l2-70b-gpt4-1.4.1-safetensors/blob/main/bin2safetensors/convert.py\
          \ (recommended)\n- https://gist.github.com/epicfilemcnulty/1f55fd96b08f8d4d6693293e37b4c55e#file-2safetensors-py"
        updatedAt: '2023-11-30T08:20:49.168Z'
      numEdits: 0
      reactions: []
    id: 656845e1a91be44ecb34126d
    type: comment
  author: Thireus
  content: "\\* Use the following script to convert your local pytorch_model bin files\
    \ to float16 (you can also choose bfloat16) + safetensors all in one go:\n\n-\
    \ https://github.com/oobabooga/text-generation-webui/blob/main/convert-to-safetensors.py\n\
    \ (best for sharding and float16/FP16 or bfloat16/BF16 conversion)\n\nExample\
    \ to convert [WizardLM 70B V1.0](https://huggingface.co/WizardLM/WizardLM-70B-V1.0)\
    \ directly to float16 safetensors in 10GB shards:\n\n```\npython convert-to-safetensors.py\
    \ ~/original/WizardLM-70B-V1.0 --output ~/float16_safetensored/WizardLM-70B-V1.0\
    \ --max-shard-size 10GB\n```\n\nUse `--bf16` if you'd like to try bfloat16 instead,\
    \ but note that there are concerns about quantization quality \u2013 https://github.com/turboderp/exllamav2/issues/30#issuecomment-1719009289\n\
    \n\\*\\* Use any one of the following scripts to convert your local pytorch_model\
    \ bin files to safetensors:\n\n- https://github.com/turboderp/exllamav2/blob/master/util/convert_safetensors.py\
    \ (official ExLlamaV2)\n- https://huggingface.co/Panchovix/airoboros-l2-70b-gpt4-1.4.1-safetensors/blob/main/bin2safetensors/convert.py\
    \ (recommended)\n- https://gist.github.com/epicfilemcnulty/1f55fd96b08f8d4d6693293e37b4c55e#file-2safetensors-py"
  created_at: 2023-11-30 08:20:49+00:00
  edited: false
  hidden: false
  id: 656845e1a91be44ecb34126d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2023-11-30T08:54:13.000Z'
    data:
      edited: false
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9990751147270203
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p>Thanks but I don''t really see why I would want / need to do that</p>

          '
        raw: Thanks but I don't really see why I would want / need to do that
        updatedAt: '2023-11-30T08:54:13.415Z'
      numEdits: 0
      reactions: []
    id: 65684db555ec7938e6e37dd5
    type: comment
  author: ehartford
  content: Thanks but I don't really see why I would want / need to do that
  created_at: 2023-11-30 08:54:13+00:00
  edited: false
  hidden: false
  id: 65684db555ec7938e6e37dd5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
      fullname: Nicolas Patry
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Narsil
      type: user
    createdAt: '2023-12-01T16:43:16.000Z'
    data:
      edited: true
      editors:
      - Narsil
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9533536434173584
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1608285816082-5e2967b819407e3277369b95.png?w=200&h=200&f=face
          fullname: Nicolas Patry
          isHf: true
          isPro: false
          name: Narsil
          type: user
        html: '<p>Hi, creator of safetensors here.</p>

          <p>The issue with pickle files is that they are not safe. Anyone can write
          malicious code that''s going to be executed on your machine.<br>You can
          check: <a href="https://huggingface.co/Narsil/totallysafe">https://huggingface.co/Narsil/totallysafe</a>
          Weird things will happen as soon as you open this file. And things will
          continue to be tricky after you have closed your python session.</p>

          <p>I promise this is harmless since I actually wrote it, but should give
          you an impression of how BAD pickle can be.</p>

          <p>Users will not know you, therefore not necessarily trust what you output.
          Having a safetensors file, means at least they should be safe from arbitrary
          code execution, and the worst that could happen is just loading a problem
          not fit for what they intend to do.<br>You can check out more reasons here:
          <a rel="nofollow" href="https://github.com/huggingface/safetensors#yet-another-format-">https://github.com/huggingface/safetensors#yet-another-format-</a></p>

          <p>For instance it loads files 2x faster than pickle (10x for CPU actually).</p>

          '
        raw: "Hi, creator of safetensors here.\n\nThe issue with pickle files is that\
          \ they are not safe. Anyone can write malicious code that's going to be\
          \ executed on your machine. \nYou can check: https://huggingface.co/Narsil/totallysafe\
          \ Weird things will happen as soon as you open this file. And things will\
          \ continue to be tricky after you have closed your python session.\n\nI\
          \ promise this is harmless since I actually wrote it, but should give you\
          \ an impression of how BAD pickle can be.\n\nUsers will not know you, therefore\
          \ not necessarily trust what you output. Having a safetensors file, means\
          \ at least they should be safe from arbitrary code execution, and the worst\
          \ that could happen is just loading a problem not fit for what they intend\
          \ to do.\nYou can check out more reasons here: https://github.com/huggingface/safetensors#yet-another-format-\n\
          \nFor instance it loads files 2x faster than pickle (10x for CPU actually)."
        updatedAt: '2023-12-01T18:19:48.290Z'
      numEdits: 1
      reactions: []
    id: 656a0d249dcedd16d5c124b8
    type: comment
  author: Narsil
  content: "Hi, creator of safetensors here.\n\nThe issue with pickle files is that\
    \ they are not safe. Anyone can write malicious code that's going to be executed\
    \ on your machine. \nYou can check: https://huggingface.co/Narsil/totallysafe\
    \ Weird things will happen as soon as you open this file. And things will continue\
    \ to be tricky after you have closed your python session.\n\nI promise this is\
    \ harmless since I actually wrote it, but should give you an impression of how\
    \ BAD pickle can be.\n\nUsers will not know you, therefore not necessarily trust\
    \ what you output. Having a safetensors file, means at least they should be safe\
    \ from arbitrary code execution, and the worst that could happen is just loading\
    \ a problem not fit for what they intend to do.\nYou can check out more reasons\
    \ here: https://github.com/huggingface/safetensors#yet-another-format-\n\nFor\
    \ instance it loads files 2x faster than pickle (10x for CPU actually)."
  created_at: 2023-12-01 16:43:16+00:00
  edited: true
  hidden: false
  id: 656a0d249dcedd16d5c124b8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2023-12-01T19:13:30.000Z'
    data:
      edited: false
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9805304408073425
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: "<p>I understand that, but as the author of the the model I know what's\
          \ in it, and also primarily this is repackaged and quantized by TheBloke,\
          \ and he and I also trust each other.</p>\n<p>I just train models, he packages\
          \ them for distribution.</p>\n<p>I don't see how adding an extra step in\
          \ the publishing process benefits myself personally.</p>\n<p>The person\
          \ you should talk to is <span data-props=\"{&quot;user&quot;:&quot;winglian&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/winglian\"\
          >@<span class=\"underline\">winglian</span></a></span>\n\n\t</span></span>.\
          \  If he updates Axolotl so it uses safetensor format by default, then that\
          \ is what I'll publish.</p>\n"
        raw: 'I understand that, but as the author of the the model I know what''s
          in it, and also primarily this is repackaged and quantized by TheBloke,
          and he and I also trust each other.


          I just train models, he packages them for distribution.


          I don''t see how adding an extra step in the publishing process benefits
          myself personally.


          The person you should talk to is @winglian.  If he updates Axolotl so it
          uses safetensor format by default, then that is what I''ll publish.'
        updatedAt: '2023-12-01T19:13:30.245Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - julien-c
    id: 656a305a8dffbab5afe0805e
    type: comment
  author: ehartford
  content: 'I understand that, but as the author of the the model I know what''s in
    it, and also primarily this is repackaged and quantized by TheBloke, and he and
    I also trust each other.


    I just train models, he packages them for distribution.


    I don''t see how adding an extra step in the publishing process benefits myself
    personally.


    The person you should talk to is @winglian.  If he updates Axolotl so it uses
    safetensor format by default, then that is what I''ll publish.'
  created_at: 2023-12-01 19:13:30+00:00
  edited: false
  hidden: false
  id: 656a305a8dffbab5afe0805e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0de1193bdf4be2366a54a1d71fc2da4f.svg
      fullname: matatonic
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: matatonic
      type: user
    createdAt: '2023-12-02T00:35:19.000Z'
    data:
      edited: false
      editors:
      - matatonic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9849761128425598
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0de1193bdf4be2366a54a1d71fc2da4f.svg
          fullname: matatonic
          isHf: false
          isPro: false
          name: matatonic
          type: user
        html: "<p>My original reason for asking was to convert to exl2 quants, which\
          \ The Bloke doesn't do. I had been unable to convert 70B models so far using\
          \ the scripts I had (resource limits) - however, the above Panchovix script\
          \ linked by <span data-props=\"{&quot;user&quot;:&quot;Thireus&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/Thireus\"\
          >@<span class=\"underline\">Thireus</span></a></span>\n\n\t</span></span>\
          \ works perfectly and doesn't use crazy resources - Thanks! With that I\
          \ was able to convert it myself.<br>I'd add though the HuggingFace build\
          \ in tools to convert also didn't work on this model, so my thinking is\
          \ it's a waste for so many other people to convert it using various tools\
          \ of varying quality, when it could be converted once at the source and\
          \ quality assured. TheBloke used to release HF fp16 formats for some models,\
          \ which was handy, but he doesn't do that often anymore.<br>Regardless,\
          \ as for my original request I don't need you to provide it anymore.</p>\n"
        raw: 'My original reason for asking was to convert to exl2 quants, which The
          Bloke doesn''t do. I had been unable to convert 70B models so far using
          the scripts I had (resource limits) - however, the above Panchovix script
          linked by @Thireus works perfectly and doesn''t use crazy resources - Thanks!
          With that I was able to convert it myself.

          I''d add though the HuggingFace build in tools to convert also didn''t work
          on this model, so my thinking is it''s a waste for so many other people
          to convert it using various tools of varying quality, when it could be converted
          once at the source and quality assured. TheBloke used to release HF fp16
          formats for some models, which was handy, but he doesn''t do that often
          anymore.

          Regardless, as for my original request I don''t need you to provide it anymore.'
        updatedAt: '2023-12-02T00:35:19.499Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - ehartford
    id: 656a7bc7f7be0986b43771b7
    type: comment
  author: matatonic
  content: 'My original reason for asking was to convert to exl2 quants, which The
    Bloke doesn''t do. I had been unable to convert 70B models so far using the scripts
    I had (resource limits) - however, the above Panchovix script linked by @Thireus
    works perfectly and doesn''t use crazy resources - Thanks! With that I was able
    to convert it myself.

    I''d add though the HuggingFace build in tools to convert also didn''t work on
    this model, so my thinking is it''s a waste for so many other people to convert
    it using various tools of varying quality, when it could be converted once at
    the source and quality assured. TheBloke used to release HF fp16 formats for some
    models, which was handy, but he doesn''t do that often anymore.

    Regardless, as for my original request I don''t need you to provide it anymore.'
  created_at: 2023-12-02 00:35:19+00:00
  edited: false
  hidden: false
  id: 656a7bc7f7be0986b43771b7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2023-12-02T00:46:51.000Z'
    data:
      edited: false
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9750928282737732
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p>Fair enough - I think you might wanna chat with wing though, safetensors
          would certainly get more adoption if it was default output format in Axolotl</p>

          '
        raw: Fair enough - I think you might wanna chat with wing though, safetensors
          would certainly get more adoption if it was default output format in Axolotl
        updatedAt: '2023-12-02T00:46:51.070Z'
      numEdits: 0
      reactions: []
      relatedEventId: 656a7e7b90d556ffa6a8ee55
    id: 656a7e7b90d556ffa6a8ee53
    type: comment
  author: ehartford
  content: Fair enough - I think you might wanna chat with wing though, safetensors
    would certainly get more adoption if it was default output format in Axolotl
  created_at: 2023-12-02 00:46:51+00:00
  edited: false
  hidden: false
  id: 656a7e7b90d556ffa6a8ee53
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2023-12-02T00:46:51.000Z'
    data:
      status: closed
    id: 656a7e7b90d556ffa6a8ee55
    type: status-change
  author: ehartford
  created_at: 2023-12-02 00:46:51+00:00
  id: 656a7e7b90d556ffa6a8ee55
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: cognitivecomputations/dolphin-2.2-70b
repo_type: model
status: closed
target_branch: null
title: Safetensors version?
