!!python/object:huggingface_hub.community.DiscussionWithDetails
author: farazk86
conflicting_files: null
created_at: 2023-04-14 17:36:25+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
      fullname: Faraz Khan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: farazk86
      type: user
    createdAt: '2023-04-14T18:36:25.000Z'
    data:
      edited: false
      editors:
      - farazk86
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
          fullname: Faraz Khan
          isHf: false
          isPro: false
          name: farazk86
          type: user
        html: "<p>Hi all,</p>\n<p>I'm using this model to recognize persons, organizations\
          \ and locations in text, and Ive noticed that it fails to produce reliable\
          \ results for lengthy texts</p>\n<p>I'm using a locally downloaded model\
          \ and I am not talking about the Hosted Interface API of huggingface</p>\n\
          <p>For example, for the below text (copied from a financial news article),\
          \ the last line containing the obvious names of \"Jim\",  \"James\", \"\
          Ben\" and \"Toby\" are missed entirely by the model.</p>\n<pre><code>HSBC\
          \ has swooped to buy the UK arm of collapsed US Silicon Valley Bank (SVB),\
          \ bringing relief to UK tech firms who warned they could go bust without\
          \ help.\n\nCustomers and businesses who had been unable to withdraw their\
          \ money will now be able to access it as normal.\n\nThe government and the\
          \ Bank of England led the talks and worked through the night to scramble\
          \ together the deal, which involves no taxpayer money.\n\nHSBC said it paid\
          \ just \xA31 for the SVB's UK arm.\n\nSilicon Valley Bank - which specialised\
          \ in lending to technology companies - was shut down by US regulators on\
          \ Friday in what was the largest failure of a US bank since 2008.\n\nIts\
          \ collapse sent shockwaves across the tech industry over the possible impact\
          \ it could have on businesses, with some firms telling the BBC they could\
          \ go bust if deposits were not secured.\n\nWith fears over how firms would\
          \ be able to access cash on Monday morning, frantic talks were held between\
          \ Chancellor Jeremy Hunt, the prime minister, the Bank of England governor,\
          \ HSBC bosses and civil servants to find a solution.\n\nThe Bank of England\
          \ said no other UK banks had been \"materially affected\" by SVB's collapse\
          \ and said the banking system remained \"safe, sound, and well capitalised\"\
          .\n\nAlthough the UK arm of SVB was small with just over 3,000 business\
          \ customers, its collapse would have presented a risk for a sector which\
          \ the government views as pivotal to the UK's future economic success.\n\
          \nMr Hunt said some of the firms only had bank accounts with SVB UK, \"\
          so for that reason we were faced with a situation where we could have seen\
          \ some of our most important companies, our most strategic companies, wiped\
          \ out and that would have been extremely dangerous\".\n\nHowever, he added\
          \ there was \"never a systemic risk to our financial stability in the UK\"\
          .\n\nToby Mather, chief executive and co-founder of Lingumi, an education\
          \ technology start-up, said 85% of its cash was tied up with the bank and\
          \ he had had a very \"anxious weekend\".\n\n\"We had enough money in bank\
          \ accounts outside the UK and enough revenue coming through each week from\
          \ our customers that we could look our staff in the eyes at nine o'clock\
          \ this morning and say we can make payroll in two weeks, but it would have\
          \ been very uncertain from then\", Mr Mather said.\n\nSebastian Weidt, chief\
          \ executive of Universal Quantum, a tech company which employs about 40\
          \ people and held all its funds with SVB, said the deal was a \"huge relief\"\
          \ after an \"unbelievably stressful\" few days.\n\nAlthough its US parent\
          \ was in financial trouble, Silicon Valley Bank UK was in reasonable financial\
          \ health when it was bought for \xA31 by HSBC.\n\nIt had adequate capital\
          \ and was making reasonable profits. Bank of England sources confirmed this\
          \ weekend's intervention was more a preventive strike before the collapse\
          \ of its US parent sparked mass withdrawals from the UK business.\n\nWhat\
          \ that means is that HSBC got one hell of a deal which it owed to its size\
          \ and strength - with regulators confident that Europe's largest bank could\
          \ easily take on any risk from SVB UK's customers.\n\nIt seems the only\
          \ thing wrong with SVB UK was its name. While not a Lehman Brothers moment,\
          \ what the collapse of SVB US has highlighted is that many banks are riskier\
          \ than they look on paper as they have all sustained losses on their investments\
          \ in government bonds as interest rates have soared - pushing their value\
          \ down.\n\nOne reason why bank shares are lower again on Monday as that\
          \ thought sinks in with jittery investors. Nice to meet you Jim. Nice to\
          \ meet you James. Nice to meet you Ben. Hello Toby.\n</code></pre>\n<p>But\
          \ if I reduce the text by half, or move the last paragraph to the top, then\
          \ the names are recognized as \"PER\" as expected.</p>\n<p>Is this a known\
          \ issue? that for lengthy texts, it just gives up after a certain number\
          \ of characters and anything after this it fails to detect?</p>\n<p>Thanks</p>\n"
        raw: "Hi all,\r\n\r\nI'm using this model to recognize persons, organizations\
          \ and locations in text, and Ive noticed that it fails to produce reliable\
          \ results for lengthy texts\r\n\r\nI'm using a locally downloaded model\
          \ and I am not talking about the Hosted Interface API of huggingface\r\n\
          \r\nFor example, for the below text (copied from a financial news article),\
          \ the last line containing the obvious names of \"Jim\",  \"James\", \"\
          Ben\" and \"Toby\" are missed entirely by the model.\r\n```\r\nHSBC has\
          \ swooped to buy the UK arm of collapsed US Silicon Valley Bank (SVB), bringing\
          \ relief to UK tech firms who warned they could go bust without help.\r\n\
          \r\nCustomers and businesses who had been unable to withdraw their money\
          \ will now be able to access it as normal.\r\n\r\nThe government and the\
          \ Bank of England led the talks and worked through the night to scramble\
          \ together the deal, which involves no taxpayer money.\r\n\r\nHSBC said\
          \ it paid just \xA31 for the SVB's UK arm.\r\n\r\nSilicon Valley Bank -\
          \ which specialised in lending to technology companies - was shut down by\
          \ US regulators on Friday in what was the largest failure of a US bank since\
          \ 2008.\r\n\r\nIts collapse sent shockwaves across the tech industry over\
          \ the possible impact it could have on businesses, with some firms telling\
          \ the BBC they could go bust if deposits were not secured.\r\n\r\nWith fears\
          \ over how firms would be able to access cash on Monday morning, frantic\
          \ talks were held between Chancellor Jeremy Hunt, the prime minister, the\
          \ Bank of England governor, HSBC bosses and civil servants to find a solution.\r\
          \n\r\nThe Bank of England said no other UK banks had been \"materially affected\"\
          \ by SVB's collapse and said the banking system remained \"safe, sound,\
          \ and well capitalised\".\r\n\r\nAlthough the UK arm of SVB was small with\
          \ just over 3,000 business customers, its collapse would have presented\
          \ a risk for a sector which the government views as pivotal to the UK's\
          \ future economic success.\r\n\r\nMr Hunt said some of the firms only had\
          \ bank accounts with SVB UK, \"so for that reason we were faced with a situation\
          \ where we could have seen some of our most important companies, our most\
          \ strategic companies, wiped out and that would have been extremely dangerous\"\
          .\r\n\r\nHowever, he added there was \"never a systemic risk to our financial\
          \ stability in the UK\".\r\n\r\nToby Mather, chief executive and co-founder\
          \ of Lingumi, an education technology start-up, said 85% of its cash was\
          \ tied up with the bank and he had had a very \"anxious weekend\".\r\n\r\
          \n\"We had enough money in bank accounts outside the UK and enough revenue\
          \ coming through each week from our customers that we could look our staff\
          \ in the eyes at nine o'clock this morning and say we can make payroll in\
          \ two weeks, but it would have been very uncertain from then\", Mr Mather\
          \ said.\r\n\r\nSebastian Weidt, chief executive of Universal Quantum, a\
          \ tech company which employs about 40 people and held all its funds with\
          \ SVB, said the deal was a \"huge relief\" after an \"unbelievably stressful\"\
          \ few days.\r\n\r\nAlthough its US parent was in financial trouble, Silicon\
          \ Valley Bank UK was in reasonable financial health when it was bought for\
          \ \xA31 by HSBC.\r\n\r\nIt had adequate capital and was making reasonable\
          \ profits. Bank of England sources confirmed this weekend's intervention\
          \ was more a preventive strike before the collapse of its US parent sparked\
          \ mass withdrawals from the UK business.\r\n\r\nWhat that means is that\
          \ HSBC got one hell of a deal which it owed to its size and strength - with\
          \ regulators confident that Europe's largest bank could easily take on any\
          \ risk from SVB UK's customers.\r\n\r\nIt seems the only thing wrong with\
          \ SVB UK was its name. While not a Lehman Brothers moment, what the collapse\
          \ of SVB US has highlighted is that many banks are riskier than they look\
          \ on paper as they have all sustained losses on their investments in government\
          \ bonds as interest rates have soared - pushing their value down.\r\n\r\n\
          One reason why bank shares are lower again on Monday as that thought sinks\
          \ in with jittery investors. Nice to meet you Jim. Nice to meet you James.\
          \ Nice to meet you Ben. Hello Toby.\r\n```\r\n\r\nBut if I reduce the text\
          \ by half, or move the last paragraph to the top, then the names are recognized\
          \ as \"PER\" as expected.\r\n\r\nIs this a known issue? that for lengthy\
          \ texts, it just gives up after a certain number of characters and anything\
          \ after this it fails to detect?\r\n\r\nThanks"
        updatedAt: '2023-04-14T18:36:25.142Z'
      numEdits: 0
      reactions: []
    id: 64399d29eb7c5616ef402334
    type: comment
  author: farazk86
  content: "Hi all,\r\n\r\nI'm using this model to recognize persons, organizations\
    \ and locations in text, and Ive noticed that it fails to produce reliable results\
    \ for lengthy texts\r\n\r\nI'm using a locally downloaded model and I am not talking\
    \ about the Hosted Interface API of huggingface\r\n\r\nFor example, for the below\
    \ text (copied from a financial news article), the last line containing the obvious\
    \ names of \"Jim\",  \"James\", \"Ben\" and \"Toby\" are missed entirely by the\
    \ model.\r\n```\r\nHSBC has swooped to buy the UK arm of collapsed US Silicon\
    \ Valley Bank (SVB), bringing relief to UK tech firms who warned they could go\
    \ bust without help.\r\n\r\nCustomers and businesses who had been unable to withdraw\
    \ their money will now be able to access it as normal.\r\n\r\nThe government and\
    \ the Bank of England led the talks and worked through the night to scramble together\
    \ the deal, which involves no taxpayer money.\r\n\r\nHSBC said it paid just \xA3\
    1 for the SVB's UK arm.\r\n\r\nSilicon Valley Bank - which specialised in lending\
    \ to technology companies - was shut down by US regulators on Friday in what was\
    \ the largest failure of a US bank since 2008.\r\n\r\nIts collapse sent shockwaves\
    \ across the tech industry over the possible impact it could have on businesses,\
    \ with some firms telling the BBC they could go bust if deposits were not secured.\r\
    \n\r\nWith fears over how firms would be able to access cash on Monday morning,\
    \ frantic talks were held between Chancellor Jeremy Hunt, the prime minister,\
    \ the Bank of England governor, HSBC bosses and civil servants to find a solution.\r\
    \n\r\nThe Bank of England said no other UK banks had been \"materially affected\"\
    \ by SVB's collapse and said the banking system remained \"safe, sound, and well\
    \ capitalised\".\r\n\r\nAlthough the UK arm of SVB was small with just over 3,000\
    \ business customers, its collapse would have presented a risk for a sector which\
    \ the government views as pivotal to the UK's future economic success.\r\n\r\n\
    Mr Hunt said some of the firms only had bank accounts with SVB UK, \"so for that\
    \ reason we were faced with a situation where we could have seen some of our most\
    \ important companies, our most strategic companies, wiped out and that would\
    \ have been extremely dangerous\".\r\n\r\nHowever, he added there was \"never\
    \ a systemic risk to our financial stability in the UK\".\r\n\r\nToby Mather,\
    \ chief executive and co-founder of Lingumi, an education technology start-up,\
    \ said 85% of its cash was tied up with the bank and he had had a very \"anxious\
    \ weekend\".\r\n\r\n\"We had enough money in bank accounts outside the UK and\
    \ enough revenue coming through each week from our customers that we could look\
    \ our staff in the eyes at nine o'clock this morning and say we can make payroll\
    \ in two weeks, but it would have been very uncertain from then\", Mr Mather said.\r\
    \n\r\nSebastian Weidt, chief executive of Universal Quantum, a tech company which\
    \ employs about 40 people and held all its funds with SVB, said the deal was a\
    \ \"huge relief\" after an \"unbelievably stressful\" few days.\r\n\r\nAlthough\
    \ its US parent was in financial trouble, Silicon Valley Bank UK was in reasonable\
    \ financial health when it was bought for \xA31 by HSBC.\r\n\r\nIt had adequate\
    \ capital and was making reasonable profits. Bank of England sources confirmed\
    \ this weekend's intervention was more a preventive strike before the collapse\
    \ of its US parent sparked mass withdrawals from the UK business.\r\n\r\nWhat\
    \ that means is that HSBC got one hell of a deal which it owed to its size and\
    \ strength - with regulators confident that Europe's largest bank could easily\
    \ take on any risk from SVB UK's customers.\r\n\r\nIt seems the only thing wrong\
    \ with SVB UK was its name. While not a Lehman Brothers moment, what the collapse\
    \ of SVB US has highlighted is that many banks are riskier than they look on paper\
    \ as they have all sustained losses on their investments in government bonds as\
    \ interest rates have soared - pushing their value down.\r\n\r\nOne reason why\
    \ bank shares are lower again on Monday as that thought sinks in with jittery\
    \ investors. Nice to meet you Jim. Nice to meet you James. Nice to meet you Ben.\
    \ Hello Toby.\r\n```\r\n\r\nBut if I reduce the text by half, or move the last\
    \ paragraph to the top, then the names are recognized as \"PER\" as expected.\r\
    \n\r\nIs this a known issue? that for lengthy texts, it just gives up after a\
    \ certain number of characters and anything after this it fails to detect?\r\n\
    \r\nThanks"
  created_at: 2023-04-14 17:36:25+00:00
  edited: false
  hidden: false
  id: 64399d29eb7c5616ef402334
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
      fullname: Faraz Khan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: farazk86
      type: user
    createdAt: '2023-04-17T12:57:47.000Z'
    data:
      edited: false
      editors:
      - farazk86
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
          fullname: Faraz Khan
          isHf: false
          isPro: false
          name: farazk86
          type: user
        html: "<p>So, I can pretty much confirm that there is a maximum limit on the\
          \ model. For long articles, after a certain number of words the model just\
          \ stops working.</p>\n<p>I solved this by splitting my text into chunks\
          \ of 300 words and then identifying each chunk.  This gave much better results\
          \ and I did not have the problem of the model just giving up mid text.</p>\n\
          <p>Below is my code for the solution explained above for anyone coming across\
          \ this in future:</p>\n<pre><code class=\"language-python\">           \
          \ <span class=\"hljs-keyword\">import</span> re\n            nlp = pipeline(<span\
          \ class=\"hljs-string\">\"ner\"</span>, model=model, tokenizer=tokenizer,\
          \ aggregation_strategy=<span class=\"hljs-string\">\"simple\"</span>)\n\
          \            <span class=\"hljs-comment\"># slice text into 300 words</span>\n\
          \            split_text = re.findall(<span class=\"hljs-string\">r'\\W*(?:\\\
          w+\\W+){1,300}'</span>, text)\n            all_ner = []\n            <span\
          \ class=\"hljs-keyword\">for</span> text_seg <span class=\"hljs-keyword\"\
          >in</span> split_text:\n                ner_results = nlp(text_seg)\n  \
          \              all_ner.append(ner_results)\n            <span class=\"hljs-comment\"\
          ># the all_ner is a list of list so converting that to a flat list</span>\n\
          \            flat_all_ner = [item <span class=\"hljs-keyword\">for</span>\
          \ sublist <span class=\"hljs-keyword\">in</span> all_ner <span class=\"\
          hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> sublist]\n\
          </code></pre>\n"
        raw: "So, I can pretty much confirm that there is a maximum limit on the model.\
          \ For long articles, after a certain number of words the model just stops\
          \ working.\n\nI solved this by splitting my text into chunks of 300 words\
          \ and then identifying each chunk.  This gave much better results and I\
          \ did not have the problem of the model just giving up mid text.\n\nBelow\
          \ is my code for the solution explained above for anyone coming across this\
          \ in future:\n\n```python\n            import re\n            nlp = pipeline(\"\
          ner\", model=model, tokenizer=tokenizer, aggregation_strategy=\"simple\"\
          )\n            # slice text into 300 words\n            split_text = re.findall(r'\\\
          W*(?:\\w+\\W+){1,300}', text)\n            all_ner = []\n            for\
          \ text_seg in split_text:\n                ner_results = nlp(text_seg)\n\
          \                all_ner.append(ner_results)\n            # the all_ner\
          \ is a list of list so converting that to a flat list\n            flat_all_ner\
          \ = [item for sublist in all_ner for item in sublist]\n```"
        updatedAt: '2023-04-17T12:57:47.368Z'
      numEdits: 0
      reactions: []
      relatedEventId: 643d424b1c29e1386bb91b99
    id: 643d424b1c29e1386bb91b98
    type: comment
  author: farazk86
  content: "So, I can pretty much confirm that there is a maximum limit on the model.\
    \ For long articles, after a certain number of words the model just stops working.\n\
    \nI solved this by splitting my text into chunks of 300 words and then identifying\
    \ each chunk.  This gave much better results and I did not have the problem of\
    \ the model just giving up mid text.\n\nBelow is my code for the solution explained\
    \ above for anyone coming across this in future:\n\n```python\n            import\
    \ re\n            nlp = pipeline(\"ner\", model=model, tokenizer=tokenizer, aggregation_strategy=\"\
    simple\")\n            # slice text into 300 words\n            split_text = re.findall(r'\\\
    W*(?:\\w+\\W+){1,300}', text)\n            all_ner = []\n            for text_seg\
    \ in split_text:\n                ner_results = nlp(text_seg)\n              \
    \  all_ner.append(ner_results)\n            # the all_ner is a list of list so\
    \ converting that to a flat list\n            flat_all_ner = [item for sublist\
    \ in all_ner for item in sublist]\n```"
  created_at: 2023-04-17 11:57:47+00:00
  edited: false
  hidden: false
  id: 643d424b1c29e1386bb91b98
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
      fullname: Faraz Khan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: farazk86
      type: user
    createdAt: '2023-04-17T12:57:47.000Z'
    data:
      status: closed
    id: 643d424b1c29e1386bb91b99
    type: status-change
  author: farazk86
  created_at: 2023-04-17 11:57:47+00:00
  id: 643d424b1c29e1386bb91b99
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
      fullname: Faraz Khan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: farazk86
      type: user
    createdAt: '2023-04-17T12:58:07.000Z'
    data:
      status: open
    id: 643d425f7ede13bc7b569b33
    type: status-change
  author: farazk86
  created_at: 2023-04-17 11:58:07+00:00
  id: 643d425f7ede13bc7b569b33
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/05dcac728d75bb06b5b291dbdbd04d9d.svg
      fullname: Faraz Khan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: farazk86
      type: user
    createdAt: '2023-04-17T12:58:33.000Z'
    data:
      status: closed
    id: 643d4279455be6574c83b4dc
    type: status-change
  author: farazk86
  created_at: 2023-04-17 11:58:33+00:00
  id: 643d4279455be6574c83b4dc
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: Davlan/bert-base-multilingual-cased-ner-hrl
repo_type: model
status: closed
target_branch: null
title: Is there a maximum character limit for the trained models?
