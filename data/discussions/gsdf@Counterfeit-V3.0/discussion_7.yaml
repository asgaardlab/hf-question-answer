!!python/object:huggingface_hub.community.DiscussionWithDetails
author: AisingioroHao0
conflicting_files: null
created_at: 2023-06-30 09:36:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
      fullname: aihao2000
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AisingioroHao0
      type: user
    createdAt: '2023-06-30T10:36:45.000Z'
    data:
      edited: false
      editors:
      - AisingioroHao0
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9094722867012024
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
          fullname: aihao2000
          isHf: false
          isPro: false
          name: AisingioroHao0
          type: user
        html: '<p>Which model was this trained with and how did I load these parameters.
          I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
          "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed</p>

          '
        raw: Which model was this trained with and how did I load these parameters.
          I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
          "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed
        updatedAt: '2023-06-30T10:36:45.661Z'
      numEdits: 0
      reactions: []
    id: 649eb03d9a3a49111fd480e1
    type: comment
  author: AisingioroHao0
  content: Which model was this trained with and how did I load these parameters.
    I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
    "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed
  created_at: 2023-06-30 09:36:45+00:00
  edited: false
  hidden: false
  id: 649eb03d9a3a49111fd480e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6f001866dcfe10a761ea6bfd59918aa8.svg
      fullname: Celestina Illyabern
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vreyka
      type: user
    createdAt: '2023-07-05T00:01:56.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/6f001866dcfe10a761ea6bfd59918aa8.svg
          fullname: Celestina Illyabern
          isHf: false
          isPro: false
          name: Vreyka
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-07-05T00:02:39.323Z'
      numEdits: 0
      reactions: []
    id: 64a4b2f4846ad667406452ab
    type: comment
  author: Vreyka
  content: This comment has been hidden
  created_at: 2023-07-04 23:01:56+00:00
  edited: true
  hidden: true
  id: 64a4b2f4846ad667406452ab
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6f001866dcfe10a761ea6bfd59918aa8.svg
      fullname: Celestina Illyabern
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vreyka
      type: user
    createdAt: '2023-07-05T00:03:09.000Z'
    data:
      edited: true
      editors:
      - Vreyka
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5746363401412964
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6f001866dcfe10a761ea6bfd59918aa8.svg
          fullname: Celestina Illyabern
          isHf: false
          isPro: false
          name: Vreyka
          type: user
        html: '<blockquote>

          <p>Which model was this trained with and how did I load these parameters.
          I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
          "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed</p>

          </blockquote>

          <p>1.download <a rel="nofollow" href="https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py">https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py</a>
          then push it in file colab<br>2.use script:<br>!mkdir converted<br>!python
          convert_original_stable_diffusion_to_diffusers.py --checkpoint_path checkpoint_path
          --from_safetensors --dump_path converted<br>where checkpoint_path is the
          path you place the check point file like "Counterfeit-V3.0_fp32.safetensors"<br>3.use
          the "converted":<br>scheduler = EulerDiscreteScheduler.from_pretrained("converted",
          subfolder="scheduler")</p>

          <p>controlnet = ControlNetModel.from_pretrained("lllyasviel/sd-controlnet-canny",
          torch_dtype=torch.float16).to("cuda")<br>pipe = StableDiffusionControlNetPipeline.from_pretrained("converted",scheduler=scheduler,
          controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)</p>

          <p>pipe = pipe.to("cuda")<br><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png"></a></p>

          '
        raw: '> Which model was this trained with and how did I load these parameters.
          I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
          "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed




          1.download https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py
          then push it in file colab

          2.use script:

          !mkdir converted

          !python convert_original_stable_diffusion_to_diffusers.py --checkpoint_path
          checkpoint_path --from_safetensors --dump_path converted

          where checkpoint_path is the path you place the check point file like "Counterfeit-V3.0_fp32.safetensors"

          3.use the "converted":

          scheduler = EulerDiscreteScheduler.from_pretrained("converted", subfolder="scheduler")


          controlnet = ControlNetModel.from_pretrained("lllyasviel/sd-controlnet-canny",
          torch_dtype=torch.float16).to("cuda")

          pipe = StableDiffusionControlNetPipeline.from_pretrained("converted",scheduler=scheduler,
          controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)


          pipe = pipe.to("cuda")

          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png)

          '
        updatedAt: '2023-07-05T00:03:35.024Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - AisingioroHao0
    id: 64a4b33da58bfd089590e3f0
    type: comment
  author: Vreyka
  content: '> Which model was this trained with and how did I load these parameters.
    I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
    "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed




    1.download https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py
    then push it in file colab

    2.use script:

    !mkdir converted

    !python convert_original_stable_diffusion_to_diffusers.py --checkpoint_path checkpoint_path
    --from_safetensors --dump_path converted

    where checkpoint_path is the path you place the check point file like "Counterfeit-V3.0_fp32.safetensors"

    3.use the "converted":

    scheduler = EulerDiscreteScheduler.from_pretrained("converted", subfolder="scheduler")


    controlnet = ControlNetModel.from_pretrained("lllyasviel/sd-controlnet-canny",
    torch_dtype=torch.float16).to("cuda")

    pipe = StableDiffusionControlNetPipeline.from_pretrained("converted",scheduler=scheduler,
    controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)


    pipe = pipe.to("cuda")

    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png)

    '
  created_at: 2023-07-04 23:03:09+00:00
  edited: true
  hidden: false
  id: 64a4b33da58bfd089590e3f0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
      fullname: aihao2000
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AisingioroHao0
      type: user
    createdAt: '2023-07-06T17:36:06.000Z'
    data:
      edited: false
      editors:
      - AisingioroHao0
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9724780321121216
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
          fullname: aihao2000
          isHf: false
          isPro: false
          name: AisingioroHao0
          type: user
        html: '<p>thank you so much</p>

          '
        raw: thank you so much
        updatedAt: '2023-07-06T17:36:06.702Z'
      numEdits: 0
      reactions: []
    id: 64a6fb86a194220d66b6ba45
    type: comment
  author: AisingioroHao0
  content: thank you so much
  created_at: 2023-07-06 16:36:06+00:00
  edited: false
  hidden: false
  id: 64a6fb86a194220d66b6ba45
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
      fullname: aihao2000
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AisingioroHao0
      type: user
    createdAt: '2023-07-09T12:01:13.000Z'
    data:
      edited: false
      editors:
      - AisingioroHao0
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.41105806827545166
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
          fullname: aihao2000
          isHf: false
          isPro: false
          name: AisingioroHao0
          type: user
        html: "<p>But I ran into some problems</p>\n<pre><code>Traceback (most recent\
          \ call last):\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 463, in load_state_dict\n    return torch.load(checkpoint_file, map_location=\"\
          cpu\")\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File\
          \ \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 797, in load\n    with _open_zipfile_reader(opened_file) as opened_zipfile:\n\
          \         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 283, in __init__\n    super().__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
          \                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError:\
          \ PytorchStreamReader failed reading zip archive: failed finding central\
          \ directory\n\nDuring handling of the above exception, another exception\
          \ occurred:\n\nTraceback (most recent call last):\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 467, in load_state_dict\n    if f.read(7) == \"version\":\n     \
          \  ^^^^^^^^^\n  File \"&lt;frozen codecs&gt;\", line 322, in decode\nUnicodeDecodeError:\
          \ 'utf-8' codec can't decode byte 0x80 in position 64: invalid start byte\n\
          \nDuring handling of the above exception, another exception occurred:\n\n\
          Traceback (most recent call last):\n  File \"convert_original_stable_diffusion_to_diffusers.py\"\
          , line 138, in &lt;module&gt;\n    pipe = download_from_original_stable_diffusion_ckpt(\n\
          \           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py\"\
          , line 1440, in download_from_original_stable_diffusion_ckpt\n    safety_checker\
          \ = StableDiffusionSafetyChecker.from_pretrained(\"CompVis/stable-diffusion-safety-checker\"\
          )\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
          \  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 2604, in from_pretrained\n    state_dict = load_state_dict(resolved_archive_file)\n\
          \                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 479, in load_state_dict\n    raise OSError(\nOSError: Unable to load\
          \ weights from pytorch checkpoint file for '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'\
          \ at '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'.\
          \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please\
          \ set from_tf=True.\n</code></pre>\n<p>can you help me analyze it</p>\n"
        raw: "But I ran into some problems\n```\nTraceback (most recent call last):\n\
          \  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 463, in load_state_dict\n    return torch.load(checkpoint_file, map_location=\"\
          cpu\")\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File\
          \ \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 797, in load\n    with _open_zipfile_reader(opened_file) as opened_zipfile:\n\
          \         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
          , line 283, in __init__\n    super().__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
          \                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError:\
          \ PytorchStreamReader failed reading zip archive: failed finding central\
          \ directory\n\nDuring handling of the above exception, another exception\
          \ occurred:\n\nTraceback (most recent call last):\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 467, in load_state_dict\n    if f.read(7) == \"version\":\n     \
          \  ^^^^^^^^^\n  File \"<frozen codecs>\", line 322, in decode\nUnicodeDecodeError:\
          \ 'utf-8' codec can't decode byte 0x80 in position 64: invalid start byte\n\
          \nDuring handling of the above exception, another exception occurred:\n\n\
          Traceback (most recent call last):\n  File \"convert_original_stable_diffusion_to_diffusers.py\"\
          , line 138, in <module>\n    pipe = download_from_original_stable_diffusion_ckpt(\n\
          \           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py\"\
          , line 1440, in download_from_original_stable_diffusion_ckpt\n    safety_checker\
          \ = StableDiffusionSafetyChecker.from_pretrained(\"CompVis/stable-diffusion-safety-checker\"\
          )\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
          \  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 2604, in from_pretrained\n    state_dict = load_state_dict(resolved_archive_file)\n\
          \                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
          , line 479, in load_state_dict\n    raise OSError(\nOSError: Unable to load\
          \ weights from pytorch checkpoint file for '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'\
          \ at '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'.\
          \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please\
          \ set from_tf=True.\n```\ncan you help me analyze it"
        updatedAt: '2023-07-09T12:01:13.299Z'
      numEdits: 0
      reactions: []
    id: 64aaa189de2d860082f36cd1
    type: comment
  author: AisingioroHao0
  content: "But I ran into some problems\n```\nTraceback (most recent call last):\n\
    \  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
    , line 463, in load_state_dict\n    return torch.load(checkpoint_file, map_location=\"\
    cpu\")\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"\
    /home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
    , line 797, in load\n    with _open_zipfile_reader(opened_file) as opened_zipfile:\n\
    \         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/torch/serialization.py\"\
    , line 283, in __init__\n    super().__init__(torch._C.PyTorchFileReader(name_or_buffer))\n\
    \                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nRuntimeError:\
    \ PytorchStreamReader failed reading zip archive: failed finding central directory\n\
    \nDuring handling of the above exception, another exception occurred:\n\nTraceback\
    \ (most recent call last):\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
    , line 467, in load_state_dict\n    if f.read(7) == \"version\":\n       ^^^^^^^^^\n\
    \  File \"<frozen codecs>\", line 322, in decode\nUnicodeDecodeError: 'utf-8'\
    \ codec can't decode byte 0x80 in position 64: invalid start byte\n\nDuring handling\
    \ of the above exception, another exception occurred:\n\nTraceback (most recent\
    \ call last):\n  File \"convert_original_stable_diffusion_to_diffusers.py\", line\
    \ 138, in <module>\n    pipe = download_from_original_stable_diffusion_ckpt(\n\
    \           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py\"\
    , line 1440, in download_from_original_stable_diffusion_ckpt\n    safety_checker\
    \ = StableDiffusionSafetyChecker.from_pretrained(\"CompVis/stable-diffusion-safety-checker\"\
    )\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n\
    \  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
    , line 2604, in from_pretrained\n    state_dict = load_state_dict(resolved_archive_file)\n\
    \                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/home/aihao/miniconda3/envs/torch_stable/lib/python3.11/site-packages/transformers/modeling_utils.py\"\
    , line 479, in load_state_dict\n    raise OSError(\nOSError: Unable to load weights\
    \ from pytorch checkpoint file for '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'\
    \ at '/home/aihao/.cache/huggingface/hub/models--CompVis--stable-diffusion-safety-checker/snapshots/cb41f3a270d63d454d385fc2e4f571c487c253c5/pytorch_model.bin'.\
    \ If you tried to load a PyTorch model from a TF 2.0 checkpoint, please set from_tf=True.\n\
    ```\ncan you help me analyze it"
  created_at: 2023-07-09 11:01:13+00:00
  edited: false
  hidden: false
  id: 64aaa189de2d860082f36cd1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
      fullname: aihao2000
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: AisingioroHao0
      type: user
    createdAt: '2023-07-10T13:30:39.000Z'
    data:
      edited: false
      editors:
      - AisingioroHao0
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5919106602668762
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/sCzAmftXlPpNAU5qPqj8d.png?w=200&h=200&f=face
          fullname: aihao2000
          isHf: false
          isPro: false
          name: AisingioroHao0
          type: user
        html: '<p>Now it works successfully. I''ve modified the convert script so
          that the load_safety_checker parameter for download_from_original_stable_diffusion_ckpt
          is false.But the image generated by the reuse method is garbled.<br><a rel="nofollow"
          href="https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/O691wpiLQXbkpwkPzKmjd.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/O691wpiLQXbkpwkPzKmjd.png"></a></p>

          <blockquote>

          <blockquote>

          <p>Which model was this trained with and how did I load these parameters.
          I tried "diffusers. StableDiffusionPipeline. from_ckpt ("safetensors_path")",
          "diffusers. StableDiffusionPipeline. from_pretrained ()" have failed</p>

          </blockquote>

          <p>1.download <a rel="nofollow" href="https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py">https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py</a>
          then push it in file colab<br>2.use script:<br>!mkdir converted<br>!python
          convert_original_stable_diffusion_to_diffusers.py --checkpoint_path checkpoint_path
          --from_safetensors --dump_path converted<br>where checkpoint_path is the
          path you place the check point file like "Counterfeit-V3.0_fp32.safetensors"<br>3.use
          the "converted":<br>scheduler = EulerDiscreteScheduler.from_pretrained("converted",
          subfolder="scheduler")</p>

          <p>controlnet = ControlNetModel.from_pretrained("lllyasviel/sd-controlnet-canny",
          torch_dtype=torch.float16).to("cuda")<br>pipe = StableDiffusionControlNetPipeline.from_pretrained("converted",scheduler=scheduler,
          controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)</p>

          <p>pipe = pipe.to("cuda")<br><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png"></a></p>

          </blockquote>

          '
        raw: "Now it works successfully. I've modified the convert script so that\
          \ the load_safety_checker parameter for download_from_original_stable_diffusion_ckpt\
          \ is false.But the image generated by the reuse method is garbled.\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/O691wpiLQXbkpwkPzKmjd.png)\n\
          > > Which model was this trained with and how did I load these parameters.\
          \ I tried \"diffusers. StableDiffusionPipeline. from_ckpt (\"safetensors_path\"\
          )\", \"diffusers. StableDiffusionPipeline. from_pretrained ()\" have failed\n\
          > \n> \n> \n> 1.download https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py\
          \ then push it in file colab\n> 2.use script:\n> !mkdir converted\n> !python\
          \ convert_original_stable_diffusion_to_diffusers.py --checkpoint_path checkpoint_path\
          \ --from_safetensors --dump_path converted\n> where checkpoint_path is the\
          \ path you place the check point file like \"Counterfeit-V3.0_fp32.safetensors\"\
          \n> 3.use the \"converted\":\n> scheduler = EulerDiscreteScheduler.from_pretrained(\"\
          converted\", subfolder=\"scheduler\")\n> \n> controlnet = ControlNetModel.from_pretrained(\"\
          lllyasviel/sd-controlnet-canny\", torch_dtype=torch.float16).to(\"cuda\"\
          )\n> pipe = StableDiffusionControlNetPipeline.from_pretrained(\"converted\"\
          ,scheduler=scheduler, controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)\n\
          > \n> pipe = pipe.to(\"cuda\")\n> ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png)\n\
          \n"
        updatedAt: '2023-07-10T13:30:39.553Z'
      numEdits: 0
      reactions: []
    id: 64ac07ff466a245246bf8c6f
    type: comment
  author: AisingioroHao0
  content: "Now it works successfully. I've modified the convert script so that the\
    \ load_safety_checker parameter for download_from_original_stable_diffusion_ckpt\
    \ is false.But the image generated by the reuse method is garbled.\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/6464d47c07a7f745c59ce7f4/O691wpiLQXbkpwkPzKmjd.png)\n\
    > > Which model was this trained with and how did I load these parameters. I tried\
    \ \"diffusers. StableDiffusionPipeline. from_ckpt (\"safetensors_path\")\", \"\
    diffusers. StableDiffusionPipeline. from_pretrained ()\" have failed\n> \n> \n\
    > \n> 1.download https://github.com/huggingface/diffusers/blob/main/src/diffusers/pipelines/stable_diffusion/convert_from_ckpt.py\
    \ then push it in file colab\n> 2.use script:\n> !mkdir converted\n> !python convert_original_stable_diffusion_to_diffusers.py\
    \ --checkpoint_path checkpoint_path --from_safetensors --dump_path converted\n\
    > where checkpoint_path is the path you place the check point file like \"Counterfeit-V3.0_fp32.safetensors\"\
    \n> 3.use the \"converted\":\n> scheduler = EulerDiscreteScheduler.from_pretrained(\"\
    converted\", subfolder=\"scheduler\")\n> \n> controlnet = ControlNetModel.from_pretrained(\"\
    lllyasviel/sd-controlnet-canny\", torch_dtype=torch.float16).to(\"cuda\")\n> pipe\
    \ = StableDiffusionControlNetPipeline.from_pretrained(\"converted\",scheduler=scheduler,\
    \ controlnet=controlnet, safety_checker=None, torch_dtype=torch.float16)\n> \n\
    > pipe = pipe.to(\"cuda\")\n> ![image.png](https://cdn-uploads.huggingface.co/production/uploads/64a4b12267cbbd5a66800f6e/jxzaOzLP4QDOVWO7zxD-H.png)\n\
    \n"
  created_at: 2023-07-10 12:30:39+00:00
  edited: false
  hidden: false
  id: 64ac07ff466a245246bf8c6f
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 7
repo_id: gsdf/Counterfeit-V3.0
repo_type: model
status: open
target_branch: null
title: Could you give me a simple example?
