!!python/object:huggingface_hub.community.DiscussionWithDetails
author: hellos
conflicting_files: null
created_at: 2023-09-06 09:11:52+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb2fde4282fe68b5192d72c0adb5b4f8.svg
      fullname: hellos
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hellos
      type: user
    createdAt: '2023-09-06T10:11:52.000Z'
    data:
      edited: true
      editors:
      - hellos
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.32432228326797485
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb2fde4282fe68b5192d72c0adb5b4f8.svg
          fullname: hellos
          isHf: false
          isPro: false
          name: hellos
          type: user
        html: "<pre><code>---------------------------------------------------------------------------\n\
          AttributeError                            Traceback (most recent call last)\n\
          &lt;ipython-input-23-498af2553c1b&gt; in &lt;cell line: 3&gt;()\n      1\
          \ import scipy\n      2 \n----&gt; 3 scipy.io.wavfile.write(\"techno.wav\"\
          , rate=model.config.sampling_rate, data=output)\n\n/usr/local/lib/python3.10/dist-packages/scipy/io/wavfile.py\
          \ in write(filename, rate, data)\n    770 \n    771     try:\n--&gt; 772\
          \         dkind = data.dtype.kind\n    773         if not (dkind == 'i'\
          \ or dkind == 'f' or (dkind == 'u' and\n    774                        \
          \                          data.dtype.itemsize == 1)):\n\nAttributeError:\
          \ 'torch.dtype' object has no attribute 'kind'\n</code></pre>\n<p>You can\
          \ now save the audio using this code. [ If you know how to fix the above\
          \ error please comment below.]</p>\n<pre><code>import scipy\nimport numpy\
          \ as np\n\ndef save_tts(output, model, output_file_path):\n    # Convert\
          \ the PyTorch tensor to a NumPy array\n    output_np = output.cpu().numpy()\n\
          \    \n    # Normalize the audio data to the range [-1, 1] if needed\n \
          \   output_np = np.interp(output_np, (output_np.min(), output_np.max()),\
          \ (-1, 1))\n    \n    # Set the desired bit depth (e.g., 8 bits)\n    bit_depth\
          \ = 8\n    \n    # Reduce the amplitude of the audio data significantly\
          \ to fit within the valid range for 8 bits\n    output_np = (output_np *\
          \ 0.5 * 127).astype(np.int8)  # Adjust the factor (0.5) if needed\n    \n\
          \    # Write the WAV file using SciPy\n    scipy.io.wavfile.write(output_file_path,\
          \ rate=model.config.sampling_rate, data=output_np)\n\n# Usage\nsave_tts(output,\
          \ model, \"techno.wav\")\n</code></pre>\n"
        raw: "```\n---------------------------------------------------------------------------\n\
          AttributeError                            Traceback (most recent call last)\n\
          <ipython-input-23-498af2553c1b> in <cell line: 3>()\n      1 import scipy\n\
          \      2 \n----> 3 scipy.io.wavfile.write(\"techno.wav\", rate=model.config.sampling_rate,\
          \ data=output)\n\n/usr/local/lib/python3.10/dist-packages/scipy/io/wavfile.py\
          \ in write(filename, rate, data)\n    770 \n    771     try:\n--> 772  \
          \       dkind = data.dtype.kind\n    773         if not (dkind == 'i' or\
          \ dkind == 'f' or (dkind == 'u' and\n    774                           \
          \                       data.dtype.itemsize == 1)):\n\nAttributeError: 'torch.dtype'\
          \ object has no attribute 'kind'\n```\nYou can now save the audio using\
          \ this code. [ If you know how to fix the above error please comment below.]\n\
          ```\nimport scipy\nimport numpy as np\n\ndef save_tts(output, model, output_file_path):\n\
          \    # Convert the PyTorch tensor to a NumPy array\n    output_np = output.cpu().numpy()\n\
          \    \n    # Normalize the audio data to the range [-1, 1] if needed\n \
          \   output_np = np.interp(output_np, (output_np.min(), output_np.max()),\
          \ (-1, 1))\n    \n    # Set the desired bit depth (e.g., 8 bits)\n    bit_depth\
          \ = 8\n    \n    # Reduce the amplitude of the audio data significantly\
          \ to fit within the valid range for 8 bits\n    output_np = (output_np *\
          \ 0.5 * 127).astype(np.int8)  # Adjust the factor (0.5) if needed\n    \n\
          \    # Write the WAV file using SciPy\n    scipy.io.wavfile.write(output_file_path,\
          \ rate=model.config.sampling_rate, data=output_np)\n\n# Usage\nsave_tts(output,\
          \ model, \"techno.wav\")\n\n```"
        updatedAt: '2023-09-06T10:15:35.032Z'
      numEdits: 1
      reactions: []
    id: 64f8506829a9aa4778d97b01
    type: comment
  author: hellos
  content: "```\n---------------------------------------------------------------------------\n\
    AttributeError                            Traceback (most recent call last)\n\
    <ipython-input-23-498af2553c1b> in <cell line: 3>()\n      1 import scipy\n  \
    \    2 \n----> 3 scipy.io.wavfile.write(\"techno.wav\", rate=model.config.sampling_rate,\
    \ data=output)\n\n/usr/local/lib/python3.10/dist-packages/scipy/io/wavfile.py\
    \ in write(filename, rate, data)\n    770 \n    771     try:\n--> 772        \
    \ dkind = data.dtype.kind\n    773         if not (dkind == 'i' or dkind == 'f'\
    \ or (dkind == 'u' and\n    774                                              \
    \    data.dtype.itemsize == 1)):\n\nAttributeError: 'torch.dtype' object has no\
    \ attribute 'kind'\n```\nYou can now save the audio using this code. [ If you\
    \ know how to fix the above error please comment below.]\n```\nimport scipy\n\
    import numpy as np\n\ndef save_tts(output, model, output_file_path):\n    # Convert\
    \ the PyTorch tensor to a NumPy array\n    output_np = output.cpu().numpy()\n\
    \    \n    # Normalize the audio data to the range [-1, 1] if needed\n    output_np\
    \ = np.interp(output_np, (output_np.min(), output_np.max()), (-1, 1))\n    \n\
    \    # Set the desired bit depth (e.g., 8 bits)\n    bit_depth = 8\n    \n   \
    \ # Reduce the amplitude of the audio data significantly to fit within the valid\
    \ range for 8 bits\n    output_np = (output_np * 0.5 * 127).astype(np.int8)  #\
    \ Adjust the factor (0.5) if needed\n    \n    # Write the WAV file using SciPy\n\
    \    scipy.io.wavfile.write(output_file_path, rate=model.config.sampling_rate,\
    \ data=output_np)\n\n# Usage\nsave_tts(output, model, \"techno.wav\")\n\n```"
  created_at: 2023-09-06 09:11:52+00:00
  edited: true
  hidden: false
  id: 64f8506829a9aa4778d97b01
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-09-06T13:32:34.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.47977665066719055
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Good catch <span data-props=\"{&quot;user&quot;:&quot;hellos&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/hellos\"\
          >@<span class=\"underline\">hellos</span></a></span>\n\n\t</span></span>\
          \ - we should convert the final waveform to <code>numpy</code>. Fixed here:\
          \ <a href=\"https://huggingface.co/facebook/mms-tts-eng/commit/c71de0fe7204c83f1c10820a7d696d0b450048ba\"\
          >https://huggingface.co/facebook/mms-tts-eng/commit/c71de0fe7204c83f1c10820a7d696d0b450048ba</a></p>\n"
        raw: 'Good catch @hellos - we should convert the final waveform to `numpy`.
          Fixed here: https://huggingface.co/facebook/mms-tts-eng/commit/c71de0fe7204c83f1c10820a7d696d0b450048ba'
        updatedAt: '2023-09-06T13:32:34.640Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64f87f7267adddcb40bc1b20
    id: 64f87f7267adddcb40bc1b1e
    type: comment
  author: sanchit-gandhi
  content: 'Good catch @hellos - we should convert the final waveform to `numpy`.
    Fixed here: https://huggingface.co/facebook/mms-tts-eng/commit/c71de0fe7204c83f1c10820a7d696d0b450048ba'
  created_at: 2023-09-06 12:32:34+00:00
  edited: false
  hidden: false
  id: 64f87f7267adddcb40bc1b1e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-09-06T13:32:34.000Z'
    data:
      status: closed
    id: 64f87f7267adddcb40bc1b20
    type: status-change
  author: sanchit-gandhi
  created_at: 2023-09-06 12:32:34+00:00
  id: 64f87f7267adddcb40bc1b20
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: facebook/mms-tts-eng
repo_type: model
status: closed
target_branch: null
title: '''torch.dtype'' object has no attribute ''kind'''
