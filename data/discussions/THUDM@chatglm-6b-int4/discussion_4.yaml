!!python/object:huggingface_hub.community.DiscussionWithDetails
author: bruce-cdx
conflicting_files: null
created_at: 2023-04-07 12:51:19+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/afd80b349812aeb3cfc4a44984a7c830.svg
      fullname: DixiChen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bruce-cdx
      type: user
    createdAt: '2023-04-07T13:51:19.000Z'
    data:
      edited: false
      editors:
      - bruce-cdx
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/afd80b349812aeb3cfc4a44984a7c830.svg
          fullname: DixiChen
          isHf: false
          isPro: false
          name: bruce-cdx
          type: user
        html: "<pre><code class=\"language-bash\">- transformer.layers.26.mlp.dense_4h_to_h.weight:\
          \ found shape torch.Size([4096, 8192]) <span class=\"hljs-keyword\">in</span>\
          \ the checkpoint and torch.Size([4096, 16384]) <span class=\"hljs-keyword\"\
          >in</span> the model instantiated\n- transformer.layers.27.attention.query_key_value.weight:\
          \ found shape torch.Size([12288, 2048]) <span class=\"hljs-keyword\">in</span>\
          \ the checkpoint and torch.Size([12288, 4096]) <span class=\"hljs-keyword\"\
          >in</span> the model instantiated\n- transformer.layers.27.attention.dense.weight:\
          \ found shape torch.Size([4096, 2048]) <span class=\"hljs-keyword\">in</span>\
          \ the checkpoint and torch.Size([4096, 4096]) <span class=\"hljs-keyword\"\
          >in</span> the model instantiated\n- transformer.layers.27.mlp.dense_h_to_4h.weight:\
          \ found shape torch.Size([16384, 2048]) <span class=\"hljs-keyword\">in</span>\
          \ the checkpoint and torch.Size([16384, 4096]) <span class=\"hljs-keyword\"\
          >in</span> the model instantiated\n- transformer.layers.27.mlp.dense_4h_to_h.weight:\
          \ found shape torch.Size([4096, 8192]) <span class=\"hljs-keyword\">in</span>\
          \ the checkpoint and torch.Size([4096, 16384]) <span class=\"hljs-keyword\"\
          >in</span> the model instantiated\nYou should probably TRAIN this model\
          \ on a down-stream task to be able to use it <span class=\"hljs-keyword\"\
          >for</span> predictions and inference.\n\u6B22\u8FCE\u4F7F\u7528 ChatGLM-6B\
          \ \u6A21\u578B\uFF0C\u8F93\u5165\u5185\u5BB9\u5373\u53EF\u8FDB\u884C\u5BF9\
          \u8BDD\uFF0Cclear \u6E05\u7A7A\u5BF9\u8BDD\u5386\u53F2\uFF0Cstop \u7EC8\u6B62\
          \u7A0B\u5E8F\n</code></pre>\n<p>I got this log after I launch the cli_demo.py.\
          \ Is it as expected to happen?</p>\n"
        raw: "```bash\r\n- transformer.layers.26.mlp.dense_4h_to_h.weight: found shape\
          \ torch.Size([4096, 8192]) in the checkpoint and torch.Size([4096, 16384])\
          \ in the model instantiated\r\n- transformer.layers.27.attention.query_key_value.weight:\
          \ found shape torch.Size([12288, 2048]) in the checkpoint and torch.Size([12288,\
          \ 4096]) in the model instantiated\r\n- transformer.layers.27.attention.dense.weight:\
          \ found shape torch.Size([4096, 2048]) in the checkpoint and torch.Size([4096,\
          \ 4096]) in the model instantiated\r\n- transformer.layers.27.mlp.dense_h_to_4h.weight:\
          \ found shape torch.Size([16384, 2048]) in the checkpoint and torch.Size([16384,\
          \ 4096]) in the model instantiated\r\n- transformer.layers.27.mlp.dense_4h_to_h.weight:\
          \ found shape torch.Size([4096, 8192]) in the checkpoint and torch.Size([4096,\
          \ 16384]) in the model instantiated\r\nYou should probably TRAIN this model\
          \ on a down-stream task to be able to use it for predictions and inference.\r\
          \n\u6B22\u8FCE\u4F7F\u7528 ChatGLM-6B \u6A21\u578B\uFF0C\u8F93\u5165\u5185\
          \u5BB9\u5373\u53EF\u8FDB\u884C\u5BF9\u8BDD\uFF0Cclear \u6E05\u7A7A\u5BF9\
          \u8BDD\u5386\u53F2\uFF0Cstop \u7EC8\u6B62\u7A0B\u5E8F\r\n```\r\nI got this\
          \ log after I launch the cli_demo.py. Is it as expected to happen?"
        updatedAt: '2023-04-07T13:51:19.916Z'
      numEdits: 0
      reactions: []
    id: 64301fd7ff56d6c200470f31
    type: comment
  author: bruce-cdx
  content: "```bash\r\n- transformer.layers.26.mlp.dense_4h_to_h.weight: found shape\
    \ torch.Size([4096, 8192]) in the checkpoint and torch.Size([4096, 16384]) in\
    \ the model instantiated\r\n- transformer.layers.27.attention.query_key_value.weight:\
    \ found shape torch.Size([12288, 2048]) in the checkpoint and torch.Size([12288,\
    \ 4096]) in the model instantiated\r\n- transformer.layers.27.attention.dense.weight:\
    \ found shape torch.Size([4096, 2048]) in the checkpoint and torch.Size([4096,\
    \ 4096]) in the model instantiated\r\n- transformer.layers.27.mlp.dense_h_to_4h.weight:\
    \ found shape torch.Size([16384, 2048]) in the checkpoint and torch.Size([16384,\
    \ 4096]) in the model instantiated\r\n- transformer.layers.27.mlp.dense_4h_to_h.weight:\
    \ found shape torch.Size([4096, 8192]) in the checkpoint and torch.Size([4096,\
    \ 16384]) in the model instantiated\r\nYou should probably TRAIN this model on\
    \ a down-stream task to be able to use it for predictions and inference.\r\n\u6B22\
    \u8FCE\u4F7F\u7528 ChatGLM-6B \u6A21\u578B\uFF0C\u8F93\u5165\u5185\u5BB9\u5373\
    \u53EF\u8FDB\u884C\u5BF9\u8BDD\uFF0Cclear \u6E05\u7A7A\u5BF9\u8BDD\u5386\u53F2\
    \uFF0Cstop \u7EC8\u6B62\u7A0B\u5E8F\r\n```\r\nI got this log after I launch the\
    \ cli_demo.py. Is it as expected to happen?"
  created_at: 2023-04-07 12:51:19+00:00
  edited: false
  hidden: false
  id: 64301fd7ff56d6c200470f31
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: THUDM/chatglm-6b-int4
repo_type: model
status: open
target_branch: null
title: model checkpoint has different layer shape with the model
