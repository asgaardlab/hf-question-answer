!!python/object:huggingface_hub.community.DiscussionWithDetails
author: abhi-mosaic
conflicting_files: []
created_at: 2023-06-02 23:05:50+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:05:50.000Z'
    data:
      edited: true
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.11044929921627045
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>** Duplicate of <a href="https://huggingface.co/mosaicml/mpt-7b/discussions/47">https://huggingface.co/mosaicml/mpt-7b/discussions/47</a>
          **</p>

          <p>This PR adds updates from the LLM Foundry repo as of 06/01/2023.</p>

          <p>These include:</p>

          <ul>

          <li><code>device_map</code> support for multiple GPUs</li>

          <li>faster inference thanks to a refactor of the KV cacheing</li>

          <li>bugfix for returning the last hidden_state</li>

          <li>support for <code>output_attentions</code> when using <code>attn_impl:
          torch</code></li>

          <li>a <code>requirements.txt</code> file to make it easier to know what
          you need to install for MPT</li>

          <li>updated README instructions for fast GPU initialization</li>

          </ul>

          '
        raw: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
          **


          This PR adds updates from the LLM Foundry repo as of 06/01/2023.


          These include:


          * `device_map` support for multiple GPUs

          * faster inference thanks to a refactor of the KV cacheing

          * bugfix for returning the last hidden_state

          * support for `output_attentions` when using `attn_impl: torch`

          * a `requirements.txt` file to make it easier to know what you need to install
          for MPT

          * updated README instructions for fast GPU initialization'
        updatedAt: '2023-06-03T00:06:02.056Z'
      numEdits: 1
      reactions: []
    id: 647a83de822b7e8ccbdc89d7
    type: comment
  author: abhi-mosaic
  content: '** Duplicate of https://huggingface.co/mosaicml/mpt-7b/discussions/47
    **


    This PR adds updates from the LLM Foundry repo as of 06/01/2023.


    These include:


    * `device_map` support for multiple GPUs

    * faster inference thanks to a refactor of the KV cacheing

    * bugfix for returning the last hidden_state

    * support for `output_attentions` when using `attn_impl: torch`

    * a `requirements.txt` file to make it easier to know what you need to install
    for MPT

    * updated README instructions for fast GPU initialization'
  created_at: 2023-06-02 23:05:50+00:00
  edited: true
  hidden: false
  id: 647a83de822b7e8ccbdc89d7
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:06:32.000Z'
    data:
      oid: ea98a5954d22142a883262721ee4a2bf3ec8e695
      parents:
      - 8d17b97ec59b6fc6e5e5a9cdf7dbc7ad9eeae8a8
      subject: wip
    id: 647a84080000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 23:06:32+00:00
  id: 647a84080000000000000000
  oid: ea98a5954d22142a883262721ee4a2bf3ec8e695
  summary: wip
  type: commit
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:09:51.000Z'
    data:
      oid: 0fc7cfd00f9a57f12a930f064ae73c1e3797d0a0
      parents:
      - ea98a5954d22142a883262721ee4a2bf3ec8e695
      subject: README.md
    id: 647a84cf0000000000000000
    type: commit
  author: abhi-mosaic
  created_at: 2023-06-02 23:09:51+00:00
  id: 647a84cf0000000000000000
  oid: 0fc7cfd00f9a57f12a930f064ae73c1e3797d0a0
  summary: README.md
  type: commit
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:09:59.000Z'
    data:
      status: open
    id: 647a84d7822b7e8ccbdca29d
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 23:09:59+00:00
  id: 647a84d7822b7e8ccbdca29d
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:12:29.000Z'
    data:
      edited: false
      editors:
      - abhi-mosaic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6136650443077087
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
          fullname: Abhi Venigalla
          isHf: false
          isPro: false
          name: abhi-mosaic
          type: user
        html: '<p>Tested with LLM Foundry: <code>python scripts/inference/hf_generate.py
          -n mosaicml/mpt-7b-storywriter --revision pr/33 --device_map auto</code></p>

          '
        raw: 'Tested with LLM Foundry: `python scripts/inference/hf_generate.py -n
          mosaicml/mpt-7b-storywriter --revision pr/33 --device_map auto`'
        updatedAt: '2023-06-03T00:12:29.933Z'
      numEdits: 0
      reactions: []
      relatedEventId: 647a856d42abe277476166dc
    id: 647a856d42abe277476166d9
    type: comment
  author: abhi-mosaic
  content: 'Tested with LLM Foundry: `python scripts/inference/hf_generate.py -n mosaicml/mpt-7b-storywriter
    --revision pr/33 --device_map auto`'
  created_at: 2023-06-02 23:12:29+00:00
  edited: false
  hidden: false
  id: 647a856d42abe277476166d9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1676410153781-63ebfcf06ef3ce22b887cb04.jpeg?w=200&h=200&f=face
      fullname: Abhi Venigalla
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: abhi-mosaic
      type: user
    createdAt: '2023-06-03T00:12:29.000Z'
    data:
      status: merged
    id: 647a856d42abe277476166dc
    type: status-change
  author: abhi-mosaic
  created_at: 2023-06-02 23:12:29+00:00
  id: 647a856d42abe277476166dc
  new_status: merged
  type: status-change
is_pull_request: true
merge_commit_oid: 8667424ea9d973d3c01596fcbb86a3a8bc164299
num: 33
repo_id: mosaicml/mpt-7b-storywriter
repo_type: model
status: merged
target_branch: refs/heads/main
title: LLM Foundry Updates 06-01-2023
