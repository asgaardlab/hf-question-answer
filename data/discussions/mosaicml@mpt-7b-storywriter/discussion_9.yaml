!!python/object:huggingface_hub.community.DiscussionWithDetails
author: tkramer
conflicting_files: null
created_at: 2023-05-07 05:38:12+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2023-05-07T06:38:12.000Z'
    data:
      edited: false
      editors:
      - tkramer
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
          fullname: Tawn Kramer
          isHf: false
          isPro: false
          name: tkramer
          type: user
        html: '<p>At a certain point, about 500 tokens or so, the model just starts
          spewing random words. I''ve tried very small and very large temperature
          values. Does anyone have any suggestions about the correct parameters for:</p>

          <p>self.generate_kwargs = {<br>            "temperature": 0.1,<br>            "top_p":
          0.92,<br>            "top_k": 0,<br>            "max_new_tokens": 1024,<br>            "use_cache":
          True,<br>            "do_sample": True,<br>            "eos_token_id": self.tokenizer.eos_token_id,<br>            "pad_token_id":
          self.tokenizer.pad_token_id,<br>            "repetition_penalty": 1.1,  #
          1.0 means no penalty, &gt; 1.0 means penalty, 1.2 from CTRL paper<br>        }</p>

          '
        raw: "At a certain point, about 500 tokens or so, the model just starts spewing\
          \ random words. I've tried very small and very large temperature values.\
          \ Does anyone have any suggestions about the correct parameters for:\r\n\
          \r\nself.generate_kwargs = {\r\n            \"temperature\": 0.1,\r\n  \
          \          \"top_p\": 0.92,\r\n            \"top_k\": 0,\r\n           \
          \ \"max_new_tokens\": 1024,\r\n            \"use_cache\": True,\r\n    \
          \        \"do_sample\": True,\r\n            \"eos_token_id\": self.tokenizer.eos_token_id,\r\
          \n            \"pad_token_id\": self.tokenizer.pad_token_id,\r\n       \
          \     \"repetition_penalty\": 1.1,  # 1.0 means no penalty, > 1.0 means\
          \ penalty, 1.2 from CTRL paper\r\n        }"
        updatedAt: '2023-05-07T06:38:12.372Z'
      numEdits: 0
      reactions: []
    id: 645747540664b05a5b1ad509
    type: comment
  author: tkramer
  content: "At a certain point, about 500 tokens or so, the model just starts spewing\
    \ random words. I've tried very small and very large temperature values. Does\
    \ anyone have any suggestions about the correct parameters for:\r\n\r\nself.generate_kwargs\
    \ = {\r\n            \"temperature\": 0.1,\r\n            \"top_p\": 0.92,\r\n\
    \            \"top_k\": 0,\r\n            \"max_new_tokens\": 1024,\r\n      \
    \      \"use_cache\": True,\r\n            \"do_sample\": True,\r\n          \
    \  \"eos_token_id\": self.tokenizer.eos_token_id,\r\n            \"pad_token_id\"\
    : self.tokenizer.pad_token_id,\r\n            \"repetition_penalty\": 1.1,  #\
    \ 1.0 means no penalty, > 1.0 means penalty, 1.2 from CTRL paper\r\n        }"
  created_at: 2023-05-07 05:38:12+00:00
  edited: false
  hidden: false
  id: 645747540664b05a5b1ad509
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6435b7a4f3b08e267d9b03f6/Oa8UGthAt1MLRQVSgsXcS.jpeg?w=200&h=200&f=face
      fullname: Alex Trott
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: atrott
      type: user
    createdAt: '2023-05-08T19:31:02.000Z'
    data:
      edited: false
      editors:
      - atrott
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6435b7a4f3b08e267d9b03f6/Oa8UGthAt1MLRQVSgsXcS.jpeg?w=200&h=200&f=face
          fullname: Alex Trott
          isHf: false
          isPro: false
          name: atrott
          type: user
        html: '<p>I have noticed a tendency for the model to repeat itself as it continues
          to generate. Here are some parameters I used which tended to have reasonable
          results, but it''s very possible that there''s room for improvement. I''ll
          be curious to know how they work for you.</p>

          <p>self.generate_kwargs = {<br>"temperature": 0.8,   &lt;-- Increased substantially<br>"top_p":
          0.95,   &lt;-- Small increase<br>"top_k": 50,  &lt;--- Uses this<br>"max_new_tokens":
          1024,<br>"use_cache": True,<br>"do_sample": True,<br>"eos_token_id": self.tokenizer.eos_token_id,<br>"pad_token_id":
          self.tokenizer.pad_token_id,<br>"repetition_penalty": 1.02, &lt;--- Decreased<br>}</p>

          <p>For whatever reason, low temperatures seem to produce more repetition
          (which I think tends to be true with LLMs in general, but maybe to a lesser
          extent than here). My recommendations also are slightly different wrt top_p,
          top_k, and repetition_penalty.</p>

          <p>You might also try using <a href="https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/text_generation#transformers.GenerationConfig.no_repeat_ngram_size">no_repeat_ngram_size</a>.
          It''s pretty heavy-handed, though. So it might be hard to get right. </p>

          <p>Good luck! Please let us know if you have better luck with those.</p>

          '
        raw: "I have noticed a tendency for the model to repeat itself as it continues\
          \ to generate. Here are some parameters I used which tended to have reasonable\
          \ results, but it's very possible that there's room for improvement. I'll\
          \ be curious to know how they work for you.\n\nself.generate_kwargs = {\n\
          \"temperature\": 0.8,   <-- Increased substantially\n\"top_p\": 0.95,  \
          \ <-- Small increase\n\"top_k\": 50,  <--- Uses this\n\"max_new_tokens\"\
          : 1024,\n\"use_cache\": True,\n\"do_sample\": True,\n\"eos_token_id\": self.tokenizer.eos_token_id,\n\
          \"pad_token_id\": self.tokenizer.pad_token_id,\n\"repetition_penalty\":\
          \ 1.02, <--- Decreased\n}\n\nFor whatever reason, low temperatures seem\
          \ to produce more repetition (which I think tends to be true with LLMs in\
          \ general, but maybe to a lesser extent than here). My recommendations also\
          \ are slightly different wrt top_p, top_k, and repetition_penalty.\n\nYou\
          \ might also try using [no_repeat_ngram_size](https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/text_generation#transformers.GenerationConfig.no_repeat_ngram_size).\
          \ It's pretty heavy-handed, though. So it might be hard to get right. \n\
          \nGood luck! Please let us know if you have better luck with those."
        updatedAt: '2023-05-08T19:31:02.666Z'
      numEdits: 0
      reactions: []
    id: 64594df6232e5f0712b95f57
    type: comment
  author: atrott
  content: "I have noticed a tendency for the model to repeat itself as it continues\
    \ to generate. Here are some parameters I used which tended to have reasonable\
    \ results, but it's very possible that there's room for improvement. I'll be curious\
    \ to know how they work for you.\n\nself.generate_kwargs = {\n\"temperature\"\
    : 0.8,   <-- Increased substantially\n\"top_p\": 0.95,   <-- Small increase\n\"\
    top_k\": 50,  <--- Uses this\n\"max_new_tokens\": 1024,\n\"use_cache\": True,\n\
    \"do_sample\": True,\n\"eos_token_id\": self.tokenizer.eos_token_id,\n\"pad_token_id\"\
    : self.tokenizer.pad_token_id,\n\"repetition_penalty\": 1.02, <--- Decreased\n\
    }\n\nFor whatever reason, low temperatures seem to produce more repetition (which\
    \ I think tends to be true with LLMs in general, but maybe to a lesser extent\
    \ than here). My recommendations also are slightly different wrt top_p, top_k,\
    \ and repetition_penalty.\n\nYou might also try using [no_repeat_ngram_size](https://huggingface.co/docs/transformers/v4.28.1/en/main_classes/text_generation#transformers.GenerationConfig.no_repeat_ngram_size).\
    \ It's pretty heavy-handed, though. So it might be hard to get right. \n\nGood\
    \ luck! Please let us know if you have better luck with those."
  created_at: 2023-05-08 18:31:02+00:00
  edited: false
  hidden: false
  id: 64594df6232e5f0712b95f57
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2023-05-09T05:15:01.000Z'
    data:
      edited: false
      editors:
      - tkramer
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
          fullname: Tawn Kramer
          isHf: false
          isPro: false
          name: tkramer
          type: user
        html: "<p>Thanks for your suggestions. I\u2019m afraid I wasn\u2019t getting\
          \ any better results. In case it help, my work here:</p>\n<p><a rel=\"nofollow\"\
          \ href=\"https://colab.research.google.com/drive/1MqNxp36gFzuHrQP1lbkSYRjsIJPEqVkS?usp=sharing\"\
          >https://colab.research.google.com/drive/1MqNxp36gFzuHrQP1lbkSYRjsIJPEqVkS?usp=sharing</a></p>\n"
        raw: "Thanks for your suggestions. I\u2019m afraid I wasn\u2019t getting any\
          \ better results. In case it help, my work here:\n\nhttps://colab.research.google.com/drive/1MqNxp36gFzuHrQP1lbkSYRjsIJPEqVkS?usp=sharing"
        updatedAt: '2023-05-09T05:15:01.381Z'
      numEdits: 0
      reactions: []
    id: 6459d6d539e6aea69ccc968b
    type: comment
  author: tkramer
  content: "Thanks for your suggestions. I\u2019m afraid I wasn\u2019t getting any\
    \ better results. In case it help, my work here:\n\nhttps://colab.research.google.com/drive/1MqNxp36gFzuHrQP1lbkSYRjsIJPEqVkS?usp=sharing"
  created_at: 2023-05-09 04:15:01+00:00
  edited: false
  hidden: false
  id: 6459d6d539e6aea69ccc968b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6435b7a4f3b08e267d9b03f6/Oa8UGthAt1MLRQVSgsXcS.jpeg?w=200&h=200&f=face
      fullname: Alex Trott
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: atrott
      type: user
    createdAt: '2023-05-09T05:42:53.000Z'
    data:
      edited: false
      editors:
      - atrott
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6435b7a4f3b08e267d9b03f6/Oa8UGthAt1MLRQVSgsXcS.jpeg?w=200&h=200&f=face
          fullname: Alex Trott
          isHf: false
          isPro: false
          name: atrott
          type: user
        html: '<p>Oof, yeah, that doesn''t look too great, does it?!</p>

          <p>I did notice that you have all the parameters set to those I recommended
          except repetition_penalty is set to 1.2 instead of 1.02. Maybe that was
          a typo?<br>I''m optimistic that the 1.2 value is to blame. In my (limited)
          search over the generation parameters, I quickly found that even 1.1 was
          producing bad results.</p>

          <p>I''m tinkering with a demo, which I hope to make public soon. In the
          meantime, I fed your prompt from the Colab and observe results like this:</p>

          <blockquote>

          <p>Once upon a time there was a poor blacksmith. He discovered a novel type
          of metal from a miner in the Ur mountains. Upon forging a blade from it
          he found  that it could withstand any edge more finely honed than any man
          had ever made before, or would ever make again. This was a superior sword
          to anything made even of the purest steel." The old man paused to wipe his
          nose and look down at his belly. "No weapon forged from this metal could
          ever be broken. It could only be destroyed in the process of cutting through
          it."</p>

          <p>Everyone stared. Even the children were wearying of the tale. "Go on,"
          said Stallion. "I''m intrigued now."</p>

          <p>"The blacksmith kept this to himself, feeling he could never duplicate
          it. He tried numerous times with various materials and methods of smelting,
          but he was forced to admit that none of them could achieve this lofty goal.
          In time the blacksmith died, and his wife took her son into her own house.
          Her son, whom she named Feather, grew up to become a weapon smith as well.
          He worked with the same spirit and love for excellence as his father, yet
          his mind and body were not strong enough to wrest mastery from this special
          alloy. His blades were fine, but he could not keep up a continuous flow
          of them. Hence, he became a baker of bread and the maker  of glass. He tried
          many things and failed in most of them, but one day Feather found a spell
          that allowed him to melt his glass. It required a difficult incantation,
          with each successive gasp of breath being an essential part of the words.
          As Feather made his way through the chant he held a piece of the molten
          glass in front of his face, and one thing led to another, until he started
          making different types of bubbles in the glass. These bubbles were unusual;
          they were multicolored and had no apparent shape. One day, while playing
          with these bubbles, Feather found that if he pressed one bubble with his
          thumb, then pulled away quickly, it would shatter.</p>

          <p>"This occurred to Feather again and again until he had a sheet of glass
          with a single bubble in the center. When Feather finally had nothing else
          to do, he made the glass, then cut out an arcane symbol. It was a simple
          design, like a letter <em>Z</em>, but Feather had never seen this sort of
          letter before. The next morning he went to work, where he created the most
          beautiful vases and bowls ever crafted by mortal hands."</p>

          <p>Stallion looked up. "A magical symbol? What purpose  did it serve?"</p>

          <p>The old man smiled. "Feather never cared to know. He knew only one thing:
          that the bubble in the middle of the glass he had been trying to form for
          so long had finally appeared on the sheet of glass. He applied the symbol
          and an hour later he had two vases. When he turned them over they seemed
          to be seamless, with no hint of how they had been formed. He called the
          new vases Z''s Vases, and they became famous throughout the land."</p>

          <p>Tarry sighed and scratched his head. "But we are much like Feather, in
          that we strive to create something undeniably fine that will be enjoyed
          by all. We do not know why the magic works, or what the power is. But if
          you wish to make sword blades or vases, I can give you the ingredients and
          the lessons to make them work. But what about bats?"</p>

          <p>"Ah yes, my friend. You are right to ask this question! All through my
          life when people asked me how I came to have such good luck, I answered
          that I believed in karma, which is a universal law of cause and effect.
          I think that all men and women, all animals and plants, all  things were
          connected together by invisible cords. And when we are lucky, our connection
          with these threads is strengthened by positive deeds." The old man stood
          up and put his arm around Tarry''s shoulder. "Just remember this: When there
          is bad luck, it is due to some external action. Something has happened to
          ruin the karmic balance. Recently, I had a terrible dream. I dreamed that
          I was on a dark road, and I was being followed by a great shadow. Every
          time I tried to run, someone would grab me and force me back. So I strode
          forward boldly, and the shadow followed. Finally I realized that I was walking
          into the jaws of the great shadow. In fact, it caught up to me and swallowed
          me whole. I was trapped, and there was no way for me to escape, unless I
          accepted the shadow as my destiny. I woke up, frightened and confused. I
          remembered that night plainly, but it has taken me weeks to seek answers.
          What I have done since I awakened is an example of karma at work. I threw
          my life into service to the community, and I prayed for the chance to help
          you."</p>

          <p>Hourra nodded. "You''re our golden dragon!"</p>

          <p>Stallion thought of the dreams he''d had, the spirits who had come to
          him, the visions he had seen. He smiled down at Hourra and shook his hand.
          "We appreciate your kindness."</p>

          <p>Abe leaped to his feet. "Wait just a moment! I have an idea. When the
          bats go into Zone One, they should find the evil masterminds of the conspiracy.
          Once they have gathered at the designated location, they must leave and
          return to their home. The evil ones will soon realize that they cannot get
          to the bats without breaking their own secret oaths. The truth will be known
          and trouble will come! We will see the conspirators executed and justice
          will be found!"</p>

          <p>On hearing the plan Abe smiled widely. "Perfect! That is what I''ve been
          dreaming about!"</p>

          <p>Stallison glanced at Hourra. "You agree, don''t you?"</p>

          <p>"Of course!"</p>

          <p>"Do you trust the wisdom of my cousin?"</p>

          <p>Hourra shrugged. "I don''t know. But we need a plan, and Abe seems to
          have one. Let''s stick with it, and see what happens."</p>

          <p>With this, the group eagerly embraced one another. They hugged and discussed
          the plan</p>

          </blockquote>

          <p>Hopefully that''s more along the lines of what you''d want to see?</p>

          '
        raw: "Oof, yeah, that doesn't look too great, does it?!\n\nI did notice that\
          \ you have all the parameters set to those I recommended except repetition_penalty\
          \ is set to 1.2 instead of 1.02. Maybe that was a typo?\nI'm optimistic\
          \ that the 1.2 value is to blame. In my (limited) search over the generation\
          \ parameters, I quickly found that even 1.1 was producing bad results.\n\
          \nI'm tinkering with a demo, which I hope to make public soon. In the meantime,\
          \ I fed your prompt from the Colab and observe results like this:\n\n> Once\
          \ upon a time there was a poor blacksmith. He discovered a novel type of\
          \ metal from a miner in the Ur mountains. Upon forging a blade from it he\
          \ found  that it could withstand any edge more finely honed than any man\
          \ had ever made before, or would ever make again. This was a superior sword\
          \ to anything made even of the purest steel.\" The old man paused to wipe\
          \ his nose and look down at his belly. \"No weapon forged from this metal\
          \ could ever be broken. It could only be destroyed in the process of cutting\
          \ through it.\"\n>\n> Everyone stared. Even the children were wearying of\
          \ the tale. \"Go on,\" said Stallion. \"I'm intrigued now.\"\n> \n> \"The\
          \ blacksmith kept this to himself, feeling he could never duplicate it.\
          \ He tried numerous times with various materials and methods of smelting,\
          \ but he was forced to admit that none of them could achieve this lofty\
          \ goal. In time the blacksmith died, and his wife took her son into her\
          \ own house. Her son, whom she named Feather, grew up to become a weapon\
          \ smith as well. He worked with the same spirit and love for excellence\
          \ as his father, yet his mind and body were not strong enough to wrest mastery\
          \ from this special alloy. His blades were fine, but he could not keep up\
          \ a continuous flow of them. Hence, he became a baker of bread and the maker\
          \  of glass. He tried many things and failed in most of them, but one day\
          \ Feather found a spell that allowed him to melt his glass. It required\
          \ a difficult incantation, with each successive gasp of breath being an\
          \ essential part of the words. As Feather made his way through the chant\
          \ he held a piece of the molten glass in front of his face, and one thing\
          \ led to another, until he started making different types of bubbles in\
          \ the glass. These bubbles were unusual; they were multicolored and had\
          \ no apparent shape. One day, while playing with these bubbles, Feather\
          \ found that if he pressed one bubble with his thumb, then pulled away quickly,\
          \ it would shatter.\n>\n> \"This occurred to Feather again and again until\
          \ he had a sheet of glass with a single bubble in the center. When Feather\
          \ finally had nothing else to do, he made the glass, then cut out an arcane\
          \ symbol. It was a simple design, like a letter _Z_, but Feather had never\
          \ seen this sort of letter before. The next morning he went to work, where\
          \ he created the most beautiful vases and bowls ever crafted by mortal hands.\"\
          \n> \n> Stallion looked up. \"A magical symbol? What purpose  did it serve?\"\
          \n> \n> The old man smiled. \"Feather never cared to know. He knew only\
          \ one thing: that the bubble in the middle of the glass he had been trying\
          \ to form for so long had finally appeared on the sheet of glass. He applied\
          \ the symbol and an hour later he had two vases. When he turned them over\
          \ they seemed to be seamless, with no hint of how they had been formed.\
          \ He called the new vases Z's Vases, and they became famous throughout the\
          \ land.\"\n>\n> Tarry sighed and scratched his head. \"But we are much like\
          \ Feather, in that we strive to create something undeniably fine that will\
          \ be enjoyed by all. We do not know why the magic works, or what the power\
          \ is. But if you wish to make sword blades or vases, I can give you the\
          \ ingredients and the lessons to make them work. But what about bats?\"\n\
          > \n> \"Ah yes, my friend. You are right to ask this question! All through\
          \ my life when people asked me how I came to have such good luck, I answered\
          \ that I believed in karma, which is a universal law of cause and effect.\
          \ I think that all men and women, all animals and plants, all  things were\
          \ connected together by invisible cords. And when we are lucky, our connection\
          \ with these threads is strengthened by positive deeds.\" The old man stood\
          \ up and put his arm around Tarry's shoulder. \"Just remember this: When\
          \ there is bad luck, it is due to some external action. Something has happened\
          \ to ruin the karmic balance. Recently, I had a terrible dream. I dreamed\
          \ that I was on a dark road, and I was being followed by a great shadow.\
          \ Every time I tried to run, someone would grab me and force me back. So\
          \ I strode forward boldly, and the shadow followed. Finally I realized that\
          \ I was walking into the jaws of the great shadow. In fact, it caught up\
          \ to me and swallowed me whole. I was trapped, and there was no way for\
          \ me to escape, unless I accepted the shadow as my destiny. I woke up, frightened\
          \ and confused. I remembered that night plainly, but it has taken me weeks\
          \ to seek answers. What I have done since I awakened is an example of karma\
          \ at work. I threw my life into service to the community, and I prayed for\
          \ the chance to help you.\"\n> \n> Hourra nodded. \"You're our golden dragon!\"\
          \n> \n> Stallion thought of the dreams he'd had, the spirits who had come\
          \ to him, the visions he had seen. He smiled down at Hourra and shook his\
          \ hand. \"We appreciate your kindness.\"\n> \n> Abe leaped to his feet.\
          \ \"Wait just a moment! I have an idea. When the bats go into Zone One,\
          \ they should find the evil masterminds of the conspiracy. Once they have\
          \ gathered at the designated location, they must leave and return to their\
          \ home. The evil ones will soon realize that they cannot get to the bats\
          \ without breaking their own secret oaths. The truth will be known and trouble\
          \ will come! We will see the conspirators executed and justice will be found!\"\
          \n> \n> On hearing the plan Abe smiled widely. \"Perfect! That is what I've\
          \ been dreaming about!\"\n> \n> Stallison glanced at Hourra. \"You agree,\
          \ don't you?\"\n> \n> \"Of course!\"\n> \n> \"Do you trust the wisdom of\
          \ my cousin?\"\n> \n> Hourra shrugged. \"I don't know. But we need a plan,\
          \ and Abe seems to have one. Let's stick with it, and see what happens.\"\
          \n> \n> With this, the group eagerly embraced one another. They hugged and\
          \ discussed the plan\n\nHopefully that's more along the lines of what you'd\
          \ want to see?"
        updatedAt: '2023-05-09T05:42:53.017Z'
      numEdits: 0
      reactions: []
    id: 6459dd5df92601affa3fcbc9
    type: comment
  author: atrott
  content: "Oof, yeah, that doesn't look too great, does it?!\n\nI did notice that\
    \ you have all the parameters set to those I recommended except repetition_penalty\
    \ is set to 1.2 instead of 1.02. Maybe that was a typo?\nI'm optimistic that the\
    \ 1.2 value is to blame. In my (limited) search over the generation parameters,\
    \ I quickly found that even 1.1 was producing bad results.\n\nI'm tinkering with\
    \ a demo, which I hope to make public soon. In the meantime, I fed your prompt\
    \ from the Colab and observe results like this:\n\n> Once upon a time there was\
    \ a poor blacksmith. He discovered a novel type of metal from a miner in the Ur\
    \ mountains. Upon forging a blade from it he found  that it could withstand any\
    \ edge more finely honed than any man had ever made before, or would ever make\
    \ again. This was a superior sword to anything made even of the purest steel.\"\
    \ The old man paused to wipe his nose and look down at his belly. \"No weapon\
    \ forged from this metal could ever be broken. It could only be destroyed in the\
    \ process of cutting through it.\"\n>\n> Everyone stared. Even the children were\
    \ wearying of the tale. \"Go on,\" said Stallion. \"I'm intrigued now.\"\n> \n\
    > \"The blacksmith kept this to himself, feeling he could never duplicate it.\
    \ He tried numerous times with various materials and methods of smelting, but\
    \ he was forced to admit that none of them could achieve this lofty goal. In time\
    \ the blacksmith died, and his wife took her son into her own house. Her son,\
    \ whom she named Feather, grew up to become a weapon smith as well. He worked\
    \ with the same spirit and love for excellence as his father, yet his mind and\
    \ body were not strong enough to wrest mastery from this special alloy. His blades\
    \ were fine, but he could not keep up a continuous flow of them. Hence, he became\
    \ a baker of bread and the maker  of glass. He tried many things and failed in\
    \ most of them, but one day Feather found a spell that allowed him to melt his\
    \ glass. It required a difficult incantation, with each successive gasp of breath\
    \ being an essential part of the words. As Feather made his way through the chant\
    \ he held a piece of the molten glass in front of his face, and one thing led\
    \ to another, until he started making different types of bubbles in the glass.\
    \ These bubbles were unusual; they were multicolored and had no apparent shape.\
    \ One day, while playing with these bubbles, Feather found that if he pressed\
    \ one bubble with his thumb, then pulled away quickly, it would shatter.\n>\n\
    > \"This occurred to Feather again and again until he had a sheet of glass with\
    \ a single bubble in the center. When Feather finally had nothing else to do,\
    \ he made the glass, then cut out an arcane symbol. It was a simple design, like\
    \ a letter _Z_, but Feather had never seen this sort of letter before. The next\
    \ morning he went to work, where he created the most beautiful vases and bowls\
    \ ever crafted by mortal hands.\"\n> \n> Stallion looked up. \"A magical symbol?\
    \ What purpose  did it serve?\"\n> \n> The old man smiled. \"Feather never cared\
    \ to know. He knew only one thing: that the bubble in the middle of the glass\
    \ he had been trying to form for so long had finally appeared on the sheet of\
    \ glass. He applied the symbol and an hour later he had two vases. When he turned\
    \ them over they seemed to be seamless, with no hint of how they had been formed.\
    \ He called the new vases Z's Vases, and they became famous throughout the land.\"\
    \n>\n> Tarry sighed and scratched his head. \"But we are much like Feather, in\
    \ that we strive to create something undeniably fine that will be enjoyed by all.\
    \ We do not know why the magic works, or what the power is. But if you wish to\
    \ make sword blades or vases, I can give you the ingredients and the lessons to\
    \ make them work. But what about bats?\"\n> \n> \"Ah yes, my friend. You are right\
    \ to ask this question! All through my life when people asked me how I came to\
    \ have such good luck, I answered that I believed in karma, which is a universal\
    \ law of cause and effect. I think that all men and women, all animals and plants,\
    \ all  things were connected together by invisible cords. And when we are lucky,\
    \ our connection with these threads is strengthened by positive deeds.\" The old\
    \ man stood up and put his arm around Tarry's shoulder. \"Just remember this:\
    \ When there is bad luck, it is due to some external action. Something has happened\
    \ to ruin the karmic balance. Recently, I had a terrible dream. I dreamed that\
    \ I was on a dark road, and I was being followed by a great shadow. Every time\
    \ I tried to run, someone would grab me and force me back. So I strode forward\
    \ boldly, and the shadow followed. Finally I realized that I was walking into\
    \ the jaws of the great shadow. In fact, it caught up to me and swallowed me whole.\
    \ I was trapped, and there was no way for me to escape, unless I accepted the\
    \ shadow as my destiny. I woke up, frightened and confused. I remembered that\
    \ night plainly, but it has taken me weeks to seek answers. What I have done since\
    \ I awakened is an example of karma at work. I threw my life into service to the\
    \ community, and I prayed for the chance to help you.\"\n> \n> Hourra nodded.\
    \ \"You're our golden dragon!\"\n> \n> Stallion thought of the dreams he'd had,\
    \ the spirits who had come to him, the visions he had seen. He smiled down at\
    \ Hourra and shook his hand. \"We appreciate your kindness.\"\n> \n> Abe leaped\
    \ to his feet. \"Wait just a moment! I have an idea. When the bats go into Zone\
    \ One, they should find the evil masterminds of the conspiracy. Once they have\
    \ gathered at the designated location, they must leave and return to their home.\
    \ The evil ones will soon realize that they cannot get to the bats without breaking\
    \ their own secret oaths. The truth will be known and trouble will come! We will\
    \ see the conspirators executed and justice will be found!\"\n> \n> On hearing\
    \ the plan Abe smiled widely. \"Perfect! That is what I've been dreaming about!\"\
    \n> \n> Stallison glanced at Hourra. \"You agree, don't you?\"\n> \n> \"Of course!\"\
    \n> \n> \"Do you trust the wisdom of my cousin?\"\n> \n> Hourra shrugged. \"I\
    \ don't know. But we need a plan, and Abe seems to have one. Let's stick with\
    \ it, and see what happens.\"\n> \n> With this, the group eagerly embraced one\
    \ another. They hugged and discussed the plan\n\nHopefully that's more along the\
    \ lines of what you'd want to see?"
  created_at: 2023-05-09 04:42:53+00:00
  edited: false
  hidden: false
  id: 6459dd5df92601affa3fcbc9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2023-05-09T18:39:18.000Z'
    data:
      edited: false
      editors:
      - tkramer
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
          fullname: Tawn Kramer
          isHf: false
          isPro: false
          name: tkramer
          type: user
        html: '<p>Thanks for your reply. That fixed things for me! I''m seeing similar
          output now. :-)</p>

          '
        raw: Thanks for your reply. That fixed things for me! I'm seeing similar output
          now. :-)
        updatedAt: '2023-05-09T18:39:18.376Z'
      numEdits: 0
      reactions: []
      relatedEventId: 645a9356bf3f9fbb8c6a1ae3
    id: 645a9356bf3f9fbb8c6a1ae2
    type: comment
  author: tkramer
  content: Thanks for your reply. That fixed things for me! I'm seeing similar output
    now. :-)
  created_at: 2023-05-09 17:39:18+00:00
  edited: false
  hidden: false
  id: 645a9356bf3f9fbb8c6a1ae2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2023-05-09T18:39:18.000Z'
    data:
      status: closed
    id: 645a9356bf3f9fbb8c6a1ae3
    type: status-change
  author: tkramer
  created_at: 2023-05-09 17:39:18+00:00
  id: 645a9356bf3f9fbb8c6a1ae3
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2023-05-09T18:44:36.000Z'
    data:
      edited: false
      editors:
      - tkramer
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
          fullname: Tawn Kramer
          isHf: false
          isPro: false
          name: tkramer
          type: user
        html: '<p>Just a note that I noticed some logical failings. At one point the
          blacksmith was killed and later featured in the story as if that hadn''t
          happened. I expect that will occur in models of this size.</p>

          '
        raw: Just a note that I noticed some logical failings. At one point the blacksmith
          was killed and later featured in the story as if that hadn't happened. I
          expect that will occur in models of this size.
        updatedAt: '2023-05-09T18:44:36.692Z'
      numEdits: 0
      reactions: []
    id: 645a9494e505443f819527b3
    type: comment
  author: tkramer
  content: Just a note that I noticed some logical failings. At one point the blacksmith
    was killed and later featured in the story as if that hadn't happened. I expect
    that will occur in models of this size.
  created_at: 2023-05-09 17:44:36+00:00
  edited: false
  hidden: false
  id: 645a9494e505443f819527b3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
      fullname: Sam Havens
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sam-mosaic
      type: user
    createdAt: '2023-05-09T18:53:00.000Z'
    data:
      edited: false
      editors:
      - sam-mosaic
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1668560930781-noauth.png?w=200&h=200&f=face
          fullname: Sam Havens
          isHf: false
          isPro: false
          name: sam-mosaic
          type: user
        html: "<p>The demo that <span data-props=\"{&quot;user&quot;:&quot;atrott&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/atrott\"\
          >@<span class=\"underline\">atrott</span></a></span>\n\n\t</span></span>\
          \ mentioned is public now: <a href=\"https://huggingface.co/spaces/mosaicml/mpt-7b-storywriter\"\
          >StoryWriter Demo</a></p>\n"
        raw: 'The demo that @atrott mentioned is public now: [StoryWriter Demo](https://huggingface.co/spaces/mosaicml/mpt-7b-storywriter)'
        updatedAt: '2023-05-09T18:53:00.999Z'
      numEdits: 0
      reactions: []
    id: 645a968cdbf60d373360c555
    type: comment
  author: sam-mosaic
  content: 'The demo that @atrott mentioned is public now: [StoryWriter Demo](https://huggingface.co/spaces/mosaicml/mpt-7b-storywriter)'
  created_at: 2023-05-09 17:53:00+00:00
  edited: false
  hidden: false
  id: 645a968cdbf60d373360c555
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ff5189007e1a5e51951a8adf9a829c54.svg
      fullname: Ethan Turok
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: eturok
      type: user
    createdAt: '2023-07-07T18:47:30.000Z'
    data:
      edited: false
      editors:
      - eturok
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.889397144317627
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ff5189007e1a5e51951a8adf9a829c54.svg
          fullname: Ethan Turok
          isHf: false
          isPro: false
          name: eturok
          type: user
        html: '<p>The link to the demo no longer works.</p>

          '
        raw: The link to the demo no longer works.
        updatedAt: '2023-07-07T18:47:30.897Z'
      numEdits: 0
      reactions: []
    id: 64a85dc2541a9ffd7e68a8a3
    type: comment
  author: eturok
  content: The link to the demo no longer works.
  created_at: 2023-07-07 17:47:30+00:00
  edited: false
  hidden: false
  id: 64a85dc2541a9ffd7e68a8a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c306419679f0f8cdfd6386c88514a46b.svg
      fullname: Sumit kumar
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Sumit6597
      type: user
    createdAt: '2024-01-22T04:20:15.000Z'
    data:
      edited: false
      editors:
      - Sumit6597
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9202100038528442
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c306419679f0f8cdfd6386c88514a46b.svg
          fullname: Sumit kumar
          isHf: false
          isPro: false
          name: Sumit6597
          type: user
        html: '<p>Am I missing any configurations? I am setting the max_token_length
          to 80k+, but the story is really short.</p>

          '
        raw: 'Am I missing any configurations? I am setting the max_token_length to
          80k+, but the story is really short.

          '
        updatedAt: '2024-01-22T04:20:15.527Z'
      numEdits: 0
      reactions: []
    id: 65adecff2582acc636ee4064
    type: comment
  author: Sumit6597
  content: 'Am I missing any configurations? I am setting the max_token_length to
    80k+, but the story is really short.

    '
  created_at: 2024-01-22 04:20:15+00:00
  edited: false
  hidden: false
  id: 65adecff2582acc636ee4064
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
      fullname: Tawn Kramer
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tkramer
      type: user
    createdAt: '2024-01-22T04:47:53.000Z'
    data:
      edited: false
      editors:
      - tkramer
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9617045521736145
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cb7cd6e36572ff02901e20ef0cada543.svg
          fullname: Tawn Kramer
          isHf: false
          isPro: false
          name: tkramer
          type: user
        html: "<p>No offense, but the length of the story isn\u2019t the failing of\
          \ this model. It seems unable to stick to a narrative. It is rambling and\
          \ more like a drunk story teller who forgets what they said two minutes\
          \ ago. </p>\n"
        raw: "No offense, but the length of the story isn\u2019t the failing of this\
          \ model. It seems unable to stick to a narrative. It is rambling and more\
          \ like a drunk story teller who forgets what they said two minutes ago. "
        updatedAt: '2024-01-22T04:47:53.843Z'
      numEdits: 0
      reactions: []
    id: 65adf379d6b4c93ba689613a
    type: comment
  author: tkramer
  content: "No offense, but the length of the story isn\u2019t the failing of this\
    \ model. It seems unable to stick to a narrative. It is rambling and more like\
    \ a drunk story teller who forgets what they said two minutes ago. "
  created_at: 2024-01-22 04:47:53+00:00
  edited: false
  hidden: false
  id: 65adf379d6b4c93ba689613a
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 9
repo_id: mosaicml/mpt-7b-storywriter
repo_type: model
status: closed
target_branch: null
title: how to control spew?
