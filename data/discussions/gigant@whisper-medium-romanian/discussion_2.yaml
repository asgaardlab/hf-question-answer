!!python/object:huggingface_hub.community.DiscussionWithDetails
author: danbozaru
conflicting_files: null
created_at: 2023-08-10 08:26:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5298eccb0957ef0a03608d0f4b27b179.svg
      fullname: Dan Bozaru
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: danbozaru
      type: user
    createdAt: '2023-08-10T09:26:45.000Z'
    data:
      edited: false
      editors:
      - danbozaru
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.46368739008903503
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5298eccb0957ef0a03608d0f4b27b179.svg
          fullname: Dan Bozaru
          isHf: false
          isPro: false
          name: danbozaru
          type: user
        html: '<p>Thank you!</p>

          '
        raw: Thank you!
        updatedAt: '2023-08-10T09:26:45.823Z'
      numEdits: 0
      reactions: []
    id: 64d4ad55e05d0abbeb5c81e9
    type: comment
  author: danbozaru
  content: Thank you!
  created_at: 2023-08-10 08:26:45+00:00
  edited: false
  hidden: false
  id: 64d4ad55e05d0abbeb5c81e9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645712223620-60d35154d7b174177faabd55.jpeg?w=200&h=200&f=face
      fullname: "Th\xE9o Gigant"
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: gigant
      type: user
    createdAt: '2023-08-16T15:38:52.000Z'
    data:
      edited: false
      editors:
      - gigant
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9347788691520691
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645712223620-60d35154d7b174177faabd55.jpeg?w=200&h=200&f=face
          fullname: "Th\xE9o Gigant"
          isHf: false
          isPro: false
          name: gigant
          type: user
        html: '<p>i''ve never used this, i''ll take a look at it :)</p>

          '
        raw: i've never used this, i'll take a look at it :)
        updatedAt: '2023-08-16T15:38:52.952Z'
      numEdits: 0
      reactions: []
    id: 64dced8c1f49285575cbdf5d
    type: comment
  author: gigant
  content: i've never used this, i'll take a look at it :)
  created_at: 2023-08-16 14:38:52+00:00
  edited: false
  hidden: false
  id: 64dced8c1f49285575cbdf5d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bbd9bc62dfb92f80eb8a2b1816725bb1.svg
      fullname: mihai moldovanu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mmol
      type: user
    createdAt: '2023-12-30T22:27:02.000Z'
    data:
      edited: true
      editors:
      - mmol
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.44435423612594604
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bbd9bc62dfb92f80eb8a2b1816725bb1.svg
          fullname: mihai moldovanu
          isHf: false
          isPro: false
          name: mmol
          type: user
        html: "<p>I also tried to compile into ggml bin using something like this:<br><code>python\
          \ models/convert-pt-to-ggml.py ~/AI-test/voice/whisper-medium-romanian/checkpoint-1000/optimizer.pt\
          \ ../whisper ./models/whisper-medium</code><br>but got the infamous error:</p>\n\
          <pre><code class=\"language-convert-pt-to-ggml.py&quot;,\">    hparams =\
          \ checkpoint[\"dims\"]\nKeyError: 'dims' ```\n\non a \"normal\" model after\
          \ *torch.load* it returns  an array similar to this :\n</code></pre>\n<p>\
          \ {'dims': {'n_mels': 80, 'n_vocab': 51864, 'n_audio_ctx': 1500, 'n_audio_state':\
          \ 384, 'n_audio_head': 6, 'n_audio_layer': 4, 'n_text_ctx': 448, 'n_text_state':\
          \ 384, 'n_text_head': 6, 'n_text_layer': 4}, 'model_state_dict': </p>\n\
          <pre><code>\nLater edit\nI was using the wrong script . It was written in\
          \ the documentation: \n</code></pre>\n<p>python models/convert-h5-to-ggml.py\
          \ /mypool/par3disk/mihaim/AI/voice/whisper-medium-romanian/checkpoint-3500\
          \ ../whisper ./models</p>\n<pre><code>So it's actually working . \n</code></pre>\n"
        raw: "I also tried to compile into ggml bin using something like this:  \n\
          ``` python models/convert-pt-to-ggml.py ~/AI-test/voice/whisper-medium-romanian/checkpoint-1000/optimizer.pt\
          \ ../whisper ./models/whisper-medium ```\nbut got the infamous error:\n\
          ``` convert-pt-to-ggml.py\", line 212, in <module>\n    hparams = checkpoint[\"\
          dims\"]\nKeyError: 'dims' ```\n\non a \"normal\" model after *torch.load*\
          \ it returns  an array similar to this :\n``` \n {'dims': {'n_mels': 80,\
          \ 'n_vocab': 51864, 'n_audio_ctx': 1500, 'n_audio_state': 384, 'n_audio_head':\
          \ 6, 'n_audio_layer': 4, 'n_text_ctx': 448, 'n_text_state': 384, 'n_text_head':\
          \ 6, 'n_text_layer': 4}, 'model_state_dict': \n```\n\nLater edit\nI was\
          \ using the wrong script . It was written in the documentation: \n\n```\n\
          python models/convert-h5-to-ggml.py /mypool/par3disk/mihaim/AI/voice/whisper-medium-romanian/checkpoint-3500\
          \ ../whisper ./models\n```\nSo it's actually working . \n"
        updatedAt: '2024-01-03T20:16:37.456Z'
      numEdits: 1
      reactions: []
    id: 6590993687944e494e40ad89
    type: comment
  author: mmol
  content: "I also tried to compile into ggml bin using something like this:  \n```\
    \ python models/convert-pt-to-ggml.py ~/AI-test/voice/whisper-medium-romanian/checkpoint-1000/optimizer.pt\
    \ ../whisper ./models/whisper-medium ```\nbut got the infamous error:\n``` convert-pt-to-ggml.py\"\
    , line 212, in <module>\n    hparams = checkpoint[\"dims\"]\nKeyError: 'dims'\
    \ ```\n\non a \"normal\" model after *torch.load* it returns  an array similar\
    \ to this :\n``` \n {'dims': {'n_mels': 80, 'n_vocab': 51864, 'n_audio_ctx': 1500,\
    \ 'n_audio_state': 384, 'n_audio_head': 6, 'n_audio_layer': 4, 'n_text_ctx': 448,\
    \ 'n_text_state': 384, 'n_text_head': 6, 'n_text_layer': 4}, 'model_state_dict':\
    \ \n```\n\nLater edit\nI was using the wrong script . It was written in the documentation:\
    \ \n\n```\npython models/convert-h5-to-ggml.py /mypool/par3disk/mihaim/AI/voice/whisper-medium-romanian/checkpoint-3500\
    \ ../whisper ./models\n```\nSo it's actually working . \n"
  created_at: 2023-12-30 22:27:02+00:00
  edited: true
  hidden: false
  id: 6590993687944e494e40ad89
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645712223620-60d35154d7b174177faabd55.jpeg?w=200&h=200&f=face
      fullname: "Th\xE9o Gigant"
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: gigant
      type: user
    createdAt: '2024-01-09T16:01:28.000Z'
    data:
      edited: false
      editors:
      - gigant
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9863532185554504
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645712223620-60d35154d7b174177faabd55.jpeg?w=200&h=200&f=face
          fullname: "Th\xE9o Gigant"
          isHf: false
          isPro: false
          name: gigant
          type: user
        html: "<p>nice <span data-props=\"{&quot;user&quot;:&quot;mmol&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/mmol\">@<span class=\"\
          underline\">mmol</span></a></span>\n\n\t</span></span>  . I didn't have\
          \ time to check all of that but it seems that you made it work :)<br>if\
          \ you want to share the ggml binary you created do not hesitate to open\
          \ a PR on this model</p>\n"
        raw: 'nice @mmol  . I didn''t have time to check all of that but it seems
          that you made it work :)

          if you want to share the ggml binary you created do not hesitate to open
          a PR on this model'
        updatedAt: '2024-01-09T16:01:28.291Z'
      numEdits: 0
      reactions: []
    id: 659d6dd81fe15e98ad1fc49d
    type: comment
  author: gigant
  content: 'nice @mmol  . I didn''t have time to check all of that but it seems that
    you made it work :)

    if you want to share the ggml binary you created do not hesitate to open a PR
    on this model'
  created_at: 2024-01-09 16:01:28+00:00
  edited: false
  hidden: false
  id: 659d6dd81fe15e98ad1fc49d
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: gigant/whisper-medium-romanian
repo_type: model
status: open
target_branch: null
title: Any way to compile this into a ggml bin?
