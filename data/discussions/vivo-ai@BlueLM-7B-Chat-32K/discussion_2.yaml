!!python/object:huggingface_hub.community.DiscussionWithDetails
author: ijustloveses
conflicting_files: null
created_at: 2023-11-02 09:10:00+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e147a5a1026e01f9929a07bebeedb0a1.svg
      fullname: Ai Li
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ijustloveses
      type: user
    createdAt: '2023-11-02T10:10:00.000Z'
    data:
      edited: false
      editors:
      - ijustloveses
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4530118703842163
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e147a5a1026e01f9929a07bebeedb0a1.svg
          fullname: Ai Li
          isHf: false
          isPro: false
          name: ijustloveses
          type: user
        html: '<p>Loading checkpoint shards:   0%|                                                                                                                                                     |
          0/8 [00:01&lt;?, ?it/s]<br>Traceback (most recent call last):<br>  File
          "/root/workspace/testqa/testqa_with_bluelm_7b_chat_32k.py", line 10, in
          <br>    model = AutoModelForCausalLM.from_pretrained(<br>  File "/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/models/auto/auto_factory.py",
          line 558, in from_pretrained<br>    return model_class.from_pretrained(<br>  File
          "/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py",
          line 3180, in from_pretrained<br>    ) = cls._load_pretrained_model(<br>  File
          "/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py",
          line 3568, in _load_pretrained_model<br>    new_error_msgs, offload_index,
          state_dict_index = _load_state_dict_into_meta_model(<br>  File "/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py",
          line 745, in _load_state_dict_into_meta_model<br>    set_module_tensor_to_device(model,
          param_name, param_device, **set_module_kwargs)<br>  File "/opt/miniconda3/envs/willy/lib/python3.10/site-packages/accelerate/utils/modeling.py",
          line 285, in set_module_tensor_to_device<br>    raise ValueError(<br>ValueError:
          Trying to set a tensor of shape torch.Size([100096, 4096]) in "weight" (which
          has shape torch.Size([100004, 4096])), this look incorrect.</p>

          '
        raw: "Loading checkpoint shards:   0%|                                   \
          \                                                                      \
          \                                            | 0/8 [00:01<?, ?it/s]\r\n\
          Traceback (most recent call last):\r\n  File \"/root/workspace/testqa/testqa_with_bluelm_7b_chat_32k.py\"\
          , line 10, in <module>\r\n    model = AutoModelForCausalLM.from_pretrained(\r\
          \n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/models/auto/auto_factory.py\"\
          , line 558, in from_pretrained\r\n    return model_class.from_pretrained(\r\
          \n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
          , line 3180, in from_pretrained\r\n    ) = cls._load_pretrained_model(\r\
          \n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
          , line 3568, in _load_pretrained_model\r\n    new_error_msgs, offload_index,\
          \ state_dict_index = _load_state_dict_into_meta_model(\r\n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
          , line 745, in _load_state_dict_into_meta_model\r\n    set_module_tensor_to_device(model,\
          \ param_name, param_device, **set_module_kwargs)\r\n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/accelerate/utils/modeling.py\"\
          , line 285, in set_module_tensor_to_device\r\n    raise ValueError(\r\n\
          ValueError: Trying to set a tensor of shape torch.Size([100096, 4096]) in\
          \ \"weight\" (which has shape torch.Size([100004, 4096])), this look incorrect."
        updatedAt: '2023-11-02T10:10:00.786Z'
      numEdits: 0
      reactions: []
    id: 6543757821f55472a8bf762c
    type: comment
  author: ijustloveses
  content: "Loading checkpoint shards:   0%|                                     \
    \                                                                            \
    \                                    | 0/8 [00:01<?, ?it/s]\r\nTraceback (most\
    \ recent call last):\r\n  File \"/root/workspace/testqa/testqa_with_bluelm_7b_chat_32k.py\"\
    , line 10, in <module>\r\n    model = AutoModelForCausalLM.from_pretrained(\r\n\
    \  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/models/auto/auto_factory.py\"\
    , line 558, in from_pretrained\r\n    return model_class.from_pretrained(\r\n\
    \  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
    , line 3180, in from_pretrained\r\n    ) = cls._load_pretrained_model(\r\n  File\
    \ \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
    , line 3568, in _load_pretrained_model\r\n    new_error_msgs, offload_index, state_dict_index\
    \ = _load_state_dict_into_meta_model(\r\n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/transformers/modeling_utils.py\"\
    , line 745, in _load_state_dict_into_meta_model\r\n    set_module_tensor_to_device(model,\
    \ param_name, param_device, **set_module_kwargs)\r\n  File \"/opt/miniconda3/envs/willy/lib/python3.10/site-packages/accelerate/utils/modeling.py\"\
    , line 285, in set_module_tensor_to_device\r\n    raise ValueError(\r\nValueError:\
    \ Trying to set a tensor of shape torch.Size([100096, 4096]) in \"weight\" (which\
    \ has shape torch.Size([100004, 4096])), this look incorrect."
  created_at: 2023-11-02 09:10:00+00:00
  edited: false
  hidden: false
  id: 6543757821f55472a8bf762c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/870724e20dc1c221fbe9c6656720ab9b.svg
      fullname: Pororo
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jeffreygao
      type: user
    createdAt: '2023-11-02T12:04:00.000Z'
    data:
      edited: false
      editors:
      - jeffreygao
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9451783299446106
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/870724e20dc1c221fbe9c6656720ab9b.svg
          fullname: Pororo
          isHf: false
          isPro: false
          name: jeffreygao
          type: user
        html: '<p>Can you provide your environment?</p>

          '
        raw: Can you provide your environment?
        updatedAt: '2023-11-02T12:04:00.280Z'
      numEdits: 0
      reactions: []
    id: 654390307b8e48539aeca06f
    type: comment
  author: jeffreygao
  content: Can you provide your environment?
  created_at: 2023-11-02 11:04:00+00:00
  edited: false
  hidden: false
  id: 654390307b8e48539aeca06f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5d3e8c861245d0e48324a4bcb7921158.svg
      fullname: fenjun
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dafen
      type: user
    createdAt: '2023-11-10T14:30:50.000Z'
    data:
      edited: false
      editors:
      - dafen
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9849129915237427
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5d3e8c861245d0e48324a4bcb7921158.svg
          fullname: fenjun
          isHf: false
          isPro: false
          name: dafen
          type: user
        html: "<p>\u6211\u9047\u5230\u8FC7\u7C7B\u4F3C\u7684\u95EE\u9898\uFF0C\u4F60\
          \u662F\u4E0D\u662F\u6A21\u578B\u6CA1\u6709\u76F4\u63A5\u52A0\u8F7D\u5230\
          gpu\u4E0A\uFF0C\u800C\u662F\u5148\u52A0\u8F7D\u5230cpu\u7136\u540E\u518D\
          \u52A0\u8F7D\u5230gpu\uFF1F\u8C8C\u4F3C\u8FD9\u4E2A\u6A21\u578B\u5728\u8FD9\
          \u79CD\u65B9\u5F0F\u4E0B\u4F1A\u6709bug</p>\n"
        raw: "\u6211\u9047\u5230\u8FC7\u7C7B\u4F3C\u7684\u95EE\u9898\uFF0C\u4F60\u662F\
          \u4E0D\u662F\u6A21\u578B\u6CA1\u6709\u76F4\u63A5\u52A0\u8F7D\u5230gpu\u4E0A\
          \uFF0C\u800C\u662F\u5148\u52A0\u8F7D\u5230cpu\u7136\u540E\u518D\u52A0\u8F7D\
          \u5230gpu\uFF1F\u8C8C\u4F3C\u8FD9\u4E2A\u6A21\u578B\u5728\u8FD9\u79CD\u65B9\
          \u5F0F\u4E0B\u4F1A\u6709bug"
        updatedAt: '2023-11-10T14:30:50.662Z'
      numEdits: 0
      reactions: []
    id: 654e3e9a85a5e608058d395c
    type: comment
  author: dafen
  content: "\u6211\u9047\u5230\u8FC7\u7C7B\u4F3C\u7684\u95EE\u9898\uFF0C\u4F60\u662F\
    \u4E0D\u662F\u6A21\u578B\u6CA1\u6709\u76F4\u63A5\u52A0\u8F7D\u5230gpu\u4E0A\uFF0C\
    \u800C\u662F\u5148\u52A0\u8F7D\u5230cpu\u7136\u540E\u518D\u52A0\u8F7D\u5230gpu\uFF1F\
    \u8C8C\u4F3C\u8FD9\u4E2A\u6A21\u578B\u5728\u8FD9\u79CD\u65B9\u5F0F\u4E0B\u4F1A\
    \u6709bug"
  created_at: 2023-11-10 14:30:50+00:00
  edited: false
  hidden: false
  id: 654e3e9a85a5e608058d395c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/870724e20dc1c221fbe9c6656720ab9b.svg
      fullname: Pororo
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jeffreygao
      type: user
    createdAt: '2023-11-23T11:26:27.000Z'
    data:
      edited: false
      editors:
      - jeffreygao
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9576241970062256
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/870724e20dc1c221fbe9c6656720ab9b.svg
          fullname: Pororo
          isHf: false
          isPro: false
          name: jeffreygao
          type: user
        html: '<p>We have fixed this bug.</p>

          '
        raw: We have fixed this bug.
        updatedAt: '2023-11-23T11:26:27.593Z'
      numEdits: 0
      reactions: []
      relatedEventId: 655f36e30523479b9714daa6
    id: 655f36e30523479b9714daa5
    type: comment
  author: jeffreygao
  content: We have fixed this bug.
  created_at: 2023-11-23 11:26:27+00:00
  edited: false
  hidden: false
  id: 655f36e30523479b9714daa5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/870724e20dc1c221fbe9c6656720ab9b.svg
      fullname: Pororo
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: jeffreygao
      type: user
    createdAt: '2023-11-23T11:26:27.000Z'
    data:
      status: closed
    id: 655f36e30523479b9714daa6
    type: status-change
  author: jeffreygao
  created_at: 2023-11-23 11:26:27+00:00
  id: 655f36e30523479b9714daa6
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: vivo-ai/BlueLM-7B-Chat-32K
repo_type: model
status: closed
target_branch: null
title: failed when loading model
