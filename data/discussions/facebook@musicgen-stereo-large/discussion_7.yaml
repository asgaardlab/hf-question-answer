!!python/object:huggingface_hub.community.DiscussionWithDetails
author: tintwotin
conflicting_files: null
created_at: 2023-11-23 09:06:28+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1732106613b89ea94b3f189bb73349d0.svg
      fullname: tin tin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tintwotin
      type: user
    createdAt: '2023-11-23T09:06:28.000Z'
    data:
      edited: false
      editors:
      - tintwotin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4318712651729584
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1732106613b89ea94b3f189bb73349d0.svg
          fullname: tin tin
          isHf: false
          isPro: false
          name: tintwotin
          type: user
        html: '<p>Running this example code:</p>

          <p>import torch<br>import soundfile as sf<br>from transformers import pipeline</p>

          <p>synthesiser = pipeline("text-to-audio", "facebook/musicgen-stereo-small",
          device="cuda:0", torch_dtype=torch.float16)</p>

          <p>music = synthesiser("lo-fi music with a soothing melody", forward_params={"max_new_tokens":
          256})</p>

          <p>sf.write("musicgen_out.wav", music["audio"][0].T, music["sampling_rate"])</p>

          <p>I get this error: </p>

          <p>python\lib\site-packages\torch\nn\modules\container.py", line 283, in
          _get_abs_string_index<br>    raise IndexError(f''index {idx} is out of range'')<br>IndexError:
          index 4 is out of range</p>

          '
        raw: "Running this example code:\r\n\r\nimport torch\r\nimport soundfile as\
          \ sf\r\nfrom transformers import pipeline\r\n\r\nsynthesiser = pipeline(\"\
          text-to-audio\", \"facebook/musicgen-stereo-small\", device=\"cuda:0\",\
          \ torch_dtype=torch.float16)\r\n\r\nmusic = synthesiser(\"lo-fi music with\
          \ a soothing melody\", forward_params={\"max_new_tokens\": 256})\r\n\r\n\
          sf.write(\"musicgen_out.wav\", music[\"audio\"][0].T, music[\"sampling_rate\"\
          ])\r\n\r\nI get this error: \r\n\r\npython\\lib\\site-packages\\torch\\\
          nn\\modules\\container.py\", line 283, in _get_abs_string_index\r\n    raise\
          \ IndexError(f'index {idx} is out of range')\r\nIndexError: index 4 is out\
          \ of range"
        updatedAt: '2023-11-23T09:06:28.439Z'
      numEdits: 0
      reactions: []
    id: 655f16142fe9f470c9ea3430
    type: comment
  author: tintwotin
  content: "Running this example code:\r\n\r\nimport torch\r\nimport soundfile as\
    \ sf\r\nfrom transformers import pipeline\r\n\r\nsynthesiser = pipeline(\"text-to-audio\"\
    , \"facebook/musicgen-stereo-small\", device=\"cuda:0\", torch_dtype=torch.float16)\r\
    \n\r\nmusic = synthesiser(\"lo-fi music with a soothing melody\", forward_params={\"\
    max_new_tokens\": 256})\r\n\r\nsf.write(\"musicgen_out.wav\", music[\"audio\"\
    ][0].T, music[\"sampling_rate\"])\r\n\r\nI get this error: \r\n\r\npython\\lib\\\
    site-packages\\torch\\nn\\modules\\container.py\", line 283, in _get_abs_string_index\r\
    \n    raise IndexError(f'index {idx} is out of range')\r\nIndexError: index 4\
    \ is out of range"
  created_at: 2023-11-23 09:06:28+00:00
  edited: false
  hidden: false
  id: 655f16142fe9f470c9ea3430
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-11-23T14:46:54.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8940185308456421
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;tintwotin&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/tintwotin\"\
          >@<span class=\"underline\">tintwotin</span></a></span>\n\n\t</span></span>!\
          \ Unfortunately, I am not able to reproduce on the latest version of <code>transformers</code>.\
          \ Could you kindly confirm that you are running the latest PyPi version\
          \ (or installed from <code>main</code>)?</p>\n<pre><code>pip install -U\
          \ transformers\n</code></pre>\n<p>If you upgrade the library as detailed\
          \ above, re-run the code-snippet, and the issue still persists, could you\
          \ please post the output of the command:</p>\n<pre><code>transformers-cli\
          \ env\n</code></pre>\n<p>Many thanks!</p>\n"
        raw: 'Hey @tintwotin! Unfortunately, I am not able to reproduce on the latest
          version of `transformers`. Could you kindly confirm that you are running
          the latest PyPi version (or installed from `main`)?


          ```

          pip install -U transformers

          ```


          If you upgrade the library as detailed above, re-run the code-snippet, and
          the issue still persists, could you please post the output of the command:


          ```

          transformers-cli env

          ```


          Many thanks!'
        updatedAt: '2023-11-23T14:46:54.425Z'
      numEdits: 0
      reactions: []
    id: 655f65de60f1a93e903824ff
    type: comment
  author: sanchit-gandhi
  content: 'Hey @tintwotin! Unfortunately, I am not able to reproduce on the latest
    version of `transformers`. Could you kindly confirm that you are running the latest
    PyPi version (or installed from `main`)?


    ```

    pip install -U transformers

    ```


    If you upgrade the library as detailed above, re-run the code-snippet, and the
    issue still persists, could you please post the output of the command:


    ```

    transformers-cli env

    ```


    Many thanks!'
  created_at: 2023-11-23 14:46:54+00:00
  edited: false
  hidden: false
  id: 655f65de60f1a93e903824ff
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1732106613b89ea94b3f189bb73349d0.svg
      fullname: tin tin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tintwotin
      type: user
    createdAt: '2023-11-23T19:37:02.000Z'
    data:
      edited: true
      editors:
      - tintwotin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.986975371837616
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1732106613b89ea94b3f189bb73349d0.svg
          fullname: tin tin
          isHf: false
          isPro: false
          name: tintwotin
          type: user
        html: '<p>I had several python side-package installation folders on the hdd,
          and I needed to clean out all of them. And now it works. Thank you!</p>

          '
        raw: I had several python side-package installation folders on the hdd, and
          I needed to clean out all of them. And now it works. Thank you!
        updatedAt: '2023-11-23T19:37:27.530Z'
      numEdits: 1
      reactions: []
      relatedEventId: 655fa9df10e5c5fbef4006d1
    id: 655fa9de10e5c5fbef4006cf
    type: comment
  author: tintwotin
  content: I had several python side-package installation folders on the hdd, and
    I needed to clean out all of them. And now it works. Thank you!
  created_at: 2023-11-23 19:37:02+00:00
  edited: true
  hidden: false
  id: 655fa9de10e5c5fbef4006cf
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/1732106613b89ea94b3f189bb73349d0.svg
      fullname: tin tin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tintwotin
      type: user
    createdAt: '2023-11-23T19:37:03.000Z'
    data:
      status: closed
    id: 655fa9df10e5c5fbef4006d1
    type: status-change
  author: tintwotin
  created_at: 2023-11-23 19:37:03+00:00
  id: 655fa9df10e5c5fbef4006d1
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cba7d14c4ddd3f15dfd1dbf1bf37482d.svg
      fullname: Jaoreir Fan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: jaoreir
      type: user
    createdAt: '2023-11-29T10:29:20.000Z'
    data:
      edited: false
      editors:
      - jaoreir
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9408528804779053
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cba7d14c4ddd3f15dfd1dbf1bf37482d.svg
          fullname: Jaoreir Fan
          isHf: false
          isPro: false
          name: jaoreir
          type: user
        html: '<p>I ran into this issue too, and was able to resolve it by upgrading
          transformers from 4.35.2 to 4.36.0.dev0<br>Instead of installing transformer
          directly from pip <code>pip install transformers</code>, I followed the
          readme and did <code>pip install --upgrade git+https://github.com/huggingface/transformers.git</code>
          instead.<br>Hope this helps someone else!</p>

          '
        raw: 'I ran into this issue too, and was able to resolve it by upgrading transformers
          from 4.35.2 to 4.36.0.dev0

          Instead of installing transformer directly from pip `pip install transformers`,
          I followed the readme and did `pip install --upgrade git+https://github.com/huggingface/transformers.git`
          instead.

          Hope this helps someone else!'
        updatedAt: '2023-11-29T10:29:20.741Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sanchit-gandhi
    id: 65671280a9441fd9214c953c
    type: comment
  author: jaoreir
  content: 'I ran into this issue too, and was able to resolve it by upgrading transformers
    from 4.35.2 to 4.36.0.dev0

    Instead of installing transformer directly from pip `pip install transformers`,
    I followed the readme and did `pip install --upgrade git+https://github.com/huggingface/transformers.git`
    instead.

    Hope this helps someone else!'
  created_at: 2023-11-29 10:29:20+00:00
  edited: false
  hidden: false
  id: 65671280a9441fd9214c953c
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 7
repo_id: facebook/musicgen-stereo-large
repo_type: model
status: closed
target_branch: null
title: 'IndexError: index 4 is out of range'
