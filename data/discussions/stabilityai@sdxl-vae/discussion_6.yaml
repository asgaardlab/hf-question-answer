!!python/object:huggingface_hub.community.DiscussionWithDetails
author: afwww
conflicting_files: null
created_at: 2023-07-05 02:00:34+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9be7857a6e06d6cf99bd2829ded9ef02.svg
      fullname: jiang
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: afwww
      type: user
    createdAt: '2023-07-05T03:00:34.000Z'
    data:
      edited: false
      editors:
      - afwww
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.4298660457134247
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9be7857a6e06d6cf99bd2829ded9ef02.svg
          fullname: jiang
          isHf: false
          isPro: false
          name: afwww
          type: user
        html: '<p>get nan when inference with fp16</p>

          '
        raw: get nan when inference with fp16
        updatedAt: '2023-07-05T03:00:34.107Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - fepegar
        - Leoncy
    id: 64a4dcd2bbc03d2b09823502
    type: comment
  author: afwww
  content: get nan when inference with fp16
  created_at: 2023-07-05 02:00:34+00:00
  edited: false
  hidden: false
  id: 64a4dcd2bbc03d2b09823502
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
      fullname: madebyollin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: madebyollin
      type: user
    createdAt: '2023-07-11T05:35:59.000Z'
    data:
      edited: true
      editors:
      - madebyollin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.87897789478302
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/eWxGBQdUjL3xkk-I_XKwm.png?w=200&h=200&f=face
          fullname: madebyollin
          isHf: false
          isPro: false
          name: madebyollin
          type: user
        html: '<p>if your device supports it, bf16 should just work.</p>

          <p>if not, you could try using this version <a href="https://huggingface.co/madebyollin/sdxl-vae-fp16-fix">https://huggingface.co/madebyollin/sdxl-vae-fp16-fix</a>,
          which I attempted to make fp16-compatible</p>

          <p><strong>EDIT:</strong><br><code>sdxl-vae-fp16-fix</code> was built on
          top of the SDXL-VAE (0.9) checkpoint. SDXL-VAE (1.0) changed the decoder
          slightly:</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/cEivdq_ZCBWEKgJ0hwPCA.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/cEivdq_ZCBWEKgJ0hwPCA.png"></a></p>

          <p>I think the SDXL-VAE (0.9) decoder is substantially more stylish, so:</p>

          <ul>

          <li><code>sdxl-vae-fp16-fix</code> will continue to be compatible with both
          SDXL 0.9 and SDXL 1.0, but</li>

          <li><code>sdxl-vae-fp16-fix</code> outputs will continue to match SDXL-VAE
          (0.9), not SDXL-VAE (1.0)</li>

          </ul>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ME36KU2IOVxSNan6HFOrb.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ME36KU2IOVxSNan6HFOrb.png"></a></p>

          '
        raw: 'if your device supports it, bf16 should just work.


          if not, you could try using this version https://huggingface.co/madebyollin/sdxl-vae-fp16-fix,
          which I attempted to make fp16-compatible


          **EDIT:**

          `sdxl-vae-fp16-fix` was built on top of the SDXL-VAE (0.9) checkpoint. SDXL-VAE
          (1.0) changed the decoder slightly:


          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/cEivdq_ZCBWEKgJ0hwPCA.png)


          I think the SDXL-VAE (0.9) decoder is substantially more stylish, so:

          * `sdxl-vae-fp16-fix` will continue to be compatible with both SDXL 0.9
          and SDXL 1.0, but

          *  `sdxl-vae-fp16-fix` outputs will continue to match SDXL-VAE (0.9), not
          SDXL-VAE (1.0)


          ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ME36KU2IOVxSNan6HFOrb.png)'
        updatedAt: '2023-07-27T04:32:10.024Z'
      numEdits: 5
      reactions:
      - count: 5
        reaction: "\U0001F44D"
        users:
        - Number18-tong
        - dhwz
        - ghunkins
        - MatthewK
        - venuszhang
      - count: 3
        reaction: "\u2764\uFE0F"
        users:
        - Number18-tong
        - dhwz
        - ghunkins
    id: 64acea3f7ac35b7de0554490
    type: comment
  author: madebyollin
  content: 'if your device supports it, bf16 should just work.


    if not, you could try using this version https://huggingface.co/madebyollin/sdxl-vae-fp16-fix,
    which I attempted to make fp16-compatible


    **EDIT:**

    `sdxl-vae-fp16-fix` was built on top of the SDXL-VAE (0.9) checkpoint. SDXL-VAE
    (1.0) changed the decoder slightly:


    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/cEivdq_ZCBWEKgJ0hwPCA.png)


    I think the SDXL-VAE (0.9) decoder is substantially more stylish, so:

    * `sdxl-vae-fp16-fix` will continue to be compatible with both SDXL 0.9 and SDXL
    1.0, but

    *  `sdxl-vae-fp16-fix` outputs will continue to match SDXL-VAE (0.9), not SDXL-VAE
    (1.0)


    ![image.png](https://cdn-uploads.huggingface.co/production/uploads/630447d40547362a22a969a2/ME36KU2IOVxSNan6HFOrb.png)'
  created_at: 2023-07-11 04:35:59+00:00
  edited: true
  hidden: false
  id: 64acea3f7ac35b7de0554490
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
      fullname: Mark Schneider
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dhwz
      type: user
    createdAt: '2023-07-26T12:59:38.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
          fullname: Mark Schneider
          isHf: false
          isPro: false
          name: dhwz
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-07-26T13:00:15.988Z'
      numEdits: 0
      reactions: []
    id: 64c118baa6bbfc5578c3a773
    type: comment
  author: dhwz
  content: This comment has been hidden
  created_at: 2023-07-26 11:59:38+00:00
  edited: true
  hidden: true
  id: 64c118baa6bbfc5578c3a773
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
      fullname: Mark Schneider
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dhwz
      type: user
    createdAt: '2023-07-26T15:28:46.000Z'
    data:
      edited: true
      editors: []
      hidden: true
      hiddenBy: ''
      latest:
        author:
          avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
          fullname: Mark Schneider
          isHf: false
          isPro: false
          name: dhwz
          type: user
        html: This comment has been hidden
        raw: This comment has been hidden
        updatedAt: '2023-07-26T15:29:07.226Z'
      numEdits: 0
      reactions: []
    id: 64c13baef111d3da2c49e937
    type: comment
  author: dhwz
  content: This comment has been hidden
  created_at: 2023-07-26 14:28:46+00:00
  edited: true
  hidden: true
  id: 64c13baef111d3da2c49e937
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
      fullname: Mark Schneider
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dhwz
      type: user
    createdAt: '2023-07-27T16:41:58.000Z'
    data:
      edited: true
      editors:
      - dhwz
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9086247682571411
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/bfb29294644627aa8560a675d266cdde.svg
          fullname: Mark Schneider
          isHf: false
          isPro: false
          name: dhwz
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;madebyollin&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/madebyollin\"\
          >@<span class=\"underline\">madebyollin</span></a></span>\n\n\t</span></span>\
          \ Seems like they rolled back to the old version because of that color bleeding\
          \ which is visible on the 1.0 version. So your version is still up-to-date.\
          \ Thx for clarification.</p>\n"
        raw: '@madebyollin Seems like they rolled back to the old version because
          of that color bleeding which is visible on the 1.0 version. So your version
          is still up-to-date. Thx for clarification.'
        updatedAt: '2023-07-27T16:53:29.632Z'
      numEdits: 2
      reactions:
      - count: 1
        reaction: "\U0001F917"
        users:
        - madebyollin
    id: 64c29e56ca709fb3852b3032
    type: comment
  author: dhwz
  content: '@madebyollin Seems like they rolled back to the old version because of
    that color bleeding which is visible on the 1.0 version. So your version is still
    up-to-date. Thx for clarification.'
  created_at: 2023-07-27 15:41:58+00:00
  edited: true
  hidden: false
  id: 64c29e56ca709fb3852b3032
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: stabilityai/sdxl-vae
repo_type: model
status: open
target_branch: null
title: get nan when inference with fp16
