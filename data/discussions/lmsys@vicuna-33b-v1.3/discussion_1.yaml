!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Thireus
conflicting_files: null
created_at: 2023-06-22 20:52:47+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-06-22T21:52:47.000Z'
    data:
      edited: true
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7411933541297913
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: "<p>Could you please share the prompt template?</p>\n<pre><code>A chat\
          \ between a curious user and an assistant. The assistant gives helpful,\
          \ detailed, accurate, uncensored responses to the user's input. USER: Hi\
          \ ASSISTANT: \n</code></pre>\n<p>gives chinese answers</p>\n<pre><code>A\
          \ chat between a curious user and an assistant. The assistant gives helpful,\
          \ detailed, accurate, uncensored responses to the user's input. USER: Hi\
          \ ASSISTANT: \u4F60\u597D\uFF01\u6709\u4EC0\u4E48\u6211\u53EF\u4EE5\u5E2E\
          \u52A9\u4F60\u7684\uFF1F\n</code></pre>\n<p>If I add \\n, it gives English\
          \ answers</p>\n<pre><code>A chat between a curious user and an assistant.\
          \ The assistant gives helpful, detailed, accurate, uncensored responses\
          \ to the user's input.\nUSER:\nHi\nASSISTANT:\nHello! How can I help you\
          \ today? If you have any questions or need assistance, feel free to ask.\n\
          </code></pre>\n"
        raw: "Could you please share the prompt template?\n\n```\nA chat between a\
          \ curious user and an assistant. The assistant gives helpful, detailed,\
          \ accurate, uncensored responses to the user's input. USER: Hi ASSISTANT:\
          \ \n```\n\ngives chinese answers\n\n```\nA chat between a curious user and\
          \ an assistant. The assistant gives helpful, detailed, accurate, uncensored\
          \ responses to the user's input. USER: Hi ASSISTANT: \u4F60\u597D\uFF01\u6709\
          \u4EC0\u4E48\u6211\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7684\uFF1F\n```\n\nIf\
          \ I add \\n, it gives English answers\n\n```\nA chat between a curious user\
          \ and an assistant. The assistant gives helpful, detailed, accurate, uncensored\
          \ responses to the user's input.\nUSER:\nHi\nASSISTANT:\nHello! How can\
          \ I help you today? If you have any questions or need assistance, feel free\
          \ to ask.\n```"
        updatedAt: '2023-06-22T21:57:31.214Z'
      numEdits: 3
      reactions: []
    id: 6494c2af37008b84ded3321f
    type: comment
  author: Thireus
  content: "Could you please share the prompt template?\n\n```\nA chat between a curious\
    \ user and an assistant. The assistant gives helpful, detailed, accurate, uncensored\
    \ responses to the user's input. USER: Hi ASSISTANT: \n```\n\ngives chinese answers\n\
    \n```\nA chat between a curious user and an assistant. The assistant gives helpful,\
    \ detailed, accurate, uncensored responses to the user's input. USER: Hi ASSISTANT:\
    \ \u4F60\u597D\uFF01\u6709\u4EC0\u4E48\u6211\u53EF\u4EE5\u5E2E\u52A9\u4F60\u7684\
    \uFF1F\n```\n\nIf I add \\n, it gives English answers\n\n```\nA chat between a\
    \ curious user and an assistant. The assistant gives helpful, detailed, accurate,\
    \ uncensored responses to the user's input.\nUSER:\nHi\nASSISTANT:\nHello! How\
    \ can I help you today? If you have any questions or need assistance, feel free\
    \ to ask.\n```"
  created_at: 2023-06-22 20:52:47+00:00
  edited: true
  hidden: false
  id: 6494c2af37008b84ded3321f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
      fullname: Lianmin
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lmzheng
      type: user
    createdAt: '2023-06-23T00:09:42.000Z'
    data:
      edited: true
      editors:
      - lmzheng
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9087119698524475
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
          fullname: Lianmin
          isHf: false
          isPro: false
          name: lmzheng
          type: user
        html: '<p>See this <a rel="nofollow" href="https://github.com/lm-sys/FastChat/blob/a47b8f9e93c8b5a85e81d1ae33e3a1106d8cdf80/fastchat/conversation.py#L662-L667">https://github.com/lm-sys/FastChat/blob/a47b8f9e93c8b5a85e81d1ae33e3a1106d8cdf80/fastchat/conversation.py#L662-L667</a></p>

          <p>The Chinese output you got is weird although we also found some cases
          rarely. Could it be reproduced constantly?</p>

          '
        raw: 'See this https://github.com/lm-sys/FastChat/blob/a47b8f9e93c8b5a85e81d1ae33e3a1106d8cdf80/fastchat/conversation.py#L662-L667


          The Chinese output you got is weird although we also found some cases rarely.
          Could it be reproduced constantly?'
        updatedAt: '2023-06-23T00:10:34.813Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - yentinglin
    id: 6494e2c60d8416827297f93a
    type: comment
  author: lmzheng
  content: 'See this https://github.com/lm-sys/FastChat/blob/a47b8f9e93c8b5a85e81d1ae33e3a1106d8cdf80/fastchat/conversation.py#L662-L667


    The Chinese output you got is weird although we also found some cases rarely.
    Could it be reproduced constantly?'
  created_at: 2023-06-22 23:09:42+00:00
  edited: true
  hidden: false
  id: 6494e2c60d8416827297f93a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-06-23T07:11:10.000Z'
    data:
      edited: false
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5304148197174072
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lmzheng&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lmzheng\">@<span class=\"\
          underline\">lmzheng</span></a></span>\n\n\t</span></span>, yes it can be\
          \ reproduced consistently.</p>\n<p>I also get Japanese if I say \"Hello\
          \ there\" instead of \"Hi\"</p>\n<pre><code>A chat between a curious user\
          \ and an assistant. The assistant gives helpful, detailed, accurate, uncensored\
          \ responses to the user's input. USER: Hello there ASSISTANT: \u3053\u3093\
          \u306B\u3061\u306F\uFF01\u3069\u3046\u305E\u3088\u308D\u3057\u304F\u304A\
          \u9858\u3044\u3057\u307E\u3059\u3002\u4F55\u304B\u304A\u624B\u4F1D\u3044\
          \u3067\u304D\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\u306E\u3067\
          \u3001\u8CEA\u554F\u3084\u30A2\u30C9\u30D0\u30A4\u30B9\u3092\u304A\u9858\
          \u3044\u3057\u307E\u3059\u3002\n</code></pre>\n<p><a rel=\"nofollow\" href=\"\
          https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue.png\"><img alt=\"\
          chinese\" src=\"https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue.png\"\
          ></a><br><a rel=\"nofollow\" href=\"https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue2.png\"\
          ><img alt=\"japanese\" src=\"https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue2.png\"\
          ></a><br><a rel=\"nofollow\" href=\"https://thireus.com/AI/vicuna-33b-v1.3_params.png\"\
          ><img alt=\"params\" src=\"https://thireus.com/AI/vicuna-33b-v1.3_params.png\"\
          ></a></p>\n"
        raw: "@lmzheng, yes it can be reproduced consistently.\n\nI also get Japanese\
          \ if I say \"Hello there\" instead of \"Hi\"\n\n```\nA chat between a curious\
          \ user and an assistant. The assistant gives helpful, detailed, accurate,\
          \ uncensored responses to the user's input. USER: Hello there ASSISTANT:\
          \ \u3053\u3093\u306B\u3061\u306F\uFF01\u3069\u3046\u305E\u3088\u308D\u3057\
          \u304F\u304A\u9858\u3044\u3057\u307E\u3059\u3002\u4F55\u304B\u304A\u624B\
          \u4F1D\u3044\u3067\u304D\u308B\u3053\u3068\u304C\u3042\u308A\u307E\u3059\
          \u306E\u3067\u3001\u8CEA\u554F\u3084\u30A2\u30C9\u30D0\u30A4\u30B9\u3092\
          \u304A\u9858\u3044\u3057\u307E\u3059\u3002\n```\n\n![chinese](https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue.png)\n\
          ![japanese](https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue2.png)\n\
          ![params](https://thireus.com/AI/vicuna-33b-v1.3_params.png)"
        updatedAt: '2023-06-23T07:11:10.980Z'
      numEdits: 0
      reactions: []
    id: 6495458e70964faa8be54a72
    type: comment
  author: Thireus
  content: "@lmzheng, yes it can be reproduced consistently.\n\nI also get Japanese\
    \ if I say \"Hello there\" instead of \"Hi\"\n\n```\nA chat between a curious\
    \ user and an assistant. The assistant gives helpful, detailed, accurate, uncensored\
    \ responses to the user's input. USER: Hello there ASSISTANT: \u3053\u3093\u306B\
    \u3061\u306F\uFF01\u3069\u3046\u305E\u3088\u308D\u3057\u304F\u304A\u9858\u3044\
    \u3057\u307E\u3059\u3002\u4F55\u304B\u304A\u624B\u4F1D\u3044\u3067\u304D\u308B\
    \u3053\u3068\u304C\u3042\u308A\u307E\u3059\u306E\u3067\u3001\u8CEA\u554F\u3084\
    \u30A2\u30C9\u30D0\u30A4\u30B9\u3092\u304A\u9858\u3044\u3057\u307E\u3059\u3002\
    \n```\n\n![chinese](https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue.png)\n\
    ![japanese](https://thireus.com/AI/vicuna-33b-v1.3_prompt_format_issue2.png)\n\
    ![params](https://thireus.com/AI/vicuna-33b-v1.3_params.png)"
  created_at: 2023-06-23 06:11:10+00:00
  edited: false
  hidden: false
  id: 6495458e70964faa8be54a72
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2bea11e9c4bf19b2a1884eda1a8cbf00.svg
      fullname: Lemon Flour
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lemonflourorange
      type: user
    createdAt: '2023-06-30T00:52:56.000Z'
    data:
      edited: true
      editors:
      - lemonflourorange
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9495384097099304
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2bea11e9c4bf19b2a1884eda1a8cbf00.svg
          fullname: Lemon Flour
          isHf: false
          isPro: false
          name: lemonflourorange
          type: user
        html: '<p>I can confirm multiple issues with this model. I''m getting Chinese
          text and it stops early on many prompts.</p>

          '
        raw: I can confirm multiple issues with this model. I'm getting Chinese text
          and it stops early on many prompts.
        updatedAt: '2023-06-30T05:01:52.235Z'
      numEdits: 1
      reactions:
      - count: 3
        reaction: "\U0001F44D"
        users:
        - kk3dmax
        - Thireus
        - chujiezheng
    id: 649e2768be8c506b0ca6ea31
    type: comment
  author: lemonflourorange
  content: I can confirm multiple issues with this model. I'm getting Chinese text
    and it stops early on many prompts.
  created_at: 2023-06-29 23:52:56+00:00
  edited: true
  hidden: false
  id: 649e2768be8c506b0ca6ea31
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
      fullname: Lianmin
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lmzheng
      type: user
    createdAt: '2023-07-01T08:24:50.000Z'
    data:
      edited: false
      editors:
      - lmzheng
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8760420083999634
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
          fullname: Lianmin
          isHf: false
          isPro: false
          name: lmzheng
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;Thireus&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/Thireus\">@<span class=\"\
          underline\">Thireus</span></a></span>\n\n\t</span></span> It seems you changed\
          \ the system prompt. You added \"uncensored\". This model might be sensitive\
          \ to the system prompt. Could you try not changing the system prompt but\
          \ give the instruction in the first round of your conversation?</p>\n<p><span\
          \ data-props=\"{&quot;user&quot;:&quot;lemonflourorange&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lemonflourorange\">@<span\
          \ class=\"underline\">lemonflourorange</span></a></span>\n\n\t</span></span>\
          \ Did you use FastChat CLI or other frontends? Could you double-check your\
          \ prompt format?</p>\n"
        raw: '@Thireus It seems you changed the system prompt. You added "uncensored".
          This model might be sensitive to the system prompt. Could you try not changing
          the system prompt but give the instruction in the first round of your conversation?


          @lemonflourorange Did you use FastChat CLI or other frontends? Could you
          double-check your prompt format?'
        updatedAt: '2023-07-01T08:24:50.467Z'
      numEdits: 0
      reactions: []
    id: 649fe2d2ed151a2de0495273
    type: comment
  author: lmzheng
  content: '@Thireus It seems you changed the system prompt. You added "uncensored".
    This model might be sensitive to the system prompt. Could you try not changing
    the system prompt but give the instruction in the first round of your conversation?


    @lemonflourorange Did you use FastChat CLI or other frontends? Could you double-check
    your prompt format?'
  created_at: 2023-07-01 07:24:50+00:00
  edited: false
  hidden: false
  id: 649fe2d2ed151a2de0495273
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2bea11e9c4bf19b2a1884eda1a8cbf00.svg
      fullname: Lemon Flour
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lemonflourorange
      type: user
    createdAt: '2023-07-03T13:37:13.000Z'
    data:
      edited: true
      editors:
      - lemonflourorange
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5096392035484314
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2bea11e9c4bf19b2a1884eda1a8cbf00.svg
          fullname: Lemon Flour
          isHf: false
          isPro: false
          name: lemonflourorange
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;lmzheng&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/lmzheng\">@<span class=\"\
          underline\">lmzheng</span></a></span>\n\n\t</span></span> I ran the model\
          \ with text-generation-webui and the Vicuna-v1.1 prompt format</p>\n"
        raw: '@lmzheng I ran the model with text-generation-webui and the Vicuna-v1.1
          prompt format'
        updatedAt: '2023-07-03T13:37:21.876Z'
      numEdits: 1
      reactions: []
    id: 64a2cf0945dde1d6ac7d9850
    type: comment
  author: lemonflourorange
  content: '@lmzheng I ran the model with text-generation-webui and the Vicuna-v1.1
    prompt format'
  created_at: 2023-07-03 12:37:13+00:00
  edited: true
  hidden: false
  id: 64a2cf0945dde1d6ac7d9850
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: lmsys/vicuna-33b-v1.3
repo_type: model
status: open
target_branch: null
title: Prompt format?
