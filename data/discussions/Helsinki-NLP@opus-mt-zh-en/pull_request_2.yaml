!!python/object:huggingface_hub.community.DiscussionWithDetails
author: joaogante
conflicting_files:
- tf_model.h5
created_at: 2022-06-02 14:24:48+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-02T15:24:48.000Z'
    data:
      edited: false
      editors:
      - joaogante
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
          fullname: Joao Gante
          isHf: true
          isPro: false
          name: joaogante
          type: user
        html: '<p>Validated by the <code>pt_to_tf</code> CLI. Max crossload hidden
          state difference=7.629e-06; Max converted hidden state difference=7.629e-06.</p>

          '
        raw: Validated by the `pt_to_tf` CLI. Max crossload hidden state difference=7.629e-06;
          Max converted hidden state difference=7.629e-06.
        updatedAt: '2022-06-02T15:24:48.000Z'
      numEdits: 0
      reactions: []
    id: 6298d64043e990340bec5d1d
    type: comment
  author: joaogante
  content: Validated by the `pt_to_tf` CLI. Max crossload hidden state difference=7.629e-06;
    Max converted hidden state difference=7.629e-06.
  created_at: 2022-06-02 14:24:48+00:00
  edited: false
  hidden: false
  id: 6298d64043e990340bec5d1d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-02T15:25:19.000Z'
    data:
      oid: 59a186d1cd18740bbc3dfff802b56df8ffa95e3c
      parents:
      - b7d1e2a349f4e50df9fbde0f8a07280899331cb1
      subject: Add TF weights
    id: 6298d65f0000000000000000
    type: commit
  author: joaogante
  created_at: 2022-06-02 14:25:19+00:00
  id: 6298d65f0000000000000000
  oid: 59a186d1cd18740bbc3dfff802b56df8ffa95e3c
  summary: Add TF weights
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-02T15:55:27.000Z'
    data:
      edited: false
      editors:
      - joaogante
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
          fullname: Joao Gante
          isHf: true
          isPro: false
          name: joaogante
          type: user
        html: "<p>Hi there \U0001F44B</p>\n<p>I'm a TF maintainer at Hugging Face,\
          \ and this is your most downloaded model whose weights can be automatically\
          \ converted into TensorFlow, using our tools. We believe that having TF\
          \ weights would be of interest to the community, and will further boost\
          \ the visibility of the model.</p>\n<p>I also don't want to be a source\
          \ of spam! Let me know if you are interested in merging these TF weights,\
          \ and if you would like me to open PRs with TF weights for other models\
          \ that you own \U0001F917</p>\n"
        raw: "Hi there \U0001F44B\n\nI'm a TF maintainer at Hugging Face, and this\
          \ is your most downloaded model whose weights can be automatically converted\
          \ into TensorFlow, using our tools. We believe that having TF weights would\
          \ be of interest to the community, and will further boost the visibility\
          \ of the model.\n\nI also don't want to be a source of spam! Let me know\
          \ if you are interested in merging these TF weights, and if you would like\
          \ me to open PRs with TF weights for other models that you own \U0001F917"
        updatedAt: '2022-06-02T15:55:27.000Z'
      numEdits: 0
      reactions: []
    id: 6298dd6fea8640d87e1fc64f
    type: comment
  author: joaogante
  content: "Hi there \U0001F44B\n\nI'm a TF maintainer at Hugging Face, and this is\
    \ your most downloaded model whose weights can be automatically converted into\
    \ TensorFlow, using our tools. We believe that having TF weights would be of interest\
    \ to the community, and will further boost the visibility of the model.\n\nI also\
    \ don't want to be a source of spam! Let me know if you are interested in merging\
    \ these TF weights, and if you would like me to open PRs with TF weights for other\
    \ models that you own \U0001F917"
  created_at: 2022-06-02 14:55:27+00:00
  edited: false
  hidden: false
  id: 6298dd6fea8640d87e1fc64f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0223584657947ca7393ba46d211d6970.svg
      fullname: "J\xF6rg Tiedemann"
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: tiedeman
      type: user
    createdAt: '2022-06-03T07:28:36.000Z'
    data:
      edited: false
      editors:
      - tiedeman
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0223584657947ca7393ba46d211d6970.svg
          fullname: "J\xF6rg Tiedemann"
          isHf: false
          isPro: false
          name: tiedeman
          type: user
        html: '<p>Sounds good to me. I guess this does not break anything for other
          users, right? Should this become part of the conversion from MarianNMT?</p>

          '
        raw: Sounds good to me. I guess this does not break anything for other users,
          right? Should this become part of the conversion from MarianNMT?
        updatedAt: '2022-06-03T07:28:36.000Z'
      numEdits: 0
      reactions: []
    id: 6299b8242709374f63448bb1
    type: comment
  author: tiedeman
  content: Sounds good to me. I guess this does not break anything for other users,
    right? Should this become part of the conversion from MarianNMT?
  created_at: 2022-06-03 06:28:36+00:00
  edited: false
  hidden: false
  id: 6299b8242709374f63448bb1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-03T10:21:20.000Z'
    data:
      edited: false
      editors:
      - joaogante
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
          fullname: Joao Gante
          isHf: true
          isPro: false
          name: joaogante
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;tiedeman&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/tiedeman\"\
          >@<span class=\"underline\">tiedeman</span></a></span>\n\n\t</span></span>\
          \ -- no, there are no files being overwritten, so nothing changes for existing\
          \ users. On the upside, users would be able to call <code>TFMarianMTModel\
          \ .from_pretrained(\"Helsinki-NLP/opus-mt-zh-en\")</code> and get a native\
          \ TF model with the same functionality, to integrate into their TF ecosystem\
          \ \U0001F525</p>\n<p>Our weight conversion tool also validates if the hidden\
          \ states are the same for the PT and TF models. You can check the maximum\
          \ error in the first commit -- anything below 1e-5 means the two models\
          \ will behave the same way, even for autoregressive tasks like text generation.\
          \ We decided to open exactly one PR with a TF weight conversion per organization\
          \ and engage in a conversation with you because although we believe it will\
          \ be positive for the TF community, a) we are not the owners of the models\
          \ and b) it can be a massive source of spam for you \U0001F605 </p>\n<p>Depending\
          \ on your interest, there are 4 ways I can proceed:</p>\n<ol>\n<li>Nothing\
          \ gets merged, and no more PRs like this are opened;</li>\n<li>We merge\
          \ this one, but no more PRs like this are opened;</li>\n<li>We merge this\
          \ one, and I will open more PRs like this over time;</li>\n<li>(3. but with\
          \ no hub notifications) We merge this one, and you give me the authorization\
          \ to use admin privileges to push validated TF conversions directly into\
          \ Helsinki-NLP repositories.</li>\n</ol>\n<p>Let me know how you would like\
          \ to proceed!</p>\n"
        raw: "Hi @tiedeman -- no, there are no files being overwritten, so nothing\
          \ changes for existing users. On the upside, users would be able to call\
          \ `TFMarianMTModel .from_pretrained(\"Helsinki-NLP/opus-mt-zh-en\")` and\
          \ get a native TF model with the same functionality, to integrate into their\
          \ TF ecosystem \U0001F525\n\nOur weight conversion tool also validates if\
          \ the hidden states are the same for the PT and TF models. You can check\
          \ the maximum error in the first commit -- anything below 1e-5 means the\
          \ two models will behave the same way, even for autoregressive tasks like\
          \ text generation. We decided to open exactly one PR with a TF weight conversion\
          \ per organization and engage in a conversation with you because although\
          \ we believe it will be positive for the TF community, a) we are not the\
          \ owners of the models and b) it can be a massive source of spam for you\
          \ \U0001F605 \n\nDepending on your interest, there are 4 ways I can proceed:\n\
          1. Nothing gets merged, and no more PRs like this are opened;\n2. We merge\
          \ this one, but no more PRs like this are opened;\n3. We merge this one,\
          \ and I will open more PRs like this over time;\n4. (3. but with no hub\
          \ notifications) We merge this one, and you give me the authorization to\
          \ use admin privileges to push validated TF conversions directly into Helsinki-NLP\
          \ repositories.\n\nLet me know how you would like to proceed!"
        updatedAt: '2022-06-03T10:21:20.302Z'
      numEdits: 0
      reactions: []
    id: 6299e0a00fa8aec7f1bae376
    type: comment
  author: joaogante
  content: "Hi @tiedeman -- no, there are no files being overwritten, so nothing changes\
    \ for existing users. On the upside, users would be able to call `TFMarianMTModel\
    \ .from_pretrained(\"Helsinki-NLP/opus-mt-zh-en\")` and get a native TF model\
    \ with the same functionality, to integrate into their TF ecosystem \U0001F525\
    \n\nOur weight conversion tool also validates if the hidden states are the same\
    \ for the PT and TF models. You can check the maximum error in the first commit\
    \ -- anything below 1e-5 means the two models will behave the same way, even for\
    \ autoregressive tasks like text generation. We decided to open exactly one PR\
    \ with a TF weight conversion per organization and engage in a conversation with\
    \ you because although we believe it will be positive for the TF community, a)\
    \ we are not the owners of the models and b) it can be a massive source of spam\
    \ for you \U0001F605 \n\nDepending on your interest, there are 4 ways I can proceed:\n\
    1. Nothing gets merged, and no more PRs like this are opened;\n2. We merge this\
    \ one, but no more PRs like this are opened;\n3. We merge this one, and I will\
    \ open more PRs like this over time;\n4. (3. but with no hub notifications) We\
    \ merge this one, and you give me the authorization to use admin privileges to\
    \ push validated TF conversions directly into Helsinki-NLP repositories.\n\nLet\
    \ me know how you would like to proceed!"
  created_at: 2022-06-03 09:21:20+00:00
  edited: false
  hidden: false
  id: 6299e0a00fa8aec7f1bae376
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-08T12:01:38.000Z'
    data:
      edited: false
      editors:
      - joaogante
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
          fullname: Joao Gante
          isHf: true
          isPro: false
          name: joaogante
          type: user
        html: "<p>Actually, my apologies -- I've designed a stricter set of checks\
          \ (<a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/pull/17588\"\
          >https://github.com/huggingface/transformers/pull/17588</a>), to ensure\
          \ TF users enjoy the same model experience as PT users, and there is something\
          \ wrong with this weight conversion. The most likely cause is some code\
          \ issue in the TF implementation of this architecture.</p>\n<p>I will close\
          \ this PR for the time being \U0001F64F </p>\n"
        raw: "Actually, my apologies -- I've designed a stricter set of checks (https://github.com/huggingface/transformers/pull/17588),\
          \ to ensure TF users enjoy the same model experience as PT users, and there\
          \ is something wrong with this weight conversion. The most likely cause\
          \ is some code issue in the TF implementation of this architecture.\n\n\
          I will close this PR for the time being \U0001F64F "
        updatedAt: '2022-06-08T12:01:38.094Z'
      numEdits: 0
      reactions: []
    id: 62a08fa2a06ce6c9769bc652
    type: comment
  author: joaogante
  content: "Actually, my apologies -- I've designed a stricter set of checks (https://github.com/huggingface/transformers/pull/17588),\
    \ to ensure TF users enjoy the same model experience as PT users, and there is\
    \ something wrong with this weight conversion. The most likely cause is some code\
    \ issue in the TF implementation of this architecture.\n\nI will close this PR\
    \ for the time being \U0001F64F "
  created_at: 2022-06-08 11:01:38+00:00
  edited: false
  hidden: false
  id: 62a08fa2a06ce6c9769bc652
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1641203017724-noauth.png?w=200&h=200&f=face
      fullname: Joao Gante
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: joaogante
      type: user
    createdAt: '2022-06-08T12:01:38.000Z'
    data:
      status: closed
    id: 62a08fa2a06ce6c9769bc653
    type: status-change
  author: joaogante
  created_at: 2022-06-08 11:01:38+00:00
  id: 62a08fa2a06ce6c9769bc653
  new_status: closed
  type: status-change
is_pull_request: true
merge_commit_oid: null
num: 2
repo_id: Helsinki-NLP/opus-mt-zh-en
repo_type: model
status: closed
target_branch: refs/heads/main
title: Add TF weights
