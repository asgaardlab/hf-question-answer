!!python/object:huggingface_hub.community.DiscussionWithDetails
author: zeroc
conflicting_files: null
created_at: 2023-04-18 16:56:17+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6ce75d71e6f646e77ea1216e9bc88ac2.svg
      fullname: core
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zeroc
      type: user
    createdAt: '2023-04-18T17:56:17.000Z'
    data:
      edited: false
      editors:
      - zeroc
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6ce75d71e6f646e77ea1216e9bc88ac2.svg
          fullname: core
          isHf: false
          isPro: false
          name: zeroc
          type: user
        html: '<p>When trying to merge delta for 13B I am getting<br>RuntimeError:
          The size of tensor a (32000) must match the size of tensor b (32001) at
          non-singleton dimension 0</p>

          <p>any help  ? </p>

          '
        raw: "When trying to merge delta for 13B I am getting \r\nRuntimeError: The\
          \ size of tensor a (32000) must match the size of tensor b (32001) at non-singleton\
          \ dimension 0\r\n\r\nany help  ? \r\n"
        updatedAt: '2023-04-18T17:56:17.402Z'
      numEdits: 0
      reactions: []
    id: 643ed9c10d1194da249bb140
    type: comment
  author: zeroc
  content: "When trying to merge delta for 13B I am getting \r\nRuntimeError: The\
    \ size of tensor a (32000) must match the size of tensor b (32001) at non-singleton\
    \ dimension 0\r\n\r\nany help  ? \r\n"
  created_at: 2023-04-18 16:56:17+00:00
  edited: false
  hidden: false
  id: 643ed9c10d1194da249bb140
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/6ce75d71e6f646e77ea1216e9bc88ac2.svg
      fullname: core
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zeroc
      type: user
    createdAt: '2023-04-18T21:56:46.000Z'
    data:
      status: closed
    id: 643f121ef2ed3bc5c066afc2
    type: status-change
  author: zeroc
  created_at: 2023-04-18 20:56:46+00:00
  id: 643f121ef2ed3bc5c066afc2
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/95a58370c7a30fab951d2143b38e0ff6.svg
      fullname: Luca Ardito
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucaardito
      type: user
    createdAt: '2023-04-19T22:46:26.000Z'
    data:
      edited: false
      editors:
      - lucaardito
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/95a58370c7a30fab951d2143b38e0ff6.svg
          fullname: Luca Ardito
          isHf: false
          isPro: false
          name: lucaardito
          type: user
        html: "<p>I have the same issue:</p>\n<p>Loading base model<br>Loading checkpoint\
          \ shards: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          | 3/3 [00:04&lt;00:00,  1.65s/it]<br>Loading delta<br>Loading checkpoint\
          \ shards: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          | 3/3 [00:14&lt;00:00,  4.68s/it]<br>Applying delta<br>Applying delta: \
          \  0%|                                                                 \
          \                      | 0/403 [00:00&lt;?, ?it/s]<br>Traceback (most recent\
          \ call last):<br>  File \"/opt/homebrew/Cellar/<a rel=\"nofollow\" href=\"\
          mailto:python@3.10\">python@3.10</a>/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
          , line 196, in _run_module_as_main<br>    return _run_code(code, main_globals,\
          \ None,<br>  File \"/opt/homebrew/Cellar/<a rel=\"nofollow\" href=\"mailto:python@3.10\"\
          >python@3.10</a>/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
          , line 86, in _run_code<br>    exec(code, run_globals)<br>  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
          , line 49, in <br>    apply_delta(args.base_model_path, args.target_model_path,\
          \ args.delta_path)<br>  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
          , line 34, in apply_delta<br>    param.data += delta.state_dict()[name]<br>RuntimeError:\
          \ The size of tensor a (32001) must match the size of tensor b (32000) at\
          \ non-singleton dimension 0</p>\n"
        raw: "I have the same issue:\n\nLoading base model\nLoading checkpoint shards:\
          \ 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3/3\
          \ [00:04<00:00,  1.65s/it]\nLoading delta\nLoading checkpoint shards: 100%|\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3/3 [00:14<00:00,\
          \  4.68s/it]\nApplying delta\nApplying delta:   0%|                    \
          \                                                                   | 0/403\
          \ [00:00<?, ?it/s]\nTraceback (most recent call last):\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
          , line 196, in _run_module_as_main\n    return _run_code(code, main_globals,\
          \ None,\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
          , line 86, in _run_code\n    exec(code, run_globals)\n  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
          , line 49, in <module>\n    apply_delta(args.base_model_path, args.target_model_path,\
          \ args.delta_path)\n  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
          , line 34, in apply_delta\n    param.data += delta.state_dict()[name]\n\
          RuntimeError: The size of tensor a (32001) must match the size of tensor\
          \ b (32000) at non-singleton dimension 0"
        updatedAt: '2023-04-19T22:46:26.693Z'
      numEdits: 0
      reactions: []
    id: 64406f42194b02fd3096d921
    type: comment
  author: lucaardito
  content: "I have the same issue:\n\nLoading base model\nLoading checkpoint shards:\
    \ 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588| 3/3 [00:04<00:00,  1.65s/it]\nLoading delta\n\
    Loading checkpoint shards: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\
    \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 3/3 [00:14<00:00,\
    \  4.68s/it]\nApplying delta\nApplying delta:   0%|                          \
    \                                                             | 0/403 [00:00<?,\
    \ ?it/s]\nTraceback (most recent call last):\n  File \"/opt/homebrew/Cellar/python@3.10/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
    , line 196, in _run_module_as_main\n    return _run_code(code, main_globals, None,\n\
    \  File \"/opt/homebrew/Cellar/python@3.10/3.10.11/Frameworks/Python.framework/Versions/3.10/lib/python3.10/runpy.py\"\
    , line 86, in _run_code\n    exec(code, run_globals)\n  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
    , line 49, in <module>\n    apply_delta(args.base_model_path, args.target_model_path,\
    \ args.delta_path)\n  File \"/Users/hardo/git/FastChat/fastchat/model/apply_delta.py\"\
    , line 34, in apply_delta\n    param.data += delta.state_dict()[name]\nRuntimeError:\
    \ The size of tensor a (32001) must match the size of tensor b (32000) at non-singleton\
    \ dimension 0"
  created_at: 2023-04-19 21:46:26+00:00
  edited: false
  hidden: false
  id: 64406f42194b02fd3096d921
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Nr7UaTDsEd2IqdNsyojTQ.jpeg?w=200&h=200&f=face
      fullname: "\u738B\u6D69"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: wanghao-007
      type: user
    createdAt: '2023-04-20T17:14:09.000Z'
    data:
      edited: false
      editors:
      - wanghao-007
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/Nr7UaTDsEd2IqdNsyojTQ.jpeg?w=200&h=200&f=face
          fullname: "\u738B\u6D69"
          isHf: false
          isPro: false
          name: wanghao-007
          type: user
        html: '<p>I have the same problem, and I don''t know how to solve it. someone
          help me?</p>

          '
        raw: I have the same problem, and I don't know how to solve it. someone help
          me?
        updatedAt: '2023-04-20T17:14:09.655Z'
      numEdits: 0
      reactions: []
    id: 644172e14c2acf3398a8bbc8
    type: comment
  author: wanghao-007
  content: I have the same problem, and I don't know how to solve it. someone help
    me?
  created_at: 2023-04-20 16:14:09+00:00
  edited: false
  hidden: false
  id: 644172e14c2acf3398a8bbc8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
      fullname: Lianmin
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: lmzheng
      type: user
    createdAt: '2023-04-20T18:16:40.000Z'
    data:
      edited: false
      editors:
      - lmzheng
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/62d35f3ceaf3858ce253ab7a/3yiiMriltXJBi242FZY-W.jpeg?w=200&h=200&f=face
          fullname: Lianmin
          isHf: false
          isPro: false
          name: lmzheng
          type: user
        html: '<p>It seems you were using a newer version of fschat with these old
          weights.<br>Please checkout the version compatibility here <a rel="nofollow"
          href="https://github.com/lm-sys/FastChat/blob/main/docs/weights_version.md">https://github.com/lm-sys/FastChat/blob/main/docs/weights_version.md</a><br>We
          suggest you use the newer v1.1 weights.</p>

          '
        raw: 'It seems you were using a newer version of fschat with these old weights.

          Please checkout the version compatibility here https://github.com/lm-sys/FastChat/blob/main/docs/weights_version.md

          We suggest you use the newer v1.1 weights.'
        updatedAt: '2023-04-20T18:16:40.906Z'
      numEdits: 0
      reactions: []
    id: 64418188e46e14ed5594a1a0
    type: comment
  author: lmzheng
  content: 'It seems you were using a newer version of fschat with these old weights.

    Please checkout the version compatibility here https://github.com/lm-sys/FastChat/blob/main/docs/weights_version.md

    We suggest you use the newer v1.1 weights.'
  created_at: 2023-04-20 17:16:40+00:00
  edited: false
  hidden: false
  id: 64418188e46e14ed5594a1a0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7ada45af6199d4fcb4de707d3d156597.svg
      fullname: xiaoke
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: huxiaoke
      type: user
    createdAt: '2023-04-21T02:49:55.000Z'
    data:
      edited: false
      editors:
      - huxiaoke
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7ada45af6199d4fcb4de707d3d156597.svg
          fullname: xiaoke
          isHf: false
          isPro: false
          name: huxiaoke
          type: user
        html: '<p>I also get the similar problem when i deploy minigpt4 : RuntimeError:
          The size of tensor a (32001) must match the size of tensor b (32003) at
          non-singleton dimension 0<br>vicuna-13b-delta-v0<br>llama-13b-hf<br>fschat
          version is  0.1.10</p>

          '
        raw: 'I also get the similar problem when i deploy minigpt4 : RuntimeError:
          The size of tensor a (32001) must match the size of tensor b (32003) at
          non-singleton dimension 0

          vicuna-13b-delta-v0

          llama-13b-hf

          fschat version is  0.1.10'
        updatedAt: '2023-04-21T02:49:55.004Z'
      numEdits: 0
      reactions: []
    id: 6441f9d355a16ae60fa769a3
    type: comment
  author: huxiaoke
  content: 'I also get the similar problem when i deploy minigpt4 : RuntimeError:
    The size of tensor a (32001) must match the size of tensor b (32003) at non-singleton
    dimension 0

    vicuna-13b-delta-v0

    llama-13b-hf

    fschat version is  0.1.10'
  created_at: 2023-04-21 01:49:55+00:00
  edited: false
  hidden: false
  id: 6441f9d355a16ae60fa769a3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/95a58370c7a30fab951d2143b38e0ff6.svg
      fullname: Luca Ardito
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucaardito
      type: user
    createdAt: '2023-04-21T08:30:07.000Z'
    data:
      edited: false
      editors:
      - lucaardito
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/95a58370c7a30fab951d2143b38e0ff6.svg
          fullname: Luca Ardito
          isHf: false
          isPro: false
          name: lucaardito
          type: user
        html: '<p>after updating fastchat, and using v1.1, it worked.</p>

          <p>Thanks!</p>

          '
        raw: 'after updating fastchat, and using v1.1, it worked.


          Thanks!'
        updatedAt: '2023-04-21T08:30:07.838Z'
      numEdits: 0
      reactions: []
    id: 6442498f752c03e8d2d41d91
    type: comment
  author: lucaardito
  content: 'after updating fastchat, and using v1.1, it worked.


    Thanks!'
  created_at: 2023-04-21 07:30:07+00:00
  edited: false
  hidden: false
  id: 6442498f752c03e8d2d41d91
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 5
repo_id: lmsys/vicuna-13b-delta-v0
repo_type: model
status: closed
target_branch: null
title: 'RuntimeError: The size of tensor a (32000) must match the size of tensor b
  (32001) at non-singleton dimension 0'
