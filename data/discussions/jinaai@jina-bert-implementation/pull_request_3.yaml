!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Markus28
conflicting_files: []
created_at: 2023-10-17 06:14:48+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
      fullname: Markus Krimmel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Markus28
      type: user
    createdAt: '2023-10-17T07:14:48.000Z'
    data:
      edited: false
      editors:
      - Markus28
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9614274501800537
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
          fullname: Markus Krimmel
          isHf: false
          isPro: false
          name: Markus28
          type: user
        html: '<p>We saw issues where models instantiated via <code>AutoModel</code>
          performed poorly on MTEB. During evaluation we saw that most embeddings
          produced by this model matched those of a working model, with few exceptions
          in the batches. This appears to be blamed by mixing <code>sorted</code>
          and <code>np.argsort</code>, which probably use different methods of taking
          ties when the input contains duplicate. As a consequence, sentences that
          have a unique length in their batch are embedded properly, but ones with
          non-unique length may be swapped. I fixed this issue.</p>

          '
        raw: We saw issues where models instantiated via `AutoModel` performed poorly
          on MTEB. During evaluation we saw that most embeddings produced by this
          model matched those of a working model, with few exceptions in the batches.
          This appears to be blamed by mixing `sorted` and `np.argsort`, which probably
          use different methods of taking ties when the input contains duplicate.
          As a consequence, sentences that have a unique length in their batch are
          embedded properly, but ones with non-unique length may be swapped. I fixed
          this issue.
        updatedAt: '2023-10-17T07:14:48.129Z'
      numEdits: 0
      reactions: []
    id: 652e34681d12768fff04cca1
    type: comment
  author: Markus28
  content: We saw issues where models instantiated via `AutoModel` performed poorly
    on MTEB. During evaluation we saw that most embeddings produced by this model
    matched those of a working model, with few exceptions in the batches. This appears
    to be blamed by mixing `sorted` and `np.argsort`, which probably use different
    methods of taking ties when the input contains duplicate. As a consequence, sentences
    that have a unique length in their batch are embedded properly, but ones with
    non-unique length may be swapped. I fixed this issue.
  created_at: 2023-10-17 06:14:48+00:00
  edited: false
  hidden: false
  id: 652e34681d12768fff04cca1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
      fullname: Markus Krimmel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Markus28
      type: user
    createdAt: '2023-10-17T07:14:48.000Z'
    data:
      oid: 488c818205eba783191ca4c2625f40444a427413
      parents:
      - 0f4070e3d6c6adb13156bff9d2b2fcaf93c8b263
      subject: Fix sorting heuristic
    id: 652e34680000000000000000
    type: commit
  author: Markus28
  created_at: 2023-10-17 06:14:48+00:00
  id: 652e34680000000000000000
  oid: 488c818205eba783191ca4c2625f40444a427413
  summary: Fix sorting heuristic
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
      fullname: Markus Krimmel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Markus28
      type: user
    createdAt: '2023-10-17T07:17:55.000Z'
    data:
      edited: false
      editors:
      - Markus28
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9012195467948914
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
          fullname: Markus Krimmel
          isHf: false
          isPro: false
          name: Markus28
          type: user
        html: '<p>Closing in favor of Github PR</p>

          '
        raw: Closing in favor of Github PR
        updatedAt: '2023-10-17T07:17:55.945Z'
      numEdits: 0
      reactions: []
      relatedEventId: 652e352384595aeba1a84149
    id: 652e352384595aeba1a84144
    type: comment
  author: Markus28
  content: Closing in favor of Github PR
  created_at: 2023-10-17 06:17:55+00:00
  edited: false
  hidden: false
  id: 652e352384595aeba1a84144
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/140ef2d6980aa2d7fec1550d245fc33e.svg
      fullname: Markus Krimmel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: Markus28
      type: user
    createdAt: '2023-10-17T07:17:55.000Z'
    data:
      status: closed
    id: 652e352384595aeba1a84149
    type: status-change
  author: Markus28
  created_at: 2023-10-17 06:17:55+00:00
  id: 652e352384595aeba1a84149
  new_status: closed
  type: status-change
is_pull_request: true
merge_commit_oid: null
num: 3
repo_id: jinaai/jina-bert-implementation
repo_type: model
status: closed
target_branch: refs/heads/main
title: Fix sorting heuristic
