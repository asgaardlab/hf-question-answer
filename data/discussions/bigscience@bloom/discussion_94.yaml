!!python/object:huggingface_hub.community.DiscussionWithDetails
author: sleven
conflicting_files: null
created_at: 2022-08-24 09:05:07+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
      fullname: Alexander Ljungberg
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sleven
      type: user
    createdAt: '2022-08-24T10:05:07.000Z'
    data:
      edited: false
      editors:
      - sleven
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
          fullname: Alexander Ljungberg
          isHf: false
          isPro: false
          name: sleven
          type: user
        html: '<p>When trying to query the inference API with a temperature of 0,
          I get an error saying <code>Temperature needs to be &gt;0</code>. Why is
          that? A temperature of 0 should just mean to always take the highest score.</p>

          '
        raw: When trying to query the inference API with a temperature of 0, I get
          an error saying `Temperature needs to be >0`. Why is that? A temperature
          of 0 should just mean to always take the highest score.
        updatedAt: '2022-08-24T10:05:07.943Z'
      numEdits: 0
      reactions: []
    id: 6305f7d31e731505a76c2c0c
    type: comment
  author: sleven
  content: When trying to query the inference API with a temperature of 0, I get an
    error saying `Temperature needs to be >0`. Why is that? A temperature of 0 should
    just mean to always take the highest score.
  created_at: 2022-08-24 09:05:07+00:00
  edited: false
  hidden: false
  id: 6305f7d31e731505a76c2c0c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2022-08-24T13:32:36.000Z'
    data:
      edited: false
      editors:
      - cakiki
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
          fullname: Christopher Akiki
          isHf: false
          isPro: false
          name: cakiki
          type: user
        html: '<p>Hi Sleven! That''s because <code>temperature</code> is a <code>float</code>
          that divides the logits to reshape them for sampling: <a rel="nofollow"
          href="https://github.com/huggingface/transformers/blob/main/src/transformers/generation_logits_process.py#L140">https://github.com/huggingface/transformers/blob/main/src/transformers/generation_logits_process.py#L140</a></p>

          <p>Personally, I don''t think it makes sense to have a temperature of zero
          be hardcoded to bypass the fact that the generating process is in sampling
          mode, but that''s probably a design discussion to be had on the <code>transformers</code>
          repo.</p>

          '
        raw: 'Hi Sleven! That''s because `temperature` is a `float` that divides the
          logits to reshape them for sampling: https://github.com/huggingface/transformers/blob/main/src/transformers/generation_logits_process.py#L140


          Personally, I don''t think it makes sense to have a temperature of zero
          be hardcoded to bypass the fact that the generating process is in sampling
          mode, but that''s probably a design discussion to be had on the `transformers`
          repo.'
        updatedAt: '2022-08-24T13:32:36.141Z'
      numEdits: 0
      reactions: []
    id: 6306287414e7d8892aa9b26e
    type: comment
  author: cakiki
  content: 'Hi Sleven! That''s because `temperature` is a `float` that divides the
    logits to reshape them for sampling: https://github.com/huggingface/transformers/blob/main/src/transformers/generation_logits_process.py#L140


    Personally, I don''t think it makes sense to have a temperature of zero be hardcoded
    to bypass the fact that the generating process is in sampling mode, but that''s
    probably a design discussion to be had on the `transformers` repo.'
  created_at: 2022-08-24 12:32:36+00:00
  edited: false
  hidden: false
  id: 6306287414e7d8892aa9b26e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
      fullname: Alexander Ljungberg
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sleven
      type: user
    createdAt: '2022-08-24T14:27:45.000Z'
    data:
      edited: true
      editors:
      - sleven
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
          fullname: Alexander Ljungberg
          isHf: false
          isPro: false
          name: sleven
          type: user
        html: '<p>Fair enough! Might want to update <a href="https://huggingface.co/docs/api-inference/detailed_parameters">the
          docs</a> because they say 0 is okay to disable sampling:</p>

          <blockquote>

          <p>(Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation.
          1 means regular sampling, 0 means always take the highest score, 100.0 is
          getting closer to uniform probability.</p>

          </blockquote>

          '
        raw: 'Fair enough! Might want to update [the docs](https://huggingface.co/docs/api-inference/detailed_parameters)
          because they say 0 is okay to disable sampling:


          > (Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation.
          1 means regular sampling, 0 means always take the highest score, 100.0 is
          getting closer to uniform probability.'
        updatedAt: '2022-08-24T14:28:18.187Z'
      numEdits: 1
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - ZachX
        - wschell
    id: 630635613aed65d34e978d60
    type: comment
  author: sleven
  content: 'Fair enough! Might want to update [the docs](https://huggingface.co/docs/api-inference/detailed_parameters)
    because they say 0 is okay to disable sampling:


    > (Default: 1.0). Float (0.0-100.0). The temperature of the sampling operation.
    1 means regular sampling, 0 means always take the highest score, 100.0 is getting
    closer to uniform probability.'
  created_at: 2022-08-24 13:27:45+00:00
  edited: true
  hidden: false
  id: 630635613aed65d34e978d60
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/8bffa03f8d7b66e3d118bd3821026a55.svg
      fullname: Elisabeth Steffen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: elizaBETA
      type: user
    createdAt: '2023-07-27T11:01:26.000Z'
    data:
      edited: false
      editors:
      - elizaBETA
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8624805808067322
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/8bffa03f8d7b66e3d118bd3821026a55.svg
          fullname: Elisabeth Steffen
          isHf: false
          isPro: false
          name: elizaBETA
          type: user
        html: '<p>I am encountering the same error when trying to set the temperature
          to 0.0</p>

          <pre><code>ValueError: `temperature` has to be a strictly positive float,
          but is 0.0

          </code></pre>

          <p>Any updates on this yet?<br>In some cases, setting temperature to zero
          does make sense, e.g. to ensure the reproducibility of results. </p>

          '
        raw: "I am encountering the same error when trying to set the temperature\
          \ to 0.0\n\n```\nValueError: `temperature` has to be a strictly positive\
          \ float, but is 0.0\n```\n\nAny updates on this yet? \nIn some cases, setting\
          \ temperature to zero does make sense, e.g. to ensure the reproducibility\
          \ of results. "
        updatedAt: '2023-07-27T11:01:26.810Z'
      numEdits: 0
      reactions: []
    id: 64c24e86b32fc3f9e94b5c52
    type: comment
  author: elizaBETA
  content: "I am encountering the same error when trying to set the temperature to\
    \ 0.0\n\n```\nValueError: `temperature` has to be a strictly positive float, but\
    \ is 0.0\n```\n\nAny updates on this yet? \nIn some cases, setting temperature\
    \ to zero does make sense, e.g. to ensure the reproducibility of results. "
  created_at: 2023-07-27 10:01:26+00:00
  edited: false
  hidden: false
  id: 64c24e86b32fc3f9e94b5c52
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
      fullname: Alexander Ljungberg
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sleven
      type: user
    createdAt: '2023-08-03T09:06:00.000Z'
    data:
      edited: false
      editors:
      - sleven
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9914999008178711
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1661270230577-6303aac4a362e7e8b51a8e9f.jpeg?w=200&h=200&f=face
          fullname: Alexander Ljungberg
          isHf: false
          isPro: false
          name: sleven
          type: user
        html: '<p>You probably don''t have to. The reason I was trying with 0 was
          because the docs seem to say that''s the way to switch to greedy sampling
          (and they still say that).</p>

          <p>But another more obvious way is to set <code>top_k=1</code> which means
          "sample the top 1 tokens" which is the same as greedy sampling. Then set
          the temperature to 1 for good measure.</p>

          '
        raw: 'You probably don''t have to. The reason I was trying with 0 was because
          the docs seem to say that''s the way to switch to greedy sampling (and they
          still say that).


          But another more obvious way is to set `top_k=1` which means "sample the
          top 1 tokens" which is the same as greedy sampling. Then set the temperature
          to 1 for good measure.'
        updatedAt: '2023-08-03T09:06:00.028Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - ybm11
    id: 64cb6df84ca74090b98deed2
    type: comment
  author: sleven
  content: 'You probably don''t have to. The reason I was trying with 0 was because
    the docs seem to say that''s the way to switch to greedy sampling (and they still
    say that).


    But another more obvious way is to set `top_k=1` which means "sample the top 1
    tokens" which is the same as greedy sampling. Then set the temperature to 1 for
    good measure.'
  created_at: 2023-08-03 08:06:00+00:00
  edited: false
  hidden: false
  id: 64cb6df84ca74090b98deed2
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 94
repo_id: bigscience/bloom
repo_type: model
status: open
target_branch: null
title: '"Temperature needs to be >0" error'
