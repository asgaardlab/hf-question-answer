!!python/object:huggingface_hub.community.DiscussionWithDetails
author: javidpl
conflicting_files: null
created_at: 2023-03-22 15:58:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/738841f1ed97338583f63995cc7ceb64.svg
      fullname: Javier de Pedro
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: javidpl
      type: user
    createdAt: '2023-03-22T16:58:20.000Z'
    data:
      edited: false
      editors:
      - javidpl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/738841f1ed97338583f63995cc7ceb64.svg
          fullname: Javier de Pedro
          isHf: false
          isPro: false
          name: javidpl
          type: user
        html: '<p> I am using Bloom model with the Inference API (Javascript) since
          months without any problem, but since some days it''s always returning this
          error every time I fetch the API:<br>''the server responded with a status
          of 415 (Unsupported Media Type)''</p>

          <p>The code was not modified at all and works good with other models.<br>Any
          idea why is this happening?</p>

          <p>Thanks.</p>

          '
        raw: " I am using Bloom model with the Inference API (Javascript) since months\
          \ without any problem, but since some days it's always returning this error\
          \ every time I fetch the API:\r\n'the server responded with a status of\
          \ 415 (Unsupported Media Type)'\r\n\r\nThe code was not modified at all\
          \ and works good with other models.\r\nAny idea why is this happening?\r\
          \n\r\nThanks.\r\n\r\n"
        updatedAt: '2023-03-22T16:58:20.472Z'
      numEdits: 0
      reactions: []
    id: 641b33acabfce26bcf7ac892
    type: comment
  author: javidpl
  content: " I am using Bloom model with the Inference API (Javascript) since months\
    \ without any problem, but since some days it's always returning this error every\
    \ time I fetch the API:\r\n'the server responded with a status of 415 (Unsupported\
    \ Media Type)'\r\n\r\nThe code was not modified at all and works good with other\
    \ models.\r\nAny idea why is this happening?\r\n\r\nThanks.\r\n\r\n"
  created_at: 2023-03-22 15:58:20+00:00
  edited: false
  hidden: false
  id: 641b33acabfce26bcf7ac892
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/517c3d8c640d3b1b78cebf135a716635.svg
      fullname: Mike Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mikemklee
      type: user
    createdAt: '2023-03-24T02:32:35.000Z'
    data:
      edited: false
      editors:
      - mikemklee
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/517c3d8c640d3b1b78cebf135a716635.svg
          fullname: Mike Lee
          isHf: false
          isPro: false
          name: mikemklee
          type: user
        html: "<p>I am running into the same issue.</p>\n<p>Here is the code I am\
          \ using to hit the API</p>\n<pre><code class=\"language-js\">    <span class=\"\
          hljs-keyword\">const</span> response = <span class=\"hljs-keyword\">await</span>\
          \ <span class=\"hljs-title function_\">fetch</span>(\n      <span class=\"\
          hljs-string\">\"https://api-inference.huggingface.co/models/bigscience/bloom\"\
          </span>,\n      {\n        <span class=\"hljs-attr\">headers</span>: {\n\
          \          <span class=\"hljs-title class_\">Authorization</span>: <span\
          \ class=\"hljs-string\">`Bearer <span class=\"hljs-subst\">${process.env.HUGGING_FACE_API_KEY}</span>`</span>,\n\
          \        },\n        <span class=\"hljs-attr\">method</span>: <span class=\"\
          hljs-string\">\"POST\"</span>,\n        <span class=\"hljs-attr\">body</span>:\
          \ <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title\
          \ function_\">stringify</span>({\n          <span class=\"hljs-attr\">inputs</span>:\
          \ <span class=\"hljs-string\">\"Can you please let us know more details\
          \ about your \"</span>,\n        }),\n      }\n    );\n</code></pre>\n<p>Interestingly,\
          \ it works if the <code>inputs</code> string is exactly <code>Can you please\
          \ let us know more details about your </code> (as is shown in the usage\
          \ example for the model), but not if it's anything else.</p>\n<p>For example,\
          \ if I remove the trailing space at the end from that string and try to\
          \ use <code>Can you please let us know more details about your</code>, the\
          \ request fails and I get a 415.</p>\n"
        raw: "I am running into the same issue.\n\nHere is the code I am using to\
          \ hit the API\n\n```js\n    const response = await fetch(\n      \"https://api-inference.huggingface.co/models/bigscience/bloom\"\
          ,\n      {\n        headers: {\n          Authorization: `Bearer ${process.env.HUGGING_FACE_API_KEY}`,\n\
          \        },\n        method: \"POST\",\n        body: JSON.stringify({\n\
          \          inputs: \"Can you please let us know more details about your\
          \ \",\n        }),\n      }\n    );\n```\n\nInterestingly, it works if the\
          \ `inputs` string is exactly `Can you please let us know more details about\
          \ your ` (as is shown in the usage example for the model), but not if it's\
          \ anything else.\n\nFor example, if I remove the trailing space at the end\
          \ from that string and try to use `Can you please let us know more details\
          \ about your`, the request fails and I get a 415."
        updatedAt: '2023-03-24T02:32:35.162Z'
      numEdits: 0
      reactions: []
    id: 641d0bc3d1e1671e3f1f49f6
    type: comment
  author: mikemklee
  content: "I am running into the same issue.\n\nHere is the code I am using to hit\
    \ the API\n\n```js\n    const response = await fetch(\n      \"https://api-inference.huggingface.co/models/bigscience/bloom\"\
    ,\n      {\n        headers: {\n          Authorization: `Bearer ${process.env.HUGGING_FACE_API_KEY}`,\n\
    \        },\n        method: \"POST\",\n        body: JSON.stringify({\n     \
    \     inputs: \"Can you please let us know more details about your \",\n     \
    \   }),\n      }\n    );\n```\n\nInterestingly, it works if the `inputs` string\
    \ is exactly `Can you please let us know more details about your ` (as is shown\
    \ in the usage example for the model), but not if it's anything else.\n\nFor example,\
    \ if I remove the trailing space at the end from that string and try to use `Can\
    \ you please let us know more details about your`, the request fails and I get\
    \ a 415."
  created_at: 2023-03-24 01:32:35+00:00
  edited: false
  hidden: false
  id: 641d0bc3d1e1671e3f1f49f6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/517c3d8c640d3b1b78cebf135a716635.svg
      fullname: Mike Lee
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mikemklee
      type: user
    createdAt: '2023-03-24T04:03:07.000Z'
    data:
      edited: false
      editors:
      - mikemklee
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/517c3d8c640d3b1b78cebf135a716635.svg
          fullname: Mike Lee
          isHf: false
          isPro: false
          name: mikemklee
          type: user
        html: "<p>I managed to get it to work by setting the <code>Content-Type</code>\
          \ header in the request.</p>\n<p>reference:<br><a rel=\"nofollow\" href=\"\
          https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options\"\
          >using fetch to make a POST request</a></p>\n<pre><code class=\"language-js\"\
          >    <span class=\"hljs-keyword\">const</span> response = <span class=\"\
          hljs-keyword\">await</span> <span class=\"hljs-title function_\">fetch</span>(\n\
          \      <span class=\"hljs-string\">\"https://api-inference.huggingface.co/models/bigscience/bloom\"\
          </span>,\n      {\n        <span class=\"hljs-attr\">headers</span>: {\n\
          \          <span class=\"hljs-string\">\"Content-Type\"</span>: <span class=\"\
          hljs-string\">\"application/json\"</span>,\n          <span class=\"hljs-title\
          \ class_\">Authorization</span>: <span class=\"hljs-string\">`Bearer <span\
          \ class=\"hljs-subst\">${process.env.HUGGING_FACE_API_KEY}</span>`</span>,\n\
          \        },\n        <span class=\"hljs-attr\">method</span>: <span class=\"\
          hljs-string\">\"POST\"</span>,\n        <span class=\"hljs-attr\">body</span>:\
          \ <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title\
          \ function_\">stringify</span>({\n          <span class=\"hljs-attr\">inputs</span>:\
          \ <span class=\"hljs-string\">\"Can you guess what my next \"</span>,\n\
          \        }),\n      }\n    );\n</code></pre>\n"
        raw: "I managed to get it to work by setting the `Content-Type` header in\
          \ the request.\n\nreference:\n[using fetch to make a POST request](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options)\n\
          \n```js\n    const response = await fetch(\n      \"https://api-inference.huggingface.co/models/bigscience/bloom\"\
          ,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\"\
          ,\n          Authorization: `Bearer ${process.env.HUGGING_FACE_API_KEY}`,\n\
          \        },\n        method: \"POST\",\n        body: JSON.stringify({\n\
          \          inputs: \"Can you guess what my next \",\n        }),\n     \
          \ }\n    );\n```"
        updatedAt: '2023-03-24T04:03:07.685Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - javidpl
        - marcelovicentegc
    id: 641d20fbb54f6cf02b05b2e1
    type: comment
  author: mikemklee
  content: "I managed to get it to work by setting the `Content-Type` header in the\
    \ request.\n\nreference:\n[using fetch to make a POST request](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch#supplying_request_options)\n\
    \n```js\n    const response = await fetch(\n      \"https://api-inference.huggingface.co/models/bigscience/bloom\"\
    ,\n      {\n        headers: {\n          \"Content-Type\": \"application/json\"\
    ,\n          Authorization: `Bearer ${process.env.HUGGING_FACE_API_KEY}`,\n  \
    \      },\n        method: \"POST\",\n        body: JSON.stringify({\n       \
    \   inputs: \"Can you guess what my next \",\n        }),\n      }\n    );\n```"
  created_at: 2023-03-24 03:03:07+00:00
  edited: false
  hidden: false
  id: 641d20fbb54f6cf02b05b2e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1646492542174-5e70f6048ce3c604d78fe133.jpeg?w=200&h=200&f=face
      fullname: Christopher Akiki
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: cakiki
      type: user
    createdAt: '2023-03-24T08:40:04.000Z'
    data:
      status: closed
    id: 641d61e421590570b66b67bd
    type: status-change
  author: cakiki
  created_at: 2023-03-24 07:40:04+00:00
  id: 641d61e421590570b66b67bd
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/738841f1ed97338583f63995cc7ceb64.svg
      fullname: Javier de Pedro
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: javidpl
      type: user
    createdAt: '2023-03-25T20:05:33.000Z'
    data:
      edited: false
      editors:
      - javidpl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/738841f1ed97338583f63995cc7ceb64.svg
          fullname: Javier de Pedro
          isHf: false
          isPro: false
          name: javidpl
          type: user
        html: '<p>Thank you very much! Yep, the Content-Type was missing in headers.</p>

          '
        raw: Thank you very much! Yep, the Content-Type was missing in headers.
        updatedAt: '2023-03-25T20:05:33.382Z'
      numEdits: 0
      reactions: []
    id: 641f540dd32e9db0ca0bf297
    type: comment
  author: javidpl
  content: Thank you very much! Yep, the Content-Type was missing in headers.
  created_at: 2023-03-25 19:05:33+00:00
  edited: false
  hidden: false
  id: 641f540dd32e9db0ca0bf297
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 215
repo_id: bigscience/bloom
repo_type: model
status: closed
target_branch: null
title: Inference API returning 415 error
