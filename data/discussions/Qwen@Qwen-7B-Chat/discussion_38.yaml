!!python/object:huggingface_hub.community.DiscussionWithDetails
author: allenhaozi
conflicting_files: null
created_at: 2023-08-31 12:00:10+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6498300ffab15d3a4990105a/zG8zcmF9xCKFtrtFu6D_H.png?w=200&h=200&f=face
      fullname: HaoMa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: allenhaozi
      type: user
    createdAt: '2023-08-31T13:00:10.000Z'
    data:
      edited: false
      editors:
      - allenhaozi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6169317364692688
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6498300ffab15d3a4990105a/zG8zcmF9xCKFtrtFu6D_H.png?w=200&h=200&f=face
          fullname: HaoMa
          isHf: false
          isPro: false
          name: allenhaozi
          type: user
        html: "<p>Does anyone have this problem?</p>\n<pre><code>ERROR:    Exception\
          \ in ASGI application\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 408, in run_asgi\n    result = await app(  # type: ignore[func-returns-value]\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 84, in __call__\n    return await self.app(scope, receive, send)\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/fastapi/applications.py\"\
          , line 292, in __call__\n    await super().__call__(scope, receive, send)\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/starlette/applications.py\"\
          , line 122, in __call__\n    await self.middleware_stack(scope, receive,\
          \ send)\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\n    raise exc\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\n    await self.app(scope, receive, _send)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\n    await self.app(scope, receive, send)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\n    raise exc\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\n    await self.app(scope, receive, sender)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\n    raise e\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\n    await self.app(scope, receive, send)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\", line\
          \ 718, in __call__\n    await route.handle(scope, receive, send)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\", line\
          \ 276, in handle\n    await self.app(scope, receive, send)\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\"\
          , line 66, in app\n    response = await func(request)\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\"\
          , line 273, in app\n    raw_response = await run_endpoint_function(\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\", line 190,\
          \ in run_endpoint_function\n    return await dependant.call(**values)\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/vllm/entrypoints/openai/api_server.py\"\
          , line 302, in create_chat_completion\n    async for res in result_generator:\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\"\
          , line 148, in generate\n    await self.engine_step(request_id)\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\"\
          , line 74, in engine_step\n    request_outputs = self.engine.step()\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\",\
          \ line 324, in step\n    self._decode_sequences(seq_groups)\n  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\"\
          , line 409, in _decode_sequences\n    new_token, new_output_text = detokenize_incrementally(\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/vllm/transformers_utils/tokenizer.py\"\
          , line 85, in detokenize_incrementally\n    new_token = tokenizer.convert_ids_to_tokens(\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/transformers/tokenization_utils.py\"\
          , line 910, in convert_ids_to_tokens\n    return self._convert_id_to_token(ids)\n\
          \  File \"/root/.cache/huggingface/modules/transformers_modules/qwen-7b-chat/tokenization_qwen.py\"\
          , line 198, in _convert_id_to_token\n    raise ValueError(\"unknown ids\"\
          )\nValueError: unknown ids\n</code></pre>\n"
        raw: "Does anyone have this problem?\r\n\r\n```\r\nERROR:    Exception in\
          \ ASGI application\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/protocols/http/h11_impl.py\"\
          , line 408, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/middleware/proxy_headers.py\"\
          , line 84, in __call__\r\n    return await self.app(scope, receive, send)\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/applications.py\"\
          , line 292, in __call__\r\n    await super().__call__(scope, receive, send)\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/starlette/applications.py\"\
          , line 122, in __call__\r\n    await self.middleware_stack(scope, receive,\
          \ send)\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\"\
          , line 184, in __call__\r\n    raise exc\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\"\
          , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/cors.py\"\
          , line 83, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
          , line 79, in __call__\r\n    raise exc\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
          , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 20, in __call__\r\n    raise e\r\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
          , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n \
          \ File \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\",\
          \ line 718, in __call__\r\n    await route.handle(scope, receive, send)\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\"\
          , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\", line\
          \ 66, in app\r\n    response = await func(request)\r\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\"\
          , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\", line\
          \ 190, in run_endpoint_function\r\n    return await dependant.call(**values)\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/vllm/entrypoints/openai/api_server.py\"\
          , line 302, in create_chat_completion\r\n    async for res in result_generator:\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\"\
          , line 148, in generate\r\n    await self.engine_step(request_id)\r\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\"\
          , line 74, in engine_step\r\n    request_outputs = self.engine.step()\r\n\
          \  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\"\
          , line 324, in step\r\n    self._decode_sequences(seq_groups)\r\n  File\
          \ \"/usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\",\
          \ line 409, in _decode_sequences\r\n    new_token, new_output_text = detokenize_incrementally(\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/vllm/transformers_utils/tokenizer.py\"\
          , line 85, in detokenize_incrementally\r\n    new_token = tokenizer.convert_ids_to_tokens(\r\
          \n  File \"/usr/local/lib/python3.8/dist-packages/transformers/tokenization_utils.py\"\
          , line 910, in convert_ids_to_tokens\r\n    return self._convert_id_to_token(ids)\r\
          \n  File \"/root/.cache/huggingface/modules/transformers_modules/qwen-7b-chat/tokenization_qwen.py\"\
          , line 198, in _convert_id_to_token\r\n    raise ValueError(\"unknown ids\"\
          )\r\nValueError: unknown ids\r\n```"
        updatedAt: '2023-08-31T13:00:10.573Z'
      numEdits: 0
      reactions: []
    id: 64f08eda2d8b31067d51632d
    type: comment
  author: allenhaozi
  content: "Does anyone have this problem?\r\n\r\n```\r\nERROR:    Exception in ASGI\
    \ application\r\nTraceback (most recent call last):\r\n  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/protocols/http/h11_impl.py\"\
    , line 408, in run_asgi\r\n    result = await app(  # type: ignore[func-returns-value]\r\
    \n  File \"/usr/local/lib/python3.8/dist-packages/uvicorn/middleware/proxy_headers.py\"\
    , line 84, in __call__\r\n    return await self.app(scope, receive, send)\r\n\
    \  File \"/usr/local/lib/python3.8/dist-packages/fastapi/applications.py\", line\
    \ 292, in __call__\r\n    await super().__call__(scope, receive, send)\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/starlette/applications.py\", line 122,\
    \ in __call__\r\n    await self.middleware_stack(scope, receive, send)\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\", line\
    \ 184, in __call__\r\n    raise exc\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/errors.py\"\
    , line 162, in __call__\r\n    await self.app(scope, receive, _send)\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/cors.py\", line\
    \ 83, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
    , line 79, in __call__\r\n    raise exc\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/middleware/exceptions.py\"\
    , line 68, in __call__\r\n    await self.app(scope, receive, sender)\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 20, in __call__\r\n    raise e\r\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/middleware/asyncexitstack.py\"\
    , line 17, in __call__\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /usr/local/lib/python3.8/dist-packages/starlette/routing.py\", line 718, in __call__\r\
    \n    await route.handle(scope, receive, send)\r\n  File \"/usr/local/lib/python3.8/dist-packages/starlette/routing.py\"\
    , line 276, in handle\r\n    await self.app(scope, receive, send)\r\n  File \"\
    /usr/local/lib/python3.8/dist-packages/starlette/routing.py\", line 66, in app\r\
    \n    response = await func(request)\r\n  File \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\"\
    , line 273, in app\r\n    raw_response = await run_endpoint_function(\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/fastapi/routing.py\", line 190, in\
    \ run_endpoint_function\r\n    return await dependant.call(**values)\r\n  File\
    \ \"/usr/local/lib/python3.8/dist-packages/vllm/entrypoints/openai/api_server.py\"\
    , line 302, in create_chat_completion\r\n    async for res in result_generator:\r\
    \n  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\"\
    , line 148, in generate\r\n    await self.engine_step(request_id)\r\n  File \"\
    /usr/local/lib/python3.8/dist-packages/vllm/engine/async_llm_engine.py\", line\
    \ 74, in engine_step\r\n    request_outputs = self.engine.step()\r\n  File \"\
    /usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\", line 324,\
    \ in step\r\n    self._decode_sequences(seq_groups)\r\n  File \"/usr/local/lib/python3.8/dist-packages/vllm/engine/llm_engine.py\"\
    , line 409, in _decode_sequences\r\n    new_token, new_output_text = detokenize_incrementally(\r\
    \n  File \"/usr/local/lib/python3.8/dist-packages/vllm/transformers_utils/tokenizer.py\"\
    , line 85, in detokenize_incrementally\r\n    new_token = tokenizer.convert_ids_to_tokens(\r\
    \n  File \"/usr/local/lib/python3.8/dist-packages/transformers/tokenization_utils.py\"\
    , line 910, in convert_ids_to_tokens\r\n    return self._convert_id_to_token(ids)\r\
    \n  File \"/root/.cache/huggingface/modules/transformers_modules/qwen-7b-chat/tokenization_qwen.py\"\
    , line 198, in _convert_id_to_token\r\n    raise ValueError(\"unknown ids\")\r\
    \nValueError: unknown ids\r\n```"
  created_at: 2023-08-31 12:00:10+00:00
  edited: false
  hidden: false
  id: 64f08eda2d8b31067d51632d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6498300ffab15d3a4990105a/zG8zcmF9xCKFtrtFu6D_H.png?w=200&h=200&f=face
      fullname: HaoMa
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: allenhaozi
      type: user
    createdAt: '2023-09-01T02:31:21.000Z'
    data:
      status: closed
    id: 64f14cf9407464f69c2c2e12
    type: status-change
  author: allenhaozi
  created_at: 2023-09-01 01:31:21+00:00
  id: 64f14cf9407464f69c2c2e12
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 38
repo_id: Qwen/Qwen-7B-Chat
repo_type: model
status: closed
target_branch: null
title: 'ValueError: unknown ids'
