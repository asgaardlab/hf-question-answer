!!python/object:huggingface_hub.community.DiscussionWithDetails
author: JosephusCheung
conflicting_files: null
created_at: 2023-08-04 16:28:47+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-04T17:28:47.000Z'
    data:
      edited: true
      editors:
      - JosephusCheung
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5972331166267395
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
          fullname: "Jos\xE9phus Cheung"
          isHf: false
          isPro: false
          name: JosephusCheung
          type: user
        html: "<p>Recalibrated to fit the original LLaMA/LLaMA-2-like model structure.<br><a\
          \ href=\"https://huggingface.co/JosephusCheung/Qwen-LLaMAfied-7B-Chat\"\
          >JosephusCheung/Qwen-LLaMAfied-7B-Chat</a></p>\n<hr>\n<p>If anyone knows\
          \ why QWen's MHA has bias terms for qkv, please kindly teach me. I did not\
          \ understand why there is a possibility of improving the performance of\
          \ the model in this way.<br>\u5982\u679C\u6709\u8C01\u77E5\u9053\uFF0C\u4E3A\
          \u4EC0\u4E48QWen MHA\u7684qkv\u8981\u6709bias\uFF0C\u5E0C\u671B\u4E0D\u541D\
          \u8D50\u6559\u3002 \u6211\u5E76\u6CA1\u6709\u7406\u89E3\u4E3A\u4EC0\u4E48\
          \u4F1A\u6709\u636E\u6B64\u63D0\u5347\u6A21\u578B\u8868\u73B0\u7684\u53EF\
          \u80FD\u3002</p>\n"
        raw: "Recalibrated to fit the original LLaMA/LLaMA-2-like model structure.\n\
          [JosephusCheung/Qwen-LLaMAfied-7B-Chat](https://huggingface.co/JosephusCheung/Qwen-LLaMAfied-7B-Chat)\n\
          \n------\nIf anyone knows why QWen's MHA has bias terms for qkv, please\
          \ kindly teach me. I did not understand why there is a possibility of improving\
          \ the performance of the model in this way.\n\u5982\u679C\u6709\u8C01\u77E5\
          \u9053\uFF0C\u4E3A\u4EC0\u4E48QWen MHA\u7684qkv\u8981\u6709bias\uFF0C\u5E0C\
          \u671B\u4E0D\u541D\u8D50\u6559\u3002 \u6211\u5E76\u6CA1\u6709\u7406\u89E3\
          \u4E3A\u4EC0\u4E48\u4F1A\u6709\u636E\u6B64\u63D0\u5347\u6A21\u578B\u8868\
          \u73B0\u7684\u53EF\u80FD\u3002"
        updatedAt: '2023-08-04T17:34:23.188Z'
      numEdits: 1
      reactions:
      - count: 8
        reaction: "\U0001F44D"
        users:
        - SamGoo
        - MyComputer
        - CobbleMAD
        - swdvrr75
        - WuJu0
        - Dooaabb
        - hiyouga
        - vonjack
      - count: 5
        reaction: "\u2764\uFE0F"
        users:
        - SamGoo
        - swdvrr75
        - justincnn
        - hiyouga
        - vonjack
    id: 64cd354f4e3372f9eb4e5e0b
    type: comment
  author: JosephusCheung
  content: "Recalibrated to fit the original LLaMA/LLaMA-2-like model structure.\n\
    [JosephusCheung/Qwen-LLaMAfied-7B-Chat](https://huggingface.co/JosephusCheung/Qwen-LLaMAfied-7B-Chat)\n\
    \n------\nIf anyone knows why QWen's MHA has bias terms for qkv, please kindly\
    \ teach me. I did not understand why there is a possibility of improving the performance\
    \ of the model in this way.\n\u5982\u679C\u6709\u8C01\u77E5\u9053\uFF0C\u4E3A\u4EC0\
    \u4E48QWen MHA\u7684qkv\u8981\u6709bias\uFF0C\u5E0C\u671B\u4E0D\u541D\u8D50\u6559\
    \u3002 \u6211\u5E76\u6CA1\u6709\u7406\u89E3\u4E3A\u4EC0\u4E48\u4F1A\u6709\u636E\
    \u6B64\u63D0\u5347\u6A21\u578B\u8868\u73B0\u7684\u53EF\u80FD\u3002"
  created_at: 2023-08-04 16:28:47+00:00
  edited: true
  hidden: false
  id: 64cd354f4e3372f9eb4e5e0b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645612927537-620875b2ad90acde88c6087e.jpeg?w=200&h=200&f=face
      fullname: Wang Peng
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: logicwong
      type: user
    createdAt: '2023-08-05T03:05:45.000Z'
    data:
      edited: true
      editors:
      - logicwong
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.8391273617744446
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1645612927537-620875b2ad90acde88c6087e.jpeg?w=200&h=200&f=face
          fullname: Wang Peng
          isHf: false
          isPro: false
          name: logicwong
          type: user
        html: "<p>You can refer to the blog of Rope's author, Su Jianlin, at <a rel=\"\
          nofollow\" href=\"https://spaces.ac.cn/archives/9577\">https://spaces.ac.cn/archives/9577</a>.\
          \ The experimental results indicate that incorporating qkv bias enhances\
          \ the ability in extrapolating to longer sequences.</p>\n<p>\u53EF\u4EE5\
          \u53C2\u9605Rope\u7684\u4F5C\u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2<a\
          \ rel=\"nofollow\" href=\"https://spaces.ac.cn/archives/9577\">https://spaces.ac.cn/archives/9577</a>\
          \ \uFF0C \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\
          \u5347\u6A21\u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B</p>\n"
        raw: "You can refer to the blog of Rope's author, Su Jianlin, at https://spaces.ac.cn/archives/9577.\
          \ The experimental results indicate that incorporating qkv bias enhances\
          \ the ability in extrapolating to longer sequences.\n\n\u53EF\u4EE5\u53C2\
          \u9605Rope\u7684\u4F5C\u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2https://spaces.ac.cn/archives/9577\
          \ \uFF0C \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\
          \u5347\u6A21\u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B"
        updatedAt: '2023-08-05T03:20:43.783Z'
      numEdits: 2
      reactions: []
    id: 64cdbc89c0c627dfa797f74e
    type: comment
  author: logicwong
  content: "You can refer to the blog of Rope's author, Su Jianlin, at https://spaces.ac.cn/archives/9577.\
    \ The experimental results indicate that incorporating qkv bias enhances the ability\
    \ in extrapolating to longer sequences.\n\n\u53EF\u4EE5\u53C2\u9605Rope\u7684\u4F5C\
    \u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2https://spaces.ac.cn/archives/9577 \uFF0C\
    \ \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\u5347\u6A21\
    \u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B"
  created_at: 2023-08-05 02:05:45+00:00
  edited: true
  hidden: false
  id: 64cdbc89c0c627dfa797f74e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-07T18:29:03.000Z'
    data:
      status: closed
    id: 64d137ef1720c7a483219e2d
    type: status-change
  author: JosephusCheung
  created_at: 2023-08-07 17:29:03+00:00
  id: 64d137ef1720c7a483219e2d
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-10T06:09:50.000Z'
    data:
      status: open
    id: 64d47f2effc45aae26d01358
    type: status-change
  author: JosephusCheung
  created_at: 2023-08-10 05:09:50+00:00
  id: 64d47f2effc45aae26d01358
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-11T06:43:07.000Z'
    data:
      edited: false
      editors:
      - JosephusCheung
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.4426228404045105
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
          fullname: "Jos\xE9phus Cheung"
          isHf: false
          isPro: false
          name: JosephusCheung
          type: user
        html: "<p>Updated model weights and MMLU/CEval scores. Now the benchmark scores\
          \ are almost on par with the original Qwen-7B-chat.</p>\n<p>\u66F4\u65B0\
          \u4E86\u6A21\u578B\u6743\u91CD\u548C MMLU/CEval \u5206\u6570\u3002 \u73B0\
          \u5728\uFF0C\u5B83\u7684\u57FA\u51C6\u5206\u6570\u51E0\u4E4E\u4E0E\u539F\
          \u6765\u7684 Qwen-7B-chat \u6301\u5E73\u3002</p>\n"
        raw: "Updated model weights and MMLU/CEval scores. Now the benchmark scores\
          \ are almost on par with the original Qwen-7B-chat.\n\n\n\u66F4\u65B0\u4E86\
          \u6A21\u578B\u6743\u91CD\u548C MMLU/CEval \u5206\u6570\u3002 \u73B0\u5728\
          \uFF0C\u5B83\u7684\u57FA\u51C6\u5206\u6570\u51E0\u4E4E\u4E0E\u539F\u6765\
          \u7684 Qwen-7B-chat \u6301\u5E73\u3002"
        updatedAt: '2023-08-11T06:43:07.879Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - songkq
        - vonjack
    id: 64d5d87b70891ac9b8660749
    type: comment
  author: JosephusCheung
  content: "Updated model weights and MMLU/CEval scores. Now the benchmark scores\
    \ are almost on par with the original Qwen-7B-chat.\n\n\n\u66F4\u65B0\u4E86\u6A21\
    \u578B\u6743\u91CD\u548C MMLU/CEval \u5206\u6570\u3002 \u73B0\u5728\uFF0C\u5B83\
    \u7684\u57FA\u51C6\u5206\u6570\u51E0\u4E4E\u4E0E\u539F\u6765\u7684 Qwen-7B-chat\
    \ \u6301\u5E73\u3002"
  created_at: 2023-08-11 05:43:07+00:00
  edited: false
  hidden: false
  id: 64d5d87b70891ac9b8660749
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/aed544c3cc76a739c8556cfca242a40d.svg
      fullname: songkq
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: songkq
      type: user
    createdAt: '2023-08-11T11:53:27.000Z'
    data:
      edited: false
      editors:
      - songkq
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7336523532867432
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/aed544c3cc76a739c8556cfca242a40d.svg
          fullname: songkq
          isHf: false
          isPro: false
          name: songkq
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;JosephusCheung&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/JosephusCheung\"\
          >@<span class=\"underline\">JosephusCheung</span></a></span>\n\n\t</span></span>\
          \ Hi, could you please share how to merge the bias item of c_attn = nn.Linear(config.hidden_size,\
          \ 3 * self.projection_size) into LLama?</p>\n"
        raw: '@JosephusCheung Hi, could you please share how to merge the bias item
          of c_attn = nn.Linear(config.hidden_size, 3 * self.projection_size) into
          LLama?'
        updatedAt: '2023-08-11T11:53:27.739Z'
      numEdits: 0
      reactions: []
    id: 64d62137d6f3b8810d19503d
    type: comment
  author: songkq
  content: '@JosephusCheung Hi, could you please share how to merge the bias item
    of c_attn = nn.Linear(config.hidden_size, 3 * self.projection_size) into LLama?'
  created_at: 2023-08-11 10:53:27+00:00
  edited: false
  hidden: false
  id: 64d62137d6f3b8810d19503d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-11T12:53:38.000Z'
    data:
      edited: false
      editors:
      - JosephusCheung
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6125900745391846
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
          fullname: "Jos\xE9phus Cheung"
          isHf: false
          isPro: false
          name: JosephusCheung
          type: user
        html: "<blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;JosephusCheung&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/JosephusCheung\"\
          >@<span class=\"underline\">JosephusCheung</span></a></span>\n\n\t</span></span>\
          \ Hi, could you please share how to merge the bias item of c_attn = nn.Linear(config.hidden_size,\
          \ 3 * self.projection_size) into LLama?</p>\n</blockquote>\n<p>One possible\
          \ solution:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"\
          ><span class=\"katex-mathml\"><math display=\"block\" xmlns=\"http://www.w3.org/1998/Math/MathML\"\
          ><mrow><msub><mi>W</mi><mi>c</mi></msub><mo>=</mo><mi>W</mi><mo>+</mo><mfrac><mi>b</mi><mrow><mi\
          \ mathvariant=\"normal\">\u2225</mi><mi>x</mi><msubsup><mi mathvariant=\"\
          normal\">\u2225</mi><mn>2</mn><mn>2</mn></msubsup></mrow></mfrac><mi>x</mi><msup><mi>x</mi><mi>T</mi></msup><mo>=</mo><mi>W</mi><mo>+</mo><mfrac><mrow><msub><mi>b</mi><mi>v</mi></msub><mo>\xD7\
          </mo><mi>a</mi><mi>v</mi><msup><mi>g</mi><mi>T</mi></msup></mrow><msup><mi>n</mi><mn>2</mn></msup></mfrac></mrow>W_c\
          \ = W + \\frac{b}{\\|x\\|_2^2} xx^T = W + \\frac{b_{v} \\times avg^T}{n^2}</math></span><span\
          \ aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span style=\"\
          height:0.83333em;vertical-align:-0.15em;\" class=\"strut\"></span><span\
          \ class=\"mord\"><span style=\"margin-right:0.13889em;\" class=\"mord mathnormal\"\
          >W</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span\
          \ class=\"vlist-r\"><span style=\"height:0.151392em;\" class=\"vlist\"><span\
          \ style=\"top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;\"\
          ><span style=\"height:2.7em;\" class=\"pstrut\"></span><span class=\"sizing\
          \ reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">c</span></span></span></span><span\
          \ class=\"vlist-s\">\u200B</span></span><span class=\"vlist-r\"><span style=\"\
          height:0.15em;\" class=\"vlist\"><span></span></span></span></span></span></span><span\
          \ style=\"margin-right:0.2777777777777778em;\" class=\"mspace\"></span><span\
          \ class=\"mrel\">=</span><span style=\"margin-right:0.2777777777777778em;\"\
          \ class=\"mspace\"></span></span><span class=\"base\"><span style=\"height:0.76666em;vertical-align:-0.08333em;\"\
          \ class=\"strut\"></span><span style=\"margin-right:0.13889em;\" class=\"\
          mord mathnormal\">W</span><span style=\"margin-right:0.2222222222222222em;\"\
          \ class=\"mspace\"></span><span class=\"mbin\">+</span><span style=\"margin-right:0.2222222222222222em;\"\
          \ class=\"mspace\"></span></span><span class=\"base\"><span style=\"height:2.323748em;vertical-align:-0.9523079999999999em;\"\
          \ class=\"strut\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"\
          ></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"\
          vlist-r\"><span style=\"height:1.37144em;\" class=\"vlist\"><span style=\"\
          top:-2.314em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ class=\"mord\"><span class=\"mord\">\u2225</span><span class=\"mord mathnormal\"\
          >x</span><span class=\"mord\"><span class=\"mord\">\u2225</span><span class=\"\
          msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span\
          \ style=\"height:0.7959080000000001em;\" class=\"vlist\"><span style=\"\
          top:-2.433692em;margin-left:0em;margin-right:0.05em;\"><span style=\"height:2.7em;\"\
          \ class=\"pstrut\"></span><span class=\"sizing reset-size6 size3 mtight\"\
          ><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.0448000000000004em;margin-right:0.05em;\"\
          ><span style=\"height:2.7em;\" class=\"pstrut\"></span><span class=\"sizing\
          \ reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span\
          \ class=\"vlist-s\">\u200B</span></span><span class=\"vlist-r\"><span style=\"\
          height:0.26630799999999993em;\" class=\"vlist\"><span></span></span></span></span></span></span></span></span><span\
          \ style=\"top:-3.23em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ style=\"border-bottom-width:0.04em;\" class=\"frac-line\"></span></span><span\
          \ style=\"top:-3.677em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ class=\"mord\"><span class=\"mord mathnormal\">b</span></span></span></span><span\
          \ class=\"vlist-s\">\u200B</span></span><span class=\"vlist-r\"><span style=\"\
          height:0.9523079999999999em;\" class=\"vlist\"><span></span></span></span></span></span><span\
          \ class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\"\
          >x</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span\
          \ class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span\
          \ style=\"height:0.8913309999999999em;\" class=\"vlist\"><span style=\"\
          top:-3.113em;margin-right:0.05em;\"><span style=\"height:2.7em;\" class=\"\
          pstrut\"></span><span class=\"sizing reset-size6 size3 mtight\"><span style=\"\
          margin-right:0.13889em;\" class=\"mord mathnormal mtight\">T</span></span></span></span></span></span></span></span><span\
          \ style=\"margin-right:0.2777777777777778em;\" class=\"mspace\"></span><span\
          \ class=\"mrel\">=</span><span style=\"margin-right:0.2777777777777778em;\"\
          \ class=\"mspace\"></span></span><span class=\"base\"><span style=\"height:0.76666em;vertical-align:-0.08333em;\"\
          \ class=\"strut\"></span><span style=\"margin-right:0.13889em;\" class=\"\
          mord mathnormal\">W</span><span style=\"margin-right:0.2222222222222222em;\"\
          \ class=\"mspace\"></span><span class=\"mbin\">+</span><span style=\"margin-right:0.2222222222222222em;\"\
          \ class=\"mspace\"></span></span><span class=\"base\"><span style=\"height:2.204331em;vertical-align:-0.686em;\"\
          \ class=\"strut\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"\
          ></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"\
          vlist-r\"><span style=\"height:1.5183309999999999em;\" class=\"vlist\"><span\
          \ style=\"top:-2.314em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span\
          \ class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span\
          \ style=\"height:0.740108em;\" class=\"vlist\"><span style=\"top:-2.9890000000000003em;margin-right:0.05em;\"\
          ><span style=\"height:2.7em;\" class=\"pstrut\"></span><span class=\"sizing\
          \ reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span\
          \ style=\"top:-3.23em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ style=\"border-bottom-width:0.04em;\" class=\"frac-line\"></span></span><span\
          \ style=\"top:-3.677em;\"><span style=\"height:3em;\" class=\"pstrut\"></span><span\
          \ class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span\
          \ class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"\
          ><span style=\"height:0.151392em;\" class=\"vlist\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"\
          ><span style=\"height:2.7em;\" class=\"pstrut\"></span><span class=\"sizing\
          \ reset-size6 size3 mtight\"><span class=\"mord mtight\"><span style=\"\
          margin-right:0.03588em;\" class=\"mord mathnormal mtight\">v</span></span></span></span></span><span\
          \ class=\"vlist-s\">\u200B</span></span><span class=\"vlist-r\"><span style=\"\
          height:0.15em;\" class=\"vlist\"><span></span></span></span></span></span></span><span\
          \ style=\"margin-right:0.2222222222222222em;\" class=\"mspace\"></span><span\
          \ class=\"mbin\">\xD7</span><span style=\"margin-right:0.2222222222222222em;\"\
          \ class=\"mspace\"></span><span class=\"mord mathnormal\">a</span><span\
          \ style=\"margin-right:0.03588em;\" class=\"mord mathnormal\">v</span><span\
          \ class=\"mord\"><span style=\"margin-right:0.03588em;\" class=\"mord mathnormal\"\
          >g</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"\
          vlist-r\"><span style=\"height:0.8413309999999999em;\" class=\"vlist\"><span\
          \ style=\"top:-3.063em;margin-right:0.05em;\"><span style=\"height:2.7em;\"\
          \ class=\"pstrut\"></span><span class=\"sizing reset-size6 size3 mtight\"\
          ><span style=\"margin-right:0.13889em;\" class=\"mord mathnormal mtight\"\
          >T</span></span></span></span></span></span></span></span></span></span></span><span\
          \ class=\"vlist-s\">\u200B</span></span><span class=\"vlist-r\"><span style=\"\
          height:0.686em;\" class=\"vlist\"><span></span></span></span></span></span><span\
          \ class=\"mclose nulldelimiter\"></span></span></span></span></span></span></p>\n"
        raw: '> @JosephusCheung Hi, could you please share how to merge the bias item
          of c_attn = nn.Linear(config.hidden_size, 3 * self.projection_size) into
          LLama?


          One possible solution:


          $$W_c = W + \frac{b}{\|x\|_2^2} xx^T = W + \frac{b_{v} \times avg^T}{n^2}$$'
        updatedAt: '2023-08-11T12:53:38.363Z'
      numEdits: 0
      reactions:
      - count: 3
        reaction: "\U0001F44D"
        users:
        - songkq
        - vonjack
        - theblackcat102
    id: 64d62f52a4839890b200a1f2
    type: comment
  author: JosephusCheung
  content: '> @JosephusCheung Hi, could you please share how to merge the bias item
    of c_attn = nn.Linear(config.hidden_size, 3 * self.projection_size) into LLama?


    One possible solution:


    $$W_c = W + \frac{b}{\|x\|_2^2} xx^T = W + \frac{b_{v} \times avg^T}{n^2}$$'
  created_at: 2023-08-11 11:53:38+00:00
  edited: false
  hidden: false
  id: 64d62f52a4839890b200a1f2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/aed544c3cc76a739c8556cfca242a40d.svg
      fullname: songkq
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: songkq
      type: user
    createdAt: '2023-08-12T02:23:13.000Z'
    data:
      edited: false
      editors:
      - songkq
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8122314214706421
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/aed544c3cc76a739c8556cfca242a40d.svg
          fullname: songkq
          isHf: false
          isPro: false
          name: songkq
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;JosephusCheung&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/JosephusCheung\"\
          >@<span class=\"underline\">JosephusCheung</span></a></span>\n\n\t</span></span>\
          \ Could you please show a detailed explanation of the variables in the formula?\
          \ Or show your code, please?</p>\n"
        raw: '@JosephusCheung Could you please show a detailed explanation of the
          variables in the formula? Or show your code, please?'
        updatedAt: '2023-08-12T02:23:13.858Z'
      numEdits: 0
      reactions: []
    id: 64d6ed118711e883ca6a49e2
    type: comment
  author: songkq
  content: '@JosephusCheung Could you please show a detailed explanation of the variables
    in the formula? Or show your code, please?'
  created_at: 2023-08-12 01:23:13+00:00
  edited: false
  hidden: false
  id: 64d6ed118711e883ca6a49e2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-15T15:26:21.000Z'
    data:
      status: closed
    id: 64db991dd4d94f50272a15c1
    type: status-change
  author: JosephusCheung
  created_at: 2023-08-15 14:26:21+00:00
  id: 64db991dd4d94f50272a15c1
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-08-31T10:05:26.000Z'
    data:
      status: open
    id: 64f065e6a07cac1d7b17bbcc
    type: status-change
  author: JosephusCheung
  created_at: 2023-08-31 09:05:26+00:00
  id: 64f065e6a07cac1d7b17bbcc
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
      fullname: "Jos\xE9phus Cheung"
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JosephusCheung
      type: user
    createdAt: '2023-11-30T22:41:59.000Z'
    data:
      edited: false
      editors:
      - JosephusCheung
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.767214298248291
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f54abfaa4be54e61c1052720eb498703.svg
          fullname: "Jos\xE9phus Cheung"
          isHf: false
          isPro: false
          name: JosephusCheung
          type: user
        html: "<blockquote>\n<p>You can refer to the blog of Rope's author, Su Jianlin,\
          \ at <a rel=\"nofollow\" href=\"https://spaces.ac.cn/archives/9577\">https://spaces.ac.cn/archives/9577</a>.\
          \ The experimental results indicate that incorporating qkv bias enhances\
          \ the ability in extrapolating to longer sequences.</p>\n<p>\u53EF\u4EE5\
          \u53C2\u9605Rope\u7684\u4F5C\u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2<a\
          \ rel=\"nofollow\" href=\"https://spaces.ac.cn/archives/9577\">https://spaces.ac.cn/archives/9577</a>\
          \ \uFF0C \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\
          \u5347\u6A21\u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B</p>\n</blockquote>\n\
          <p>Su have updated his blog, it reads:\"\u3010\u6CE8\uFF1A\u540E\u6765\u7ECF\
          \u8FC7\u53CD\u590D\u6D4B\u8BD5\u53D1\u73B0\uFF0C\u53D1\u73B0\u6B64\u7BC7\
          \u6587\u7AE0\u7684\u957F\u5EA6\u5916\u63A8\u7ED3\u679C\u53EF\u590D\u73B0\
          \u6027\u6BD4\u8F83\u4E0D\u7A33\u5B9A\uFF08\u53EF\u80FD\u8DDF\u6A21\u578B\
          \u7ED3\u6784\u3001\u8D85\u53C2\u6570\u7B49\u7D27\u5BC6\u76F8\u5173\uFF09\
          \uFF0C\u8BF7\u81EA\u884C\u659F\u914C\u4F7F\u7528\u3002\u3011\"(Note: After\
          \ repeated testing, it was found that the reproducibility of the length\
          \ extrapolation results of this article is relatively unstable (may be closely\
          \ related to the model structure, hyperparameters, etc.), please use it\
          \ at your own discretion.)</p>\n"
        raw: "> You can refer to the blog of Rope's author, Su Jianlin, at https://spaces.ac.cn/archives/9577.\
          \ The experimental results indicate that incorporating qkv bias enhances\
          \ the ability in extrapolating to longer sequences.\n> \n> \u53EF\u4EE5\u53C2\
          \u9605Rope\u7684\u4F5C\u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2https://spaces.ac.cn/archives/9577\
          \ \uFF0C \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\
          \u5347\u6A21\u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B\n\nSu have\
          \ updated his blog, it reads:\"\u3010\u6CE8\uFF1A\u540E\u6765\u7ECF\u8FC7\
          \u53CD\u590D\u6D4B\u8BD5\u53D1\u73B0\uFF0C\u53D1\u73B0\u6B64\u7BC7\u6587\
          \u7AE0\u7684\u957F\u5EA6\u5916\u63A8\u7ED3\u679C\u53EF\u590D\u73B0\u6027\
          \u6BD4\u8F83\u4E0D\u7A33\u5B9A\uFF08\u53EF\u80FD\u8DDF\u6A21\u578B\u7ED3\
          \u6784\u3001\u8D85\u53C2\u6570\u7B49\u7D27\u5BC6\u76F8\u5173\uFF09\uFF0C\
          \u8BF7\u81EA\u884C\u659F\u914C\u4F7F\u7528\u3002\u3011\"(Note: After repeated\
          \ testing, it was found that the reproducibility of the length extrapolation\
          \ results of this article is relatively unstable (may be closely related\
          \ to the model structure, hyperparameters, etc.), please use it at your\
          \ own discretion.)"
        updatedAt: '2023-11-30T22:41:59.718Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\u2764\uFE0F"
        users:
        - theblackcat102
        - Evi1ran
    id: 65690fb74527e9d1ff9d0106
    type: comment
  author: JosephusCheung
  content: "> You can refer to the blog of Rope's author, Su Jianlin, at https://spaces.ac.cn/archives/9577.\
    \ The experimental results indicate that incorporating qkv bias enhances the ability\
    \ in extrapolating to longer sequences.\n> \n> \u53EF\u4EE5\u53C2\u9605Rope\u7684\
    \u4F5C\u8005\u82CF\u5251\u6797\u7684\u535A\u5BA2https://spaces.ac.cn/archives/9577\
    \ \uFF0C \u5B9E\u9A8C\u7ED3\u679C\u663E\u793Aqkv bias\u6709\u52A9\u4E8E\u63D0\u5347\
    \u6A21\u578B\u7684\u957F\u5EA6\u5916\u63A8\u80FD\u529B\n\nSu have updated his\
    \ blog, it reads:\"\u3010\u6CE8\uFF1A\u540E\u6765\u7ECF\u8FC7\u53CD\u590D\u6D4B\
    \u8BD5\u53D1\u73B0\uFF0C\u53D1\u73B0\u6B64\u7BC7\u6587\u7AE0\u7684\u957F\u5EA6\
    \u5916\u63A8\u7ED3\u679C\u53EF\u590D\u73B0\u6027\u6BD4\u8F83\u4E0D\u7A33\u5B9A\
    \uFF08\u53EF\u80FD\u8DDF\u6A21\u578B\u7ED3\u6784\u3001\u8D85\u53C2\u6570\u7B49\
    \u7D27\u5BC6\u76F8\u5173\uFF09\uFF0C\u8BF7\u81EA\u884C\u659F\u914C\u4F7F\u7528\
    \u3002\u3011\"(Note: After repeated testing, it was found that the reproducibility\
    \ of the length extrapolation results of this article is relatively unstable (may\
    \ be closely related to the model structure, hyperparameters, etc.), please use\
    \ it at your own discretion.)"
  created_at: 2023-11-30 22:41:59+00:00
  edited: false
  hidden: false
  id: 65690fb74527e9d1ff9d0106
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: Qwen/Qwen-7B-Chat
repo_type: model
status: open
target_branch: null
title: "Unofficial LLaMAfied Version in HF format - \u975E\u5B98\u65B9\u7684LLaMA\u5316\
  HF\u683C\u5F0F\u7248\u672C"
