!!python/object:huggingface_hub.community.DiscussionWithDetails
author: kurnevsky
conflicting_files: null
created_at: 2024-01-16 22:03:10+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cf33f15c0773ef5abb61a91c26d352da.svg
      fullname: Evgeny Kurnevsky
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kurnevsky
      type: user
    createdAt: '2024-01-16T22:03:10.000Z'
    data:
      edited: true
      editors:
      - kurnevsky
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9401816129684448
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cf33f15c0773ef5abb61a91c26d352da.svg
          fullname: Evgeny Kurnevsky
          isHf: false
          isPro: false
          name: kurnevsky
          type: user
        html: "<p>I'm running the q8 gguf model, and it quite often inserts chatml-like\
          \ tokens in the response, e.g.:</p>\n<pre><code>&lt;|im_start|&gt;system\n\
          You speak like a bro.&lt;|im_end|&gt;\n&lt;|im_start|&gt;user\nHow to eat\
          \ healthy?&lt;|im_end|&gt;\n&lt;|im_start|&gt;assistant\n Bro, eating healthy\
          \ ain't that complicated. Just stick to these basics:\n\n1. Eat lots of\
          \ fruits and veggies - These are full of vitamins and fiber that keep you\
          \ feeling full and give your body the nutrients it needs. \n\n2. Choose\
          \ whole grains over refined ones - Whole grain bread, rice, and pasta have\
          \ more nutrition than their processed counterparts. Plus, they help keep\
          \ blood sugar levels steady.\n\n3. Go lean with protein - Opt for skinless\
          \ poultry, fish, beans, or legumes instead of fatty cuts of meat. They're\
          \ better for your heart and overall health.\n\n4. Cut back on sugary drinks\
          \ and sweets - These are major sources of empty calories that don't do much\
          \ to keep you healthy or feeling full. Stick to water, seltzer, or unsweetened\
          \ tea as much as possible.\n\n5. Cook at home more often - This gives you\
          \ control over what goes into your meals, making it easier to eat healthily.\
          \ Plus, cooking can be a fun and relaxing activity!\n\n6. Don't forget about\
          \ portions - Even healthy foods can lead to weight gain if you eat too much\
          \ of them. Stick to reasonable portion sizes.\n\n7. Stay active - Exercise\
          \ is key for overall health, so make sure to move your body regularly. It\
          \ doesn't have to be intense; just get up and move around during the day.\n\
          \n8. Listen to your body - Pay attention to how different foods make you\
          \ feel. If something doesn't sit well, it might not be the best choice for\
          \ your diet.\n\nRemember, it's&lt;|im_start|&gt;user_preference|bro|&gt;\n\
          &lt;|im_end|&gt;\n&lt;|im_start|&gt;user\n</code></pre>\n<p>Here it inserted\
          \ <code>Remember, it's&lt;|im_start|&gt;user_preference|bro|&gt;</code>\
          \ - I have never seen this from the original dolphin model.</p>\n"
        raw: "I'm running the q8 gguf model, and it quite often inserts chatml-like\
          \ tokens in the response, e.g.:\n\n```\n<|im_start|>system\nYou speak like\
          \ a bro.<|im_end|>\n<|im_start|>user\nHow to eat healthy?<|im_end|>\n<|im_start|>assistant\n\
          \ Bro, eating healthy ain't that complicated. Just stick to these basics:\n\
          \n1. Eat lots of fruits and veggies - These are full of vitamins and fiber\
          \ that keep you feeling full and give your body the nutrients it needs.\
          \ \n\n2. Choose whole grains over refined ones - Whole grain bread, rice,\
          \ and pasta have more nutrition than their processed counterparts. Plus,\
          \ they help keep blood sugar levels steady.\n\n3. Go lean with protein -\
          \ Opt for skinless poultry, fish, beans, or legumes instead of fatty cuts\
          \ of meat. They're better for your heart and overall health.\n\n4. Cut back\
          \ on sugary drinks and sweets - These are major sources of empty calories\
          \ that don't do much to keep you healthy or feeling full. Stick to water,\
          \ seltzer, or unsweetened tea as much as possible.\n\n5. Cook at home more\
          \ often - This gives you control over what goes into your meals, making\
          \ it easier to eat healthily. Plus, cooking can be a fun and relaxing activity!\n\
          \n6. Don't forget about portions - Even healthy foods can lead to weight\
          \ gain if you eat too much of them. Stick to reasonable portion sizes.\n\
          \n7. Stay active - Exercise is key for overall health, so make sure to move\
          \ your body regularly. It doesn't have to be intense; just get up and move\
          \ around during the day.\n\n8. Listen to your body - Pay attention to how\
          \ different foods make you feel. If something doesn't sit well, it might\
          \ not be the best choice for your diet.\n\nRemember, it's<|im_start|>user_preference|bro|>\n\
          <|im_end|>\n<|im_start|>user\n```\n\nHere it inserted `Remember, it's<|im_start|>user_preference|bro|>`\
          \ - I have never seen this from the original dolphin model."
        updatedAt: '2024-01-16T22:14:40.830Z'
      numEdits: 1
      reactions: []
    id: 65a6fd1e21943858bdab532b
    type: comment
  author: kurnevsky
  content: "I'm running the q8 gguf model, and it quite often inserts chatml-like\
    \ tokens in the response, e.g.:\n\n```\n<|im_start|>system\nYou speak like a bro.<|im_end|>\n\
    <|im_start|>user\nHow to eat healthy?<|im_end|>\n<|im_start|>assistant\n Bro,\
    \ eating healthy ain't that complicated. Just stick to these basics:\n\n1. Eat\
    \ lots of fruits and veggies - These are full of vitamins and fiber that keep\
    \ you feeling full and give your body the nutrients it needs. \n\n2. Choose whole\
    \ grains over refined ones - Whole grain bread, rice, and pasta have more nutrition\
    \ than their processed counterparts. Plus, they help keep blood sugar levels steady.\n\
    \n3. Go lean with protein - Opt for skinless poultry, fish, beans, or legumes\
    \ instead of fatty cuts of meat. They're better for your heart and overall health.\n\
    \n4. Cut back on sugary drinks and sweets - These are major sources of empty calories\
    \ that don't do much to keep you healthy or feeling full. Stick to water, seltzer,\
    \ or unsweetened tea as much as possible.\n\n5. Cook at home more often - This\
    \ gives you control over what goes into your meals, making it easier to eat healthily.\
    \ Plus, cooking can be a fun and relaxing activity!\n\n6. Don't forget about portions\
    \ - Even healthy foods can lead to weight gain if you eat too much of them. Stick\
    \ to reasonable portion sizes.\n\n7. Stay active - Exercise is key for overall\
    \ health, so make sure to move your body regularly. It doesn't have to be intense;\
    \ just get up and move around during the day.\n\n8. Listen to your body - Pay\
    \ attention to how different foods make you feel. If something doesn't sit well,\
    \ it might not be the best choice for your diet.\n\nRemember, it's<|im_start|>user_preference|bro|>\n\
    <|im_end|>\n<|im_start|>user\n```\n\nHere it inserted `Remember, it's<|im_start|>user_preference|bro|>`\
    \ - I have never seen this from the original dolphin model."
  created_at: 2024-01-16 22:03:10+00:00
  edited: true
  hidden: false
  id: 65a6fd1e21943858bdab532b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
      fullname: Tim Dolan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: macadeliccc
      type: user
    createdAt: '2024-01-16T22:11:05.000Z'
    data:
      edited: false
      editors:
      - macadeliccc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9783110022544861
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
          fullname: Tim Dolan
          isHf: false
          isPro: false
          name: macadeliccc
          type: user
        html: '<p>Weird. These models are in experimental stages. I will try to see
          if I can figure out whats wrong. This was my first series of MoE models,
          and the following series have not shown this behavior at all. It could be
          an issue of experts that are not utilizing chatML format, but the base model
          surely is. </p>

          <p>I have not tested the quantized versions yet, but the problem is likely
          present in the base model. Ill ping you when the new model is pushed.</p>

          '
        raw: "Weird. These models are in experimental stages. I will try to see if\
          \ I can figure out whats wrong. This was my first series of MoE models,\
          \ and the following series have not shown this behavior at all. It could\
          \ be an issue of experts that are not utilizing chatML format, but the base\
          \ model surely is. \n\nI have not tested the quantized versions yet, but\
          \ the problem is likely present in the base model. Ill ping you when the\
          \ new model is pushed."
        updatedAt: '2024-01-16T22:11:05.210Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - kurnevsky
    id: 65a6fef921943858bdabb346
    type: comment
  author: macadeliccc
  content: "Weird. These models are in experimental stages. I will try to see if I\
    \ can figure out whats wrong. This was my first series of MoE models, and the\
    \ following series have not shown this behavior at all. It could be an issue of\
    \ experts that are not utilizing chatML format, but the base model surely is.\
    \ \n\nI have not tested the quantized versions yet, but the problem is likely\
    \ present in the base model. Ill ping you when the new model is pushed."
  created_at: 2024-01-16 22:11:05+00:00
  edited: false
  hidden: false
  id: 65a6fef921943858bdabb346
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
      fullname: Tim Dolan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: macadeliccc
      type: user
    createdAt: '2024-01-16T22:19:03.000Z'
    data:
      edited: false
      editors:
      - macadeliccc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9290734529495239
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
          fullname: Tim Dolan
          isHf: false
          isPro: false
          name: macadeliccc
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;kurnevsky&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/kurnevsky\">@<span class=\"\
          underline\">kurnevsky</span></a></span>\n\n\t</span></span> are you able\
          \ to try the model without applying a chatml template? I think that is the\
          \ issue. With no chat template it does not return tokens</p>\n"
        raw: '@kurnevsky are you able to try the model without applying a chatml template?
          I think that is the issue. With no chat template it does not return tokens'
        updatedAt: '2024-01-16T22:19:03.868Z'
      numEdits: 0
      reactions: []
    id: 65a700d7148ef3dc39f669b8
    type: comment
  author: macadeliccc
  content: '@kurnevsky are you able to try the model without applying a chatml template?
    I think that is the issue. With no chat template it does not return tokens'
  created_at: 2024-01-16 22:19:03+00:00
  edited: false
  hidden: false
  id: 65a700d7148ef3dc39f669b8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/cf33f15c0773ef5abb61a91c26d352da.svg
      fullname: Evgeny Kurnevsky
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: kurnevsky
      type: user
    createdAt: '2024-01-16T22:29:32.000Z'
    data:
      edited: false
      editors:
      - kurnevsky
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9976929426193237
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/cf33f15c0773ef5abb61a91c26d352da.svg
          fullname: Evgeny Kurnevsky
          isHf: false
          isPro: false
          name: kurnevsky
          type: user
        html: '<p>I can do that, but if both base models stated in the readme were
          pretrained with chatml why this merge doesn''t work well with it? Or the
          models were different? :)</p>

          '
        raw: I can do that, but if both base models stated in the readme were pretrained
          with chatml why this merge doesn't work well with it? Or the models were
          different? :)
        updatedAt: '2024-01-16T22:29:32.437Z'
      numEdits: 0
      reactions: []
    id: 65a7034cd6e5c1ed6c4bc373
    type: comment
  author: kurnevsky
  content: I can do that, but if both base models stated in the readme were pretrained
    with chatml why this merge doesn't work well with it? Or the models were different?
    :)
  created_at: 2024-01-16 22:29:32+00:00
  edited: false
  hidden: false
  id: 65a7034cd6e5c1ed6c4bc373
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
      fullname: Tim Dolan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: macadeliccc
      type: user
    createdAt: '2024-01-16T22:48:16.000Z'
    data:
      edited: false
      editors:
      - macadeliccc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9599247574806213
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
          fullname: Tim Dolan
          isHf: false
          isPro: false
          name: macadeliccc
          type: user
        html: '<p>I honestly dont have a very good answer for you at this point. This
          version was Open-hermes and dolphin-mistral-7b-dpo-laser, but is now the
          config that I have provided for you.</p>

          <p>I will be updating and providing additional quants for the new model.</p>

          '
        raw: 'I honestly dont have a very good answer for you at this point. This
          version was Open-hermes and dolphin-mistral-7b-dpo-laser, but is now the
          config that I have provided for you.


          I will be updating and providing additional quants for the new model.'
        updatedAt: '2024-01-16T22:48:16.741Z'
      numEdits: 0
      reactions: []
    id: 65a707b0e94d40886a656a6f
    type: comment
  author: macadeliccc
  content: 'I honestly dont have a very good answer for you at this point. This version
    was Open-hermes and dolphin-mistral-7b-dpo-laser, but is now the config that I
    have provided for you.


    I will be updating and providing additional quants for the new model.'
  created_at: 2024-01-16 22:48:16+00:00
  edited: false
  hidden: false
  id: 65a707b0e94d40886a656a6f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
      fullname: Tim Dolan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: macadeliccc
      type: user
    createdAt: '2024-01-20T05:55:00.000Z'
    data:
      edited: false
      editors:
      - macadeliccc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5023627877235413
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
          fullname: Tim Dolan
          isHf: false
          isPro: false
          name: macadeliccc
          type: user
        html: "<p>I fixed the chatml tokens <span data-props=\"{&quot;user&quot;:&quot;kurnevsky&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/kurnevsky\"\
          >@<span class=\"underline\">kurnevsky</span></a></span>\n\n\t</span></span>\
          \ </p>\n"
        raw: 'I fixed the chatml tokens @kurnevsky '
        updatedAt: '2024-01-20T05:55:00.911Z'
      numEdits: 0
      reactions: []
    id: 65ab60340844d9e0d6299c62
    type: comment
  author: macadeliccc
  content: 'I fixed the chatml tokens @kurnevsky '
  created_at: 2024-01-20 05:55:00+00:00
  edited: false
  hidden: false
  id: 65ab60340844d9e0d6299c62
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/6455cc8d679315e4ef16fbec/NcB1yDz0ZBtXXFiApnFyl.png?w=200&h=200&f=face
      fullname: Tim Dolan
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: macadeliccc
      type: user
    createdAt: '2024-01-20T17:16:25.000Z'
    data:
      status: closed
    id: 65abffe90844d9e0d6542a31
    type: status-change
  author: macadeliccc
  created_at: 2024-01-20 17:16:25+00:00
  id: 65abffe90844d9e0d6542a31
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: macadeliccc/laser-dolphin-mixtral-2x7b-dpo
repo_type: model
status: closed
target_branch: null
title: Something is wrong with chatml tokens
