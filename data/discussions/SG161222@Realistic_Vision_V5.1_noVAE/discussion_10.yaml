!!python/object:huggingface_hub.community.DiscussionWithDetails
author: vionwinnie
conflicting_files: null
created_at: 2023-11-21 05:07:12+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ad0dc08ee5de38b67c5bbebb84bd0bae.svg
      fullname: Man Wai Winnie Yeung
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: vionwinnie
      type: user
    createdAt: '2023-11-21T05:07:12.000Z'
    data:
      edited: false
      editors:
      - vionwinnie
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5180657505989075
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ad0dc08ee5de38b67c5bbebb84bd0bae.svg
          fullname: Man Wai Winnie Yeung
          isHf: false
          isPro: false
          name: vionwinnie
          type: user
        html: "<p>This is my code for importing your amazing model into the jupyter\
          \ notebook with a 25GB GPU. I am not sure what I did wrong as my inference\
          \ of 1 image for img2img takes 12 minutes to run...</p>\n<pre><code>import\
          \ torch\nfrom PIL import Image\nfrom io import BytesIO\nfrom diffusers import\
          \ StableDiffusionImg2ImgPipeline, UniPCMultistepScheduler, AutoencoderKL\n\
          \nvae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-mse\",torch_dtype=torch.float16)\n\
          \nmodel_id = \"SG161222/Realistic_Vision_V5.1_noVAE\"\npipe = StableDiffusionImg2ImgPipeline.from_pretrained(model_id,\n\
          \                                                      vae=vae,\n      \
          \                                                use_safetensors=True,\n\
          \                                                      torch_dtype=torch.float16,\n\
          \                                                      safety_checker=None)\n\
          pipe.scheduler = UniPCMultistepScheduler.from_config(pipe.scheduler.config)\n\
          pipe.enable_xformers_memory_efficient_attention()\npipe.enable_model_cpu_offload()\n\
          \nimages = pipe(prompt=prompt, \n              negative_prompt=negative_prompt,\n\
          \              image=init_img, \n              steps=5,\n              num_images_per_prompt=1,\n\
          \              strength=0.6, \n              guidance_scale=6.5).images\n\
          </code></pre>\n"
        raw: "This is my code for importing your amazing model into the jupyter notebook\
          \ with a 25GB GPU. I am not sure what I did wrong as my inference of 1 image\
          \ for img2img takes 12 minutes to run...\r\n\r\n```\r\nimport torch\r\n\
          from PIL import Image\r\nfrom io import BytesIO\r\nfrom diffusers import\
          \ StableDiffusionImg2ImgPipeline, UniPCMultistepScheduler, AutoencoderKL\r\
          \n\r\nvae = AutoencoderKL.from_pretrained(\"stabilityai/sd-vae-ft-mse\"\
          ,torch_dtype=torch.float16)\r\n\r\nmodel_id = \"SG161222/Realistic_Vision_V5.1_noVAE\"\
          \r\npipe = StableDiffusionImg2ImgPipeline.from_pretrained(model_id,\r\n\
          \                                                      vae=vae,\r\n    \
          \                                                  use_safetensors=True,\r\
          \n                                                      torch_dtype=torch.float16,\r\
          \n                                                      safety_checker=None)\r\
          \npipe.scheduler = UniPCMultistepScheduler.from_config(pipe.scheduler.config)\r\
          \npipe.enable_xformers_memory_efficient_attention()\r\npipe.enable_model_cpu_offload()\r\
          \n\r\nimages = pipe(prompt=prompt, \r\n              negative_prompt=negative_prompt,\r\
          \n              image=init_img, \r\n              steps=5,\r\n         \
          \     num_images_per_prompt=1,\r\n              strength=0.6, \r\n     \
          \         guidance_scale=6.5).images\r\n\r\n```"
        updatedAt: '2023-11-21T05:07:12.043Z'
      numEdits: 0
      reactions: []
    id: 655c3b00b27f103d7b90bff9
    type: comment
  author: vionwinnie
  content: "This is my code for importing your amazing model into the jupyter notebook\
    \ with a 25GB GPU. I am not sure what I did wrong as my inference of 1 image for\
    \ img2img takes 12 minutes to run...\r\n\r\n```\r\nimport torch\r\nfrom PIL import\
    \ Image\r\nfrom io import BytesIO\r\nfrom diffusers import StableDiffusionImg2ImgPipeline,\
    \ UniPCMultistepScheduler, AutoencoderKL\r\n\r\nvae = AutoencoderKL.from_pretrained(\"\
    stabilityai/sd-vae-ft-mse\",torch_dtype=torch.float16)\r\n\r\nmodel_id = \"SG161222/Realistic_Vision_V5.1_noVAE\"\
    \r\npipe = StableDiffusionImg2ImgPipeline.from_pretrained(model_id,\r\n      \
    \                                                vae=vae,\r\n                \
    \                                      use_safetensors=True,\r\n             \
    \                                         torch_dtype=torch.float16,\r\n     \
    \                                                 safety_checker=None)\r\npipe.scheduler\
    \ = UniPCMultistepScheduler.from_config(pipe.scheduler.config)\r\npipe.enable_xformers_memory_efficient_attention()\r\
    \npipe.enable_model_cpu_offload()\r\n\r\nimages = pipe(prompt=prompt, \r\n   \
    \           negative_prompt=negative_prompt,\r\n              image=init_img,\
    \ \r\n              steps=5,\r\n              num_images_per_prompt=1,\r\n   \
    \           strength=0.6, \r\n              guidance_scale=6.5).images\r\n\r\n\
    ```"
  created_at: 2023-11-21 05:07:12+00:00
  edited: false
  hidden: false
  id: 655c3b00b27f103d7b90bff9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 10
repo_id: SG161222/Realistic_Vision_V5.1_noVAE
repo_type: model
status: open
target_branch: null
title: Not sure why inferencing was so slow
