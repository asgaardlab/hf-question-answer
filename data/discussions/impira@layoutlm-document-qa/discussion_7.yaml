!!python/object:huggingface_hub.community.DiscussionWithDetails
author: luojiluoji
conflicting_files: null
created_at: 2022-11-25 01:40:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
      fullname: luoji
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: luojiluoji
      type: user
    createdAt: '2022-11-25T01:40:29.000Z'
    data:
      edited: false
      editors:
      - luojiluoji
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
          fullname: luoji
          isHf: false
          isPro: false
          name: luojiluoji
          type: user
        html: '<p>When I fine tune this model (like layoutlm or other versions),the  layoutlm
          output has no probability, but I want to show the probability for the question
          like the example does. Can you  guide me how to design the probability for
          the question? Thanks a lot.<br><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/1669340398795-63296a03cb08c7b2b73153bb.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/1669340398795-63296a03cb08c7b2b73153bb.png"></a></p>

          '
        raw: "When I fine tune this model (like layoutlm or other versions),the  layoutlm\
          \ output has no probability, but I want to show the probability for the\
          \ question like the example does. Can you  guide me how to design the probability\
          \ for the question? Thanks a lot.\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669340398795-63296a03cb08c7b2b73153bb.png)\r\
          \n"
        updatedAt: '2022-11-25T01:40:29.200Z'
      numEdits: 0
      reactions: []
    id: 63801d0d5675ebfc47cc5d04
    type: comment
  author: luojiluoji
  content: "When I fine tune this model (like layoutlm or other versions),the  layoutlm\
    \ output has no probability, but I want to show the probability for the question\
    \ like the example does. Can you  guide me how to design the probability for the\
    \ question? Thanks a lot.\r\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669340398795-63296a03cb08c7b2b73153bb.png)\r\
    \n"
  created_at: 2022-11-25 01:40:29+00:00
  edited: false
  hidden: false
  id: 63801d0d5675ebfc47cc5d04
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2022-11-28T18:08:10.000Z'
    data:
      edited: false
      editors:
      - ankrgyl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
          fullname: Ankur Goyal
          isHf: false
          isPro: false
          name: ankrgyl
          type: user
        html: '<p>Hi there, can you provide some more details (e.g. code)? The model''s
          outputs are logits from which you can compute confidence, and it''s not
          clear to me why finetuning changes that. I.e. after you fine tune the model,
          you should be able to compute exactly the same outputs.</p>

          '
        raw: Hi there, can you provide some more details (e.g. code)? The model's
          outputs are logits from which you can compute confidence, and it's not clear
          to me why finetuning changes that. I.e. after you fine tune the model, you
          should be able to compute exactly the same outputs.
        updatedAt: '2022-11-28T18:08:10.771Z'
      numEdits: 0
      reactions: []
    id: 6384f90a20e00df40e4b1a83
    type: comment
  author: ankrgyl
  content: Hi there, can you provide some more details (e.g. code)? The model's outputs
    are logits from which you can compute confidence, and it's not clear to me why
    finetuning changes that. I.e. after you fine tune the model, you should be able
    to compute exactly the same outputs.
  created_at: 2022-11-28 18:08:10+00:00
  edited: false
  hidden: false
  id: 6384f90a20e00df40e4b1a83
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
      fullname: luoji
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: luojiluoji
      type: user
    createdAt: '2022-11-29T11:39:03.000Z'
    data:
      edited: false
      editors:
      - luojiluoji
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
          fullname: luoji
          isHf: false
          isPro: false
          name: luojiluoji
          type: user
        html: "<blockquote>\n<p>Hi there, can you provide some more details (e.g.\
          \ code)? The model's outputs are logits from which you can compute confidence,\
          \ and it's not clear to me why finetuning changes that. I.e. after you fine\
          \ tune the model, you should be able to compute exactly the same outputs.</p>\n\
          </blockquote>\n<p>thanks for your reply,I mean,like the example code,the\
          \ same question,the nlp return the score is  0.9943977,and the right side\
          \ ,the page return the score is 0.425, which one should I trust?<br>Deeply,\
          \ I have a question: the  outputs are logits for the begin and end position\
          \ of the inputs, but how to transform the logits to score\uFF08probability\uFF09\
          ? Use softmax?</p>\n<p><a rel=\"nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/1669720971805-63296a03cb08c7b2b73153bb.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/1669720971805-63296a03cb08c7b2b73153bb.png\"\
          ></a></p>\n<p>for example. I got the outputs logits for the answer start\
          \ position, and I do softmax for the logits.and got the max probability\
          \ is 0.6064619. And I do the softmax for the outputs logits for the answer\
          \ end position. I got  the max probability is 0.41881067.should the final\
          \ probability  is (0.6064619 +0.41881067 )/2 = 0.512636285?</p>\n<p><a rel=\"\
          nofollow\" href=\"https://cdn-uploads.huggingface.co/production/uploads/1669721580644-63296a03cb08c7b2b73153bb.png\"\
          ><img alt=\"image.png\" src=\"https://cdn-uploads.huggingface.co/production/uploads/1669721580644-63296a03cb08c7b2b73153bb.png\"\
          ></a></p>\n<p>Looking forward to your answers. Thanks a lot</p>\n"
        raw: "> Hi there, can you provide some more details (e.g. code)? The model's\
          \ outputs are logits from which you can compute confidence, and it's not\
          \ clear to me why finetuning changes that. I.e. after you fine tune the\
          \ model, you should be able to compute exactly the same outputs.\n\nthanks\
          \ for your reply,I mean,like the example code,the same question,the nlp\
          \ return the score is  0.9943977,and the right side ,the page return the\
          \ score is 0.425, which one should I trust?\nDeeply, I have a question:\
          \ the  outputs are logits for the begin and end position of the inputs,\
          \ but how to transform the logits to score\uFF08probability\uFF09? Use softmax?\n\
          \n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669720971805-63296a03cb08c7b2b73153bb.png)\n\
          \nfor example. I got the outputs logits for the answer start position, and\
          \ I do softmax for the logits.and got the max probability is 0.6064619.\
          \ And I do the softmax for the outputs logits for the answer end position.\
          \ I got  the max probability is 0.41881067.should the final probability\
          \  is (0.6064619 +0.41881067 )/2 = 0.512636285?\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669721580644-63296a03cb08c7b2b73153bb.png)\n\
          \nLooking forward to your answers. Thanks a lot"
        updatedAt: '2022-11-29T11:39:03.225Z'
      numEdits: 0
      reactions: []
    id: 6385ef5706858a85f58fd732
    type: comment
  author: luojiluoji
  content: "> Hi there, can you provide some more details (e.g. code)? The model's\
    \ outputs are logits from which you can compute confidence, and it's not clear\
    \ to me why finetuning changes that. I.e. after you fine tune the model, you should\
    \ be able to compute exactly the same outputs.\n\nthanks for your reply,I mean,like\
    \ the example code,the same question,the nlp return the score is  0.9943977,and\
    \ the right side ,the page return the score is 0.425, which one should I trust?\n\
    Deeply, I have a question: the  outputs are logits for the begin and end position\
    \ of the inputs, but how to transform the logits to score\uFF08probability\uFF09\
    ? Use softmax?\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669720971805-63296a03cb08c7b2b73153bb.png)\n\
    \nfor example. I got the outputs logits for the answer start position, and I do\
    \ softmax for the logits.and got the max probability is 0.6064619. And I do the\
    \ softmax for the outputs logits for the answer end position. I got  the max probability\
    \ is 0.41881067.should the final probability  is (0.6064619 +0.41881067 )/2 =\
    \ 0.512636285?\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/1669721580644-63296a03cb08c7b2b73153bb.png)\n\
    \nLooking forward to your answers. Thanks a lot"
  created_at: 2022-11-29 11:39:03+00:00
  edited: false
  hidden: false
  id: 6385ef5706858a85f58fd732
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2022-11-29T23:48:28.000Z'
    data:
      edited: false
      editors:
      - ankrgyl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
          fullname: Ankur Goyal
          isHf: false
          isPro: false
          name: ankrgyl
          type: user
        html: '<p>I would suggest reading this code, which transforms the outputs
          from the model into the scores you see in the demo:</p>

          <p><a rel="nofollow" href="https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450">https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450</a></p>

          '
        raw: 'I would suggest reading this code, which transforms the outputs from
          the model into the scores you see in the demo:


          https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450'
        updatedAt: '2022-11-29T23:48:28.848Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - luojiluoji
    id: 63869a4ca38ac48afd91292b
    type: comment
  author: ankrgyl
  content: 'I would suggest reading this code, which transforms the outputs from the
    model into the scores you see in the demo:


    https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450'
  created_at: 2022-11-29 23:48:28+00:00
  edited: false
  hidden: false
  id: 63869a4ca38ac48afd91292b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
      fullname: luoji
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: luojiluoji
      type: user
    createdAt: '2022-11-30T06:35:35.000Z'
    data:
      edited: false
      editors:
      - luojiluoji
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
          fullname: luoji
          isHf: false
          isPro: false
          name: luojiluoji
          type: user
        html: "<blockquote>\n<p>I would suggest reading this code, which transforms\
          \ the outputs from the model into the scores you see in the demo:</p>\n\
          <p><a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450\"\
          >https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450</a></p>\n\
          </blockquote>\n<p>Thanks\uFF0CI see the code and debug carefully, now I\
          \ know : to be simple ,if the max end logits index bigger than the start\
          \ logits index, which means find the answer , the final score is just the\
          \ start.max()*end.max(), They just multiply.<br>that's really me ,thank\
          \ you.</p>\n"
        raw: "> I would suggest reading this code, which transforms the outputs from\
          \ the model into the scores you see in the demo:\n> \n> https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450\n\
          \nThanks\uFF0CI see the code and debug carefully, now I know : to be simple\
          \ ,if the max end logits index bigger than the start logits index, which\
          \ means find the answer , the final score is just the start.max()*end.max(),\
          \ They just multiply.\nthat's really me ,thank you."
        updatedAt: '2022-11-30T06:35:35.562Z'
      numEdits: 0
      reactions: []
    id: 6386f9b78b5acae8d254557e
    type: comment
  author: luojiluoji
  content: "> I would suggest reading this code, which transforms the outputs from\
    \ the model into the scores you see in the demo:\n> \n> https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450\n\
    \nThanks\uFF0CI see the code and debug carefully, now I know : to be simple ,if\
    \ the max end logits index bigger than the start logits index, which means find\
    \ the answer , the final score is just the start.max()*end.max(), They just multiply.\n\
    that's really me ,thank you."
  created_at: 2022-11-30 06:35:35+00:00
  edited: false
  hidden: false
  id: 6386f9b78b5acae8d254557e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665050837668-63296a03cb08c7b2b73153bb.jpeg?w=200&h=200&f=face
      fullname: luoji
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: luojiluoji
      type: user
    createdAt: '2022-11-30T06:38:04.000Z'
    data:
      status: closed
    id: 6386fa4c8b5acae8d2545941
    type: status-change
  author: luojiluoji
  created_at: 2022-11-30 06:38:04+00:00
  id: 6386fa4c8b5acae8d2545941
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/131c3b19edeaa304aeb0609fd8709ebb.svg
      fullname: daniel oswaldo mora
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dan1232008
      type: user
    createdAt: '2023-01-15T19:14:57.000Z'
    data:
      edited: false
      editors:
      - dan1232008
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/131c3b19edeaa304aeb0609fd8709ebb.svg
          fullname: daniel oswaldo mora
          isHf: false
          isPro: false
          name: dan1232008
          type: user
        html: '<p>Hello, could you share the code, is that this page was closed.<br><a
          rel="nofollow" href="https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450">https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450</a></p>

          '
        raw: 'Hello, could you share the code, is that this page was closed.

          https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450'
        updatedAt: '2023-01-15T19:14:57.793Z'
      numEdits: 0
      reactions: []
    id: 63c450b1bfd39d7373a085d0
    type: comment
  author: dan1232008
  content: 'Hello, could you share the code, is that this page was closed.

    https://github.com/huggingface/transformers/blob/main/src/transformers/pipelines/document_question_answering.py#L450'
  created_at: 2023-01-15 19:14:57+00:00
  edited: false
  hidden: false
  id: 63c450b1bfd39d7373a085d0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
      fullname: Ankur Goyal
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: ankrgyl
      type: user
    createdAt: '2023-01-17T05:57:10.000Z'
    data:
      edited: false
      editors:
      - ankrgyl
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1659202732722-62e56ac32277e8483be2e0d5.jpeg?w=200&h=200&f=face
          fullname: Ankur Goyal
          isHf: false
          isPro: false
          name: ankrgyl
          type: user
        html: "<p>Sorry I'm not sure I follow \u2014&nbsp;the link you pasted is loading\
          \ for me?</p>\n"
        raw: "Sorry I'm not sure I follow \u2014\_the link you pasted is loading for\
          \ me?"
        updatedAt: '2023-01-17T05:57:10.987Z'
      numEdits: 0
      reactions: []
    id: 63c638b64016b29a6e3330e9
    type: comment
  author: ankrgyl
  content: "Sorry I'm not sure I follow \u2014\_the link you pasted is loading for\
    \ me?"
  created_at: 2023-01-17 05:57:10+00:00
  edited: false
  hidden: false
  id: 63c638b64016b29a6e3330e9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 7
repo_id: impira/layoutlm-document-qa
repo_type: model
status: closed
target_branch: null
title: How I design the result score(Or result probability) ,as the example shows
  ?
