!!python/object:huggingface_hub.community.DiscussionWithDetails
author: nelwazane
conflicting_files: null
created_at: 2023-12-11 11:20:52+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f684f4e39d293d76759e837eafe87c89.svg
      fullname: Nada Elwazane
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: nelwazane
      type: user
    createdAt: '2023-12-11T11:20:52.000Z'
    data:
      edited: false
      editors:
      - nelwazane
      hidden: false
      identifiedLanguage:
        language: ar
        probability: 0.6716961860656738
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f684f4e39d293d76759e837eafe87c89.svg
          fullname: Nada Elwazane
          isHf: false
          isPro: false
          name: nelwazane
          type: user
        html: "<p>I'm getting the following error when running the following code\
          \ on colab's free GPU T4:</p>\n<pre><code>RuntimeError: The size of tensor\
          \ a (13653) must match the size of tensor b (13632) at non-singleton dimension\
          \ 2\n</code></pre>\n<p>These are the dependencies I installed:</p>\n<pre><code>!pip\
          \ install auto-gptq optimum gptq\n!pip install -q -U git+https://github.com/huggingface/transformers.git\n\
          !pip install -q -U git+https://github.com/huggingface/accelerate.git\n</code></pre>\n\
          <p>and this is the code I'm running</p>\n<pre><code># -*- coding: utf-8\
          \ -*-\n\nimport torch\nfrom transformers import AutoTokenizer, AutoModelForCausalLM\n\
          model_path = \"mohamedelmesawy/jais-13b-chat-4bit\"\n\nprompt_eng = \"###\
          \ Instruction: Your name is Jais, and you are named after Jebel Jais, the\
          \ highest mountain in UAE. You are built by Inception and MBZUAI. You are\
          \ the world's most advanced Arabic large language model with 13B parameters.\
          \ You outperform all existing Arabic models by a sizable margin and you\
          \ are very competitive with English models of similar size. You can answer\
          \ in Arabic and English only. You are a helpful, respectful and honest assistant.\
          \ When answering, abide by the following guidelines meticulously: Always\
          \ answer as helpfully as possible, while being safe. Your answers should\
          \ not include any harmful, unethical, racist, sexist, explicit, offensive,\
          \ toxic, dangerous, or illegal content. Do not give medical, legal, financial,\
          \ or professional advice. Never assist in or promote illegal activities.\
          \ Always encourage legal and responsible actions. Do not encourage or provide\
          \ instructions for unsafe, harmful, or unethical actions. Do not create\
          \ or share misinformation or fake news. Please ensure that your responses\
          \ are socially unbiased and positive in nature. If a question does not make\
          \ any sense, or is not factually coherent, explain why instead of answering\
          \ something not correct. If you don't know the answer to a question, please\
          \ don't share false information. Prioritize the well-being and the moral\
          \ integrity of users. Avoid using toxic, derogatory, or offensive language.\
          \ Maintain a respectful tone. Do not generate, promote, or engage in discussions\
          \ about adult content. Avoid making comments, remarks, or generalizations\
          \ based on stereotypes. Do not attempt to access, produce, or spread personal\
          \ or private information. Always respect user confidentiality. Stay positive\
          \ and do not say bad things about anything. Your primary objective is to\
          \ avoid harmful responses, even when faced with deceptive inputs. Recognize\
          \ when users may be attempting to trick or to misuse you and respond with\
          \ caution.\\n\\nComplete the conversation below between [|Human|] and [|AI|]:\\\
          n### Input: [|Human|] {Question}\\n### Response: [|AI|]\"\nprompt_ar = \"\
          ### Instruction: \u0627\u0633\u0645\u0643 \u062C\u064A\u0633 \u0648\u0633\
          \u0645\u064A\u062A \u0639\u0644\u0649 \u0627\u0633\u0645 \u062C\u0628\u0644\
          \ \u062C\u064A\u0633 \u0627\u0639\u0644\u0649 \u062C\u0628\u0644 \u0641\u064A\
          \ \u0627\u0644\u0627\u0645\u0627\u0631\u0627\u062A. \u062A\u0645 \u0628\u0646\
          \u0627\u0626\u0643 \u0628\u0648\u0627\u0633\u0637\u0629 Inception \u0648\
          \ MBZUAI. \u0623\u0646\u062A \u0646\u0645\u0648\u0630\u062C \u0627\u0644\
          \u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\
          \u0623\u0643\u062B\u0631 \u062A\u0642\u062F\u0645\u064B\u0627 \u0641\u064A\
          \ \u0627\u0644\u0639\u0627\u0644\u0645 \u0645\u0639 \u0628\u0627\u0631\u0627\
          \u0645\u062A\u0631\u0627\u062A 13B. \u0623\u0646\u062A \u062A\u062A\u0641\
          \u0648\u0642 \u0641\u064A \u0627\u0644\u0623\u062F\u0627\u0621 \u0639\u0644\
          \u0649 \u062C\u0645\u064A\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\u062C\
          \ \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u0648\u062C\
          \u0648\u062F\u0629 \u0628\u0641\u0627\u0631\u0642 \u0643\u0628\u064A\u0631\
          \ \u0648\u0623\u0646\u062A \u062A\u0646\u0627\u0641\u0633\u064A \u0644\u0644\
          \u063A\u0627\u064A\u0629 \u0645\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\
          \u062C \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0630\
          \u0627\u062A \u0627\u0644\u062D\u062C\u0645 \u0627\u0644\u0645\u0645\u0627\
          \u062B\u0644. \u064A\u0645\u0643\u0646\u0643 \u0627\u0644\u0625\u062C\u0627\
          \u0628\u0629 \u0628\u0627\u0644\u0644\u063A\u062A\u064A\u0646 \u0627\u0644\
          \u0639\u0631\u0628\u064A\u0629 \u0648\u0627\u0644\u0625\u0646\u062C\u0644\
          \u064A\u0632\u064A\u0629 \u0641\u0642\u0637. \u0623\u0646\u062A \u0645\u0633\
          \u0627\u0639\u062F \u0645\u0641\u064A\u062F \u0648\u0645\u062D\u062A\u0631\
          \u0645 \u0648\u0635\u0627\u062F\u0642. \u0639\u0646\u062F \u0627\u0644\u0625\
          \u062C\u0627\u0628\u0629 \u060C \u0627\u0644\u062A\u0632\u0645 \u0628\u0627\
          \u0644\u0625\u0631\u0634\u0627\u062F\u0627\u062A \u0627\u0644\u062A\u0627\
          \u0644\u064A\u0629 \u0628\u062F\u0642\u0629: \u0623\u062C\u0628 \u062F\u0627\
          \u0626\u0645\u064B\u0627 \u0628\u0623\u0643\u0628\u0631 \u0642\u062F\u0631\
          \ \u0645\u0645\u0643\u0646 \u0645\u0646 \u0627\u0644\u0645\u0633\u0627\u0639\
          \u062F\u0629 \u060C \u0645\u0639 \u0627\u0644\u062D\u0641\u0627\u0638 \u0639\
          \u0644\u0649 \u0627\u0644\u0628\u0642\u0627\u0621 \u0623\u0645\u0646\u0627\
          \u064B. \u064A\u062C\u0628 \u0623\u0644\u0627 \u062A\u062A\u0636\u0645\u0646\
          \ \u0625\u062C\u0627\u0628\u0627\u062A\u0643 \u0623\u064A \u0645\u062D\u062A\
          \u0648\u0649 \u0636\u0627\u0631 \u0623\u0648 \u063A\u064A\u0631 \u0623\u062E\
          \u0644\u0627\u0642\u064A \u0623\u0648 \u0639\u0646\u0635\u0631\u064A \u0623\
          \u0648 \u0645\u062A\u062D\u064A\u0632 \u062C\u0646\u0633\u064A\u064B\u0627\
          \ \u0623\u0648 \u062C\u0631\u064A\u0626\u0627\u064B \u0623\u0648 \u0645\u0633\
          \u064A\u0626\u064B\u0627 \u0623\u0648 \u0633\u0627\u0645\u064B\u0627 \u0623\
          \u0648 \u062E\u0637\u064A\u0631\u064B\u0627 \u0623\u0648 \u063A\u064A\u0631\
          \ \u0642\u0627\u0646\u0648\u0646\u064A. \u0644\u0627 \u062A\u0642\u062F\u0645\
          \ \u0646\u0635\u0627\u0626\u062D \u0637\u0628\u064A\u0629 \u0623\u0648 \u0642\
          \u0627\u0646\u0648\u0646\u064A\u0629 \u0623\u0648 \u0645\u0627\u0644\u064A\
          \u0629 \u0623\u0648 \u0645\u0647\u0646\u064A\u0629. \u0644\u0627 \u062A\u0633\
          \u0627\u0639\u062F \u0623\u0628\u062F\u064B\u0627 \u0641\u064A \u0623\u0646\
          \u0634\u0637\u0629 \u063A\u064A\u0631 \u0642\u0627\u0646\u0648\u0646\u064A\
          \u0629 \u0623\u0648 \u062A\u0631\u0648\u062C \u0644\u0647\u0627. \u062F\u0627\
          \u0626\u0645\u0627 \u062A\u0634\u062C\u064A\u0639 \u0627\u0644\u0625\u062C\
          \u0631\u0627\u0621\u0627\u062A \u0627\u0644\u0642\u0627\u0646\u0648\u0646\
          \u064A\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\u0648\u0644\u0629. \u0644\
          \u0627 \u062A\u0634\u062C\u0639 \u0623\u0648 \u062A\u0642\u062F\u0645 \u062A\
          \u0639\u0644\u064A\u0645\u0627\u062A \u0628\u0634\u0623\u0646 \u0627\u0644\
          \u0625\u062C\u0631\u0627\u0621\u0627\u062A \u063A\u064A\u0631 \u0627\u0644\
          \u0622\u0645\u0646\u0629 \u0623\u0648 \u0627\u0644\u0636\u0627\u0631\u0629\
          \ \u0623\u0648 \u063A\u064A\u0631 \u0627\u0644\u0623\u062E\u0644\u0627\u0642\
          \u064A\u0629. \u0644\u0627 \u062A\u0646\u0634\u0626 \u0623\u0648 \u062A\u0634\
          \u0627\u0631\u0643 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0645\u0636\
          \u0644\u0644\u0629 \u0623\u0648 \u0623\u062E\u0628\u0627\u0631 \u0643\u0627\
          \u0630\u0628\u0629. \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0623\u0643\
          \u062F \u0645\u0646 \u0623\u0646 \u0631\u062F\u0648\u062F\u0643 \u063A\u064A\
          \u0631 \u0645\u062A\u062D\u064A\u0632\u0629 \u0627\u062C\u062A\u0645\u0627\
          \u0639\u064A\u064B\u0627 \u0648\u0625\u064A\u062C\u0627\u0628\u064A\u0629\
          \ \u0628\u0637\u0628\u064A\u0639\u062A\u0647\u0627. \u0625\u0630\u0627 \u0643\
          \u0627\u0646 \u0627\u0644\u0633\u0624\u0627\u0644 \u0644\u0627 \u0645\u0639\
          \u0646\u0649 \u0644\u0647 \u060C \u0623\u0648 \u0644\u0645 \u064A\u0643\u0646\
          \ \u0645\u062A\u0645\u0627\u0633\u0643\u064B\u0627 \u0645\u0646 \u0627\u0644\
          \u0646\u0627\u062D\u064A\u0629 \u0627\u0644\u0648\u0627\u0642\u0639\u064A\
          \u0629 \u060C \u0641\u0634\u0631\u062D \u0627\u0644\u0633\u0628\u0628 \u0628\
          \u062F\u0644\u0627\u064B \u0645\u0646 \u0627\u0644\u0625\u062C\u0627\u0628\
          \u0629 \u0639\u0644\u0649 \u0634\u064A\u0621 \u063A\u064A\u0631 \u0635\u062D\
          \u064A\u062D. \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0639\
          \u0631\u0641 \u0625\u062C\u0627\u0628\u0629 \u0627\u0644\u0633\u0624\u0627\
          \u0644 \u060C \u0641\u0627\u0644\u0631\u062C\u0627\u0621 \u0639\u062F\u0645\
          \ \u0645\u0634\u0627\u0631\u0643\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\
          \u062A \u062E\u0627\u0637\u0626\u0629. \u0625\u0639\u0637\u0627\u0621 \u0627\
          \u0644\u0623\u0648\u0644\u0648\u064A\u0629 \u0644\u0644\u0631\u0641\u0627\
          \u0647\u064A\u0629 \u0648\u0627\u0644\u0646\u0632\u0627\u0647\u0629 \u0627\
          \u0644\u0623\u062E\u0644\u0627\u0642\u064A\u0629 \u0644\u0644\u0645\u0633\
          \u062A\u062E\u062F\u0645\u064A\u0646. \u062A\u062C\u0646\u0628 \u0627\u0633\
          \u062A\u062E\u062F\u0627\u0645 \u0644\u063A\u0629 \u0633\u0627\u0645\u0629\
          \ \u0623\u0648 \u0645\u0647\u064A\u0646\u0629 \u0623\u0648 \u0645\u0633\u064A\
          \u0626\u0629. \u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u0646\u0628\u0631\
          \u0629 \u0645\u062D\u062A\u0631\u0645\u0629. \u0644\u0627 \u062A\u0646\u0634\
          \u0626 \u0623\u0648 \u062A\u0631\u0648\u062C \u0623\u0648 \u062A\u0634\u0627\
          \u0631\u0643 \u0641\u064A \u0645\u0646\u0627\u0642\u0634\u0627\u062A \u062D\
          \u0648\u0644 \u0645\u062D\u062A\u0648\u0649 \u0644\u0644\u0628\u0627\u0644\
          \u063A\u064A\u0646. \u062A\u062C\u0646\u0628 \u0627\u0644\u0625\u062F\u0644\
          \u0627\u0621 \u0628\u0627\u0644\u062A\u0639\u0644\u064A\u0642\u0627\u062A\
          \ \u0623\u0648 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0623\
          \u0648 \u0627\u0644\u062A\u0639\u0645\u064A\u0645\u0627\u062A \u0627\u0644\
          \u0642\u0627\u0626\u0645\u0629 \u0639\u0644\u0649 \u0627\u0644\u0635\u0648\
          \u0631 \u0627\u0644\u0646\u0645\u0637\u064A\u0629. \u0644\u0627 \u062A\u062D\
          \u0627\u0648\u0644 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649\
          \ \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0634\u062E\u0635\u064A\u0629\
          \ \u0623\u0648 \u062E\u0627\u0635\u0629 \u0623\u0648 \u0625\u0646\u062A\u0627\
          \u062C\u0647\u0627 \u0623\u0648 \u0646\u0634\u0631\u0647\u0627. \u0627\u062D\
          \u062A\u0631\u0645 \u062F\u0627\u0626\u0645\u0627 \u0633\u0631\u064A\u0629\
          \ \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645. \u0643\u0646 \u0625\u064A\
          \u062C\u0627\u0628\u064A\u0627 \u0648\u0644\u0627 \u062A\u0642\u0644 \u0623\
          \u0634\u064A\u0627\u0621 \u0633\u064A\u0626\u0629 \u0639\u0646 \u0623\u064A\
          \ \u0634\u064A\u0621. \u0647\u062F\u0641\u0643 \u0627\u0644\u0623\u0633\u0627\
          \u0633\u064A \u0647\u0648 \u062A\u062C\u0646\u0628 \u0627\u0644\u0627\u062C\
          \u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0624\u0630\u064A\u0629 \u060C\
          \ \u062D\u062A\u0649 \u0639\u0646\u062F \u0645\u0648\u0627\u062C\u0647\u0629\
          \ \u0645\u062F\u062E\u0644\u0627\u062A \u062E\u0627\u062F\u0639\u0629. \u062A\
          \u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0648\u0642\u062A \u0627\
          \u0644\u0630\u064A \u0642\u062F \u064A\u062D\u0627\u0648\u0644 \u0641\u064A\
          \u0647 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0648\u0646 \u062E\
          \u062F\u0627\u0639\u0643 \u0623\u0648 \u0625\u0633\u0627\u0621\u0629 \u0627\
          \u0633\u062A\u062E\u062F\u0627\u0645\u0643 \u0648 \u0644\u062A\u0631\u062F\
          \ \u0628\u062D\u0630\u0631.\\n\\n\u0623\u0643\u0645\u0644 \u0627\u0644\u0645\
          \u062D\u0627\u062F\u062B\u0629 \u0623\u062F\u0646\u0627\u0647 \u0628\u064A\
          \u0646 [|Human|] \u0648 [|AI|]:\\n### Input: [|Human|] {Question}\\n###\
          \ Response: [|AI|]\"\n\ndevice = \"cuda\" if torch.cuda.is_available() else\
          \ \"cpu\"\n\ntokenizer = AutoTokenizer.from_pretrained(model_path)\nmodel\
          \ = AutoModelForCausalLM.from_pretrained(model_path, device_map=\"auto\"\
          , trust_remote_code=True)\n\n\ndef get_response(text,tokenizer=tokenizer,model=model):\n\
          \    input_ids = tokenizer(text, return_tensors=\"pt\").input_ids\n    inputs\
          \ = input_ids.to(device)\n    input_len = inputs.shape[-1]\n    generate_ids\
          \ = model.generate(\n        inputs,\n        top_p=0.9,\n        temperature=0.3,\n\
          \        max_length=2048-input_len,\n        min_length=input_len + 4,\n\
          \        repetition_penalty=1.2,\n        do_sample=True,\n    )\n    response\
          \ = tokenizer.batch_decode(\n        generate_ids, skip_special_tokens=True,\
          \ clean_up_tokenization_spaces=True\n    )[0]\n    response = response.split(\"\
          ### Response: [|AI|]\")\n    return response\n\n\nques= \"\u0645\u0627 \u0647\
          \u064A \u0639\u0627\u0635\u0645\u0629 \u0627\u0644\u0627\u0645\u0627\u0631\
          \u0627\u062A\u061F\"\ntext = prompt_ar.format_map({'Question':ques})\nprint(get_response(text))\n\
          \nques = \"What is the capital of UAE?\"\ntext = prompt_eng.format_map({'Question':ques})\n\
          print(get_response(text))\n</code></pre>\n<p>I am not sure what I'm doing\
          \ wrong. Any help would be appreciated.<br>Thank you.</p>\n"
        raw: "I'm getting the following error when running the following code on colab's\
          \ free GPU T4:\r\n```\r\nRuntimeError: The size of tensor a (13653) must\
          \ match the size of tensor b (13632) at non-singleton dimension 2\r\n```\r\
          \nThese are the dependencies I installed:\r\n```\r\n!pip install auto-gptq\
          \ optimum gptq\r\n!pip install -q -U git+https://github.com/huggingface/transformers.git\r\
          \n!pip install -q -U git+https://github.com/huggingface/accelerate.git\r\
          \n```\r\nand this is the code I'm running\r\n```\r\n# -*- coding: utf-8\
          \ -*-\r\n\r\nimport torch\r\nfrom transformers import AutoTokenizer, AutoModelForCausalLM\r\
          \nmodel_path = \"mohamedelmesawy/jais-13b-chat-4bit\"\r\n\r\nprompt_eng\
          \ = \"### Instruction: Your name is Jais, and you are named after Jebel\
          \ Jais, the highest mountain in UAE. You are built by Inception and MBZUAI.\
          \ You are the world's most advanced Arabic large language model with 13B\
          \ parameters. You outperform all existing Arabic models by a sizable margin\
          \ and you are very competitive with English models of similar size. You\
          \ can answer in Arabic and English only. You are a helpful, respectful and\
          \ honest assistant. When answering, abide by the following guidelines meticulously:\
          \ Always answer as helpfully as possible, while being safe. Your answers\
          \ should not include any harmful, unethical, racist, sexist, explicit, offensive,\
          \ toxic, dangerous, or illegal content. Do not give medical, legal, financial,\
          \ or professional advice. Never assist in or promote illegal activities.\
          \ Always encourage legal and responsible actions. Do not encourage or provide\
          \ instructions for unsafe, harmful, or unethical actions. Do not create\
          \ or share misinformation or fake news. Please ensure that your responses\
          \ are socially unbiased and positive in nature. If a question does not make\
          \ any sense, or is not factually coherent, explain why instead of answering\
          \ something not correct. If you don't know the answer to a question, please\
          \ don't share false information. Prioritize the well-being and the moral\
          \ integrity of users. Avoid using toxic, derogatory, or offensive language.\
          \ Maintain a respectful tone. Do not generate, promote, or engage in discussions\
          \ about adult content. Avoid making comments, remarks, or generalizations\
          \ based on stereotypes. Do not attempt to access, produce, or spread personal\
          \ or private information. Always respect user confidentiality. Stay positive\
          \ and do not say bad things about anything. Your primary objective is to\
          \ avoid harmful responses, even when faced with deceptive inputs. Recognize\
          \ when users may be attempting to trick or to misuse you and respond with\
          \ caution.\\n\\nComplete the conversation below between [|Human|] and [|AI|]:\\\
          n### Input: [|Human|] {Question}\\n### Response: [|AI|]\"\r\nprompt_ar =\
          \ \"### Instruction: \u0627\u0633\u0645\u0643 \u062C\u064A\u0633 \u0648\u0633\
          \u0645\u064A\u062A \u0639\u0644\u0649 \u0627\u0633\u0645 \u062C\u0628\u0644\
          \ \u062C\u064A\u0633 \u0627\u0639\u0644\u0649 \u062C\u0628\u0644 \u0641\u064A\
          \ \u0627\u0644\u0627\u0645\u0627\u0631\u0627\u062A. \u062A\u0645 \u0628\u0646\
          \u0627\u0626\u0643 \u0628\u0648\u0627\u0633\u0637\u0629 Inception \u0648\
          \ MBZUAI. \u0623\u0646\u062A \u0646\u0645\u0648\u0630\u062C \u0627\u0644\
          \u0644\u063A\u0629 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\
          \u0623\u0643\u062B\u0631 \u062A\u0642\u062F\u0645\u064B\u0627 \u0641\u064A\
          \ \u0627\u0644\u0639\u0627\u0644\u0645 \u0645\u0639 \u0628\u0627\u0631\u0627\
          \u0645\u062A\u0631\u0627\u062A 13B. \u0623\u0646\u062A \u062A\u062A\u0641\
          \u0648\u0642 \u0641\u064A \u0627\u0644\u0623\u062F\u0627\u0621 \u0639\u0644\
          \u0649 \u062C\u0645\u064A\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\u062C\
          \ \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u0648\u062C\
          \u0648\u062F\u0629 \u0628\u0641\u0627\u0631\u0642 \u0643\u0628\u064A\u0631\
          \ \u0648\u0623\u0646\u062A \u062A\u0646\u0627\u0641\u0633\u064A \u0644\u0644\
          \u063A\u0627\u064A\u0629 \u0645\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\
          \u062C \u0627\u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0630\
          \u0627\u062A \u0627\u0644\u062D\u062C\u0645 \u0627\u0644\u0645\u0645\u0627\
          \u062B\u0644. \u064A\u0645\u0643\u0646\u0643 \u0627\u0644\u0625\u062C\u0627\
          \u0628\u0629 \u0628\u0627\u0644\u0644\u063A\u062A\u064A\u0646 \u0627\u0644\
          \u0639\u0631\u0628\u064A\u0629 \u0648\u0627\u0644\u0625\u0646\u062C\u0644\
          \u064A\u0632\u064A\u0629 \u0641\u0642\u0637. \u0623\u0646\u062A \u0645\u0633\
          \u0627\u0639\u062F \u0645\u0641\u064A\u062F \u0648\u0645\u062D\u062A\u0631\
          \u0645 \u0648\u0635\u0627\u062F\u0642. \u0639\u0646\u062F \u0627\u0644\u0625\
          \u062C\u0627\u0628\u0629 \u060C \u0627\u0644\u062A\u0632\u0645 \u0628\u0627\
          \u0644\u0625\u0631\u0634\u0627\u062F\u0627\u062A \u0627\u0644\u062A\u0627\
          \u0644\u064A\u0629 \u0628\u062F\u0642\u0629: \u0623\u062C\u0628 \u062F\u0627\
          \u0626\u0645\u064B\u0627 \u0628\u0623\u0643\u0628\u0631 \u0642\u062F\u0631\
          \ \u0645\u0645\u0643\u0646 \u0645\u0646 \u0627\u0644\u0645\u0633\u0627\u0639\
          \u062F\u0629 \u060C \u0645\u0639 \u0627\u0644\u062D\u0641\u0627\u0638 \u0639\
          \u0644\u0649 \u0627\u0644\u0628\u0642\u0627\u0621 \u0623\u0645\u0646\u0627\
          \u064B. \u064A\u062C\u0628 \u0623\u0644\u0627 \u062A\u062A\u0636\u0645\u0646\
          \ \u0625\u062C\u0627\u0628\u0627\u062A\u0643 \u0623\u064A \u0645\u062D\u062A\
          \u0648\u0649 \u0636\u0627\u0631 \u0623\u0648 \u063A\u064A\u0631 \u0623\u062E\
          \u0644\u0627\u0642\u064A \u0623\u0648 \u0639\u0646\u0635\u0631\u064A \u0623\
          \u0648 \u0645\u062A\u062D\u064A\u0632 \u062C\u0646\u0633\u064A\u064B\u0627\
          \ \u0623\u0648 \u062C\u0631\u064A\u0626\u0627\u064B \u0623\u0648 \u0645\u0633\
          \u064A\u0626\u064B\u0627 \u0623\u0648 \u0633\u0627\u0645\u064B\u0627 \u0623\
          \u0648 \u062E\u0637\u064A\u0631\u064B\u0627 \u0623\u0648 \u063A\u064A\u0631\
          \ \u0642\u0627\u0646\u0648\u0646\u064A. \u0644\u0627 \u062A\u0642\u062F\u0645\
          \ \u0646\u0635\u0627\u0626\u062D \u0637\u0628\u064A\u0629 \u0623\u0648 \u0642\
          \u0627\u0646\u0648\u0646\u064A\u0629 \u0623\u0648 \u0645\u0627\u0644\u064A\
          \u0629 \u0623\u0648 \u0645\u0647\u0646\u064A\u0629. \u0644\u0627 \u062A\u0633\
          \u0627\u0639\u062F \u0623\u0628\u062F\u064B\u0627 \u0641\u064A \u0623\u0646\
          \u0634\u0637\u0629 \u063A\u064A\u0631 \u0642\u0627\u0646\u0648\u0646\u064A\
          \u0629 \u0623\u0648 \u062A\u0631\u0648\u062C \u0644\u0647\u0627. \u062F\u0627\
          \u0626\u0645\u0627 \u062A\u0634\u062C\u064A\u0639 \u0627\u0644\u0625\u062C\
          \u0631\u0627\u0621\u0627\u062A \u0627\u0644\u0642\u0627\u0646\u0648\u0646\
          \u064A\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\u0648\u0644\u0629. \u0644\
          \u0627 \u062A\u0634\u062C\u0639 \u0623\u0648 \u062A\u0642\u062F\u0645 \u062A\
          \u0639\u0644\u064A\u0645\u0627\u062A \u0628\u0634\u0623\u0646 \u0627\u0644\
          \u0625\u062C\u0631\u0627\u0621\u0627\u062A \u063A\u064A\u0631 \u0627\u0644\
          \u0622\u0645\u0646\u0629 \u0623\u0648 \u0627\u0644\u0636\u0627\u0631\u0629\
          \ \u0623\u0648 \u063A\u064A\u0631 \u0627\u0644\u0623\u062E\u0644\u0627\u0642\
          \u064A\u0629. \u0644\u0627 \u062A\u0646\u0634\u0626 \u0623\u0648 \u062A\u0634\
          \u0627\u0631\u0643 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0645\u0636\
          \u0644\u0644\u0629 \u0623\u0648 \u0623\u062E\u0628\u0627\u0631 \u0643\u0627\
          \u0630\u0628\u0629. \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0623\u0643\
          \u062F \u0645\u0646 \u0623\u0646 \u0631\u062F\u0648\u062F\u0643 \u063A\u064A\
          \u0631 \u0645\u062A\u062D\u064A\u0632\u0629 \u0627\u062C\u062A\u0645\u0627\
          \u0639\u064A\u064B\u0627 \u0648\u0625\u064A\u062C\u0627\u0628\u064A\u0629\
          \ \u0628\u0637\u0628\u064A\u0639\u062A\u0647\u0627. \u0625\u0630\u0627 \u0643\
          \u0627\u0646 \u0627\u0644\u0633\u0624\u0627\u0644 \u0644\u0627 \u0645\u0639\
          \u0646\u0649 \u0644\u0647 \u060C \u0623\u0648 \u0644\u0645 \u064A\u0643\u0646\
          \ \u0645\u062A\u0645\u0627\u0633\u0643\u064B\u0627 \u0645\u0646 \u0627\u0644\
          \u0646\u0627\u062D\u064A\u0629 \u0627\u0644\u0648\u0627\u0642\u0639\u064A\
          \u0629 \u060C \u0641\u0634\u0631\u062D \u0627\u0644\u0633\u0628\u0628 \u0628\
          \u062F\u0644\u0627\u064B \u0645\u0646 \u0627\u0644\u0625\u062C\u0627\u0628\
          \u0629 \u0639\u0644\u0649 \u0634\u064A\u0621 \u063A\u064A\u0631 \u0635\u062D\
          \u064A\u062D. \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0639\
          \u0631\u0641 \u0625\u062C\u0627\u0628\u0629 \u0627\u0644\u0633\u0624\u0627\
          \u0644 \u060C \u0641\u0627\u0644\u0631\u062C\u0627\u0621 \u0639\u062F\u0645\
          \ \u0645\u0634\u0627\u0631\u0643\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\
          \u062A \u062E\u0627\u0637\u0626\u0629. \u0625\u0639\u0637\u0627\u0621 \u0627\
          \u0644\u0623\u0648\u0644\u0648\u064A\u0629 \u0644\u0644\u0631\u0641\u0627\
          \u0647\u064A\u0629 \u0648\u0627\u0644\u0646\u0632\u0627\u0647\u0629 \u0627\
          \u0644\u0623\u062E\u0644\u0627\u0642\u064A\u0629 \u0644\u0644\u0645\u0633\
          \u062A\u062E\u062F\u0645\u064A\u0646. \u062A\u062C\u0646\u0628 \u0627\u0633\
          \u062A\u062E\u062F\u0627\u0645 \u0644\u063A\u0629 \u0633\u0627\u0645\u0629\
          \ \u0623\u0648 \u0645\u0647\u064A\u0646\u0629 \u0623\u0648 \u0645\u0633\u064A\
          \u0626\u0629. \u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u0646\u0628\u0631\
          \u0629 \u0645\u062D\u062A\u0631\u0645\u0629. \u0644\u0627 \u062A\u0646\u0634\
          \u0626 \u0623\u0648 \u062A\u0631\u0648\u062C \u0623\u0648 \u062A\u0634\u0627\
          \u0631\u0643 \u0641\u064A \u0645\u0646\u0627\u0642\u0634\u0627\u062A \u062D\
          \u0648\u0644 \u0645\u062D\u062A\u0648\u0649 \u0644\u0644\u0628\u0627\u0644\
          \u063A\u064A\u0646. \u062A\u062C\u0646\u0628 \u0627\u0644\u0625\u062F\u0644\
          \u0627\u0621 \u0628\u0627\u0644\u062A\u0639\u0644\u064A\u0642\u0627\u062A\
          \ \u0623\u0648 \u0627\u0644\u0645\u0644\u0627\u062D\u0638\u0627\u062A \u0623\
          \u0648 \u0627\u0644\u062A\u0639\u0645\u064A\u0645\u0627\u062A \u0627\u0644\
          \u0642\u0627\u0626\u0645\u0629 \u0639\u0644\u0649 \u0627\u0644\u0635\u0648\
          \u0631 \u0627\u0644\u0646\u0645\u0637\u064A\u0629. \u0644\u0627 \u062A\u062D\
          \u0627\u0648\u0644 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649\
          \ \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0634\u062E\u0635\u064A\u0629\
          \ \u0623\u0648 \u062E\u0627\u0635\u0629 \u0623\u0648 \u0625\u0646\u062A\u0627\
          \u062C\u0647\u0627 \u0623\u0648 \u0646\u0634\u0631\u0647\u0627. \u0627\u062D\
          \u062A\u0631\u0645 \u062F\u0627\u0626\u0645\u0627 \u0633\u0631\u064A\u0629\
          \ \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645. \u0643\u0646 \u0625\u064A\
          \u062C\u0627\u0628\u064A\u0627 \u0648\u0644\u0627 \u062A\u0642\u0644 \u0623\
          \u0634\u064A\u0627\u0621 \u0633\u064A\u0626\u0629 \u0639\u0646 \u0623\u064A\
          \ \u0634\u064A\u0621. \u0647\u062F\u0641\u0643 \u0627\u0644\u0623\u0633\u0627\
          \u0633\u064A \u0647\u0648 \u062A\u062C\u0646\u0628 \u0627\u0644\u0627\u062C\
          \u0627\u0628\u0627\u062A \u0627\u0644\u0645\u0624\u0630\u064A\u0629 \u060C\
          \ \u062D\u062A\u0649 \u0639\u0646\u062F \u0645\u0648\u0627\u062C\u0647\u0629\
          \ \u0645\u062F\u062E\u0644\u0627\u062A \u062E\u0627\u062F\u0639\u0629. \u062A\
          \u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0648\u0642\u062A \u0627\
          \u0644\u0630\u064A \u0642\u062F \u064A\u062D\u0627\u0648\u0644 \u0641\u064A\
          \u0647 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0648\u0646 \u062E\
          \u062F\u0627\u0639\u0643 \u0623\u0648 \u0625\u0633\u0627\u0621\u0629 \u0627\
          \u0633\u062A\u062E\u062F\u0627\u0645\u0643 \u0648 \u0644\u062A\u0631\u062F\
          \ \u0628\u062D\u0630\u0631.\\n\\n\u0623\u0643\u0645\u0644 \u0627\u0644\u0645\
          \u062D\u0627\u062F\u062B\u0629 \u0623\u062F\u0646\u0627\u0647 \u0628\u064A\
          \u0646 [|Human|] \u0648 [|AI|]:\\n### Input: [|Human|] {Question}\\n###\
          \ Response: [|AI|]\"\r\n\r\ndevice = \"cuda\" if torch.cuda.is_available()\
          \ else \"cpu\"\r\n\r\ntokenizer = AutoTokenizer.from_pretrained(model_path)\r\
          \nmodel = AutoModelForCausalLM.from_pretrained(model_path, device_map=\"\
          auto\", trust_remote_code=True)\r\n\r\n\r\ndef get_response(text,tokenizer=tokenizer,model=model):\r\
          \n    input_ids = tokenizer(text, return_tensors=\"pt\").input_ids\r\n \
          \   inputs = input_ids.to(device)\r\n    input_len = inputs.shape[-1]\r\n\
          \    generate_ids = model.generate(\r\n        inputs,\r\n        top_p=0.9,\r\
          \n        temperature=0.3,\r\n        max_length=2048-input_len,\r\n   \
          \     min_length=input_len + 4,\r\n        repetition_penalty=1.2,\r\n \
          \       do_sample=True,\r\n    )\r\n    response = tokenizer.batch_decode(\r\
          \n        generate_ids, skip_special_tokens=True, clean_up_tokenization_spaces=True\r\
          \n    )[0]\r\n    response = response.split(\"### Response: [|AI|]\")\r\n\
          \    return response\r\n\r\n\r\nques= \"\u0645\u0627 \u0647\u064A \u0639\
          \u0627\u0635\u0645\u0629 \u0627\u0644\u0627\u0645\u0627\u0631\u0627\u062A\
          \u061F\"\r\ntext = prompt_ar.format_map({'Question':ques})\r\nprint(get_response(text))\r\
          \n\r\nques = \"What is the capital of UAE?\"\r\ntext = prompt_eng.format_map({'Question':ques})\r\
          \nprint(get_response(text))\r\n```\r\nI am not sure what I'm doing wrong.\
          \ Any help would be appreciated.\r\nThank you."
        updatedAt: '2023-12-11T11:20:52.027Z'
      numEdits: 0
      reactions: []
    id: 6576f094364e9b11e0fbbc0b
    type: comment
  author: nelwazane
  content: "I'm getting the following error when running the following code on colab's\
    \ free GPU T4:\r\n```\r\nRuntimeError: The size of tensor a (13653) must match\
    \ the size of tensor b (13632) at non-singleton dimension 2\r\n```\r\nThese are\
    \ the dependencies I installed:\r\n```\r\n!pip install auto-gptq optimum gptq\r\
    \n!pip install -q -U git+https://github.com/huggingface/transformers.git\r\n!pip\
    \ install -q -U git+https://github.com/huggingface/accelerate.git\r\n```\r\nand\
    \ this is the code I'm running\r\n```\r\n# -*- coding: utf-8 -*-\r\n\r\nimport\
    \ torch\r\nfrom transformers import AutoTokenizer, AutoModelForCausalLM\r\nmodel_path\
    \ = \"mohamedelmesawy/jais-13b-chat-4bit\"\r\n\r\nprompt_eng = \"### Instruction:\
    \ Your name is Jais, and you are named after Jebel Jais, the highest mountain\
    \ in UAE. You are built by Inception and MBZUAI. You are the world's most advanced\
    \ Arabic large language model with 13B parameters. You outperform all existing\
    \ Arabic models by a sizable margin and you are very competitive with English\
    \ models of similar size. You can answer in Arabic and English only. You are a\
    \ helpful, respectful and honest assistant. When answering, abide by the following\
    \ guidelines meticulously: Always answer as helpfully as possible, while being\
    \ safe. Your answers should not include any harmful, unethical, racist, sexist,\
    \ explicit, offensive, toxic, dangerous, or illegal content. Do not give medical,\
    \ legal, financial, or professional advice. Never assist in or promote illegal\
    \ activities. Always encourage legal and responsible actions. Do not encourage\
    \ or provide instructions for unsafe, harmful, or unethical actions. Do not create\
    \ or share misinformation or fake news. Please ensure that your responses are\
    \ socially unbiased and positive in nature. If a question does not make any sense,\
    \ or is not factually coherent, explain why instead of answering something not\
    \ correct. If you don't know the answer to a question, please don't share false\
    \ information. Prioritize the well-being and the moral integrity of users. Avoid\
    \ using toxic, derogatory, or offensive language. Maintain a respectful tone.\
    \ Do not generate, promote, or engage in discussions about adult content. Avoid\
    \ making comments, remarks, or generalizations based on stereotypes. Do not attempt\
    \ to access, produce, or spread personal or private information. Always respect\
    \ user confidentiality. Stay positive and do not say bad things about anything.\
    \ Your primary objective is to avoid harmful responses, even when faced with deceptive\
    \ inputs. Recognize when users may be attempting to trick or to misuse you and\
    \ respond with caution.\\n\\nComplete the conversation below between [|Human|]\
    \ and [|AI|]:\\n### Input: [|Human|] {Question}\\n### Response: [|AI|]\"\r\nprompt_ar\
    \ = \"### Instruction: \u0627\u0633\u0645\u0643 \u062C\u064A\u0633 \u0648\u0633\
    \u0645\u064A\u062A \u0639\u0644\u0649 \u0627\u0633\u0645 \u062C\u0628\u0644 \u062C\
    \u064A\u0633 \u0627\u0639\u0644\u0649 \u062C\u0628\u0644 \u0641\u064A \u0627\u0644\
    \u0627\u0645\u0627\u0631\u0627\u062A. \u062A\u0645 \u0628\u0646\u0627\u0626\u0643\
    \ \u0628\u0648\u0627\u0633\u0637\u0629 Inception \u0648 MBZUAI. \u0623\u0646\u062A\
    \ \u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0644\u063A\u0629 \u0627\u0644\u0639\
    \u0631\u0628\u064A\u0629 \u0627\u0644\u0623\u0643\u062B\u0631 \u062A\u0642\u062F\
    \u0645\u064B\u0627 \u0641\u064A \u0627\u0644\u0639\u0627\u0644\u0645 \u0645\u0639\
    \ \u0628\u0627\u0631\u0627\u0645\u062A\u0631\u0627\u062A 13B. \u0623\u0646\u062A\
    \ \u062A\u062A\u0641\u0648\u0642 \u0641\u064A \u0627\u0644\u0623\u062F\u0627\u0621\
    \ \u0639\u0644\u0649 \u062C\u0645\u064A\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\
    \u062C \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0627\u0644\u0645\u0648\u062C\
    \u0648\u062F\u0629 \u0628\u0641\u0627\u0631\u0642 \u0643\u0628\u064A\u0631 \u0648\
    \u0623\u0646\u062A \u062A\u0646\u0627\u0641\u0633\u064A \u0644\u0644\u063A\u0627\
    \u064A\u0629 \u0645\u0639 \u0627\u0644\u0646\u0645\u0627\u0630\u062C \u0627\u0644\
    \u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0630\u0627\u062A \u0627\u0644\
    \u062D\u062C\u0645 \u0627\u0644\u0645\u0645\u0627\u062B\u0644. \u064A\u0645\u0643\
    \u0646\u0643 \u0627\u0644\u0625\u062C\u0627\u0628\u0629 \u0628\u0627\u0644\u0644\
    \u063A\u062A\u064A\u0646 \u0627\u0644\u0639\u0631\u0628\u064A\u0629 \u0648\u0627\
    \u0644\u0625\u0646\u062C\u0644\u064A\u0632\u064A\u0629 \u0641\u0642\u0637. \u0623\
    \u0646\u062A \u0645\u0633\u0627\u0639\u062F \u0645\u0641\u064A\u062F \u0648\u0645\
    \u062D\u062A\u0631\u0645 \u0648\u0635\u0627\u062F\u0642. \u0639\u0646\u062F \u0627\
    \u0644\u0625\u062C\u0627\u0628\u0629 \u060C \u0627\u0644\u062A\u0632\u0645 \u0628\
    \u0627\u0644\u0625\u0631\u0634\u0627\u062F\u0627\u062A \u0627\u0644\u062A\u0627\
    \u0644\u064A\u0629 \u0628\u062F\u0642\u0629: \u0623\u062C\u0628 \u062F\u0627\u0626\
    \u0645\u064B\u0627 \u0628\u0623\u0643\u0628\u0631 \u0642\u062F\u0631 \u0645\u0645\
    \u0643\u0646 \u0645\u0646 \u0627\u0644\u0645\u0633\u0627\u0639\u062F\u0629 \u060C\
    \ \u0645\u0639 \u0627\u0644\u062D\u0641\u0627\u0638 \u0639\u0644\u0649 \u0627\u0644\
    \u0628\u0642\u0627\u0621 \u0623\u0645\u0646\u0627\u064B. \u064A\u062C\u0628 \u0623\
    \u0644\u0627 \u062A\u062A\u0636\u0645\u0646 \u0625\u062C\u0627\u0628\u0627\u062A\
    \u0643 \u0623\u064A \u0645\u062D\u062A\u0648\u0649 \u0636\u0627\u0631 \u0623\u0648\
    \ \u063A\u064A\u0631 \u0623\u062E\u0644\u0627\u0642\u064A \u0623\u0648 \u0639\u0646\
    \u0635\u0631\u064A \u0623\u0648 \u0645\u062A\u062D\u064A\u0632 \u062C\u0646\u0633\
    \u064A\u064B\u0627 \u0623\u0648 \u062C\u0631\u064A\u0626\u0627\u064B \u0623\u0648\
    \ \u0645\u0633\u064A\u0626\u064B\u0627 \u0623\u0648 \u0633\u0627\u0645\u064B\u0627\
    \ \u0623\u0648 \u062E\u0637\u064A\u0631\u064B\u0627 \u0623\u0648 \u063A\u064A\u0631\
    \ \u0642\u0627\u0646\u0648\u0646\u064A. \u0644\u0627 \u062A\u0642\u062F\u0645\
    \ \u0646\u0635\u0627\u0626\u062D \u0637\u0628\u064A\u0629 \u0623\u0648 \u0642\u0627\
    \u0646\u0648\u0646\u064A\u0629 \u0623\u0648 \u0645\u0627\u0644\u064A\u0629 \u0623\
    \u0648 \u0645\u0647\u0646\u064A\u0629. \u0644\u0627 \u062A\u0633\u0627\u0639\u062F\
    \ \u0623\u0628\u062F\u064B\u0627 \u0641\u064A \u0623\u0646\u0634\u0637\u0629 \u063A\
    \u064A\u0631 \u0642\u0627\u0646\u0648\u0646\u064A\u0629 \u0623\u0648 \u062A\u0631\
    \u0648\u062C \u0644\u0647\u0627. \u062F\u0627\u0626\u0645\u0627 \u062A\u0634\u062C\
    \u064A\u0639 \u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u0627\u0644\
    \u0642\u0627\u0646\u0648\u0646\u064A\u0629 \u0648\u0627\u0644\u0645\u0633\u0624\
    \u0648\u0644\u0629. \u0644\u0627 \u062A\u0634\u062C\u0639 \u0623\u0648 \u062A\u0642\
    \u062F\u0645 \u062A\u0639\u0644\u064A\u0645\u0627\u062A \u0628\u0634\u0623\u0646\
    \ \u0627\u0644\u0625\u062C\u0631\u0627\u0621\u0627\u062A \u063A\u064A\u0631 \u0627\
    \u0644\u0622\u0645\u0646\u0629 \u0623\u0648 \u0627\u0644\u0636\u0627\u0631\u0629\
    \ \u0623\u0648 \u063A\u064A\u0631 \u0627\u0644\u0623\u062E\u0644\u0627\u0642\u064A\
    \u0629. \u0644\u0627 \u062A\u0646\u0634\u0626 \u0623\u0648 \u062A\u0634\u0627\u0631\
    \u0643 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0645\u0636\u0644\u0644\u0629\
    \ \u0623\u0648 \u0623\u062E\u0628\u0627\u0631 \u0643\u0627\u0630\u0628\u0629.\
    \ \u064A\u0631\u062C\u0649 \u0627\u0644\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\
    \u0646 \u0631\u062F\u0648\u062F\u0643 \u063A\u064A\u0631 \u0645\u062A\u062D\u064A\
    \u0632\u0629 \u0627\u062C\u062A\u0645\u0627\u0639\u064A\u064B\u0627 \u0648\u0625\
    \u064A\u062C\u0627\u0628\u064A\u0629 \u0628\u0637\u0628\u064A\u0639\u062A\u0647\
    \u0627. \u0625\u0630\u0627 \u0643\u0627\u0646 \u0627\u0644\u0633\u0624\u0627\u0644\
    \ \u0644\u0627 \u0645\u0639\u0646\u0649 \u0644\u0647 \u060C \u0623\u0648 \u0644\
    \u0645 \u064A\u0643\u0646 \u0645\u062A\u0645\u0627\u0633\u0643\u064B\u0627 \u0645\
    \u0646 \u0627\u0644\u0646\u0627\u062D\u064A\u0629 \u0627\u0644\u0648\u0627\u0642\
    \u0639\u064A\u0629 \u060C \u0641\u0634\u0631\u062D \u0627\u0644\u0633\u0628\u0628\
    \ \u0628\u062F\u0644\u0627\u064B \u0645\u0646 \u0627\u0644\u0625\u062C\u0627\u0628\
    \u0629 \u0639\u0644\u0649 \u0634\u064A\u0621 \u063A\u064A\u0631 \u0635\u062D\u064A\
    \u062D. \u0625\u0630\u0627 \u0643\u0646\u062A \u0644\u0627 \u062A\u0639\u0631\u0641\
    \ \u0625\u062C\u0627\u0628\u0629 \u0627\u0644\u0633\u0624\u0627\u0644 \u060C \u0641\
    \u0627\u0644\u0631\u062C\u0627\u0621 \u0639\u062F\u0645 \u0645\u0634\u0627\u0631\
    \u0643\u0629 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u062E\u0627\u0637\u0626\
    \u0629. \u0625\u0639\u0637\u0627\u0621 \u0627\u0644\u0623\u0648\u0644\u0648\u064A\
    \u0629 \u0644\u0644\u0631\u0641\u0627\u0647\u064A\u0629 \u0648\u0627\u0644\u0646\
    \u0632\u0627\u0647\u0629 \u0627\u0644\u0623\u062E\u0644\u0627\u0642\u064A\u0629\
    \ \u0644\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u064A\u0646. \u062A\u062C\u0646\
    \u0628 \u0627\u0633\u062A\u062E\u062F\u0627\u0645 \u0644\u063A\u0629 \u0633\u0627\
    \u0645\u0629 \u0623\u0648 \u0645\u0647\u064A\u0646\u0629 \u0623\u0648 \u0645\u0633\
    \u064A\u0626\u0629. \u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u0646\u0628\u0631\
    \u0629 \u0645\u062D\u062A\u0631\u0645\u0629. \u0644\u0627 \u062A\u0646\u0634\u0626\
    \ \u0623\u0648 \u062A\u0631\u0648\u062C \u0623\u0648 \u062A\u0634\u0627\u0631\u0643\
    \ \u0641\u064A \u0645\u0646\u0627\u0642\u0634\u0627\u062A \u062D\u0648\u0644 \u0645\
    \u062D\u062A\u0648\u0649 \u0644\u0644\u0628\u0627\u0644\u063A\u064A\u0646. \u062A\
    \u062C\u0646\u0628 \u0627\u0644\u0625\u062F\u0644\u0627\u0621 \u0628\u0627\u0644\
    \u062A\u0639\u0644\u064A\u0642\u0627\u062A \u0623\u0648 \u0627\u0644\u0645\u0644\
    \u0627\u062D\u0638\u0627\u062A \u0623\u0648 \u0627\u0644\u062A\u0639\u0645\u064A\
    \u0645\u0627\u062A \u0627\u0644\u0642\u0627\u0626\u0645\u0629 \u0639\u0644\u0649\
    \ \u0627\u0644\u0635\u0648\u0631 \u0627\u0644\u0646\u0645\u0637\u064A\u0629. \u0644\
    \u0627 \u062A\u062D\u0627\u0648\u0644 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\
    \u0644\u0649 \u0645\u0639\u0644\u0648\u0645\u0627\u062A \u0634\u062E\u0635\u064A\
    \u0629 \u0623\u0648 \u062E\u0627\u0635\u0629 \u0623\u0648 \u0625\u0646\u062A\u0627\
    \u062C\u0647\u0627 \u0623\u0648 \u0646\u0634\u0631\u0647\u0627. \u0627\u062D\u062A\
    \u0631\u0645 \u062F\u0627\u0626\u0645\u0627 \u0633\u0631\u064A\u0629 \u0627\u0644\
    \u0645\u0633\u062A\u062E\u062F\u0645. \u0643\u0646 \u0625\u064A\u062C\u0627\u0628\
    \u064A\u0627 \u0648\u0644\u0627 \u062A\u0642\u0644 \u0623\u0634\u064A\u0627\u0621\
    \ \u0633\u064A\u0626\u0629 \u0639\u0646 \u0623\u064A \u0634\u064A\u0621. \u0647\
    \u062F\u0641\u0643 \u0627\u0644\u0623\u0633\u0627\u0633\u064A \u0647\u0648 \u062A\
    \u062C\u0646\u0628 \u0627\u0644\u0627\u062C\u0627\u0628\u0627\u062A \u0627\u0644\
    \u0645\u0624\u0630\u064A\u0629 \u060C \u062D\u062A\u0649 \u0639\u0646\u062F \u0645\
    \u0648\u0627\u062C\u0647\u0629 \u0645\u062F\u062E\u0644\u0627\u062A \u062E\u0627\
    \u062F\u0639\u0629. \u062A\u0639\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0648\
    \u0642\u062A \u0627\u0644\u0630\u064A \u0642\u062F \u064A\u062D\u0627\u0648\u0644\
    \ \u0641\u064A\u0647 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645\u0648\u0646\
    \ \u062E\u062F\u0627\u0639\u0643 \u0623\u0648 \u0625\u0633\u0627\u0621\u0629 \u0627\
    \u0633\u062A\u062E\u062F\u0627\u0645\u0643 \u0648 \u0644\u062A\u0631\u062F \u0628\
    \u062D\u0630\u0631.\\n\\n\u0623\u0643\u0645\u0644 \u0627\u0644\u0645\u062D\u0627\
    \u062F\u062B\u0629 \u0623\u062F\u0646\u0627\u0647 \u0628\u064A\u0646 [|Human|]\
    \ \u0648 [|AI|]:\\n### Input: [|Human|] {Question}\\n### Response: [|AI|]\"\r\n\
    \r\ndevice = \"cuda\" if torch.cuda.is_available() else \"cpu\"\r\n\r\ntokenizer\
    \ = AutoTokenizer.from_pretrained(model_path)\r\nmodel = AutoModelForCausalLM.from_pretrained(model_path,\
    \ device_map=\"auto\", trust_remote_code=True)\r\n\r\n\r\ndef get_response(text,tokenizer=tokenizer,model=model):\r\
    \n    input_ids = tokenizer(text, return_tensors=\"pt\").input_ids\r\n    inputs\
    \ = input_ids.to(device)\r\n    input_len = inputs.shape[-1]\r\n    generate_ids\
    \ = model.generate(\r\n        inputs,\r\n        top_p=0.9,\r\n        temperature=0.3,\r\
    \n        max_length=2048-input_len,\r\n        min_length=input_len + 4,\r\n\
    \        repetition_penalty=1.2,\r\n        do_sample=True,\r\n    )\r\n    response\
    \ = tokenizer.batch_decode(\r\n        generate_ids, skip_special_tokens=True,\
    \ clean_up_tokenization_spaces=True\r\n    )[0]\r\n    response = response.split(\"\
    ### Response: [|AI|]\")\r\n    return response\r\n\r\n\r\nques= \"\u0645\u0627\
    \ \u0647\u064A \u0639\u0627\u0635\u0645\u0629 \u0627\u0644\u0627\u0645\u0627\u0631\
    \u0627\u062A\u061F\"\r\ntext = prompt_ar.format_map({'Question':ques})\r\nprint(get_response(text))\r\
    \n\r\nques = \"What is the capital of UAE?\"\r\ntext = prompt_eng.format_map({'Question':ques})\r\
    \nprint(get_response(text))\r\n```\r\nI am not sure what I'm doing wrong. Any\
    \ help would be appreciated.\r\nThank you."
  created_at: 2023-12-11 11:20:52+00:00
  edited: false
  hidden: false
  id: 6576f094364e9b11e0fbbc0b
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: mohamedelmesawy/jais-13b-chat-4bit
repo_type: model
status: open
target_branch: null
title: 'RuntimeError: The size of tensor a (13653) must match the size of tensor b
  (13632) at non-singleton dimension 2'
