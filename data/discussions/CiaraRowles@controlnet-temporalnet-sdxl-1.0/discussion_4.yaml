!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Softology
conflicting_files: null
created_at: 2023-09-03 02:38:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T03:38:20.000Z'
    data:
      edited: true
      editors:
      - Softology
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8228746652603149
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
          fullname: Jason Rampe
          isHf: false
          isPro: false
          name: Softology
          type: user
        html: '<p>You say "Also, I highly recommend you use this in conjunction with
          the hed model, the settings are already in the script."</p>

          <p>Is all that needs changing is the model on the line controlnet2_path
          = "diffusers/controlnet-canny-sdxl-1.0" ?</p>

          <p>I tried changing it to controlnet2_path = "lllyasviel/sd-controlnet-hed"
          and I now get</p>

          <p>File "D:\controlnet-temporalnet-sdxl-1.0\venv\lib\site-packages\torch\nn\modules\linear.py",
          line 114, in forward<br>return F.linear(input, self.weight, self.bias)<br>RuntimeError:
          mat1 and mat2 shapes cannot be multiplied (154x2048 and 768x320)</p>

          <p>Which model should I use and are there any other changes needed?</p>

          <p>Using the provided temporalvideo.py with canny gives even more flickering
          output videos with faded out colors than the original. Is this normal, or
          is there an updated version of the script?<br>Here is a source video created
          with SDXL and the processed result if that helps.<br><a rel="nofollow" href="https://softology.pro/Roses.mp4">https://softology.pro/Roses.mp4</a><br><a
          rel="nofollow" href="https://softology.pro/RosesProcessed.mp4">https://softology.pro/RosesProcessed.mp4</a></p>

          <p>Thanks.</p>

          '
        raw: 'You say "Also, I highly recommend you use this in conjunction with the
          hed model, the settings are already in the script."


          Is all that needs changing is the model on the line controlnet2_path = "diffusers/controlnet-canny-sdxl-1.0"
          ?


          I tried changing it to controlnet2_path = "lllyasviel/sd-controlnet-hed"
          and I now get


          File "D:\controlnet-temporalnet-sdxl-1.0\venv\lib\site-packages\torch\nn\modules\linear.py",
          line 114, in forward

          return F.linear(input, self.weight, self.bias)

          RuntimeError: mat1 and mat2 shapes cannot be multiplied (154x2048 and 768x320)


          Which model should I use and are there any other changes needed?


          Using the provided temporalvideo.py with canny gives even more flickering
          output videos with faded out colors than the original. Is this normal, or
          is there an updated version of the script?

          Here is a source video created with SDXL and the processed result if that
          helps.

          https://softology.pro/Roses.mp4

          https://softology.pro/RosesProcessed.mp4


          Thanks.'
        updatedAt: '2023-09-03T06:37:21.958Z'
      numEdits: 2
      reactions: []
    id: 64f3fface1237c87ffa40c8c
    type: comment
  author: Softology
  content: 'You say "Also, I highly recommend you use this in conjunction with the
    hed model, the settings are already in the script."


    Is all that needs changing is the model on the line controlnet2_path = "diffusers/controlnet-canny-sdxl-1.0"
    ?


    I tried changing it to controlnet2_path = "lllyasviel/sd-controlnet-hed" and I
    now get


    File "D:\controlnet-temporalnet-sdxl-1.0\venv\lib\site-packages\torch\nn\modules\linear.py",
    line 114, in forward

    return F.linear(input, self.weight, self.bias)

    RuntimeError: mat1 and mat2 shapes cannot be multiplied (154x2048 and 768x320)


    Which model should I use and are there any other changes needed?


    Using the provided temporalvideo.py with canny gives even more flickering output
    videos with faded out colors than the original. Is this normal, or is there an
    updated version of the script?

    Here is a source video created with SDXL and the processed result if that helps.

    https://softology.pro/Roses.mp4

    https://softology.pro/RosesProcessed.mp4


    Thanks.'
  created_at: 2023-09-03 02:38:20+00:00
  edited: true
  hidden: false
  id: 64f3fface1237c87ffa40c8c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T05:06:23.000Z'
    data:
      from: '"hen model"?'
      to: '"hed model"?'
    id: 64f4144f106ba97755c3b6f6
    type: title-change
  author: Softology
  created_at: 2023-09-03 04:06:23+00:00
  id: 64f4144f106ba97755c3b6f6
  new_title: '"hed model"?'
  old_title: '"hen model"?'
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
      fullname: Ciara
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: CiaraRowles
      type: user
    createdAt: '2023-09-03T09:10:18.000Z'
    data:
      edited: false
      editors:
      - CiaraRowles
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9439128041267395
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
          fullname: Ciara
          isHf: false
          isPro: false
          name: CiaraRowles
          type: user
        html: '<p>Ah, that''s my bad i meant canny for the hed</p>

          <p>The flickering is normal, the original temporalnet model did the same,
          what you need is to run the controlnet with image2image mode at 0.5 denoise,
          it wasn''t out at the time so the provided script is essentially a placeholder
          that runs the video transformation at a denoise of 1 until that''s all going.</p>

          '
        raw: 'Ah, that''s my bad i meant canny for the hed


          The flickering is normal, the original temporalnet model did the same, what
          you need is to run the controlnet with image2image mode at 0.5 denoise,
          it wasn''t out at the time so the provided script is essentially a placeholder
          that runs the video transformation at a denoise of 1 until that''s all going.'
        updatedAt: '2023-09-03T09:10:18.734Z'
      numEdits: 0
      reactions: []
    id: 64f44d7aa3c62878f796b854
    type: comment
  author: CiaraRowles
  content: 'Ah, that''s my bad i meant canny for the hed


    The flickering is normal, the original temporalnet model did the same, what you
    need is to run the controlnet with image2image mode at 0.5 denoise, it wasn''t
    out at the time so the provided script is essentially a placeholder that runs
    the video transformation at a denoise of 1 until that''s all going.'
  created_at: 2023-09-03 08:10:18+00:00
  edited: false
  hidden: false
  id: 64f44d7aa3c62878f796b854
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T09:21:16.000Z'
    data:
      edited: false
      editors:
      - Softology
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9181996583938599
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
          fullname: Jason Rampe
          isHf: false
          isPro: false
          name: Softology
          type: user
        html: '<p>OK, thanks.  I was hoping hed would be some miracle fix that stopped
          the flickering.  How do I add the 0.5 denoise parameter to the script?</p>

          '
        raw: OK, thanks.  I was hoping hed would be some miracle fix that stopped
          the flickering.  How do I add the 0.5 denoise parameter to the script?
        updatedAt: '2023-09-03T09:21:16.444Z'
      numEdits: 0
      reactions: []
    id: 64f4500c8db247808c1ee128
    type: comment
  author: Softology
  content: OK, thanks.  I was hoping hed would be some miracle fix that stopped the
    flickering.  How do I add the 0.5 denoise parameter to the script?
  created_at: 2023-09-03 08:21:16+00:00
  edited: false
  hidden: false
  id: 64f4500c8db247808c1ee128
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
      fullname: Ciara
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: CiaraRowles
      type: user
    createdAt: '2023-09-03T09:50:01.000Z'
    data:
      edited: false
      editors:
      - CiaraRowles
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.859404444694519
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
          fullname: Ciara
          isHf: false
          isPro: false
          name: CiaraRowles
          type: user
        html: '<p>You''ll want to modify the script you''re using to use the StableDiffusionXLControlNetImg2ImgPipeline
          merged here <a rel="nofollow" href="https://github.com/huggingface/diffusers/pull/4592">https://github.com/huggingface/diffusers/pull/4592</a></p>

          <p>i''m gonna implement it myself on the provided script now knowing it
          has been released.</p>

          '
        raw: 'You''ll want to modify the script you''re using to use the StableDiffusionXLControlNetImg2ImgPipeline
          merged here https://github.com/huggingface/diffusers/pull/4592


          i''m gonna implement it myself on the provided script now knowing it has
          been released.'
        updatedAt: '2023-09-03T09:50:01.528Z'
      numEdits: 0
      reactions: []
    id: 64f456c9cfb225384def3238
    type: comment
  author: CiaraRowles
  content: 'You''ll want to modify the script you''re using to use the StableDiffusionXLControlNetImg2ImgPipeline
    merged here https://github.com/huggingface/diffusers/pull/4592


    i''m gonna implement it myself on the provided script now knowing it has been
    released.'
  created_at: 2023-09-03 08:50:01+00:00
  edited: false
  hidden: false
  id: 64f456c9cfb225384def3238
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T10:11:12.000Z'
    data:
      edited: false
      editors:
      - Softology
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9370583295822144
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
          fullname: Jason Rampe
          isHf: false
          isPro: false
          name: Softology
          type: user
        html: '<p>OK, if you are going to modify your example code, ie<br><a href="https://huggingface.co/CiaraRowles/controlnet-temporalnet-sdxl-1.0/blob/main/runtemporalnetxl.py">https://huggingface.co/CiaraRowles/controlnet-temporalnet-sdxl-1.0/blob/main/runtemporalnetxl.py</a><br>I
          will wait for that.  I really don''t know what I am doing with the ControlNets
          yet.</p>

          <p>I am just really interested to get some of those smooth results like
          you showed on twitter tagged "TemporalNet + Hed"<br><a rel="nofollow" href="https://twitter.com/CiaraRowles1/status/1637486561917906944">https://twitter.com/CiaraRowles1/status/1637486561917906944</a></p>

          <p>Actually looking at that tweet, do you think this is even going to help
          in my situation?  I have movies created with SDXL frames (like the rose
          movie I linked) that have minor to major flickering.  I was interested in
          seeing if your script could smooth out the flickering, but maybe it is not
          even suitable for this task?</p>

          '
        raw: 'OK, if you are going to modify your example code, ie

          https://huggingface.co/CiaraRowles/controlnet-temporalnet-sdxl-1.0/blob/main/runtemporalnetxl.py

          I will wait for that.  I really don''t know what I am doing with the ControlNets
          yet.


          I am just really interested to get some of those smooth results like you
          showed on twitter tagged "TemporalNet + Hed"

          https://twitter.com/CiaraRowles1/status/1637486561917906944


          Actually looking at that tweet, do you think this is even going to help
          in my situation?  I have movies created with SDXL frames (like the rose
          movie I linked) that have minor to major flickering.  I was interested in
          seeing if your script could smooth out the flickering, but maybe it is not
          even suitable for this task?'
        updatedAt: '2023-09-03T10:11:12.831Z'
      numEdits: 0
      reactions: []
    id: 64f45bc0e0d4cae0dbde2be0
    type: comment
  author: Softology
  content: 'OK, if you are going to modify your example code, ie

    https://huggingface.co/CiaraRowles/controlnet-temporalnet-sdxl-1.0/blob/main/runtemporalnetxl.py

    I will wait for that.  I really don''t know what I am doing with the ControlNets
    yet.


    I am just really interested to get some of those smooth results like you showed
    on twitter tagged "TemporalNet + Hed"

    https://twitter.com/CiaraRowles1/status/1637486561917906944


    Actually looking at that tweet, do you think this is even going to help in my
    situation?  I have movies created with SDXL frames (like the rose movie I linked)
    that have minor to major flickering.  I was interested in seeing if your script
    could smooth out the flickering, but maybe it is not even suitable for this task?'
  created_at: 2023-09-03 09:11:12+00:00
  edited: false
  hidden: false
  id: 64f45bc0e0d4cae0dbde2be0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
      fullname: Ciara
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: CiaraRowles
      type: user
    createdAt: '2023-09-03T10:23:16.000Z'
    data:
      edited: false
      editors:
      - CiaraRowles
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8717514872550964
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63357214eb6132ca653020e7/A_imoyFDx30wgi0guG_s8.png?w=200&h=200&f=face
          fullname: Ciara
          isHf: false
          isPro: false
          name: CiaraRowles
          type: user
        html: '<p>Oh for that you''ll want temporalnet (non xl), this is the one for
          stable diffusion xl, the tooling for sd xl controlnets are still in progress
          hence the issues you''ve run into.</p>

          <p>You can find that here <a href="https://huggingface.co/CiaraRowles/TemporalNet/tree/main">https://huggingface.co/CiaraRowles/TemporalNet/tree/main</a></p>

          <p>just drop the dif weights into your automatic1111 UI controlnet weights
          folder and run it with loopback, like this person did: <a rel="nofollow"
          href="https://www.youtube.com/watch?v=Er1sz7xVmc8&amp;ab_channel=KoreAI">https://www.youtube.com/watch?v=Er1sz7xVmc8&amp;ab_channel=KoreAI</a></p>

          '
        raw: 'Oh for that you''ll want temporalnet (non xl), this is the one for stable
          diffusion xl, the tooling for sd xl controlnets are still in progress hence
          the issues you''ve run into.


          You can find that here https://huggingface.co/CiaraRowles/TemporalNet/tree/main


          just drop the dif weights into your automatic1111 UI controlnet weights
          folder and run it with loopback, like this person did: https://www.youtube.com/watch?v=Er1sz7xVmc8&ab_channel=KoreAI'
        updatedAt: '2023-09-03T10:23:16.261Z'
      numEdits: 0
      reactions: []
    id: 64f45e949e26f30d73f88744
    type: comment
  author: CiaraRowles
  content: 'Oh for that you''ll want temporalnet (non xl), this is the one for stable
    diffusion xl, the tooling for sd xl controlnets are still in progress hence the
    issues you''ve run into.


    You can find that here https://huggingface.co/CiaraRowles/TemporalNet/tree/main


    just drop the dif weights into your automatic1111 UI controlnet weights folder
    and run it with loopback, like this person did: https://www.youtube.com/watch?v=Er1sz7xVmc8&ab_channel=KoreAI'
  created_at: 2023-09-03 09:23:16+00:00
  edited: false
  hidden: false
  id: 64f45e949e26f30d73f88744
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T10:31:34.000Z'
    data:
      edited: false
      editors:
      - Softology
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9498506784439087
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
          fullname: Jason Rampe
          isHf: false
          isPro: false
          name: Softology
          type: user
        html: '<p>I am using SDXL though to create that movie and frames.  I am trying
          to get this working outside automatic or other UIs, that is what brought
          me to your stand alone script.</p>

          '
        raw: I am using SDXL though to create that movie and frames.  I am trying
          to get this working outside automatic or other UIs, that is what brought
          me to your stand alone script.
        updatedAt: '2023-09-03T10:31:34.353Z'
      numEdits: 0
      reactions: []
    id: 64f4608686eae50c4a8cf18b
    type: comment
  author: Softology
  content: I am using SDXL though to create that movie and frames.  I am trying to
    get this working outside automatic or other UIs, that is what brought me to your
    stand alone script.
  created_at: 2023-09-03 09:31:34+00:00
  edited: false
  hidden: false
  id: 64f4608686eae50c4a8cf18b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/d3cb5920a046bbc259f3607992eedb69.svg
      fullname: Jason Rampe
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Softology
      type: user
    createdAt: '2023-09-03T23:24:24.000Z'
    data:
      status: closed
    id: 64f515a80bb0a56d6641a252
    type: status-change
  author: Softology
  created_at: 2023-09-03 22:24:24+00:00
  id: 64f515a80bb0a56d6641a252
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: CiaraRowles/controlnet-temporalnet-sdxl-1.0
repo_type: model
status: closed
target_branch: null
title: '"hed model"?'
