!!python/object:huggingface_hub.community.DiscussionWithDetails
author: szhf
conflicting_files: null
created_at: 2023-06-09 03:58:53+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7f692e65b59b05f159ce2fe7ebc7bec0.svg
      fullname: SunZhifan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: szhf
      type: user
    createdAt: '2023-06-09T04:58:53.000Z'
    data:
      edited: false
      editors:
      - szhf
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5167839527130127
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7f692e65b59b05f159ce2fe7ebc7bec0.svg
          fullname: SunZhifan
          isHf: false
          isPro: false
          name: szhf
          type: user
        html: '<h2 id="i-ran-the-example-codes">I ran the example codes: </h2>

          <p>from transformers import AutoTokenizer, MT5ForConditionalGeneration<br>tokenizer
          = AutoTokenizer.from_pretrained("mt5-small")<br>model = MT5ForConditionalGeneration.from_pretrained("mt5-small")</p>

          <h1 id="training">training</h1>

          <p>input_ids = tokenizer("The  walks in  park", return_tensors="pt").input_ids<br>labels
          = tokenizer(" cute dog  the ", return_tensors="pt").input_ids<br>outputs
          = model(input_ids=input_ids, labels=labels)<br>loss = outputs.loss<br>logits
          = outputs.logits</p>

          <h1 id="inference">inference</h1>

          <p>input_ids = tokenizer(<br>    "summarize: studies have shown that owning
          a dog is good for you", return_tensors="pt"<br>).input_ids  # Batch size
          1<br>outputs = model.generate(input_ids)<br>print(tokenizer.decode(outputs[0],
          skip_special_tokens=True))</p>

          <h1 id="studies-have-shown-that-owning-a-dog-is-good-for-you">studies have
          shown that owning a dog is good for you.</h1>

          <hr>

          <p>But got something like this:<br>  </p>

          <p>Is this an expected outcome? </p>

          '
        raw: "I ran the example codes: \r\n-------\r\nfrom transformers import AutoTokenizer,\
          \ MT5ForConditionalGeneration\r\ntokenizer = AutoTokenizer.from_pretrained(\"\
          mt5-small\")\r\nmodel = MT5ForConditionalGeneration.from_pretrained(\"mt5-small\"\
          )\r\n\r\n# training\r\ninput_ids = tokenizer(\"The <extra_id_0> walks in\
          \ <extra_id_1> park\", return_tensors=\"pt\").input_ids\r\nlabels = tokenizer(\"\
          <extra_id_0> cute dog <extra_id_1> the <extra_id_2>\", return_tensors=\"\
          pt\").input_ids\r\noutputs = model(input_ids=input_ids, labels=labels)\r\
          \nloss = outputs.loss\r\nlogits = outputs.logits\r\n\r\n# inference\r\n\
          input_ids = tokenizer(\r\n    \"summarize: studies have shown that owning\
          \ a dog is good for you\", return_tensors=\"pt\"\r\n).input_ids  # Batch\
          \ size 1\r\noutputs = model.generate(input_ids)\r\nprint(tokenizer.decode(outputs[0],\
          \ skip_special_tokens=True))\r\n# studies have shown that owning a dog is\
          \ good for you.\r\n------\r\nBut got something like this: \r\n<extra_id_0>\
          \  \r\n\r\nIs this an expected outcome? \r\n"
        updatedAt: '2023-06-09T04:58:53.287Z'
      numEdits: 0
      reactions: []
    id: 6482b18d93362a0d12198072
    type: comment
  author: szhf
  content: "I ran the example codes: \r\n-------\r\nfrom transformers import AutoTokenizer,\
    \ MT5ForConditionalGeneration\r\ntokenizer = AutoTokenizer.from_pretrained(\"\
    mt5-small\")\r\nmodel = MT5ForConditionalGeneration.from_pretrained(\"mt5-small\"\
    )\r\n\r\n# training\r\ninput_ids = tokenizer(\"The <extra_id_0> walks in <extra_id_1>\
    \ park\", return_tensors=\"pt\").input_ids\r\nlabels = tokenizer(\"<extra_id_0>\
    \ cute dog <extra_id_1> the <extra_id_2>\", return_tensors=\"pt\").input_ids\r\
    \noutputs = model(input_ids=input_ids, labels=labels)\r\nloss = outputs.loss\r\
    \nlogits = outputs.logits\r\n\r\n# inference\r\ninput_ids = tokenizer(\r\n   \
    \ \"summarize: studies have shown that owning a dog is good for you\", return_tensors=\"\
    pt\"\r\n).input_ids  # Batch size 1\r\noutputs = model.generate(input_ids)\r\n\
    print(tokenizer.decode(outputs[0], skip_special_tokens=True))\r\n# studies have\
    \ shown that owning a dog is good for you.\r\n------\r\nBut got something like\
    \ this: \r\n<extra_id_0>  \r\n\r\nIs this an expected outcome? \r\n"
  created_at: 2023-06-09 03:58:53+00:00
  edited: false
  hidden: false
  id: 6482b18d93362a0d12198072
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c33eb33c292279d1d44c36328a8eeb68.svg
      fullname: fanmin meng
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mfmmm
      type: user
    createdAt: '2023-07-17T03:36:59.000Z'
    data:
      edited: false
      editors:
      - mfmmm
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.751566469669342
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c33eb33c292279d1d44c36328a8eeb68.svg
          fullname: fanmin meng
          isHf: false
          isPro: false
          name: mfmmm
          type: user
        html: '<p>I can''t see the result you got.<br>And I got "401 Client Error:
          Unauthorized for url: <a href="https://huggingface.co/mt5-small/resolve/main/config.json&quot;">https://huggingface.co/mt5-small/resolve/main/config.json"</a>
          error when import pretrained model. </p>

          '
        raw: 'I can''t see the result you got.

          And I got "401 Client Error: Unauthorized for url: https://huggingface.co/mt5-small/resolve/main/config.json"
          error when import pretrained model. '
        updatedAt: '2023-07-17T03:36:59.995Z'
      numEdits: 0
      reactions: []
    id: 64b4b75b26893eb6a6073ee6
    type: comment
  author: mfmmm
  content: 'I can''t see the result you got.

    And I got "401 Client Error: Unauthorized for url: https://huggingface.co/mt5-small/resolve/main/config.json"
    error when import pretrained model. '
  created_at: 2023-07-17 02:36:59+00:00
  edited: false
  hidden: false
  id: 64b4b75b26893eb6a6073ee6
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: google/mt5-small
repo_type: model
status: open
target_branch: null
title: 'wrong output? '
