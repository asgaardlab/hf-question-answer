!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mladams922
conflicting_files: null
created_at: 2022-09-05 14:49:39+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1e802393d7f08b9d752d5af9a6b5fd8d.svg
      fullname: Matthew Adams
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mladams922
      type: user
    createdAt: '2022-09-05T15:49:39.000Z'
    data:
      edited: false
      editors:
      - mladams922
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1e802393d7f08b9d752d5af9a6b5fd8d.svg
          fullname: Matthew Adams
          isHf: false
          isPro: false
          name: mladams922
          type: user
        html: '<p>I''m getting the runtime error Unable to find a valid cuDNN algorithm
          to run convolution and I don''t know how to solve it.  Has anyone seen this
          or have any understanding of where it''s coming from that I could resolve
          the issue?</p>

          <p>Thanks, here''s the traceback:<br>Traceback (most recent call last):<br>  File
          "scripts/txt2img.py", line 344, in <br>    main()<br>  File "scripts/txt2img.py",
          line 295, in main<br>    samples_ddim, _ = sampler.sample(S=opt.ddim_steps,<br>  File
          "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\autograd\grad_mode.py",
          line 27, in decorate_context<br>    return func(*args, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\models\diffusion\ddim.py",
          line 96, in sample<br>    samples, intermediates = self.ddim_sampling(conditioning,
          size,<br>  File "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\autograd\grad_mode.py",
          line 27, in decorate_context<br>    return func(*args, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\models\diffusion\ddim.py",
          line 149, in ddim_sampling<br>    outs = self.p_sample_ddim(img, cond, ts,
          index=index, use_original_steps=ddim_use_original_steps,<br>  File "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\autograd\grad_mode.py",
          line 27, in decorate_context<br>    return func(*args, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\models\diffusion\ddim.py",
          line 177, in p_sample_ddim<br>    e_t_uncond, e_t = self.model.apply_model(x_in,
          t_in, c_in).chunk(2)<br>  File "c:\stable-diffusion\stable-diffusion-main\ldm\models\diffusion\ddpm.py",
          line 987, in apply_model<br>    x_recon = self.model(x_noisy, t, **cond)<br>  File
          "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\module.py",
          line 1110, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\models\diffusion\ddpm.py",
          line 1410, in forward<br>    out = self.diffusion_model(x, t, context=cc)<br>  File
          "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\module.py",
          line 1110, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\modules\diffusionmodules\openaimodel.py",
          line 732, in forward<br>    h = module(h, emb, context)<br>  File "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\module.py",
          line 1110, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "c:\stable-diffusion\stable-diffusion-main\ldm\modules\diffusionmodules\openaimodel.py",
          line 87, in forward<br>    x = layer(x)<br>  File "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\module.py",
          line 1110, in _call_impl<br>    return forward_call(*input, **kwargs)<br>  File
          "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\conv.py",
          line 447, in forward<br>    return self._conv_forward(input, self.weight,
          self.bias)<br>  File "C:\Users\Matthew.conda\envs\ldm\lib\site-packages\torch\nn\modules\conv.py",
          line 443, in _conv_forward<br>    return F.conv2d(input, weight, bias, self.stride,<br>RuntimeError:
          Unable to find a valid cuDNN algorithm to run convolution</p>

          '
        raw: "I'm getting the runtime error Unable to find a valid cuDNN algorithm\
          \ to run convolution and I don't know how to solve it.  Has anyone seen\
          \ this or have any understanding of where it's coming from that I could\
          \ resolve the issue?\r\n\r\nThanks, here's the traceback:\r\nTraceback (most\
          \ recent call last):\r\n  File \"scripts/txt2img.py\", line 344, in <module>\r\
          \n    main()\r\n  File \"scripts/txt2img.py\", line 295, in main\r\n   \
          \ samples_ddim, _ = sampler.sample(S=opt.ddim_steps,\r\n  File \"C:\\Users\\\
          Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\autograd\\grad_mode.py\"\
          , line 27, in decorate_context\r\n    return func(*args, **kwargs)\r\n \
          \ File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\models\\diffusion\\\
          ddim.py\", line 96, in sample\r\n    samples, intermediates = self.ddim_sampling(conditioning,\
          \ size,\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
          torch\\autograd\\grad_mode.py\", line 27, in decorate_context\r\n    return\
          \ func(*args, **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\\
          ldm\\models\\diffusion\\ddim.py\", line 149, in ddim_sampling\r\n    outs\
          \ = self.p_sample_ddim(img, cond, ts, index=index, use_original_steps=ddim_use_original_steps,\r\
          \n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\\
          autograd\\grad_mode.py\", line 27, in decorate_context\r\n    return func(*args,\
          \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\\
          models\\diffusion\\ddim.py\", line 177, in p_sample_ddim\r\n    e_t_uncond,\
          \ e_t = self.model.apply_model(x_in, t_in, c_in).chunk(2)\r\n  File \"c:\\\
          stable-diffusion\\stable-diffusion-main\\ldm\\models\\diffusion\\ddpm.py\"\
          , line 987, in apply_model\r\n    x_recon = self.model(x_noisy, t, **cond)\r\
          \n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\\
          nn\\modules\\module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
          \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\\
          models\\diffusion\\ddpm.py\", line 1410, in forward\r\n    out = self.diffusion_model(x,\
          \ t, context=cc)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\\
          site-packages\\torch\\nn\\modules\\module.py\", line 1110, in _call_impl\r\
          \n    return forward_call(*input, **kwargs)\r\n  File \"c:\\stable-diffusion\\\
          stable-diffusion-main\\ldm\\modules\\diffusionmodules\\openaimodel.py\"\
          , line 732, in forward\r\n    h = module(h, emb, context)\r\n  File \"C:\\\
          Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\nn\\modules\\\
          module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
          \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\\
          modules\\diffusionmodules\\openaimodel.py\", line 87, in forward\r\n   \
          \ x = layer(x)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\\
          site-packages\\torch\\nn\\modules\\module.py\", line 1110, in _call_impl\r\
          \n    return forward_call(*input, **kwargs)\r\n  File \"C:\\Users\\Matthew\\\
          .conda\\envs\\ldm\\lib\\site-packages\\torch\\nn\\modules\\conv.py\", line\
          \ 447, in forward\r\n    return self._conv_forward(input, self.weight, self.bias)\r\
          \n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\\
          nn\\modules\\conv.py\", line 443, in _conv_forward\r\n    return F.conv2d(input,\
          \ weight, bias, self.stride,\r\nRuntimeError: Unable to find a valid cuDNN\
          \ algorithm to run convolution"
        updatedAt: '2022-09-05T15:49:39.387Z'
      numEdits: 0
      reactions: []
    id: 63161a933edbcfbc5d4478fd
    type: comment
  author: mladams922
  content: "I'm getting the runtime error Unable to find a valid cuDNN algorithm to\
    \ run convolution and I don't know how to solve it.  Has anyone seen this or have\
    \ any understanding of where it's coming from that I could resolve the issue?\r\
    \n\r\nThanks, here's the traceback:\r\nTraceback (most recent call last):\r\n\
    \  File \"scripts/txt2img.py\", line 344, in <module>\r\n    main()\r\n  File\
    \ \"scripts/txt2img.py\", line 295, in main\r\n    samples_ddim, _ = sampler.sample(S=opt.ddim_steps,\r\
    \n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\\
    autograd\\grad_mode.py\", line 27, in decorate_context\r\n    return func(*args,\
    \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\models\\\
    diffusion\\ddim.py\", line 96, in sample\r\n    samples, intermediates = self.ddim_sampling(conditioning,\
    \ size,\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
    torch\\autograd\\grad_mode.py\", line 27, in decorate_context\r\n    return func(*args,\
    \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\models\\\
    diffusion\\ddim.py\", line 149, in ddim_sampling\r\n    outs = self.p_sample_ddim(img,\
    \ cond, ts, index=index, use_original_steps=ddim_use_original_steps,\r\n  File\
    \ \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\autograd\\\
    grad_mode.py\", line 27, in decorate_context\r\n    return func(*args, **kwargs)\r\
    \n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\models\\diffusion\\\
    ddim.py\", line 177, in p_sample_ddim\r\n    e_t_uncond, e_t = self.model.apply_model(x_in,\
    \ t_in, c_in).chunk(2)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\\
    ldm\\models\\diffusion\\ddpm.py\", line 987, in apply_model\r\n    x_recon = self.model(x_noisy,\
    \ t, **cond)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
    torch\\nn\\modules\\module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
    \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\models\\\
    diffusion\\ddpm.py\", line 1410, in forward\r\n    out = self.diffusion_model(x,\
    \ t, context=cc)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
    torch\\nn\\modules\\module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
    \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\modules\\\
    diffusionmodules\\openaimodel.py\", line 732, in forward\r\n    h = module(h,\
    \ emb, context)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
    torch\\nn\\modules\\module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
    \ **kwargs)\r\n  File \"c:\\stable-diffusion\\stable-diffusion-main\\ldm\\modules\\\
    diffusionmodules\\openaimodel.py\", line 87, in forward\r\n    x = layer(x)\r\n\
    \  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\torch\\nn\\\
    modules\\module.py\", line 1110, in _call_impl\r\n    return forward_call(*input,\
    \ **kwargs)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\lib\\site-packages\\\
    torch\\nn\\modules\\conv.py\", line 447, in forward\r\n    return self._conv_forward(input,\
    \ self.weight, self.bias)\r\n  File \"C:\\Users\\Matthew\\.conda\\envs\\ldm\\\
    lib\\site-packages\\torch\\nn\\modules\\conv.py\", line 443, in _conv_forward\r\
    \n    return F.conv2d(input, weight, bias, self.stride,\r\nRuntimeError: Unable\
    \ to find a valid cuDNN algorithm to run convolution"
  created_at: 2022-09-05 14:49:39+00:00
  edited: false
  hidden: false
  id: 63161a933edbcfbc5d4478fd
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-06T21:21:19.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>Hmm what CuDNN / CUDA version are you running?</p>

          '
        raw: Hmm what CuDNN / CUDA version are you running?
        updatedAt: '2022-09-06T21:21:19.607Z'
      numEdits: 0
      reactions: []
    id: 6317b9cf7690c5b55e6043af
    type: comment
  author: patrickvonplaten
  content: Hmm what CuDNN / CUDA version are you running?
  created_at: 2022-09-06 20:21:19+00:00
  edited: false
  hidden: false
  id: 6317b9cf7690c5b55e6043af
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1e802393d7f08b9d752d5af9a6b5fd8d.svg
      fullname: Matthew Adams
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mladams922
      type: user
    createdAt: '2022-09-08T19:03:51.000Z'
    data:
      edited: false
      editors:
      - mladams922
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1e802393d7f08b9d752d5af9a6b5fd8d.svg
          fullname: Matthew Adams
          isHf: false
          isPro: false
          name: mladams922
          type: user
        html: '<p>Hey, thanks for the reply.  I use a Lenovo Legion 7 laptop and it
          turns out they must have used slightly modified driver sets for the graphics
          chipset.  So I went to the NVidia driver downloads and grabbed the drivers
          from them, removed the manufacturers drivers and replaced them with the
          NVidia drivers and it works fine now.  I''m not sure what they changed but
          that did the trick.</p>

          '
        raw: Hey, thanks for the reply.  I use a Lenovo Legion 7 laptop and it turns
          out they must have used slightly modified driver sets for the graphics chipset.  So
          I went to the NVidia driver downloads and grabbed the drivers from them,
          removed the manufacturers drivers and replaced them with the NVidia drivers
          and it works fine now.  I'm not sure what they changed but that did the
          trick.
        updatedAt: '2022-09-08T19:03:51.623Z'
      numEdits: 0
      reactions: []
    id: 631a3c97ee2a8b515d46eb61
    type: comment
  author: mladams922
  content: Hey, thanks for the reply.  I use a Lenovo Legion 7 laptop and it turns
    out they must have used slightly modified driver sets for the graphics chipset.  So
    I went to the NVidia driver downloads and grabbed the drivers from them, removed
    the manufacturers drivers and replaced them with the NVidia drivers and it works
    fine now.  I'm not sure what they changed but that did the trick.
  created_at: 2022-09-08 18:03:51+00:00
  edited: false
  hidden: false
  id: 631a3c97ee2a8b515d46eb61
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 37
repo_id: CompVis/stable-diffusion-v1-4
repo_type: model
status: open
target_branch: null
title: Unable to find a valid cuDNN algorithm to run convolution
