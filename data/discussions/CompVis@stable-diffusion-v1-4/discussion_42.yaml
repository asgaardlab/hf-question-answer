!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Ringerill
conflicting_files: null
created_at: 2022-09-06 13:27:23+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
      fullname: Nikita
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ringerill
      type: user
    createdAt: '2022-09-06T14:27:23.000Z'
    data:
      edited: false
      editors:
      - Ringerill
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
          fullname: Nikita
          isHf: false
          isPro: false
          name: Ringerill
          type: user
        html: '<p>Hello,</p>

          <p>As the title states, I''m running into this error when trying to generate
          images with the default parameters using a CPU on Mac.</p>

          '
        raw: "Hello,\r\n\r\nAs the title states, I'm running into this error when\
          \ trying to generate images with the default parameters using a CPU on Mac."
        updatedAt: '2022-09-06T14:27:23.985Z'
      numEdits: 0
      reactions: []
    id: 631758cb23ac76623d60203c
    type: comment
  author: Ringerill
  content: "Hello,\r\n\r\nAs the title states, I'm running into this error when trying\
    \ to generate images with the default parameters using a CPU on Mac."
  created_at: 2022-09-06 13:27:23+00:00
  edited: false
  hidden: false
  id: 631758cb23ac76623d60203c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0768f3907e45414bce07352c67563c07.svg
      fullname: hede hodo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aduranel
      type: user
    createdAt: '2022-09-06T16:01:47.000Z'
    data:
      edited: false
      editors:
      - aduranel
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0768f3907e45414bce07352c67563c07.svg
          fullname: hede hodo
          isHf: false
          isPro: false
          name: aduranel
          type: user
        html: '<p>Setting --precision to be ''full'' seems to help.</p>

          '
        raw: Setting --precision to be 'full' seems to help.
        updatedAt: '2022-09-06T16:01:47.748Z'
      numEdits: 0
      reactions:
      - count: 4
        reaction: "\U0001F91D"
        users:
        - gaborsoter
        - jianpingliu
        - qurantz
        - diophung
    id: 63176eeb1dd5a319a677eea5
    type: comment
  author: aduranel
  content: Setting --precision to be 'full' seems to help.
  created_at: 2022-09-06 15:01:47+00:00
  edited: false
  hidden: false
  id: 63176eeb1dd5a319a677eea5
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
      fullname: Patrick von Platen
      isHf: true
      isOrgMember: true
      isOwner: false
      isPro: false
      name: patrickvonplaten
      type: user
    createdAt: '2022-09-06T21:11:48.000Z'
    data:
      edited: false
      editors:
      - patrickvonplaten
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1584435275418-5dfcb1aada6d0311fd3d5448.jpeg?w=200&h=200&f=face
          fullname: Patrick von Platen
          isHf: true
          isPro: false
          name: patrickvonplaten
          type: user
        html: '<p>We will merge a PR that makes sure SD can be run on Mac tomorrow:
          <a rel="nofollow" href="https://github.com/huggingface/diffusers/pull/355">https://github.com/huggingface/diffusers/pull/355</a></p>

          '
        raw: 'We will merge a PR that makes sure SD can be run on Mac tomorrow: https://github.com/huggingface/diffusers/pull/355'
        updatedAt: '2022-09-06T21:11:48.767Z'
      numEdits: 0
      reactions: []
    id: 6317b794f957903db9759778
    type: comment
  author: patrickvonplaten
  content: 'We will merge a PR that makes sure SD can be run on Mac tomorrow: https://github.com/huggingface/diffusers/pull/355'
  created_at: 2022-09-06 20:11:48+00:00
  edited: false
  hidden: false
  id: 6317b794f957903db9759778
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
      fullname: Nikita
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ringerill
      type: user
    createdAt: '2022-09-07T09:10:15.000Z'
    data:
      edited: false
      editors:
      - Ringerill
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
          fullname: Nikita
          isHf: false
          isPro: false
          name: Ringerill
          type: user
        html: "<blockquote>\n<p>Setting --precision to be 'full' seems to help.</p>\n\
          </blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;aduranel&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/aduranel\"\
          >@<span class=\"underline\">aduranel</span></a></span>\n\n\t</span></span>\
          \ , I think we do not launch the jobs in the same way so I'm a little bit\
          \ lost as to where this argument should be called.<br>Would you mind indicating\
          \ what function actually allows this?</p>\n"
        raw: '> Setting --precision to be ''full'' seems to help.


          @aduranel , I think we do not launch the jobs in the same way so I''m a
          little bit lost as to where this argument should be called.

          Would you mind indicating what function actually allows this?'
        updatedAt: '2022-09-07T09:10:15.540Z'
      numEdits: 0
      reactions: []
    id: 63185ff7e5a381804171f4bb
    type: comment
  author: Ringerill
  content: '> Setting --precision to be ''full'' seems to help.


    @aduranel , I think we do not launch the jobs in the same way so I''m a little
    bit lost as to where this argument should be called.

    Would you mind indicating what function actually allows this?'
  created_at: 2022-09-07 08:10:15+00:00
  edited: false
  hidden: false
  id: 63185ff7e5a381804171f4bb
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0768f3907e45414bce07352c67563c07.svg
      fullname: hede hodo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: aduranel
      type: user
    createdAt: '2022-09-07T09:17:52.000Z'
    data:
      edited: false
      editors:
      - aduranel
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0768f3907e45414bce07352c67563c07.svg
          fullname: hede hodo
          isHf: false
          isPro: false
          name: aduranel
          type: user
        html: '<p>Hmm. In txt2img.py, around line 238, there is a block like this:</p>

          <p>parser.add_argument(<br>       "--precision",<br>      type=str,<br>     help="evaluate
          at this precision",<br>    choices=["full", "autocast"],<br>   default="autocast"<br>)</p>

          <p>Changing the default to "full" helped me when I encountered this error.</p>

          '
        raw: "Hmm. In txt2img.py, around line 238, there is a block like this:\n\n\
          parser.add_argument(\n       \"--precision\",\n      type=str,\n     help=\"\
          evaluate at this precision\",\n    choices=[\"full\", \"autocast\"],\n \
          \  default=\"autocast\"\n)\n\nChanging the default to \"full\" helped me\
          \ when I encountered this error."
        updatedAt: '2022-09-07T09:17:52.208Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - qurantz
    id: 631861c0e5a3818041720b71
    type: comment
  author: aduranel
  content: "Hmm. In txt2img.py, around line 238, there is a block like this:\n\nparser.add_argument(\n\
    \       \"--precision\",\n      type=str,\n     help=\"evaluate at this precision\"\
    ,\n    choices=[\"full\", \"autocast\"],\n   default=\"autocast\"\n)\n\nChanging\
    \ the default to \"full\" helped me when I encountered this error."
  created_at: 2022-09-07 08:17:52+00:00
  edited: false
  hidden: false
  id: 631861c0e5a3818041720b71
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
      fullname: Nikita
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Ringerill
      type: user
    createdAt: '2022-09-07T09:53:50.000Z'
    data:
      edited: false
      editors:
      - Ringerill
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b12fa745adf53eaaeafd9d3201b84a31.svg
          fullname: Nikita
          isHf: false
          isPro: false
          name: Ringerill
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;aduranel&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/aduranel\">@<span class=\"\
          underline\">aduranel</span></a></span>\n\n\t</span></span> Ok now I am very\
          \ confused and probably I'm not even doing it right...<br>I've been using\
          \ the StableDiffusionPipeline function from diffusers as shown in the example.<br>I\
          \ though that at some point the Stable diffusion functions were called in\
          \ the background but am I simply mistaken and not even in the good repo\
          \ here?</p>\n<p>Sorry, I've been trying different repo for the whole day\
          \ to make it work on Mac and I might have mixed some things...</p>\n"
        raw: '@aduranel Ok now I am very confused and probably I''m not even doing
          it right...

          I''ve been using the StableDiffusionPipeline function from diffusers as
          shown in the example.

          I though that at some point the Stable diffusion functions were called in
          the background but am I simply mistaken and not even in the good repo here?


          Sorry, I''ve been trying different repo for the whole day to make it work
          on Mac and I might have mixed some things...'
        updatedAt: '2022-09-07T09:53:50.067Z'
      numEdits: 0
      reactions: []
    id: 63186a2eb549767884bd1d0e
    type: comment
  author: Ringerill
  content: '@aduranel Ok now I am very confused and probably I''m not even doing it
    right...

    I''ve been using the StableDiffusionPipeline function from diffusers as shown
    in the example.

    I though that at some point the Stable diffusion functions were called in the
    background but am I simply mistaken and not even in the good repo here?


    Sorry, I''ve been trying different repo for the whole day to make it work on Mac
    and I might have mixed some things...'
  created_at: 2022-09-07 08:53:50+00:00
  edited: false
  hidden: false
  id: 63186a2eb549767884bd1d0e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0ae9421c953e42655df328f4af0c8fa2.svg
      fullname: Alex
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: xalex
      type: user
    createdAt: '2022-09-07T19:12:52.000Z'
    data:
      edited: false
      editors:
      - xalex
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0ae9421c953e42655df328f4af0c8fa2.svg
          fullname: Alex
          isHf: false
          isPro: false
          name: xalex
          type: user
        html: '<p>Possibly you use <code>autocast("cuda")</code> when working with
          cpu? Then it should be <code>autocast("cpu")</code> (and I think you can
          only use 32bit floats on the cpu).</p>

          '
        raw: Possibly you use `autocast("cuda")` when working with cpu? Then it should
          be `autocast("cpu")` (and I think you can only use 32bit floats on the cpu).
        updatedAt: '2022-09-07T19:12:52.689Z'
      numEdits: 0
      reactions: []
    id: 6318ed3482e7eec0eabb3d9c
    type: comment
  author: xalex
  content: Possibly you use `autocast("cuda")` when working with cpu? Then it should
    be `autocast("cpu")` (and I think you can only use 32bit floats on the cpu).
  created_at: 2022-09-07 18:12:52+00:00
  edited: false
  hidden: false
  id: 6318ed3482e7eec0eabb3d9c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b1c34edf9a715328dcaefbb669cec073.svg
      fullname: Gabor Soter
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: gaborsoter
      type: user
    createdAt: '2022-09-08T15:57:12.000Z'
    data:
      edited: false
      editors:
      - gaborsoter
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b1c34edf9a715328dcaefbb669cec073.svg
          fullname: Gabor Soter
          isHf: false
          isPro: false
          name: gaborsoter
          type: user
        html: '<blockquote>

          <p>Setting --precision to be ''full'' seems to help.</p>

          </blockquote>

          <p>this worked for me. thanks!</p>

          '
        raw: '> Setting --precision to be ''full'' seems to help.


          this worked for me. thanks!'
        updatedAt: '2022-09-08T15:57:12.589Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - Zimzim
        - luping-liu
    id: 631a10d8a66151e36e4ea25a
    type: comment
  author: gaborsoter
  content: '> Setting --precision to be ''full'' seems to help.


    this worked for me. thanks!'
  created_at: 2022-09-08 14:57:12+00:00
  edited: false
  hidden: false
  id: 631a10d8a66151e36e4ea25a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/a3b14876e5173389349fb4cd6e217177.svg
      fullname: dfgfg
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dgfhn
      type: user
    createdAt: '2023-03-15T14:30:37.000Z'
    data:
      edited: false
      editors:
      - dgfhn
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/a3b14876e5173389349fb4cd6e217177.svg
          fullname: dfgfg
          isHf: false
          isPro: false
          name: dgfhn
          type: user
        html: '<blockquote>

          <p>Hmm. In txt2img.py, around line 238, there is a block like this:</p>

          <p>parser.add_argument(<br>       "--precision",<br>      type=str,<br>     help="evaluate
          at this precision",<br>    choices=["full", "autocast"],<br>   default="autocast"<br>)</p>

          <p>Changing the default to "full" helped me when I encountered this error.</p>

          </blockquote>

          <p>where is txt2img.py in?</p>

          '
        raw: "> Hmm. In txt2img.py, around line 238, there is a block like this:\n\
          > \n> parser.add_argument(\n>        \"--precision\",\n>       type=str,\n\
          >      help=\"evaluate at this precision\",\n>     choices=[\"full\", \"\
          autocast\"],\n>    default=\"autocast\"\n> )\n> \n> Changing the default\
          \ to \"full\" helped me when I encountered this error.\n\nwhere is txt2img.py\
          \ in?"
        updatedAt: '2023-03-15T14:30:37.996Z'
      numEdits: 0
      reactions: []
    id: 6411d68d34748d63e4d96b17
    type: comment
  author: dgfhn
  content: "> Hmm. In txt2img.py, around line 238, there is a block like this:\n>\
    \ \n> parser.add_argument(\n>        \"--precision\",\n>       type=str,\n>  \
    \    help=\"evaluate at this precision\",\n>     choices=[\"full\", \"autocast\"\
    ],\n>    default=\"autocast\"\n> )\n> \n> Changing the default to \"full\" helped\
    \ me when I encountered this error.\n\nwhere is txt2img.py in?"
  created_at: 2023-03-15 13:30:37+00:00
  edited: false
  hidden: false
  id: 6411d68d34748d63e4d96b17
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e7686379dc3deaef92caafdb1f1f2552.svg
      fullname: benam 2
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: benam2
      type: user
    createdAt: '2023-06-15T16:19:52.000Z'
    data:
      edited: true
      editors:
      - benam2
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7726548910140991
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e7686379dc3deaef92caafdb1f1f2552.svg
          fullname: benam 2
          isHf: false
          isPro: false
          name: benam2
          type: user
        html: '<p>Hi,</p>

          <p>I''m running this code on a A10 instance. I dont have precision parameter
          here. Is there any way to fix this? and this is the code Im running. It
          raises error in the training part: <a rel="nofollow" href="https://colab.research.google.com/drive/1DqKNPOzyMUXmJiJFvJITOahVDxCrA-wA#scrollTo=wShqQoppuv-h">https://colab.research.google.com/drive/1DqKNPOzyMUXmJiJFvJITOahVDxCrA-wA#scrollTo=wShqQoppuv-h</a></p>

          '
        raw: 'Hi,


          I''m running this code on a A10 instance. I dont have precision parameter
          here. Is there any way to fix this? and this is the code Im running. It
          raises error in the training part: https://colab.research.google.com/drive/1DqKNPOzyMUXmJiJFvJITOahVDxCrA-wA#scrollTo=wShqQoppuv-h

          '
        updatedAt: '2023-06-15T16:20:55.495Z'
      numEdits: 1
      reactions: []
    id: 648b3a28412f81cc0c16eb14
    type: comment
  author: benam2
  content: 'Hi,


    I''m running this code on a A10 instance. I dont have precision parameter here.
    Is there any way to fix this? and this is the code Im running. It raises error
    in the training part: https://colab.research.google.com/drive/1DqKNPOzyMUXmJiJFvJITOahVDxCrA-wA#scrollTo=wShqQoppuv-h

    '
  created_at: 2023-06-15 15:19:52+00:00
  edited: true
  hidden: false
  id: 648b3a28412f81cc0c16eb14
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/ce65d88b07263668a7b7c9b203529bd6.svg
      fullname: John Siu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: JSiuDev
      type: user
    createdAt: '2023-06-28T06:54:42.000Z'
    data:
      edited: false
      editors:
      - JSiuDev
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6538205742835999
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/ce65d88b07263668a7b7c9b203529bd6.svg
          fullname: John Siu
          isHf: false
          isPro: false
          name: JSiuDev
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;dgfhn&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/dgfhn\">@<span class=\"\
          underline\">dgfhn</span></a></span>\n\n\t</span></span> They(we) run in\
          \ this issue when trying to follow example for stablediffusion: <a rel=\"\
          nofollow\" href=\"https://github.com/Stability-AI/stablediffusion\">https://github.com/Stability-AI/stablediffusion</a></p>\n\
          <p>For others like me just trying to do the example, without touching the\
          \ code, \"--precision full\" can be added in the command line:</p>\n<pre><code\
          \ class=\"language-sh\">python scripts/txt2img.py --prompt <span class=\"\
          hljs-string\">\"a professional photograph of an astronaut riding a horse\"\
          </span> --ckpt ~/Downloads/v2-1_512-ema-pruned.ckpt --config configs/stable-diffusion/v2-inference-v.yaml\
          \ --H 768 --W 768  --precision full\n</code></pre>\n"
        raw: '@dgfhn They(we) run in this issue when trying to follow example for
          stablediffusion: https://github.com/Stability-AI/stablediffusion


          For others like me just trying to do the example, without touching the code,
          "--precision full" can be added in the command line:


          ```sh

          python scripts/txt2img.py --prompt "a professional photograph of an astronaut
          riding a horse" --ckpt ~/Downloads/v2-1_512-ema-pruned.ckpt --config configs/stable-diffusion/v2-inference-v.yaml
          --H 768 --W 768  --precision full

          ```'
        updatedAt: '2023-06-28T06:54:42.790Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - benam2
    id: 649bd93290b49cc1f0021769
    type: comment
  author: JSiuDev
  content: '@dgfhn They(we) run in this issue when trying to follow example for stablediffusion:
    https://github.com/Stability-AI/stablediffusion


    For others like me just trying to do the example, without touching the code, "--precision
    full" can be added in the command line:


    ```sh

    python scripts/txt2img.py --prompt "a professional photograph of an astronaut
    riding a horse" --ckpt ~/Downloads/v2-1_512-ema-pruned.ckpt --config configs/stable-diffusion/v2-inference-v.yaml
    --H 768 --W 768  --precision full

    ```'
  created_at: 2023-06-28 05:54:42+00:00
  edited: false
  hidden: false
  id: 649bd93290b49cc1f0021769
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 42
repo_id: CompVis/stable-diffusion-v1-4
repo_type: model
status: open
target_branch: null
title: 'RuntimeError: expected scalar type BFloat16 but found Float'
