!!python/object:huggingface_hub.community.DiscussionWithDetails
author: seabasshn
conflicting_files: null
created_at: 2023-12-18 18:58:33+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-18T18:58:33.000Z'
    data:
      edited: false
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.605574369430542
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: '<p>I tried deploying this model on a ml.g5.48xlarge instance in SM
          but I keep running into this error: </p>

          <p>File "/opt/conda/lib/python3.10/site-packages/text_generation_server/server.py",
          line 161, in serve_inner<br>    model = get_model(<br>  File "/opt/conda/lib/python3.10/site-packages/text_generation_server/models/<strong>init</strong>.py",
          line 310, in get_model<br>    return FlashMixtral(<br>  File "/opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mixtral.py",
          line 21, in <strong>init</strong><br>    super(FlashMixtral, self).<strong>init</strong>(<br>  File
          "/opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mistral.py",
          line 318, in <strong>init</strong><br>    SLIDING_WINDOW_BLOCKS = math.ceil(config.sliding_window
          / BLOCK_SIZE)</p>

          <p>TypeError: unsupported operand type(s) for /: ''NoneType'' and ''int''</p>

          <p>Error: ShardCannotStart</p>

          <p>Any ideas as to what might be causing this issue?</p>

          '
        raw: "I tried deploying this model on a ml.g5.48xlarge instance in SM but\
          \ I keep running into this error: \r\n\r\nFile \"/opt/conda/lib/python3.10/site-packages/text_generation_server/server.py\"\
          , line 161, in serve_inner\r\n    model = get_model(\r\n  File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/__init__.py\"\
          , line 310, in get_model\r\n    return FlashMixtral(\r\n  File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mixtral.py\"\
          , line 21, in __init__\r\n    super(FlashMixtral, self).__init__(\r\n  File\
          \ \"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mistral.py\"\
          , line 318, in __init__\r\n    SLIDING_WINDOW_BLOCKS = math.ceil(config.sliding_window\
          \ / BLOCK_SIZE)\r\n\r\nTypeError: unsupported operand type(s) for /: 'NoneType'\
          \ and 'int'\r\n\r\nError: ShardCannotStart\r\n\r\nAny ideas as to what might\
          \ be causing this issue?"
        updatedAt: '2023-12-18T18:58:33.207Z'
      numEdits: 0
      reactions: []
    id: 65809659a2284a018e395d92
    type: comment
  author: seabasshn
  content: "I tried deploying this model on a ml.g5.48xlarge instance in SM but I\
    \ keep running into this error: \r\n\r\nFile \"/opt/conda/lib/python3.10/site-packages/text_generation_server/server.py\"\
    , line 161, in serve_inner\r\n    model = get_model(\r\n  File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/__init__.py\"\
    , line 310, in get_model\r\n    return FlashMixtral(\r\n  File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mixtral.py\"\
    , line 21, in __init__\r\n    super(FlashMixtral, self).__init__(\r\n  File \"\
    /opt/conda/lib/python3.10/site-packages/text_generation_server/models/flash_mistral.py\"\
    , line 318, in __init__\r\n    SLIDING_WINDOW_BLOCKS = math.ceil(config.sliding_window\
    \ / BLOCK_SIZE)\r\n\r\nTypeError: unsupported operand type(s) for /: 'NoneType'\
    \ and 'int'\r\n\r\nError: ShardCannotStart\r\n\r\nAny ideas as to what might be\
    \ causing this issue?"
  created_at: 2023-12-18 18:58:33+00:00
  edited: false
  hidden: false
  id: 65809659a2284a018e395d92
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-12-18T19:01:53.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9968419671058655
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: "<p>I think this was fixed in the latest release of tgi \U0001F917</p>\n"
        raw: "I think this was fixed in the latest release of tgi \U0001F917"
        updatedAt: '2023-12-18T19:01:53.779Z'
      numEdits: 0
      reactions: []
    id: 65809721560c1557cfc0994c
    type: comment
  author: ArthurZ
  content: "I think this was fixed in the latest release of tgi \U0001F917"
  created_at: 2023-12-18 19:01:53+00:00
  edited: false
  hidden: false
  id: 65809721560c1557cfc0994c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-18T19:06:12.000Z'
    data:
      edited: true
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.39551663398742676
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ArthurZ&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ArthurZ\">@<span class=\"\
          underline\">ArthurZ</span></a></span>\n\n\t</span></span> What's the latest\
          \ version? Im using 1.3.1</p>\n"
        raw: '@ArthurZ What''s the latest version? Im using 1.3.1'
        updatedAt: '2023-12-18T19:06:26.201Z'
      numEdits: 1
      reactions: []
    id: 658098248108945fd3aba210
    type: comment
  author: seabasshn
  content: '@ArthurZ What''s the latest version? Im using 1.3.1'
  created_at: 2023-12-18 19:06:12+00:00
  edited: true
  hidden: false
  id: 658098248108945fd3aba210
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-12-18T19:07:42.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6375961899757385
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: '<p><a rel="nofollow" href="https://github.com/huggingface/text-generation-inference/releases/tag/v1.3.3">https://github.com/huggingface/text-generation-inference/releases/tag/v1.3.3</a></p>

          <p>so 1.3.3! </p>

          '
        raw: 'https://github.com/huggingface/text-generation-inference/releases/tag/v1.3.3


          so 1.3.3! '
        updatedAt: '2023-12-18T19:07:42.981Z'
      numEdits: 0
      reactions: []
    id: 6580987ed0dfc3caf6ba5161
    type: comment
  author: ArthurZ
  content: 'https://github.com/huggingface/text-generation-inference/releases/tag/v1.3.3


    so 1.3.3! '
  created_at: 2023-12-18 19:07:42+00:00
  edited: false
  hidden: false
  id: 6580987ed0dfc3caf6ba5161
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-18T19:22:32.000Z'
    data:
      edited: false
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7441167235374451
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: '<p>Thank you. It look like I''ll just have to wait until the sagemaker
          sdk (v2.200.1) support the newest TGI version. </p>

          <p>"Unsupported huggingface-llm version: 1.3.3. You may need to upgrade
          your SDK version (pip install -U sagemaker) for newer huggingface-llm versions.
          Supported huggingface-llm version(s): 0.6.0, 0.8.2, 0.9.3, 1.0.3, 1.1.0,
          1.2.0, 1.3.1, 0.6, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3."</p>

          '
        raw: "Thank you. It look like I'll just have to wait until the sagemaker sdk\
          \ (v2.200.1) support the newest TGI version. \n\n\"Unsupported huggingface-llm\
          \ version: 1.3.3. You may need to upgrade your SDK version (pip install\
          \ -U sagemaker) for newer huggingface-llm versions. Supported huggingface-llm\
          \ version(s): 0.6.0, 0.8.2, 0.9.3, 1.0.3, 1.1.0, 1.2.0, 1.3.1, 0.6, 0.8,\
          \ 0.9, 1.0, 1.1, 1.2, 1.3.\""
        updatedAt: '2023-12-18T19:22:32.540Z'
      numEdits: 0
      reactions: []
    id: 65809bf854a75cbee680ee3d
    type: comment
  author: seabasshn
  content: "Thank you. It look like I'll just have to wait until the sagemaker sdk\
    \ (v2.200.1) support the newest TGI version. \n\n\"Unsupported huggingface-llm\
    \ version: 1.3.3. You may need to upgrade your SDK version (pip install -U sagemaker)\
    \ for newer huggingface-llm versions. Supported huggingface-llm version(s): 0.6.0,\
    \ 0.8.2, 0.9.3, 1.0.3, 1.1.0, 1.2.0, 1.3.1, 0.6, 0.8, 0.9, 1.0, 1.1, 1.2, 1.3.\""
  created_at: 2023-12-18 19:22:32+00:00
  edited: false
  hidden: false
  id: 65809bf854a75cbee680ee3d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
      fullname: Arthur Zucker
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: ArthurZ
      type: user
    createdAt: '2023-12-18T19:25:04.000Z'
    data:
      edited: false
      editors:
      - ArthurZ
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9527734518051147
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1674683851722-62441cb7456803e95009a08f.jpeg?w=200&h=200&f=face
          fullname: Arthur Zucker
          isHf: true
          isPro: false
          name: ArthurZ
          type: user
        html: "<p>Sorry for that \U0001F625 </p>\n"
        raw: "Sorry for that \U0001F625 "
        updatedAt: '2023-12-18T19:25:04.626Z'
      numEdits: 0
      reactions: []
    id: 65809c9062524062d7cb956a
    type: comment
  author: ArthurZ
  content: "Sorry for that \U0001F625 "
  created_at: 2023-12-18 19:25:04+00:00
  edited: false
  hidden: false
  id: 65809c9062524062d7cb956a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-18T19:27:44.000Z'
    data:
      edited: false
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7585622072219849
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;ArthurZ&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/ArthurZ\">@<span class=\"\
          underline\">ArthurZ</span></a></span>\n\n\t</span></span> All good! Appreciate\
          \ the help</p>\n"
        raw: '@ArthurZ All good! Appreciate the help'
        updatedAt: '2023-12-18T19:27:44.221Z'
      numEdits: 0
      reactions: []
    id: 65809d30133ca7da45c59e6f
    type: comment
  author: seabasshn
  content: '@ArthurZ All good! Appreciate the help'
  created_at: 2023-12-18 19:27:44+00:00
  edited: false
  hidden: false
  id: 65809d30133ca7da45c59e6f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6799613e77386fc06b5b948dbfdc2f24.svg
      fullname: Tadeo Donegana Braunschweig
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tadeodonegana
      type: user
    createdAt: '2023-12-19T20:34:19.000Z'
    data:
      edited: true
      editors:
      - tadeodonegana
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8853245377540588
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6799613e77386fc06b5b948dbfdc2f24.svg
          fullname: Tadeo Donegana Braunschweig
          isHf: false
          isPro: false
          name: tadeodonegana
          type: user
        html: '<p>Same problem here.</p>

          '
        raw: Same problem here.
        updatedAt: '2023-12-21T20:31:19.594Z'
      numEdits: 3
      reactions: []
    id: 6581fe4b862ee4df74afa947
    type: comment
  author: tadeodonegana
  content: Same problem here.
  created_at: 2023-12-19 20:34:19+00:00
  edited: true
  hidden: false
  id: 6581fe4b862ee4df74afa947
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/dWy8pkzRWllMotX8WHVOf.jpeg?w=200&h=200&f=face
      fullname: Lorenzo Cevolani
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: LorenzoCevolaniAXA
      type: user
    createdAt: '2023-12-20T08:58:41.000Z'
    data:
      edited: true
      editors:
      - LorenzoCevolaniAXA
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9950665831565857
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/dWy8pkzRWllMotX8WHVOf.jpeg?w=200&h=200&f=face
          fullname: Lorenzo Cevolani
          isHf: false
          isPro: false
          name: LorenzoCevolaniAXA
          type: user
        html: '<p>The new container has been deployed today, I was able to deploy
          it</p>

          '
        raw: The new container has been deployed today, I was able to deploy it
        updatedAt: '2023-12-20T08:58:52.152Z'
      numEdits: 1
      reactions: []
    id: 6582acc1f7111631de598d41
    type: comment
  author: LorenzoCevolaniAXA
  content: The new container has been deployed today, I was able to deploy it
  created_at: 2023-12-20 08:58:41+00:00
  edited: true
  hidden: false
  id: 6582acc1f7111631de598d41
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
      fullname: Sebastian Bustillo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: seabasshn
      type: user
    createdAt: '2023-12-20T12:30:03.000Z'
    data:
      edited: false
      editors:
      - seabasshn
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9281406998634338
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c3abd5cfc948a137b40ab4c73088859f.svg
          fullname: Sebastian Bustillo
          isHf: false
          isPro: false
          name: seabasshn
          type: user
        html: '<p>Can you share what sagemaker SDK and TGI versions you used? I''m
          still getting the same error even after upgrading to v1.3.3 and v2.201.0,
          respectively.</p>

          '
        raw: Can you share what sagemaker SDK and TGI versions you used? I'm still
          getting the same error even after upgrading to v1.3.3 and v2.201.0, respectively.
        updatedAt: '2023-12-20T12:30:03.201Z'
      numEdits: 0
      reactions: []
    id: 6582de4b019fecc59e81038a
    type: comment
  author: seabasshn
  content: Can you share what sagemaker SDK and TGI versions you used? I'm still getting
    the same error even after upgrading to v1.3.3 and v2.201.0, respectively.
  created_at: 2023-12-20 12:30:03+00:00
  edited: false
  hidden: false
  id: 6582de4b019fecc59e81038a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64be3381ef8c0e42bf4112d0/xTydgERjZABnwvK7CBrQC.png?w=200&h=200&f=face
      fullname: Francisco Amoros Cubells
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Bepitic
      type: user
    createdAt: '2023-12-23T17:18:32.000Z'
    data:
      edited: false
      editors:
      - Bepitic
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.89417964220047
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/64be3381ef8c0e42bf4112d0/xTydgERjZABnwvK7CBrQC.png?w=200&h=200&f=face
          fullname: Francisco Amoros Cubells
          isHf: false
          isPro: false
          name: Bepitic
          type: user
        html: "<p>Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor\
          \ 1.3.4, can someone point me to the container or a link where to find it?\n\
          \ </p>\n"
        raw: "Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor 1.3.4,\
          \ can someone point me to the container or a link where to find it?\n "
        updatedAt: '2023-12-23T17:18:32.155Z'
      numEdits: 0
      reactions: []
    id: 65871668e878be571b17b10d
    type: comment
  author: Bepitic
  content: "Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor 1.3.4,\
    \ can someone point me to the container or a link where to find it?\n "
  created_at: 2023-12-23 17:18:32+00:00
  edited: false
  hidden: false
  id: 65871668e878be571b17b10d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/6799613e77386fc06b5b948dbfdc2f24.svg
      fullname: Tadeo Donegana Braunschweig
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: tadeodonegana
      type: user
    createdAt: '2023-12-23T17:45:36.000Z'
    data:
      edited: false
      editors:
      - tadeodonegana
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9111495614051819
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/6799613e77386fc06b5b948dbfdc2f24.svg
          fullname: Tadeo Donegana Braunschweig
          isHf: false
          isPro: false
          name: tadeodonegana
          type: user
        html: '<blockquote>

          <p>Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor 1.3.4,
          can someone point me to the container or a link where to find it?</p>

          </blockquote>

          <p>I was able to temporally solve this issue reverting to an older commit.
          Check <a rel="nofollow" href="https://github.com/huggingface/text-generation-inference/issues/1342">https://github.com/huggingface/text-generation-inference/issues/1342</a>
          for more information.</p>

          '
        raw: '> Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor
          1.3.4, can someone point me to the container or a link where to find it?


          I was able to temporally solve this issue reverting to an older commit.
          Check https://github.com/huggingface/text-generation-inference/issues/1342
          for more information.'
        updatedAt: '2023-12-23T17:45:36.982Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - Bepitic
    id: 65871cc08dd4219487a27fb9
    type: comment
  author: tadeodonegana
  content: '> Me with Sagemaker ver 2.202.1, still is not supporting  1.3.3 nor 1.3.4,
    can someone point me to the container or a link where to find it?


    I was able to temporally solve this issue reverting to an older commit. Check
    https://github.com/huggingface/text-generation-inference/issues/1342 for more
    information.'
  created_at: 2023-12-23 17:45:36+00:00
  edited: false
  hidden: false
  id: 65871cc08dd4219487a27fb9
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 53
repo_id: mistralai/Mixtral-8x7B-Instruct-v0.1
repo_type: model
status: open
target_branch: null
title: SageMaker Deployment Error
