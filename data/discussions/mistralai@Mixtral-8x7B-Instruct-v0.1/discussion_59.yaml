!!python/object:huggingface_hub.community.DiscussionWithDetails
author: samparksoftwares
conflicting_files: null
created_at: 2023-12-21 10:14:26+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
      fullname: SAMPARK SOFTWARES PVT. LTD
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: samparksoftwares
      type: user
    createdAt: '2023-12-21T10:14:26.000Z'
    data:
      edited: false
      editors:
      - samparksoftwares
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.859849750995636
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
          fullname: SAMPARK SOFTWARES PVT. LTD
          isHf: false
          isPro: true
          name: samparksoftwares
          type: user
        html: '<p>Model is giving incomplete answers or rather stops generating answers
          at any point despite increasing max_new_token and decreasing prompt''s context
          length.</p>

          '
        raw: Model is giving incomplete answers or rather stops generating answers
          at any point despite increasing max_new_token and decreasing prompt's context
          length.
        updatedAt: '2023-12-21T10:14:26.400Z'
      numEdits: 0
      reactions: []
    id: 65841002039e9e2f0eed3840
    type: comment
  author: samparksoftwares
  content: Model is giving incomplete answers or rather stops generating answers at
    any point despite increasing max_new_token and decreasing prompt's context length.
  created_at: 2023-12-21 10:14:26+00:00
  edited: false
  hidden: false
  id: 65841002039e9e2f0eed3840
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-12-23T10:00:49.000Z'
    data:
      edited: true
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9566782712936401
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: '<p>I''ve had this behaviour as well until I realised I wasn''t following
          the prompt format properly. Make sure you use the white spaces and BOS/EOS
          tokens appropriately. The EOS tokens are very important. And the whitespaces
          are also very important.</p>

          <p>Prompt:</p>

          <pre><code>&lt;s&gt; [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2.
          Is there anything else you would like to know about mathematics or another
          topic? I''m here to help with any questions you have to the best of my ability.&lt;/s&gt;
          [INST] What is 1+2? [/INST]

          </code></pre>

          <p>Prompt answered:</p>

          <pre><code>&lt;s&gt; [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2.
          Is there anything else you would like to know about mathematics or another
          topic? I''m here to help with any questions you have to the best of my ability.&lt;/s&gt;
          [INST] What is 1+2? [/INST] The sum of 1 + 2 is 3. In arithmetic, addition
          is the operation of combining two numbers to produce a third number. For
          example, in the expression "2 + 3 = 5," 2 and 3 are the addends, and 5 is
          the sum. Addition can be represented using symbols, such as the plus sign
          "+", or by the word "and." It is one of the basic operations in mathematics,
          along with subtraction, multiplication, and division. Is there anything
          else you would like to know about mathematics or another topic? I''m here
          to help with any questions you have.

          </code></pre>

          <p>Very important:</p>

          <ul>

          <li>After the BOS (<code>&lt;s&gt;</code>), there is a whitespace. There
          must be only one BOS in your prompt.</li>

          <li>Before any EOS (<code>&lt;/s&gt;</code>), there is no whitespace.</li>

          <li>All instructions must be between <code>[INST]</code> and <code>[/INST]</code>,
          notice the whitespace after and before them.</li>

          <li>At the end of your prompt, there must be no whitespace after the last
          <code>[/INST]</code>. Completion will add it for you.</li>

          <li>Make sure the software you use doesn''t already add the BOS/EOS tokens
          to the prompt, otherwise you must decide who adds them (either yourself
          or the software), but you need to make sure they are added correctly and
          that the whitespaces are present.</li>

          </ul>

          <p><a rel="nofollow" href="https://github.com/huggingface/blog/blob/main/mixtral.md">https://github.com/huggingface/blog/blob/main/mixtral.md</a></p>

          '
        raw: 'I''ve had this behaviour as well until I realised I wasn''t following
          the prompt format properly. Make sure you use the white spaces and BOS/EOS
          tokens appropriately. The EOS tokens are very important. And the whitespaces
          are also very important.


          Prompt:

          ```

          <s> [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2. Is there anything
          else you would like to know about mathematics or another topic? I''m here
          to help with any questions you have to the best of my ability.</s> [INST]
          What is 1+2? [/INST]

          ```


          Prompt answered:

          ```

          <s> [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2. Is there anything
          else you would like to know about mathematics or another topic? I''m here
          to help with any questions you have to the best of my ability.</s> [INST]
          What is 1+2? [/INST] The sum of 1 + 2 is 3. In arithmetic, addition is the
          operation of combining two numbers to produce a third number. For example,
          in the expression "2 + 3 = 5," 2 and 3 are the addends, and 5 is the sum.
          Addition can be represented using symbols, such as the plus sign "+", or
          by the word "and." It is one of the basic operations in mathematics, along
          with subtraction, multiplication, and division. Is there anything else you
          would like to know about mathematics or another topic? I''m here to help
          with any questions you have.

          ```


          Very important:

          - After the BOS (`<s>`), there is a whitespace. There must be only one BOS
          in your prompt.

          - Before any EOS (`</s>`), there is no whitespace.

          - All instructions must be between `[INST]` and `[/INST]`, notice the whitespace
          after and before them.

          - At the end of your prompt, there must be no whitespace after the last
          `[/INST]`. Completion will add it for you.

          - Make sure the software you use doesn''t already add the BOS/EOS tokens
          to the prompt, otherwise you must decide who adds them (either yourself
          or the software), but you need to make sure they are added correctly and
          that the whitespaces are present.


          https://github.com/huggingface/blog/blob/main/mixtral.md'
        updatedAt: '2023-12-23T10:07:15.843Z'
      numEdits: 6
      reactions:
      - count: 4
        reaction: "\U0001F44D"
        users:
        - jlzhou
        - ibndias
        - ivankeller
        - samparksoftwares
    id: 6586afd1a66bd1cdb23672af
    type: comment
  author: Thireus
  content: 'I''ve had this behaviour as well until I realised I wasn''t following
    the prompt format properly. Make sure you use the white spaces and BOS/EOS tokens
    appropriately. The EOS tokens are very important. And the whitespaces are also
    very important.


    Prompt:

    ```

    <s> [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2. Is there anything else
    you would like to know about mathematics or another topic? I''m here to help with
    any questions you have to the best of my ability.</s> [INST] What is 1+2? [/INST]

    ```


    Prompt answered:

    ```

    <s> [INST] What is 1+1? [/INST] The sum of 1 + 1 is 2. Is there anything else
    you would like to know about mathematics or another topic? I''m here to help with
    any questions you have to the best of my ability.</s> [INST] What is 1+2? [/INST]
    The sum of 1 + 2 is 3. In arithmetic, addition is the operation of combining two
    numbers to produce a third number. For example, in the expression "2 + 3 = 5,"
    2 and 3 are the addends, and 5 is the sum. Addition can be represented using symbols,
    such as the plus sign "+", or by the word "and." It is one of the basic operations
    in mathematics, along with subtraction, multiplication, and division. Is there
    anything else you would like to know about mathematics or another topic? I''m
    here to help with any questions you have.

    ```


    Very important:

    - After the BOS (`<s>`), there is a whitespace. There must be only one BOS in
    your prompt.

    - Before any EOS (`</s>`), there is no whitespace.

    - All instructions must be between `[INST]` and `[/INST]`, notice the whitespace
    after and before them.

    - At the end of your prompt, there must be no whitespace after the last `[/INST]`.
    Completion will add it for you.

    - Make sure the software you use doesn''t already add the BOS/EOS tokens to the
    prompt, otherwise you must decide who adds them (either yourself or the software),
    but you need to make sure they are added correctly and that the whitespaces are
    present.


    https://github.com/huggingface/blog/blob/main/mixtral.md'
  created_at: 2023-12-23 10:00:49+00:00
  edited: true
  hidden: false
  id: 6586afd1a66bd1cdb23672af
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
      fullname: SAMPARK SOFTWARES PVT. LTD
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: samparksoftwares
      type: user
    createdAt: '2023-12-29T12:27:35.000Z'
    data:
      edited: false
      editors:
      - samparksoftwares
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8911391496658325
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
          fullname: SAMPARK SOFTWARES PVT. LTD
          isHf: false
          isPro: true
          name: samparksoftwares
          type: user
        html: '<p>I have attributes like system prompt, chat history, context, and
          question can you help me with how to customize the prompt to get complete
          answers.</p>

          '
        raw: 'I have attributes like system prompt, chat history, context, and question
          can you help me with how to customize the prompt to get complete answers.

          '
        updatedAt: '2023-12-29T12:27:35.107Z'
      numEdits: 0
      reactions: []
    id: 658ebb37315340de5ff8168e
    type: comment
  author: samparksoftwares
  content: 'I have attributes like system prompt, chat history, context, and question
    can you help me with how to customize the prompt to get complete answers.

    '
  created_at: 2023-12-29 12:27:35+00:00
  edited: false
  hidden: false
  id: 658ebb37315340de5ff8168e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
      fullname: None
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Thireus
      type: user
    createdAt: '2023-12-29T12:30:24.000Z'
    data:
      edited: false
      editors:
      - Thireus
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9815609455108643
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/af1201cb8f07eba487669586f75a4b32.svg
          fullname: None
          isHf: false
          isPro: false
          name: Thireus
          type: user
        html: '<p>I don''t believe this model supports system prompt, but you can
          certainly include it in the [INST] [/INST]. Chat history is just a succession
          of [INST] and answers as I''ve demonstrated in my previous post.</p>

          '
        raw: I don't believe this model supports system prompt, but you can certainly
          include it in the [INST] [/INST]. Chat history is just a succession of [INST]
          and answers as I've demonstrated in my previous post.
        updatedAt: '2023-12-29T12:30:24.314Z'
      numEdits: 0
      reactions: []
    id: 658ebbe0b72f4ce63bfc526a
    type: comment
  author: Thireus
  content: I don't believe this model supports system prompt, but you can certainly
    include it in the [INST] [/INST]. Chat history is just a succession of [INST]
    and answers as I've demonstrated in my previous post.
  created_at: 2023-12-29 12:30:24+00:00
  edited: false
  hidden: false
  id: 658ebbe0b72f4ce63bfc526a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
      fullname: SAMPARK SOFTWARES PVT. LTD
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: samparksoftwares
      type: user
    createdAt: '2024-01-02T09:32:36.000Z'
    data:
      edited: true
      editors:
      - samparksoftwares
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8712581992149353
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/0ef11485ba59a2263ca0dbf4b3f9928b.svg
          fullname: SAMPARK SOFTWARES PVT. LTD
          isHf: false
          isPro: true
          name: samparksoftwares
          type: user
        html: '<p>I have been using this format:<br>B_INST, E_INST = "[INST]","[/INST]"<br>SYSTEM_PROMPT
          = B_SYS + prompt + E_SYS<br>instruction = """<br>Context:{chat_history}
          \n {context}<br>User:{question}"""</p>

          <p>prompt_template = B_INST + SYSTEM_PROMPT + instruction + E_INST</p>

          <p>this format is not giving complete answer and if you can help me correct
          this format that will be very helpful.</p>

          '
        raw: 'I have been using this format:

          B_INST, E_INST = "[INST]","[/INST]"

          SYSTEM_PROMPT = B_SYS + prompt + E_SYS

          instruction = """

          Context:{chat_history} \n {context}

          User:{question}"""


          prompt_template = B_INST + SYSTEM_PROMPT + instruction + E_INST


          this format is not giving complete answer and if you can help me correct
          this format that will be very helpful.'
        updatedAt: '2024-01-02T09:35:15.647Z'
      numEdits: 2
      reactions: []
    id: 6593d8343ce574ff3cfe83bf
    type: comment
  author: samparksoftwares
  content: 'I have been using this format:

    B_INST, E_INST = "[INST]","[/INST]"

    SYSTEM_PROMPT = B_SYS + prompt + E_SYS

    instruction = """

    Context:{chat_history} \n {context}

    User:{question}"""


    prompt_template = B_INST + SYSTEM_PROMPT + instruction + E_INST


    this format is not giving complete answer and if you can help me correct this
    format that will be very helpful.'
  created_at: 2024-01-02 09:32:36+00:00
  edited: true
  hidden: false
  id: 6593d8343ce574ff3cfe83bf
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 59
repo_id: mistralai/Mixtral-8x7B-Instruct-v0.1
repo_type: model
status: open
target_branch: null
title: Incomplete Answers
