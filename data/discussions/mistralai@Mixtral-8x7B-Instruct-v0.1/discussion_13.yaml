!!python/object:huggingface_hub.community.DiscussionWithDetails
author: dragosmc
conflicting_files: null
created_at: 2023-12-12 09:54:05+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
      fullname: Dragos Ciupureanu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dragosmc
      type: user
    createdAt: '2023-12-12T09:54:05.000Z'
    data:
      edited: true
      editors:
      - dragosmc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5866896510124207
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
          fullname: Dragos Ciupureanu
          isHf: false
          isPro: false
          name: dragosmc
          type: user
        html: "<p>Hi,</p>\n<p>The HF inference endpoint fails to deploy with </p>\n\
          <pre><code> get_model(File \\\"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/__init__.py\\\
          \", line 317, in get_model\n raise NotImplementedError(\\n\\nNotImplementedError:\
          \ Mixtral models requires flash attention v2, stk and megablocks\\n\"}\n\
          </code></pre>\n<p>Any thoughts on this?</p>\n<p>LE: Another attempt in fails\
          \ with</p>\n<pre><code>raise NotImplementedError(\\\"Mixtral does not support\
          \ weight quantization yet.\\\")\\n\\nNotImplementedError: Mixtral does not\
          \ support weight quantization yet.\\n\"}\n</code></pre>\n"
        raw: "Hi,\n\nThe HF inference endpoint fails to deploy with \n```\n get_model(File\
          \ \\\"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/__init__.py\\\
          \", line 317, in get_model\n raise NotImplementedError(\\n\\nNotImplementedError:\
          \ Mixtral models requires flash attention v2, stk and megablocks\\n\"}\n\
          ```\n\nAny thoughts on this?\n\nLE: Another attempt in fails with\n```\n\
          raise NotImplementedError(\\\"Mixtral does not support weight quantization\
          \ yet.\\\")\\n\\nNotImplementedError: Mixtral does not support weight quantization\
          \ yet.\\n\"}\n```\n"
        updatedAt: '2023-12-12T10:07:23.717Z'
      numEdits: 2
      reactions: []
    id: 65782dbd411e14898b943506
    type: comment
  author: dragosmc
  content: "Hi,\n\nThe HF inference endpoint fails to deploy with \n```\n get_model(File\
    \ \\\"/opt/conda/lib/python3.10/site-packages/text_generation_server/models/__init__.py\\\
    \", line 317, in get_model\n raise NotImplementedError(\\n\\nNotImplementedError:\
    \ Mixtral models requires flash attention v2, stk and megablocks\\n\"}\n```\n\n\
    Any thoughts on this?\n\nLE: Another attempt in fails with\n```\nraise NotImplementedError(\\\
    \"Mixtral does not support weight quantization yet.\\\")\\n\\nNotImplementedError:\
    \ Mixtral does not support weight quantization yet.\\n\"}\n```\n"
  created_at: 2023-12-12 09:54:05+00:00
  edited: true
  hidden: false
  id: 65782dbd411e14898b943506
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-12-12T10:53:54.000Z'
    data:
      edited: true
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8561419248580933
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: '<p>What instance type, container and config did you use? The default
          config should work with 2x A100 80GBs or use that link <a rel="nofollow"
          href="https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&amp;vendor=aws&amp;region=us-east-1&amp;accelerator=gpu&amp;instance_size=2xlarge&amp;task=text-generation&amp;no_suggested_compute=true&amp;tgi=true&amp;tgi_max_batch_total_tokens=1024000&amp;tgi_max_total_tokens=32000">https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&amp;vendor=aws&amp;region=us-east-1&amp;accelerator=gpu&amp;instance_size=2xlarge&amp;task=text-generation&amp;no_suggested_compute=true&amp;tgi=true&amp;tgi_max_batch_total_tokens=1024000&amp;tgi_max_total_tokens=32000</a></p>

          '
        raw: What instance type, container and config did you use? The default config
          should work with 2x A100 80GBs or use that link https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&vendor=aws&region=us-east-1&accelerator=gpu&instance_size=2xlarge&task=text-generation&no_suggested_compute=true&tgi=true&tgi_max_batch_total_tokens=1024000&tgi_max_total_tokens=32000
        updatedAt: '2023-12-12T10:55:06.819Z'
      numEdits: 1
      reactions: []
    id: 65783bc2e390cfd4099f0c36
    type: comment
  author: philschmid
  content: What instance type, container and config did you use? The default config
    should work with 2x A100 80GBs or use that link https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&vendor=aws&region=us-east-1&accelerator=gpu&instance_size=2xlarge&task=text-generation&no_suggested_compute=true&tgi=true&tgi_max_batch_total_tokens=1024000&tgi_max_total_tokens=32000
  created_at: 2023-12-12 10:53:54+00:00
  edited: true
  hidden: false
  id: 65783bc2e390cfd4099f0c36
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
      fullname: Dragos Ciupureanu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dragosmc
      type: user
    createdAt: '2023-12-12T11:02:03.000Z'
    data:
      edited: true
      editors:
      - dragosmc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9755273461341858
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
          fullname: Dragos Ciupureanu
          isHf: false
          isPro: false
          name: dragosmc
          type: user
        html: '<p>Gotcha, thanks for the info. I was following the UI and tried with
          the first available instance type that didn''t say "Low Memory". Will try
          with 2xA100 once I get access to it. Thanks.</p>

          '
        raw: Gotcha, thanks for the info. I was following the UI and tried with the
          first available instance type that didn't say "Low Memory". Will try with
          2xA100 once I get access to it. Thanks.
        updatedAt: '2023-12-12T11:03:28.160Z'
      numEdits: 1
      reactions: []
    id: 65783dab32150025acb336f6
    type: comment
  author: dragosmc
  content: Gotcha, thanks for the info. I was following the UI and tried with the
    first available instance type that didn't say "Low Memory". Will try with 2xA100
    once I get access to it. Thanks.
  created_at: 2023-12-12 11:02:03+00:00
  edited: true
  hidden: false
  id: 65783dab32150025acb336f6
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
      fullname: Dragos Ciupureanu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dragosmc
      type: user
    createdAt: '2023-12-12T13:05:59.000Z'
    data:
      edited: false
      editors:
      - dragosmc
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6030497550964355
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
          fullname: Dragos Ciupureanu
          isHf: false
          isPro: false
          name: dragosmc
          type: user
        html: '<blockquote>

          <p>What instance type, container and config did you use? The default config
          should work with 2x A100 80GBs or use that link <a rel="nofollow" href="https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&amp;vendor=aws&amp;region=us-east-1&amp;accelerator=gpu&amp;instance_size=2xlarge&amp;task=text-generation&amp;no_suggested_compute=true&amp;tgi=true&amp;tgi_max_batch_total_tokens=1024000&amp;tgi_max_total_tokens=32000">https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&amp;vendor=aws&amp;region=us-east-1&amp;accelerator=gpu&amp;instance_size=2xlarge&amp;task=text-generation&amp;no_suggested_compute=true&amp;tgi=true&amp;tgi_max_batch_total_tokens=1024000&amp;tgi_max_total_tokens=32000</a></p>

          </blockquote>

          <p>Got acces to 2xA100 and not it doesn''t seem to go past this point</p>

          <pre><code>requests.exceptions.ConnectionError: HTTPSConnectionPool(host=''huggingface.co'',
          port=443): Max retries exceeded with url: /api/whoami-v2 (Caused by NameResolutionError("&lt;urllib3.connection.HTTPSConnection
          object at 0x7f88d9b97b80&gt;: Failed to resolve ''huggingface.co'' ([Errno
          -3] Temporary failure in name resolution)"))

          </code></pre>

          <p>Anything else you reckon I should try?</p>

          '
        raw: '> What instance type, container and config did you use? The default
          config should work with 2x A100 80GBs or use that link https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&vendor=aws&region=us-east-1&accelerator=gpu&instance_size=2xlarge&task=text-generation&no_suggested_compute=true&tgi=true&tgi_max_batch_total_tokens=1024000&tgi_max_total_tokens=32000


          Got acces to 2xA100 and not it doesn''t seem to go past this point

          ```

          requests.exceptions.ConnectionError: HTTPSConnectionPool(host=''huggingface.co'',
          port=443): Max retries exceeded with url: /api/whoami-v2 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection
          object at 0x7f88d9b97b80>: Failed to resolve ''huggingface.co'' ([Errno
          -3] Temporary failure in name resolution)"))

          ```

          Anything else you reckon I should try?'
        updatedAt: '2023-12-12T13:05:59.569Z'
      numEdits: 0
      reactions: []
    id: 65785ab7528e89e35f487c22
    type: comment
  author: dragosmc
  content: '> What instance type, container and config did you use? The default config
    should work with 2x A100 80GBs or use that link https://ui.endpoints.huggingface.co/new?repository=mistralai%2FMixtral-8x7B-Instruct-v0.1&vendor=aws&region=us-east-1&accelerator=gpu&instance_size=2xlarge&task=text-generation&no_suggested_compute=true&tgi=true&tgi_max_batch_total_tokens=1024000&tgi_max_total_tokens=32000


    Got acces to 2xA100 and not it doesn''t seem to go past this point

    ```

    requests.exceptions.ConnectionError: HTTPSConnectionPool(host=''huggingface.co'',
    port=443): Max retries exceeded with url: /api/whoami-v2 (Caused by NameResolutionError("<urllib3.connection.HTTPSConnection
    object at 0x7f88d9b97b80>: Failed to resolve ''huggingface.co'' ([Errno -3] Temporary
    failure in name resolution)"))

    ```

    Anything else you reckon I should try?'
  created_at: 2023-12-12 13:05:59+00:00
  edited: false
  hidden: false
  id: 65785ab7528e89e35f487c22
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/b6b7c7ce6eec056e63f8fa5f704b1154.svg
      fullname: Dragos Ciupureanu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: dragosmc
      type: user
    createdAt: '2023-12-12T13:54:28.000Z'
    data:
      status: closed
    id: 65786614e390cfd409a64856
    type: status-change
  author: dragosmc
  created_at: 2023-12-12 13:54:28+00:00
  id: 65786614e390cfd409a64856
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 13
repo_id: mistralai/Mixtral-8x7B-Instruct-v0.1
repo_type: model
status: closed
target_branch: null
title: Inference endpoint fails to deploy
