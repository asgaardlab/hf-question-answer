!!python/object:huggingface_hub.community.DiscussionWithDetails
author: sudhir2016
conflicting_files: null
created_at: 2024-01-17 17:46:29+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c3b817a7b558e0667652ead31747967.svg
      fullname: Sudhir Gupta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sudhir2016
      type: user
    createdAt: '2024-01-17T17:46:29.000Z'
    data:
      edited: false
      editors:
      - sudhir2016
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6181535124778748
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c3b817a7b558e0667652ead31747967.svg
          fullname: Sudhir Gupta
          isHf: false
          isPro: false
          name: sudhir2016
          type: user
        html: '<p>I tried to replicate using your LazyMergeKit notebook as a learning
          exercise. This yaml_config gives an error that positive_prompts are same
          for both experts.<br>base_model: cognitivecomputations/dolphin-2_6-phi-2<br>gate_mode:
          cheap_embed<br>experts:</p>

          <ul>

          <li>source_model: cognitivecomputations/dolphin-2_6-phi-2<br>positive_prompts:
          [""]</li>

          <li>source_model: lxuechen/phi-2-dpo<br>positive_prompts: [""]</li>

          </ul>

          <p>Then I changed yaml_config like this<br>MODEL_NAME = "Phixtral-Merge"<br>yaml_config
          = """<br>base_model: cognitivecomputations/dolphin-2_6-phi-2<br>gate_mode:
          cheap_embed<br>experts:</p>

          <ul>

          <li>source_model: cognitivecomputations/dolphin-2_6-phi-2<br>positive_prompts:
          ["code"]</li>

          <li>source_model: lxuechen/phi-2-dpo<br>positive_prompts: ["math"]<br>"""<br>This
          time I got this error.<br> File "/content/mergekit/mergekit/io/lazy_tensor_loader.py",
          line 127, in get_tensor<br>raise KeyError(key)<br>KeyError: ''model.embed_tokens.weight''</li>

          </ul>

          <p>Please help.</p>

          '
        raw: "I tried to replicate using your LazyMergeKit notebook as a learning\
          \ exercise. This yaml_config gives an error that positive_prompts are same\
          \ for both experts. \r\nbase_model: cognitivecomputations/dolphin-2_6-phi-2\r\
          \ngate_mode: cheap_embed\r\nexperts:\r\n  - source_model: cognitivecomputations/dolphin-2_6-phi-2\r\
          \n    positive_prompts: [\"\"]\r\n  - source_model: lxuechen/phi-2-dpo\r\
          \n    positive_prompts: [\"\"]\r\n\r\nThen I changed yaml_config like this\r\
          \nMODEL_NAME = \"Phixtral-Merge\"\r\nyaml_config = \"\"\"\r\nbase_model:\
          \ cognitivecomputations/dolphin-2_6-phi-2\r\ngate_mode: cheap_embed\r\n\
          experts:\r\n  - source_model: cognitivecomputations/dolphin-2_6-phi-2\r\n\
          \    positive_prompts: [\"code\"]\r\n  - source_model: lxuechen/phi-2-dpo\r\
          \n    positive_prompts: [\"math\"]\r\n    \"\"\"\r\nThis time I got this\
          \ error.\r\n File \"/content/mergekit/mergekit/io/lazy_tensor_loader.py\"\
          , line 127, in get_tensor\r\n    raise KeyError(key)\r\nKeyError: 'model.embed_tokens.weight'\r\
          \n\r\nPlease help."
        updatedAt: '2024-01-17T17:46:29.955Z'
      numEdits: 0
      reactions: []
    id: 65a81275503be1d8308795e9
    type: comment
  author: sudhir2016
  content: "I tried to replicate using your LazyMergeKit notebook as a learning exercise.\
    \ This yaml_config gives an error that positive_prompts are same for both experts.\
    \ \r\nbase_model: cognitivecomputations/dolphin-2_6-phi-2\r\ngate_mode: cheap_embed\r\
    \nexperts:\r\n  - source_model: cognitivecomputations/dolphin-2_6-phi-2\r\n  \
    \  positive_prompts: [\"\"]\r\n  - source_model: lxuechen/phi-2-dpo\r\n    positive_prompts:\
    \ [\"\"]\r\n\r\nThen I changed yaml_config like this\r\nMODEL_NAME = \"Phixtral-Merge\"\
    \r\nyaml_config = \"\"\"\r\nbase_model: cognitivecomputations/dolphin-2_6-phi-2\r\
    \ngate_mode: cheap_embed\r\nexperts:\r\n  - source_model: cognitivecomputations/dolphin-2_6-phi-2\r\
    \n    positive_prompts: [\"code\"]\r\n  - source_model: lxuechen/phi-2-dpo\r\n\
    \    positive_prompts: [\"math\"]\r\n    \"\"\"\r\nThis time I got this error.\r\
    \n File \"/content/mergekit/mergekit/io/lazy_tensor_loader.py\", line 127, in\
    \ get_tensor\r\n    raise KeyError(key)\r\nKeyError: 'model.embed_tokens.weight'\r\
    \n\r\nPlease help."
  created_at: 2024-01-17 17:46:29+00:00
  edited: false
  hidden: false
  id: 65a81275503be1d8308795e9
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
      fullname: Maxime Labonne
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: mlabonne
      type: user
    createdAt: '2024-01-18T00:59:59.000Z'
    data:
      edited: false
      editors:
      - mlabonne
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9557539820671082
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/61b8e2ba285851687028d395/4XZP5aVsMWwzGx_313cqd.jpeg?w=200&h=200&f=face
          fullname: Maxime Labonne
          isHf: false
          isPro: false
          name: mlabonne
          type: user
        html: '<p>Sorry that''s normal, I modified mergekit''s code to produce phixtral.
          This branch hasn''t been released yet (still need to work on it).</p>

          '
        raw: Sorry that's normal, I modified mergekit's code to produce phixtral.
          This branch hasn't been released yet (still need to work on it).
        updatedAt: '2024-01-18T00:59:59.537Z'
      numEdits: 0
      reactions: []
    id: 65a8780fc5ffe1d019e5da44
    type: comment
  author: mlabonne
  content: Sorry that's normal, I modified mergekit's code to produce phixtral. This
    branch hasn't been released yet (still need to work on it).
  created_at: 2024-01-18 00:59:59+00:00
  edited: false
  hidden: false
  id: 65a8780fc5ffe1d019e5da44
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9c3b817a7b558e0667652ead31747967.svg
      fullname: Sudhir Gupta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sudhir2016
      type: user
    createdAt: '2024-01-18T13:34:31.000Z'
    data:
      edited: false
      editors:
      - sudhir2016
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.835115909576416
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9c3b817a7b558e0667652ead31747967.svg
          fullname: Sudhir Gupta
          isHf: false
          isPro: false
          name: sudhir2016
          type: user
        html: '<p>OK thanks.</p>

          '
        raw: OK thanks.
        updatedAt: '2024-01-18T13:34:31.549Z'
      numEdits: 0
      reactions: []
      relatedEventId: 65a928e7206a2a9fd05dd973
    id: 65a928e7206a2a9fd05dd970
    type: comment
  author: sudhir2016
  content: OK thanks.
  created_at: 2024-01-18 13:34:31+00:00
  edited: false
  hidden: false
  id: 65a928e7206a2a9fd05dd970
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/9c3b817a7b558e0667652ead31747967.svg
      fullname: Sudhir Gupta
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sudhir2016
      type: user
    createdAt: '2024-01-18T13:34:31.000Z'
    data:
      status: closed
    id: 65a928e7206a2a9fd05dd973
    type: status-change
  author: sudhir2016
  created_at: 2024-01-18 13:34:31+00:00
  id: 65a928e7206a2a9fd05dd973
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 3
repo_id: mlabonne/phixtral-2x2_8
repo_type: model
status: closed
target_branch: null
title: Unable to replicate using LazyMergeKit Colab
