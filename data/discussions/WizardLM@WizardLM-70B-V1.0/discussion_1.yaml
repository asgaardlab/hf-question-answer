!!python/object:huggingface_hub.community.DiscussionWithDetails
author: philschmid
conflicting_files: null
created_at: 2023-08-09 13:30:51+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-08-09T14:30:51.000Z'
    data:
      edited: false
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8874030709266663
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: "<p>In the readme you say </p>\n<blockquote>\n<p>WizardLM adopts the\
          \ prompt format from Vicuna and supports multi-turn conversation. The prompt\
          \ should be as following:</p>\n<pre><code>A chat between a curious user\
          \ and an artificial intelligence assistant. The assistant gives helpful,\
          \ detailed, and polite answers to the user's questions. USER: hello, who\
          \ are you? ASSISTANT: \n</code></pre>\n</blockquote>\n<p>Are there <code>\\\
          n</code> missing between the roles and did you use a <code>&lt;/s&gt;</code>\
          \ after the Assistant turn? Since that's what the official Vicuna format\
          \ is [<a rel=\"nofollow\" href=\"https://github.com/lm-sys/FastChat/blob/main/docs/vicuna_weights_version.md#example-prompt-weights-v11-v13-v15\"\
          >REF</a>]</p>\n<p>here an sample</p>\n<pre><code>A chat between a curious\
          \ user and an artificial intelligence assistant. The assistant gives helpful,\
          \ detailed, and polite answers to the user's questions.\n\nUSER: Hello!\n\
          ASSISTANT: Hello!&lt;/s&gt;\nUSER: How are you?\nASSISTANT: I am good.&lt;/s&gt;\n\
          </code></pre>\n"
        raw: "In the readme you say \r\n> WizardLM adopts the prompt format from Vicuna\
          \ and supports multi-turn conversation. The prompt should be as following:\r\
          \n>```\r\n>A chat between a curious user and an artificial intelligence\
          \ assistant. The assistant gives helpful, detailed, and polite answers to\
          \ the user's questions. USER: hello, who are you? ASSISTANT: \r\n>```\r\n\
          \r\nAre there `\\n` missing between the roles and did you use a `</s>` after\
          \ the Assistant turn? Since that's what the official Vicuna format is [[REF](https://github.com/lm-sys/FastChat/blob/main/docs/vicuna_weights_version.md#example-prompt-weights-v11-v13-v15)]\r\
          \n\r\nhere an sample\r\n\r\n```\r\nA chat between a curious user and an\
          \ artificial intelligence assistant. The assistant gives helpful, detailed,\
          \ and polite answers to the user's questions.\r\n\r\nUSER: Hello!\r\nASSISTANT:\
          \ Hello!</s>\r\nUSER: How are you?\r\nASSISTANT: I am good.</s>\r\n```"
        updatedAt: '2023-08-09T14:30:51.975Z'
      numEdits: 0
      reactions:
      - count: 4
        reaction: "\U0001F44D"
        users:
        - acrastt
        - practical-dreamer
        - cosmojg
        - librehash
    id: 64d3a31bf8082bf19b761279
    type: comment
  author: philschmid
  content: "In the readme you say \r\n> WizardLM adopts the prompt format from Vicuna\
    \ and supports multi-turn conversation. The prompt should be as following:\r\n\
    >```\r\n>A chat between a curious user and an artificial intelligence assistant.\
    \ The assistant gives helpful, detailed, and polite answers to the user's questions.\
    \ USER: hello, who are you? ASSISTANT: \r\n>```\r\n\r\nAre there `\\n` missing\
    \ between the roles and did you use a `</s>` after the Assistant turn? Since that's\
    \ what the official Vicuna format is [[REF](https://github.com/lm-sys/FastChat/blob/main/docs/vicuna_weights_version.md#example-prompt-weights-v11-v13-v15)]\r\
    \n\r\nhere an sample\r\n\r\n```\r\nA chat between a curious user and an artificial\
    \ intelligence assistant. The assistant gives helpful, detailed, and polite answers\
    \ to the user's questions.\r\n\r\nUSER: Hello!\r\nASSISTANT: Hello!</s>\r\nUSER:\
    \ How are you?\r\nASSISTANT: I am good.</s>\r\n```"
  created_at: 2023-08-09 13:30:51+00:00
  edited: false
  hidden: false
  id: 64d3a31bf8082bf19b761279
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
      fullname: Eric Hartford
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: ehartford
      type: user
    createdAt: '2023-08-09T21:24:42.000Z'
    data:
      edited: true
      editors:
      - ehartford
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9151791334152222
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/u2a9y-yx6TG0N31OhMSHI.png?w=200&h=200&f=face
          fullname: Eric Hartford
          isHf: false
          isPro: true
          name: ehartford
          type: user
        html: '<p> Also note, that according to the config.json, this model was trained
          on top of Llama-2-70b-chat-hf rather than Llama-2-70b-hf.</p>

          <p><a rel="nofollow" href="https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/ATosnU--0IHhTtNxUJLvC.png"><img
          alt="image.png" src="https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/ATosnU--0IHhTtNxUJLvC.png"></a></p>

          <p>and, Llama-2-70b-chat-hf has a prompt format like:</p>

          <pre><code>[INST] &lt;&lt;SYS&gt;&gt;

          You are a helpful, respectful and honest assistant. Always answer as helpfully
          as possible, while being safe.  Your answers should not include any harmful,
          unethical, racist, sexist, toxic, dangerous, or illegal content. Please
          ensure that your responses are socially unbiased and positive in nature.
          If a question does not make any sense, or is not factually coherent, explain
          why instead of answering something not correct. If you don''t know the answer
          to a question, please don''t share false information.

          &lt;&lt;/SYS&gt;&gt;


          {prompt} [/INST]

          </code></pre>

          <p>To continue a conversation:</p>

          <pre><code>[INST] &lt;&lt;SYS&gt;&gt;

          You are a helpful, respectful and honest assistant. Always answer as helpfully
          as possible, while being safe.  Your answers should not include any harmful,
          unethical, racist, sexist, toxic, dangerous, or illegal content. Please
          ensure that your responses are socially unbiased and positive in nature.
          If a question does not make any sense, or is not factually coherent, explain
          why instead of answering something not correct. If you don''t know the answer
          to a question, please don''t share false information.

          &lt;&lt;/SYS&gt;&gt;


          {prompt} [/INST] {model_reply} [INST] {prompt} [/INST]

          </code></pre>

          <p>So this model was trained to follow two different prompt formats, and
          I imagine its personality changes dramatically depending on which prompt
          format you use. </p>

          '
        raw: " Also note, that according to the config.json, this model was trained\
          \ on top of Llama-2-70b-chat-hf rather than Llama-2-70b-hf.\n\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/ATosnU--0IHhTtNxUJLvC.png)\n\
          \n\nand, Llama-2-70b-chat-hf has a prompt format like:\n\n```\n[INST] <<SYS>>\n\
          You are a helpful, respectful and honest assistant. Always answer as helpfully\
          \ as possible, while being safe.  Your answers should not include any harmful,\
          \ unethical, racist, sexist, toxic, dangerous, or illegal content. Please\
          \ ensure that your responses are socially unbiased and positive in nature.\
          \ If a question does not make any sense, or is not factually coherent, explain\
          \ why instead of answering something not correct. If you don't know the\
          \ answer to a question, please don't share false information.\n<</SYS>>\n\
          \n{prompt} [/INST]\n```\nTo continue a conversation:\n```\n[INST] <<SYS>>\n\
          You are a helpful, respectful and honest assistant. Always answer as helpfully\
          \ as possible, while being safe.  Your answers should not include any harmful,\
          \ unethical, racist, sexist, toxic, dangerous, or illegal content. Please\
          \ ensure that your responses are socially unbiased and positive in nature.\
          \ If a question does not make any sense, or is not factually coherent, explain\
          \ why instead of answering something not correct. If you don't know the\
          \ answer to a question, please don't share false information.\n<</SYS>>\n\
          \n{prompt} [/INST] {model_reply} [INST] {prompt} [/INST]\n```\n\nSo this\
          \ model was trained to follow two different prompt formats, and I imagine\
          \ its personality changes dramatically depending on which prompt format\
          \ you use. \n"
        updatedAt: '2023-08-09T21:47:06.260Z'
      numEdits: 3
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - acrastt
    id: 64d4041ac34a346181a6e08f
    type: comment
  author: ehartford
  content: " Also note, that according to the config.json, this model was trained\
    \ on top of Llama-2-70b-chat-hf rather than Llama-2-70b-hf.\n\n\n![image.png](https://cdn-uploads.huggingface.co/production/uploads/63111b2d88942700629f5771/ATosnU--0IHhTtNxUJLvC.png)\n\
    \n\nand, Llama-2-70b-chat-hf has a prompt format like:\n\n```\n[INST] <<SYS>>\n\
    You are a helpful, respectful and honest assistant. Always answer as helpfully\
    \ as possible, while being safe.  Your answers should not include any harmful,\
    \ unethical, racist, sexist, toxic, dangerous, or illegal content. Please ensure\
    \ that your responses are socially unbiased and positive in nature. If a question\
    \ does not make any sense, or is not factually coherent, explain why instead of\
    \ answering something not correct. If you don't know the answer to a question,\
    \ please don't share false information.\n<</SYS>>\n\n{prompt} [/INST]\n```\nTo\
    \ continue a conversation:\n```\n[INST] <<SYS>>\nYou are a helpful, respectful\
    \ and honest assistant. Always answer as helpfully as possible, while being safe.\
    \  Your answers should not include any harmful, unethical, racist, sexist, toxic,\
    \ dangerous, or illegal content. Please ensure that your responses are socially\
    \ unbiased and positive in nature. If a question does not make any sense, or is\
    \ not factually coherent, explain why instead of answering something not correct.\
    \ If you don't know the answer to a question, please don't share false information.\n\
    <</SYS>>\n\n{prompt} [/INST] {model_reply} [INST] {prompt} [/INST]\n```\n\nSo\
    \ this model was trained to follow two different prompt formats, and I imagine\
    \ its personality changes dramatically depending on which prompt format you use.\
    \ \n"
  created_at: 2023-08-09 20:24:42+00:00
  edited: true
  hidden: false
  id: 64d4041ac34a346181a6e08f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/627b9f3f4d0858f0034efbb9/2Qnattrzv6qvqiZVVfV5x.png?w=200&h=200&f=face
      fullname: WizardLM
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: WizardLM
      type: user
    createdAt: '2023-08-14T07:31:23.000Z'
    data:
      edited: false
      editors:
      - WizardLM
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8523496389389038
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/627b9f3f4d0858f0034efbb9/2Qnattrzv6qvqiZVVfV5x.png?w=200&h=200&f=face
          fullname: WizardLM
          isHf: false
          isPro: false
          name: WizardLM
          type: user
        html: '<p><b>WizardLM</b>  adopts the prompt format from <b>Vicuna</b> and
          supports <strong>multi-turn</strong> conversation. The prompt should be
          as following:</p>

          <pre><code>A chat between a curious user and an artificial intelligence
          assistant. The assistant gives helpful, detailed, and polite answers to
          the user''s questions. USER: Hi ASSISTANT: Hello.&lt;/s&gt;USER: Who are
          you? ASSISTANT: I am WizardLM.&lt;/s&gt;......

          </code></pre>

          '
        raw: '

          <b>WizardLM</b>  adopts the prompt format from <b>Vicuna</b> and supports
          **multi-turn** conversation. The prompt should be as following:


          ```

          A chat between a curious user and an artificial intelligence assistant.
          The assistant gives helpful, detailed, and polite answers to the user''s
          questions. USER: Hi ASSISTANT: Hello.</s>USER: Who are you? ASSISTANT: I
          am WizardLM.</s>......

          ```'
        updatedAt: '2023-08-14T07:31:23.402Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - anttip
    id: 64d9d84ba146b1c0a6c4f98f
    type: comment
  author: WizardLM
  content: '

    <b>WizardLM</b>  adopts the prompt format from <b>Vicuna</b> and supports **multi-turn**
    conversation. The prompt should be as following:


    ```

    A chat between a curious user and an artificial intelligence assistant. The assistant
    gives helpful, detailed, and polite answers to the user''s questions. USER: Hi
    ASSISTANT: Hello.</s>USER: Who are you? ASSISTANT: I am WizardLM.</s>......

    ```'
  created_at: 2023-08-14 06:31:23+00:00
  edited: false
  hidden: false
  id: 64d9d84ba146b1c0a6c4f98f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
      fullname: Philipp Schmid
      isHf: true
      isOrgMember: false
      isOwner: false
      isPro: false
      name: philschmid
      type: user
    createdAt: '2023-08-14T07:41:13.000Z'
    data:
      edited: false
      editors:
      - philschmid
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.923279345035553
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1624629516652-5ff5d596f244529b3ec0fb89.png?w=200&h=200&f=face
          fullname: Philipp Schmid
          isHf: true
          isPro: false
          name: philschmid
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;WizardLM&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/WizardLM\"\
          >@<span class=\"underline\">WizardLM</span></a></span>\n\n\t</span></span>,</p>\n\
          <p>Thank you for the response! I see in your comment that you have <code>&lt;/s&gt;</code>\
          \ added after the ASSISTANT turn. Any chance you can answer if there should\
          \ be <code>\\n</code> between the turns as Vicuna does?<br>meaning is the\
          \ prompt like the one below?</p>\n<pre><code class=\"language-bash\">A chat\
          \ between a curious user and an artificial intelligence assistant. The assistant\
          \ gives helpful, detailed, and polite answers to the user<span class=\"\
          hljs-string\">'s questions.</span>\n<span class=\"hljs-string\"></span>\n\
          <span class=\"hljs-string\">USER: Hello!</span>\n<span class=\"hljs-string\"\
          >ASSISTANT: Hello!&lt;/s&gt;</span>\n<span class=\"hljs-string\">USER: How\
          \ are you?</span>\n<span class=\"hljs-string\">ASSISTANT: I am good.&lt;/s&gt;</span>\n\
          </code></pre>\n"
        raw: "Hey @WizardLM,\n\nThank you for the response! I see in your comment\
          \ that you have `</s>` added after the ASSISTANT turn. Any chance you can\
          \ answer if there should be `\\n` between the turns as Vicuna does? \nmeaning\
          \ is the prompt like the one below?\n```bash\nA chat between a curious user\
          \ and an artificial intelligence assistant. The assistant gives helpful,\
          \ detailed, and polite answers to the user's questions.\n\nUSER: Hello!\n\
          ASSISTANT: Hello!</s>\nUSER: How are you?\nASSISTANT: I am good.</s>\n```"
        updatedAt: '2023-08-14T07:41:13.603Z'
      numEdits: 0
      reactions:
      - count: 6
        reaction: "\U0001F44D"
        users:
        - Rachik
        - thies
        - adrish
        - zzlxv
        - MaziyarPanahi
        - rbattle
    id: 64d9da992735264764a3e1c3
    type: comment
  author: philschmid
  content: "Hey @WizardLM,\n\nThank you for the response! I see in your comment that\
    \ you have `</s>` added after the ASSISTANT turn. Any chance you can answer if\
    \ there should be `\\n` between the turns as Vicuna does? \nmeaning is the prompt\
    \ like the one below?\n```bash\nA chat between a curious user and an artificial\
    \ intelligence assistant. The assistant gives helpful, detailed, and polite answers\
    \ to the user's questions.\n\nUSER: Hello!\nASSISTANT: Hello!</s>\nUSER: How are\
    \ you?\nASSISTANT: I am good.</s>\n```"
  created_at: 2023-08-14 06:41:13+00:00
  edited: false
  hidden: false
  id: 64d9da992735264764a3e1c3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fd5e18a90b6dc4633f6d292/gZXHW5dd9R86AV9LMZ--y.png?w=200&h=200&f=face
      fullname: Maziyar Panahi
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: MaziyarPanahi
      type: user
    createdAt: '2023-10-21T18:41:43.000Z'
    data:
      edited: false
      editors:
      - MaziyarPanahi
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8776805400848389
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/5fd5e18a90b6dc4633f6d292/gZXHW5dd9R86AV9LMZ--y.png?w=200&h=200&f=face
          fullname: Maziyar Panahi
          isHf: false
          isPro: false
          name: MaziyarPanahi
          type: user
        html: '<p>I am trying to use <code>WizardLM</code> model in <code>chat-conversational-react-description</code>
          and the prompt schema inside ChatPrompt has a big impact on the result specially
          in the conversation. I tried but <code>USER/ASSISTANT</code> with <code>&lt;/s&gt;</code>
          and the usual Llama-2 style, I am not sure which prompting style should
          be the best when it comes to the begin/end of system, user, and assistant
          roles. </p>

          '
        raw: 'I am trying to use `WizardLM` model in `chat-conversational-react-description`
          and the prompt schema inside ChatPrompt has a big impact on the result specially
          in the conversation. I tried but `USER/ASSISTANT` with `</s>` and the usual
          Llama-2 style, I am not sure which prompting style should be the best when
          it comes to the begin/end of system, user, and assistant roles. '
        updatedAt: '2023-10-21T18:41:43.440Z'
      numEdits: 0
      reactions: []
    id: 65341b67910b8447868bfcdf
    type: comment
  author: MaziyarPanahi
  content: 'I am trying to use `WizardLM` model in `chat-conversational-react-description`
    and the prompt schema inside ChatPrompt has a big impact on the result specially
    in the conversation. I tried but `USER/ASSISTANT` with `</s>` and the usual Llama-2
    style, I am not sure which prompting style should be the best when it comes to
    the begin/end of system, user, and assistant roles. '
  created_at: 2023-10-21 17:41:43+00:00
  edited: false
  hidden: false
  id: 65341b67910b8447868bfcdf
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: WizardLM/WizardLM-70B-V1.0
repo_type: model
status: open
target_branch: null
title: Prompt Format
