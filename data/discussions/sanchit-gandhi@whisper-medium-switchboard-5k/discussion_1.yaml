!!python/object:huggingface_hub.community.DiscussionWithDetails
author: mezaros
conflicting_files: null
created_at: 2022-10-15 16:11:25+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665853604503-noauth.png?w=200&h=200&f=face
      fullname: Myke E. Zaros
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: mezaros
      type: user
    createdAt: '2022-10-15T17:11:25.000Z'
    data:
      edited: true
      editors:
      - mezaros
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1665853604503-noauth.png?w=200&h=200&f=face
          fullname: Myke E. Zaros
          isHf: false
          isPro: false
          name: mezaros
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ Hello! Are you actively working on this? I'm following along eagerly,\
          \ as I desperately need to fine-tune the large model to always indicate\
          \ when the speaker turns. (You can get this somewhat working with a modified\
          \ prompt, but it readily fails.)</p>\n"
        raw: '@sanchit-gandhi Hello! Are you actively working on this? I''m following
          along eagerly, as I desperately need to fine-tune the large model to always
          indicate when the speaker turns. (You can get this somewhat working with
          a modified prompt, but it readily fails.)'
        updatedAt: '2022-10-15T17:11:48.535Z'
      numEdits: 1
      reactions: []
    id: 634ae9bd1fd4a53b672a436f
    type: comment
  author: mezaros
  content: '@sanchit-gandhi Hello! Are you actively working on this? I''m following
    along eagerly, as I desperately need to fine-tune the large model to always indicate
    when the speaker turns. (You can get this somewhat working with a modified prompt,
    but it readily fails.)'
  created_at: 2022-10-15 16:11:25+00:00
  edited: true
  hidden: false
  id: 634ae9bd1fd4a53b672a436f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2022-10-16T18:17:17.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey! I've opened an active PR on Transformers for ASR fine-tuning:\
          \ <a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/pull/19519\"\
          >https://github.com/huggingface/transformers/pull/19519</a></p>\n<p>Expect\
          \ a working script and blog post on the topic next week \U0001F917</p>\n"
        raw: "Hey! I've opened an active PR on Transformers for ASR fine-tuning: https://github.com/huggingface/transformers/pull/19519\n\
          \nExpect a working script and blog post on the topic next week \U0001F917"
        updatedAt: '2022-10-16T18:17:17.624Z'
      numEdits: 0
      reactions: []
    id: 634c4aad4abe8405758ab7e1
    type: comment
  author: sanchit-gandhi
  content: "Hey! I've opened an active PR on Transformers for ASR fine-tuning: https://github.com/huggingface/transformers/pull/19519\n\
    \nExpect a working script and blog post on the topic next week \U0001F917"
  created_at: 2022-10-16 17:17:17+00:00
  edited: false
  hidden: false
  id: 634c4aad4abe8405758ab7e1
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
      fullname: Daniel von Eschwege
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: daniel-v-e
      type: user
    createdAt: '2023-01-05T14:01:52.000Z'
    data:
      edited: false
      editors:
      - daniel-v-e
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
          fullname: Daniel von Eschwege
          isHf: false
          isPro: false
          name: daniel-v-e
          type: user
        html: "<blockquote>\n<p><span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ Hello! Are you actively working on this? I'm following along eagerly,\
          \ as I desperately need to fine-tune the large model to always indicate\
          \ when the speaker turns. (You can get this somewhat working with a modified\
          \ prompt, but it readily fails.)</p>\n</blockquote>\n<p><span data-props=\"\
          {&quot;user&quot;:&quot;mezaros&quot;}\" data-target=\"UserMention\" class=\"\
          SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"inline-block\"><span\
          \ class=\"contents\"><a href=\"/mezaros\">@<span class=\"underline\">mezaros</span></a></span>\n\
          \n\t</span></span> Do I understand correctly that you want Whisper to perform\
          \ speaker diarization? And, have you managed to make it work?</p>\n"
        raw: '> @sanchit-gandhi Hello! Are you actively working on this? I''m following
          along eagerly, as I desperately need to fine-tune the large model to always
          indicate when the speaker turns. (You can get this somewhat working with
          a modified prompt, but it readily fails.)


          @mezaros Do I understand correctly that you want Whisper to perform speaker
          diarization? And, have you managed to make it work?'
        updatedAt: '2023-01-05T14:01:52.507Z'
      numEdits: 0
      reactions: []
    id: 63b6d8501d2cb750d75862a0
    type: comment
  author: daniel-v-e
  content: '> @sanchit-gandhi Hello! Are you actively working on this? I''m following
    along eagerly, as I desperately need to fine-tune the large model to always indicate
    when the speaker turns. (You can get this somewhat working with a modified prompt,
    but it readily fails.)


    @mezaros Do I understand correctly that you want Whisper to perform speaker diarization?
    And, have you managed to make it work?'
  created_at: 2023-01-05 14:01:52+00:00
  edited: false
  hidden: false
  id: 63b6d8501d2cb750d75862a0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-01-05T15:18:29.000Z'
    data:
      edited: false
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Update: <a href=\"https://huggingface.co/blog/fine-tune-whisper\"\
          >blog post</a> and <a rel=\"nofollow\" href=\"https://github.com/huggingface/community-events/tree/main/whisper-fine-tuning-event\"\
          >utils</a> for fine-tuning are both readily available now! \U0001F917</p>\n"
        raw: "Update: [blog post](https://huggingface.co/blog/fine-tune-whisper) and\
          \ [utils](https://github.com/huggingface/community-events/tree/main/whisper-fine-tuning-event)\
          \ for fine-tuning are both readily available now! \U0001F917"
        updatedAt: '2023-01-05T15:18:29.837Z'
      numEdits: 0
      reactions: []
    id: 63b6ea45f168593c6fb9c6fc
    type: comment
  author: sanchit-gandhi
  content: "Update: [blog post](https://huggingface.co/blog/fine-tune-whisper) and\
    \ [utils](https://github.com/huggingface/community-events/tree/main/whisper-fine-tuning-event)\
    \ for fine-tuning are both readily available now! \U0001F917"
  created_at: 2023-01-05 15:18:29+00:00
  edited: false
  hidden: false
  id: 63b6ea45f168593c6fb9c6fc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
      fullname: Daniel von Eschwege
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: daniel-v-e
      type: user
    createdAt: '2023-01-05T16:37:25.000Z'
    data:
      edited: false
      editors:
      - daniel-v-e
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
          fullname: Daniel von Eschwege
          isHf: false
          isPro: false
          name: daniel-v-e
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>\
          \ Brilliant, thanks a lot! Just out of interest, is it somehow possible\
          \ (is it even a good idea?) to modify the final layers of whisper to perform\
          \ classification for example, instead of transcription? Essentially that\
          \ the internal representation produced by whisper feeds into the final classification\
          \ layers, and that the whole thing is trainable / fine-tunable?</p>\n"
        raw: '@sanchit-gandhi Brilliant, thanks a lot! Just out of interest, is it
          somehow possible (is it even a good idea?) to modify the final layers of
          whisper to perform classification for example, instead of transcription?
          Essentially that the internal representation produced by whisper feeds into
          the final classification layers, and that the whole thing is trainable /
          fine-tunable?'
        updatedAt: '2023-01-05T16:37:25.860Z'
      numEdits: 0
      reactions: []
    id: 63b6fcc5f168593c6fbaf45a
    type: comment
  author: daniel-v-e
  content: '@sanchit-gandhi Brilliant, thanks a lot! Just out of interest, is it somehow
    possible (is it even a good idea?) to modify the final layers of whisper to perform
    classification for example, instead of transcription? Essentially that the internal
    representation produced by whisper feeds into the final classification layers,
    and that the whole thing is trainable / fine-tunable?'
  created_at: 2023-01-05 16:37:25+00:00
  edited: false
  hidden: false
  id: 63b6fcc5f168593c6fbaf45a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-01-13T11:00:55.000Z'
    data:
      edited: true
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;daniel-v-e&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/daniel-v-e\"\
          >@<span class=\"underline\">daniel-v-e</span></a></span>\n\n\t</span></span>!\
          \ Sorry for the late reply here. It's for sure possible to modify Whisper\
          \ to be used for audio classification tasks! You can add a sequence classification\
          \ layer / head on top of the base model to generate a single class prediction.\
          \ Refer to <a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1453\"\
          ><code>MBartForSequenceClassification</code></a> to see how we achieve this\
          \ for the MBART model. The same principle here applies to the Whisper model.\
          \ IMO this approach should work - it'll just require fine-tuning with correctly\
          \ formatted data for audio classification.</p>\n"
        raw: Hey @daniel-v-e! Sorry for the late reply here. It's for sure possible
          to modify Whisper to be used for audio classification tasks! You can add
          a sequence classification layer / head on top of the base model to generate
          a single class prediction. Refer to [`MBartForSequenceClassification`](https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1453)
          to see how we achieve this for the MBART model. The same principle here
          applies to the Whisper model. IMO this approach should work - it'll just
          require fine-tuning with correctly formatted data for audio classification.
        updatedAt: '2023-01-13T11:01:28.121Z'
      numEdits: 1
      reactions: []
    id: 63c139e73bb1857eeac05bc3
    type: comment
  author: sanchit-gandhi
  content: Hey @daniel-v-e! Sorry for the late reply here. It's for sure possible
    to modify Whisper to be used for audio classification tasks! You can add a sequence
    classification layer / head on top of the base model to generate a single class
    prediction. Refer to [`MBartForSequenceClassification`](https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1453)
    to see how we achieve this for the MBART model. The same principle here applies
    to the Whisper model. IMO this approach should work - it'll just require fine-tuning
    with correctly formatted data for audio classification.
  created_at: 2023-01-13 11:00:55+00:00
  edited: true
  hidden: false
  id: 63c139e73bb1857eeac05bc3
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
      fullname: Daniel von Eschwege
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: daniel-v-e
      type: user
    createdAt: '2023-01-13T21:29:54.000Z'
    data:
      edited: false
      editors:
      - daniel-v-e
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e365b78b6b58b63c617cee36d5ff0de8.svg
          fullname: Daniel von Eschwege
          isHf: false
          isPro: false
          name: daniel-v-e
          type: user
        html: "<p>Sounds good, thank you <span data-props=\"{&quot;user&quot;:&quot;sanchit-gandhi&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/sanchit-gandhi\"\
          >@<span class=\"underline\">sanchit-gandhi</span></a></span>\n\n\t</span></span>!\
          \ There isn't maybe somewhere a similar example for multi-class classification?\
          \ Or is the extension to multiple classes straightforward?</p>\n"
        raw: Sounds good, thank you @sanchit-gandhi! There isn't maybe somewhere a
          similar example for multi-class classification? Or is the extension to multiple
          classes straightforward?
        updatedAt: '2023-01-13T21:29:54.351Z'
      numEdits: 0
      reactions: []
    id: 63c1cd522b643e40153bca0a
    type: comment
  author: daniel-v-e
  content: Sounds good, thank you @sanchit-gandhi! There isn't maybe somewhere a similar
    example for multi-class classification? Or is the extension to multiple classes
    straightforward?
  created_at: 2023-01-13 21:29:54+00:00
  edited: false
  hidden: false
  id: 63c1cd522b643e40153bca0a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
      fullname: Sanchit Gandhi
      isHf: true
      isOrgMember: false
      isOwner: true
      isPro: false
      name: sanchit-gandhi
      type: user
    createdAt: '2023-01-16T15:40:21.000Z'
    data:
      edited: true
      editors:
      - sanchit-gandhi
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1653243468328-61f91cf54a8e5a275b2b3e7c.jpeg?w=200&h=200&f=face
          fullname: Sanchit Gandhi
          isHf: true
          isPro: false
          name: sanchit-gandhi
          type: user
        html: "<p>Hey <span data-props=\"{&quot;user&quot;:&quot;daniel-v-e&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/daniel-v-e\"\
          >@<span class=\"underline\">daniel-v-e</span></a></span>\n\n\t</span></span>!\
          \ You simply need to specify <code>num_labels=...</code> to <code>.from_pretrained</code>.\
          \ The modelling code will take care of the rest (<em>c.f.</em> <a href=\"\
          https://huggingface.co/docs/transformers/model_doc/mbart#transformers.MBartForSequenceClassification.forward.example-2\"\
          >https://huggingface.co/docs/transformers/model_doc/mbart#transformers.MBartForSequenceClassification.forward.example-2</a>\
          \ and <a rel=\"nofollow\" href=\"https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1499\"\
          >https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1499</a>)</p>\n"
        raw: Hey @daniel-v-e! You simply need to specify `num_labels=...` to `.from_pretrained`.
          The modelling code will take care of the rest (_c.f._ https://huggingface.co/docs/transformers/model_doc/mbart#transformers.MBartForSequenceClassification.forward.example-2
          and https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1499)
        updatedAt: '2023-01-16T15:41:20.247Z'
      numEdits: 1
      reactions: []
    id: 63c56fe59fa5d07c2c35c598
    type: comment
  author: sanchit-gandhi
  content: Hey @daniel-v-e! You simply need to specify `num_labels=...` to `.from_pretrained`.
    The modelling code will take care of the rest (_c.f._ https://huggingface.co/docs/transformers/model_doc/mbart#transformers.MBartForSequenceClassification.forward.example-2
    and https://github.com/huggingface/transformers/blob/b210c83a78022226ce48402cd67d8c8da7afbd8d/src/transformers/models/mbart/modeling_mbart.py#L1499)
  created_at: 2023-01-16 15:40:21+00:00
  edited: true
  hidden: false
  id: 63c56fe59fa5d07c2c35c598
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: sanchit-gandhi/whisper-medium-switchboard-5k
repo_type: model
status: open
target_branch: null
title: Model fine-tuner?
