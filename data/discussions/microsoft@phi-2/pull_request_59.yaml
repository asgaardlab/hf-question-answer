!!python/object:huggingface_hub.community.DiscussionWithDetails
author: noahtren
conflicting_files:
- modeling_phi.py
created_at: 2024-01-02 01:10:30+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/7686e520a2247ba80d822a87adc65c3d.svg
      fullname: Noah Trenaman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: noahtren
      type: user
    createdAt: '2024-01-02T01:10:30.000Z'
    data:
      edited: false
      editors:
      - noahtren
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9363784790039062
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/7686e520a2247ba80d822a87adc65c3d.svg
          fullname: Noah Trenaman
          isHf: false
          isPro: false
          name: noahtren
          type: user
        html: '<p>The model should be able to return past hidden states, as expected
          in the <code>forward()</code> function for HuggingFace models.</p>

          <p>Added this because I needed it, but additional support for <code>output_attentions</code>
          param could be added.</p>

          '
        raw: 'The model should be able to return past hidden states, as expected in
          the `forward()` function for HuggingFace models.


          Added this because I needed it, but additional support for `output_attentions`
          param could be added.'
        updatedAt: '2024-01-02T01:10:30.694Z'
      numEdits: 0
      reactions: []
    id: 65936286a33889b27ff94837
    type: comment
  author: noahtren
  content: 'The model should be able to return past hidden states, as expected in
    the `forward()` function for HuggingFace models.


    Added this because I needed it, but additional support for `output_attentions`
    param could be added.'
  created_at: 2024-01-02 01:10:30+00:00
  edited: false
  hidden: false
  id: 65936286a33889b27ff94837
  type: comment
- !!python/object:huggingface_hub.community.DiscussionCommit
  _event:
    author:
      avatarUrl: /avatars/7686e520a2247ba80d822a87adc65c3d.svg
      fullname: Noah Trenaman
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: noahtren
      type: user
    createdAt: '2024-01-02T01:10:31.000Z'
    data:
      oid: e282cdc047f186ddde2b369c812cdf33c451430b
      parents:
      - d3186761bf5c4409f7679359284066c25ab668ee
      subject: return past hidden states when `output_hidden_states` provided
    id: '659362870000000000000000'
    type: commit
  author: noahtren
  created_at: 2024-01-02 01:10:31+00:00
  id: '659362870000000000000000'
  oid: e282cdc047f186ddde2b369c812cdf33c451430b
  summary: return past hidden states when `output_hidden_states` provided
  type: commit
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1e6f6d78aa1e72c5eb39cbfe5da896cb.svg
      fullname: Susnato Dhar
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: susnato
      type: user
    createdAt: '2024-01-02T08:46:32.000Z'
    data:
      edited: true
      editors:
      - susnato
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6506290435791016
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1e6f6d78aa1e72c5eb39cbfe5da896cb.svg
          fullname: Susnato Dhar
          isHf: false
          isPro: false
          name: susnato
          type: user
        html: "<p>Hi <span data-props=\"{&quot;user&quot;:&quot;noahtren&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/noahtren\"\
          >@<span class=\"underline\">noahtren</span></a></span>\n\n\t</span></span>,\
          \ until this PR is merged you can load the model from <code>susnato/phi-2</code>.\
          \ </p>\n<pre><code class=\"language-python\"><span class=\"hljs-keyword\"\
          >from</span> transformers <span class=\"hljs-keyword\">import</span> AutoModelForCausalLM,\
          \ AutoTokenizer\n\nmodel = AutoModelForCausalLM.from_pretrained(<span class=\"\
          hljs-string\">\"susnato/phi-2\"</span>)\ntokenizer = AutoTokenizer.from_pretrained(<span\
          \ class=\"hljs-string\">\"susnato/phi-2\"</span>)\n</code></pre>\n<p>This\
          \ way the phi model on the transformers library will be loaded which has\
          \ support for <code>output_attentions</code>.</p>\n<p>(BTW make sure you\
          \ have the latest transformers version installed <code>pip install -U transformers</code>)</p>\n"
        raw: "Hi @noahtren, until this PR is merged you can load the model from `susnato/phi-2`.\
          \ \n\n```python\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\n\
          \nmodel = AutoModelForCausalLM.from_pretrained(\"susnato/phi-2\")\ntokenizer\
          \ = AutoTokenizer.from_pretrained(\"susnato/phi-2\")\n``` \n\nThis way the\
          \ phi model on the transformers library will be loaded which has support\
          \ for `output_attentions`.\n\n(BTW make sure you have the latest transformers\
          \ version installed `pip install -U transformers`)"
        updatedAt: '2024-01-02T09:12:59.385Z'
      numEdits: 1
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - gugarosa
    id: 6593cd6854f88261735acf30
    type: comment
  author: susnato
  content: "Hi @noahtren, until this PR is merged you can load the model from `susnato/phi-2`.\
    \ \n\n```python\nfrom transformers import AutoModelForCausalLM, AutoTokenizer\n\
    \nmodel = AutoModelForCausalLM.from_pretrained(\"susnato/phi-2\")\ntokenizer =\
    \ AutoTokenizer.from_pretrained(\"susnato/phi-2\")\n``` \n\nThis way the phi model\
    \ on the transformers library will be loaded which has support for `output_attentions`.\n\
    \n(BTW make sure you have the latest transformers version installed `pip install\
    \ -U transformers`)"
  created_at: 2024-01-02 08:46:32+00:00
  edited: true
  hidden: false
  id: 6593cd6854f88261735acf30
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
      fullname: Gustavo de Rosa
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: gugarosa
      type: user
    createdAt: '2024-01-03T14:29:52.000Z'
    data:
      edited: false
      editors:
      - gugarosa
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8529185652732849
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
          fullname: Gustavo de Rosa
          isHf: false
          isPro: false
          name: gugarosa
          type: user
        html: "<p><span data-props=\"{&quot;user&quot;:&quot;noahtren&quot;}\" data-target=\"\
          UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\">\n\n<span class=\"\
          inline-block\"><span class=\"contents\"><a href=\"/noahtren\">@<span class=\"\
          underline\">noahtren</span></a></span>\n\n\t</span></span>!</p>\n<p>Please\
          \ proceed with what <span data-props=\"{&quot;user&quot;:&quot;susnato&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/susnato\"\
          >@<span class=\"underline\">susnato</span></a></span>\n\n\t</span></span>\
          \ has mentioned. We will soon integrate everything and default the native\
          \ <code>transformers</code> implementation to this repository.</p>\n"
        raw: '@noahtren!


          Please proceed with what @susnato has mentioned. We will soon integrate
          everything and default the native `transformers` implementation to this
          repository.'
        updatedAt: '2024-01-03T14:29:52.056Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F91D"
        users:
        - susnato
      relatedEventId: 65956f60b063bbdc0a7fc66a
    id: 65956f60b063bbdc0a7fc666
    type: comment
  author: gugarosa
  content: '@noahtren!


    Please proceed with what @susnato has mentioned. We will soon integrate everything
    and default the native `transformers` implementation to this repository.'
  created_at: 2024-01-03 14:29:52+00:00
  edited: false
  hidden: false
  id: 65956f60b063bbdc0a7fc666
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
      fullname: Gustavo de Rosa
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: gugarosa
      type: user
    createdAt: '2024-01-03T14:29:52.000Z'
    data:
      status: closed
    id: 65956f60b063bbdc0a7fc66a
    type: status-change
  author: gugarosa
  created_at: 2024-01-03 14:29:52+00:00
  id: 65956f60b063bbdc0a7fc66a
  new_status: closed
  type: status-change
is_pull_request: true
merge_commit_oid: null
num: 59
repo_id: microsoft/phi-2
repo_type: model
status: closed
target_branch: refs/heads/main
title: return past hidden states when `output_hidden_states` provided
