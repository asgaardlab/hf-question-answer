!!python/object:huggingface_hub.community.DiscussionWithDetails
author: EurekaWu123
conflicting_files: null
created_at: 2023-12-14 02:12:14+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/1dc8d875f5cb3071223c8265a1b7f9d8.svg
      fullname: ShaonanWu
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: EurekaWu123
      type: user
    createdAt: '2023-12-14T02:12:14.000Z'
    data:
      edited: false
      editors:
      - EurekaWu123
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9479771256446838
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/1dc8d875f5cb3071223c8265a1b7f9d8.svg
          fullname: ShaonanWu
          isHf: false
          isPro: false
          name: EurekaWu123
          type: user
        html: '<p>For example, in the GSM8K benchmark, the reported accuracy of Llama2
          and Mistral 7B is approximately 5 points higher than the 8-shot score replicated
          by me (8-shot CoT).</p>

          '
        raw: For example, in the GSM8K benchmark, the reported accuracy of Llama2
          and Mistral 7B is approximately 5 points higher than the 8-shot score replicated
          by me (8-shot CoT).
        updatedAt: '2023-12-14T02:12:14.466Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F91D"
        users:
        - Yhyu13
    id: 657a647e186ecaba79ec662c
    type: comment
  author: EurekaWu123
  content: For example, in the GSM8K benchmark, the reported accuracy of Llama2 and
    Mistral 7B is approximately 5 points higher than the 8-shot score replicated by
    me (8-shot CoT).
  created_at: 2023-12-14 02:12:14+00:00
  edited: false
  hidden: false
  id: 657a647e186ecaba79ec662c
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
      fullname: Gustavo de Rosa
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: gugarosa
      type: user
    createdAt: '2023-12-20T13:01:01.000Z'
    data:
      edited: false
      editors:
      - gugarosa
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7482033371925354
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
          fullname: Gustavo de Rosa
          isHf: false
          isPro: false
          name: gugarosa
          type: user
        html: "<p>Hello <span data-props=\"{&quot;user&quot;:&quot;EurekaWu123&quot;}\"\
          \ data-target=\"UserMention\" class=\"SVELTE_PARTIAL_HYDRATER contents\"\
          >\n\n<span class=\"inline-block\"><span class=\"contents\"><a href=\"/EurekaWu123\"\
          >@<span class=\"underline\">EurekaWu123</span></a></span>\n\n\t</span></span></p>\n\
          <p>I am not able to share the full GSM8k evaluation due to some internal\
          \ imports, but this snippet might help you in using code for the evaluation:</p>\n\
          <pre><code class=\"language-python\"><span class=\"hljs-keyword\">def</span>\
          \ <span class=\"hljs-title function_\">_timeout_handler</span>(<span class=\"\
          hljs-params\">signum: <span class=\"hljs-built_in\">int</span>, frame: <span\
          \ class=\"hljs-type\">Any</span></span>) -&gt; <span class=\"hljs-literal\"\
          >None</span>:\n    <span class=\"hljs-keyword\">raise</span> Exception()\n\
          \n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\"\
          >_validate_completion</span>(<span class=\"hljs-params\">completion: <span\
          \ class=\"hljs-built_in\">str</span>, label: <span class=\"hljs-built_in\"\
          >str</span></span>) -&gt; <span class=\"hljs-built_in\">bool</span>:\n \
          \   completion_lines = completion.split(<span class=\"hljs-string\">\"TA:\"\
          </span>)[<span class=\"hljs-number\">1</span>].strip().split(<span class=\"\
          hljs-string\">\"\\n\"</span>)\n    completion_code = <span class=\"hljs-string\"\
          >\"\\n\"</span>.join(completion_lines[<span class=\"hljs-number\">1</span>:]\
          \ <span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">\"\
          :\"</span> <span class=\"hljs-keyword\">in</span> completion_lines[<span\
          \ class=\"hljs-number\">0</span>] <span class=\"hljs-keyword\">else</span>\
          \ completion_lines)\n\n    <span class=\"hljs-keyword\">try</span>:\n  \
          \      signal.signal(signal.SIGALRM, _timeout_handler)\n        signal.alarm(<span\
          \ class=\"hljs-number\">2</span>)\n\n        <span class=\"hljs-keyword\"\
          >try</span>:\n            stdout = io.StringIO()\n            <span class=\"\
          hljs-keyword\">with</span> contextlib.redirect_stdout(stdout):\n       \
          \         <span class=\"hljs-built_in\">exec</span>(\n                 \
          \   <span class=\"hljs-string\">\"import math\\nfrom math import *\\nimport\
          \ numpy as np\\nimport hashlib\\n\"</span>\n                    + completion_code\n\
          \                    + <span class=\"hljs-string\">\"\\n\\n\"</span>\n \
          \                   + <span class=\"hljs-string\">\"if type(result) == str:\\\
          n\\tresult = result.replace(',', '')\\n\"</span>\n                    +\
          \ <span class=\"hljs-string\">f\"assert(int(result) == <span class=\"hljs-subst\"\
          >{label}</span>)\"</span>,\n                    {},\n                )\n\
          \            signal.alarm(<span class=\"hljs-number\">0</span>)\n      \
          \      prediction = <span class=\"hljs-number\">1</span>\n        <span\
          \ class=\"hljs-keyword\">except</span> Exception:\n            prediction\
          \ = <span class=\"hljs-number\">0</span>\n        <span class=\"hljs-keyword\"\
          >finally</span>:\n            signal.alarm(<span class=\"hljs-number\">0</span>)\n\
          \n    <span class=\"hljs-keyword\">except</span> Exception:\n        prediction\
          \ = <span class=\"hljs-number\">0</span>\n\n    <span class=\"hljs-keyword\"\
          >return</span> prediction\n</code></pre>\n<p>The overall idea is to execute\
          \ the code that was generated by the model and assert whether its outputs\
          \ are equal to the ground-truth label. We also added some public imports\
          \ to prevent many answers from failing.</p>\n"
        raw: "Hello @EurekaWu123\n\nI am not able to share the full GSM8k evaluation\
          \ due to some internal imports, but this snippet might help you in using\
          \ code for the evaluation:\n\n```python\ndef _timeout_handler(signum: int,\
          \ frame: Any) -> None:\n    raise Exception()\n\ndef _validate_completion(completion:\
          \ str, label: str) -> bool:\n    completion_lines = completion.split(\"\
          TA:\")[1].strip().split(\"\\n\")\n    completion_code = \"\\n\".join(completion_lines[1:]\
          \ if \":\" in completion_lines[0] else completion_lines)\n\n    try:\n \
          \       signal.signal(signal.SIGALRM, _timeout_handler)\n        signal.alarm(2)\n\
          \n        try:\n            stdout = io.StringIO()\n            with contextlib.redirect_stdout(stdout):\n\
          \                exec(\n                    \"import math\\nfrom math import\
          \ *\\nimport numpy as np\\nimport hashlib\\n\"\n                    + completion_code\n\
          \                    + \"\\n\\n\"\n                    + \"if type(result)\
          \ == str:\\n\\tresult = result.replace(',', '')\\n\"\n                 \
          \   + f\"assert(int(result) == {label})\",\n                    {},\n  \
          \              )\n            signal.alarm(0)\n            prediction =\
          \ 1\n        except Exception:\n            prediction = 0\n        finally:\n\
          \            signal.alarm(0)\n\n    except Exception:\n        prediction\
          \ = 0\n\n    return prediction\n```\n\nThe overall idea is to execute the\
          \ code that was generated by the model and assert whether its outputs are\
          \ equal to the ground-truth label. We also added some public imports to\
          \ prevent many answers from failing.\n\n"
        updatedAt: '2023-12-20T13:01:01.176Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F44D"
        users:
        - EurekaWu123
        - tim1900
    id: 6582e58d93da0089338c33d2
    type: comment
  author: gugarosa
  content: "Hello @EurekaWu123\n\nI am not able to share the full GSM8k evaluation\
    \ due to some internal imports, but this snippet might help you in using code\
    \ for the evaluation:\n\n```python\ndef _timeout_handler(signum: int, frame: Any)\
    \ -> None:\n    raise Exception()\n\ndef _validate_completion(completion: str,\
    \ label: str) -> bool:\n    completion_lines = completion.split(\"TA:\")[1].strip().split(\"\
    \\n\")\n    completion_code = \"\\n\".join(completion_lines[1:] if \":\" in completion_lines[0]\
    \ else completion_lines)\n\n    try:\n        signal.signal(signal.SIGALRM, _timeout_handler)\n\
    \        signal.alarm(2)\n\n        try:\n            stdout = io.StringIO()\n\
    \            with contextlib.redirect_stdout(stdout):\n                exec(\n\
    \                    \"import math\\nfrom math import *\\nimport numpy as np\\\
    nimport hashlib\\n\"\n                    + completion_code\n                \
    \    + \"\\n\\n\"\n                    + \"if type(result) == str:\\n\\tresult\
    \ = result.replace(',', '')\\n\"\n                    + f\"assert(int(result)\
    \ == {label})\",\n                    {},\n                )\n            signal.alarm(0)\n\
    \            prediction = 1\n        except Exception:\n            prediction\
    \ = 0\n        finally:\n            signal.alarm(0)\n\n    except Exception:\n\
    \        prediction = 0\n\n    return prediction\n```\n\nThe overall idea is to\
    \ execute the code that was generated by the model and assert whether its outputs\
    \ are equal to the ground-truth label. We also added some public imports to prevent\
    \ many answers from failing.\n\n"
  created_at: 2023-12-20 13:01:01+00:00
  edited: false
  hidden: false
  id: 6582e58d93da0089338c33d2
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1666203761402-6157454831624da88210e627.jpeg?w=200&h=200&f=face
      fullname: Gustavo de Rosa
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: gugarosa
      type: user
    createdAt: '2024-01-03T14:21:57.000Z'
    data:
      status: closed
    id: 65956d85696ec1ef2c14dcc8
    type: status-change
  author: gugarosa
  created_at: 2024-01-03 14:21:57+00:00
  id: 65956d85696ec1ef2c14dcc8
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 9
repo_id: microsoft/phi-2
repo_type: model
status: closed
target_branch: null
title: Can you provide more details about the model evaluation?
