!!python/object:huggingface_hub.community.DiscussionWithDetails
author: lucasjin
conflicting_files: null
created_at: 2023-07-25 04:00:30+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
      fullname: lucasjin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasjin
      type: user
    createdAt: '2023-07-25T05:00:30.000Z'
    data:
      edited: false
      editors:
      - lucasjin
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.9516740441322327
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
          fullname: lucasjin
          isHf: false
          isPro: false
          name: lucasjin
          type: user
        html: "<p>\u6211\u8BBE\u7F6Ebatch1 512 \u624D\u80FD\u4E0DOOM\uFF0C\u4F46\u662F\
          \u8FD9\u4E2Acontext len\u592A\u77ED\u4E86</p>\n"
        raw: "\u6211\u8BBE\u7F6Ebatch1 512 \u624D\u80FD\u4E0DOOM\uFF0C\u4F46\u662F\
          \u8FD9\u4E2Acontext len\u592A\u77ED\u4E86"
        updatedAt: '2023-07-25T05:00:30.497Z'
      numEdits: 0
      reactions: []
    id: 64bf56ee38953777fec2faa8
    type: comment
  author: lucasjin
  content: "\u6211\u8BBE\u7F6Ebatch1 512 \u624D\u80FD\u4E0DOOM\uFF0C\u4F46\u662F\u8FD9\
    \u4E2Acontext len\u592A\u77ED\u4E86"
  created_at: 2023-07-25 04:00:30+00:00
  edited: false
  hidden: false
  id: 64bf56ee38953777fec2faa8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
      fullname: Tian Li
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: RicardoLee
      type: user
    createdAt: '2023-07-25T06:01:13.000Z'
    data:
      edited: false
      editors:
      - RicardoLee
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5766178369522095
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
          fullname: Tian Li
          isHf: false
          isPro: false
          name: RicardoLee
          type: user
        html: "<p>\u672C\u6A21\u578B\u4ED3\u5E93\u7684\u6A21\u578B\u662F\u5728V100\
          \ 32G\u4E0A\u8BAD\u7EC3\u7684\u3002 context length\u4E3A1024\u3002\u5355\
          \u5361batch size \u4E3A4\uFF0C \u6BCF\u56DB\u6B65\u8FDB\u884C\u4E00\u6B21\
          \u68AF\u5EA6\u7D2F\u8BA1\uFF0C\u4E00\u5171\u516B\u5361\u3002\u6240\u4EE5\
          \u8BAD\u7EC3\u7684\u65F6\u5019batch size \u4E3A128.</p>\n<p>The model in\
          \ this repostory was trained on 8 * V100 32G. The trainer configuration\
          \ of model max_seq_length is 1024. During training, it loads 4 samples per\
          \ graphic card, and do gradient accumulation every 4 steps. Therefore, the\
          \ total batch size is 128.</p>\n"
        raw: "\u672C\u6A21\u578B\u4ED3\u5E93\u7684\u6A21\u578B\u662F\u5728V100 32G\u4E0A\
          \u8BAD\u7EC3\u7684\u3002 context length\u4E3A1024\u3002\u5355\u5361batch\
          \ size \u4E3A4\uFF0C \u6BCF\u56DB\u6B65\u8FDB\u884C\u4E00\u6B21\u68AF\u5EA6\
          \u7D2F\u8BA1\uFF0C\u4E00\u5171\u516B\u5361\u3002\u6240\u4EE5\u8BAD\u7EC3\
          \u7684\u65F6\u5019batch size \u4E3A128.\n\nThe model in this repostory was\
          \ trained on 8 * V100 32G. The trainer configuration of model max_seq_length\
          \ is 1024. During training, it loads 4 samples per graphic card, and do\
          \ gradient accumulation every 4 steps. Therefore, the total batch size is\
          \ 128."
        updatedAt: '2023-07-25T06:01:13.054Z'
      numEdits: 0
      reactions: []
    id: 64bf652949525accb251875e
    type: comment
  author: RicardoLee
  content: "\u672C\u6A21\u578B\u4ED3\u5E93\u7684\u6A21\u578B\u662F\u5728V100 32G\u4E0A\
    \u8BAD\u7EC3\u7684\u3002 context length\u4E3A1024\u3002\u5355\u5361batch size\
    \ \u4E3A4\uFF0C \u6BCF\u56DB\u6B65\u8FDB\u884C\u4E00\u6B21\u68AF\u5EA6\u7D2F\u8BA1\
    \uFF0C\u4E00\u5171\u516B\u5361\u3002\u6240\u4EE5\u8BAD\u7EC3\u7684\u65F6\u5019\
    batch size \u4E3A128.\n\nThe model in this repostory was trained on 8 * V100 32G.\
    \ The trainer configuration of model max_seq_length is 1024. During training,\
    \ it loads 4 samples per graphic card, and do gradient accumulation every 4 steps.\
    \ Therefore, the total batch size is 128."
  created_at: 2023-07-25 05:01:13+00:00
  edited: false
  hidden: false
  id: 64bf652949525accb251875e
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
      fullname: lucasjin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasjin
      type: user
    createdAt: '2023-07-26T07:15:17.000Z'
    data:
      edited: false
      editors:
      - lucasjin
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.7690023183822632
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
          fullname: lucasjin
          isHf: false
          isPro: false
          name: lucasjin
          type: user
        html: "<p>V100 \u4E0A\u80FD \u8DD1batchsize 4 1024\uFF1F</p>\n"
        raw: "V100 \u4E0A\u80FD \u8DD1batchsize 4 1024\uFF1F"
        updatedAt: '2023-07-26T07:15:17.407Z'
      numEdits: 0
      reactions: []
    id: 64c0c80572e951e3fe43f494
    type: comment
  author: lucasjin
  content: "V100 \u4E0A\u80FD \u8DD1batchsize 4 1024\uFF1F"
  created_at: 2023-07-26 06:15:17+00:00
  edited: false
  hidden: false
  id: 64c0c80572e951e3fe43f494
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
      fullname: lucasjin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasjin
      type: user
    createdAt: '2023-07-26T07:15:50.000Z'
    data:
      edited: false
      editors:
      - lucasjin
      hidden: false
      identifiedLanguage:
        language: zh
        probability: 0.8906251788139343
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
          fullname: lucasjin
          isHf: false
          isPro: false
          name: lucasjin
          type: user
        html: "<p>pretrain\u7684\u65F6\u5019\u957F\u5EA6\u662F\u591A\u5C11\u554A</p>\n"
        raw: "pretrain\u7684\u65F6\u5019\u957F\u5EA6\u662F\u591A\u5C11\u554A"
        updatedAt: '2023-07-26T07:15:50.640Z'
      numEdits: 0
      reactions: []
    id: 64c0c82692ae08de174f37ec
    type: comment
  author: lucasjin
  content: "pretrain\u7684\u65F6\u5019\u957F\u5EA6\u662F\u591A\u5C11\u554A"
  created_at: 2023-07-26 06:15:50+00:00
  edited: false
  hidden: false
  id: 64c0c82692ae08de174f37ec
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
      fullname: Tian Li
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: RicardoLee
      type: user
    createdAt: '2023-07-26T07:26:11.000Z'
    data:
      edited: false
      editors:
      - RicardoLee
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5694060325622559
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
          fullname: Tian Li
          isHf: false
          isPro: false
          name: RicardoLee
          type: user
        html: "<p>\u5728V100 32G \u4E0A\uFF0CLoRA rank\u4E3A8\u7684\u524D\u63D0\u4E0B\
          \u8FDB\u884CLoRA \u8BAD\u7EC3\uFF0C\u7684\u786E\u53EF\u4EE5\u505A\u5230\u5355\
          \u53614 batch size\uFF0Cseq length \u957F\u5EA61024\u3002\u8FD9\u9700\u8981\
          \u501F\u52A9deepspeed zero2 + offload\u3002<br>\u8BE5\u9879\u76EE\u5E76\u672A\
          \u8FDB\u884C\u4EFB\u4F55PT\u64CD\u4F5C\uFF0C\u5747\u662F\u5728Llama2 \u6A21\
          \u578B\u4E0A\u76F4\u63A5\u8FDB\u884CSFT\u8BAD\u7EC3</p>\n<p>\u6B64\u5916\
          \u6CE8\u610FPeft \u4E0D\u80FD\u642D\u914Dzero3\u3002</p>\n<p>On V100 32G\
          \ GPUs, with LoRA rank set to 8, LoRA training can indeed achieve a batch\
          \ size of 4 and sequence length of 1024 using deepspeed zero2 + offload\
          \ techniques. It's essential to note that this project does not involve\
          \ any PT phase. All SFT training is conducted directly on the Llama2 model.</p>\n\
          <p>Additionally, please be aware that Peft (Prescaled Efficient Training)\
          \ is not compatible with Deepspeed zero3 strategy</p>\n"
        raw: "\u5728V100 32G \u4E0A\uFF0CLoRA rank\u4E3A8\u7684\u524D\u63D0\u4E0B\u8FDB\
          \u884CLoRA \u8BAD\u7EC3\uFF0C\u7684\u786E\u53EF\u4EE5\u505A\u5230\u5355\u5361\
          4 batch size\uFF0Cseq length \u957F\u5EA61024\u3002\u8FD9\u9700\u8981\u501F\
          \u52A9deepspeed zero2 + offload\u3002\n\u8BE5\u9879\u76EE\u5E76\u672A\u8FDB\
          \u884C\u4EFB\u4F55PT\u64CD\u4F5C\uFF0C\u5747\u662F\u5728Llama2 \u6A21\u578B\
          \u4E0A\u76F4\u63A5\u8FDB\u884CSFT\u8BAD\u7EC3\n\n\u6B64\u5916\u6CE8\u610F\
          Peft \u4E0D\u80FD\u642D\u914Dzero3\u3002\n\n\nOn V100 32G GPUs, with LoRA\
          \ rank set to 8, LoRA training can indeed achieve a batch size of 4 and\
          \ sequence length of 1024 using deepspeed zero2 + offload techniques. It's\
          \ essential to note that this project does not involve any PT phase. All\
          \ SFT training is conducted directly on the Llama2 model.\n\nAdditionally,\
          \ please be aware that Peft (Prescaled Efficient Training) is not compatible\
          \ with Deepspeed zero3 strategy"
        updatedAt: '2023-07-26T07:26:11.936Z'
      numEdits: 0
      reactions: []
      relatedEventId: 64c0ca9392ae08de174fb017
    id: 64c0ca9392ae08de174fb014
    type: comment
  author: RicardoLee
  content: "\u5728V100 32G \u4E0A\uFF0CLoRA rank\u4E3A8\u7684\u524D\u63D0\u4E0B\u8FDB\
    \u884CLoRA \u8BAD\u7EC3\uFF0C\u7684\u786E\u53EF\u4EE5\u505A\u5230\u5355\u5361\
    4 batch size\uFF0Cseq length \u957F\u5EA61024\u3002\u8FD9\u9700\u8981\u501F\u52A9\
    deepspeed zero2 + offload\u3002\n\u8BE5\u9879\u76EE\u5E76\u672A\u8FDB\u884C\u4EFB\
    \u4F55PT\u64CD\u4F5C\uFF0C\u5747\u662F\u5728Llama2 \u6A21\u578B\u4E0A\u76F4\u63A5\
    \u8FDB\u884CSFT\u8BAD\u7EC3\n\n\u6B64\u5916\u6CE8\u610FPeft \u4E0D\u80FD\u642D\
    \u914Dzero3\u3002\n\n\nOn V100 32G GPUs, with LoRA rank set to 8, LoRA training\
    \ can indeed achieve a batch size of 4 and sequence length of 1024 using deepspeed\
    \ zero2 + offload techniques. It's essential to note that this project does not\
    \ involve any PT phase. All SFT training is conducted directly on the Llama2 model.\n\
    \nAdditionally, please be aware that Peft (Prescaled Efficient Training) is not\
    \ compatible with Deepspeed zero3 strategy"
  created_at: 2023-07-26 06:26:11+00:00
  edited: false
  hidden: false
  id: 64c0ca9392ae08de174fb014
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
      fullname: Tian Li
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: RicardoLee
      type: user
    createdAt: '2023-07-26T07:26:11.000Z'
    data:
      status: closed
    id: 64c0ca9392ae08de174fb017
    type: status-change
  author: RicardoLee
  created_at: 2023-07-26 06:26:11+00:00
  id: 64c0ca9392ae08de174fb017
  new_status: closed
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
      fullname: Tian Li
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: RicardoLee
      type: user
    createdAt: '2023-07-26T07:26:24.000Z'
    data:
      status: open
    id: 64c0caa08137192a1e2beb76
    type: status-change
  author: RicardoLee
  created_at: 2023-07-26 06:26:24+00:00
  id: 64c0caa08137192a1e2beb76
  new_status: open
  type: status-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
      fullname: lucasjin
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: lucasjin
      type: user
    createdAt: '2023-07-26T10:53:51.000Z'
    data:
      edited: false
      editors:
      - lucasjin
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9983077645301819
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/9fbbb8eaaa7b19752b336cf228d4679e.svg
          fullname: lucasjin
          isHf: false
          isPro: false
          name: lucasjin
          type: user
        html: "<p>very \u611F\u8C22</p>\n"
        raw: "very \u611F\u8C22"
        updatedAt: '2023-07-26T10:53:51.521Z'
      numEdits: 0
      reactions: []
    id: 64c0fb3fe175dd56a579eb79
    type: comment
  author: lucasjin
  content: "very \u611F\u8C22"
  created_at: 2023-07-26 09:53:51+00:00
  edited: false
  hidden: false
  id: 64c0fb3fe175dd56a579eb79
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/4075d6e82df7f69e04d9910404719b86.svg
      fullname: Tian Li
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: RicardoLee
      type: user
    createdAt: '2023-07-26T11:15:48.000Z'
    data:
      status: closed
    id: 64c10064a20269b8bd8fe7c7
    type: status-change
  author: RicardoLee
  created_at: 2023-07-26 10:15:48+00:00
  id: 64c10064a20269b8bd8fe7c7
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 1
repo_id: RicardoLee/Llama2-chat-13B-Chinese-50W
repo_type: model
status: closed
target_branch: null
title: "13b\u7684context len\u591A\u5927\u4EE5\u53CAbatch\uFF1F"
