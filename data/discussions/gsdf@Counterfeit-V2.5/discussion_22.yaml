!!python/object:huggingface_hub.community.DiscussionWithDetails
author: debxylen
conflicting_files: null
created_at: 2024-01-21 09:27:59+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/e7cd1b7058b179b43cf96d49e421a555.svg
      fullname: Xylen Deb
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: debxylen
      type: user
    createdAt: '2024-01-21T09:27:59.000Z'
    data:
      edited: false
      editors:
      - debxylen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.43997955322265625
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/e7cd1b7058b179b43cf96d49e421a555.svg
          fullname: Xylen Deb
          isHf: false
          isPro: false
          name: debxylen
          type: user
        html: '<p>When I use it with Inference API, I always get the same output if
          the prompt is same. However, if I enter same prompts in this web inference
          and compute, I get random images everytime.<br>How can I seed the output
          using python api?<br>code:<br>import requests<br>import io,os<br>from PIL
          import Image</p>

          <p>API_URL = "<a rel="nofollow" href="https://api-inference.huggingface.co/models/gsdf/Counterfeit-V2.5&quot;">https://api-inference.huggingface.co/models/gsdf/Counterfeit-V2.5"</a><br>headers
          = {"Authorization": "Bearer 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"}</p>

          <p>def query(payload):<br>    response = requests.post(API_URL, headers=headers,
          json=payload)<br>    return response.content</p>

          <p>prompt=input("Prompt: ")<br>count=10<br>if count&gt;1:<br>    os.mkdir(prompt)<br>for
          f in range(count):<br>    image_bytes = query({"inputs": prompt})<br>    image
          = Image.open(io.BytesIO(image_bytes))<br>    if count==1:<br>        image.save("%s.png"%(prompt))<br>    elif
          count&gt;1:<br>        image.save("%s/%d.png"%(prompt,f+1))</p>

          '
        raw: "When I use it with Inference API, I always get the same output if the\
          \ prompt is same. However, if I enter same prompts in this web inference\
          \ and compute, I get random images everytime.\r\nHow can I seed the output\
          \ using python api?\r\ncode:\r\nimport requests\r\nimport io,os\r\nfrom\
          \ PIL import Image\r\n\r\nAPI_URL = \"https://api-inference.huggingface.co/models/gsdf/Counterfeit-V2.5\"\
          \r\nheaders = {\"Authorization\": \"Bearer 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\"\
          }\r\n\r\ndef query(payload):\r\n\tresponse = requests.post(API_URL, headers=headers,\
          \ json=payload)\r\n\treturn response.content\r\n\r\nprompt=input(\"Prompt:\
          \ \")\r\ncount=10\r\nif count>1:\r\n\tos.mkdir(prompt)\r\nfor f in range(count):\r\
          \n\timage_bytes = query({\"inputs\": prompt})\r\n\timage = Image.open(io.BytesIO(image_bytes))\r\
          \n\tif count==1:\r\n\t\timage.save(\"%s.png\"%(prompt))\r\n\telif count>1:\r\
          \n\t\timage.save(\"%s/%d.png\"%(prompt,f+1))\r\n"
        updatedAt: '2024-01-21T09:27:59.047Z'
      numEdits: 0
      reactions: []
    id: 65ace39ff8111f40c00565c3
    type: comment
  author: debxylen
  content: "When I use it with Inference API, I always get the same output if the\
    \ prompt is same. However, if I enter same prompts in this web inference and compute,\
    \ I get random images everytime.\r\nHow can I seed the output using python api?\r\
    \ncode:\r\nimport requests\r\nimport io,os\r\nfrom PIL import Image\r\n\r\nAPI_URL\
    \ = \"https://api-inference.huggingface.co/models/gsdf/Counterfeit-V2.5\"\r\n\
    headers = {\"Authorization\": \"Bearer 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\"\
    }\r\n\r\ndef query(payload):\r\n\tresponse = requests.post(API_URL, headers=headers,\
    \ json=payload)\r\n\treturn response.content\r\n\r\nprompt=input(\"Prompt: \"\
    )\r\ncount=10\r\nif count>1:\r\n\tos.mkdir(prompt)\r\nfor f in range(count):\r\
    \n\timage_bytes = query({\"inputs\": prompt})\r\n\timage = Image.open(io.BytesIO(image_bytes))\r\
    \n\tif count==1:\r\n\t\timage.save(\"%s.png\"%(prompt))\r\n\telif count>1:\r\n\
    \t\timage.save(\"%s/%d.png\"%(prompt,f+1))\r\n"
  created_at: 2024-01-21 09:27:59+00:00
  edited: false
  hidden: false
  id: 65ace39ff8111f40c00565c3
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 22
repo_id: gsdf/Counterfeit-V2.5
repo_type: model
status: open
target_branch: null
title: Randomness in Inference API outputs
