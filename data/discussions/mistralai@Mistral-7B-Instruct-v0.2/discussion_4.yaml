!!python/object:huggingface_hub.community.DiscussionWithDetails
author: unixguru2k
conflicting_files: null
created_at: 2023-12-12 01:55:03+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/15d9803315982633c495e3203d27b427.svg
      fullname: Harshal Dhir
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: true
      name: unixguru2k
      type: user
    createdAt: '2023-12-12T01:55:03.000Z'
    data:
      edited: true
      editors:
      - unixguru2k
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.47045716643333435
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/15d9803315982633c495e3203d27b427.svg
          fullname: Harshal Dhir
          isHf: false
          isPro: true
          name: unixguru2k
          type: user
        html: '<p>The HF Cloud instance init fails on this step.</p>

          <p>2023/12/11 15:29:54 ~ {"timestamp":"2023-12-11T23:29:54.160708Z","level":"INFO","fields":{"message":"Starting
          download process."},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}<br>2023/12/11
          15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205779Z","level":"INFO","fields":{"message":"Loading
          the model it might take a while without feedback\n"},"target":"text_generation_launcher"}<br>2023/12/11
          15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205733Z","level":"INFO","fields":{"message":"Peft
          model detected.\n"},"target":"text_generation_launcher"}<br>2023/12/11 15:29:58
          ~ {"timestamp":"2023-12-11T23:29:58.665168Z","level":"ERROR","fields":{"message":"Download
          encountered an error: Traceback (most recent call last):\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils.<em>validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''</em>'', ''.'', ''--'' and
          ''..'' are forbidden, ''-'' and ''.'' cannot start or end the name, max
          length is 96: ''/repository''.\n\n\nDuring handling of the above exception,
          another exception occurred:\n\n\nTraceback (most recent call last):\n\n
          File "/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py",
          line 16, in download_and_unload_peft\n model = AutoPeftModelForCausalLM.from_pretrained(\n\n
          File "/opt/conda/lib/python3.10/site-packages/peft/auto.py", line 69, in
          from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 121, in from_pretrained\n raise ValueError(f"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n\nDuring handling of the above exception, another
          exception occurred:\n\n\nTraceback (most recent call last):\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File "/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py",
          line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils.<em>validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''</em>'', ''.'', ''--'' and
          ''..'' are forbidden, ''-'' and ''.'' cannot start or end the name, max
          length is 96: ''/repository''.\n\n\nDuring handling of the above exception,
          another exception occurred:\n\n\nTraceback (most recent call last):\n\n
          File "/opt/conda/bin/text-generation-server", line 8, in \n sys.exit(app())\n\n
          File "/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py",
          line 204, in download_weights\n utils.download_and_unload_peft(\n\n File
          "/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py",
          line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
          File "/opt/conda/lib/python3.10/site-packages/peft/auto.py", line 69, in
          from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File "/opt/conda/lib/python3.10/site-packages/peft/utils/config.py",
          line 121, in from_pretrained\n raise ValueError(f"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}<br>2023/12/11
          15:29:58 ~ Error: DownloadError</p>

          '
        raw: 'The HF Cloud instance init fails on this step.


          2023/12/11 15:29:54 ~ {"timestamp":"2023-12-11T23:29:54.160708Z","level":"INFO","fields":{"message":"Starting
          download process."},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}

          2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205779Z","level":"INFO","fields":{"message":"Loading
          the model it might take a while without feedback\n"},"target":"text_generation_launcher"}

          2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205733Z","level":"INFO","fields":{"message":"Peft
          model detected.\n"},"target":"text_generation_launcher"}

          2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.665168Z","level":"ERROR","fields":{"message":"Download
          encountered an error: Traceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..''
          are forbidden, ''-'' and ''.'' cannot start or end the name, max length
          is 96: ''/repository''.\n\n\nDuring handling of the above exception, another
          exception occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
          line 16, in download_and_unload_peft\n model = AutoPeftModelForCausalLM.from_pretrained(\n\n
          File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69,
          in from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 121, in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''\")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n\nDuring handling of the above exception, another
          exception occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
          line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError:
          Repo id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..''
          are forbidden, ''-'' and ''.'' cannot start or end the name, max length
          is 96: ''/repository''.\n\n\nDuring handling of the above exception, another
          exception occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/bin/text-generation-server\",
          line 8, in <module>\n sys.exit(app())\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py\",
          line 204, in download_weights\n utils.download_and_unload_peft(\n\n File
          \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
          line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
          File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69,
          in from_pretrained\n peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path,
          **kwargs)\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
          line 121, in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}''
          at ''{pretrained_model_name_or_path}''\")\n\nValueError: Can''t find ''adapter_config.json''
          at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}

          2023/12/11 15:29:58 ~ Error: DownloadError'
        updatedAt: '2023-12-12T01:57:59.473Z'
      numEdits: 1
      reactions: []
    id: 6577bd7799997462388921f5
    type: comment
  author: unixguru2k
  content: 'The HF Cloud instance init fails on this step.


    2023/12/11 15:29:54 ~ {"timestamp":"2023-12-11T23:29:54.160708Z","level":"INFO","fields":{"message":"Starting
    download process."},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}

    2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205779Z","level":"INFO","fields":{"message":"Loading
    the model it might take a while without feedback\n"},"target":"text_generation_launcher"}

    2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.205733Z","level":"INFO","fields":{"message":"Peft
    model detected.\n"},"target":"text_generation_launcher"}

    2023/12/11 15:29:58 ~ {"timestamp":"2023-12-11T23:29:58.665168Z","level":"ERROR","fields":{"message":"Download
    encountered an error: Traceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
    line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError:
    Repo id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..''
    are forbidden, ''-'' and ''.'' cannot start or end the name, max length is 96:
    ''/repository''.\n\n\nDuring handling of the above exception, another exception
    occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
    line 16, in download_and_unload_peft\n model = AutoPeftModelForCausalLM.from_pretrained(\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69, in from_pretrained\n
    peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path, **kwargs)\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\", line 121,
    in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}'' at ''{pretrained_model_name_or_path}''\")\n\nValueError:
    Can''t find ''adapter_config.json'' at ''/repository''\n\n\nDuring handling of
    the above exception, another exception occurred:\n\n\nTraceback (most recent call
    last):\n\n File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\",
    line 117, in from_pretrained\n config_file = hf_hub_download(\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 110, in _inner_fn\n validate_repo_id(arg_value)\n\n File \"/opt/conda/lib/python3.10/site-packages/huggingface_hub/utils/_validators.py\",
    line 164, in validate_repo_id\n raise HFValidationError(\n\nhuggingface_hub.utils._validators.HFValidationError:
    Repo id must use alphanumeric chars or ''-'', ''_'', ''.'', ''--'' and ''..''
    are forbidden, ''-'' and ''.'' cannot start or end the name, max length is 96:
    ''/repository''.\n\n\nDuring handling of the above exception, another exception
    occurred:\n\n\nTraceback (most recent call last):\n\n File \"/opt/conda/bin/text-generation-server\",
    line 8, in <module>\n sys.exit(app())\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/cli.py\",
    line 204, in download_weights\n utils.download_and_unload_peft(\n\n File \"/opt/conda/lib/python3.10/site-packages/text_generation_server/utils/peft.py\",
    line 24, in download_and_unload_peft\n model = AutoPeftModelForSeq2SeqLM.from_pretrained(\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/auto.py\", line 69, in from_pretrained\n
    peft_config = PeftConfig.from_pretrained(pretrained_model_name_or_path, **kwargs)\n\n
    File \"/opt/conda/lib/python3.10/site-packages/peft/utils/config.py\", line 121,
    in from_pretrained\n raise ValueError(f\"Can''t find ''{CONFIG_NAME}'' at ''{pretrained_model_name_or_path}''\")\n\nValueError:
    Can''t find ''adapter_config.json'' at ''/repository''\n\n"},"target":"text_generation_launcher","span":{"name":"download"},"spans":[{"name":"download"}]}

    2023/12/11 15:29:58 ~ Error: DownloadError'
  created_at: 2023-12-12 01:55:03+00:00
  edited: true
  hidden: false
  id: 6577bd7799997462388921f5
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 4
repo_id: mistralai/Mistral-7B-Instruct-v0.2
repo_type: model
status: open
target_branch: null
title: Having issues deploying this to HF Inference Cloud
