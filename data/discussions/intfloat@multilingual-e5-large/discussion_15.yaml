!!python/object:huggingface_hub.community.DiscussionWithDetails
author: hayj
conflicting_files: null
created_at: 2023-08-30 11:55:45+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/2d072e3b4c85aaf6953939180c5f03da.svg
      fullname: Julien H
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: hayj
      type: user
    createdAt: '2023-08-30T12:55:45.000Z'
    data:
      edited: false
      editors:
      - hayj
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8902497291564941
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/2d072e3b4c85aaf6953939180c5f03da.svg
          fullname: Julien H
          isHf: false
          isPro: false
          name: hayj
          type: user
        html: '<p>Is it normal it takes much more GPU mem when training, or am I wrongly
          using it?<br>I use a Nvidia A100.</p>

          '
        raw: "Is it normal it takes much more GPU mem when training, or am I wrongly\
          \ using it?\r\nI use a Nvidia A100."
        updatedAt: '2023-08-30T12:55:45.917Z'
      numEdits: 0
      reactions: []
    id: 64ef3c51be0407983ab7d384
    type: comment
  author: hayj
  content: "Is it normal it takes much more GPU mem when training, or am I wrongly\
    \ using it?\r\nI use a Nvidia A100."
  created_at: 2023-08-30 11:55:45+00:00
  edited: false
  hidden: false
  id: 64ef3c51be0407983ab7d384
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5a1ee74c2dbe349a6ec9843a1599d281.svg
      fullname: Liang Wang
      isHf: false
      isOrgMember: false
      isOwner: true
      isPro: false
      name: intfloat
      type: user
    createdAt: '2023-08-31T02:04:09.000Z'
    data:
      edited: false
      editors:
      - intfloat
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9491033554077148
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5a1ee74c2dbe349a6ec9843a1599d281.svg
          fullname: Liang Wang
          isHf: false
          isPro: false
          name: intfloat
          type: user
        html: '<p>Yes, this is normal. During training, it needs to store optimizer
          states, intermediate activations, and some other stuff, which are several
          times larger than the model weights.</p>

          <p>Please refer to <a href="https://huggingface.co/docs/transformers/v4.20.1/en/perf_train_gpu_one#anatomy-of-models-memory">https://huggingface.co/docs/transformers/v4.20.1/en/perf_train_gpu_one#anatomy-of-models-memory</a>
          for more details.</p>

          '
        raw: 'Yes, this is normal. During training, it needs to store optimizer states,
          intermediate activations, and some other stuff, which are several times
          larger than the model weights.


          Please refer to https://huggingface.co/docs/transformers/v4.20.1/en/perf_train_gpu_one#anatomy-of-models-memory
          for more details.'
        updatedAt: '2023-08-31T02:04:09.431Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\u2764\uFE0F"
        users:
        - hayj
    id: 64eff5193807d6d6e801918f
    type: comment
  author: intfloat
  content: 'Yes, this is normal. During training, it needs to store optimizer states,
    intermediate activations, and some other stuff, which are several times larger
    than the model weights.


    Please refer to https://huggingface.co/docs/transformers/v4.20.1/en/perf_train_gpu_one#anatomy-of-models-memory
    for more details.'
  created_at: 2023-08-31 01:04:09+00:00
  edited: false
  hidden: false
  id: 64eff5193807d6d6e801918f
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 15
repo_id: intfloat/multilingual-e5-large
repo_type: model
status: open
target_branch: null
title: Only 4G memory usage when inferring while 38Go when training
