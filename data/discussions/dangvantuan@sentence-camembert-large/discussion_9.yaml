!!python/object:huggingface_hub.community.DiscussionWithDetails
author: GuillaumeGrosjean
conflicting_files: null
created_at: 2023-06-20 08:17:57+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/5d083808573d4942e6a7e59d3d0097d7.svg
      fullname: Guillaume Grosjean
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: GuillaumeGrosjean
      type: user
    createdAt: '2023-06-20T09:17:57.000Z'
    data:
      edited: false
      editors:
      - GuillaumeGrosjean
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8077243566513062
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/5d083808573d4942e6a7e59d3d0097d7.svg
          fullname: Guillaume Grosjean
          isHf: false
          isPro: false
          name: GuillaumeGrosjean
          type: user
        html: '<p>Encoding large texts throws an error. When executing the following
          code:</p>

          <pre><code>from sentence_transformers import SentenceTransformer

          model =  SentenceTransformer("dangvantuan/sentence-camembert-large")

          model.encode(":"*1000)

          </code></pre>

          <p>It thows the error:</p>

          <pre><code>&gt;&gt;&gt; IndexError: index out of range in self

          </code></pre>

          <p>It seems that model.max_seq_length=514.<br>When explicitly setting model.max_seq_length=512,
          everything works fine.<br>Large texts seem to be truncated to 514 tokens
          by default, but i think should be truncated to 512.</p>

          '
        raw: "Encoding large texts throws an error. When executing the following code:\r\
          \n\r\n```\r\nfrom sentence_transformers import SentenceTransformer\r\nmodel\
          \ =  SentenceTransformer(\"dangvantuan/sentence-camembert-large\")\r\nmodel.encode(\"\
          :\"*1000)\r\n```\r\nIt thows the error:\r\n```\r\n>>> IndexError: index\
          \ out of range in self\r\n```\r\nIt seems that model.max_seq_length=514.\r\
          \nWhen explicitly setting model.max_seq_length=512, everything works fine.\r\
          \nLarge texts seem to be truncated to 514 tokens by default, but i think\
          \ should be truncated to 512.\r\n"
        updatedAt: '2023-06-20T09:17:57.895Z'
      numEdits: 0
      reactions:
      - count: 2
        reaction: "\U0001F91D"
        users:
        - toto21021
        - AntoineBourgois
    id: 64916ec511c9835432898282
    type: comment
  author: GuillaumeGrosjean
  content: "Encoding large texts throws an error. When executing the following code:\r\
    \n\r\n```\r\nfrom sentence_transformers import SentenceTransformer\r\nmodel =\
    \  SentenceTransformer(\"dangvantuan/sentence-camembert-large\")\r\nmodel.encode(\"\
    :\"*1000)\r\n```\r\nIt thows the error:\r\n```\r\n>>> IndexError: index out of\
    \ range in self\r\n```\r\nIt seems that model.max_seq_length=514.\r\nWhen explicitly\
    \ setting model.max_seq_length=512, everything works fine.\r\nLarge texts seem\
    \ to be truncated to 514 tokens by default, but i think should be truncated to\
    \ 512.\r\n"
  created_at: 2023-06-20 08:17:57+00:00
  edited: false
  hidden: false
  id: 64916ec511c9835432898282
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 9
repo_id: dangvantuan/sentence-camembert-large
repo_type: model
status: open
target_branch: null
title: Error when encoding large sentences
