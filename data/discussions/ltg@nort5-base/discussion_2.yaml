!!python/object:huggingface_hub.community.DiscussionWithDetails
author: erlingh
conflicting_files: null
created_at: 2023-06-22 12:13:20+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/649189d599cdb77a1b3926ba/roihGGSzGZ5PFVbj7BkNX.png?w=200&h=200&f=face
      fullname: Erling Hjermstad
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: erlingh
      type: user
    createdAt: '2023-06-22T13:13:20.000Z'
    data:
      edited: false
      editors:
      - erlingh
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6978365182876587
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/649189d599cdb77a1b3926ba/roihGGSzGZ5PFVbj7BkNX.png?w=200&h=200&f=face
          fullname: Erling Hjermstad
          isHf: false
          isPro: false
          name: erlingh
          type: user
        html: "<p>I'm having some issues getting the model to run. The example usage\
          \ does not work. Aside from the import error (<code>from modeling_nor*bert*</code>\
          \ not  <code>from modeling_nor*t5*</code>) there seems to be some wrong\
          \ with the script to interface with hugging face standards.  </p>\n<p>I\
          \ get the message  <code>AttributeError: 'function' has no attribute 'forward'</code>.\
          \ I believe this is because the <code>get_encoder</code> function in <code>NorT5Model</code>\
          \ returns the <code>get_encoder_output</code> function, not an object. \
          \ I've tried to write an encoder wrapper around the <code>Encoder</code>\
          \ class which implements the <code>get_encoder_output</code> function as\
          \ its <code>forward</code> function, but then I get an issue with the shape\
          \ of <code>input_shape</code>, so maybe this is the wrong way around. Any\
          \ help?</p>\n<p>Here is the code I'm running, copied from the example.</p>\n\
          <pre><code>import torch\nfrom transformers import AutoTokenizer\nfrom modeling_nort5\
          \ import NorT5ForConditionalGeneration\n\ntokenizer = AutoTokenizer.from_pretrained(\"\
          path/to/model\")\nmodel = NorT5ForConditionalGeneration.from_pretrained(\"\
          path/to/model\")\n\n#LANGUAGE MODELING\n\nsentence = \"Brukseksempel: Elektrisk\
          \ oppvarming. Definisjonen p\xE5 ordet oppvarming er[MASK_0].\"\n\ninput_tensor\
          \ = tokenizer(sentence, return_tensors=\"pt\").input_ids\noutput_tensor\
          \ = model.generate(input_tensor, decoder_start_token_id=7, eos_token_id=8)\n\
          print(tokenizer.decode(output_tensor.squeeze(), skip_special_tokens=True))\n\
          # should output:  \xE5 varme opp\n</code></pre>\n"
        raw: "I'm having some issues getting the model to run. The example usage does\
          \ not work. Aside from the import error (```from modeling_nor*bert*``` not\
          \  ```from modeling_nor*t5*```) there seems to be some wrong with the script\
          \ to interface with hugging face standards.  \r\n\r\nI get the message \
          \ ```AttributeError: 'function' has no attribute 'forward'```. I believe\
          \ this is because the ```get_encoder``` function in ```NorT5Model``` returns\
          \ the ```get_encoder_output``` function, not an object.  I've tried to write\
          \ an encoder wrapper around the ```Encoder``` class which implements the\
          \ ```get_encoder_output``` function as its ```forward``` function, but then\
          \ I get an issue with the shape of ```input_shape```, so maybe this is the\
          \ wrong way around. Any help?\r\n\r\nHere is the code I'm running, copied\
          \ from the example.\r\n```\r\nimport torch\r\nfrom transformers import AutoTokenizer\r\
          \nfrom modeling_nort5 import NorT5ForConditionalGeneration\r\n\r\ntokenizer\
          \ = AutoTokenizer.from_pretrained(\"path/to/model\")\r\nmodel = NorT5ForConditionalGeneration.from_pretrained(\"\
          path/to/model\")\r\n\r\n#LANGUAGE MODELING\r\n\r\nsentence = \"Brukseksempel:\
          \ Elektrisk oppvarming. Definisjonen p\xE5 ordet oppvarming er[MASK_0].\"\
          \r\n\r\ninput_tensor = tokenizer(sentence, return_tensors=\"pt\").input_ids\r\
          \noutput_tensor = model.generate(input_tensor, decoder_start_token_id=7,\
          \ eos_token_id=8)\r\nprint(tokenizer.decode(output_tensor.squeeze(), skip_special_tokens=True))\r\
          \n# should output:  \xE5 varme opp\r\n```"
        updatedAt: '2023-06-22T13:13:20.228Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F91D"
        users:
        - sebastianhestsveen
    id: 649448f05a55520af5765d70
    type: comment
  author: erlingh
  content: "I'm having some issues getting the model to run. The example usage does\
    \ not work. Aside from the import error (```from modeling_nor*bert*``` not  ```from\
    \ modeling_nor*t5*```) there seems to be some wrong with the script to interface\
    \ with hugging face standards.  \r\n\r\nI get the message  ```AttributeError:\
    \ 'function' has no attribute 'forward'```. I believe this is because the ```get_encoder```\
    \ function in ```NorT5Model``` returns the ```get_encoder_output``` function,\
    \ not an object.  I've tried to write an encoder wrapper around the ```Encoder```\
    \ class which implements the ```get_encoder_output``` function as its ```forward```\
    \ function, but then I get an issue with the shape of ```input_shape```, so maybe\
    \ this is the wrong way around. Any help?\r\n\r\nHere is the code I'm running,\
    \ copied from the example.\r\n```\r\nimport torch\r\nfrom transformers import\
    \ AutoTokenizer\r\nfrom modeling_nort5 import NorT5ForConditionalGeneration\r\n\
    \r\ntokenizer = AutoTokenizer.from_pretrained(\"path/to/model\")\r\nmodel = NorT5ForConditionalGeneration.from_pretrained(\"\
    path/to/model\")\r\n\r\n#LANGUAGE MODELING\r\n\r\nsentence = \"Brukseksempel:\
    \ Elektrisk oppvarming. Definisjonen p\xE5 ordet oppvarming er[MASK_0].\"\r\n\r\
    \ninput_tensor = tokenizer(sentence, return_tensors=\"pt\").input_ids\r\noutput_tensor\
    \ = model.generate(input_tensor, decoder_start_token_id=7, eos_token_id=8)\r\n\
    print(tokenizer.decode(output_tensor.squeeze(), skip_special_tokens=True))\r\n\
    # should output:  \xE5 varme opp\r\n```"
  created_at: 2023-06-22 12:13:20+00:00
  edited: false
  hidden: false
  id: 649448f05a55520af5765d70
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/648c1d9a472befe0ab2e366f/HRBfjjKK0jHLxP5Y3aE3A.png?w=200&h=200&f=face
      fullname: sebastian hestsveen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: sebastianhestsveen
      type: user
    createdAt: '2023-06-26T14:21:34.000Z'
    data:
      edited: false
      editors:
      - sebastianhestsveen
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7869362831115723
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/648c1d9a472befe0ab2e366f/HRBfjjKK0jHLxP5Y3aE3A.png?w=200&h=200&f=face
          fullname: sebastian hestsveen
          isHf: false
          isPro: false
          name: sebastianhestsveen
          type: user
        html: '<p>Hei, I have tried the same thing and I''m getting the same error
          message.<br><code>AttributeError: ''function'' object has no attribute ''forward`
          </code></p>

          '
        raw: 'Hei, I have tried the same thing and I''m getting the same error message.

          ```AttributeError: ''function'' object has no attribute ''forward` ```'
        updatedAt: '2023-06-26T14:21:34.874Z'
      numEdits: 0
      reactions: []
    id: 64999eee16e6180ca2c7edd4
    type: comment
  author: sebastianhestsveen
  content: 'Hei, I have tried the same thing and I''m getting the same error message.

    ```AttributeError: ''function'' object has no attribute ''forward` ```'
  created_at: 2023-06-26 13:21:34+00:00
  edited: false
  hidden: false
  id: 64999eee16e6180ca2c7edd4
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/c67c0b1d9ea0f8a42c5c8b8cf8c20597.svg
      fullname: David Samuel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: davda54
      type: user
    createdAt: '2023-07-10T17:49:10.000Z'
    data:
      edited: false
      editors:
      - davda54
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9507623910903931
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/c67c0b1d9ea0f8a42c5c8b8cf8c20597.svg
          fullname: David Samuel
          isHf: false
          isPro: false
          name: davda54
          type: user
        html: '<p>Hi,  thanks a lot for raising this issue! There was indeed a compatibility
          problem with the newest <code>huggingface</code> version, it should be fixed
          now :)</p>

          '
        raw: Hi,  thanks a lot for raising this issue! There was indeed a compatibility
          problem with the newest `huggingface` version, it should be fixed now :)
        updatedAt: '2023-07-10T17:49:10.445Z'
      numEdits: 0
      reactions:
      - count: 1
        reaction: "\U0001F44D"
        users:
        - sebastianhestsveen
    id: 64ac4496f5d40283c611b426
    type: comment
  author: davda54
  content: Hi,  thanks a lot for raising this issue! There was indeed a compatibility
    problem with the newest `huggingface` version, it should be fixed now :)
  created_at: 2023-07-10 16:49:10+00:00
  edited: false
  hidden: false
  id: 64ac4496f5d40283c611b426
  type: comment
- !!python/object:huggingface_hub.community.DiscussionStatusChange
  _event:
    author:
      avatarUrl: /avatars/c67c0b1d9ea0f8a42c5c8b8cf8c20597.svg
      fullname: David Samuel
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: davda54
      type: user
    createdAt: '2023-07-10T17:50:10.000Z'
    data:
      status: closed
    id: 64ac44d267c1cee8dfd1f1e7
    type: status-change
  author: davda54
  created_at: 2023-07-10 16:50:10+00:00
  id: 64ac44d267c1cee8dfd1f1e7
  new_status: closed
  type: status-change
is_pull_request: false
merge_commit_oid: null
num: 2
repo_id: ltg/nort5-base
repo_type: model
status: closed
target_branch: null
title: Can't get model to run with example on model card
