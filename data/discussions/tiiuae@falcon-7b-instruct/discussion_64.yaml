!!python/object:huggingface_hub.community.DiscussionWithDetails
author: rshrott
conflicting_files: null
created_at: 2023-07-16 20:10:43+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/734f388412406ccdd0e572c7246ca90c.svg
      fullname: Ryan Shrott
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rshrott
      type: user
    createdAt: '2023-07-16T21:10:43.000Z'
    data:
      edited: true
      editors:
      - rshrott
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.6857874989509583
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/734f388412406ccdd0e572c7246ca90c.svg
          fullname: Ryan Shrott
          isHf: false
          isPro: false
          name: rshrott
          type: user
        html: '<p>Hi I fine tuned the model using this tutorial. It works great in
          notebook.<br><a rel="nofollow" href="https://colab.research.google.com/drive/1FxlUb_H6Xirhkx4RszAgHeb2uDW7oKIH">https://colab.research.google.com/drive/1FxlUb_H6Xirhkx4RszAgHeb2uDW7oKIH</a></p>

          <p>After I deploy to inference endpoint, i get this error: "nRuntimeError:
          weight transformer.word_embeddings.weight does not exist"</p>

          <p>Could someone please advise how to fix? </p>

          <p>To replicate the issue, you could try deploying this model here:<br><a
          href="https://huggingface.co/vrsen/falcon-7b-instruct-ft">https://huggingface.co/vrsen/falcon-7b-instruct-ft</a></p>

          <p>You will see the same failure that I see. Could someone please help?</p>

          <p>I am following these tutorials:<br><a rel="nofollow" href="https://www.youtube.com/watch?v=AXG7TA7vIQ8&amp;t=194s&amp;ab_channel=VRSEN">https://www.youtube.com/watch?v=AXG7TA7vIQ8&amp;t=194s&amp;ab_channel=VRSEN</a><br><a
          rel="nofollow" href="https://www.youtube.com/watch?v=VdKdQYduGQc&amp;ab_channel=VRSEN">https://www.youtube.com/watch?v=VdKdQYduGQc&amp;ab_channel=VRSEN</a></p>

          <p>more logs:<br>RuntimeError(f"weight {tensor_name} does not exist")\nRuntimeError:
          weight transformer.word_embeddings.weight does not exist\n"},"target":"text_generation_launcher","span":{"rank":0,"name":"shard-manager"},"spans":[{"rank":0,"name":"shard-manager"}]}<br>526bf
          2023-07-16T20:37:19.492Z {"timestamp":"2023-07-16T20:37:19.491918Z","level":"INFO","fields":{"message":"Shutting
          down shards"},"target":"text_generation_launcher"}</p>

          <p>526bf 2023-07-16T20:37:19.492Z {"timestamp":"2023-07-16T20:37:19.491898Z","level":"ERROR","fields":{"message":"You
          are using a model of type RefinedWebModel to instantiate a model of type
          . This is not supported for all configurations of models and can yield errors.\nTraceback
          (most recent call last):\n\n File</p>

          <p>line 49, in get_filename\n raise RuntimeError(f"weight {tensor_name}
          does not exist")\n\nRuntimeError: weight transformer.word_embeddings.weight
          does not exist\n\n"},"target":"text_generation_launcher"}<br>526bf 2023-07-16T20:37:19.492Z
          Error: ShardCannotStart<br>526bf 2023-07-16T20:37:19.492Z {"timestamp":"2023-07-16T20:37:19.491861Z","level":"ERROR","fields":{"message":"Shard
          0 failed to start"},"target":"text_generation_launcher"}</p>

          '
        raw: "Hi I fine tuned the model using this tutorial. It works great in notebook.\
          \ \nhttps://colab.research.google.com/drive/1FxlUb_H6Xirhkx4RszAgHeb2uDW7oKIH\n\
          \nAfter I deploy to inference endpoint, i get this error: \"nRuntimeError:\
          \ weight transformer.word_embeddings.weight does not exist\"\n\nCould someone\
          \ please advise how to fix? \n\nTo replicate the issue, you could try deploying\
          \ this model here:\nhttps://huggingface.co/vrsen/falcon-7b-instruct-ft\n\
          \nYou will see the same failure that I see. Could someone please help?\n\
          \nI am following these tutorials:\nhttps://www.youtube.com/watch?v=AXG7TA7vIQ8&t=194s&ab_channel=VRSEN\n\
          https://www.youtube.com/watch?v=VdKdQYduGQc&ab_channel=VRSEN\n\nmore logs:\n\
          RuntimeError(f\\\"weight {tensor_name} does not exist\\\")\\nRuntimeError:\
          \ weight transformer.word_embeddings.weight does not exist\\n\"},\"target\"\
          :\"text_generation_launcher\",\"span\":{\"rank\":0,\"name\":\"shard-manager\"\
          },\"spans\":[{\"rank\":0,\"name\":\"shard-manager\"}]}\n526bf 2023-07-16T20:37:19.492Z\
          \ {\"timestamp\":\"2023-07-16T20:37:19.491918Z\",\"level\":\"INFO\",\"fields\"\
          :{\"message\":\"Shutting down shards\"},\"target\":\"text_generation_launcher\"\
          }\n\n\n526bf 2023-07-16T20:37:19.492Z {\"timestamp\":\"2023-07-16T20:37:19.491898Z\"\
          ,\"level\":\"ERROR\",\"fields\":{\"message\":\"You are using a model of\
          \ type RefinedWebModel to instantiate a model of type . This is not supported\
          \ for all configurations of models and can yield errors.\\nTraceback (most\
          \ recent call last):\\n\\n File\n\nline 49, in get_filename\\n raise RuntimeError(f\\\
          \"weight {tensor_name} does not exist\\\")\\n\\nRuntimeError: weight transformer.word_embeddings.weight\
          \ does not exist\\n\\n\"},\"target\":\"text_generation_launcher\"}\n526bf\
          \ 2023-07-16T20:37:19.492Z Error: ShardCannotStart\n526bf 2023-07-16T20:37:19.492Z\
          \ {\"timestamp\":\"2023-07-16T20:37:19.491861Z\",\"level\":\"ERROR\",\"\
          fields\":{\"message\":\"Shard 0 failed to start\"},\"target\":\"text_generation_launcher\"\
          }\n"
        updatedAt: '2023-07-16T21:14:17.590Z'
      numEdits: 1
      reactions: []
    id: 64b45cd31917256b41412a8f
    type: comment
  author: rshrott
  content: "Hi I fine tuned the model using this tutorial. It works great in notebook.\
    \ \nhttps://colab.research.google.com/drive/1FxlUb_H6Xirhkx4RszAgHeb2uDW7oKIH\n\
    \nAfter I deploy to inference endpoint, i get this error: \"nRuntimeError: weight\
    \ transformer.word_embeddings.weight does not exist\"\n\nCould someone please\
    \ advise how to fix? \n\nTo replicate the issue, you could try deploying this\
    \ model here:\nhttps://huggingface.co/vrsen/falcon-7b-instruct-ft\n\nYou will\
    \ see the same failure that I see. Could someone please help?\n\nI am following\
    \ these tutorials:\nhttps://www.youtube.com/watch?v=AXG7TA7vIQ8&t=194s&ab_channel=VRSEN\n\
    https://www.youtube.com/watch?v=VdKdQYduGQc&ab_channel=VRSEN\n\nmore logs:\nRuntimeError(f\\\
    \"weight {tensor_name} does not exist\\\")\\nRuntimeError: weight transformer.word_embeddings.weight\
    \ does not exist\\n\"},\"target\":\"text_generation_launcher\",\"span\":{\"rank\"\
    :0,\"name\":\"shard-manager\"},\"spans\":[{\"rank\":0,\"name\":\"shard-manager\"\
    }]}\n526bf 2023-07-16T20:37:19.492Z {\"timestamp\":\"2023-07-16T20:37:19.491918Z\"\
    ,\"level\":\"INFO\",\"fields\":{\"message\":\"Shutting down shards\"},\"target\"\
    :\"text_generation_launcher\"}\n\n\n526bf 2023-07-16T20:37:19.492Z {\"timestamp\"\
    :\"2023-07-16T20:37:19.491898Z\",\"level\":\"ERROR\",\"fields\":{\"message\":\"\
    You are using a model of type RefinedWebModel to instantiate a model of type .\
    \ This is not supported for all configurations of models and can yield errors.\\\
    nTraceback (most recent call last):\\n\\n File\n\nline 49, in get_filename\\n\
    \ raise RuntimeError(f\\\"weight {tensor_name} does not exist\\\")\\n\\nRuntimeError:\
    \ weight transformer.word_embeddings.weight does not exist\\n\\n\"},\"target\"\
    :\"text_generation_launcher\"}\n526bf 2023-07-16T20:37:19.492Z Error: ShardCannotStart\n\
    526bf 2023-07-16T20:37:19.492Z {\"timestamp\":\"2023-07-16T20:37:19.491861Z\"\
    ,\"level\":\"ERROR\",\"fields\":{\"message\":\"Shard 0 failed to start\"},\"target\"\
    :\"text_generation_launcher\"}\n"
  created_at: 2023-07-16 20:10:43+00:00
  edited: true
  hidden: false
  id: 64b45cd31917256b41412a8f
  type: comment
- !!python/object:huggingface_hub.community.DiscussionTitleChange
  _event:
    author:
      avatarUrl: /avatars/734f388412406ccdd0e572c7246ca90c.svg
      fullname: Ryan Shrott
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: rshrott
      type: user
    createdAt: '2023-07-16T21:10:53.000Z'
    data:
      from: 'Fine tuning '
      to: 'Fine tuning  "nRuntimeError: weight transformer.word_embeddings.weight
        does not exist"'
    id: 64b45cdd69b9fea014da6db9
    type: title-change
  author: rshrott
  created_at: 2023-07-16 20:10:53+00:00
  id: 64b45cdd69b9fea014da6db9
  new_title: 'Fine tuning  "nRuntimeError: weight transformer.word_embeddings.weight
    does not exist"'
  old_title: 'Fine tuning '
  type: title-change
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/fa3ff1db4c1a334c1883f5b22b852597.svg
      fullname: Bryan Weber
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bwebs
      type: user
    createdAt: '2023-07-21T15:43:36.000Z'
    data:
      edited: false
      editors:
      - bwebs
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7266939878463745
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/fa3ff1db4c1a334c1883f5b22b852597.svg
          fullname: Bryan Weber
          isHf: false
          isPro: false
          name: bwebs
          type: user
        html: '<p>Any updates here? I am experiencing the same thing</p>

          '
        raw: Any updates here? I am experiencing the same thing
        updatedAt: '2023-07-21T15:43:36.751Z'
      numEdits: 0
      reactions: []
    id: 64baa7a8da140e461905222a
    type: comment
  author: bwebs
  content: Any updates here? I am experiencing the same thing
  created_at: 2023-07-21 14:43:36+00:00
  edited: false
  hidden: false
  id: 64baa7a8da140e461905222a
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 64
repo_id: tiiuae/falcon-7b-instruct
repo_type: model
status: open
target_branch: null
title: 'Fine tuning  "nRuntimeError: weight transformer.word_embeddings.weight does
  not exist"'
