!!python/object:huggingface_hub.community.DiscussionWithDetails
author: Vvkishere
conflicting_files: null
created_at: 2023-01-13 06:21:36+00:00
diff: null
endpoint: https://huggingface.co
events:
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/92e7b59ddd92e4c197ca8acb7fe642fc.svg
      fullname: Vivek V Krishnan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vvkishere
      type: user
    createdAt: '2023-01-13T06:21:36.000Z'
    data:
      edited: false
      editors:
      - Vvkishere
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/92e7b59ddd92e4c197ca8acb7fe642fc.svg
          fullname: Vivek V Krishnan
          isHf: false
          isPro: false
          name: Vvkishere
          type: user
        html: '<p>I get a<br>TypeError: <strong>init</strong>() got an unexpected
          keyword argument ''pooling_mode_weightedmean_tokens''</p>

          <p>When trying to load the model using sentence transformers in a Google
          Colab Pro notebook. I am not sure how to resolve the issue. </p>

          '
        raw: "I get a \r\nTypeError: __init__() got an unexpected keyword argument\
          \ 'pooling_mode_weightedmean_tokens'\r\n\r\nWhen trying to load the model\
          \ using sentence transformers in a Google Colab Pro notebook. I am not sure\
          \ how to resolve the issue. "
        updatedAt: '2023-01-13T06:21:36.445Z'
      numEdits: 0
      reactions: []
    id: 63c0f8703bdc86f8108e7d65
    type: comment
  author: Vvkishere
  content: "I get a \r\nTypeError: __init__() got an unexpected keyword argument 'pooling_mode_weightedmean_tokens'\r\
    \n\r\nWhen trying to load the model using sentence transformers in a Google Colab\
    \ Pro notebook. I am not sure how to resolve the issue. "
  created_at: 2023-01-13 06:21:36+00:00
  edited: false
  hidden: false
  id: 63c0f8703bdc86f8108e7d65
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-01-13T06:34:40.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>Thanks for your question!</p>

          <p>You may try installing customized sentence-transformers here: <a rel="nofollow"
          href="https://github.com/HKUNLP/instructor-embedding/tree/main/sentence-transformers">https://github.com/HKUNLP/instructor-embedding/tree/main/sentence-transformers</a>,
          and use transformers 4.20.0.</p>

          <p>Feel free to leave further questions!</p>

          '
        raw: 'Thanks for your question!


          You may try installing customized sentence-transformers here: https://github.com/HKUNLP/instructor-embedding/tree/main/sentence-transformers,
          and use transformers 4.20.0.


          Feel free to leave further questions!'
        updatedAt: '2023-01-13T06:34:40.267Z'
      numEdits: 0
      reactions: []
    id: 63c0fb80d9e14fd88766b2dc
    type: comment
  author: multi-train
  content: 'Thanks for your question!


    You may try installing customized sentence-transformers here: https://github.com/HKUNLP/instructor-embedding/tree/main/sentence-transformers,
    and use transformers 4.20.0.


    Feel free to leave further questions!'
  created_at: 2023-01-13 06:34:40+00:00
  edited: false
  hidden: false
  id: 63c0fb80d9e14fd88766b2dc
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/92e7b59ddd92e4c197ca8acb7fe642fc.svg
      fullname: Vivek V Krishnan
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Vvkishere
      type: user
    createdAt: '2023-01-14T07:25:10.000Z'
    data:
      edited: false
      editors:
      - Vvkishere
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/92e7b59ddd92e4c197ca8acb7fe642fc.svg
          fullname: Vivek V Krishnan
          isHf: false
          isPro: false
          name: Vvkishere
          type: user
        html: '<p>How does one go about doing that specifically? What is the command
          one must run?</p>

          '
        raw: How does one go about doing that specifically? What is the command one
          must run?
        updatedAt: '2023-01-14T07:25:10.461Z'
      numEdits: 0
      reactions: []
    id: 63c258d6758e752d92225f9a
    type: comment
  author: Vvkishere
  content: How does one go about doing that specifically? What is the command one
    must run?
  created_at: 2023-01-14 07:25:10+00:00
  edited: false
  hidden: false
  id: 63c258d6758e752d92225f9a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-01-14T07:32:48.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>Thanks for the question!</p>

          <p>Specifically, you may first clone the repository:</p>

          <pre><code>git clone https://github.com/HKUNLP/instructor-embedding

          </code></pre>

          <p>Then go to the sentence-transformers folder:</p>

          <pre><code>cd instructor-embedding/sentence-transformers

          </code></pre>

          <p>Finally you will be able to install the customized package:</p>

          <pre><code>pip install -e .

          </code></pre>

          <p>Feel free to leave your further questions here.</p>

          '
        raw: 'Thanks for the question!


          Specifically, you may first clone the repository:

          ```

          git clone https://github.com/HKUNLP/instructor-embedding

          ```


          Then go to the sentence-transformers folder:

          ```

          cd instructor-embedding/sentence-transformers

          ```


          Finally you will be able to install the customized package:

          ```

          pip install -e .

          ```


          Feel free to leave your further questions here.'
        updatedAt: '2023-01-14T07:32:48.072Z'
      numEdits: 0
      reactions: []
    id: 63c25aa0758e752d9222726d
    type: comment
  author: multi-train
  content: 'Thanks for the question!


    Specifically, you may first clone the repository:

    ```

    git clone https://github.com/HKUNLP/instructor-embedding

    ```


    Then go to the sentence-transformers folder:

    ```

    cd instructor-embedding/sentence-transformers

    ```


    Finally you will be able to install the customized package:

    ```

    pip install -e .

    ```


    Feel free to leave your further questions here.'
  created_at: 2023-01-14 07:32:48+00:00
  edited: false
  hidden: false
  id: 63c25aa0758e752d9222726d
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672330023435-62c6faed53c7156f5bf767ed.png?w=200&h=200&f=face
      fullname: Gene Ruebsamen
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: yahma
      type: user
    createdAt: '2023-03-26T06:59:32.000Z'
    data:
      edited: false
      editors:
      - yahma
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/1672330023435-62c6faed53c7156f5bf767ed.png?w=200&h=200&f=face
          fullname: Gene Ruebsamen
          isHf: false
          isPro: false
          name: yahma
          type: user
        html: '<p>Has this been integrated into the main Hugging Face sentence-transformers
          yet?</p>

          '
        raw: Has this been integrated into the main Hugging Face sentence-transformers
          yet?
        updatedAt: '2023-03-26T06:59:32.282Z'
      numEdits: 0
      reactions: []
    id: 641fed54eb85a7dfb7429a78
    type: comment
  author: yahma
  content: Has this been integrated into the main Hugging Face sentence-transformers
    yet?
  created_at: 2023-03-26 05:59:32+00:00
  edited: false
  hidden: false
  id: 641fed54eb85a7dfb7429a78
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-03-27T02:47:59.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>No, because we have overwritten several classes in the sentence-transformers
          library to incorporate instructions.</p>

          '
        raw: No, because we have overwritten several classes in the sentence-transformers
          library to incorporate instructions.
        updatedAt: '2023-03-27T02:47:59.256Z'
      numEdits: 0
      reactions: []
    id: 642103df9d8b37582b7084d8
    type: comment
  author: multi-train
  content: No, because we have overwritten several classes in the sentence-transformers
    library to incorporate instructions.
  created_at: 2023-03-27 01:47:59+00:00
  edited: false
  hidden: false
  id: 642103df9d8b37582b7084d8
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/149362f98439ed355410fdd7647e1f53.svg
      fullname: Zephyr Luo
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: zeph3152
      type: user
    createdAt: '2023-07-04T03:44:30.000Z'
    data:
      edited: false
      editors:
      - zeph3152
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.8883557915687561
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/149362f98439ed355410fdd7647e1f53.svg
          fullname: Zephyr Luo
          isHf: false
          isPro: false
          name: zeph3152
          type: user
        html: '<p>Hi,  I cannot find the path to <code>sentence_transformers</code></p>

          '
        raw: Hi,  I cannot find the path to `sentence_transformers`
        updatedAt: '2023-07-04T03:44:30.442Z'
      numEdits: 0
      reactions: []
    id: 64a3959e38f48d7a6d6f61b0
    type: comment
  author: zeph3152
  content: Hi,  I cannot find the path to `sentence_transformers`
  created_at: 2023-07-04 02:44:30+00:00
  edited: false
  hidden: false
  id: 64a3959e38f48d7a6d6f61b0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-07-04T07:36:38.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7719026207923889
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>Hi, you may want to install the sentence-transformers via <code>pip
          install sentence-transformers</code>.</p>

          '
        raw: Hi, you may want to install the sentence-transformers via `pip install
          sentence-transformers`.
        updatedAt: '2023-07-04T07:36:38.890Z'
      numEdits: 0
      reactions: []
    id: 64a3cc061698ad29852582de
    type: comment
  author: multi-train
  content: Hi, you may want to install the sentence-transformers via `pip install
    sentence-transformers`.
  created_at: 2023-07-04 06:36:38+00:00
  edited: false
  hidden: false
  id: 64a3cc061698ad29852582de
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/f7b63eedeaba2884c5152cfb84f22b5b.svg
      fullname: Antonio
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: Dujma
      type: user
    createdAt: '2023-07-04T14:29:31.000Z'
    data:
      edited: true
      editors:
      - Dujma
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.5882914662361145
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/f7b63eedeaba2884c5152cfb84f22b5b.svg
          fullname: Antonio
          isHf: false
          isPro: false
          name: Dujma
          type: user
        html: '<p>There aren''t may results on Google related to this issue except
          this thread. I have the sentence-transformers installed and I''m still getting
          the error from the original post.</p>

          <p><code>TypeError: Pooling.__init__() got an unexpected keyword argument
          ''pooling_mode_weightedmean_tokens''</code></p>

          <p>Here''s the script that I''ve used:</p>

          <pre><code>from langchain.document_loaders import PyPDFLoader

          from langchain.vectorstores import Chroma

          from langchain.embeddings import HuggingFaceEmbeddings

          from InstructorEmbedding import INSTRUCTOR


          model = INSTRUCTOR(''hkunlp/instructor-xl'')


          pdf_path = "./document.pdf"

          loader = PyPDFLoader(pdf_path)

          pages = loader.load_and_split()


          embeddings = HuggingFaceEmbeddings(model_name="hkunlp/instructor-xl")


          db = Chroma.from_documents(documents=pages, embedding=embeddings, persist_directory="./chroma_db")

          db.persist()

          </code></pre>

          <p>Any idea how to solve this? Thanks!</p>

          <p>EDIT: It works fine with "sentence-transformers/all-MiniLM-L6-v2" model
          for example.<br>EDIT 2: This seems to work <a rel="nofollow" href="https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453">https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453</a></p>

          '
        raw: 'There aren''t may results on Google related to this issue except this
          thread. I have the sentence-transformers installed and I''m still getting
          the error from the original post.


          `TypeError: Pooling.__init__() got an unexpected keyword argument ''pooling_mode_weightedmean_tokens''`


          Here''s the script that I''ve used:


          ```

          from langchain.document_loaders import PyPDFLoader

          from langchain.vectorstores import Chroma

          from langchain.embeddings import HuggingFaceEmbeddings

          from InstructorEmbedding import INSTRUCTOR


          model = INSTRUCTOR(''hkunlp/instructor-xl'')


          pdf_path = "./document.pdf"

          loader = PyPDFLoader(pdf_path)

          pages = loader.load_and_split()


          embeddings = HuggingFaceEmbeddings(model_name="hkunlp/instructor-xl")


          db = Chroma.from_documents(documents=pages, embedding=embeddings, persist_directory="./chroma_db")

          db.persist()

          ```

          Any idea how to solve this? Thanks!


          EDIT: It works fine with "sentence-transformers/all-MiniLM-L6-v2" model
          for example.

          EDIT 2: This seems to work https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453'
        updatedAt: '2023-07-04T14:49:20.024Z'
      numEdits: 3
      reactions: []
    id: 64a42ccbd34eb2ffbf81d56b
    type: comment
  author: Dujma
  content: 'There aren''t may results on Google related to this issue except this
    thread. I have the sentence-transformers installed and I''m still getting the
    error from the original post.


    `TypeError: Pooling.__init__() got an unexpected keyword argument ''pooling_mode_weightedmean_tokens''`


    Here''s the script that I''ve used:


    ```

    from langchain.document_loaders import PyPDFLoader

    from langchain.vectorstores import Chroma

    from langchain.embeddings import HuggingFaceEmbeddings

    from InstructorEmbedding import INSTRUCTOR


    model = INSTRUCTOR(''hkunlp/instructor-xl'')


    pdf_path = "./document.pdf"

    loader = PyPDFLoader(pdf_path)

    pages = loader.load_and_split()


    embeddings = HuggingFaceEmbeddings(model_name="hkunlp/instructor-xl")


    db = Chroma.from_documents(documents=pages, embedding=embeddings, persist_directory="./chroma_db")

    db.persist()

    ```

    Any idea how to solve this? Thanks!


    EDIT: It works fine with "sentence-transformers/all-MiniLM-L6-v2" model for example.

    EDIT 2: This seems to work https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453'
  created_at: 2023-07-04 13:29:31+00:00
  edited: true
  hidden: false
  id: 64a42ccbd34eb2ffbf81d56b
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
      fullname: Hongjin SU
      isHf: false
      isOrgMember: true
      isOwner: false
      isPro: false
      name: multi-train
      type: user
    createdAt: '2023-07-06T19:31:03.000Z'
    data:
      edited: false
      editors:
      - multi-train
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.7683236002922058
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/b7d0a895e669bcd1303c4716b5401c36.svg
          fullname: Hongjin SU
          isHf: false
          isPro: false
          name: multi-train
          type: user
        html: '<p>You may try to install sentence-transformers 2.2.2.</p>

          '
        raw: You may try to install sentence-transformers 2.2.2.
        updatedAt: '2023-07-06T19:31:03.740Z'
      numEdits: 0
      reactions: []
    id: 64a71677bc8fc71579d837b0
    type: comment
  author: multi-train
  content: You may try to install sentence-transformers 2.2.2.
  created_at: 2023-07-06 18:31:03+00:00
  edited: false
  hidden: false
  id: 64a71677bc8fc71579d837b0
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/b-V3dB5dSWrzmbrHBTY6G.jpeg?w=200&h=200&f=face
      fullname: karim w
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: karim0
      type: user
    createdAt: '2023-07-18T17:00:40.000Z'
    data:
      edited: false
      editors:
      - karim0
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.888163149356842
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/noauth/b-V3dB5dSWrzmbrHBTY6G.jpeg?w=200&h=200&f=face
          fullname: karim w
          isHf: false
          isPro: false
          name: karim0
          type: user
        html: '<blockquote>

          <p>You may try to install sentence-transformers 2.2.2.</p>

          </blockquote>

          <p>despite trying that, i still get the same exact error</p>

          '
        raw: '> You may try to install sentence-transformers 2.2.2.


          despite trying that, i still get the same exact error



          '
        updatedAt: '2023-07-18T17:00:40.033Z'
      numEdits: 0
      reactions: []
    id: 64b6c5382edcb4a1aa81247a
    type: comment
  author: karim0
  content: '> You may try to install sentence-transformers 2.2.2.


    despite trying that, i still get the same exact error



    '
  created_at: 2023-07-18 16:00:40+00:00
  edited: false
  hidden: false
  id: 64b6c5382edcb4a1aa81247a
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/649b3f3bf52bd5753b68733f/aWl63Bc3E7qh8n5eYBmXu.jpeg?w=200&h=200&f=face
      fullname: Robert Seaton
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: bobse
      type: user
    createdAt: '2023-07-24T15:22:29.000Z'
    data:
      edited: true
      editors:
      - bobse
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.3635130822658539
      isReport: false
      latest:
        author:
          avatarUrl: https://aeiljuispo.cloudimg.io/v7/https://cdn-uploads.huggingface.co/production/uploads/649b3f3bf52bd5753b68733f/aWl63Bc3E7qh8n5eYBmXu.jpeg?w=200&h=200&f=face
          fullname: Robert Seaton
          isHf: false
          isPro: false
          name: bobse
          type: user
        html: '<p>Here''s my hack to solve it (until there''s an official fix):</p>

          <p>INSTR = [instructor-xl, instructor-large, instructor-base] pick your
          instructor model</p>

          <ol>

          <li><p>edit the pooling config file in models/hkunlp/INSTR/1_Pooling/config.json</p>

          </li>

          <li><p>Remove the offending lines with "pooling_mode_max_tokens" and "pooling_mode_mean_sqrt_len_tokens"<br>change
          this:<br>{<br>  "word_embedding_dimension": 768,<br>  "pooling_mode_cls_token":
          false,<br>  "pooling_mode_mean_tokens": true,<br>  "pooling_mode_max_tokens":
          false,<br>  "pooling_mode_mean_sqrt_len_tokens": false,<br>  "pooling_mode_weightedmean_tokens":
          false,<br>  "pooling_mode_lasttoken": false<br>}<br>to this:<br>{<br>  "word_embedding_dimension":
          768,<br>  "pooling_mode_cls_token": false,<br>  "pooling_mode_mean_tokens":
          true,<br>  "pooling_mode_max_tokens": false,<br>  "pooling_mode_mean_sqrt_len_tokens":
          false<br>}</p>

          </li>

          <li><p>remember to also remove the "," at the end of the line above<br>change   "pooling_mode_mean_sqrt_len_tokens":
          false,<br>to   "pooling_mode_mean_sqrt_len_tokens": false</p>

          </li>

          </ol>

          <p>Hope this works for you!<br>Or you could edit the Pooling.py in your
          installed version of sentence-transformers, as the original author suggested:
          <a rel="nofollow" href="https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453">https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453</a></p>

          '
        raw: "Here's my hack to solve it (until there's an official fix):\n\nINSTR\
          \ = [instructor-xl, instructor-large, instructor-base] pick your instructor\
          \ model\n\n1. edit the pooling config file in models/hkunlp/INSTR/1_Pooling/config.json\n\
          \n2. Remove the offending lines with \"pooling_mode_max_tokens\" and \"\
          pooling_mode_mean_sqrt_len_tokens\"\nchange this:\n{\n  \"word_embedding_dimension\"\
          : 768,\n  \"pooling_mode_cls_token\": false,\n  \"pooling_mode_mean_tokens\"\
          : true,\n  \"pooling_mode_max_tokens\": false,\n  \"pooling_mode_mean_sqrt_len_tokens\"\
          : false,\n  \"pooling_mode_weightedmean_tokens\": false,\n  \"pooling_mode_lasttoken\"\
          : false\n}\nto this:\n{\n  \"word_embedding_dimension\": 768,\n  \"pooling_mode_cls_token\"\
          : false,\n  \"pooling_mode_mean_tokens\": true,\n  \"pooling_mode_max_tokens\"\
          : false,\n  \"pooling_mode_mean_sqrt_len_tokens\": false\n}\n\n3. remember\
          \ to also remove the \",\" at the end of the line above \nchange   \"pooling_mode_mean_sqrt_len_tokens\"\
          : false,\nto   \"pooling_mode_mean_sqrt_len_tokens\": false\n\nHope this\
          \ works for you!\nOr you could edit the Pooling.py in your installed version\
          \ of sentence-transformers, as the original author suggested: https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453"
        updatedAt: '2023-07-24T15:37:48.189Z'
      numEdits: 4
      reactions:
      - count: 2
        reaction: "\U0001F91D"
        users:
        - saikrishnaKas
        - ssainis
    id: 64be973501f1983a869c7199
    type: comment
  author: bobse
  content: "Here's my hack to solve it (until there's an official fix):\n\nINSTR =\
    \ [instructor-xl, instructor-large, instructor-base] pick your instructor model\n\
    \n1. edit the pooling config file in models/hkunlp/INSTR/1_Pooling/config.json\n\
    \n2. Remove the offending lines with \"pooling_mode_max_tokens\" and \"pooling_mode_mean_sqrt_len_tokens\"\
    \nchange this:\n{\n  \"word_embedding_dimension\": 768,\n  \"pooling_mode_cls_token\"\
    : false,\n  \"pooling_mode_mean_tokens\": true,\n  \"pooling_mode_max_tokens\"\
    : false,\n  \"pooling_mode_mean_sqrt_len_tokens\": false,\n  \"pooling_mode_weightedmean_tokens\"\
    : false,\n  \"pooling_mode_lasttoken\": false\n}\nto this:\n{\n  \"word_embedding_dimension\"\
    : 768,\n  \"pooling_mode_cls_token\": false,\n  \"pooling_mode_mean_tokens\":\
    \ true,\n  \"pooling_mode_max_tokens\": false,\n  \"pooling_mode_mean_sqrt_len_tokens\"\
    : false\n}\n\n3. remember to also remove the \",\" at the end of the line above\
    \ \nchange   \"pooling_mode_mean_sqrt_len_tokens\": false,\nto   \"pooling_mode_mean_sqrt_len_tokens\"\
    : false\n\nHope this works for you!\nOr you could edit the Pooling.py in your\
    \ installed version of sentence-transformers, as the original author suggested:\
    \ https://github.com/Muennighoff/sgpt/issues/14#issuecomment-1405205453"
  created_at: 2023-07-24 14:22:29+00:00
  edited: true
  hidden: false
  id: 64be973501f1983a869c7199
  type: comment
- !!python/object:huggingface_hub.community.DiscussionComment
  _event:
    author:
      avatarUrl: /avatars/4a54dc76ab706cb772a735c204f657f1.svg
      fullname: KASA VENKATA SAI KRISHNA AKASH
      isHf: false
      isOrgMember: false
      isOwner: false
      isPro: false
      name: saikrishnaKas
      type: user
    createdAt: '2023-08-22T08:09:35.000Z'
    data:
      edited: false
      editors:
      - saikrishnaKas
      hidden: false
      identifiedLanguage:
        language: en
        probability: 0.9778555035591125
      isReport: false
      latest:
        author:
          avatarUrl: /avatars/4a54dc76ab706cb772a735c204f657f1.svg
          fullname: KASA VENKATA SAI KRISHNA AKASH
          isHf: false
          isPro: false
          name: saikrishnaKas
          type: user
        html: '<p>Thank You it worked for me</p>

          '
        raw: Thank You it worked for me
        updatedAt: '2023-08-22T08:09:35.072Z'
      numEdits: 0
      reactions: []
    id: 64e46d3fa236a0de4f6baff7
    type: comment
  author: saikrishnaKas
  content: Thank You it worked for me
  created_at: 2023-08-22 07:09:35+00:00
  edited: false
  hidden: false
  id: 64e46d3fa236a0de4f6baff7
  type: comment
is_pull_request: false
merge_commit_oid: null
num: 6
repo_id: hkunlp/instructor-base
repo_type: model
status: open
target_branch: null
title: Issues when using in Colab & Sentence Transformers
